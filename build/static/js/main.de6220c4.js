/*! For license information please see main.de6220c4.js.LICENSE.txt */
(function(){var __webpack_modules__={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3646:function(e,t,n){var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3269:function(e,t,n){var r=n(379);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw i}}}},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var r=n(2858),a=n(3884),o=n(379),i=n(521);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},319:function(e,t,n){var r=n(3646),a=n(6860),o=n(379),i=n(8206);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){e.exports=n(9727)},4115:function(e){e.exports=[{date:new Date("2020-01-01"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-02"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-03"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-04"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-05"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-06"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-07"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-08"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-09"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-10"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-11"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-12"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-13"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-14"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-15"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-16"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-17"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-18"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-19"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-20"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-21"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-22"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-23"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-24"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-25"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-01-26"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-01-27"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-28"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-29"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-01-30"),open:32.4,high:27,low:28,close:3.4},{date:new Date("2020-01-31"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-01"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-02"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-03"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-04"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-05"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-06"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-07"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-08"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-09"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-10"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-11"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-12"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-13"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-14"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-15"),open:32.4,high:27,low:28,close:33.4},{date:new Date("2020-02-16"),open:33,high:33.5,low:32.98,close:33.4},{date:new Date("2020-02-17"),open:33.4,high:35,low:31,close:32.4},{date:new Date("2020-02-18"),open:32.4,high:27,low:28,close:33.4}]},76:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),a=Math.abs,o=String.fromCharCode,i=Object.assign;function l(e){return e.trim()}function u(e,t,n){return e.replace(t,n)}function s(e,t){return e.indexOf(t)}function c(e,t){return 0|e.charCodeAt(t)}function g(e,t,n){return e.slice(t,n)}function d(e){return e.length}function p(e){return e.length}function h(e,t){return t.push(e),e}var f=1,C=1,I=0,m=0,v=0,b="";function A(e,t,n,r,a,o,i){return{value:e,root:t,parent:n,type:r,props:a,children:o,line:f,column:C,length:i,return:""}}function y(e,t){return i(A("",null,null,"",null,null,0),e,{length:-e.length},t)}function k(){return v=m>0?c(b,--m):0,C--,10===v&&(C=1,f--),v}function Z(){return v=m<I?c(b,m++):0,C++,10===v&&(C=1,f++),v}function S(){return c(b,m)}function w(){return m}function B(e,t){return g(b,e,t)}function x(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function G(e){return f=C=1,I=d(b=e),m=0,[]}function R(e){return b="",e}function W(e){return l(B(m-1,N(91===e?e+2:40===e?e+1:e)))}function V(e){for(;(v=S())&&v<33;)Z();return x(e)>2||x(v)>3?"":" "}function F(e,t){for(;--t&&Z()&&!(v<48||v>102||v>57&&v<65||v>70&&v<97););return B(e,w()+(t<6&&32==S()&&32==Z()))}function N(e){for(;Z();)switch(v){case e:return m;case 34:case 39:34!==e&&39!==e&&N(v);break;case 40:41===e&&N(e);break;case 92:Z()}return m}function E(e,t){for(;Z()&&e+v!==57&&(e+v!==84||47!==S()););return"/*"+B(t,m-1)+"*"+o(47===e?e:Z())}function D(e){for(;!x(S());)Z();return B(e,m)}var X="-ms-",J="-moz-",H="-webkit-",Y="comm",T="rule",M="decl",K="@keyframes";function P(e,t){for(var n="",r=p(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function z(e,t,n,r){switch(e.type){case"@import":case M:return e.return=e.return||e.value;case Y:return"";case K:return e.return=e.value+"{"+P(e.children,r)+"}";case T:e.value=e.props.join(",")}return d(n=P(e.children,r))?e.return=e.value+"{"+n+"}":""}function L(e,t){switch(function(e,t){return(((t<<2^c(e,0))<<2^c(e,1))<<2^c(e,2))<<2^c(e,3)}(e,t)){case 5103:return H+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return H+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return H+e+J+e+X+e+e;case 6828:case 4268:return H+e+X+e+e;case 6165:return H+e+X+"flex-"+e+e;case 5187:return H+e+u(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return H+e+X+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return H+e+X+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return H+e+X+u(e,"shrink","negative")+e;case 5292:return H+e+X+u(e,"basis","preferred-size")+e;case 6060:return H+"box-"+u(e,"-grow","")+H+e+X+u(e,"grow","positive")+e;case 4554:return H+u(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,H+"$1"),/(image-set)/,H+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,H+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+H+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,H+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(c(e,t+1)){case 109:if(45!==c(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+J+(108==c(e,t+3)?"$3":"$2-$3"))+e;case 115:return~s(e,"stretch")?L(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==c(e,t+1))break;case 6444:switch(c(e,d(e)-3-(~s(e,"!important")&&10))){case 107:return u(e,":",":"+H)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+H+(45===c(e,14)?"inline-":"")+"box$3$1"+H+"$2$3$1"+X+"$2box$3")+e}break;case 5936:switch(c(e,t+11)){case 114:return H+e+X+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return H+e+X+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return H+e+X+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return H+e+X+e+e}return e}function _(e){return R(O("",null,null,null,[""],e=G(e),0,[0],e))}function O(e,t,n,r,a,i,l,c,g){for(var p=0,f=0,C=l,I=0,m=0,v=0,b=1,A=1,y=1,B=0,x="",G=a,R=i,N=r,X=x;A;)switch(v=B,B=Z()){case 40:if(108!=v&&58==X.charCodeAt(C-1)){-1!=s(X+=u(W(B),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:X+=W(B);break;case 9:case 10:case 13:case 32:X+=V(v);break;case 92:X+=F(w()-1,7);continue;case 47:switch(S()){case 42:case 47:h(j(E(Z(),w()),t,n),g);break;default:X+="/"}break;case 123*b:c[p++]=d(X)*y;case 125*b:case 59:case 0:switch(B){case 0:case 125:A=0;case 59+f:m>0&&d(X)-C&&h(m>32?Q(X+";",r,n,C-1):Q(u(X," ","")+";",r,n,C-2),g);break;case 59:X+=";";default:if(h(N=U(X,t,n,p,f,a,c,x,G=[],R=[],C),i),123===B)if(0===f)O(X,t,N,N,G,i,C,c,R);else switch(I){case 100:case 109:case 115:O(e,N,N,r&&h(U(e,N,N,0,0,a,c,x,a,G=[],C),R),a,R,C,c,r?G:R);break;default:O(X,N,N,N,[""],R,0,c,R)}}p=f=m=0,b=y=1,x=X="",C=l;break;case 58:C=1+d(X),m=v;default:if(b<1)if(123==B)--b;else if(125==B&&0==b++&&125==k())continue;switch(X+=o(B),B*b){case 38:y=f>0?1:(X+="\f",-1);break;case 44:c[p++]=(d(X)-1)*y,y=1;break;case 64:45===S()&&(X+=W(Z())),I=S(),f=C=d(x=X+=D(w())),B++;break;case 45:45===v&&2==d(X)&&(b=0)}}return i}function U(e,t,n,r,o,i,s,c,d,h,f){for(var C=o-1,I=0===o?i:[""],m=p(I),v=0,b=0,y=0;v<r;++v)for(var k=0,Z=g(e,C+1,C=a(b=s[v])),S=e;k<m;++k)(S=l(b>0?I[k]+" "+Z:u(Z,/&\f/g,I[k])))&&(d[y++]=S);return A(e,t,n,0===o?T:c,d,h,f)}function j(e,t,n){return A(e,t,n,Y,o(v),g(e,2,-2),0)}function Q(e,t,n,r){return A(e,t,n,M,g(e,0,r),g(e,r+1,-1),r)}var q=function(e,t,n){for(var r=0,a=0;r=a,a=S(),38===r&&12===a&&(t[n]=1),!x(a);)Z();return B(e,m)},$=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(x(r)){case 0:38===r&&12===S()&&(t[n]=1),e[n]+=q(m-1,t,n);break;case 2:e[n]+=W(r);break;case 4:if(44===r){e[++n]=58===S()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=Z());return e}(G(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var a=[],o=$(t,a),i=n.props,l=0,u=0;l<o.length;l++)for(var s=0;s<i.length;s++,u++)e.props[u]=a[l]?o[l].replace(/&\f/g,i[s]):i[s]+" "+o[l]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case M:e.return=L(e.value,e.length);break;case K:return P([y(e,{value:u(e.value,"@","@"+H)})],r);case T:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return P([y(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return P([y(e,{props:[u(t,/:(plac\w+)/,":-webkit-input-$1")]}),y(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),y(e,{props:[u(t,/:(plac\w+)/,X+"input-$1")]})],r)}return""}))}}],ae=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var a=e.stylisPlugins||re;var o,i,l={},u=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)l[t[n]]=!0;u.push(e)}));var s,c,g=[z,(c=function(e){s.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=p(e);return function(n,r,a,o){for(var i="",l=0;l<t;l++)i+=e[l](n,r,a,o)||"";return i}}([te,ne].concat(a,g));i=function(e,t,n,r){s=n,P(_(e?e+"{"+t.styles+"}":t.styles),d),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:l,registered:{},insert:i};return h.sheet.hydrate(u),h}},620:function(e,t){"use strict";t.Z=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},8185:function(e,t,n){"use strict";n.d(t,{C:function(){return f},E:function(){return x},T:function(){return m},_:function(){return C},a:function(){return v},b:function(){return A},c:function(){return w},d:function(){return y},h:function(){return p},u:function(){return Z},w:function(){return I}});var r=n(2791),a=n.t(r,2),o=n(76),i=n(7462),l=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},u=n(2110),s=n.n(u),c=function(e,t){return s()(e,t)},g=n(5438),d=n(4804),p={}.hasOwnProperty,h=(0,r.createContext)("undefined"!==typeof HTMLElement?(0,o.Z)({key:"css"}):null);var f=h.Provider,C=function(){return(0,r.useContext)(h)},I=function(e){return(0,r.forwardRef)((function(t,n){var a=(0,r.useContext)(h);return e(t,a,n)}))},m=(0,r.createContext)({});var v=function(){return(0,r.useContext)(m)},b=l((function(e){return l((function(t){return function(e,t){return"function"===typeof t?t(e):(0,i.Z)({},e,t)}(e,t)}))})),A=function(e){var t=(0,r.useContext)(m);return e.theme!==t&&(t=b(t)(e.theme)),(0,r.createElement)(m.Provider,{value:t},e.children)};function y(e){var t=e.displayName||e.name||"Component",n=function(t,n){var a=(0,r.useContext)(m);return(0,r.createElement)(e,(0,i.Z)({theme:a,ref:n},t))},a=(0,r.forwardRef)(n);return a.displayName="WithTheme("+t+")",c(a,e)}var k=a.useInsertionEffect?a.useInsertionEffect:function(e){e()};function Z(e){k(e)}var S="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",w=function(e,t){var n={};for(var r in t)p.call(t,r)&&(n[r]=t[r]);return n[S]=e,n},B=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,g.hC)(t,n,r);Z((function(){return(0,g.My)(t,n,r)}));return null},x=I((function(e,t,n){var a=e.css;"string"===typeof a&&void 0!==t.registered[a]&&(a=t.registered[a]);var o=e[S],i=[a],l="";"string"===typeof e.className?l=(0,g.fp)(t.registered,i,e.className):null!=e.className&&(l=e.className+" ");var u=(0,d.O)(i,void 0,(0,r.useContext)(m));l+=t.key+"-"+u.name;var s={};for(var c in e)p.call(e,c)&&"css"!==c&&c!==S&&(s[c]=e[c]);return s.ref=n,s.className=l,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(B,{cache:t,serialized:u,isStringTag:"string"===typeof o}),(0,r.createElement)(o,s))}))},2554:function(e,t,n){"use strict";var r;n.r(t),n.d(t,{CacheProvider:function(){return o.C},ThemeContext:function(){return o.T},ThemeProvider:function(){return o.b},__unsafe_useEmotionCache:function(){return o._},useTheme:function(){return o.a},withEmotionCache:function(){return o.w},withTheme:function(){return o.d},ClassNames:function(){return C},Global:function(){return c},createElement:function(){return u},css:function(){return g},jsx:function(){return u},keyframes:function(){return d}});var a=n(2791),o=(n(76),n(8185)),i=(n(2110),n(5438)),l=n(4804),u=function(e,t){var n=arguments;if(null==t||!o.h.call(t,"css"))return a.createElement.apply(void 0,n);var r=n.length,i=new Array(r);i[0]=o.E,i[1]=(0,o.c)(e,t);for(var l=2;l<r;l++)i[l]=n[l];return a.createElement.apply(null,i)},s=(r||(r=n.t(a,2))).useInsertionEffect?(r||(r=n.t(a,2))).useInsertionEffect:a.useLayoutEffect,c=(0,o.w)((function(e,t){var n=e.styles,r=(0,l.O)([n],void 0,(0,a.useContext)(o.T)),u=(0,a.useRef)();return s((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,o=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==o&&(a=!0,o.setAttribute("data-emotion",e),n.hydrate([o])),u.current=[n,a],function(){n.flush()}}),[t]),s((function(){var e=u.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&(0,i.My)(t,r.next,!0),n.tags.length){var a=n.tags[n.tags.length-1].nextElementSibling;n.before=a,n.flush()}t.insert("",r,n,!1)}}),[t,r.name]),null}));function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,l.O)(t)}var d=function(){var e=g.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},p=function e(t){for(var n=t.length,r=0,a="";r<n;r++){var o=t[r];if(null!=o){var i=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))i=e(o);else for(var l in i="",o)o[l]&&l&&(i&&(i+=" "),i+=l);break;default:i=o}i&&(a&&(a+=" "),a+=i)}}return a};function h(e,t,n){var r=[],a=(0,i.fp)(e,r,n);return r.length<2?n:a+t(r)}var f=function(e){var t=e.cache,n=e.serializedArr;(0,o.u)((function(){for(var e=0;e<n.length;e++)(0,i.My)(t,n[e],!1)}));return null},C=(0,o.w)((function(e,t){var n=[],r=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var o=(0,l.O)(r,t.registered);return n.push(o),(0,i.hC)(t,o,!1),t.key+"-"+o.name},u={css:r,cx:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return h(t.registered,r,p(n))},theme:(0,a.useContext)(o.T)},s=e.children(u);return!0,(0,a.createElement)(a.Fragment,null,(0,a.createElement)(f,{cache:t,serializedArr:n}),s)}))},4804:function(e,t,n){"use strict";n.d(t,{O:function(){return f}});var r=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},a=n(3840),o=n(620),i=/[A-Z]|^ms/g,l=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},s=function(e){return null!=e&&"boolean"!==typeof e},c=(0,o.Z)((function(e){return u(e)?e:e.replace(i,"-$&").toLowerCase()})),g=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(l,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===a.Z[e]||u(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=d(e,t,n[a])+";";else for(var o in n){var i=n[o];if("object"!==typeof i)null!=t&&void 0!==t[i]?r+=o+"{"+t[i]+"}":s(i)&&(r+=c(o)+":"+g(o,i)+";");else if(!Array.isArray(i)||"string"!==typeof i[0]||null!=t&&void 0!==t[i[0]]){var l=d(e,t,i);switch(o){case"animation":case"animationName":r+=c(o)+":"+l+";";break;default:r+=o+"{"+l+"}"}}else for(var u=0;u<i.length;u++)s(i[u])&&(r+=c(o)+":"+g(o,i[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=p,o=n(e);return p=a,d(e,t,o)}}if(null==t)return n;var i=t[n];return void 0!==i?i:n}var p,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var a=!0,o="";p=void 0;var i=e[0];null==i||void 0===i.raw?(a=!1,o+=d(n,t,i)):o+=i[0];for(var l=1;l<e.length;l++)o+=d(n,t,e[l]),a&&(o+=i[l]);h.lastIndex=0;for(var u,s="";null!==(u=h.exec(o));)s+="-"+u[1];return{name:r(o)+s,styles:o,next:p}}},3840:function(e,t){"use strict";t.Z={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},5438:function(e,t,n){"use strict";n.d(t,{fp:function(){return r},My:function(){return o},hC:function(){return a}});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var a=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){a(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}}},7829:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},767:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(a){r[a]=e[a].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},5159:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7829),a={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function o(e,t){return a[t]||"".concat(r.Z.generate(e),"-").concat(t)}},208:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5159);function a(e,t){var n={};return t.forEach((function(t){n[t]=(0,r.Z)(e,t)})),n}},3518:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),o=n(184),i=(0,a.default)((0,o.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download");t.Z=i},5403:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),o=n(184),i=(0,a.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=i},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(4421)},6532:function(e,t){"use strict";var n=60103,r=60106,a=60107,o=60108,i=60114,l=60109,u=60110,s=60112,c=60113,g=60120,d=60115,p=60116,h=60121,f=60122,C=60117,I=60129,m=60131;if("function"===typeof Symbol&&Symbol.for){var v=Symbol.for;n=v("react.element"),r=v("react.portal"),a=v("react.fragment"),o=v("react.strict_mode"),i=v("react.profiler"),l=v("react.provider"),u=v("react.context"),s=v("react.forward_ref"),c=v("react.suspense"),g=v("react.suspense_list"),d=v("react.memo"),p=v("react.lazy"),h=v("react.block"),f=v("react.server.block"),C=v("react.fundamental"),I=v("react.debug_trace_mode"),m=v("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case i:case o:case c:case g:return e;default:switch(e=e&&e.$$typeof){case u:case s:case p:case d:case l:return e;default:return t}}case r:return t}}}},8457:function(e,t,n){"use strict";n(6532)},7107:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var r=n(7462),a=n(3366),o=n(2466),i=n(5080),l=n(4942);function u(e,t,n){var a;return(0,r.Z)({toolbar:(a={minHeight:56},(0,l.Z)(a,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,l.Z)(a,e.up("sm"),{minHeight:64}),a)},n)}var s=n(6189),c=n(2065),g={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},h={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},f={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},C={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},I={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},m={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},v=["mode","contrastThreshold","tonalOffset"],b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:g.white,default:g.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},A={text:{primary:g.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:g.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function y(e,t,n,r){var a=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,c.$n)(e.main,a):"dark"===t&&(e.dark=(0,c._j)(e.main,o)))}function k(e){var t=e.mode,n=void 0===t?"light":t,i=e.contrastThreshold,l=void 0===i?3:i,u=e.tonalOffset,k=void 0===u?.2:u,Z=(0,a.Z)(e,v),S=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:C[200],light:C[50],dark:C[400]}:{main:C[700],light:C[400],dark:C[800]}}(n),w=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(n),B=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:h[500],light:h[300],dark:h[700]}:{main:h[700],light:h[400],dark:h[800]}}(n),x=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:I[400],light:I[300],dark:I[700]}:{main:I[700],light:I[500],dark:I[900]}}(n),G=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:m[800],light:m[500],dark:m[900]}}(n),R=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[400],light:f[300],dark:f[700]}:{main:"#ed6c02",light:f[500],dark:f[900]}}(n);function W(e){return(0,c.mi)(e,A.text.primary)>=l?A.text.primary:b.text.primary}var V=function(e){var t=e.color,n=e.name,a=e.mainShade,o=void 0===a?500:a,i=e.lightShade,l=void 0===i?300:i,u=e.darkShade,c=void 0===u?700:u;if(!(t=(0,r.Z)({},t)).main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,s.Z)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof t.main)throw new Error((0,s.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return y(t,"light",l,k),y(t,"dark",c,k),t.contrastText||(t.contrastText=W(t.main)),t},F={dark:A,light:b};return(0,o.Z)((0,r.Z)({common:g,mode:n,primary:V({color:S,name:"primary"}),secondary:V({color:w,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:V({color:B,name:"error"}),warning:V({color:R,name:"warning"}),info:V({color:x,name:"info"}),success:V({color:G,name:"success"}),grey:d,contrastThreshold:l,getContrastText:W,augmentColor:V,tonalOffset:k},F[n]),Z)}var Z=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var S={textTransform:"uppercase"},w='"Roboto", "Helvetica", "Arial", sans-serif';function B(e,t){var n="function"===typeof t?t(e):t,i=n.fontFamily,l=void 0===i?w:i,u=n.fontSize,s=void 0===u?14:u,c=n.fontWeightLight,g=void 0===c?300:c,d=n.fontWeightRegular,p=void 0===d?400:d,h=n.fontWeightMedium,f=void 0===h?500:h,C=n.fontWeightBold,I=void 0===C?700:C,m=n.htmlFontSize,v=void 0===m?16:m,b=n.allVariants,A=n.pxToRem,y=(0,a.Z)(n,Z);var k=s/14,B=A||function(e){return"".concat(e/v*k,"rem")},x=function(e,t,n,a,o){return(0,r.Z)({fontFamily:l,fontWeight:e,fontSize:B(t),lineHeight:n},l===w?{letterSpacing:"".concat((i=a/t,Math.round(1e5*i)/1e5),"em")}:{},o,b);var i},G={h1:x(g,96,1.167,-1.5),h2:x(g,60,1.2,-.5),h3:x(p,48,1.167,0),h4:x(p,34,1.235,.25),h5:x(p,24,1.334,0),h6:x(f,20,1.6,.15),subtitle1:x(p,16,1.75,.15),subtitle2:x(f,14,1.57,.1),body1:x(p,16,1.5,.15),body2:x(p,14,1.43,.15),button:x(f,14,1.75,.4,S),caption:x(p,12,1.66,.4),overline:x(p,12,2.66,1,S)};return(0,o.Z)((0,r.Z)({htmlFontSize:v,pxToRem:B,fontFamily:l,fontSize:s,fontWeightLight:g,fontWeightRegular:p,fontWeightMedium:f,fontWeightBold:I},G),y,{clone:!1})}function x(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var G=["none",x(0,2,1,-1,0,1,1,0,0,1,3,0),x(0,3,1,-2,0,2,2,0,0,1,5,0),x(0,3,3,-2,0,3,4,0,0,1,8,0),x(0,2,4,-1,0,4,5,0,0,1,10,0),x(0,3,5,-1,0,5,8,0,0,1,14,0),x(0,3,5,-1,0,6,10,0,0,1,18,0),x(0,4,5,-2,0,7,10,1,0,2,16,1),x(0,5,5,-3,0,8,10,1,0,3,14,2),x(0,5,6,-3,0,9,12,1,0,3,16,2),x(0,6,6,-3,0,10,14,1,0,4,18,3),x(0,6,7,-4,0,11,15,1,0,4,20,3),x(0,7,8,-4,0,12,17,2,0,5,22,4),x(0,7,8,-4,0,13,19,2,0,5,24,4),x(0,7,9,-4,0,14,21,2,0,5,26,4),x(0,8,9,-5,0,15,22,2,0,6,28,5),x(0,8,10,-5,0,16,24,2,0,6,30,5),x(0,8,11,-5,0,17,26,2,0,6,32,5),x(0,9,11,-5,0,18,28,2,0,7,34,6),x(0,9,12,-6,0,19,29,2,0,7,36,6),x(0,10,13,-6,0,20,31,3,0,8,38,7),x(0,10,13,-6,0,21,33,3,0,8,40,7),x(0,10,14,-6,0,22,35,3,0,8,42,7),x(0,11,14,-7,0,23,36,3,0,9,44,8),x(0,11,15,-7,0,24,38,3,0,9,46,8)],R=["duration","easing","delay"],W={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},V={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function F(e){return"".concat(Math.round(e),"ms")}function N(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function E(e){var t=(0,r.Z)({},W,e.easing),n=(0,r.Z)({},V,e.duration);return(0,r.Z)({getAutoHeightDuration:N,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.duration,i=void 0===o?n.standard:o,l=r.easing,u=void 0===l?t.easeInOut:l,s=r.delay,c=void 0===s?0:s;(0,a.Z)(r,R);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof i?i:F(i)," ").concat(u," ").concat("string"===typeof c?c:F(c))})).join(",")}},e,{easing:t,duration:n})}var D={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},X=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,l=e.palette,s=void 0===l?{}:l,c=e.transitions,g=void 0===c?{}:c,d=e.typography,p=void 0===d?{}:d,h=(0,a.Z)(e,X),f=k(s),C=(0,i.Z)(e),I=(0,o.Z)(C,{mixins:u(C.breakpoints,C.spacing,n),palette:f,shadows:G.slice(),typography:B(f,p),transitions:E(g),zIndex:(0,r.Z)({},D)});I=(0,o.Z)(I,h);for(var m=arguments.length,v=new Array(m>1?m-1:0),b=1;b<m;b++)v[b-1]=arguments[b];return I=v.reduce((function(e,t){return(0,o.Z)(e,t)}),I)}var H=J},6482:function(e,t,n){"use strict";var r=(0,n(7107).Z)();t.Z=r},7630:function(e,t,n){"use strict";n.d(t,{ZP:function(){return B},FO:function(){return Z},Dz:function(){return S}});var r=n(3433),a=n(9439),o=n(7462),i=n(3366),l=n(568),u=n(5080),s=n(7312),c=["variant"];function g(e){return 0===e.length}function d(e){var t=e.variant,n=(0,i.Z)(e,c),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?g(r)?e[t]:(0,s.Z)(e[t]):"".concat(g(r)?t:(0,s.Z)(t)).concat((0,s.Z)(e[t].toString()))})),r}var p=n(104),h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],f=["theme"],C=["theme"];function I(e){return 0===Object.keys(e).length}var m=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},v=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=d(e.props);r[t]=e.style})),r},b=function(e,t,n,r){var a,o,i=e.ownerState,l=void 0===i?{}:i,u=[],s=null==n||null==(a=n.components)||null==(o=a[r])?void 0:o.variants;return s&&s.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){l[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[d(n.props)])})),u};function A(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var y=(0,u.Z)();var k=n(6482),Z=function(e){return A(e)&&"classes"!==e},S=A,w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?y:t,u=e.rootShouldForwardProp,s=void 0===u?A:u,c=e.slotShouldForwardProp,g=void 0===c?A:c,d=e.styleFunctionSx,k=void 0===d?p.Z:d;return function(e){var t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.name,d=u.slot,p=u.skipVariantsResolver,y=u.skipSx,Z=u.overridesResolver,S=(0,i.Z)(u,h),w=void 0!==p?p:d&&"Root"!==d||!1,B=y||!1;var x=A;"Root"===d?x=s:d&&(x=g);var G=(0,l.ZP)(e,(0,o.Z)({shouldForwardProp:x,label:t},S)),R=function(e){for(var t=arguments.length,l=new Array(t>1?t-1:0),u=1;u<t;u++)l[u-1]=arguments[u];var s=l?l.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,a=(0,i.Z)(t,f);return e((0,o.Z)({theme:I(r)?n:r},a))}:e})):[],g=e;c&&Z&&s.push((function(e){var t=I(e.theme)?n:e.theme,r=m(c,t);if(r){var o={};return Object.entries(r).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];o[r]="function"===typeof i?i(e):i})),Z(e,o)}return null})),c&&!w&&s.push((function(e){var t=I(e.theme)?n:e.theme;return b(e,v(c,t),t,c)})),B||s.push((function(e){var t=I(e.theme)?n:e.theme;return k((0,o.Z)({},e,{theme:t}))}));var d=s.length-l.length;if(Array.isArray(e)&&d>0){var p=new Array(d).fill("");(g=[].concat((0,r.Z)(e),(0,r.Z)(p))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(p))}else"function"===typeof e&&e.__emotion_real!==e&&(g=function(t){var r=t.theme,a=(0,i.Z)(t,C);return e((0,o.Z)({theme:I(r)?n:r},a))});var h=G.apply(void 0,[g].concat((0,r.Z)(s)));return h};return G.withConfig&&(R.withConfig=G.withConfig),R}}({defaultTheme:k.Z,rootShouldForwardProp:Z}),B=w},1046:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5735);var a=n(418);function o(e){var t=e.props,n=e.name,o=e.defaultTheme,i=function(e){var t=e.theme,n=e.name,a=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,a):a}({theme:(0,a.Z)(o),name:n,props:t});return i}var i=n(6482);function l(e){return o({props:e.props,name:e.name,defaultTheme:i.Z})}},4036:function(e,t,n){"use strict";var r=n(7312);t.Z=r.Z},9201:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(7462),a=n(2791),o=n(3366),i=n(8182),l=n(767),u=n(4036),s=n(1046),c=n(7630),g=n(5159);function d(e){return(0,g.Z)("MuiSvgIcon",e)}(0,n(208).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(184),h=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],f=(0,c.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,u.Z)(n.color))],t["fontSize".concat((0,u.Z)(n.fontSize))]]}})((function(e){var t,n,r,a,o,i,l,u,s,c,g,d,p,h,f,C,I,m=e.theme,v=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=m.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=m.transitions)||null==(a=r.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(o=m.typography)||null==(i=o.pxToRem)?void 0:i.call(o,20))||"1.25rem",medium:(null==(l=m.typography)||null==(u=l.pxToRem)?void 0:u.call(l,24))||"1.5rem",large:(null==(s=m.typography)||null==(c=s.pxToRem)?void 0:c.call(s,35))||"2.1875"}[v.fontSize],color:null!=(g=null==(d=m.palette)||null==(p=d[v.color])?void 0:p.main)?g:{action:null==(h=m.palette)||null==(f=h.action)?void 0:f.active,disabled:null==(C=m.palette)||null==(I=C.action)?void 0:I.disabled,inherit:void 0}[v.color]}})),C=a.forwardRef((function(e,t){var n=(0,s.Z)({props:e,name:"MuiSvgIcon"}),a=n.children,c=n.className,g=n.color,C=void 0===g?"inherit":g,I=n.component,m=void 0===I?"svg":I,v=n.fontSize,b=void 0===v?"medium":v,A=n.htmlColor,y=n.inheritViewBox,k=void 0!==y&&y,Z=n.titleAccess,S=n.viewBox,w=void 0===S?"0 0 24 24":S,B=(0,o.Z)(n,h),x=(0,r.Z)({},n,{color:C,component:m,fontSize:b,instanceFontSize:e.fontSize,inheritViewBox:k,viewBox:w}),G={};k||(G.viewBox=w);var R=function(e){var t=e.color,n=e.fontSize,r=e.classes,a={root:["root","inherit"!==t&&"color".concat((0,u.Z)(t)),"fontSize".concat((0,u.Z)(n))]};return(0,l.Z)(a,d,r)}(x);return(0,p.jsxs)(f,(0,r.Z)({as:m,className:(0,i.Z)(R.root,c),ownerState:x,focusable:"false",color:A,"aria-hidden":!Z||void 0,role:Z?"img":void 0,ref:t},G,B,{children:[a,Z?(0,p.jsx)("title",{children:Z}):null]}))}));C.muiName="SvgIcon";var I=C;function m(e,t){var n=function(n,a){return(0,p.jsx)(I,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:a},n,{children:e}))};return n.muiName=I.muiName,a.memo(a.forwardRef(n))}},3199:function(e,t,n){"use strict";var r=n(3981);t.Z=r.Z},4421:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return a.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return i.Z},debounce:function(){return l.Z},deprecatedPropType:function(){return u},isMuiElement:function(){return s.Z},ownerDocument:function(){return c.Z},ownerWindow:function(){return g.Z},requirePropFactory:function(){return d},setRef:function(){return p},unstable_ClassNameGenerator:function(){return A},unstable_useEnhancedEffect:function(){return h.Z},unstable_useId:function(){return f.Z},unsupportedProp:function(){return C},useControlled:function(){return I.Z},useEventCallback:function(){return m.Z},useForkRef:function(){return v.Z},useIsFocusVisible:function(){return b.Z}});var r=n(7829),a=n(4036),o=n(8949).Z,i=n(9201),l=n(3199);var u=function(e,t){return function(){return null}},s=n(9103),c=n(8301),g=n(7602);n(7462);var d=function(e,t){return function(){return null}},p=n(2971).Z,h=n(162),f=n(7384);var C=function(e,t,n,r,a){return null},I=n(8278),m=n(9683),v=n(2071),b=n(3031),A={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},9103:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791);var a=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},8301:function(e,t,n){"use strict";var r=n(1907);t.Z=r.Z},7602:function(e,t,n){"use strict";var r=n(7979);t.Z=r.Z},8278:function(e,t,n){"use strict";var r=n(8959);t.Z=r.Z},162:function(e,t,n){"use strict";var r=n(5721);t.Z=r.Z},9683:function(e,t,n){"use strict";var r=n(8956);t.Z=r.Z},2071:function(e,t,n){"use strict";var r=n(7563);t.Z=r.Z},7384:function(e,t,n){"use strict";var r=n(6248);t.Z=r.Z},3031:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r,a=n(2791),o=!0,i=!1,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function s(){o=!1}function c(){"hidden"===this.visibilityState&&i&&(o=!0)}function g(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var d=function(){var e=a.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",s,!0),t.addEventListener("pointerdown",s,!0),t.addEventListener("touchstart",s,!0),t.addEventListener("visibilitychange",c,!0))}),[]),t=a.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!g(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(i=!0,window.clearTimeout(r),r=window.setTimeout((function(){i=!1}),100),t.current=!1,!0)},ref:e}}},568:function(e,t,n){"use strict";n.d(t,{ZP:function(){return A}});var r=n(2791),a=n.t(r,2),o=n(7462),i=n(620),l=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,u=(0,i.Z)((function(e){return l.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),s=n(8185),c=n(5438),g=n(4804),d=u,p=function(e){return"theme"!==e},h=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:p},f=function(e,t,n){var r;if(t){var a=t.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},C=a.useInsertionEffect?a.useInsertionEffect:function(e){e()};var I=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,c.hC)(t,n,r);!function(e){C(e)}((function(){return(0,c.My)(t,n,r)}));return null},m=function e(t,n){var a,i,l=t.__emotion_real===t,u=l&&t.__emotion_base||t;void 0!==n&&(a=n.label,i=n.target);var d=f(t,n,l),p=d||h(u),C=!p("as");return function(){var m=arguments,v=l&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&v.push("label:"+a+";"),null==m[0]||void 0===m[0].raw)v.push.apply(v,m);else{0,v.push(m[0][0]);for(var b=m.length,A=1;A<b;A++)v.push(m[A],m[0][A])}var y=(0,s.w)((function(e,t,n){var a=C&&e.as||u,o="",l=[],f=e;if(null==e.theme){for(var m in f={},e)f[m]=e[m];f.theme=(0,r.useContext)(s.T)}"string"===typeof e.className?o=(0,c.fp)(t.registered,l,e.className):null!=e.className&&(o=e.className+" ");var b=(0,g.O)(v.concat(l),t.registered,f);o+=t.key+"-"+b.name,void 0!==i&&(o+=" "+i);var A=C&&void 0===d?h(a):p,y={};for(var k in e)C&&"as"===k||A(k)&&(y[k]=e[k]);return y.className=o,y.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(I,{cache:t,serialized:b,isStringTag:"string"===typeof a}),(0,r.createElement)(a,y))}));return y.displayName=void 0!==a?a:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=u,y.__emotion_styles=v,y.__emotion_forwardProp=d,Object.defineProperty(y,"toString",{value:function(){return"."+i}}),y.withComponent=function(t,r){return e(t,(0,o.Z)({},n,r,{shouldForwardProp:f(y,r,!0)})).apply(void 0,v)},y}},v=m.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));var b=v;function A(e,t){return b(e,t)}},1184:function(e,t,n){"use strict";n.d(t,{VO:function(){return r},k9:function(){return o},W8:function(){return i},L7:function(){return l}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,n){var o=e.theme||{};if(Array.isArray(t)){var i=o.breakpoints||a;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var l=o.breakpoints||a;return Object.keys(t).reduce((function(e,a){if(-1!==Object.keys(l.values||r).indexOf(a)){e[l.up(a)]=n(t[a],a)}else{var o=a;e[o]=t[o]}return e}),{})}return n(t)}function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function l(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},2065:function(e,t,n){"use strict";n.d(t,{mi:function(){return u},Fq:function(){return s},_j:function(){return c},$n:function(){return g}});var r=n(6189);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var a,i=e.substring(t+1,e.length-1);if("color"===n){if(a=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a))throw new Error((0,r.Z)(10,a))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:a}}function i(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function l(e){var t="hsl"===(e=o(e)).type?o(function(e){var t=(e=o(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,l=r*Math.min(a,1-a),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-l*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",c=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(s+="a",c.push(t[3])),i({type:s,values:c})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){var n=l(e),r=l(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function s(e,t){return e=o(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,i(e)}function c(e,t){if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return i(e)}function g(e,t){if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return i(e)}},5080:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(7462),a=n(3366),o=n(2466),i=n(4942),l=["values","unit","step"];function u(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,o=e.unit,u=void 0===o?"px":o,s=e.step,c=void 0===s?5:s,g=(0,a.Z)(e,l),d=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,i.Z)({},t.key,t.val))}),{})}(n),p=Object.keys(d);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(u,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-c/100).concat(u,")")}function C(e,t){var r=p.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(u,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[p[r]]?n[p[r]]:t)-c/100).concat(u,")")}return(0,r.Z)({keys:p,values:d,up:h,down:f,between:C,only:function(e){return p.indexOf(e)+1<p.length?C(e,p[p.indexOf(e)+1]):h(e)},not:function(e){var t=p.indexOf(e);return 0===t?h(p[1]):t===p.length-1?f(p[t]):C(e,p[p.indexOf(e)+1]).replace("@media","@media not all and")},unit:u},g)}var s={borderRadius:4},c=n(5682);function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,c.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=0===n.length?[1]:n;return a.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var d=["breakpoints","palette","spacing","shape"];var p=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,i=e.palette,l=void 0===i?{}:i,c=e.spacing,p=e.shape,h=void 0===p?{}:p,f=(0,a.Z)(e,d),C=u(n),I=g(c),m=(0,o.Z)({breakpoints:C,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},l),spacing:I,shape:(0,r.Z)({},s,h)},f),v=arguments.length,b=new Array(v>1?v-1:0),A=1;A<v;A++)b[A-1]=arguments[A];return m=b.reduce((function(e,t){return(0,o.Z)(e,t)}),m)}},6001:function(e,t,n){"use strict";n.d(t,{Gc:function(){return U},G$:function(){return O}});var r=n(8529),a=n(8247);var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),o=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,a.Z)(t,r[n](e)):t}),{})};return o.propTypes={},o.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),o},i=n(5682),l=n(1184);function u(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var s=(0,r.Z)({prop:"border",themeKey:"borders",transform:u}),c=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:u}),g=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:u}),d=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:u}),p=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:u}),h=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),f=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),C=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),I=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),v=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,i.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,l.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,i.NA)(t,e)}}))}return null};v.propTypes={},v.filterProps=["borderRadius"];var b=o(s,c,g,d,p,h,f,C,I,m,v),A=o((0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),(0,r.Z)({prop:"display"}),(0,r.Z)({prop:"overflow"}),(0,r.Z)({prop:"textOverflow"}),(0,r.Z)({prop:"visibility"}),(0,r.Z)({prop:"whiteSpace"})),y=o((0,r.Z)({prop:"flexBasis"}),(0,r.Z)({prop:"flexDirection"}),(0,r.Z)({prop:"flexWrap"}),(0,r.Z)({prop:"justifyContent"}),(0,r.Z)({prop:"alignItems"}),(0,r.Z)({prop:"alignContent"}),(0,r.Z)({prop:"order"}),(0,r.Z)({prop:"flex"}),(0,r.Z)({prop:"flexGrow"}),(0,r.Z)({prop:"flexShrink"}),(0,r.Z)({prop:"alignSelf"}),(0,r.Z)({prop:"justifyItems"}),(0,r.Z)({prop:"justifySelf"})),k=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,i.eI)(e.theme,"spacing",8,"gap");return(0,l.k9)(e,e.gap,(function(e){return{gap:(0,i.NA)(t,e)}}))}return null};k.propTypes={},k.filterProps=["gap"];var Z=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,i.eI)(e.theme,"spacing",8,"columnGap");return(0,l.k9)(e,e.columnGap,(function(e){return{columnGap:(0,i.NA)(t,e)}}))}return null};Z.propTypes={},Z.filterProps=["columnGap"];var S=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,i.eI)(e.theme,"spacing",8,"rowGap");return(0,l.k9)(e,e.rowGap,(function(e){return{rowGap:(0,i.NA)(t,e)}}))}return null};S.propTypes={},S.filterProps=["rowGap"];var w=o(k,Z,S,(0,r.Z)({prop:"gridColumn"}),(0,r.Z)({prop:"gridRow"}),(0,r.Z)({prop:"gridAutoFlow"}),(0,r.Z)({prop:"gridAutoColumns"}),(0,r.Z)({prop:"gridAutoRows"}),(0,r.Z)({prop:"gridTemplateColumns"}),(0,r.Z)({prop:"gridTemplateRows"}),(0,r.Z)({prop:"gridTemplateAreas"}),(0,r.Z)({prop:"gridArea"})),B=o((0,r.Z)({prop:"position"}),(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,r.Z)({prop:"top"}),(0,r.Z)({prop:"right"}),(0,r.Z)({prop:"bottom"}),(0,r.Z)({prop:"left"})),x=o((0,r.Z)({prop:"color",themeKey:"palette"}),(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,r.Z)({prop:"backgroundColor",themeKey:"palette"})),G=(0,r.Z)({prop:"boxShadow",themeKey:"shadows"});function R(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var W=(0,r.Z)({prop:"width",transform:R}),V=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,l.k9)(e,e.maxWidth,(function(t){var n,r,a;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(a=r.values)?void 0:a[t])||l.VO[t]||R(t)}}))}return null};V.filterProps=["maxWidth"];var F=(0,r.Z)({prop:"minWidth",transform:R}),N=(0,r.Z)({prop:"height",transform:R}),E=(0,r.Z)({prop:"maxHeight",transform:R}),D=(0,r.Z)({prop:"minHeight",transform:R}),X=((0,r.Z)({prop:"size",cssProperty:"width",transform:R}),(0,r.Z)({prop:"size",cssProperty:"height",transform:R}),o(W,V,F,N,E,D,(0,r.Z)({prop:"boxSizing"}))),J=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),H=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),Y=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),T=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),M=(0,r.Z)({prop:"letterSpacing"}),K=(0,r.Z)({prop:"textTransform"}),P=(0,r.Z)({prop:"lineHeight"}),z=(0,r.Z)({prop:"textAlign"}),L=o((0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),J,H,Y,T,M,P,z,K),_={borders:b.filterProps,display:A.filterProps,flexbox:y.filterProps,grid:w.filterProps,positions:B.filterProps,palette:x.filterProps,shadows:G.filterProps,sizing:X.filterProps,spacing:i.ZP.filterProps,typography:L.filterProps},O={borders:b,display:A,flexbox:y,grid:w,positions:B,palette:x,shadows:G,sizing:X,spacing:i.ZP,typography:L},U=Object.keys(_).reduce((function(e,t){return _[t].forEach((function(n){e[n]=O[t]})),e}),{})},8247:function(e,t,n){"use strict";var r=n(2466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:function(e,t,n){"use strict";n.d(t,{hB:function(){return f},eI:function(){return h},ZP:function(){return y},NA:function(){return C}});var r=n(9439),a=n(1184),o=n(8529),i=n(8247);var l={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},s={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!s[e])return[e];e=s[e]}var t=e.split(""),n=(0,r.Z)(t,2),a=n[0],o=n[1],i=l[a],c=u[o]||"";return Array.isArray(c)?c.map((function(e){return i+e})):[i+c]})),g=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[].concat(g,d);function h(e,t,n,r){var a=(0,o.D)(e,t)||n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function f(e){return h(e,"spacing",8)}function C(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function I(e,t,n,r){if(-1===t.indexOf(n))return null;var o=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=C(t,n),e}),{})}}(c(n),r),i=e[n];return(0,a.k9)(e,i,o)}function m(e,t){var n=f(e.theme);return Object.keys(e).map((function(r){return I(e,t,r,n)})).reduce(i.Z,{})}function v(e){return m(e,g)}function b(e){return m(e,d)}function A(e){return m(e,p)}v.propTypes={},v.filterProps=g,b.propTypes={},b.filterProps=d,A.propTypes={},A.filterProps=p;var y=A},8529:function(e,t,n){"use strict";n.d(t,{D:function(){return i}});var r=n(4942),a=n(7312),o=n(1184);function i(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}function l(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||a:i(e,n)||a,t&&(r=t(r)),r}t.Z=function(e){var t=e.prop,n=e.cssProperty,u=void 0===n?e.prop:n,s=e.themeKey,c=e.transform,g=function(e){if(null==e[t])return null;var n=e[t],g=i(e.theme,s)||{};return(0,o.k9)(e,n,(function(e){var n=l(g,c,e);return e===n&&"string"===typeof e&&(n=l(g,c,"".concat(t).concat("default"===e?"":(0,a.Z)(e)),e)),!1===u?n:(0,r.Z)({},u,n)}))};return g.propTypes={},g.filterProps=[t],g}},104:function(e,t,n){"use strict";var r=n(4942),a=n(8247),o=n(6001),i=n(1184);function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),a=new Set(r);return t.every((function(e){return a.size===Object.keys(e).length}))}function u(e,t){return"function"===typeof e?e(t):e}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.G$,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,a){var o,i=(o={},(0,r.Z)(o,e,n),(0,r.Z)(o,"theme",a),o),l=t[e];return l?l(i):(0,r.Z)({},e,n)}function s(e){var o=e||{},c=o.sx,g=o.theme,d=void 0===g?{}:g;if(!c)return null;function p(e){var o=e;if("function"===typeof e)o=e(d);else if("object"!==typeof e)return e;if(!o)return null;var c=(0,i.W8)(d.breakpoints),g=Object.keys(c),p=c;return Object.keys(o).forEach((function(e){var c=u(o[e],d);if(null!==c&&void 0!==c)if("object"===typeof c)if(t[e])p=(0,a.Z)(p,n(e,c,d));else{var g=(0,i.k9)({theme:d},c,(function(t){return(0,r.Z)({},e,t)}));l(g,c)?p[e]=s({sx:c,theme:d}):p=(0,a.Z)(p,g)}else p=(0,a.Z)(p,n(e,c,d))})),(0,i.L7)(g,p)}return Array.isArray(c)?c.map(p):p(c)}return s}();s.filterProps=["sx"],t.Z=s},418:function(e,t,n){"use strict";var r=n(5080),a=n(7301),o=(0,r.Z)();t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,a.Z)(e)}},7301:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(2791);var a=r.createContext(null);function o(){return r.useContext(a)}function i(e){return 0===Object.keys(e).length}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o();return!t||i(t)?e:t}},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6189);function a(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},8949:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,{Z:function(){return r}})},3981:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];var l=function(){e.apply(r,o)};clearTimeout(t),t=setTimeout(l,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},2466:function(e,t,n){"use strict";n.d(t,{P:function(){return a},Z:function(){return o}});var r=n(7462);function a(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?(0,r.Z)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(a(t[r])&&r in e&&a(e[r])?i[r]=o(e[r],t[r],n):i[r]=t[r])})),i}},6189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},1907:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},7979:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1907);function a(e){return(0,r.Z)(e).defaultView||window}},5735:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7462);function a(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}},2971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},8959:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9439),a=n(2791);function o(e){var t=e.controlled,n=e.default,o=(e.name,e.state,a.useRef(void 0!==t).current),i=a.useState(n),l=(0,r.Z)(i,2),u=l[0],s=l[1];return[o?t:u,a.useCallback((function(e){o||s(e)}),[])]}},5721:function(e,t,n){"use strict";var r=n(2791),a="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=a},8956:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2791),a=n(5721);function o(e){var t=r.useRef(e);return(0,a.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},7563:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2791),a=n(2971);function o(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,a.Z)(e,n),(0,a.Z)(t,n)}}),[e,t])}},6248:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return u}});var a=n(9439),o=n(2791),i=0;var l=(r||(r=n.t(o,2))).useId;function u(e){if(void 0!==l){var t=l();return null!=e?e:t}return function(e){var t=o.useState(e),n=(0,a.Z)(t,2),r=n[0],l=n[1],u=e||r;return o.useEffect((function(){null==r&&l("mui-".concat(i+=1))}),[r]),u}(e)}},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=a.apply(null,n);i&&e.push(i)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var l in n)r.call(n,l)&&n[l]&&e.push(l);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},8182:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"===typeof e||"number"===typeof e)a+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{Z:function(){return a}})},8177:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib.BlockCipher,n=e.algo,r=[],a=[],i=[],l=[],u=[],s=[],c=[],g=[],d=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var h=o^o<<1^o<<2^o<<3^o<<4;h=h>>>8^255&h^99,r[n]=h,a[h]=n;var f=e[n],C=e[f],I=e[C],m=257*e[h]^16843008*h;i[n]=m<<24|m>>>8,l[n]=m<<16|m>>>16,u[n]=m<<8|m>>>24,s[n]=m,m=16843009*I^65537*C^257*f^16843008*n,c[h]=m<<24|m>>>8,g[h]=m<<16|m>>>16,d[h]=m<<8|m>>>24,p[h]=m,n?(n=f^e[e[e[I^f]]],o^=e[e[o]]):n=o=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],f=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,a=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],i=0;i<a;i++)i<n?o[i]=t[i]:(s=o[i-1],i%n?n>6&&i%n==4&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=h[i/n|0]<<24),o[i]=o[i-n]^s);for(var l=this._invKeySchedule=[],u=0;u<a;u++){if(i=a-u,u%4)var s=o[i];else s=o[i-4];l[u]=u<4||i<=4?s:c[r[s>>>24]]^g[r[s>>>16&255]]^d[r[s>>>8&255]]^p[r[255&s]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,l,u,s,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,g,d,p,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,a,o,i,l){for(var u=this._nRounds,s=e[t]^n[0],c=e[t+1]^n[1],g=e[t+2]^n[2],d=e[t+3]^n[3],p=4,h=1;h<u;h++){var f=r[s>>>24]^a[c>>>16&255]^o[g>>>8&255]^i[255&d]^n[p++],C=r[c>>>24]^a[g>>>16&255]^o[d>>>8&255]^i[255&s]^n[p++],I=r[g>>>24]^a[d>>>16&255]^o[s>>>8&255]^i[255&c]^n[p++],m=r[d>>>24]^a[s>>>16&255]^o[c>>>8&255]^i[255&g]^n[p++];s=f,c=C,g=I,d=m}f=(l[s>>>24]<<24|l[c>>>16&255]<<16|l[g>>>8&255]<<8|l[255&d])^n[p++],C=(l[c>>>24]<<24|l[g>>>16&255]<<16|l[d>>>8&255]<<8|l[255&s])^n[p++],I=(l[g>>>24]<<24|l[d>>>16&255]<<16|l[s>>>8&255]<<8|l[255&c])^n[p++],m=(l[d>>>24]<<24|l[s>>>16&255]<<16|l[c>>>8&255]<<8|l[255&g])^n[p++],e[t]=f,e[t+1]=C,e[t+2]=I,e[t+3]=m},keySize:8});e.AES=t._createHelper(f)}(),o.AES)}()},3650:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(8228),void(o.lib.Cipher||function(e){var t=o,n=t.lib,r=n.Base,a=n.WordArray,i=n.BufferedBlockAlgorithm,l=t.enc,u=(l.Utf8,l.Base64),s=t.algo.EvpKDF,c=n.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:I}return function(t){return{encrypt:function(n,r,a){return e(r).encrypt(t,n,r,a)},decrypt:function(n,r,a){return e(r).decrypt(t,n,r,a)}}}}()}),g=(n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=g.CBC=function(){var t=d.extend();function n(t,n,r){var a,o=this._iv;o?(a=o,this._iv=e):a=this._prevBlock;for(var i=0;i<r;i++)t[n+i]^=a[i]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize;n.call(this,e,t,a),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+a)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize,o=e.slice(t,t+a);r.decryptBlock(e,t),n.call(this,e,t,a),this._prevBlock=o}}),t}(),h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,i=[],l=0;l<r;l+=4)i.push(o);var u=a.create(i,r);e.concat(u)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},f=(n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:p,padding:h}),reset:function(){var e;c.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),C=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(u)},parse:function(e){var t,n=u.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),f.create({ciphertext:n,salt:t})}},I=n.SerializableCipher=r.extend({cfg:r.extend({format:C}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var a=e.createEncryptor(n,r),o=a.finalize(t),i=a.cfg;return f.create({ciphertext:o,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),m=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var o=s.create({keySize:t+n}).compute(e,r),i=a.create(o.words.slice(t),4*n);return o.sigBytes=4*t,f.create({key:o,iv:i,salt:r})}},v=n.PasswordBasedCipher=I.extend({cfg:I.cfg.extend({kdf:m}),encrypt:function(e,t,n,r){var a=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=a.iv;var o=I.encrypt.call(this,e,t,a.key,r);return o.mixIn(a),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var a=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=a.iv,I.decrypt.call(this,e,t,a.key,r)}})}()))}()},8926:function(e,t,n){e.exports=function(){var e=e||function(e,t){var r;if("undefined"!==typeof window&&window.crypto&&(r=window.crypto),"undefined"!==typeof self&&self.crypto&&(r=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!==typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!==typeof n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(C){}var a=function(){if(r){if("function"===typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(C){}if("function"===typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(C){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},l=i.lib={},u=l.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=l.WordArray=u.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||g).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<a;o++){var i=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=i<<24-(r+o)%4*8}else for(var l=0;l<a;l+=4)t[r+l>>>2]=n[l>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(a());return new s.init(t,e)}}),c=i.enc={},g=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},d=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},p=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,a=r.words,o=r.sigBytes,i=this.blockSize,l=o/(4*i),u=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*i,c=e.min(4*u,o);if(u){for(var g=0;g<u;g+=i)this._doProcessBlock(a,g);n=a.splice(0,u),r.sigBytes-=c}return new s.init(n,c)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(l.Hasher=h.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),i.algo={});return i}(Math);return e}()},3713:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){var e=a,t=e.lib.WordArray;function n(e,n,r){for(var a=[],o=0,i=0;i<n;i++)if(i%4){var l=r[e.charCodeAt(i-1)]<<i%4*2|r[e.charCodeAt(i)]>>>6-i%4*2;a[o>>>2]|=l<<24-o%4*8,o++}return t.create(a,o)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var a=[],o=0;o<n;o+=3)for(var i=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,l=0;l<4&&o+.75*l<n;l++)a.push(r.charAt(i>>>6*(3-l)&63));var u=r.charAt(64);if(u)for(;a.length%4;)a.push(u);return a.join("")},parse:function(e){var t=e.length,r=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var o=0;o<r.length;o++)a[r.charCodeAt(o)]=o}var i=r.charAt(64);if(i){var l=e.indexOf(i);-1!==l&&(t=l)}return n(e,t,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),a.enc.Base64)}()},4728:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){var e=a,t=e.lib.WordArray;function n(e,n,r){for(var a=[],o=0,i=0;i<n;i++)if(i%4){var l=r[e.charCodeAt(i-1)]<<i%4*2|r[e.charCodeAt(i)]>>>6-i%4*2;a[o>>>2]|=l<<24-o%4*8,o++}return t.create(a,o)}e.enc.Base64url={stringify:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.words,r=e.sigBytes,a=t?this._safe_map:this._map;e.clamp();for(var o=[],i=0;i<r;i+=3)for(var l=(n[i>>>2]>>>24-i%4*8&255)<<16|(n[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|n[i+2>>>2]>>>24-(i+2)%4*8&255,u=0;u<4&&i+.75*u<r;u++)o.push(a.charAt(l>>>6*(3-u)&63));var s=a.charAt(64);if(s)for(;o.length%4;)o.push(s);return o.join("")},parse:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.length,a=t?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<a.length;i++)o[a.charCodeAt(i)]=i}var l=a.charAt(64);if(l){var u=e.indexOf(l);-1!==u&&(r=u)}return n(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),a.enc.Base64url)}()},1551:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){var e=a,t=e.lib.WordArray,n=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a+=2){var o=t[a>>>2]>>>16-a%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],a=0;a<n;a++)r[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],o=0;o<n;o+=2){var i=r(t[o>>>2]>>>16-o%4*8&65535);a.push(String.fromCharCode(i))}return a.join("")},parse:function(e){for(var n=e.length,a=[],o=0;o<n;o++)a[o>>>1]|=r(e.charCodeAt(o)<<16-o%2*16);return t.create(a,2*n)}}}(),a.enc.Utf16)}()},8228:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(5590),n(5086),function(){var e=o,t=e.lib,n=t.Base,r=t.WordArray,a=e.algo,i=a.MD5,l=a.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,a=this.cfg,o=a.hasher.create(),i=r.create(),l=i.words,u=a.keySize,s=a.iterations;l.length<u;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var c=1;c<s;c++)n=o.finalize(n),o.reset();i.concat(n)}return i.sigBytes=4*u,i}});e.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)}}(),o.EvpKDF)}()},1863:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),function(e){var t=o,n=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),o.format.Hex)}()},5086:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),void function(){var e=a,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,a=4*r;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),l=o.words,u=i.words,s=0;s<r;s++)l[s]^=1549556828,u[s]^=909522486;o.sigBytes=i.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())}()},9704:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3098),n(5533),n(1551),n(3713),n(4728),n(3074),n(5590),n(9517),n(3183),n(4345),n(6319),n(6853),n(77),n(5086),n(3822),n(8228),n(3650),n(5152),n(2992),n(7223),n(5858),n(130),n(2409),n(4823),n(6644),n(1181),n(9445),n(1863),n(8177),n(2550),n(1325),n(2639),n(2130),o)}()},5533:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){if("function"==typeof ArrayBuffer){var e=a.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],a=0;a<n;a++)r[a>>>2]|=e[a]<<24-a%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),a.lib.WordArray)}()},3074:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(e){var t=a,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,l=[];!function(){for(var t=0;t<64;t++)l[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=i.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,i=e[t+0],u=e[t+1],p=e[t+2],h=e[t+3],f=e[t+4],C=e[t+5],I=e[t+6],m=e[t+7],v=e[t+8],b=e[t+9],A=e[t+10],y=e[t+11],k=e[t+12],Z=e[t+13],S=e[t+14],w=e[t+15],B=o[0],x=o[1],G=o[2],R=o[3];B=s(B,x,G,R,i,7,l[0]),R=s(R,B,x,G,u,12,l[1]),G=s(G,R,B,x,p,17,l[2]),x=s(x,G,R,B,h,22,l[3]),B=s(B,x,G,R,f,7,l[4]),R=s(R,B,x,G,C,12,l[5]),G=s(G,R,B,x,I,17,l[6]),x=s(x,G,R,B,m,22,l[7]),B=s(B,x,G,R,v,7,l[8]),R=s(R,B,x,G,b,12,l[9]),G=s(G,R,B,x,A,17,l[10]),x=s(x,G,R,B,y,22,l[11]),B=s(B,x,G,R,k,7,l[12]),R=s(R,B,x,G,Z,12,l[13]),G=s(G,R,B,x,S,17,l[14]),B=c(B,x=s(x,G,R,B,w,22,l[15]),G,R,u,5,l[16]),R=c(R,B,x,G,I,9,l[17]),G=c(G,R,B,x,y,14,l[18]),x=c(x,G,R,B,i,20,l[19]),B=c(B,x,G,R,C,5,l[20]),R=c(R,B,x,G,A,9,l[21]),G=c(G,R,B,x,w,14,l[22]),x=c(x,G,R,B,f,20,l[23]),B=c(B,x,G,R,b,5,l[24]),R=c(R,B,x,G,S,9,l[25]),G=c(G,R,B,x,h,14,l[26]),x=c(x,G,R,B,v,20,l[27]),B=c(B,x,G,R,Z,5,l[28]),R=c(R,B,x,G,p,9,l[29]),G=c(G,R,B,x,m,14,l[30]),B=g(B,x=c(x,G,R,B,k,20,l[31]),G,R,C,4,l[32]),R=g(R,B,x,G,v,11,l[33]),G=g(G,R,B,x,y,16,l[34]),x=g(x,G,R,B,S,23,l[35]),B=g(B,x,G,R,u,4,l[36]),R=g(R,B,x,G,f,11,l[37]),G=g(G,R,B,x,m,16,l[38]),x=g(x,G,R,B,A,23,l[39]),B=g(B,x,G,R,Z,4,l[40]),R=g(R,B,x,G,i,11,l[41]),G=g(G,R,B,x,h,16,l[42]),x=g(x,G,R,B,I,23,l[43]),B=g(B,x,G,R,b,4,l[44]),R=g(R,B,x,G,k,11,l[45]),G=g(G,R,B,x,w,16,l[46]),B=d(B,x=g(x,G,R,B,p,23,l[47]),G,R,i,6,l[48]),R=d(R,B,x,G,m,10,l[49]),G=d(G,R,B,x,S,15,l[50]),x=d(x,G,R,B,C,21,l[51]),B=d(B,x,G,R,k,6,l[52]),R=d(R,B,x,G,h,10,l[53]),G=d(G,R,B,x,A,15,l[54]),x=d(x,G,R,B,u,21,l[55]),B=d(B,x,G,R,v,6,l[56]),R=d(R,B,x,G,w,10,l[57]),G=d(G,R,B,x,I,15,l[58]),x=d(x,G,R,B,Z,21,l[59]),B=d(B,x,G,R,f,6,l[60]),R=d(R,B,x,G,y,10,l[61]),G=d(G,R,B,x,p,15,l[62]),x=d(x,G,R,B,b,21,l[63]),o[0]=o[0]+B|0,o[1]=o[1]+x|0,o[2]=o[2]+G|0,o[3]=o[3]+R|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var o=e.floor(r/4294967296),i=r;n[15+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process();for(var l=this._hash,u=l.words,s=0;s<4;s++){var c=u[s];u[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return l},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function s(e,t,n,r,a,o,i){var l=e+(t&n|~t&r)+a+i;return(l<<o|l>>>32-o)+t}function c(e,t,n,r,a,o,i){var l=e+(t&r|n&~r)+a+i;return(l<<o|l>>>32-o)+t}function g(e,t,n,r,a,o,i){var l=e+(t^n^r)+a+i;return(l<<o|l>>>32-o)+t}function d(e,t,n,r,a,o,i){var l=e+(n^(t|~r))+a+i;return(l<<o|l>>>32-o)+t}t.MD5=o._createHelper(u),t.HmacMD5=o._createHmacHelper(u)}(Math),a.MD5)}()},5152:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.CFB=function(){var e=o.lib.BlockCipherMode.extend();function t(e,t,n,r){var a,o=this._iv;o?(a=o.slice(0),this._iv=void 0):a=this._prevBlock,r.encryptBlock(a,0);for(var i=0;i<n;i++)e[t+i]^=a[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize;t.call(this,e,n,a,r),this._prevBlock=e.slice(n,n+a)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize,o=e.slice(n,n+a);t.call(this,e,n,a,r),this._prevBlock=o}}),e}(),o.mode.CFB)}()},7223:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.CTRGladman=function(){var e=o.lib.BlockCipherMode.extend();function t(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function n(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var r=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize,o=this._iv,i=this._counter;o&&(i=this._counter=o.slice(0),this._iv=void 0),n(i);var l=i.slice(0);r.encryptBlock(l,0);for(var u=0;u<a;u++)e[t+u]^=l[u]}});return e.Decryptor=r,e}(),o.mode.CTRGladman)}()},2992:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.CTR=function(){var e=o.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0);var i=o.slice(0);n.encryptBlock(i,0),o[r-1]=o[r-1]+1|0;for(var l=0;l<r;l++)e[t+l]^=i[l]}});return e.Decryptor=t,e}(),o.mode.CTR)}()},130:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.ECB=function(){var e=o.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),o.mode.ECB)}()},5858:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.mode.OFB=function(){var e=o.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,o=this._keystream;a&&(o=this._keystream=a.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var i=0;i<r;i++)e[t+i]^=o[i]}});return e.Decryptor=t,e}(),o.mode.OFB)}()},2409:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,a=r-n%r,o=n+a-1;e.clamp(),e.words[o>>>2]|=a<<24-o%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.pad.Ansix923)}()},4823:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.Iso10126={pad:function(e,t){var n=4*t,r=n-e.sigBytes%n;e.concat(o.lib.WordArray.random(r-1)).concat(o.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.pad.Iso10126)}()},6644:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.Iso97971={pad:function(e,t){e.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(e,t)},unpad:function(e){o.pad.ZeroPadding.unpad(e),e.sigBytes--}},o.pad.Iso97971)}()},9445:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding)}()},1181:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3650),o.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},o.pad.ZeroPadding)}()},3822:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(5590),n(5086),function(){var e=o,t=e.lib,n=t.Base,r=t.WordArray,a=e.algo,i=a.SHA1,l=a.HMAC,u=a.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=l.create(n.hasher,e),o=r.create(),i=r.create([1]),u=o.words,s=i.words,c=n.keySize,g=n.iterations;u.length<c;){var d=a.update(t).finalize(i);a.reset();for(var p=d.words,h=p.length,f=d,C=1;C<g;C++){f=a.finalize(f),a.reset();for(var I=f.words,m=0;m<h;m++)p[m]^=I[m]}o.concat(d),s[0]++}return o.sigBytes=4*c,o}});e.PBKDF2=function(e,t,n){return u.create(n).compute(e,t)}}(),o.PBKDF2)}()},2130:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=[],a=[],i=[],l=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)u.call(this);for(a=0;a<8;a++)r[a]^=n[a+4&7];if(t){var o=t.words,i=o[0],l=o[1],s=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),g=s>>>16|4294901760&c,d=c<<16|65535&s;for(r[0]^=s,r[1]^=g,r[2]^=c,r[3]^=d,r[4]^=s,r[5]^=g,r[6]^=c,r[7]^=d,a=0;a<4;a++)u.call(this)}},_doProcessBlock:function(e,t){var n=this._X;u.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[t+a]^=r[a]},blockSize:4,ivSize:2});function u(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,l=r>>>16,u=((o*o>>>17)+o*l>>>15)+l*l,s=((4294901760&r)*r|0)+((65535&r)*r|0);i[n]=u^s}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}e.RabbitLegacy=t._createHelper(l)}(),o.RabbitLegacy)}()},2639:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=[],a=[],i=[],l=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)u.call(this);for(n=0;n<8;n++)a[n]^=r[n+4&7];if(t){var o=t.words,i=o[0],l=o[1],s=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),g=s>>>16|4294901760&c,d=c<<16|65535&s;for(a[0]^=s,a[1]^=g,a[2]^=c,a[3]^=d,a[4]^=s,a[5]^=g,a[6]^=c,a[7]^=d,n=0;n<4;n++)u.call(this)}},_doProcessBlock:function(e,t){var n=this._X;u.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[t+a]^=r[a]},blockSize:4,ivSize:2});function u(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,l=r>>>16,u=((o*o>>>17)+o*l>>>15)+l*l,s=((4294901760&r)*r|0)+((65535&r)*r|0);i[n]=u^s}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}e.Rabbit=t._createHelper(l)}(),o.Rabbit)}()},1325:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],a=0;a<256;a++)r[a]=a;a=0;for(var o=0;a<256;a++){var i=a%n,l=t[i>>>2]>>>24-i%4*8&255;o=(o+r[a]+l)%256;var u=r[a];r[a]=r[o],r[o]=u}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,n=this._j,r=0,a=0;a<4;a++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*a}return this._i=t,this._j=n,r}e.RC4=t._createHelper(r);var i=n.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});e.RC4Drop=t._createHelper(i)}(),o.RC4)}()},77:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(e){var t=a,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,l=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=r.create([0,1518500249,1859775393,2400959708,2840853838]),d=r.create([1352829926,1548603684,1836072691,2053994217,0]),p=i.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o,i,p,b,A,y,k,Z,S,w,B,x=this._hash.words,G=g.words,R=d.words,W=l.words,V=u.words,F=s.words,N=c.words;for(y=o=x[0],k=i=x[1],Z=p=x[2],S=b=x[3],w=A=x[4],n=0;n<80;n+=1)B=o+e[t+W[n]]|0,B+=n<16?h(i,p,b)+G[0]:n<32?f(i,p,b)+G[1]:n<48?C(i,p,b)+G[2]:n<64?I(i,p,b)+G[3]:m(i,p,b)+G[4],B=(B=v(B|=0,F[n]))+A|0,o=A,A=b,b=v(p,10),p=i,i=B,B=y+e[t+V[n]]|0,B+=n<16?m(k,Z,S)+R[0]:n<32?I(k,Z,S)+R[1]:n<48?C(k,Z,S)+R[2]:n<64?f(k,Z,S)+R[3]:h(k,Z,S)+R[4],B=(B=v(B|=0,N[n]))+w|0,y=w,w=S,S=v(Z,10),Z=k,k=B;B=x[1]+p+S|0,x[1]=x[2]+b+w|0,x[2]=x[3]+A+y|0,x[3]=x[4]+o+k|0,x[4]=x[0]+i+Z|0,x[0]=B},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,o=a.words,i=0;i<5;i++){var l=o[i];o[i]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,n){return e^t^n}function f(e,t,n){return e&t|~e&n}function C(e,t,n){return(e|~t)^n}function I(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function v(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(p),t.HmacRIPEMD160=o._createHmacHelper(p)}(Math),a.RIPEMD160)}()},5590:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(){var e=a,t=e.lib,n=t.WordArray,r=t.Hasher,o=e.algo,i=[],l=o.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],l=n[3],u=n[4],s=0;s<80;s++){if(s<16)i[s]=0|e[t+s];else{var c=i[s-3]^i[s-8]^i[s-14]^i[s-16];i[s]=c<<1|c>>>31}var g=(r<<5|r>>>27)+u+i[s];g+=s<20?1518500249+(a&o|~a&l):s<40?1859775393+(a^o^l):s<60?(a&o|a&l|o&l)-1894007588:(a^o^l)-899497514,u=l,l=o,o=a<<30|a>>>2,a=r,r=g}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+l|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(l),e.HmacSHA1=r._createHmacHelper(l)}(),a.SHA1)}()},3183:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(9517),function(){var e=o,t=e.lib.WordArray,n=e.algo,r=n.SHA256,a=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(a),e.HmacSHA224=r._createHmacHelper(a)}(),o.SHA224)}()},9517:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(e){var t=a,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,l=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,a=0;a<64;)t(r)&&(a<8&&(l[a]=n(e.pow(r,.5))),u[a]=n(e.pow(r,1/3)),a++),r++}();var s=[],c=i.SHA256=o.extend({_doReset:function(){this._hash=new r.init(l.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],l=n[4],c=n[5],g=n[6],d=n[7],p=0;p<64;p++){if(p<16)s[p]=0|e[t+p];else{var h=s[p-15],f=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,C=s[p-2],I=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;s[p]=f+s[p-7]+I+s[p-16]}var m=r&a^r&o^a&o,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&g)+u[p]+s[p];d=g,g=c,c=l,l=i+b|0,i=o,o=a,a=r,r=b+(v+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+g|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(r/4294967296),n[15+(a+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(c),t.HmacSHA256=o._createHmacHelper(c)}(Math),a.SHA256)}()},6853:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3098),function(e){var t=o,n=t.lib,r=n.WordArray,a=n.Hasher,i=t.x64.Word,l=t.algo,u=[],s=[],c=[];!function(){for(var e=1,t=0,n=0;n<24;n++){u[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)s[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,o=0;o<24;o++){for(var l=0,g=0,d=0;d<7;d++){if(1&a){var p=(1<<d)-1;p<32?g^=1<<p:l^=1<<p-32}128&a?a=a<<1^113:a<<=1}c[o]=i.create(l,g)}}();var g=[];!function(){for(var e=0;e<25;e++)g[e]=i.create()}();var d=l.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,a=0;a<r;a++){var o=e[t+2*a],i=e[t+2*a+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),(x=n[a]).high^=i,x.low^=o}for(var l=0;l<24;l++){for(var d=0;d<5;d++){for(var p=0,h=0,f=0;f<5;f++)p^=(x=n[d+5*f]).high,h^=x.low;var C=g[d];C.high=p,C.low=h}for(d=0;d<5;d++){var I=g[(d+4)%5],m=g[(d+1)%5],v=m.high,b=m.low;for(p=I.high^(v<<1|b>>>31),h=I.low^(b<<1|v>>>31),f=0;f<5;f++)(x=n[d+5*f]).high^=p,x.low^=h}for(var A=1;A<25;A++){var y=(x=n[A]).high,k=x.low,Z=u[A];Z<32?(p=y<<Z|k>>>32-Z,h=k<<Z|y>>>32-Z):(p=k<<Z-32|y>>>64-Z,h=y<<Z-32|k>>>64-Z);var S=g[s[A]];S.high=p,S.low=h}var w=g[0],B=n[0];for(w.high=B.high,w.low=B.low,d=0;d<5;d++)for(f=0;f<5;f++){var x=n[A=d+5*f],G=g[A],R=g[(d+1)%5+5*f],W=g[(d+2)%5+5*f];x.high=G.high^~R.high&W.high,x.low=G.low^~R.low&W.low}x=n[0];var V=c[l];x.high^=V.high,x.low^=V.low}},_doFinalize:function(){var t=this._data,n=t.words,a=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[a>>>5]|=1<<24-a%32,n[(e.ceil((a+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var i=this._state,l=this.cfg.outputLength/8,u=l/8,s=[],c=0;c<u;c++){var g=i[c],d=g.high,p=g.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),s.push(p),s.push(d)}return new r.init(s,l)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=a._createHelper(d),t.HmacSHA3=a._createHmacHelper(d)}(Math),o.SHA3)}()},6319:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3098),n(4345),function(){var e=o,t=e.x64,n=t.Word,r=t.WordArray,a=e.algo,i=a.SHA512,l=a.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=i._createHelper(l),e.HmacSHA384=i._createHmacHelper(l)}(),o.SHA384)}()},4345:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3098),function(){var e=o,t=e.lib.Hasher,n=e.x64,r=n.Word,a=n.WordArray,i=e.algo;function l(){return r.create.apply(r,arguments)}var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],s=[];!function(){for(var e=0;e<80;e++)s[e]=l()}();var c=i.SHA512=t.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],l=n[4],c=n[5],g=n[6],d=n[7],p=r.high,h=r.low,f=a.high,C=a.low,I=o.high,m=o.low,v=i.high,b=i.low,A=l.high,y=l.low,k=c.high,Z=c.low,S=g.high,w=g.low,B=d.high,x=d.low,G=p,R=h,W=f,V=C,F=I,N=m,E=v,D=b,X=A,J=y,H=k,Y=Z,T=S,M=w,K=B,P=x,z=0;z<80;z++){var L,_,O=s[z];if(z<16)_=O.high=0|e[t+2*z],L=O.low=0|e[t+2*z+1];else{var U=s[z-15],j=U.high,Q=U.low,q=(j>>>1|Q<<31)^(j>>>8|Q<<24)^j>>>7,$=(Q>>>1|j<<31)^(Q>>>8|j<<24)^(Q>>>7|j<<25),ee=s[z-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ae=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=s[z-7],ie=oe.high,le=oe.low,ue=s[z-16],se=ue.high,ce=ue.low;_=(_=(_=q+ie+((L=$+le)>>>0<$>>>0?1:0))+re+((L+=ae)>>>0<ae>>>0?1:0))+se+((L+=ce)>>>0<ce>>>0?1:0),O.high=_,O.low=L}var ge,de=X&H^~X&T,pe=J&Y^~J&M,he=G&W^G&F^W&F,fe=R&V^R&N^V&N,Ce=(G>>>28|R<<4)^(G<<30|R>>>2)^(G<<25|R>>>7),Ie=(R>>>28|G<<4)^(R<<30|G>>>2)^(R<<25|G>>>7),me=(X>>>14|J<<18)^(X>>>18|J<<14)^(X<<23|J>>>9),ve=(J>>>14|X<<18)^(J>>>18|X<<14)^(J<<23|X>>>9),be=u[z],Ae=be.high,ye=be.low,ke=K+me+((ge=P+ve)>>>0<P>>>0?1:0),Ze=Ie+fe;K=T,P=M,T=H,M=Y,H=X,Y=J,X=E+(ke=(ke=(ke=ke+de+((ge+=pe)>>>0<pe>>>0?1:0))+Ae+((ge+=ye)>>>0<ye>>>0?1:0))+_+((ge+=L)>>>0<L>>>0?1:0))+((J=D+ge|0)>>>0<D>>>0?1:0)|0,E=F,D=N,F=W,N=V,W=G,V=R,G=ke+(Ce+he+(Ze>>>0<Ie>>>0?1:0))+((R=ge+Ze|0)>>>0<ge>>>0?1:0)|0}h=r.low=h+R,r.high=p+G+(h>>>0<R>>>0?1:0),C=a.low=C+V,a.high=f+W+(C>>>0<V>>>0?1:0),m=o.low=m+N,o.high=I+F+(m>>>0<N>>>0?1:0),b=i.low=b+D,i.high=v+E+(b>>>0<D>>>0?1:0),y=l.low=y+J,l.high=A+X+(y>>>0<J>>>0?1:0),Z=c.low=Z+Y,c.high=k+H+(Z>>>0<Y>>>0?1:0),w=g.low=w+M,g.high=S+T+(w>>>0<M>>>0?1:0),x=d.low=x+P,d.high=B+K+(x>>>0<P>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(c),e.HmacSHA512=t._createHmacHelper(c)}(),o.SHA512)}()},2550:function(e,t,n){!function(t,r,a){var o;e.exports=(o=n(8926),n(3713),n(3074),n(8228),n(3650),function(){var e=o,t=e.lib,n=t.WordArray,r=t.BlockCipher,a=e.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],s=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=a.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=i[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var a=this._subKeys=[],o=0;o<16;o++){var s=a[o]=[],c=u[o];for(n=0;n<24;n++)s[n/6|0]|=t[(l[n]-1+c)%28]<<31-n%6,s[4+(n/6|0)]|=t[28+(l[n+24]-1+c)%28]<<31-n%6;for(s[0]=s[0]<<1|s[0]>>>31,n=1;n<7;n++)s[n]=s[n]>>>4*(n-1)+3;s[7]=s[7]<<5|s[7]>>>27}var g=this._invSubKeys=[];for(n=0;n<16;n++)g[n]=a[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var a=n[r],o=this._lBlock,i=this._rBlock,l=0,u=0;u<8;u++)l|=s[u][((i^a[u])&c[u])>>>0];this._lBlock=i,this._rBlock=o^l}var g=this._lBlock;this._lBlock=this._rBlock,this._rBlock=g,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=r._createHelper(g);var h=a.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),a=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=g.createEncryptor(n.create(t)),this._des2=g.createEncryptor(n.create(r)),this._des3=g.createEncryptor(n.create(a))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(h)}(),o.TripleDES)}()},3098:function(e,t,n){!function(t,r){var a;e.exports=(a=n(8926),function(e){var t=a,n=t.lib,r=n.Base,o=n.WordArray,i=t.x64={};i.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,a=0;a<n;a++)t[a]=t[a].clone();return e}})}(),a)}()},3904:function(e,t,n){"use strict";n.r(t),n.d(t,{entries:function(){return m},keys:function(){return C},map:function(){return i},nest:function(){return l},set:function(){return f},values:function(){return I}});var r="$";function a(){}function o(e,t){var n=new a;if(e instanceof a)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,o=-1,i=e.length;if(null==t)for(;++o<i;)n.set(o,e[o]);else for(;++o<i;)n.set(t(r=e[o],o,e),r)}else if(e)for(var l in e)n.set(l,e[l]);return n}a.prototype=o.prototype={constructor:a,has:function(e){return r+e in this},get:function(e){return this[r+e]},set:function(e,t){return this[r+e]=t,this},remove:function(e){var t=r+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===r&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===r&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===r&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===r&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===r&&++e;return e},empty:function(){for(var e in this)if(e[0]===r)return!1;return!0},each:function(e){for(var t in this)t[0]===r&&e(this[t],t.slice(1),this)}};var i=o;function l(){var e,t,n,r=[],a=[];function o(n,a,l,u){if(a>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var s,c,g,d=-1,p=n.length,h=r[a++],f=i(),C=l();++d<p;)(g=f.get(s=h(c=n[d])+""))?g.push(c):f.set(s,[c]);return f.each((function(e,t){u(C,t,o(e,a,l,u))})),C}function l(e,n){if(++n>r.length)return e;var o,i=a[n-1];return null!=t&&n>=r.length?o=e.entries():(o=[],e.each((function(e,t){o.push({key:t,values:l(e,n)})}))),null!=i?o.sort((function(e,t){return i(e.key,t.key)})):o}return n={object:function(e){return o(e,0,u,s)},map:function(e){return o(e,0,c,g)},entries:function(e){return l(o(e,0,c,g),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return a[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}}function u(){return{}}function s(e,t,n){e[t]=n}function c(){return i()}function g(e,t,n){e.set(t,n)}function d(){}var p=i.prototype;function h(e,t){var n=new d;if(e instanceof d)e.each((function(e){n.add(e)}));else if(e){var r=-1,a=e.length;if(null==t)for(;++r<a;)n.add(e[r]);else for(;++r<a;)n.add(t(e[r],r,e))}return n}d.prototype=h.prototype={constructor:d,has:p.has,add:function(e){return this[r+(e+="")]=e,this},remove:p.remove,clear:p.clear,values:p.keys,size:p.size,empty:p.empty,each:p.each};var f=h;function C(e){var t=[];for(var n in e)t.push(n);return t}function I(e){var t=[];for(var n in e)t.push(e[n]);return t}function m(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}},7594:function(e,t,n){"use strict";function r(e,t){var n;function r(){var r,a,o=n.length,i=0,l=0;for(r=0;r<o;++r)i+=(a=n[r]).x,l+=a.y;for(i=i/o-e,l=l/o-t,r=0;r<o;++r)(a=n[r]).x-=i,a.y-=l}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r}function a(e){return function(){return e}}function o(){return 1e-6*(Math.random()-.5)}function i(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,o,i,l,u,s,c,g,d,p=e._root,h={data:r},f=e._x0,C=e._y0,I=e._x1,m=e._y1;if(!p)return e._root=h,e;for(;p.length;)if((s=t>=(o=(f+I)/2))?f=o:I=o,(c=n>=(i=(C+m)/2))?C=i:m=i,a=p,!(p=p[g=c<<1|s]))return a[g]=h,e;if(l=+e._x.call(null,p.data),u=+e._y.call(null,p.data),t===l&&n===u)return h.next=p,a?a[g]=h:e._root=h,e;do{a=a?a[g]=new Array(4):e._root=new Array(4),(s=t>=(o=(f+I)/2))?f=o:I=o,(c=n>=(i=(C+m)/2))?C=i:m=i}while((g=c<<1|s)===(d=(u>=i)<<1|l>=o));return a[d]=p,a[g]=h,e}function l(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a}function u(e){return e[0]}function s(e){return e[1]}function c(e,t,n){var r=new g(null==t?u:t,null==n?s:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function g(e,t,n,r,a,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=o,this._root=void 0}function d(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}n.r(t),n.d(t,{forceCenter:function(){return r},forceCollide:function(){return C},forceLink:function(){return b},forceManyBody:function(){return U},forceRadial:function(){return j},forceSimulation:function(){return O},forceX:function(){return Q},forceY:function(){return q}});var p=c.prototype=g.prototype;function h(e){return e.x+e.vx}function f(e){return e.y+e.vy}function C(e){var t,n,r=1,i=1;function l(){for(var e,a,l,s,g,d,p,C=t.length,I=0;I<i;++I)for(a=c(t,h,f).visitAfter(u),e=0;e<C;++e)l=t[e],d=n[l.index],p=d*d,s=l.x+l.vx,g=l.y+l.vy,a.visit(m);function m(e,t,n,a,i){var u=e.data,c=e.r,h=d+c;if(!u)return t>s+h||a<s-h||n>g+h||i<g-h;if(u.index>l.index){var f=s-u.x-u.vx,C=g-u.y-u.vy,I=f*f+C*C;I<h*h&&(0===f&&(I+=(f=o())*f),0===C&&(I+=(C=o())*C),I=(h-(I=Math.sqrt(I)))/I*r,l.vx+=(f*=I)*(h=(c*=c)/(p+c)),l.vy+=(C*=I)*h,u.vx-=f*(h=1-h),u.vy-=C*h)}}}function u(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var r,a,o=t.length;for(n=new Array(o),r=0;r<o;++r)a=t[r],n[a.index]=+e(a,r,t)}}return"function"!==typeof e&&(e=a(null==e?1:+e)),l.initialize=function(e){t=e,s()},l.iterations=function(e){return arguments.length?(i=+e,l):i},l.strength=function(e){return arguments.length?(r=+e,l):r},l.radius=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),s(),l):e},l}p.copy=function(){var e,t,n=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=d(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=d(t));return n},p.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return i(this.cover(t,n),t,n,e)},p.addAll=function(e){var t,n,r,a,o=e.length,l=new Array(o),u=new Array(o),s=1/0,c=1/0,g=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(l[n]=r,u[n]=a,r<s&&(s=r),r>g&&(g=r),a<c&&(c=a),a>d&&(d=a));if(s>g||c>d)return this;for(this.cover(s,c).cover(g,d),n=0;n<o;++n)i(this,l[n],u[n],e[n]);return this},p.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,o=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var i,l,u=a-n,s=this._root;n>e||e>=a||r>t||t>=o;)switch(l=(t<r)<<1|e<n,(i=new Array(4))[l]=s,s=i,u*=2,l){case 0:a=n+u,o=r+u;break;case 1:n=a-u,o=r+u;break;case 2:a=n+u,r=o-u;break;case 3:n=a-u,r=o-u}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=a,this._y1=o,this},p.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},p.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},p.find=function(e,t,n){var r,a,o,i,u,s,c,g=this._x0,d=this._y0,p=this._x1,h=this._y1,f=[],C=this._root;for(C&&f.push(new l(C,g,d,p,h)),null==n?n=1/0:(g=e-n,d=t-n,p=e+n,h=t+n,n*=n);s=f.pop();)if(!(!(C=s.node)||(a=s.x0)>p||(o=s.y0)>h||(i=s.x1)<g||(u=s.y1)<d))if(C.length){var I=(a+i)/2,m=(o+u)/2;f.push(new l(C[3],I,m,i,u),new l(C[2],a,m,I,u),new l(C[1],I,o,i,m),new l(C[0],a,o,I,m)),(c=(t>=m)<<1|e>=I)&&(s=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=s)}else{var v=e-+this._x.call(null,C.data),b=t-+this._y.call(null,C.data),A=v*v+b*b;if(A<n){var y=Math.sqrt(n=A);g=e-y,d=t-y,p=e+y,h=t+y,r=C.data}}return r},p.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(i=+this._y.call(null,e)))return this;var t,n,r,a,o,i,l,u,s,c,g,d,p=this._root,h=this._x0,f=this._y0,C=this._x1,I=this._y1;if(!p)return this;if(p.length)for(;;){if((s=o>=(l=(h+C)/2))?h=l:C=l,(c=i>=(u=(f+I)/2))?f=u:I=u,t=p,!(p=p[g=c<<1|s]))return this;if(!p.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(n=t,d=g)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,r?(a?r.next=a:delete r.next,this):t?(a?t[g]=a:delete t[g],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=a,this)},p.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},p.root=function(){return this._root},p.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},p.visit=function(e){var t,n,r,a,o,i,u=[],s=this._root;for(s&&u.push(new l(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,a=t.y0,o=t.x1,i=t.y1)&&s.length){var c=(r+o)/2,g=(a+i)/2;(n=s[3])&&u.push(new l(n,c,g,o,i)),(n=s[2])&&u.push(new l(n,r,g,c,i)),(n=s[1])&&u.push(new l(n,c,a,o,g)),(n=s[0])&&u.push(new l(n,r,a,c,g))}return this},p.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new l(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var o,i=t.x0,u=t.y0,s=t.x1,c=t.y1,g=(i+s)/2,d=(u+c)/2;(o=a[0])&&n.push(new l(o,i,u,g,d)),(o=a[1])&&n.push(new l(o,g,u,s,d)),(o=a[2])&&n.push(new l(o,i,d,g,c)),(o=a[3])&&n.push(new l(o,g,d,s,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},p.x=function(e){return arguments.length?(this._x=e,this):this._x},p.y=function(e){return arguments.length?(this._y=e,this):this._y};var I=n(3904);function m(e){return e.index}function v(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function b(e){var t,n,r,i,l,u=m,s=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},c=a(30),g=1;function d(r){for(var a=0,i=e.length;a<g;++a)for(var u,s,c,d,p,h,f,C=0;C<i;++C)s=(u=e[C]).source,d=(c=u.target).x+c.vx-s.x-s.vx||o(),p=c.y+c.vy-s.y-s.vy||o(),d*=h=((h=Math.sqrt(d*d+p*p))-n[C])/h*r*t[C],p*=h,c.vx-=d*(f=l[C]),c.vy-=p*f,s.vx+=d*(f=1-f),s.vy+=p*f}function p(){if(r){var a,o,s=r.length,c=e.length,g=(0,I.map)(r,u);for(a=0,i=new Array(s);a<c;++a)(o=e[a]).index=a,"object"!==typeof o.source&&(o.source=v(g,o.source)),"object"!==typeof o.target&&(o.target=v(g,o.target)),i[o.source.index]=(i[o.source.index]||0)+1,i[o.target.index]=(i[o.target.index]||0)+1;for(a=0,l=new Array(c);a<c;++a)o=e[a],l[a]=i[o.source.index]/(i[o.source.index]+i[o.target.index]);t=new Array(c),h(),n=new Array(c),f()}}function h(){if(r)for(var n=0,a=e.length;n<a;++n)t[n]=+s(e[n],n,e)}function f(){if(r)for(var t=0,a=e.length;t<a;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e){r=e,p()},d.links=function(t){return arguments.length?(e=t,p(),d):e},d.id=function(e){return arguments.length?(u=e,d):u},d.iterations=function(e){return arguments.length?(g=+e,d):g},d.strength=function(e){return arguments.length?(s="function"===typeof e?e:a(+e),h(),d):s},d.distance=function(e){return arguments.length?(c="function"===typeof e?e:a(+e),f(),d):c},d}var A={value:function(){}};function y(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new k(r)}function k(e){this._=e}function Z(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function S(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function w(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=A,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}k.prototype=y.prototype={constructor:k,on:function(e,t){var n,r=this._,a=Z(e+"",r),o=-1,i=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<i;)if(n=(e=a[o]).type)r[n]=w(r[n],e.name,t);else if(null==t)for(n in r)r[n]=w(r[n],e.name,null);return this}for(;++o<i;)if((n=(e=a[o]).type)&&(n=S(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new k(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),o=0;o<n;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};var B,x,G=y,R=0,W=0,V=0,F=0,N=0,E=0,D="object"===typeof performance&&performance.now?performance:Date,X="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function J(){return N||(X(H),N=D.now()+E)}function H(){N=0}function Y(){this._call=this._time=this._next=null}function T(e,t,n){var r=new Y;return r.restart(e,t,n),r}function M(){N=(F=D.now())+E,R=W=0;try{!function(){J(),++R;for(var e,t=B;t;)(e=N-t._time)>=0&&t._call.call(null,e),t=t._next;--R}()}finally{R=0,function(){var e,t,n=B,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:B=t);x=e,P(r)}(),N=0}}function K(){var e=D.now(),t=e-F;t>1e3&&(E-=t,F=e)}function P(e){R||(W&&(W=clearTimeout(W)),e-N>24?(e<1/0&&(W=setTimeout(M,e-D.now()-E)),V&&(V=clearInterval(V))):(V||(F=D.now(),V=setInterval(K,1e3)),R=1,X(M)))}function z(e){return e.x}function L(e){return e.y}Y.prototype=T.prototype={constructor:Y,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?J():+n)+(null==t?0:+t),this._next||x===this||(x?x._next=this:B=this,x=this),this._call=e,this._time=n,P()},stop:function(){this._call&&(this._call=null,this._time=1/0,P())}};var _=Math.PI*(3-Math.sqrt(5));function O(e){var t,n=1,r=.001,a=1-Math.pow(r,1/300),o=0,i=.6,l=(0,I.map)(),u=T(c),s=G("tick","end");function c(){g(),s.call("tick",t),n<r&&(u.stop(),s.call("end",t))}function g(r){var u,s,c=e.length;void 0===r&&(r=1);for(var g=0;g<r;++g)for(n+=(o-n)*a,l.each((function(e){e(n)})),u=0;u<c;++u)null==(s=e[u]).fx?s.x+=s.vx*=i:(s.x=s.fx,s.vx=0),null==s.fy?s.y+=s.vy*=i:(s.y=s.fy,s.vy=0);return t}function d(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var a=10*Math.sqrt(n),o=n*_;t.x=a*Math.cos(o),t.y=a*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),d(),t={tick:g,restart:function(){return u.restart(c),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,d(),l.each(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(i=1-e,t):1-i},force:function(e,n){return arguments.length>1?(null==n?l.remove(e):l.set(e,p(n)),t):l.get(e)},find:function(t,n,r){var a,o,i,l,u,s=0,c=e.length;for(null==r?r=1/0:r*=r,s=0;s<c;++s)(i=(a=t-(l=e[s]).x)*a+(o=n-l.y)*o)<r&&(u=l,r=i);return u},on:function(e,n){return arguments.length>1?(s.on(e,n),t):s.on(e)}}}function U(){var e,t,n,r,i=a(-30),l=1,u=1/0,s=.81;function g(r){var a,o=e.length,i=c(e,z,L).visitAfter(p);for(n=r,a=0;a<o;++a)t=e[a],i.visit(h)}function d(){if(e){var t,n,a=e.length;for(r=new Array(a),t=0;t<a;++t)n=e[t],r[n.index]=+i(n,t,e)}}function p(e){var t,n,a,o,i,l=0,u=0;if(e.length){for(a=o=i=0;i<4;++i)(t=e[i])&&(n=Math.abs(t.value))&&(l+=t.value,u+=n,a+=n*t.x,o+=n*t.y);e.x=a/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{l+=r[t.data.index]}while(t=t.next)}e.value=l}function h(e,a,i,c){if(!e.value)return!0;var g=e.x-t.x,d=e.y-t.y,p=c-a,h=g*g+d*d;if(p*p/s<h)return h<u&&(0===g&&(h+=(g=o())*g),0===d&&(h+=(d=o())*d),h<l&&(h=Math.sqrt(l*h)),t.vx+=g*e.value*n/h,t.vy+=d*e.value*n/h),!0;if(!(e.length||h>=u)){(e.data!==t||e.next)&&(0===g&&(h+=(g=o())*g),0===d&&(h+=(d=o())*d),h<l&&(h=Math.sqrt(l*h)));do{e.data!==t&&(p=r[e.data.index]*n/h,t.vx+=g*p,t.vy+=d*p)}while(e=e.next)}}return g.initialize=function(t){e=t,d()},g.strength=function(e){return arguments.length?(i="function"===typeof e?e:a(+e),d(),g):i},g.distanceMin=function(e){return arguments.length?(l=e*e,g):Math.sqrt(l)},g.distanceMax=function(e){return arguments.length?(u=e*e,g):Math.sqrt(u)},g.theta=function(e){return arguments.length?(s=e*e,g):Math.sqrt(s)},g}function j(e,t,n){var r,o,i,l=a(.1);function u(e){for(var a=0,l=r.length;a<l;++a){var u=r[a],s=u.x-t||1e-6,c=u.y-n||1e-6,g=Math.sqrt(s*s+c*c),d=(i[a]-g)*o[a]*e/g;u.vx+=s*d,u.vy+=c*d}}function s(){if(r){var t,n=r.length;for(o=new Array(n),i=new Array(n),t=0;t<n;++t)i[t]=+e(r[t],t,r),o[t]=isNaN(i[t])?0:+l(r[t],t,r)}}return"function"!==typeof e&&(e=a(+e)),null==t&&(t=0),null==n&&(n=0),u.initialize=function(e){r=e,s()},u.strength=function(e){return arguments.length?(l="function"===typeof e?e:a(+e),s(),u):l},u.radius=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),s(),u):e},u.x=function(e){return arguments.length?(t=+e,u):t},u.y=function(e){return arguments.length?(n=+e,u):n},u}function Q(e){var t,n,r,o=a(.1);function i(e){for(var a,o=0,i=t.length;o<i;++o)(a=t[o]).vx+=(r[o]-a.x)*n[o]*e}function l(){if(t){var a,i=t.length;for(n=new Array(i),r=new Array(i),a=0;a<i;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+o(t[a],a,t)}}return"function"!==typeof e&&(e=a(null==e?0:+e)),i.initialize=function(e){t=e,l()},i.strength=function(e){return arguments.length?(o="function"===typeof e?e:a(+e),l(),i):o},i.x=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),l(),i):e},i}function q(e){var t,n,r,o=a(.1);function i(e){for(var a,o=0,i=t.length;o<i;++o)(a=t[o]).vy+=(r[o]-a.y)*n[o]*e}function l(){if(t){var a,i=t.length;for(n=new Array(i),r=new Array(i),a=0;a<i;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+o(t[a],a,t)}}return"function"!==typeof e&&(e=a(null==e?0:+e)),i.initialize=function(e){t=e,l()},i.strength=function(e){return arguments.length?(o="function"===typeof e?e:a(+e),l(),i):o},i.y=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),l(),i):e},i}},3339:function(e,t){"use strict";var n=Math.PI,r=2*n,a=1e-6,o=r-a;function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function l(){return new i}i.prototype=l.prototype={constructor:i,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(e,t,r,o,i){e=+e,t=+t,r=+r,o=+o,i=+i;var l=this._x1,u=this._y1,s=r-e,c=o-t,g=l-e,d=u-t,p=g*g+d*d;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(p>a)if(Math.abs(d*s-c*g)>a&&i){var h=r-l,f=o-u,C=s*s+c*c,I=h*h+f*f,m=Math.sqrt(C),v=Math.sqrt(p),b=i*Math.tan((n-Math.acos((C+p-I)/(2*m*v)))/2),A=b/v,y=b/m;Math.abs(A-1)>a&&(this._+="L"+(e+A*g)+","+(t+A*d)),this._+="A"+i+","+i+",0,0,"+ +(d*h>g*f)+","+(this._x1=e+y*s)+","+(this._y1=t+y*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,i,l,u,s){e=+e,t=+t,s=!!s;var c=(i=+i)*Math.cos(l),g=i*Math.sin(l),d=e+c,p=t+g,h=1^s,f=s?l-u:u-l;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+d+","+p:(Math.abs(this._x1-d)>a||Math.abs(this._y1-p)>a)&&(this._+="L"+d+","+p),i&&(f<0&&(f=f%r+r),f>o?this._+="A"+i+","+i+",0,1,"+h+","+(e-c)+","+(t-g)+"A"+i+","+i+",0,1,"+h+","+(this._x1=d)+","+(this._y1=p):f>a&&(this._+="A"+i+","+i+",0,"+ +(f>=n)+","+h+","+(this._x1=e+i*Math.cos(u))+","+(this._y1=t+i*Math.sin(u))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.Z=l},8413:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(6229),a=n(6094);function o(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===a.P&&t.documentElement.namespaceURI===a.P?t.createElement(e):t.createElementNS(n,e)}}function i(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function l(e){var t=(0,r.Z)(e);return(t.local?i:o)(t)}},4686:function(e,t,n){"use strict";n.r(t),n.d(t,{clientPoint:function(){return p.Z},create:function(){return o},creator:function(){return r.Z},customEvent:function(){return k._H},event:function(){return k.B},local:function(){return l},matcher:function(){return s.Z},mouse:function(){return c.Z},namespace:function(){return g.Z},namespaces:function(){return d.Z},select:function(){return a.Z},selectAll:function(){return f},selection:function(){return h.ZP},selector:function(){return C.Z},selectorAll:function(){return I.Z},style:function(){return m.S},touch:function(){return b},touches:function(){return A.Z},window:function(){return y.Z}});var r=n(8413),a=n(9261);function o(e){return(0,a.Z)((0,r.Z)(e).call(document.documentElement))}var i=0;function l(){return new u}function u(){this._="@"+(++i).toString(36)}u.prototype=l.prototype={constructor:u,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var s=n(1761),c=n(2698),g=n(6229),d=n(6094),p=n(9397),h=n(6382);function f(e){return"string"===typeof e?new h.Y1([document.querySelectorAll(e)],[document.documentElement]):new h.Y1([null==e?[]:e],h.Jz)}var C=n(2538),I=n(4265),m=n(946),v=n(252);function b(e,t,n){arguments.length<3&&(n=t,t=(0,v.Z)().changedTouches);for(var r,a=0,o=t?t.length:0;a<o;++a)if((r=t[a]).identifier===n)return(0,p.Z)(e,r);return null}var A=n(9064),y=n(5795),k=n(2923)},1761:function(e,t,n){"use strict";function r(e){return function(){return this.matches(e)}}n.d(t,{Z:function(){return r}})},2698:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(252),a=n(9397);function o(e){var t=(0,r.Z)();return t.changedTouches&&(t=t.changedTouches[0]),(0,a.Z)(e,t)}},6229:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6094);function a(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),r.Z.hasOwnProperty(t)?{space:r.Z[t],local:e}:e}},6094:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var r="http://www.w3.org/1999/xhtml";t.Z={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},9397:function(e,t,n){"use strict";function r(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}n.d(t,{Z:function(){return r}})},9261:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6382);function a(e){return"string"===typeof e?new r.Y1([[document.querySelector(e)]],[document.documentElement]):new r.Y1([[e]],r.Jz)}},6382:function(e,t,n){"use strict";n.d(t,{Y1:function(){return U},ZP:function(){return Q},Jz:function(){return O}});var r=n(2538);var a=n(4265);var o=n(1761);function i(e){return new Array(e.length)}function l(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}l.prototype={constructor:l,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function u(e,t,n,r,a,o){for(var i,u=0,s=t.length,c=o.length;u<c;++u)(i=t[u])?(i.__data__=o[u],r[u]=i):n[u]=new l(e,o[u]);for(;u<s;++u)(i=t[u])&&(a[u]=i)}function s(e,t,n,r,a,o,i){var u,s,c,g={},d=t.length,p=o.length,h=new Array(d);for(u=0;u<d;++u)(s=t[u])&&(h[u]=c="$"+i.call(s,s.__data__,u,t),c in g?a[u]=s:g[c]=s);for(u=0;u<p;++u)(s=g[c="$"+i.call(e,o[u],u,o)])?(r[u]=s,s.__data__=o[u],g[c]=null):n[u]=new l(e,o[u]);for(u=0;u<d;++u)(s=t[u])&&g[h[u]]===s&&(a[u]=s)}function c(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var g=n(6229);function d(e){return function(){this.removeAttribute(e)}}function p(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h(e,t){return function(){this.setAttribute(e,t)}}function f(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function C(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function I(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var m=n(946);function v(e){return function(){delete this[e]}}function b(e,t){return function(){this[e]=t}}function A(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function y(e){return e.trim().split(/^|\s+/)}function k(e){return e.classList||new Z(e)}function Z(e){this._node=e,this._names=y(e.getAttribute("class")||"")}function S(e,t){for(var n=k(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function w(e,t){for(var n=k(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function B(e){return function(){S(this,e)}}function x(e){return function(){w(this,e)}}function G(e,t){return function(){(t.apply(this,arguments)?S:w)(this,e)}}function R(){this.textContent=""}function W(e){return function(){this.textContent=e}}function V(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function F(){this.innerHTML=""}function N(e){return function(){this.innerHTML=e}}function E(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function D(){this.nextSibling&&this.parentNode.appendChild(this)}function X(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Z.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var J=n(8413);function H(){return null}function Y(){var e=this.parentNode;e&&e.removeChild(this)}function T(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function M(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}var K=n(2923),P=n(5795);function z(e,t,n){var r=(0,P.Z)(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function L(e,t){return function(){return z(this,e,t)}}function _(e,t){return function(){return z(this,e,t.apply(this,arguments))}}var O=[null];function U(e,t){this._groups=e,this._parents=t}function j(){return new U([[document.documentElement]],O)}U.prototype=j.prototype={constructor:U,select:function(e){"function"!==typeof e&&(e=(0,r.Z)(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var i,l,u=t[o],s=u.length,c=a[o]=new Array(s),g=0;g<s;++g)(i=u[g])&&(l=e.call(i,i.__data__,g,u))&&("__data__"in i&&(l.__data__=i.__data__),c[g]=l);return new U(a,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=(0,a.Z)(e));for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var l,u=t[i],s=u.length,c=0;c<s;++c)(l=u[c])&&(r.push(e.call(l,l.__data__,c,u)),o.push(l));return new U(r,o)},filter:function(e){"function"!==typeof e&&(e=(0,o.Z)(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,l=t[a],u=l.length,s=r[a]=[],c=0;c<u;++c)(i=l[c])&&e.call(i,i.__data__,c,l)&&s.push(i);return new U(r,this._parents)},data:function(e,t){if(!e)return C=new Array(this.size()),d=-1,this.each((function(e){C[++d]=e})),C;var n,r=t?s:u,a=this._parents,o=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var i=o.length,l=new Array(i),c=new Array(i),g=new Array(i),d=0;d<i;++d){var p=a[d],h=o[d],f=h.length,C=e.call(p,p&&p.__data__,d,a),I=C.length,m=c[d]=new Array(I),v=l[d]=new Array(I);r(p,h,m,v,g[d]=new Array(f),C,t);for(var b,A,y=0,k=0;y<I;++y)if(b=m[y]){for(y>=k&&(k=y+1);!(A=v[k])&&++k<I;);b._next=A||null}}return(l=new U(l,a))._enter=c,l._exit=g,l},enter:function(){return new U(this._enter||this._groups.map(i),this._parents)},exit:function(){return new U(this._exit||this._groups.map(i),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,o=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(a=t(a)),null==n?o.remove():n(o),r&&a?r.merge(a).order():a},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),l=0;l<o;++l)for(var u,s=t[l],c=n[l],g=s.length,d=i[l]=new Array(g),p=0;p<g;++p)(u=s[p]||c[p])&&(d[p]=u);for(;l<r;++l)i[l]=t[l];return new U(i,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],o=a.length-1,i=a[o];--o>=0;)(r=a[o])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=c);for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o){for(var i,l=n[o],u=l.length,s=a[o]=new Array(u),g=0;g<u;++g)(i=l[g])&&(s[g]=i);s.sort(t)}return new U(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,o=t[n],i=0,l=o.length;i<l;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this},attr:function(e,t){var n=(0,g.Z)(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?p:d:"function"===typeof t?n.local?I:C:n.local?f:h)(n,t))},style:m.Z,property:function(e,t){return arguments.length>1?this.each((null==t?v:"function"===typeof t?A:b)(e,t)):this.node()[e]},classed:function(e,t){var n=y(e+"");if(arguments.length<2){for(var r=k(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?G:t?B:x)(n,t))},text:function(e){return arguments.length?this.each(null==e?R:("function"===typeof e?V:W)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?F:("function"===typeof e?E:N)(e)):this.node().innerHTML},raise:function(){return this.each(D)},lower:function(){return this.each(X)},append:function(e){var t="function"===typeof e?e:(0,J.Z)(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:(0,J.Z)(e),a=null==t?H:"function"===typeof t?t:(0,r.Z)(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)}))},remove:function(){return this.each(Y)},clone:function(e){return this.select(e?M:T)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:K.ZP,dispatch:function(e,t){return this.each(("function"===typeof t?_:L)(e,t))}};var Q=j},2923:function(e,t,n){"use strict";n.d(t,{B:function(){return a},ZP:function(){return c},_H:function(){return g}});var r={},a=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(r={mouseenter:"mouseover",mouseleave:"mouseout"}));function o(e,t,n){return e=i(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function i(e,t,n){return function(r){var o=a;a=r;try{e.call(this,this.__data__,t,n)}finally{a=o}}}function l(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function u(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function s(e,t,n){var a=r.hasOwnProperty(e.type)?o:i;return function(r,o,i){var l,u=this.__on,s=a(t,o,i);if(u)for(var c=0,g=u.length;c<g;++c)if((l=u[c]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=s,l.capture=n),void(l.value=t);this.addEventListener(e.type,s,n),l={type:e.type,name:e.name,value:t,listener:s,capture:n},u?u.push(l):this.__on=[l]}}function c(e,t,n){var r,a,o=l(e+""),i=o.length;if(!(arguments.length<2)){for(c=t?s:u,null==n&&(n=!1),r=0;r<i;++r)this.each(c(o[r],t,n));return this}var c=this.node().__on;if(c)for(var g,d=0,p=c.length;d<p;++d)for(r=0,g=c[d];r<i;++r)if((a=o[r]).type===g.type&&a.name===g.name)return g.value}function g(e,t,n,r){var o=a;e.sourceEvent=a,a=e;try{return t.apply(n,r)}finally{a=o}}},946:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},S:function(){return u}});var r=n(5795);function a(e){return function(){this.style.removeProperty(e)}}function o(e,t,n){return function(){this.style.setProperty(e,t,n)}}function i(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function l(e,t,n){return arguments.length>1?this.each((null==t?a:"function"===typeof t?i:o)(e,t,null==n?"":n)):u(this.node(),e)}function u(e,t){return e.style.getPropertyValue(t)||(0,r.Z)(e).getComputedStyle(e,null).getPropertyValue(t)}},2538:function(e,t,n){"use strict";function r(){}function a(e){return null==e?r:function(){return this.querySelector(e)}}n.d(t,{Z:function(){return a}})},4265:function(e,t,n){"use strict";function r(){return[]}function a(e){return null==e?r:function(){return this.querySelectorAll(e)}}n.d(t,{Z:function(){return a}})},252:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2923);function a(){for(var e,t=r.B;e=t.sourceEvent;)t=e;return t}},9064:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(252),a=n(9397);function o(e,t){null==t&&(t=(0,r.Z)().touches);for(var n=0,o=t?t.length:0,i=new Array(o);n<o;++n)i[n]=(0,a.Z)(e,t[n]);return i}},5795:function(e,t,n){"use strict";function r(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}n.d(t,{Z:function(){return r}})},7670:function(e,t,n){"use strict";n.r(t),n.d(t,{arc:function(){return S},area:function(){return W},areaRadial:function(){return Y},curveBasis:function(){return be},curveBasisClosed:function(){return ye},curveBasisOpen:function(){return Ze},curveBundle:function(){return we},curveCardinal:function(){return Ge},curveCardinalClosed:function(){return We},curveCardinalOpen:function(){return Fe},curveCatmullRom:function(){return De},curveCatmullRomClosed:function(){return Je},curveCatmullRomOpen:function(){return Ye},curveLinear:function(){return B},curveLinearClosed:function(){return Me},curveMonotoneX:function(){return je},curveMonotoneY:function(){return Qe},curveNatural:function(){return et},curveStep:function(){return nt},curveStepAfter:function(){return at},curveStepBefore:function(){return rt},line:function(){return R},lineRadial:function(){return H},linkHorizontal:function(){return U},linkRadial:function(){return Q},linkVertical:function(){return j},pie:function(){return N},pointRadial:function(){return T},radialArea:function(){return Y},radialLine:function(){return H},stack:function(){return ut},stackOffsetDiverging:function(){return ct},stackOffsetExpand:function(){return st},stackOffsetNone:function(){return ot},stackOffsetSilhouette:function(){return gt},stackOffsetWiggle:function(){return dt},stackOrderAppearance:function(){return pt},stackOrderAscending:function(){return ft},stackOrderDescending:function(){return It},stackOrderInsideOut:function(){return mt},stackOrderNone:function(){return it},stackOrderReverse:function(){return vt},symbol:function(){return Ce},symbolCircle:function(){return q},symbolCross:function(){return $},symbolDiamond:function(){return ne},symbolSquare:function(){return le},symbolStar:function(){return ie},symbolTriangle:function(){return se},symbolWye:function(){return he},symbols:function(){return fe}});var r=n(3339);function a(e){return function(){return e}}var o=Math.abs,i=Math.atan2,l=Math.cos,u=Math.max,s=Math.min,c=Math.sin,g=Math.sqrt,d=1e-12,p=Math.PI,h=p/2,f=2*p;function C(e){return e>1?0:e<-1?p:Math.acos(e)}function I(e){return e>=1?h:e<=-1?-h:Math.asin(e)}function m(e){return e.innerRadius}function v(e){return e.outerRadius}function b(e){return e.startAngle}function A(e){return e.endAngle}function y(e){return e&&e.padAngle}function k(e,t,n,r,a,o,i,l){var u=n-e,s=r-t,c=i-a,g=l-o,p=g*u-c*s;if(!(p*p<d))return[e+(p=(c*(t-o)-g*(e-a))/p)*u,t+p*s]}function Z(e,t,n,r,a,o,i){var l=e-n,s=t-r,c=(i?o:-o)/g(l*l+s*s),d=c*s,p=-c*l,h=e+d,f=t+p,C=n+d,I=r+p,m=(h+C)/2,v=(f+I)/2,b=C-h,A=I-f,y=b*b+A*A,k=a-o,Z=h*I-C*f,S=(A<0?-1:1)*g(u(0,k*k*y-Z*Z)),w=(Z*A-b*S)/y,B=(-Z*b-A*S)/y,x=(Z*A+b*S)/y,G=(-Z*b+A*S)/y,R=w-m,W=B-v,V=x-m,F=G-v;return R*R+W*W>V*V+F*F&&(w=x,B=G),{cx:w,cy:B,x01:-d,y01:-p,x11:w*(a/k-1),y11:B*(a/k-1)}}function S(){var e=m,t=v,n=a(0),u=null,S=b,w=A,B=y,x=null;function G(){var a,m,v=+e.apply(this,arguments),b=+t.apply(this,arguments),A=S.apply(this,arguments)-h,y=w.apply(this,arguments)-h,G=o(y-A),R=y>A;if(x||(x=a=(0,r.Z)()),b<v&&(m=b,b=v,v=m),b>d)if(G>f-d)x.moveTo(b*l(A),b*c(A)),x.arc(0,0,b,A,y,!R),v>d&&(x.moveTo(v*l(y),v*c(y)),x.arc(0,0,v,y,A,R));else{var W,V,F=A,N=y,E=A,D=y,X=G,J=G,H=B.apply(this,arguments)/2,Y=H>d&&(u?+u.apply(this,arguments):g(v*v+b*b)),T=s(o(b-v)/2,+n.apply(this,arguments)),M=T,K=T;if(Y>d){var P=I(Y/v*c(H)),z=I(Y/b*c(H));(X-=2*P)>d?(E+=P*=R?1:-1,D-=P):(X=0,E=D=(A+y)/2),(J-=2*z)>d?(F+=z*=R?1:-1,N-=z):(J=0,F=N=(A+y)/2)}var L=b*l(F),_=b*c(F),O=v*l(D),U=v*c(D);if(T>d){var j,Q=b*l(N),q=b*c(N),$=v*l(E),ee=v*c(E);if(G<p&&(j=k(L,_,$,ee,Q,q,O,U))){var te=L-j[0],ne=_-j[1],re=Q-j[0],ae=q-j[1],oe=1/c(C((te*re+ne*ae)/(g(te*te+ne*ne)*g(re*re+ae*ae)))/2),ie=g(j[0]*j[0]+j[1]*j[1]);M=s(T,(v-ie)/(oe-1)),K=s(T,(b-ie)/(oe+1))}}J>d?K>d?(W=Z($,ee,L,_,b,K,R),V=Z(Q,q,O,U,b,K,R),x.moveTo(W.cx+W.x01,W.cy+W.y01),K<T?x.arc(W.cx,W.cy,K,i(W.y01,W.x01),i(V.y01,V.x01),!R):(x.arc(W.cx,W.cy,K,i(W.y01,W.x01),i(W.y11,W.x11),!R),x.arc(0,0,b,i(W.cy+W.y11,W.cx+W.x11),i(V.cy+V.y11,V.cx+V.x11),!R),x.arc(V.cx,V.cy,K,i(V.y11,V.x11),i(V.y01,V.x01),!R))):(x.moveTo(L,_),x.arc(0,0,b,F,N,!R)):x.moveTo(L,_),v>d&&X>d?M>d?(W=Z(O,U,Q,q,v,-M,R),V=Z(L,_,$,ee,v,-M,R),x.lineTo(W.cx+W.x01,W.cy+W.y01),M<T?x.arc(W.cx,W.cy,M,i(W.y01,W.x01),i(V.y01,V.x01),!R):(x.arc(W.cx,W.cy,M,i(W.y01,W.x01),i(W.y11,W.x11),!R),x.arc(0,0,v,i(W.cy+W.y11,W.cx+W.x11),i(V.cy+V.y11,V.cx+V.x11),R),x.arc(V.cx,V.cy,M,i(V.y11,V.x11),i(V.y01,V.x01),!R))):x.arc(0,0,v,D,E,R):x.lineTo(O,U)}else x.moveTo(0,0);if(x.closePath(),a)return x=null,a+""||null}return G.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+S.apply(this,arguments)+ +w.apply(this,arguments))/2-p/2;return[l(r)*n,c(r)*n]},G.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),G):e},G.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:a(+e),G):t},G.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:a(+e),G):n},G.padRadius=function(e){return arguments.length?(u=null==e?null:"function"===typeof e?e:a(+e),G):u},G.startAngle=function(e){return arguments.length?(S="function"===typeof e?e:a(+e),G):S},G.endAngle=function(e){return arguments.length?(w="function"===typeof e?e:a(+e),G):w},G.padAngle=function(e){return arguments.length?(B="function"===typeof e?e:a(+e),G):B},G.context=function(e){return arguments.length?(x=null==e?null:e,G):x},G}function w(e){this._context=e}function B(e){return new w(e)}function x(e){return e[0]}function G(e){return e[1]}function R(){var e=x,t=G,n=a(!0),o=null,i=B,l=null;function u(a){var u,s,c,g=a.length,d=!1;for(null==o&&(l=i(c=(0,r.Z)())),u=0;u<=g;++u)!(u<g&&n(s=a[u],u,a))===d&&((d=!d)?l.lineStart():l.lineEnd()),d&&l.point(+e(s,u,a),+t(s,u,a));if(c)return l=null,c+""||null}return u.x=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),u):e},u.y=function(e){return arguments.length?(t="function"===typeof e?e:a(+e),u):t},u.defined=function(e){return arguments.length?(n="function"===typeof e?e:a(!!e),u):n},u.curve=function(e){return arguments.length?(i=e,null!=o&&(l=i(o)),u):i},u.context=function(e){return arguments.length?(null==e?o=l=null:l=i(o=e),u):o},u}function W(){var e=x,t=null,n=a(0),o=G,i=a(!0),l=null,u=B,s=null;function c(a){var c,g,d,p,h,f=a.length,C=!1,I=new Array(f),m=new Array(f);for(null==l&&(s=u(h=(0,r.Z)())),c=0;c<=f;++c){if(!(c<f&&i(p=a[c],c,a))===C)if(C=!C)g=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=c-1;d>=g;--d)s.point(I[d],m[d]);s.lineEnd(),s.areaEnd()}C&&(I[c]=+e(p,c,a),m[c]=+n(p,c,a),s.point(t?+t(p,c,a):I[c],o?+o(p,c,a):m[c]))}if(h)return s=null,h+""||null}function g(){return R().defined(i).curve(u).context(l)}return c.x=function(n){return arguments.length?(e="function"===typeof n?n:a(+n),t=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),c):e},c.x1=function(e){return arguments.length?(t=null==e?null:"function"===typeof e?e:a(+e),c):t},c.y=function(e){return arguments.length?(n="function"===typeof e?e:a(+e),o=null,c):n},c.y0=function(e){return arguments.length?(n="function"===typeof e?e:a(+e),c):n},c.y1=function(e){return arguments.length?(o=null==e?null:"function"===typeof e?e:a(+e),c):o},c.lineX0=c.lineY0=function(){return g().x(e).y(n)},c.lineY1=function(){return g().x(e).y(o)},c.lineX1=function(){return g().x(t).y(n)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:a(!!e),c):i},c.curve=function(e){return arguments.length?(u=e,null!=l&&(s=u(l)),c):u},c.context=function(e){return arguments.length?(null==e?l=s=null:s=u(l=e),c):l},c}function V(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function F(e){return e}function N(){var e=F,t=V,n=null,r=a(0),o=a(f),i=a(0);function l(a){var l,u,s,c,g,d=a.length,p=0,h=new Array(d),C=new Array(d),I=+r.apply(this,arguments),m=Math.min(f,Math.max(-f,o.apply(this,arguments)-I)),v=Math.min(Math.abs(m)/d,i.apply(this,arguments)),b=v*(m<0?-1:1);for(l=0;l<d;++l)(g=C[h[l]=l]=+e(a[l],l,a))>0&&(p+=g);for(null!=t?h.sort((function(e,n){return t(C[e],C[n])})):null!=n&&h.sort((function(e,t){return n(a[e],a[t])})),l=0,s=p?(m-d*b)/p:0;l<d;++l,I=c)u=h[l],c=I+((g=C[u])>0?g*s:0)+b,C[u]={data:a[u],index:l,value:g,startAngle:I,endAngle:c,padAngle:v};return C}return l.value=function(t){return arguments.length?(e="function"===typeof t?t:a(+t),l):e},l.sortValues=function(e){return arguments.length?(t=e,n=null,l):t},l.sort=function(e){return arguments.length?(n=e,t=null,l):n},l.startAngle=function(e){return arguments.length?(r="function"===typeof e?e:a(+e),l):r},l.endAngle=function(e){return arguments.length?(o="function"===typeof e?e:a(+e),l):o},l.padAngle=function(e){return arguments.length?(i="function"===typeof e?e:a(+e),l):i},l}w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var E=X(B);function D(e){this._curve=e}function X(e){function t(t){return new D(e(t))}return t._curve=e,t}function J(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(X(e)):t()._curve},e}function H(){return J(R().curve(E))}function Y(){var e=W().curve(E),t=e.curve,n=e.lineX0,r=e.lineX1,a=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return J(n())},delete e.lineX0,e.lineEndAngle=function(){return J(r())},delete e.lineX1,e.lineInnerRadius=function(){return J(a())},delete e.lineY0,e.lineOuterRadius=function(){return J(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t(X(e)):t()._curve},e}function T(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}D.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var M=Array.prototype.slice;function K(e){return e.source}function P(e){return e.target}function z(e){var t=K,n=P,o=x,i=G,l=null;function u(){var a,u=M.call(arguments),s=t.apply(this,u),c=n.apply(this,u);if(l||(l=a=(0,r.Z)()),e(l,+o.apply(this,(u[0]=s,u)),+i.apply(this,u),+o.apply(this,(u[0]=c,u)),+i.apply(this,u)),a)return l=null,a+""||null}return u.source=function(e){return arguments.length?(t=e,u):t},u.target=function(e){return arguments.length?(n=e,u):n},u.x=function(e){return arguments.length?(o="function"===typeof e?e:a(+e),u):o},u.y=function(e){return arguments.length?(i="function"===typeof e?e:a(+e),u):i},u.context=function(e){return arguments.length?(l=null==e?null:e,u):l},u}function L(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,a,r,a)}function _(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+a)/2,r,n,r,a)}function O(e,t,n,r,a){var o=T(t,n),i=T(t,n=(n+a)/2),l=T(r,n),u=T(r,a);e.moveTo(o[0],o[1]),e.bezierCurveTo(i[0],i[1],l[0],l[1],u[0],u[1])}function U(){return z(L)}function j(){return z(_)}function Q(){var e=z(O);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}var q={draw:function(e,t){var n=Math.sqrt(t/p);e.moveTo(n,0),e.arc(0,0,n,0,f)}},$={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},ee=Math.sqrt(1/3),te=2*ee,ne={draw:function(e,t){var n=Math.sqrt(t/te),r=n*ee;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},re=Math.sin(p/10)/Math.sin(7*p/10),ae=Math.sin(f/10)*re,oe=-Math.cos(f/10)*re,ie={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=ae*n,a=oe*n;e.moveTo(0,-n),e.lineTo(r,a);for(var o=1;o<5;++o){var i=f*o/5,l=Math.cos(i),u=Math.sin(i);e.lineTo(u*n,-l*n),e.lineTo(l*r-u*a,u*r+l*a)}e.closePath()}},le={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},ue=Math.sqrt(3),se={draw:function(e,t){var n=-Math.sqrt(t/(3*ue));e.moveTo(0,2*n),e.lineTo(-ue*n,-n),e.lineTo(ue*n,-n),e.closePath()}},ce=-.5,ge=Math.sqrt(3)/2,de=1/Math.sqrt(12),pe=3*(de/2+1),he={draw:function(e,t){var n=Math.sqrt(t/pe),r=n/2,a=n*de,o=r,i=n*de+n,l=-o,u=i;e.moveTo(r,a),e.lineTo(o,i),e.lineTo(l,u),e.lineTo(ce*r-ge*a,ge*r+ce*a),e.lineTo(ce*o-ge*i,ge*o+ce*i),e.lineTo(ce*l-ge*u,ge*l+ce*u),e.lineTo(ce*r+ge*a,ce*a-ge*r),e.lineTo(ce*o+ge*i,ce*i-ge*o),e.lineTo(ce*l+ge*u,ce*u-ge*l),e.closePath()}},fe=[q,$,ne,le,ie,se,he];function Ce(){var e=a(q),t=a(64),n=null;function o(){var a;if(n||(n=a=(0,r.Z)()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return o.type=function(t){return arguments.length?(e="function"===typeof t?t:a(t),o):e},o.size=function(e){return arguments.length?(t="function"===typeof e?e:a(+e),o):t},o.context=function(e){return arguments.length?(n=null==e?null:e,o):n},o}function Ie(){}function me(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ve(e){this._context=e}function be(e){return new ve(e)}function Ae(e){this._context=e}function ye(e){return new Ae(e)}function ke(e){this._context=e}function Ze(e){return new ke(e)}function Se(e,t){this._basis=new ve(e),this._beta=t}ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:me(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:me(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ae.prototype={areaStart:Ie,areaEnd:Ie,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:me(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:me(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Se.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],o=t[0],i=e[n]-a,l=t[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(a+r*i),this._beta*t[u]+(1-this._beta)*(o+r*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var we=function e(t){function n(e){return 1===t?new ve(e):new Se(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function Be(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function xe(e,t){this._context=e,this._k=(1-t)/6}xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Be(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Be(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ge=function e(t){function n(e){return new xe(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Re(e,t){this._context=e,this._k=(1-t)/6}Re.prototype={areaStart:Ie,areaEnd:Ie,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Be(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var We=function e(t){function n(e){return new Re(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Ve(e,t){this._context=e,this._k=(1-t)/6}Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Be(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Fe=function e(t){function n(e){return new Ve(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Ne(e,t,n){var r=e._x1,a=e._y1,o=e._x2,i=e._y2;if(e._l01_a>d){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,a=(a*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>d){var s=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*s+e._x1*e._l23_2a-t*e._l12_2a)/c,i=(i*s+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,a,o,i,e._x2,e._y2)}function Ee(e,t){this._context=e,this._alpha=t}Ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ne(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var De=function e(t){function n(e){return t?new Ee(e,t):new xe(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Xe(e,t){this._context=e,this._alpha=t}Xe.prototype={areaStart:Ie,areaEnd:Ie,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ne(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Je=function e(t){function n(e){return t?new Xe(e,t):new Re(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function He(e,t){this._context=e,this._alpha=t}He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ne(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ye=function e(t){function n(e){return t?new He(e,t):new Ve(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Te(e){this._context=e}function Me(e){return new Te(e)}function Ke(e){return e<0?-1:1}function Pe(e,t,n){var r=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(r||a<0&&-0),i=(n-e._y1)/(a||r<0&&-0),l=(o*a+i*r)/(r+a);return(Ke(o)+Ke(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(l))||0}function ze(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Le(e,t,n){var r=e._x0,a=e._y0,o=e._x1,i=e._y1,l=(o-r)/3;e._context.bezierCurveTo(r+l,a+l*t,o-l,i-l*n,o,i)}function _e(e){this._context=e}function Oe(e){this._context=new Ue(e)}function Ue(e){this._context=e}function je(e){return new _e(e)}function Qe(e){return new Oe(e)}function qe(e){this._context=e}function $e(e){var t,n,r=e.length-1,a=new Array(r),o=new Array(r),i=new Array(r);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,o[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/o[t-1],o[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/o[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(o[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function et(e){return new qe(e)}function tt(e,t){this._context=e,this._t=t}function nt(e){return new tt(e,.5)}function rt(e){return new tt(e,0)}function at(e){return new tt(e,1)}function ot(e,t){if((a=e.length)>1)for(var n,r,a,o=1,i=e[t[0]],l=i.length;o<a;++o)for(r=i,i=e[t[o]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function it(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function lt(e,t){return e[t]}function ut(){var e=a([]),t=it,n=ot,r=lt;function o(a){var o,i,l=e.apply(this,arguments),u=a.length,s=l.length,c=new Array(s);for(o=0;o<s;++o){for(var g,d=l[o],p=c[o]=new Array(u),h=0;h<u;++h)p[h]=g=[0,+r(a[h],d,h,a)],g.data=a[h];p.key=d}for(o=0,i=t(c);o<s;++o)c[i[o]].index=o;return n(c,i),c}return o.keys=function(t){return arguments.length?(e="function"===typeof t?t:a(M.call(t)),o):e},o.value=function(e){return arguments.length?(r="function"===typeof e?e:a(+e),o):r},o.order=function(e){return arguments.length?(t=null==e?it:"function"===typeof e?e:a(M.call(e)),o):t},o.offset=function(e){return arguments.length?(n=null==e?ot:e,o):n},o}function st(e,t){if((r=e.length)>0){for(var n,r,a,o=0,i=e[0].length;o<i;++o){for(a=n=0;n<r;++n)a+=e[n][o][1]||0;if(a)for(n=0;n<r;++n)e[n][o][1]/=a}ot(e,t)}}function ct(e,t){if((l=e.length)>0)for(var n,r,a,o,i,l,u=0,s=e[t[0]].length;u<s;++u)for(o=i=0,n=0;n<l;++n)(a=(r=e[t[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=a):a<0?(r[1]=i,r[0]=i+=a):(r[0]=0,r[1]=a)}function gt(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],o=a.length;r<o;++r){for(var i=0,l=0;i<n;++i)l+=e[i][r][1]||0;a[r][1]+=a[r][0]=-l/2}ot(e,t)}}function dt(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,o=0,i=1;i<r;++i){for(var l=0,u=0,s=0;l<a;++l){for(var c=e[t[l]],g=c[i][1]||0,d=(g-(c[i-1][1]||0))/2,p=0;p<l;++p){var h=e[t[p]];d+=(h[i][1]||0)-(h[i-1][1]||0)}u+=g,s+=d*g}n[i-1][1]+=n[i-1][0]=o,u&&(o-=s/u)}n[i-1][1]+=n[i-1][0]=o,ot(e,t)}}function pt(e){var t=e.map(ht);return it(e).sort((function(e,n){return t[e]-t[n]}))}function ht(e){for(var t,n=-1,r=0,a=e.length,o=-1/0;++n<a;)(t=+e[n][1])>o&&(o=t,r=n);return r}function ft(e){var t=e.map(Ct);return it(e).sort((function(e,n){return t[e]-t[n]}))}function Ct(e){for(var t,n=0,r=-1,a=e.length;++r<a;)(t=+e[r][1])&&(n+=t);return n}function It(e){return ft(e).reverse()}function mt(e){var t,n,r=e.length,a=e.map(Ct),o=pt(e),i=0,l=0,u=[],s=[];for(t=0;t<r;++t)n=o[t],i<l?(i+=a[n],u.push(n)):(l+=a[n],s.push(n));return s.reverse().concat(u)}function vt(e){return it(e).reverse()}Te.prototype={areaStart:Ie,areaEnd:Ie,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Le(this,this._t0,ze(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Le(this,ze(this,n=Pe(this,e,t)),n);break;default:Le(this,this._t0,n=Pe(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Oe.prototype=Object.create(_e.prototype)).point=function(e,t){_e.prototype.point.call(this,t,e)},Ue.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,o){this._context.bezierCurveTo(t,e,r,n,o,a)}},qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=$e(e),a=$e(t),o=0,i=1;i<n;++o,++i)this._context.bezierCurveTo(r[0][o],a[0][o],r[1][o],a[1][o],e[i],t[i]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}}},9412:function(e){"use strict";var t="%[a-f0-9]{2}",n=new RegExp(t,"gi"),r=new RegExp("("+t+")+","gi");function a(e,t){try{return decodeURIComponent(e.join(""))}catch(o){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=a(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},a=r.exec(e);a;){try{n[a[0]]=decodeURIComponent(a[0])}catch(t){var i=o(a[0]);i!==a[0]&&(n[a[0]]=i)}a=r.exec(e)}n["%C2"]="\ufffd";for(var l=Object.keys(n),u=0;u<l.length;u++){var s=l[u];e=e.replace(new RegExp(s,"g"),n[s])}return e}(e)}}},951:function(e){"use strict";var t={single_source_shortest_paths:function(e,n,r){var a={},o={};o[n]=0;var i,l,u,s,c,g,d,p=t.PriorityQueue.make();for(p.push(n,0);!p.empty();)for(u in l=(i=p.pop()).value,s=i.cost,c=e[l]||{})c.hasOwnProperty(u)&&(g=s+c[u],d=o[u],("undefined"===typeof o[u]||d>g)&&(o[u]=g,p.push(u,g),a[u]=l));if("undefined"!==typeof r&&"undefined"===typeof o[r]){var h=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(h)}return a},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var a=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(a,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,a={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(a[n]=r[n]);return a.queue=[],a.sorter=e.sorter||r.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},153:function(e){"use strict";e.exports=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);if(a>=55296&&a<=56319&&n>r+1){var o=e.charCodeAt(r+1);o>=56320&&o<=57343&&(a=1024*(a-55296)+o-56320+65536,r+=1)}a<128?t.push(a):a<2048?(t.push(a>>6|192),t.push(63&a|128)):a<55296||a>=57344&&a<65536?(t.push(a>>12|224),t.push(a>>6&63|128),t.push(63&a|128)):a>=65536&&a<=1114111?(t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(63&a|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},2683:function(e){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),o=0;o<r.length;o++){var i=r[o],l=e[i];(a?-1!==t.indexOf(i):t(i,l,e))&&(n[i]=l)}return n}},2110:function(e,t,n){"use strict";var r=n(7441),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function u(e){return r.isMemo(e)?i:l[e.$$typeof]||a}l[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[r.Memo]=i;var s=Object.defineProperty,c=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var a=p(n);a&&a!==h&&e(t,a,r)}var i=c(n);g&&(i=i.concat(g(n)));for(var l=u(t),f=u(n),C=0;C<i.length;++C){var I=i[C];if(!o[I]&&(!r||!r[I])&&(!f||!f[I])&&(!l||!l[I])){var m=d(n,I);try{s(t,I,m)}catch(v){}}}}return t}},1596:function(e,t,n){var r=9007199254740991,a="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,s=l||u||Function("return this")();function c(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var g=Object.prototype,d=g.hasOwnProperty,p=g.toString,h=s.Symbol,f=g.propertyIsEnumerable,C=h?h.isConcatSpreadable:void 0;function I(e,t,n,r,a){var o=-1,i=e.length;for(n||(n=m),a||(a=[]);++o<i;){var l=e[o];t>0&&n(l)?t>1?I(l,t-1,n,r,a):c(a,l):r||(a[a.length]=l)}return a}function m(e){return v(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?p.call(e):"";return t==o||t==i}(e)}(e)}(e)&&d.call(e,"callee")&&(!f.call(e,"callee")||p.call(e)==a)}(e)||!!(C&&e&&e[C])}var v=Array.isArray;e.exports=function(e){return(e?e.length:0)?I(e,Infinity):[]}},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(S){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},o={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=u(e,(0|e)<0?-1:0,!0),i&&(o[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),i&&(a[e]=n),n)}function l(e,t){if(isNaN(e))return t?I:C;if(t){if(e<0)return I;if(e>=p)return y}else{if(e<=-h)return k;if(e+1>=h)return A}return e<0?l(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=l,n.fromBits=u;var s=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return C;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=l(s(n,8)),o=C,i=0;i<e.length;i+=8){var u=Math.min(8,e.length-i),g=parseInt(e.substring(i,i+u),n);if(u<8){var d=l(s(n,u));o=o.mul(d).add(l(g))}else o=(o=o.mul(a)).add(l(g))}return o.unsigned=t,o}function g(e,t){return"number"===typeof e?l(e,t):"string"===typeof e?c(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=g;var d=4294967296,p=d*d,h=p/2,f=i(1<<24),C=i(0);n.ZERO=C;var I=i(0,!0);n.UZERO=I;var m=i(1);n.ONE=m;var v=i(1,!0);n.UONE=v;var b=i(-1);n.NEG_ONE=b;var A=u(-1,2147483647,!1);n.MAX_VALUE=A;var y=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=y;var k=u(0,-2147483648,!1);n.MIN_VALUE=k;var Z=n.prototype;Z.toInt=function(){return this.unsigned?this.low>>>0:this.low},Z.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},Z.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(s(e,6),this.unsigned),o=this,i="";;){var u=o.div(a),c=(o.sub(u.mul(a)).toInt()>>>0).toString(e);if((o=u).isZero())return c+i;for(;c.length<6;)c="0"+c;i=""+c+i}},Z.getHighBits=function(){return this.high},Z.getHighBitsUnsigned=function(){return this.high>>>0},Z.getLowBits=function(){return this.low},Z.getLowBitsUnsigned=function(){return this.low>>>0},Z.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},Z.isZero=function(){return 0===this.high&&0===this.low},Z.eqz=Z.isZero,Z.isNegative=function(){return!this.unsigned&&this.high<0},Z.isPositive=function(){return this.unsigned||this.high>=0},Z.isOdd=function(){return 1===(1&this.low)},Z.isEven=function(){return 0===(1&this.low)},Z.equals=function(e){return r(e)||(e=g(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},Z.eq=Z.equals,Z.notEquals=function(e){return!this.eq(e)},Z.neq=Z.notEquals,Z.ne=Z.notEquals,Z.lessThan=function(e){return this.comp(e)<0},Z.lt=Z.lessThan,Z.lessThanOrEqual=function(e){return this.comp(e)<=0},Z.lte=Z.lessThanOrEqual,Z.le=Z.lessThanOrEqual,Z.greaterThan=function(e){return this.comp(e)>0},Z.gt=Z.greaterThan,Z.greaterThanOrEqual=function(e){return this.comp(e)>=0},Z.gte=Z.greaterThanOrEqual,Z.ge=Z.greaterThanOrEqual,Z.compare=function(e){if(r(e)||(e=g(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},Z.comp=Z.compare,Z.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(m)},Z.neg=Z.negate,Z.add=function(e){r(e)||(e=g(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,i=e.high>>>16,l=65535&e.high,s=e.low>>>16,c=0,d=0,p=0,h=0;return p+=(h+=o+(65535&e.low))>>>16,d+=(p+=a+s)>>>16,c+=(d+=n+l)>>>16,c+=t+i,u((p&=65535)<<16|(h&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},Z.subtract=function(e){return r(e)||(e=g(e)),this.add(e.neg())},Z.sub=Z.subtract,Z.multiply=function(e){if(this.isZero())return C;if(r(e)||(e=g(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return C;if(this.eq(k))return e.isOdd()?k:C;if(e.eq(k))return this.isOdd()?k:C;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return l(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,h=0,I=0,m=0,v=0;return m+=(v+=i*p)>>>16,I+=(m+=o*p)>>>16,m&=65535,I+=(m+=i*d)>>>16,h+=(I+=a*p)>>>16,I&=65535,h+=(I+=o*d)>>>16,I&=65535,h+=(I+=i*c)>>>16,h+=n*p+a*d+o*c+i*s,u((m&=65535)<<16|(v&=65535),(h&=65535)<<16|(I&=65535),this.unsigned)},Z.mul=Z.multiply,Z.divide=function(e){if(r(e)||(e=g(e)),e.isZero())throw Error("division by zero");var n,a,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?I:C;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return I;if(e.gt(this.shru(1)))return v;o=I}else{if(this.eq(k))return e.eq(m)||e.eq(b)?k:e.eq(k)?m:(n=this.shr(1).div(e).shl(1)).eq(C)?e.isNegative()?m:b:(a=this.sub(e.mul(n)),o=n.add(a.div(e)));if(e.eq(k))return this.unsigned?I:C;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=C}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),c=i<=48?1:s(2,i-48),d=l(n),p=d.mul(e);p.isNegative()||p.gt(a);)p=(d=l(n-=c,this.unsigned)).mul(e);d.isZero()&&(d=m),o=o.add(d),a=a.sub(p)}return o},Z.div=Z.divide,Z.modulo=function(e){return r(e)||(e=g(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},Z.mod=Z.modulo,Z.rem=Z.modulo,Z.not=function(){return u(~this.low,~this.high,this.unsigned)},Z.and=function(e){return r(e)||(e=g(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},Z.or=function(e){return r(e)||(e=g(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},Z.xor=function(e){return r(e)||(e=g(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},Z.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},Z.shl=Z.shiftLeft,Z.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},Z.shr=Z.shiftRight,Z.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},Z.shru=Z.shiftRightUnsigned,Z.shr_u=Z.shiftRightUnsigned,Z.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},Z.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},Z.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},Z.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},Z.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,o){for(var i,l,u=a(e),s=1;s<arguments.length;s++){for(var c in i=Object(arguments[s]))n.call(i,c)&&(u[c]=i[c]);if(t){l=t(i);for(var g=0;g<l.length;g++)r.call(i,l[g])&&(u[l[g]]=i[l[g]])}}return u}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},741:function(e,t,n){var r=n(6887),a=n(5054),o=n(416),i=n(9413);function l(e,t,n,o,i){var l=[].slice.call(arguments,1),u=l.length,s="function"===typeof l[u-1];if(!s&&!r())throw new Error("Callback required as last argument");if(!s){if(u<1)throw new Error("Too few arguments provided");return 1===u?(n=t,t=o=void 0):2!==u||t.getContext||(o=n,n=t,t=void 0),new Promise((function(r,i){try{var l=a.create(n,o);r(e(l,t,o))}catch(u){i(u)}}))}if(u<2)throw new Error("Too few arguments provided");2===u?(i=n,n=t,t=o=void 0):3===u&&(t.getContext&&"undefined"===typeof i?(i=o,o=void 0):(i=o,o=n,n=t,t=void 0));try{var c=a.create(n,o);i(null,e(c,t,o))}catch(g){i(g)}}t.create=a.create,t.toCanvas=l.bind(null,o.render),t.toDataURL=l.bind(null,o.renderToDataURL),t.toString=l.bind(null,(function(e,t,n){return i.render(e,n)}))},6887:function(e){e.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},3234:function(e,t,n){var r=n(2338).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=r(e),a=145===n?26:2*Math.ceil((n-13)/(2*t-2)),o=[n-7],i=1;i<t-1;i++)o[i]=o[i-1]-a;return o.push(6),o.reverse()},t.getPositions=function(e){for(var n=[],r=t.getRowColCoords(e),a=r.length,o=0;o<a;o++)for(var i=0;i<a;i++)0===o&&0===i||0===o&&i===a-1||o===a-1&&0===i||n.push([r[o],r[i]]);return n}},8295:function(e,t,n){var r=n(1337),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=r.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*a.indexOf(this.data[t]);n+=a.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=o},5673:function(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1===(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1===(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},2988:function(e){function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){var a=e*this.size+t;this.data[a]=n,r&&(this.reservedBit[a]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},639:function(e,t,n){var r=n(153),a=n(1337);function o(e){this.mode=a.BYTE,this.data=new Uint8Array(r(e))}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=o},3180:function(e,t,n){var r=n(8955),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}}},8955:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&"undefined"!==typeof e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}},8947:function(e,t,n){var r=n(2338).getSymbolSize;t.getPositions=function(e){var t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},7435:function(e,t,n){var r=n(2338),a=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var n=e.bit<<3|t,o=n<<10;r.getBCHDigit(o)-a>=0;)o^=1335<<r.getBCHDigit(o)-a;return 21522^(n<<10|o)}},1239:function(e,t){var n=new Uint8Array(512),r=new Uint8Array(256);!function(){for(var e=1,t=0;t<255;t++)n[t]=e,r[e]=t,256&(e<<=1)&&(e^=285);for(var a=255;a<512;a++)n[a]=n[a-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},8588:function(e,t,n){var r=n(1337),a=n(2338);function o(e){this.mode=r.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=a.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=o},6823:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n=3,r=3,a=40,o=10;function i(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,r=0,a=0,o=0,i=null,l=null,u=0;u<t;u++){a=o=0,i=l=null;for(var s=0;s<t;s++){var c=e.get(u,s);c===i?a++:(a>=5&&(r+=n+(a-5)),i=c,a=1),(c=e.get(s,u))===l?o++:(o>=5&&(r+=n+(o-5)),l=c,o=1)}a>=5&&(r+=n+(a-5)),o>=5&&(r+=n+(o-5))}return r},t.getPenaltyN2=function(e){for(var t=e.size,n=0,a=0;a<t-1;a++)for(var o=0;o<t-1;o++){var i=e.get(a,o)+e.get(a,o+1)+e.get(a+1,o)+e.get(a+1,o+1);4!==i&&0!==i||n++}return n*r},t.getPenaltyN3=function(e){for(var t=e.size,n=0,r=0,o=0,i=0;i<t;i++){r=o=0;for(var l=0;l<t;l++)r=r<<1&2047|e.get(i,l),l>=10&&(1488===r||93===r)&&n++,o=o<<1&2047|e.get(l,i),l>=10&&(1488===o||93===o)&&n++}return n*a},t.getPenaltyN4=function(e){for(var t=0,n=e.data.length,r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*o},t.applyMask=function(e,t){for(var n=t.size,r=0;r<n;r++)for(var a=0;a<n;a++)t.isReserved(a,r)||t.xor(a,r,i(e,a,r))},t.getBestMask=function(e,n){for(var r=Object.keys(t.Patterns).length,a=0,o=1/0,i=0;i<r;i++){n(i),t.applyMask(i,e);var l=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(i,e),l<o&&(o=l,a=i)}return a}},1337:function(e,t,n){var r=n(8402),a=n(8650);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}},320:function(e,t,n){var r=n(1337);function a(e){this.mode=r.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);var a=this.data.length-t;a>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*a+1))},e.exports=a},9203:function(e,t,n){var r=n(1239);t.mul=function(e,t){for(var n=new Uint8Array(e.length+t.length-1),a=0;a<e.length;a++)for(var o=0;o<t.length;o++)n[a+o]^=r.mul(e[a],t[o]);return n},t.mod=function(e,t){for(var n=new Uint8Array(e);n.length-t.length>=0;){for(var a=n[0],o=0;o<t.length;o++)n[o]^=r.mul(t[o],a);for(var i=0;i<n.length&&0===n[i];)i++;n=n.slice(i)}return n},t.generateECPolynomial=function(e){for(var n=new Uint8Array([1]),a=0;a<e;a++)n=t.mul(n,new Uint8Array([1,r.exp(a)]));return n}},5054:function(e,t,n){var r=n(2338),a=n(8955),o=n(5673),i=n(2988),l=n(3234),u=n(8947),s=n(6823),c=n(3180),g=n(220),d=n(1265),p=n(7435),h=n(1337),f=n(2179);function C(e,t,n){var r,a,o=e.size,i=p.getEncodedBits(t,n);for(r=0;r<15;r++)a=1===(i>>r&1),r<6?e.set(r,8,a,!0):r<8?e.set(r+1,8,a,!0):e.set(o-15+r,8,a,!0),r<8?e.set(8,o-r-1,a,!0):r<9?e.set(8,15-r-1+1,a,!0):e.set(8,15-r-1,a,!0);e.set(o-8,8,1,!0)}function I(e,t,n){var a=new o;n.forEach((function(t){a.put(t.mode.bit,4),a.put(t.getLength(),h.getCharCountIndicator(t.mode,e)),t.write(a)}));var i=8*(r.getSymbolTotalCodewords(e)-c.getTotalCodewordsCount(e,t));for(a.getLengthInBits()+4<=i&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);for(var l=(i-a.getLengthInBits())/8,u=0;u<l;u++)a.put(u%2?17:236,8);return function(e,t,n){for(var a=r.getSymbolTotalCodewords(t),o=c.getTotalCodewordsCount(t,n),i=a-o,l=c.getBlocksCount(t,n),u=l-a%l,s=Math.floor(a/l),d=Math.floor(i/l),p=d+1,h=s-d,f=new g(h),C=0,I=new Array(l),m=new Array(l),v=0,b=new Uint8Array(e.buffer),A=0;A<l;A++){var y=A<u?d:p;I[A]=b.slice(C,C+y),m[A]=f.encode(I[A]),C+=y,v=Math.max(v,y)}var k,Z,S=new Uint8Array(a),w=0;for(k=0;k<v;k++)for(Z=0;Z<l;Z++)k<I[Z].length&&(S[w++]=I[Z][k]);for(k=0;k<h;k++)for(Z=0;Z<l;Z++)S[w++]=m[Z][k];return S}(a,e,t)}function m(e,t,n,a){var o;if(Array.isArray(e))o=f.fromArray(e);else{if("string"!==typeof e)throw new Error("Invalid data");var c=t;if(!c){var g=f.rawSplit(e);c=d.getBestVersionForData(g,n)}o=f.fromString(e,c||40)}var p=d.getBestVersionForData(o,n);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<p)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+p+".\n")}else t=p;var h=I(t,n,o),m=r.getSymbolSize(t),v=new i(m);return function(e,t){for(var n=e.size,r=u.getPositions(t),a=0;a<r.length;a++)for(var o=r[a][0],i=r[a][1],l=-1;l<=7;l++)if(!(o+l<=-1||n<=o+l))for(var s=-1;s<=7;s++)i+s<=-1||n<=i+s||(l>=0&&l<=6&&(0===s||6===s)||s>=0&&s<=6&&(0===l||6===l)||l>=2&&l<=4&&s>=2&&s<=4?e.set(o+l,i+s,!0,!0):e.set(o+l,i+s,!1,!0))}(v,t),function(e){for(var t=e.size,n=8;n<t-8;n++){var r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}(v),function(e,t){for(var n=l.getPositions(t),r=0;r<n.length;r++)for(var a=n[r][0],o=n[r][1],i=-2;i<=2;i++)for(var u=-2;u<=2;u++)-2===i||2===i||-2===u||2===u||0===i&&0===u?e.set(a+i,o+u,!0,!0):e.set(a+i,o+u,!1,!0)}(v,t),C(v,n,0),t>=7&&function(e,t){for(var n,r,a,o=e.size,i=d.getEncodedBits(t),l=0;l<18;l++)n=Math.floor(l/3),r=l%3+o-8-3,a=1===(i>>l&1),e.set(n,r,a,!0),e.set(r,n,a,!0)}(v,t),function(e,t){for(var n=e.size,r=-1,a=n-1,o=7,i=0,l=n-1;l>0;l-=2)for(6===l&&l--;;){for(var u=0;u<2;u++)if(!e.isReserved(a,l-u)){var s=!1;i<t.length&&(s=1===(t[i]>>>o&1)),e.set(a,l-u,s),-1===--o&&(i++,o=7)}if((a+=r)<0||n<=a){a-=r,r=-r;break}}}(v,h),isNaN(a)&&(a=s.getBestMask(v,C.bind(null,v,n))),s.applyMask(a,v),C(v,n,a),{modules:v,version:t,errorCorrectionLevel:n,maskPattern:a,segments:o}}t.create=function(e,t){if("undefined"===typeof e||""===e)throw new Error("No input text");var n,o,i=a.M;return"undefined"!==typeof t&&(i=a.from(t.errorCorrectionLevel,a.M),n=d.from(t.version),o=s.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),m(e,n,i,o)}},220:function(e,t,n){var r=n(9203);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new Uint8Array(e.length+this.degree);t.set(e);var n=r.mod(t,this.genPoly),a=this.degree-n.length;if(a>0){var o=new Uint8Array(this.degree);return o.set(n,a),o}return n},e.exports=a},8650:function(e,t){var n="[0-9]+",r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",a="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r=r.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(a,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var o=new RegExp("^"+r+"$"),i=new RegExp("^[0-9]+$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return l.test(e)}},2179:function(e,t,n){var r=n(1337),a=n(320),o=n(8295),i=n(639),l=n(8588),u=n(8650),s=n(2338),c=n(951);function g(e){return unescape(encodeURIComponent(e)).length}function d(e,t,n){for(var r,a=[];null!==(r=e.exec(n));)a.push({data:r[0],index:r.index,mode:t,length:r[0].length});return a}function p(e){var t,n,a=d(u.NUMERIC,r.NUMERIC,e),o=d(u.ALPHANUMERIC,r.ALPHANUMERIC,e);return s.isKanjiModeEnabled()?(t=d(u.BYTE,r.BYTE,e),n=d(u.KANJI,r.KANJI,e)):(t=d(u.BYTE_KANJI,r.BYTE,e),n=[]),a.concat(o,t,n).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function h(e,t){switch(t){case r.NUMERIC:return a.getBitsLength(e);case r.ALPHANUMERIC:return o.getBitsLength(e);case r.KANJI:return l.getBitsLength(e);case r.BYTE:return i.getBitsLength(e)}}function f(e,t){var n,u=r.getBestModeForData(e);if((n=r.from(t,u))!==r.BYTE&&n.bit<u.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(u));switch(n!==r.KANJI||s.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new a(e);case r.ALPHANUMERIC:return new o(e);case r.KANJI:return new l(e);case r.BYTE:return new i(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"===typeof t?e.push(f(t,null)):t.data&&e.push(f(t.data,t.mode)),e}),[])},t.fromString=function(e,n){for(var a=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];switch(a.mode){case r.NUMERIC:t.push([a,{data:a.data,mode:r.ALPHANUMERIC,length:a.length},{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.ALPHANUMERIC:t.push([a,{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.KANJI:t.push([a,{data:a.data,mode:r.BYTE,length:g(a.data)}]);break;case r.BYTE:t.push([{data:a.data,mode:r.BYTE,length:g(a.data)}])}}return t}(p(e,s.isKanjiModeEnabled())),o=function(e,t){for(var n={},a={start:{}},o=["start"],i=0;i<e.length;i++){for(var l=e[i],u=[],s=0;s<l.length;s++){var c=l[s],g=""+i+s;u.push(g),n[g]={node:c,lastCount:0},a[g]={};for(var d=0;d<o.length;d++){var p=o[d];n[p]&&n[p].node.mode===c.mode?(a[p][g]=h(n[p].lastCount+c.length,c.mode)-h(n[p].lastCount,c.mode),n[p].lastCount+=c.length):(n[p]&&(n[p].lastCount=c.length),a[p][g]=h(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,t))}}o=u}for(var f=0;f<o.length;f++)a[o[f]].end=0;return{map:a,table:n}}(a,n),i=c.find_path(o.map,"start","end"),l=[],u=1;u<i.length-1;u++)l.push(o.table[i[u]].node);return t.fromArray(function(e){return e.reduce((function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(l))},t.rawSplit=function(e){return t.fromArray(p(e,s.isKanjiModeEnabled()))}},2338:function(e,t){var n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!==typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return"undefined"!==typeof n},t.toSJIS=function(e){return n(e)}},8402:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},1265:function(e,t,n){var r=n(2338),a=n(3180),o=n(8955),i=n(1337),l=n(8402),u=r.getBCHDigit(7973);function s(e,t){return i.getCharCountIndicator(e,t)+4}function c(e,t){var n=0;return e.forEach((function(e){var r=s(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return l.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!l.isValid(e))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=i.BYTE);var o=8*(r.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t));if(n===i.MIXED)return o;var u=o-s(n,e);switch(n){case i.NUMERIC:return Math.floor(u/10*3);case i.ALPHANUMERIC:return Math.floor(u/11*2);case i.KANJI:return Math.floor(u/13);case i.BYTE:default:return Math.floor(u/8)}},t.getBestVersionForData=function(e,n){var r,a=o.from(n,o.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(var r=1;r<=40;r++)if(c(e,r)<=t.getCapacity(r,n,i.MIXED))return r}(e,a);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(var a=1;a<=40;a++)if(n<=t.getCapacity(a,r,e))return a}(r.mode,r.getLength(),a)},t.getEncodedBits=function(e){if(!l.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;r.getBCHDigit(t)-u>=0;)t^=7973<<r.getBCHDigit(t)-u;return e<<12|t}},416:function(e,t,n){var r=n(3605);t.render=function(e,t,n){var a=n,o=t;"undefined"!==typeof a||t&&t.getContext||(a=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),a=r.getOptions(a);var i=r.getImageWidth(e.modules.size,a),l=o.getContext("2d"),u=l.createImageData(i,i);return r.qrToImageData(u.data,e,a),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(l,o,i),l.putImageData(u,0,0),o},t.renderToDataURL=function(e,n,r){var a=r;"undefined"!==typeof a||n&&n.getContext||(a=n,n=void 0),a||(a={});var o=t.render(e,n,a),i=a.type||"image/png",l=a.rendererOpts||{};return o.toDataURL(i,l.quality)}},9413:function(e,t,n){var r=n(3605);function a(e,t){var n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function o(e,t,n){var r=e+t;return"undefined"!==typeof n&&(r+=" "+n),r}t.render=function(e,t,n){var i=r.getOptions(t),l=e.modules.size,u=e.modules.data,s=l+2*i.margin,c=i.color.light.a?"<path "+a(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",g="<path "+a(i.color.dark,"stroke")+' d="'+function(e,t,n){for(var r="",a=0,i=!1,l=0,u=0;u<e.length;u++){var s=Math.floor(u%t),c=Math.floor(u/t);s||i||(i=!0),e[u]?(l++,u>0&&s>0&&e[u-1]||(r+=i?o("M",s+n,.5+c+n):o("m",a,0),a=0,i=!1),s+1<t&&e[u+1]||(r+=o("h",l),l=0)):a++}return r}(u,l,i.margin)+'"/>',d='viewBox="0 0 '+s+" "+s+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+g+"</svg>\n";return"function"===typeof n&&n(null,p),p}},3605:function(e,t){function n(e){if("number"===typeof e&&(e=e.toString()),"string"!==typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t="undefined"===typeof e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:r,scale:r?4:a,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){for(var a=n.modules.size,o=n.modules.data,i=t.getScale(a,r),l=Math.floor((a+2*r.margin)*i),u=r.margin*i,s=[r.color.light,r.color.dark],c=0;c<l;c++)for(var g=0;g<l;g++){var d=4*(c*l+g),p=r.color.light;if(c>=u&&g>=u&&c<l-u&&g<l-u)p=s[o[Math.floor((c-u)/i)*a+Math.floor((g-u)/i)]?1:0];e[d++]=p.r,e[d++]=p.g,e[d++]=p.b,e[d]=p.a}}},4245:function(e,t,n){"use strict";var r=n(9713).default,a=n(3038).default,o=n(3269).default,i=n(319).default,l=n(499),u=n(9412),s=n(845),c=n(2683),g=Symbol("encodeFragmentIdentifier");function d(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function p(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function h(e,t){return t.decode?u(e):e}function f(e){return Array.isArray(e)?e.sort():"object"===typeof e?f(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function C(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function I(e){var t=(e=C(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function v(e,t){d((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return function(e,n,r){t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var a="string"===typeof n&&n.includes(e.arrayFormatSeparator),o="string"===typeof n&&!a&&h(n,e).includes(e.arrayFormatSeparator);n=o?h(n,e):n;var i=a||o?n.split(e.arrayFormatSeparator).map((function(t){return h(t,e)})):null===n?n:h(n,e);r[t]=i};case"bracket-separator":return function(t,n,r){var a=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),a){var o=null===n?[]:n.split(e.arrayFormatSeparator).map((function(t){return h(t,e)}));void 0!==r[t]?r[t]=[].concat(r[t],o):r[t]=o}else r[t]=n?h(n,e):n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!==typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;var i,l=o(e.split("&"));try{for(l.s();!(i=l.n()).done;){var u=i.value;if(""!==u){var c=s(t.decode?u.replace(/\+/g," "):u,"="),g=a(c,2),p=g[0],C=g[1];C=void 0===C?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?C:h(C,t),n(h(p,t),C,r)}}}catch(S){l.e(S)}finally{l.f()}for(var I=0,v=Object.keys(r);I<v.length;I++){var b=v[I],A=r[b];if("object"===typeof A&&null!==A)for(var y=0,k=Object.keys(A);y<k.length;y++){var Z=k[y];A[Z]=m(A[Z],t)}else r[b]=m(A,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=f(n):e[t]=n,e}),Object.create(null))}t.extract=I,t.parse=v,t.stringify=function(e,t){if(!e)return"";d((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&(null===(r=e[n])||void 0===r)||t.skipEmptyString&&""===e[n];var r},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(n),null===r?[[p(t,e),"[",a,"]"].join("")]:[[p(t,e),"[",p(a,e),"]=",p(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(n),null===r?[[p(t,e),"[]"].join("")]:[[p(t,e),"[]=",p(r,e)].join("")])}};case"colon-list-separator":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(n),null===r?[[p(t,e),":list="].join("")]:[[p(t,e),":list=",p(r,e)].join("")])}};case"comma":case"separator":case"bracket-separator":var t="bracket-separator"===e.arrayFormat?"[]=":"=";return function(n){return function(r,a){return void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:(a=null===a?"":a,0===r.length?[[p(n,e),t,p(a,e)].join("")]:[[r,p(a,e)].join(e.arrayFormatSeparator)])}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(n),null===r?[p(t,e)]:[[p(t,e),"=",p(r,e)].join("")])}}}}(t),a={},o=0,l=Object.keys(e);o<l.length;o++){var u=l[o];n(u)||(a[u]=e[u])}var s=Object.keys(a);return!1!==t.sort&&s.sort(t.sort),s.map((function(n){var a=e[n];return void 0===a?"":null===a?p(n,t):Array.isArray(a)?0===a.length&&"bracket-separator"===t.arrayFormat?p(n,t)+"[]":a.reduce(r(n),[]).join("&"):p(n,t)+"="+p(a,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=s(e,"#"),r=a(n,2),o=r[0],i=r[1];return Object.assign({url:o.split("?")[0]||"",query:v(I(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:h(i,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign(r({encode:!0,strict:!0},g,!0),n);var a=C(e.url).split("?")[0]||"",o=t.extract(e.url),i=t.parse(o,{sort:!1}),l=Object.assign(i,e.query),u=t.stringify(l,n);u&&(u="?".concat(u));var s=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(s="#".concat(n[g]?p(e.fragmentIdentifier,n):e.fragmentIdentifier)),"".concat(a).concat(u).concat(s)},t.pick=function(e,n,a){a=Object.assign(r({parseFragmentIdentifier:!0},g,!1),a);var o=t.parseUrl(e,a),i=o.url,l=o.query,u=o.fragmentIdentifier;return t.stringifyUrl({url:i,query:c(l,n),fragmentIdentifier:u},a)},t.exclude=function(e,n,r){var a=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,a,r)}},8472:function(e,t,n){e.exports=n(3561)},8015:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=(r=o)&&r.__esModule?r:{default:r},l=n(1509),u=n(8333);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildURI",value:function(){return l.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.headers,r=e.separator,a=e.enclosingCharacter,o=e.uFEFF,i=e.target,l=e.specs,u=e.replace;this.state.page=window.open(this.buildURI(t,o,n,r,a),i,l,u)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),t}(i.default.Component);s.defaultProps=Object.assign(u.defaultProps,{target:"_blank"}),s.propTypes=u.propTypes,t.default=s},9088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),l=(r=i)&&r.__esModule?r:{default:r},u=n(1509),s=n(8333);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildURI=n.buildURI.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"buildURI",value:function(){return u.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var n=this.props,r=n.data,a=n.headers,o=n.separator,i=n.filename,l=n.enclosingCharacter,s=n.uFEFF,c=t&&"function"===typeof r?r():r,g=new Blob([s?"\ufeff":"",(0,u.toCSV)(c,a,o,l)]);return window.navigator.msSaveBlob(g,i),!1}}},{key:"handleAsyncClick",value:function(e){var t=this;this.props.onClick(e,(function(n){!1!==n?t.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.headers,o=t.separator,i=t.filename,u=t.uFEFF,s=t.children,c=(t.onClick,t.asyncOnClick,t.enclosingCharacter),g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),d="undefined"===typeof window?"":this.buildURI(n,u,r,o,c);return l.default.createElement("a",a({download:i},g,{ref:function(t){return e.link=t},target:"_self",href:d,onClick:this.handleClick()}),s)}}]),t}(l.default.Component);c.defaultProps=s.defaultProps,c.propTypes=s.propTypes,t.default=c},1509:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},o=t.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":n(e))&&!(e instanceof Array)}))},i=t.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},l=t.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,t){return new Set([].concat(r(e),r(t)))}),[]))},u=t.jsons2arrays=function(e,t){var n=t=t||l(e),a=t;o(t)&&(n=t.map((function(e){return e.label})),a=t.map((function(e){return e.key})));var i=e.map((function(e){return a.map((function(t){return s(t,e)}))}));return[n].concat(r(i))},s=t.getHeaderValue=function(e,t){var n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,t,n,r){var a=e[t];if(void 0!==a&&null!==a)return a;r.splice(1)}),t);return void 0===n?e in t?t[e]:"":n},c=t.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},g=t.joiner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return c(e)})).map((function(e){return""+n+e+n})).join(t)})).join("\n")},d=t.arrays2csv=function(e,t,n,a){return g(t?[t].concat(r(e)):e,n,a)},p=t.jsons2csv=function(e,t,n,r){return g(u(e,t),n,r)},h=t.string2csv=function(e,t,n,r){return t?t.join(n)+"\n"+e:e.replace(/"/g,'""')},f=t.toCSV=function(e,t,n,r){if(o(e))return p(e,t,n,r);if(i(e))return d(e,t,n,r);if("string"===typeof e)return h(e,t,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};t.buildURI=function(e,t,n,r,o){var i=f(e,n,r,o),l=a()?"application/csv":"text/csv",u=new Blob([t?"\ufeff":"",i],{type:l}),s="data:"+l+";charset=utf-8,"+(t?"\ufeff":"")+i,c=window.URL||window.webkitURL;return"undefined"===typeof c.createObjectURL?s:c.createObjectURL(u)}},3561:function(e,t,n){"use strict";t.CSVLink=void 0;var r=o(n(8015)),a=o(n(9088));function o(e){return e&&e.__esModule?e:{default:e}}r.default,t.CSVLink=a.default},8333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropsNotForwarded=t.defaultProps=t.propTypes=void 0;var r,a=n(2791),o=((r=a)&&r.__esModule,n(2007));t.propTypes={data:(0,o.oneOfType)([o.string,o.array,o.func]).isRequired,headers:o.array,target:o.string,separator:o.string,filename:o.string,uFEFF:o.bool,onClick:o.func,asyncOnClick:o.bool,enclosingCharacter:o.string},t.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},t.PropsNotForwarded=["data","headers"]},4463:function(e,t,n){"use strict";var r=n(2791),a=n(1725),o=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var l=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)l.add(t[e])}var g=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},f={};function C(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){I[e]=new C(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];I[t]=new C(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){I[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){I[e]=new C(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){I[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){I[e]=new C(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){I[e]=new C(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){I[e]=new C(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){I[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=I.hasOwnProperty(t)?I[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!p.call(f,e)||!p.call(h,e)&&(d.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,v);I[t]=new C(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,v);I[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,v);I[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){I[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)})),I.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){I[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)}));var A=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=60103,k=60106,Z=60107,S=60108,w=60114,B=60109,x=60110,G=60112,R=60113,W=60120,V=60115,F=60116,N=60121,E=60128,D=60129,X=60130,J=60131;if("function"===typeof Symbol&&Symbol.for){var H=Symbol.for;y=H("react.element"),k=H("react.portal"),Z=H("react.fragment"),S=H("react.strict_mode"),w=H("react.profiler"),B=H("react.provider"),x=H("react.context"),G=H("react.forward_ref"),R=H("react.suspense"),W=H("react.suspense_list"),V=H("react.memo"),F=H("react.lazy"),N=H("react.block"),H("react.scope"),E=H("react.opaque.id"),D=H("react.debug_trace_mode"),X=H("react.offscreen"),J=H("react.legacy_hidden")}var Y,T="function"===typeof Symbol&&Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}function K(e){if(void 0===Y)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Y=t&&t[1]||""}return"\n"+Y+e}var P=!1;function z(e,t){if(!e||P)return"";P=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==o[l])return"\n"+a[i].replace(" at new "," at ")}while(1<=i&&0<=l);break}}}finally{P=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?K(e):""}function L(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 22:return e=z(e.type._render,!1);case 1:return e=z(e.type,!0);default:return""}}function _(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case Z:return"Fragment";case k:return"Portal";case w:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case W:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case G:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case V:return _(e.type);case N:return _(e._render);case F:t=e._payload,e=e._init;try{return _(e(t))}catch(n){}}return null}function O(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function j(e){e._valueTracker||(e._valueTracker=function(e){var t=U(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=U(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=O(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=O(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,O(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+O(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function le(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:O(n)}}function se(e,t){var n=O(t.value),r=O(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ge="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,Ce,Ie=(Ce=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ce(e,t)}))}:Ce);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function Ae(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Ae(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ve).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var ke=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Be=null,xe=null,Ge=null;function Re(e){if(e=ra(e)){if("function"!==typeof Be)throw Error(i(280));var t=e.stateNode;t&&(t=oa(t),Be(e.stateNode,e.type,t))}}function We(e){xe?Ge?Ge.push(e):Ge=[e]:xe=e}function Ve(){if(xe){var e=xe,t=Ge;if(Ge=xe=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Fe(e,t){return e(t)}function Ne(e,t,n,r,a){return e(t,n,r,a)}function Ee(){}var De=Fe,Xe=!1,Je=!1;function He(){null===xe&&null===Ge||(Ee(),Ve())}function Ye(e,t){var n=e.stateNode;if(null===n)return null;var r=oa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Te=!1;if(g)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Te=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(Ce){Te=!1}function Ke(e,t,n,r,a,o,i,l,u){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(c){this.onError(c)}}var Pe=!1,ze=null,Le=!1,_e=null,Oe={onError:function(e){Pe=!0,ze=e}};function Ue(e,t,n,r,a,o,i,l,u){Pe=!1,ze=null,Ke.apply(Oe,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(je(e)!==e)throw Error(i(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return qe(a),e;if(o===r)return qe(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var l=!1,u=a.child;u;){if(u===n){l=!0,n=a,r=o;break}if(u===r){l=!0,r=a,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,r=a;break}if(u===r){l=!0,r=o,n=a;break}u=u.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,ot=!1,it=[],lt=null,ut=null,st=null,ct=new Map,gt=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":lt=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":st=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gt.delete(t.pointerId)}}function Ct(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=ht(t,n,r,a,o),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function It(e){var t=na(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){mt(e)&&n.delete(t)}function bt(){for(ot=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==lt&&mt(lt)&&(lt=null),null!==ut&&mt(ut)&&(ut=null),null!==st&&mt(st)&&(st=null),ct.forEach(vt),gt.forEach(vt)}function At(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function yt(e){function t(t){return At(t,e)}if(0<it.length){At(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==lt&&At(lt,e),null!==ut&&At(ut,e),null!==st&&At(st,e),ct.forEach(t),gt.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)It(n),null===n.blockedOn&&dt.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zt={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},St={},wt={};function Bt(e){if(St[e])return St[e];if(!Zt[e])return e;var t,n=Zt[e];for(t in n)if(n.hasOwnProperty(t)&&t in wt)return St[e]=n[t];return e}g&&(wt=document.createElement("div").style,"AnimationEvent"in window||(delete Zt.animationend.animation,delete Zt.animationiteration.animation,delete Zt.animationstart.animation),"TransitionEvent"in window||delete Zt.transitionend.transition);var xt=Bt("animationend"),Gt=Bt("animationiteration"),Rt=Bt("animationstart"),Wt=Bt("transitionend"),Vt=new Map,Ft=new Map,Nt=["abort","abort",xt,"animationEnd",Gt,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Wt,"transitionEnd","waiting","waiting"];function Et(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Ft.set(r,t),Vt.set(r,a),s(a,[r])}}(0,o.unstable_now)();var Dt=8;function Xt(e){if(0!==(1&e))return Dt=15,1;if(0!==(2&e))return Dt=14,2;if(0!==(4&e))return Dt=13,4;var t=24&e;return 0!==t?(Dt=12,t):0!==(32&e)?(Dt=11,32):0!==(t=192&e)?(Dt=10,t):0!==(256&e)?(Dt=9,256):0!==(t=3584&e)?(Dt=8,t):0!==(4096&e)?(Dt=7,4096):0!==(t=4186112&e)?(Dt=6,t):0!==(t=62914560&e)?(Dt=5,t):67108864&e?(Dt=4,67108864):0!==(134217728&e)?(Dt=3,134217728):0!==(t=805306368&e)?(Dt=2,t):0!==(1073741824&e)?(Dt=1,1073741824):(Dt=8,e)}function Jt(e,t){var n=e.pendingLanes;if(0===n)return Dt=0;var r=0,a=0,o=e.expiredLanes,i=e.suspendedLanes,l=e.pingedLanes;if(0!==o)r=o,a=Dt=15;else if(0!==(o=134217727&n)){var u=o&~i;0!==u?(r=Xt(u),a=Dt):0!==(l&=o)&&(r=Xt(l),a=Dt)}else 0!==(o=n&~i)?(r=Xt(o),a=Dt):0!==l&&(r=Xt(l),a=Dt);if(0===r)return 0;if(r=n&((0>(r=31-Pt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&i)){if(Xt(t),a<=Dt)return t;Dt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Pt(t)),r|=e[n],t&=~a;return r}function Ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Yt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Tt(24&~t))?Yt(10,t):e;case 10:return 0===(e=Tt(192&~t))?Yt(8,t):e;case 8:return 0===(e=Tt(3584&~t))&&(0===(e=Tt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Tt(805306368&~t))&&(t=268435456),t}throw Error(i(358,e))}function Tt(e){return e&-e}function Mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Kt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Pt(t)]=n}var Pt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(zt(e)/Lt|0)|0},zt=Math.log,Lt=Math.LN2;var _t=o.unstable_UserBlockingPriority,Ot=o.unstable_runWithPriority,Ut=!0;function jt(e,t,n,r){Xe||Ee();var a=qt,o=Xe;Xe=!0;try{Ne(a,e,t,n,r)}finally{(Xe=o)||He()}}function Qt(e,t,n,r){Ot(_t,qt.bind(null,e,t,n,r))}function qt(e,t,n,r){var a;if(Ut)if((a=0===(4&t))&&0<it.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),it.push(e);else{var o=$t(e,t,n,r);if(null===o)a&&ft(e,r);else{if(a){if(-1<pt.indexOf(e))return e=ht(o,e,t,n,r),void it.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return lt=Ct(lt,e,t,n,r,a),!0;case"dragenter":return ut=Ct(ut,e,t,n,r,a),!0;case"mouseover":return st=Ct(st,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return ct.set(o,Ct(ct.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,gt.set(o,Ct(gt.get(o)||null,e,t,n,r,a)),!0}return!1}(o,e,t,n,r))return;ft(e,r)}Er(e,t,r,null,n)}}}function $t(e,t,n,r){var a=we(r);if(null!==(a=na(a))){var o=je(a);if(null===o)a=null;else{var i=o.tag;if(13===i){if(null!==(a=Qe(o)))return a;a=null}else if(3===i){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Er(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function ln(){return!1}function un(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:ln,this.isPropagationStopped=ln,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var sn,cn,gn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(dn),hn=a({},dn,{view:0,detail:0}),fn=un(hn),Cn=a({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gn&&(gn&&"mousemove"===e.type?(sn=e.screenX-gn.screenX,cn=e.screenY-gn.screenY):cn=sn=0,gn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),In=un(Cn),mn=un(a({},Cn,{dataTransfer:0})),vn=un(a({},hn,{relatedTarget:0})),bn=un(a({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),An=a({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=un(An),kn=un(a({},dn,{data:0})),Zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function xn(){return Bn}var Gn=a({},hn,{key:function(e){if(e.key){var t=Zn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=un(Gn),Wn=un(a({},Cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Vn=un(a({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Fn=un(a({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=a({},Cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),En=un(Nn),Dn=[9,13,27,32],Xn=g&&"CompositionEvent"in window,Jn=null;g&&"documentMode"in document&&(Jn=document.documentMode);var Hn=g&&"TextEvent"in window&&!Jn,Yn=g&&(!Xn||Jn&&8<Jn&&11>=Jn),Tn=String.fromCharCode(32),Mn=!1;function Kn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ln[e.type]:"textarea"===t}function On(e,t,n,r){We(r),0<(t=Xr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,jn=null;function Qn(e){Gr(e,0)}function qn(e){if(Q(aa(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(g){var tr;if(g){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Un&&(Un.detachEvent("onpropertychange",or),jn=Un=null)}function or(e){if("value"===e.propertyName&&qn(jn)){var t=[];if(On(t,jn,e,we(e)),e=Qn,Xe)e(t);else{Xe=!0;try{Fe(e,t)}finally{Xe=!1,He()}}}}function ir(e,t,n){"focusin"===e?(ar(),jn=n,(Un=t).attachEvent("onpropertychange",or)):"focusout"===e&&ar()}function lr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(jn)}function ur(e,t){if("click"===e)return qn(t)}function sr(e,t){if("input"===e||"change"===e)return qn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},gr=Object.prototype.hasOwnProperty;function dr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!gr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Cr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function Ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mr=g&&"documentMode"in document&&11>=document.documentMode,vr=null,br=null,Ar=null,yr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==q(r)||("selectionStart"in(r=vr)&&Ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Ar&&dr(Ar,r)||(Ar=r,0<(r=Xr(br,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Et("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Et("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Et(Nt,2);for(var Zr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<Zr.length;Sr++)Ft.set(Zr[Sr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Br=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,l,u,s){if(Ue.apply(this,arguments),Pe){if(!Pe)throw Error(i(198));var c=ze;Pe=!1,ze=null,Le||(Le=!0,_e=c)}}(r,t,void 0,e),e.currentTarget=null}function Gr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],u=l.instance,s=l.currentTarget;if(l=l.listener,u!==o&&a.isPropagationStopped())break e;xr(a,l,s),o=u}else for(i=0;i<r.length;i++){if(u=(l=r[i]).instance,s=l.currentTarget,l=l.listener,u!==o&&a.isPropagationStopped())break e;xr(a,l,s),o=u}}}if(Le)throw e=_e,Le=!1,_e=null,e}function Rr(e,t){var n=ia(t),r=e+"__bubble";n.has(r)||(Nr(t,e,2,!1),n.add(r))}var Wr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){e[Wr]||(e[Wr]=!0,l.forEach((function(t){Br.has(t)||Fr(t,!1,e,null),Fr(t,!0,e,null)})))}function Fr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Br.has(e)){if("scroll"!==e)return;a|=2,o=r}var i=ia(o),l=e+"__"+(t?"capture":"bubble");i.has(l)||(t&&(a|=4),Nr(o,e,a,t),i.add(l))}function Nr(e,t,n,r){var a=Ft.get(t);switch(void 0===a?2:a){case 0:a=jt;break;case 1:a=Qt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Te||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Er(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=na(l)))return;if(5===(u=i.tag)||6===u){r=o=i;continue e}l=l.parentNode}}r=r.return}!function(e,t,n){if(Je)return e(t,n);Je=!0;try{De(e,t,n)}finally{Je=!1,He()}}((function(){var r=o,a=we(n),i=[];e:{var l=Vt.get(e);if(void 0!==l){var u=pn,s=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Rn;break;case"focusin":s="focus",u=vn;break;case"focusout":s="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=In;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Vn;break;case xt:case Gt:case Rt:u=bn;break;case Wt:u=Fn;break;case"scroll":u=fn;break;case"wheel":u=En;break;case"copy":case"cut":case"paste":u=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Wn}var c=0!==(4&t),g=!c&&"scroll"===e,d=c?null!==l?l+"Capture":null:l;c=[];for(var p,h=r;null!==h;){var f=(p=h).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==d&&(null!=(f=Ye(h,d))&&c.push(Dr(h,f,p)))),g)break;h=h.return}0<c.length&&(l=new u(l,s,null,n,a),i.push({event:l,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(s=n.relatedTarget||n.fromElement)||!na(s)&&!s[ea])&&(u||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=r,null!==(s=(s=n.relatedTarget||n.toElement)?na(s):null)&&(s!==(g=je(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(u=null,s=r),u!==s)){if(c=In,f="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Wn,f="onPointerLeave",d="onPointerEnter",h="pointer"),g=null==u?l:aa(u),p=null==s?l:aa(s),(l=new c(f,h+"leave",u,n,a)).target=g,l.relatedTarget=p,f=null,na(a)===r&&((c=new c(d,h+"enter",s,n,a)).target=p,c.relatedTarget=g,f=c),g=f,u&&s)e:{for(d=s,h=0,p=c=u;p;p=Jr(p))h++;for(p=0,f=d;f;f=Jr(f))p++;for(;0<h-p;)c=Jr(c),h--;for(;0<p-h;)d=Jr(d),p--;for(;h--;){if(c===d||null!==d&&c===d.alternate)break e;c=Jr(c),d=Jr(d)}c=null}else c=null;null!==u&&Hr(i,l,u,c,!1),null!==s&&null!==g&&Hr(i,g,s,c,!0)}if("select"===(u=(l=r?aa(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var C=$n;else if(_n(l))if(er)C=sr;else{C=lr;var I=ir}else(u=l.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(C=ur);switch(C&&(C=C(e,r))?On(i,C,n,a):(I&&I(e,l,r),"focusout"===e&&(I=l._wrapperState)&&I.controlled&&"number"===l.type&&ae(l,"number",l.value)),I=r?aa(r):window,e){case"focusin":(_n(I)||"true"===I.contentEditable)&&(vr=I,br=r,Ar=null);break;case"focusout":Ar=br=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,kr(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":kr(i,n,a)}var m;if(Xn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zn?Kn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Yn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==v?"onCompositionEnd"===v&&zn&&(m=rn()):(tn="value"in(en=a)?en.value:en.textContent,zn=!0)),0<(I=Xr(r,v)).length&&(v=new kn(v,e,null,n,a),i.push({event:v,listeners:I}),m?v.data=m:null!==(m=Pn(n))&&(v.data=m))),(m=Hn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(Mn=!0,Tn);case"textInput":return(e=t.data)===Tn&&Mn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Xn&&Kn(e,t)?(e=rn(),nn=tn=en=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Xr(r,"onBeforeInput")).length&&(a=new kn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=m))}Gr(i,t)}))}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Ye(e,n))&&r.unshift(Dr(e,o,a)),null!=(o=Ye(e,t))&&r.push(Dr(e,o,a))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var l=n,u=l.alternate,s=l.stateNode;if(null!==u&&u===r)break;5===l.tag&&null!==s&&(l=s,a?null!=(u=Ye(n,o))&&i.unshift(Dr(n,u,l)):a||null!=(u=Ye(n,o))&&i.push(Dr(n,u,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function Yr(){}var Tr=null,Mr=null;function Kr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Pr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var zr="function"===typeof setTimeout?setTimeout:void 0,Lr="function"===typeof clearTimeout?clearTimeout:void 0;function _r(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Or(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var jr=0;var Qr=Math.random().toString(36).slice(2),qr="__reactFiber$"+Qr,$r="__reactProps$"+Qr,ea="__reactContainer$"+Qr,ta="__reactEvents$"+Qr;function na(e){var t=e[qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ur(e);null!==e;){if(n=e[qr])return n;e=Ur(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[qr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function oa(e){return e[$r]||null}function ia(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var la=[],ua=-1;function sa(e){return{current:e}}function ca(e){0>ua||(e.current=la[ua],la[ua]=null,ua--)}function ga(e,t){ua++,la[ua]=e.current,e.current=t}var da={},pa=sa(da),ha=sa(!1),fa=da;function Ca(e,t){var n=e.type.contextTypes;if(!n)return da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ia(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ma(){ca(ha),ca(pa)}function va(e,t,n){if(pa.current!==da)throw Error(i(168));ga(pa,t),ga(ha,n)}function ba(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(i(108,_(t)||"Unknown",o));return a({},n,r)}function Aa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||da,fa=pa.current,ga(pa,e),ga(ha,ha.current),!0}function ya(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=ba(e,t,fa),r.__reactInternalMemoizedMergedChildContext=e,ca(ha),ca(pa),ga(pa,e)):ca(ha),ga(ha,n)}var ka=null,Za=null,Sa=o.unstable_runWithPriority,wa=o.unstable_scheduleCallback,Ba=o.unstable_cancelCallback,xa=o.unstable_shouldYield,Ga=o.unstable_requestPaint,Ra=o.unstable_now,Wa=o.unstable_getCurrentPriorityLevel,Va=o.unstable_ImmediatePriority,Fa=o.unstable_UserBlockingPriority,Na=o.unstable_NormalPriority,Ea=o.unstable_LowPriority,Da=o.unstable_IdlePriority,Xa={},Ja=void 0!==Ga?Ga:function(){},Ha=null,Ya=null,Ta=!1,Ma=Ra(),Ka=1e4>Ma?Ra:function(){return Ra()-Ma};function Pa(){switch(Wa()){case Va:return 99;case Fa:return 98;case Na:return 97;case Ea:return 96;case Da:return 95;default:throw Error(i(332))}}function za(e){switch(e){case 99:return Va;case 98:return Fa;case 97:return Na;case 96:return Ea;case 95:return Da;default:throw Error(i(332))}}function La(e,t){return e=za(e),Sa(e,t)}function _a(e,t,n){return e=za(e),wa(e,t,n)}function Oa(){if(null!==Ya){var e=Ya;Ya=null,Ba(e)}Ua()}function Ua(){if(!Ta&&null!==Ha){Ta=!0;var e=0;try{var t=Ha;La(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ha=null}catch(n){throw null!==Ha&&(Ha=Ha.slice(e+1)),wa(Va,Oa),n}finally{Ta=!1}}}var ja=A.ReactCurrentBatchConfig;function Qa(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qa=sa(null),$a=null,eo=null,to=null;function no(){to=eo=$a=null}function ro(e){var t=qa.current;ca(qa),e.type._context._currentValue=t}function ao(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){$a=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Xi=!0),e.firstContext=null)}function io(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===$a)throw Error(i(308));eo=t,$a.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var lo=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function so(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function go(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function po(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ho(e,t,n,r){var o=e.updateQueue;lo=!1;var i=o.firstBaseUpdate,l=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var s=u,c=s.next;s.next=null,null===l?i=c:l.next=c,l=s;var g=e.alternate;if(null!==g){var d=(g=g.updateQueue).lastBaseUpdate;d!==l&&(null===d?g.firstBaseUpdate=c:d.next=c,g.lastBaseUpdate=s)}}if(null!==i){for(d=o.baseState,l=0,g=c=s=null;;){u=i.lane;var p=i.eventTime;if((r&u)===u){null!==g&&(g=g.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,f=i;switch(u=t,p=n,f.tag){case 1:if("function"===typeof(h=f.payload)){d=h.call(p,d,u);break e}d=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(u="function"===typeof(h=f.payload)?h.call(p,d,u):h)||void 0===u)break e;d=a({},d,u);break e;case 2:lo=!0}}null!==i.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[i]:u.push(i))}else p={eventTime:p,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===g?(c=g=p,s=d):g=g.next=p,l|=u;if(null===(i=i.next)){if(null===(u=o.shared.pending))break;i=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===g&&(s=d),o.baseState=s,o.firstBaseUpdate=c,o.lastBaseUpdate=g,Tl|=l,e.lanes=l,e.memoizedState=d}}function fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Co=(new r.Component).refs;function Io(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=du(),a=pu(e),o=co(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),go(e,o),hu(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=du(),a=pu(e),o=co(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),go(e,o),hu(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=du(),r=pu(e),a=co(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),go(e,a),hu(e,r,n)}};function vo(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(a,o))}function bo(e,t,n){var r=!1,a=da,o=t.contextType;return"object"===typeof o&&null!==o?o=io(o):(a=Ia(t)?fa:pa.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ca(e,a):da),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function yo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Co,uo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=io(o):(o=Ia(t)?fa:pa.current,a.context=Ca(e,o)),ho(e,n,a,r),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Io(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&mo.enqueueReplaceState(a,a.state,null),ho(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var ko=Array.isArray;function Zo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===Co&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function So(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Lu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function l(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=ju(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function s(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Zo(e,t,n),r.return=e,r):((r=_u(n.type,n.key,n.props,null,e.mode,r)).ref=Zo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Qu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function g(e,t,n,r,o){return null===t||7!==t.tag?((t=Ou(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return(n=_u(t.type,t.key,t.props,null,e.mode,n)).ref=Zo(e,null,t),n.return=e,n;case k:return(t=Qu(t,e.mode,n)).return=e,t}if(ko(t)||M(t))return(t=Ou(t,e.mode,n,null)).return=e,t;So(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===a?n.type===Z?g(e,t,n.props.children,r,a):s(e,t,n,r):null;case k:return n.key===a?c(e,t,n,r):null}if(ko(n)||M(n))return null!==a?null:g(e,t,n,r,null);So(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case y:return e=e.get(null===r.key?n:r.key)||null,r.type===Z?g(t,e,r.props.children,a,r.key):s(t,e,r,a);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(ko(r)||M(r))return g(t,e=e.get(n)||null,r,a,null);So(t,r)}return null}function f(a,i,l,u){for(var s=null,c=null,g=i,f=i=0,C=null;null!==g&&f<l.length;f++){g.index>f?(C=g,g=null):C=g.sibling;var I=p(a,g,l[f],u);if(null===I){null===g&&(g=C);break}e&&g&&null===I.alternate&&t(a,g),i=o(I,i,f),null===c?s=I:c.sibling=I,c=I,g=C}if(f===l.length)return n(a,g),s;if(null===g){for(;f<l.length;f++)null!==(g=d(a,l[f],u))&&(i=o(g,i,f),null===c?s=g:c.sibling=g,c=g);return s}for(g=r(a,g);f<l.length;f++)null!==(C=h(g,a,f,l[f],u))&&(e&&null!==C.alternate&&g.delete(null===C.key?f:C.key),i=o(C,i,f),null===c?s=C:c.sibling=C,c=C);return e&&g.forEach((function(e){return t(a,e)})),s}function C(a,l,u,s){var c=M(u);if("function"!==typeof c)throw Error(i(150));if(null==(u=c.call(u)))throw Error(i(151));for(var g=c=null,f=l,C=l=0,I=null,m=u.next();null!==f&&!m.done;C++,m=u.next()){f.index>C?(I=f,f=null):I=f.sibling;var v=p(a,f,m.value,s);if(null===v){null===f&&(f=I);break}e&&f&&null===v.alternate&&t(a,f),l=o(v,l,C),null===g?c=v:g.sibling=v,g=v,f=I}if(m.done)return n(a,f),c;if(null===f){for(;!m.done;C++,m=u.next())null!==(m=d(a,m.value,s))&&(l=o(m,l,C),null===g?c=m:g.sibling=m,g=m);return c}for(f=r(a,f);!m.done;C++,m=u.next())null!==(m=h(f,a,C,m.value,s))&&(e&&null!==m.alternate&&f.delete(null===m.key?C:m.key),l=o(m,l,C),null===g?c=m:g.sibling=m,g=m);return e&&f.forEach((function(e){return t(a,e)})),c}return function(e,r,o,u){var s="object"===typeof o&&null!==o&&o.type===Z&&null===o.key;s&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case y:e:{for(c=o.key,s=r;null!==s;){if(s.key===c){if(7===s.tag){if(o.type===Z){n(e,s.sibling),(r=a(s,o.props.children)).return=e,e=r;break e}}else if(s.elementType===o.type){n(e,s.sibling),(r=a(s,o.props)).ref=Zo(e,s,o),r.return=e,e=r;break e}n(e,s);break}t(e,s),s=s.sibling}o.type===Z?((r=Ou(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=_u(o.type,o.key,o.props,null,e.mode,u)).ref=Zo(e,r,o),u.return=e,e=u)}return l(e);case k:e:{for(s=o.key;null!==r;){if(r.key===s){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Qu(o,e.mode,u)).return=e,e=r}return l(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=ju(o,e.mode,u)).return=e,e=r),l(e);if(ko(o))return f(e,r,o,u);if(M(o))return C(e,r,o,u);if(c&&So(e,o),"undefined"===typeof o&&!s)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,_(e.type)||"Component"))}return n(e,r)}}var Bo=wo(!0),xo=wo(!1),Go={},Ro=sa(Go),Wo=sa(Go),Vo=sa(Go);function Fo(e){if(e===Go)throw Error(i(174));return e}function No(e,t){switch(ga(Vo,t),ga(Wo,e),ga(Ro,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ca(Ro),ga(Ro,t)}function Eo(){ca(Ro),ca(Wo),ca(Vo)}function Do(e){Fo(Vo.current);var t=Fo(Ro.current),n=he(t,e.type);t!==n&&(ga(Wo,e),ga(Ro,n))}function Xo(e){Wo.current===e&&(ca(Ro),ca(Wo))}var Jo=sa(0);function Ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yo=null,To=null,Mo=!1;function Ko(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Po(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function zo(e){if(Mo){var t=To;if(t){var n=t;if(!Po(e,t)){if(!(t=Or(n.nextSibling))||!Po(e,t))return e.flags=-1025&e.flags|2,Mo=!1,void(Yo=e);Ko(Yo,n)}Yo=e,To=Or(t.firstChild)}else e.flags=-1025&e.flags|2,Mo=!1,Yo=e}}function Lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Yo=e}function _o(e){if(e!==Yo)return!1;if(!Mo)return Lo(e),Mo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Pr(t,e.memoizedProps))for(t=To;t;)Ko(e,t),t=Or(t.nextSibling);if(Lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){To=Or(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}To=null}}else To=Yo?Or(e.stateNode.nextSibling):null;return!0}function Oo(){To=Yo=null,Mo=!1}var Uo=[];function jo(){for(var e=0;e<Uo.length;e++)Uo[e]._workInProgressVersionPrimary=null;Uo.length=0}var Qo=A.ReactCurrentDispatcher,qo=A.ReactCurrentBatchConfig,$o=0,ei=null,ti=null,ni=null,ri=!1,ai=!1;function oi(){throw Error(i(321))}function ii(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function li(e,t,n,r,a,o){if($o=o,ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qo.current=null===e||null===e.memoizedState?Fi:Ni,e=n(r,a),ai){o=0;do{if(ai=!1,!(25>o))throw Error(i(301));o+=1,ni=ti=null,t.updateQueue=null,Qo.current=Ei,e=n(r,a)}while(ai)}if(Qo.current=Vi,t=null!==ti&&null!==ti.next,$o=0,ni=ti=ei=null,ri=!1,t)throw Error(i(300));return e}function ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ni?ei.memoizedState=ni=e:ni=ni.next=e,ni}function si(){if(null===ti){var e=ei.alternate;e=null!==e?e.memoizedState:null}else e=ti.next;var t=null===ni?ei.memoizedState:ni.next;if(null!==t)ni=t,ti=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ti=e).memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},null===ni?ei.memoizedState=ni=e:ni=ni.next=e}return ni}function ci(e,t){return"function"===typeof t?t(e):t}function gi(e){var t=si(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ti,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var l=a.next;a.next=o.next,o.next=l}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=l=o=null,s=a;do{var c=s.lane;if(($o&c)===c)null!==u&&(u=u.next={lane:0,action:s.action,eagerReducer:s.eagerReducer,eagerState:s.eagerState,next:null}),r=s.eagerReducer===e?s.eagerState:e(r,s.action);else{var g={lane:c,action:s.action,eagerReducer:s.eagerReducer,eagerState:s.eagerState,next:null};null===u?(l=u=g,o=r):u=u.next=g,ei.lanes|=c,Tl|=c}s=s.next}while(null!==s&&s!==a);null===u?o=r:u.next=l,cr(r,t.memoizedState)||(Xi=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function di(e){var t=si(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var l=a=a.next;do{o=e(o,l.action),l=l.next}while(l!==a);cr(o,t.memoizedState)||(Xi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function pi(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=($o&e)===e)&&(t._workInProgressVersionPrimary=r,Uo.push(t))),e)return n(t._source);throw Uo.push(t),Error(i(350))}function hi(e,t,n,r){var a=Fl;if(null===a)throw Error(i(349));var o=t._getVersion,l=o(t._source),u=Qo.current,s=u.useState((function(){return pi(a,t,n)})),c=s[1],g=s[0];s=ni;var d=e.memoizedState,p=d.refs,h=p.getSnapshot,f=d.source;d=d.subscribe;var C=ei;return e.memoizedState={refs:p,source:t,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var e=o(t._source);if(!cr(l,e)){e=n(t._source),cr(g,e)||(c(e),e=pu(C),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,i=e;0<i;){var u=31-Pt(i),s=1<<u;r[u]|=e,i&=~s}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pu(C);a.mutableReadLanes|=r&a.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),cr(h,n)&&cr(f,t)&&cr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ci,lastRenderedState:g}).dispatch=c=Wi.bind(null,ei,e),s.queue=e,s.baseQueue=null,g=pi(a,t,n),s.memoizedState=s.baseState=g),g}function fi(e,t,n){return hi(si(),e,t,n)}function Ci(e){var t=ui();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ci,lastRenderedState:e}).dispatch=Wi.bind(null,ei,e),[t.memoizedState,e]}function Ii(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ei.updateQueue)?(t={lastEffect:null},ei.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mi(e){return e={current:e},ui().memoizedState=e}function vi(){return si().memoizedState}function bi(e,t,n,r){var a=ui();ei.flags|=e,a.memoizedState=Ii(1|t,n,void 0,void 0===r?null:r)}function Ai(e,t,n,r){var a=si();r=void 0===r?null:r;var o=void 0;if(null!==ti){var i=ti.memoizedState;if(o=i.destroy,null!==r&&ii(r,i.deps))return void Ii(t,n,o,r)}ei.flags|=e,a.memoizedState=Ii(1|t,n,o,r)}function yi(e,t){return bi(516,4,e,t)}function ki(e,t){return Ai(516,4,e,t)}function Zi(e,t){return Ai(4,2,e,t)}function Si(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function wi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4,2,Si.bind(null,t,e),n)}function Bi(){}function xi(e,t){var n=si();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ii(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gi(e,t){var n=si();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ii(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ri(e,t){var n=Pa();La(98>n?98:n,(function(){e(!0)})),La(97<n?97:n,(function(){var n=qo.transition;qo.transition=1;try{e(!1),t()}finally{qo.transition=n}}))}function Wi(e,t,n){var r=du(),a=pu(e),o={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?o.next=o:(o.next=i.next,i.next=o),t.pending=o,i=e.alternate,e===ei||null!==i&&i===ei)ai=ri=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var l=t.lastRenderedState,u=i(l,n);if(o.eagerReducer=i,o.eagerState=u,cr(u,l))return}catch(s){}hu(e,a,r)}}var Vi={readContext:io,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useOpaqueIdentifier:oi,unstable_isNewReconciler:!1},Fi={readContext:io,useCallback:function(e,t){return ui().memoizedState=[e,void 0===t?null:t],e},useContext:io,useEffect:yi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bi(4,2,Si.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bi(4,2,e,t)},useMemo:function(e,t){var n=ui();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ui();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Wi.bind(null,ei,e),[r.memoizedState,e]},useRef:mi,useState:Ci,useDebugValue:Bi,useDeferredValue:function(e){var t=Ci(e),n=t[0],r=t[1];return yi((function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}}),[e]),n},useTransition:function(){var e=Ci(!1),t=e[0];return mi(e=Ri.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ui();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},hi(r,e,t,n)},useOpaqueIdentifier:function(){if(Mo){var e=!1,t=function(e){return{$$typeof:E,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(jr++).toString(36))),Error(i(355))})),n=Ci(t)[1];return 0===(2&ei.mode)&&(ei.flags|=516,Ii(5,(function(){n("r:"+(jr++).toString(36))}),void 0,null)),t}return Ci(t="r:"+(jr++).toString(36)),t},unstable_isNewReconciler:!1},Ni={readContext:io,useCallback:xi,useContext:io,useEffect:ki,useImperativeHandle:wi,useLayoutEffect:Zi,useMemo:Gi,useReducer:gi,useRef:vi,useState:function(){return gi(ci)},useDebugValue:Bi,useDeferredValue:function(e){var t=gi(ci),n=t[0],r=t[1];return ki((function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}}),[e]),n},useTransition:function(){var e=gi(ci)[0];return[vi().current,e]},useMutableSource:fi,useOpaqueIdentifier:function(){return gi(ci)[0]},unstable_isNewReconciler:!1},Ei={readContext:io,useCallback:xi,useContext:io,useEffect:ki,useImperativeHandle:wi,useLayoutEffect:Zi,useMemo:Gi,useReducer:di,useRef:vi,useState:function(){return di(ci)},useDebugValue:Bi,useDeferredValue:function(e){var t=di(ci),n=t[0],r=t[1];return ki((function(){var t=qo.transition;qo.transition=1;try{r(e)}finally{qo.transition=t}}),[e]),n},useTransition:function(){var e=di(ci)[0];return[vi().current,e]},useMutableSource:fi,useOpaqueIdentifier:function(){return di(ci)[0]},unstable_isNewReconciler:!1},Di=A.ReactCurrentOwner,Xi=!1;function Ji(e,t,n,r){t.child=null===e?xo(t,null,n,r):Bo(t,e.child,n,r)}function Hi(e,t,n,r,a){n=n.render;var o=t.ref;return oo(t,a),r=li(e,t,n,r,o,a),null===e||Xi?(t.flags|=1,Ji(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,ol(e,t,a))}function Yi(e,t,n,r,a,o){if(null===e){var i=n.type;return"function"!==typeof i||zu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_u(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ti(e,t,i,r,a,o))}return i=e.child,0===(a&o)&&(a=i.memoizedProps,(n=null!==(n=n.compare)?n:dr)(a,r)&&e.ref===t.ref)?ol(e,t,o):(t.flags|=1,(e=Lu(i,r)).ref=t.ref,e.return=t,t.child=e)}function Ti(e,t,n,r,a,o){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Xi=!1,0===(o&a))return t.lanes=e.lanes,ol(e,t,o);0!==(16384&e.flags)&&(Xi=!0)}return Pi(e,t,n,r,o)}function Mi(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},yu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},yu(t,e),null;t.memoizedState={baseLanes:0},yu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,yu(t,r);return Ji(e,t,a,n),t.child}function Ki(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Pi(e,t,n,r,a){var o=Ia(n)?fa:pa.current;return o=Ca(t,o),oo(t,a),n=li(e,t,n,r,o,a),null===e||Xi?(t.flags|=1,Ji(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,ol(e,t,a))}function zi(e,t,n,r,a){if(Ia(n)){var o=!0;Aa(t)}else o=!1;if(oo(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,r),yo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var u=i.context,s=n.contextType;"object"===typeof s&&null!==s?s=io(s):s=Ca(t,s=Ia(n)?fa:pa.current);var c=n.getDerivedStateFromProps,g="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;g||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==r||u!==s)&&Ao(t,i,r,s),lo=!1;var d=t.memoizedState;i.state=d,ho(t,r,i,a),u=t.memoizedState,l!==r||d!==u||ha.current||lo?("function"===typeof c&&(Io(t,n,c,r),u=t.memoizedState),(l=lo||vo(t,n,l,r,d,u,s))?(g||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4)):("function"===typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=s,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4),r=!1)}else{i=t.stateNode,so(e,t),l=t.memoizedProps,s=t.type===t.elementType?l:Qa(t.type,l),i.props=s,g=t.pendingProps,d=i.context,"object"===typeof(u=n.contextType)&&null!==u?u=io(u):u=Ca(t,u=Ia(n)?fa:pa.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==g||d!==u)&&Ao(t,i,r,u),lo=!1,d=t.memoizedState,i.state=d,ho(t,r,i,a);var h=t.memoizedState;l!==g||d!==h||ha.current||lo?("function"===typeof p&&(Io(t,n,p,r),h=t.memoizedState),(s=lo||vo(t,n,s,r,d,h,u))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,u),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=u,r=s):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Li(e,t,n,r,o,a)}function Li(e,t,n,r,a,o){Ki(e,t);var i=0!==(64&t.flags);if(!r&&!i)return a&&ya(t,n,!1),ol(e,t,o);r=t.stateNode,Di.current=t;var l=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Bo(t,e.child,null,o),t.child=Bo(t,null,l,o)):Ji(e,t,l,o),t.memoizedState=r.state,a&&ya(t,n,!0),t.child}function _i(e){var t=e.stateNode;t.pendingContext?va(0,t.pendingContext,t.pendingContext!==t.context):t.context&&va(0,t.context,!1),No(e,t.containerInfo)}var Oi,Ui,ji,Qi={dehydrated:null,retryLane:0};function qi(e,t,n){var r,a=t.pendingProps,o=Jo.current,i=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),ga(Jo,1&o),null===e?(void 0!==a.fallback&&zo(t),e=a.children,o=a.fallback,i?(e=$i(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qi,e):"number"===typeof a.unstable_expectedLoadTime?(e=$i(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qi,t.lanes=33554432,e):((n=Uu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,i?(a=tl(e,t,a.children,a.fallback,n),i=t.child,o=e.child.memoizedState,i.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=Qi,a):(n=el(e,t,a.children,n),t.memoizedState=null,n))}function $i(e,t,n,r){var a=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Uu(t,a,0,null),n=Ou(n,a,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function el(e,t,n,r){var a=e.child;return e=a.sibling,n=Lu(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tl(e,t,n,r,a){var o=t.mode,i=e.child;e=i.sibling;var l={mode:"hidden",children:n};return 0===(2&o)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=l,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=i,i.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Lu(i,l),null!==e?r=Lu(e,r):(r=Ou(r,o,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nl(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ao(e.return,t)}function rl(e,t,n,r,a,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a,i.lastEffect=o)}function al(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Ji(e,t,r.children,n),0!==(2&(r=Jo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n);else if(19===e.tag)nl(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ga(Jo,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Ho(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rl(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Ho(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rl(t,!0,n,null,o,t.lastEffect);break;case"together":rl(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ol(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tl|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Lu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function il(e,t){if(!Mo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ll(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Ia(t.type)&&ma(),null;case 3:return Eo(),ca(ha),ca(pa),jo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(_o(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Xo(t);var o=Fo(Vo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ui(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=Fo(Ro.current),_o(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[qr]=t,r[$r]=l,n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(e=0;e<wr.length;e++)Rr(wr[e],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":ee(r,l),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Rr("invalid",r);break;case"textarea":ue(r,l),Rr("invalid",r)}for(var s in Ze(n,l),e=null,l)l.hasOwnProperty(s)&&(o=l[s],"children"===s?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(s)&&null!=o&&"onScroll"===s&&Rr("scroll",r));switch(n){case"input":j(r),re(r,l,!0);break;case"textarea":j(r),ce(r);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(r.onclick=Yr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(s=9===o.nodeType?o:o.ownerDocument,e===ge&&(e=pe(n)),e===ge?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[qr]=t,e[$r]=r,Oi(e,t),t.stateNode=e,s=Se(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),o=r;break;case"iframe":case"object":case"embed":Rr("load",e),o=r;break;case"video":case"audio":for(o=0;o<wr.length;o++)Rr(wr[o],e);o=r;break;case"source":Rr("error",e),o=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),o=r;break;case"details":Rr("toggle",e),o=r;break;case"input":ee(e,r),o=$(e,r),Rr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=a({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":ue(e,r),o=le(e,r),Rr("invalid",e);break;default:o=r}Ze(n,o);var c=o;for(l in c)if(c.hasOwnProperty(l)){var g=c[l];"style"===l?ye(e,g):"dangerouslySetInnerHTML"===l?null!=(g=g?g.__html:void 0)&&Ie(e,g):"children"===l?"string"===typeof g?("textarea"!==n||""!==g)&&me(e,g):"number"===typeof g&&me(e,""+g):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?null!=g&&"onScroll"===l&&Rr("scroll",e):null!=g&&b(e,l,g,s))}switch(n){case"input":j(e),re(e,r,!1);break;case"textarea":j(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+O(r.value));break;case"select":e.multiple=!!r.multiple,null!=(l=r.value)?ie(e,!!r.multiple,l,!1):null!=r.defaultValue&&ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Yr)}Kr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)ji(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));n=Fo(Vo.current),Fo(Ro.current),_o(t)?(r=t.stateNode,n=t.memoizedProps,r[qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[qr]=t,t.stateNode=r)}return null;case 13:return ca(Jo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&_o(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Jo.current)?0===Jl&&(Jl=3):(0!==Jl&&3!==Jl||(Jl=4),null===Fl||0===(134217727&Tl)&&0===(134217727&Ml)||mu(Fl,El))),(r||n)&&(t.flags|=4),null);case 4:return Eo(),null===e&&Vr(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(ca(Jo),null===(r=t.memoizedState))return null;if(l=0!==(64&t.flags),null===(s=r.rendering))if(l)il(r,!1);else{if(0!==Jl||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(s=Ho(e))){for(t.flags|=64,il(r,!1),null!==(l=s.updateQueue)&&(t.updateQueue=l,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(l=n).flags&=2,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null,null===(s=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,l.type=s.type,e=s.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ga(Jo,1&Jo.current|2),t.child}e=e.sibling}null!==r.tail&&Ka()>Ll&&(t.flags|=64,l=!0,il(r,!1),t.lanes=33554432)}else{if(!l)if(null!==(e=Ho(s))){if(t.flags|=64,l=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),il(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!Mo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ka()-r.renderingStartTime>Ll&&1073741824!==n&&(t.flags|=64,l=!0,il(r,!1),t.lanes=33554432);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ka(),n.sibling=null,t=Jo.current,ga(Jo,l?1&t|2:1&t),n):null;case 23:case 24:return ku(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}function ul(e){switch(e.tag){case 1:Ia(e.type)&&ma();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Eo(),ca(ha),ca(pa),jo(),0!==(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return Xo(e),null;case 13:return ca(Jo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ca(Jo),null;case 4:return Eo(),null;case 10:return ro(e),null;case 23:case 24:return ku(),null;default:return null}}function sl(e,t){try{var n="",r=t;do{n+=L(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a}}function cl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Oi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ui=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Fo(Ro.current);var i,l=null;switch(n){case"input":o=$(e,o),r=$(e,r),l=[];break;case"option":o=oe(e,o),r=oe(e,r),l=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),l=[];break;case"textarea":o=le(e,o),r=le(e,r),l=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Yr)}for(g in Ze(n,r),n=null,o)if(!r.hasOwnProperty(g)&&o.hasOwnProperty(g)&&null!=o[g])if("style"===g){var s=o[g];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==g&&"children"!==g&&"suppressContentEditableWarning"!==g&&"suppressHydrationWarning"!==g&&"autoFocus"!==g&&(u.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in r){var c=r[g];if(s=null!=o?o[g]:void 0,r.hasOwnProperty(g)&&c!==s&&(null!=c||null!=s))if("style"===g)if(s){for(i in s)!s.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&s[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(l||(l=[]),l.push(g,n)),n=c;else"dangerouslySetInnerHTML"===g?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(l=l||[]).push(g,c)):"children"===g?"string"!==typeof c&&"number"!==typeof c||(l=l||[]).push(g,""+c):"suppressContentEditableWarning"!==g&&"suppressHydrationWarning"!==g&&(u.hasOwnProperty(g)?(null!=c&&"onScroll"===g&&Rr("scroll",e),l||s===c||(l=[])):"object"===typeof c&&null!==c&&c.$$typeof===E?c.toString():(l=l||[]).push(g,c))}n&&(l=l||[]).push("style",n);var g=l;(t.updateQueue=g)&&(t.flags|=4)}},ji=function(e,t,n,r){n!==r&&(t.flags|=4)};var gl="function"===typeof WeakMap?WeakMap:Map;function dl(e,t,n){(n=co(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jl||(jl=!0,Ql=r),cl(0,t)},n}function pl(e,t,n){(n=co(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return cl(0,t),r(a)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this),cl(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hl="function"===typeof WeakSet?WeakSet:Set;function fl(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Yu(e,n)}else t.current=null}function Cl(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qa(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&_r(t.stateNode.containerInfo))}throw Error(i(163))}function Il(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Xu(n,e),Du(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Qa(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Kr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&yt(n)))))}throw Error(i(163))}function ml(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ae("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function vl(e,t){if(Za&&"function"===typeof Za.onCommitFiberUnmount)try{Za.onCommitFiberUnmount(ka,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Xu(t,n);else{r=t;try{a()}catch(o){Yu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(fl(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Yu(t,o)}break;case 5:fl(t);break;case 4:Sl(e,t)}}function bl(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Al(e){return 5===e.tag||3===e.tag||4===e.tag}function yl(e){e:{for(var t=e.return;null!==t;){if(Al(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Al(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?kl(e,n,t):Zl(e,n,t)}function kl(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Yr));else if(4!==r&&null!==(e=e.child))for(kl(e,t,n),e=e.sibling;null!==e;)kl(e,t,n),e=e.sibling}function Zl(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Zl(e,t,n),e=e.sibling;null!==e;)Zl(e,t,n),e=e.sibling}function Sl(e,t){for(var n,r,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(i(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag){e:for(var l=e,u=a,s=u;;)if(vl(l,s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===u)break e;for(;null===s.sibling;){if(null===s.return||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}r?(l=n,u=a.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(vl(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function wl(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,a),t=Se(e,r),a=0;a<o.length;a+=2){var l=o[a],u=o[a+1];"style"===l?ye(n,u):"dangerouslySetInnerHTML"===l?Ie(n,u):"children"===l?me(n,u):b(n,l,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":se(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ie(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,yt(n.containerInfo)));case 13:return null!==t.memoizedState&&(zl=Ka(),ml(t.child,!0)),void Bl(t);case 19:return void Bl(t);case 23:case 24:return void ml(t,null!==t.memoizedState)}throw Error(i(163))}function Bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hl),t.forEach((function(t){var r=Mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function xl(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Gl=Math.ceil,Rl=A.ReactCurrentDispatcher,Wl=A.ReactCurrentOwner,Vl=0,Fl=null,Nl=null,El=0,Dl=0,Xl=sa(0),Jl=0,Hl=null,Yl=0,Tl=0,Ml=0,Kl=0,Pl=null,zl=0,Ll=1/0;function _l(){Ll=Ka()+500}var Ol,Ul=null,jl=!1,Ql=null,ql=null,$l=!1,eu=null,tu=90,nu=[],ru=[],au=null,ou=0,iu=null,lu=-1,uu=0,su=0,cu=null,gu=!1;function du(){return 0!==(48&Vl)?Ka():-1!==lu?lu:lu=Ka()}function pu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Pa()?1:2;if(0===uu&&(uu=Yl),0!==ja.transition){0!==su&&(su=null!==Pl?Pl.pendingLanes:0),e=uu;var t=4186112&~su;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Pa(),0!==(4&Vl)&&98===e?e=Yt(12,uu):e=Yt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function hu(e,t,n){if(50<ou)throw ou=0,iu=null,Error(i(185));if(null===(e=fu(e,t)))return null;Kt(e,t,n),e===Fl&&(Ml|=t,4===Jl&&mu(e,El));var r=Pa();1===t?0!==(8&Vl)&&0===(48&Vl)?vu(e):(Cu(e,n),0===Vl&&(_l(),Oa())):(0===(4&Vl)||98!==r&&99!==r||(null===au?au=new Set([e]):au.add(e)),Cu(e,n)),Pl=e}function fu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Cu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var u=31-Pt(l),s=1<<u,c=o[u];if(-1===c){if(0===(s&r)||0!==(s&a)){c=t,Xt(s);var g=Dt;o[u]=10<=g?c+250:6<=g?c+5e3:-1}}else c<=t&&(e.expiredLanes|=s);l&=~s}if(r=Jt(e,e===Fl?El:0),t=Dt,0===r)null!==n&&(n!==Xa&&Ba(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Xa&&Ba(n)}15===t?(n=vu.bind(null,e),null===Ha?(Ha=[n],Ya=wa(Va,Ua)):Ha.push(n),n=Xa):14===t?n=_a(99,vu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),n=_a(n,Iu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function Iu(e){if(lu=-1,su=uu=0,0!==(48&Vl))throw Error(i(327));var t=e.callbackNode;if(Eu()&&e.callbackNode!==t)return null;var n=Jt(e,e===Fl?El:0);if(0===n)return null;var r=n,a=Vl;Vl|=16;var o=wu();for(Fl===e&&El===r||(_l(),Zu(e,r));;)try{Gu();break}catch(u){Su(e,u)}if(no(),Rl.current=o,Vl=a,null!==Nl?r=0:(Fl=null,El=0,r=Jl),0!==(Yl&Ml))Zu(e,0);else if(0!==r){if(2===r&&(Vl|=64,e.hydrate&&(e.hydrate=!1,_r(e.containerInfo)),0!==(n=Ht(e))&&(r=Bu(e,n))),1===r)throw t=Hl,Zu(e,0),mu(e,n),Cu(e,Ka()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:Vu(e);break;case 3:if(mu(e,n),(62914560&n)===n&&10<(r=zl+500-Ka())){if(0!==Jt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){du(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=zr(Vu.bind(null,e),r);break}Vu(e);break;case 4:if(mu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var l=31-Pt(n);o=1<<l,(l=r[l])>a&&(a=l),n&=~o}if(n=a,10<(n=(120>(n=Ka()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Gl(n/1960))-n)){e.timeoutHandle=zr(Vu.bind(null,e),n);break}Vu(e);break;default:throw Error(i(329))}}return Cu(e,Ka()),e.callbackNode===t?Iu.bind(null,e):null}function mu(e,t){for(t&=~Kl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pt(t),r=1<<n;e[n]=-1,t&=~r}}function vu(e){if(0!==(48&Vl))throw Error(i(327));if(Eu(),e===Fl&&0!==(e.expiredLanes&El)){var t=El,n=Bu(e,t);0!==(Yl&Ml)&&(n=Bu(e,t=Jt(e,t)))}else n=Bu(e,t=Jt(e,0));if(0!==e.tag&&2===n&&(Vl|=64,e.hydrate&&(e.hydrate=!1,_r(e.containerInfo)),0!==(t=Ht(e))&&(n=Bu(e,t))),1===n)throw n=Hl,Zu(e,0),mu(e,t),Cu(e,Ka()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vu(e),Cu(e,Ka()),null}function bu(e,t){var n=Vl;Vl|=1;try{return e(t)}finally{0===(Vl=n)&&(_l(),Oa())}}function Au(e,t){var n=Vl;Vl&=-2,Vl|=8;try{return e(t)}finally{0===(Vl=n)&&(_l(),Oa())}}function yu(e,t){ga(Xl,Dl),Dl|=t,Yl|=t}function ku(){Dl=Xl.current,ca(Xl)}function Zu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Lr(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ma();break;case 3:Eo(),ca(ha),ca(pa),jo();break;case 5:Xo(r);break;case 4:Eo();break;case 13:case 19:ca(Jo);break;case 10:ro(r);break;case 23:case 24:ku()}n=n.return}Fl=e,Nl=Lu(e.current,null),El=Dl=Yl=t,Jl=0,Hl=null,Kl=Ml=Tl=0}function Su(e,t){for(;;){var n=Nl;try{if(no(),Qo.current=Vi,ri){for(var r=ei.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ri=!1}if($o=0,ni=ti=ei=null,ai=!1,Wl.current=null,null===n||null===n.return){Jl=1,Hl=t,Nl=null;break}e:{var o=e,i=n.return,l=n,u=t;if(t=El,l.flags|=2048,l.firstEffect=l.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var s=u;if(0===(2&l.mode)){var c=l.alternate;c?(l.updateQueue=c.updateQueue,l.memoizedState=c.memoizedState,l.lanes=c.lanes):(l.updateQueue=null,l.memoizedState=null)}var g=0!==(1&Jo.current),d=i;do{var p;if(p=13===d.tag){var h=d.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var f=d.memoizedProps;p=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!g)}}if(p){var C=d.updateQueue;if(null===C){var I=new Set;I.add(s),d.updateQueue=I}else C.add(s);if(0===(2&d.mode)){if(d.flags|=64,l.flags|=16384,l.flags&=-2981,1===l.tag)if(null===l.alternate)l.tag=17;else{var m=co(-1,1);m.tag=2,go(l,m)}l.lanes|=1;break e}u=void 0,l=t;var v=o.pingCache;if(null===v?(v=o.pingCache=new gl,u=new Set,v.set(s,u)):void 0===(u=v.get(s))&&(u=new Set,v.set(s,u)),!u.has(l)){u.add(l);var b=Tu.bind(null,o,s,l);s.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((_(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Jl&&(Jl=2),u=sl(u,l),d=i;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,po(d,dl(0,o,t));break e;case 1:o=u;var A=d.type,y=d.stateNode;if(0===(64&d.flags)&&("function"===typeof A.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){d.flags|=4096,t&=-t,d.lanes|=t,po(d,pl(d,o,t));break e}}d=d.return}while(null!==d)}Wu(n)}catch(k){t=k,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function wu(){var e=Rl.current;return Rl.current=Vi,null===e?Vi:e}function Bu(e,t){var n=Vl;Vl|=16;var r=wu();for(Fl===e&&El===t||Zu(e,t);;)try{xu();break}catch(a){Su(e,a)}if(no(),Vl=n,Rl.current=r,null!==Nl)throw Error(i(261));return Fl=null,El=0,Jl}function xu(){for(;null!==Nl;)Ru(Nl)}function Gu(){for(;null!==Nl&&!xa();)Ru(Nl)}function Ru(e){var t=Ol(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?Wu(e):Nl=t,Wl.current=null}function Wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ll(n,t,Dl)))return void(Nl=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Dl)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ul(t)))return n.flags&=2047,void(Nl=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Jl&&(Jl=5)}function Vu(e){var t=Pa();return La(99,Fu.bind(null,e,t)),null}function Fu(e,t){do{Eu()}while(null!==eu);if(0!==(48&Vl))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,o=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var l=e.eventTimes,u=e.expirationTimes;0<o;){var s=31-Pt(o),c=1<<s;a[s]=0,l[s]=-1,u[s]=-1,o&=~c}if(null!==au&&0===(24&r)&&au.has(e)&&au.delete(e),e===Fl&&(Nl=Fl=null,El=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Vl,Vl|=32,Wl.current=null,Tr=Ut,Ir(l=Cr())){if("selectionStart"in l)u={start:l.selectionStart,end:l.selectionEnd};else e:if(u=(u=l.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,o=c.anchorOffset,s=c.focusNode,c=c.focusOffset;try{u.nodeType,s.nodeType}catch(w){u=null;break e}var g=0,d=-1,p=-1,h=0,f=0,C=l,I=null;t:for(;;){for(var m;C!==u||0!==o&&3!==C.nodeType||(d=g+o),C!==s||0!==c&&3!==C.nodeType||(p=g+c),3===C.nodeType&&(g+=C.nodeValue.length),null!==(m=C.firstChild);)I=C,C=m;for(;;){if(C===l)break t;if(I===u&&++h===o&&(d=g),I===s&&++f===c&&(p=g),null!==(m=C.nextSibling))break;I=(C=I).parentNode}C=m}u=-1===d||-1===p?null:{start:d,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Mr={focusedElem:l,selectionRange:u},Ut=!1,cu=null,gu=!1,Ul=r;do{try{Nu()}catch(w){if(null===Ul)throw Error(i(330));Yu(Ul,w),Ul=Ul.nextEffect}}while(null!==Ul);cu=null,Ul=r;do{try{for(l=e;null!==Ul;){var v=Ul.flags;if(16&v&&me(Ul.stateNode,""),128&v){var b=Ul.alternate;if(null!==b){var A=b.ref;null!==A&&("function"===typeof A?A(null):A.current=null)}}switch(1038&v){case 2:yl(Ul),Ul.flags&=-3;break;case 6:yl(Ul),Ul.flags&=-3,wl(Ul.alternate,Ul);break;case 1024:Ul.flags&=-1025;break;case 1028:Ul.flags&=-1025,wl(Ul.alternate,Ul);break;case 4:wl(Ul.alternate,Ul);break;case 8:Sl(l,u=Ul);var y=u.alternate;bl(u),null!==y&&bl(y)}Ul=Ul.nextEffect}}catch(w){if(null===Ul)throw Error(i(330));Yu(Ul,w),Ul=Ul.nextEffect}}while(null!==Ul);if(A=Mr,b=Cr(),v=A.focusedElem,l=A.selectionRange,b!==v&&v&&v.ownerDocument&&fr(v.ownerDocument.documentElement,v)){null!==l&&Ir(v)&&(b=l.start,void 0===(A=l.end)&&(A=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(A,v.value.length)):(A=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(A=A.getSelection(),u=v.textContent.length,y=Math.min(l.start,u),l=void 0===l.end?y:Math.min(l.end,u),!A.extend&&y>l&&(u=l,l=y,y=u),u=hr(v,y),o=hr(v,l),u&&o&&(1!==A.rangeCount||A.anchorNode!==u.node||A.anchorOffset!==u.offset||A.focusNode!==o.node||A.focusOffset!==o.offset)&&((b=b.createRange()).setStart(u.node,u.offset),A.removeAllRanges(),y>l?(A.addRange(b),A.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),A.addRange(b))))),b=[];for(A=v;A=A.parentNode;)1===A.nodeType&&b.push({element:A,left:A.scrollLeft,top:A.scrollTop});for("function"===typeof v.focus&&v.focus(),v=0;v<b.length;v++)(A=b[v]).element.scrollLeft=A.left,A.element.scrollTop=A.top}Ut=!!Tr,Mr=Tr=null,e.current=n,Ul=r;do{try{for(v=e;null!==Ul;){var k=Ul.flags;if(36&k&&Il(v,Ul.alternate,Ul),128&k){b=void 0;var Z=Ul.ref;if(null!==Z){var S=Ul.stateNode;Ul.tag,b=S,"function"===typeof Z?Z(b):Z.current=b}}Ul=Ul.nextEffect}}catch(w){if(null===Ul)throw Error(i(330));Yu(Ul,w),Ul=Ul.nextEffect}}while(null!==Ul);Ul=null,Ja(),Vl=a}else e.current=n;if($l)$l=!1,eu=e,tu=t;else for(Ul=r;null!==Ul;)t=Ul.nextEffect,Ul.nextEffect=null,8&Ul.flags&&((k=Ul).sibling=null,k.stateNode=null),Ul=t;if(0===(r=e.pendingLanes)&&(ql=null),1===r?e===iu?ou++:(ou=0,iu=e):ou=0,n=n.stateNode,Za&&"function"===typeof Za.onCommitFiberRoot)try{Za.onCommitFiberRoot(ka,n,void 0,64===(64&n.current.flags))}catch(w){}if(Cu(e,Ka()),jl)throw jl=!1,e=Ql,Ql=null,e;return 0!==(8&Vl)||Oa(),null}function Nu(){for(;null!==Ul;){var e=Ul.alternate;gu||null===cu||(0!==(8&Ul.flags)?et(Ul,cu)&&(gu=!0):13===Ul.tag&&xl(e,Ul)&&et(Ul,cu)&&(gu=!0));var t=Ul.flags;0!==(256&t)&&Cl(e,Ul),0===(512&t)||$l||($l=!0,_a(97,(function(){return Eu(),null}))),Ul=Ul.nextEffect}}function Eu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,La(e,Ju)}return!1}function Du(e,t){nu.push(t,e),$l||($l=!0,_a(97,(function(){return Eu(),null})))}function Xu(e,t){ru.push(t,e),$l||($l=!0,_a(97,(function(){return Eu(),null})))}function Ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Vl))throw Error(i(331));var t=Vl;Vl|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var a=n[r],o=n[r+1],l=a.destroy;if(a.destroy=void 0,"function"===typeof l)try{l()}catch(s){if(null===o)throw Error(i(330));Yu(o,s)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){a=n[r],o=n[r+1];try{var u=a.create;a.destroy=u()}catch(s){if(null===o)throw Error(i(330));Yu(o,s)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Vl=t,Oa(),!0}function Hu(e,t,n){go(e,t=dl(0,t=sl(n,t),1)),t=du(),null!==(e=fu(e,1))&&(Kt(e,1,t),Cu(e,t))}function Yu(e,t){if(3===e.tag)Hu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Hu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){var a=pl(n,e=sl(t,e),1);if(go(n,a),a=du(),null!==(n=fu(n,1)))Kt(n,1,a),Cu(n,a);else if("function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=du(),e.pingedLanes|=e.suspendedLanes&n,Fl===e&&(El&n)===n&&(4===Jl||3===Jl&&(62914560&El)===El&&500>Ka()-zl?Zu(e,0):Kl|=n),Cu(e,t)}function Mu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Pa()?1:2:(0===uu&&(uu=Yl),0===(t=Tt(62914560&~uu))&&(t=4194304))),n=du(),null!==(e=fu(e,t))&&(Kt(e,t,n),Cu(e,n))}function Ku(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Ku(e,t,n,r)}function zu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lu(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _u(e,t,n,r,a,o){var l=2;if(r=e,"function"===typeof e)zu(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case Z:return Ou(n.children,a,o,t);case D:l=8,a|=16;break;case S:l=8,a|=1;break;case w:return(e=Pu(12,n,t,8|a)).elementType=w,e.type=w,e.lanes=o,e;case R:return(e=Pu(13,n,t,a)).type=R,e.elementType=R,e.lanes=o,e;case W:return(e=Pu(19,n,t,a)).elementType=W,e.lanes=o,e;case X:return Uu(n,a,o,t);case J:return(e=Pu(24,n,t,a)).elementType=J,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case B:l=10;break e;case x:l=9;break e;case G:l=11;break e;case V:l=14;break e;case F:l=16,r=null;break e;case N:l=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pu(l,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Ou(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Uu(e,t,n,r){return(e=Pu(23,e,r,t)).elementType=X,e.lanes=n,e}function ju(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Qu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Mt(0),this.expirationTimes=Mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function es(e,t,n,r){var a=t.current,o=du(),l=pu(a);e:if(n){t:{if(je(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Ia(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(i(171))}if(1===n.tag){var s=n.type;if(Ia(s)){n=ba(n,s,u);break e}}n=u}else n=da;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,l)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),go(a,t),hu(a,l,o),l}function ts(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ns(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rs(e,t){ns(e,t),(e=e.alternate)&&ns(e,t)}function as(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new qu(e,t,null!=n&&!0===n.hydrate),t=Pu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,uo(t),e[ea]=n.current,Vr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function os(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function is(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"===typeof a){var l=a;a=function(){var e=ts(i);l.call(e)}}es(t,i,e,a)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new as(e,0,t?{hydrate:!0}:void 0)}(n,r),i=o._internalRoot,"function"===typeof a){var u=a;a=function(){var e=ts(i);u.call(e)}}Au((function(){es(t,i,e,a)}))}return ts(i)}function ls(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!os(t))throw Error(i(200));return $u(e,t,null,n)}Ol=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ha.current)Xi=!0;else{if(0===(n&r)){switch(Xi=!1,t.tag){case 3:_i(t),Oo();break;case 5:Do(t);break;case 1:Ia(t.type)&&Aa(t);break;case 4:No(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;ga(qa,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?qi(e,t,n):(ga(Jo,1&Jo.current),null!==(t=ol(e,t,n))?t.sibling:null);ga(Jo,1&Jo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return al(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ga(Jo,Jo.current),r)break;return null;case 23:case 24:return t.lanes=0,Mi(e,t,n)}return ol(e,t,n)}Xi=0!==(16384&e.flags)}else Xi=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=Ca(t,pa.current),oo(t,n),a=li(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ia(r)){var o=!0;Aa(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,uo(t);var l=r.getDerivedStateFromProps;"function"===typeof l&&Io(t,r,l,e),a.updater=mo,t.stateNode=a,a._reactInternals=t,yo(t,r,e,n),t=Li(null,t,r,!0,o,n)}else t.tag=0,Ji(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=function(e){if("function"===typeof e)return zu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===G)return 11;if(e===V)return 14}return 2}(a),e=Qa(a,e),o){case 0:t=Pi(null,t,a,e,n);break e;case 1:t=zi(null,t,a,e,n);break e;case 11:t=Hi(null,t,a,e,n);break e;case 14:t=Yi(null,t,a,Qa(a.type,e),r,n);break e}throw Error(i(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Pi(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 1:return r=t.type,a=t.pendingProps,zi(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 3:if(_i(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,so(e,t),ho(t,r,null,n),(r=t.memoizedState.element)===a)Oo(),t=ol(e,t,n);else{if((o=(a=t.stateNode).hydrate)&&(To=Or(t.stateNode.containerInfo.firstChild),Yo=t,o=Mo=!0),o){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(o=e[a])._workInProgressVersionPrimary=e[a+1],Uo.push(o);for(n=xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ji(e,t,r,n),Oo();t=t.child}return t;case 5:return Do(t),null===e&&zo(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,l=a.children,Pr(r,a)?l=null:null!==o&&Pr(r,o)&&(t.flags|=16),Ki(e,t),Ji(e,t,l,n),t.child;case 6:return null===e&&zo(t),null;case 13:return qi(e,t,n);case 4:return No(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Bo(t,null,r,n):Ji(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Hi(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 7:return Ji(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ji(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value;var u=t.type._context;if(ga(qa,u._currentValue),u._currentValue=o,null!==l)if(u=l.value,0===(o=cr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(l.children===a.children&&!ha.current){t=ol(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var s=u.dependencies;if(null!==s){l=u.child;for(var c=s.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=co(-1,n&-n)).tag=2,go(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),ao(u.return,n),s.lanes|=n;break}c=c.next}}else l=10===u.tag&&u.type===t.type?null:u.child;if(null!==l)l.return=u;else for(l=u;null!==l;){if(l===t){l=null;break}if(null!==(u=l.sibling)){u.return=l.return,l=u;break}l=l.return}u=l}Ji(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(a=io(a,o.unstable_observedBits)),t.flags|=1,Ji(e,t,r,n),t.child;case 14:return o=Qa(a=t.type,t.pendingProps),Yi(e,t,a,o=Qa(a.type,o),r,n);case 15:return Ti(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Qa(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ia(r)?(e=!0,Aa(t)):e=!1,oo(t,n),bo(t,r,a),yo(t,r,a,n),Li(null,t,r,!0,e,n);case 19:return al(e,t,n);case 23:case 24:return Mi(e,t,n)}throw Error(i(156,t.tag))},as.prototype.render=function(e){es(e,this._internalRoot,null,null)},as.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;es(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(hu(e,4,du()),rs(e,4))},nt=function(e){13===e.tag&&(hu(e,67108864,du()),rs(e,67108864))},rt=function(e){if(13===e.tag){var t=du(),n=pu(e);hu(e,n,t),rs(e,n)}},at=function(e,t){return t()},Be=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=oa(r);if(!a)throw Error(i(90));Q(r),ne(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},Fe=bu,Ne=function(e,t,n,r,a){var o=Vl;Vl|=4;try{return La(98,e.bind(null,t,n,r,a))}finally{0===(Vl=o)&&(_l(),Oa())}},Ee=function(){0===(49&Vl)&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Cu(e,Ka())}))}Oa()}(),Eu())},De=function(e,t){var n=Vl;Vl|=2;try{return e(t)}finally{0===(Vl=n)&&(_l(),Oa())}};var us={Events:[ra,aa,oa,We,Ve,Eu,{current:!1}]},ss={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cs={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var gs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gs.isDisabled&&gs.supportsFiber)try{ka=gs.inject(cs),Za=gs}catch(Ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=us,t.createPortal=ls,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Vl;if(0!==(48&n))return e(t);Vl|=1;try{if(e)return La(99,e.bind(null,t))}finally{Vl=n,Oa()}},t.hydrate=function(e,t,n){if(!os(t))throw Error(i(200));return is(null,e,t,!0,n)},t.render=function(e,t,n){if(!os(t))throw Error(i(200));return is(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!os(e))throw Error(i(40));return!!e._reactRootContainer&&(Au((function(){is(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return ls(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!os(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return is(e,t,n,!1,r)},t.version="17.0.2"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,g=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,C=n?Symbol.for("react.lazy"):60116,I=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function A(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case g:case o:case l:case i:case p:return e;default:switch(e=e&&e.$$typeof){case s:case d:case C:case f:case u:return e;default:return t}}case a:return t}}}function y(e){return A(e)===g}t.AsyncMode=c,t.ConcurrentMode=g,t.ContextConsumer=s,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=C,t.Memo=f,t.Portal=a,t.Profiler=l,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return y(e)||A(e)===c},t.isConcurrentMode=y,t.isContextConsumer=function(e){return A(e)===s},t.isContextProvider=function(e){return A(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return A(e)===d},t.isFragment=function(e){return A(e)===o},t.isLazy=function(e){return A(e)===C},t.isMemo=function(e){return A(e)===f},t.isPortal=function(e){return A(e)===a},t.isProfiler=function(e){return A(e)===l},t.isStrictMode=function(e){return A(e)===i},t.isSuspense=function(e){return A(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===g||e===l||e===i||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===C||e.$$typeof===f||e.$$typeof===u||e.$$typeof===s||e.$$typeof===d||e.$$typeof===m||e.$$typeof===v||e.$$typeof===b||e.$$typeof===I)},t.typeOf=A},7441:function(e,t,n){"use strict";e.exports=n(1372)},6048:function(module,__unused_webpack_exports,__webpack_require__){var t;t=function(__WEBPACK_EXTERNAL_MODULE__98__){return function(){var __webpack_modules__={759:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r,a=n(98),o=n.n(a),i=n(697),l=n.n(i);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var s=function(e){var t=e.breakLabel,n=e.breakClassName,r=e.breakLinkClassName,a=e.breakHandler,i=e.getEventListener,l=n||"break";return o().createElement("li",{className:l},o().createElement("a",u({className:r,role:"button",tabIndex:"0",onKeyPress:a},i(a)),t))};s.propTypes={breakLabel:l().oneOfType([l().string,l().node]),breakClassName:l().string,breakLinkClassName:l().string,breakHandler:l().func.isRequired,getEventListener:l().func.isRequired};var c,g,d=s,p=d;(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(s,"BreakView","/home/yoan/work/oss/react-paginate/react_components/BreakView.js"),c.register(d,"default","/home/yoan/work/oss/react-paginate/react_components/BreakView.js")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},770:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r,a=n(98),o=n.n(a),i=n(697),l=n.n(i);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var s=function(e){var t=e.pageClassName,n=e.pageLinkClassName,r=e.page,a=e.selected,i=e.activeClassName,l=e.activeLinkClassName,s=e.getEventListener,c=e.pageSelectedHandler,g=e.href,d=e.extraAriaContext,p=e.pageLabelBuilder,h=e.rel,f=e.ariaLabel||"Page "+r+(d?" "+d:""),C=null;return a&&(C="page",f=e.ariaLabel||"Page "+r+" is your current page",t=void 0!==t?t+" "+i:i,void 0!==n?void 0!==l&&(n=n+" "+l):n=l),o().createElement("li",{className:t},o().createElement("a",u({rel:h,role:g?void 0:"button",className:n,href:g,tabIndex:a?"-1":"0","aria-label":f,"aria-current":C,onKeyPress:c},s(c)),p(r)))};s.propTypes={pageSelectedHandler:l().func.isRequired,selected:l().bool.isRequired,pageClassName:l().string,pageLinkClassName:l().string,activeClassName:l().string,activeLinkClassName:l().string,extraAriaContext:l().string,href:l().string,ariaLabel:l().string,page:l().number.isRequired,getEventListener:l().func.isRequired,pageLabelBuilder:l().func.isRequired,rel:l().string};var c,g,d=s,p=d;(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(s,"PageView","/home/yoan/work/oss/react-paginate/react_components/PageView.js"),c.register(d,"default","/home/yoan/work/oss/react-paginate/react_components/PageView.js")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},214:function _(module,__webpack_exports__,__nested_webpack_require_5475__){"use strict";__nested_webpack_require_5475__.d(__webpack_exports__,{Z:function(){return PaginationBoxView}});var react__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_5475__(98),react__WEBPACK_IMPORTED_MODULE_0___default=__nested_webpack_require_5475__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__nested_webpack_require_5475__(697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__nested_webpack_require_5475__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_PageView__WEBPACK_IMPORTED_MODULE_2__=__nested_webpack_require_5475__(770),_BreakView__WEBPACK_IMPORTED_MODULE_3__=__nested_webpack_require_5475__(759),_utils__WEBPACK_IMPORTED_MODULE_4__=__nested_webpack_require_5475__(923),enterModule;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}module=__nested_webpack_require_5475__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},PaginationBoxView=function(_Component){_inherits(PaginationBoxView,_Component);var _super=_createSuper(PaginationBoxView);function PaginationBoxView(e){var t,n;return _classCallCheck(this,PaginationBoxView),_defineProperty(_assertThisInitialized(t=_super.call(this,e)),"handlePreviousPage",(function(e){var n=t.state.selected;t.handleClick(e,null,n>0?n-1:void 0,{isPrevious:!0})})),_defineProperty(_assertThisInitialized(t),"handleNextPage",(function(e){var n=t.state.selected,r=t.props.pageCount;t.handleClick(e,null,n<r-1?n+1:void 0,{isNext:!0})})),_defineProperty(_assertThisInitialized(t),"handlePageSelected",(function(e,n){if(t.state.selected===e)return t.callActiveCallback(e),void t.handleClick(n,null,void 0,{isActive:!0});t.handleClick(n,null,e)})),_defineProperty(_assertThisInitialized(t),"handlePageChange",(function(e){t.state.selected!==e&&(t.setState({selected:e}),t.callCallback(e))})),_defineProperty(_assertThisInitialized(t),"getEventListener",(function(e){return _defineProperty({},t.props.eventListener,e)})),_defineProperty(_assertThisInitialized(t),"handleClick",(function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.isPrevious,i=void 0!==o&&o,l=a.isNext,u=void 0!==l&&l,s=a.isBreak,c=void 0!==s&&s,g=a.isActive,d=void 0!==g&&g;e.preventDefault?e.preventDefault():e.returnValue=!1;var p=t.state.selected,h=t.props.onClick,f=r;if(h){var C=h({index:n,selected:p,nextSelectedPage:r,event:e,isPrevious:i,isNext:u,isBreak:c,isActive:d});if(!1===C)return;Number.isInteger(C)&&(f=C)}void 0!==f&&t.handlePageChange(f)})),_defineProperty(_assertThisInitialized(t),"handleBreakClick",(function(e,n){var r=t.state.selected;t.handleClick(n,e,r<e?t.getForwardJump():t.getBackwardJump(),{isBreak:!0})})),_defineProperty(_assertThisInitialized(t),"callCallback",(function(e){void 0!==t.props.onPageChange&&"function"==typeof t.props.onPageChange&&t.props.onPageChange({selected:e})})),_defineProperty(_assertThisInitialized(t),"callActiveCallback",(function(e){void 0!==t.props.onPageActive&&"function"==typeof t.props.onPageActive&&t.props.onPageActive({selected:e})})),_defineProperty(_assertThisInitialized(t),"getElementPageRel",(function(e){var n=t.state.selected,r=t.props,a=r.nextPageRel,o=r.prevPageRel,i=r.selectedPageRel;return n-1===e?o:n===e?i:n+1===e?a:void 0})),_defineProperty(_assertThisInitialized(t),"pagination",(function(){var e=[],n=t.props,r=n.pageRangeDisplayed,a=n.pageCount,o=n.marginPagesDisplayed,i=n.breakLabel,l=n.breakClassName,u=n.breakLinkClassName,s=t.state.selected;if(a<=r)for(var c=0;c<a;c++)e.push(t.getPageElement(c));else{var g=r/2,d=r-g;s>a-r/2?g=r-(d=a-s):s<r/2&&(d=r-(g=s));var p,h,f=function(e){return t.getPageElement(e)},C=[];for(p=0;p<a;p++){var I=p+1;I<=o||I>a-o||p>=s-g&&p<=s+(0===s&&r>1?d-1:d)?C.push({type:"page",index:p,display:f(p)}):i&&C.length>0&&C[C.length-1].display!==h&&(r>0||o>0)&&(h=react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_BreakView__WEBPACK_IMPORTED_MODULE_3__.Z,{key:p,breakLabel:i,breakClassName:l,breakLinkClassName:u,breakHandler:t.handleBreakClick.bind(null,p),getEventListener:t.getEventListener}),C.push({type:"break",index:p,display:h}))}C.forEach((function(t,n){var r=t;"break"===t.type&&C[n-1]&&"page"===C[n-1].type&&C[n+1]&&"page"===C[n+1].type&&C[n+1].index-C[n-1].index<=2&&(r={type:"page",index:t.index,display:f(t.index)}),e.push(r.display)}))}return e})),void 0!==e.initialPage&&void 0!==e.forcePage&&console.warn("(react-paginate): Both initialPage (".concat(e.initialPage,") and forcePage (").concat(e.forcePage,") props are provided, which is discouraged.")+" Use exclusively forcePage prop for a controlled component.\nSee https://reactjs.org/docs/forms.html#controlled-components"),n=e.initialPage?e.initialPage:e.forcePage?e.forcePage:0,t.state={selected:n},t}return _createClass(PaginationBoxView,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialPage,n=e.disableInitialCallback,r=e.extraAriaContext,a=e.pageCount,o=e.forcePage;void 0===t||n||this.callCallback(t),r&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(a)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(a,"). Did you forget a Math.ceil()?")),void 0!==t&&t>a-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(t," > ").concat(a-1,").")),void 0!==o&&o>a-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(o," > ").concat(a-1,")."))}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.forcePage&&this.props.forcePage!==e.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(e.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var e=this.state.selected,t=this.props,n=t.pageCount,r=e+t.pageRangeDisplayed;return r>=n?n-1:r}},{key:"getBackwardJump",value:function(){var e=this.state.selected-this.props.pageRangeDisplayed;return e<0?0:e}},{key:"getElementHref",value:function(e){var t=this.props,n=t.hrefBuilder,r=t.pageCount,a=t.hrefAllControls;if(n)return a||e>=0&&e<r?n(e+1,r,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(e){var t=e===this.state.selected;if(this.props.ariaLabelBuilder&&e>=0&&e<this.props.pageCount){var n=this.props.ariaLabelBuilder(e+1,t);return this.props.extraAriaContext&&!t&&(n=n+" "+this.props.extraAriaContext),n}}},{key:"getPageElement",value:function(e){var t=this.state.selected,n=this.props,r=n.pageClassName,a=n.pageLinkClassName,o=n.activeClassName,i=n.activeLinkClassName,l=n.extraAriaContext,u=n.pageLabelBuilder;return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_PageView__WEBPACK_IMPORTED_MODULE_2__.Z,{key:e,pageSelectedHandler:this.handlePageSelected.bind(null,e),selected:t===e,rel:this.getElementPageRel(e),pageClassName:r,pageLinkClassName:a,activeClassName:o,activeLinkClassName:i,extraAriaContext:l,href:this.getElementHref(e),ariaLabel:this.ariaLabelBuilder(e),page:e+1,pageLabelBuilder:u,getEventListener:this.getEventListener})}},{key:"render",value:function(){var e=this.props.renderOnZeroPageCount;if(0===this.props.pageCount&&void 0!==e)return e?e(this.props):e;var t=this.props,n=t.disabledClassName,r=t.disabledLinkClassName,a=t.pageCount,o=t.className,i=t.containerClassName,l=t.previousLabel,u=t.previousClassName,s=t.previousLinkClassName,c=t.previousAriaLabel,g=t.prevRel,d=t.nextLabel,p=t.nextClassName,h=t.nextLinkClassName,f=t.nextAriaLabel,C=t.nextRel,I=this.state.selected,m=0===I,v=I===a-1,b="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(u)).concat(m?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(n)):""),A="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(p)).concat(v?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(n)):""),y="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(s)).concat(m?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(r)):""),k="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(h)).concat(v?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(r)):""),Z=m?"true":"false",S=v?"true":"false";return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("ul",{className:o||i},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("li",{className:b},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",_extends({className:y,href:this.getElementHref(I-1),tabIndex:m?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":Z,"aria-label":c,rel:g},this.getEventListener(this.handlePreviousPage)),l)),this.pagination(),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("li",{className:A},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",_extends({className:k,href:this.getElementHref(I+1),tabIndex:v?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":S,"aria-label":f,rel:C},this.getEventListener(this.handleNextPage)),d)))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),PaginationBoxView}(react__WEBPACK_IMPORTED_MODULE_0__.Component),reactHotLoader,leaveModule;_defineProperty(PaginationBoxView,"propTypes",{pageCount:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number.isRequired,pageRangeDisplayed:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,marginPagesDisplayed:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,previousLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().node,previousAriaLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prevPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prevRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().node,nextAriaLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prop_types__WEBPACK_IMPORTED_MODULE_1___default().node]),hrefBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,hrefAllControls:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onPageChange:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onPageActive:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,initialPage:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,forcePage:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,disableInitialCallback:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,containerClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,className:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageLabelBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,activeClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,activeLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,previousClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,previousLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,disabledClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,disabledLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,extraAriaContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,ariaLabelBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,eventListener:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,renderOnZeroPageCount:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,selectedPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string}),_defineProperty(PaginationBoxView,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(e){return e},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1}),reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(PaginationBoxView,"PaginationBoxView","/home/yoan/work/oss/react-paginate/react_components/PaginationBoxView.js"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},351:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r,a=n(214);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,i,l=a.Z,u=l;(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(l,"default","/home/yoan/work/oss/react-paginate/react_components/index.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},923:function(e,t,n){"use strict";var r,a,o;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!=e?e:t}n.d(t,{m:function(){return i}}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(i,"classNameIfDefined","/home/yoan/work/oss/react-paginate/react_components/utils.js"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},703:function(e,t,n){"use strict";var r=n(414);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},697:function(e,t,n){e.exports=n(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:function(e){"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__98__}},__webpack_module_cache__={};function __nested_webpack_require_32585__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](n,n.exports,__nested_webpack_require_32585__),n.loaded=!0,n.exports}__nested_webpack_require_32585__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_32585__.d(t,{a:t}),t},__nested_webpack_require_32585__.d=function(e,t){for(var n in t)__nested_webpack_require_32585__.o(t,n)&&!__nested_webpack_require_32585__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_32585__.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},__nested_webpack_require_32585__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_32585__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_32585__(351);return __webpack_exports__}()},module.exports=t(__webpack_require__(2791))},3198:function(e){"use strict";e.exports=function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new(window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}},1002:function(e){"use strict";function t(){this.name="NoVideoInputDevicesError",this.message="No video input devices found"}t.prototype=new Error,e.exports={NoVideoInputDevicesError:t}},4012:function(e,t,n){"use strict";var r=n(1002).NoVideoInputDevicesError;function a(e,t,n){return e.length>0?e[0].deviceId:1==t.length||"user"==n?t[0].deviceId:t[1].deviceId}var o=function(e){return"environment"==e?/rear|back|environment/gi:/front|user|face/gi};e.exports={getDeviceId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return new Promise((function(n,a){var i=void 0;try{i=navigator.mediaDevices.enumerateDevices()}catch(l){a(new r)}i.then((function(i){var l=i.filter((function(e){return"videoinput"==e.kind}));if(l.length<1)a(new r);else{var u=o(e),s=l.filter((function(e){var t=e.label;return u.test(t)}));n(t(s,l,e))}}))}))},getFacingModePattern:o}},3212:function(e){"use strict";e.exports=function(e,t,n){var r=[];return n.forEach((function(n){e[n]!=t[n]&&r.push(n)})),r}},3292:function(e,t,n){"use strict";var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var l=n(2791),u=l.Component,s=n(2007),c=n(4012),g=c.getDeviceId,d=(c.getFacingModePattern,n(3212)),p=n(3198);n(9481);var h=p(['!function(o,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jsQR=e():o.jsQR=e()}("undefined"!=typeof self?self:this,function(){return function(o){function e(t){if(r[t])return r[t].exports;var c=r[t]={i:t,l:!1,exports:{}};return o[t].call(c.exports,c,c.exports,e),c.l=!0,c.exports}var r={};return e.m=o,e.c=r,e.d=function(o,r,t){e.o(o,r)||Object.defineProperty(o,r,{configurable:!1,enumerable:!0,get:t})},e.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(r,"a",r),r},e.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},e.p="",e(e.s=3)}([function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function o(o,e){this.width=e,this.height=o.length/e,this.data=o}return o.createEmpty=function(e,r){return new o(new Uint8ClampedArray(e*r),e)},o.prototype.get=function(o,e){return!(o<0||o>=this.width||e<0||e>=this.height)&&!!this.data[e*this.width+o]},o.prototype.set=function(o,e,r){this.data[e*this.width+o]=r?1:0},o.prototype.setRegion=function(o,e,r,t,c){for(var s=e;s<e+t;s++)for(var a=o;a<o+r;a++)this.set(a,s,!!c)},o}();e.BitMatrix=t},function(o,e,r){"use strict";function t(o,e){return o^e}Object.defineProperty(e,"__esModule",{value:!0});var c=r(2);e.addOrSubtractGF=t;var s=function(){function o(o,e,r){this.primitive=o,this.size=e,this.generatorBase=r,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var t=1,s=0;s<this.size;s++)this.expTable[s]=t,(t*=2)>=this.size&&(t=(t^this.primitive)&this.size-1);for(var s=0;s<this.size-1;s++)this.logTable[this.expTable[s]]=s;this.zero=new c.default(this,Uint8ClampedArray.from([0])),this.one=new c.default(this,Uint8ClampedArray.from([1]))}return o.prototype.multiply=function(o,e){return 0===o||0===e?0:this.expTable[(this.logTable[o]+this.logTable[e])%(this.size-1)]},o.prototype.inverse=function(o){if(0===o)throw new Error("Can\'t invert 0");return this.expTable[this.size-this.logTable[o]-1]},o.prototype.buildMonomial=function(o,e){if(o<0)throw new Error("Invalid monomial degree less than 0");if(0===e)return this.zero;var r=new Uint8ClampedArray(o+1);return r[0]=e,new c.default(this,r)},o.prototype.log=function(o){if(0===o)throw new Error("Can\'t take log(0)");return this.logTable[o]},o.prototype.exp=function(o){return this.expTable[o]},o}();e.default=s},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=r(1),c=function(){function o(o,e){if(0===e.length)throw new Error("No coefficients.");this.field=o;var r=e.length;if(r>1&&0===e[0]){for(var t=1;t<r&&0===e[t];)t++;if(t===r)this.coefficients=o.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(r-t);for(var c=0;c<this.coefficients.length;c++)this.coefficients[c]=e[t+c]}}else this.coefficients=e}return o.prototype.degree=function(){return this.coefficients.length-1},o.prototype.isZero=function(){return 0===this.coefficients[0]},o.prototype.getCoefficient=function(o){return this.coefficients[this.coefficients.length-1-o]},o.prototype.addOrSubtract=function(e){if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,c=e.coefficients;r.length>c.length&&(n=[c,r],r=n[0],c=n[1]);for(var s=new Uint8ClampedArray(c.length),a=c.length-r.length,d=0;d<a;d++)s[d]=c[d];for(var d=a;d<c.length;d++)s[d]=t.addOrSubtractGF(r[d-a],c[d]);return new o(this.field,s);var n},o.prototype.multiply=function(e){if(0===e)return this.field.zero;if(1===e)return this;for(var r=this.coefficients.length,t=new Uint8ClampedArray(r),c=0;c<r;c++)t[c]=this.field.multiply(this.coefficients[c],e);return new o(this.field,t)},o.prototype.multiplyPoly=function(e){if(this.isZero()||e.isZero())return this.field.zero;for(var r=this.coefficients,c=r.length,s=e.coefficients,a=s.length,d=new Uint8ClampedArray(c+a-1),n=0;n<c;n++)for(var l=r[n],i=0;i<a;i++)d[n+i]=t.addOrSubtractGF(d[n+i],this.field.multiply(l,s[i]));return new o(this.field,d)},o.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Error("Invalid degree less than 0");if(0===r)return this.field.zero;for(var t=this.coefficients.length,c=new Uint8ClampedArray(t+e),s=0;s<t;s++)c[s]=this.field.multiply(this.coefficients[s],r);return new o(this.field,c)},o.prototype.evaluateAt=function(o){var e=0;if(0===o)return this.getCoefficient(0);var r=this.coefficients.length;if(1===o)return this.coefficients.forEach(function(o){e=t.addOrSubtractGF(e,o)}),e;e=this.coefficients[0];for(var c=1;c<r;c++)e=t.addOrSubtractGF(this.field.multiply(o,e),this.coefficients[c]);return e},o}();e.default=c},function(o,e,r){"use strict";function t(o){var e=n.locate(o);if(!e)return null;var r=d.extract(o,e),t=a.decode(r.matrix);return t?{binaryData:t.bytes,data:t.text,chunks:t.chunks,location:{topRightCorner:r.mappingFunction(e.dimension,0),topLeftCorner:r.mappingFunction(0,0),bottomRightCorner:r.mappingFunction(e.dimension,e.dimension),bottomLeftCorner:r.mappingFunction(0,e.dimension),topRightFinderPattern:e.topRight,topLeftFinderPattern:e.topLeft,bottomLeftFinderPattern:e.bottomLeft,bottomRightAlignmentPattern:e.alignmentPattern}}:null}function c(o,e,r,c){void 0===c&&(c={});var a=l;Object.keys(a||{}).forEach(function(o){a[o]=c[o]||a[o]});var d="attemptBoth"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,n="onlyInvert"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,i=s.binarize(o,e,r,d),B=i.binarized,k=i.inverted,u=t(n?k:B);return u||"attemptBoth"!==a.inversionAttempts&&"invertFirst"!==a.inversionAttempts||(u=t(n?B:k)),u}Object.defineProperty(e,"__esModule",{value:!0});var s=r(4),a=r(5),d=r(11),n=r(12),l={inversionAttempts:"attemptBoth"};c.default=c,e.default=c},function(o,e,r){"use strict";function t(o,e,r){return o<e?e:o>r?r:o}function c(o,e,r,c){if(o.length!==e*r*4)throw new Error("Malformed data passed to binarizer.");for(var l=new n(e,r),i=0;i<e;i++)for(var B=0;B<r;B++){var k=o[4*(B*e+i)+0],u=o[4*(B*e+i)+1],C=o[4*(B*e+i)+2];l.set(i,B,.2126*k+.7152*u+.0722*C)}for(var m=Math.ceil(e/a),f=Math.ceil(r/a),w=new n(m,f),P=0;P<f;P++)for(var v=0;v<m;v++){for(var h=0,p=1/0,y=0,B=0;B<a;B++)for(var i=0;i<a;i++){var b=l.get(v*a+i,P*a+B);h+=b,p=Math.min(p,b),y=Math.max(y,b)}var g=h/Math.pow(a,2);if(y-p<=d&&(g=p/2,P>0&&v>0)){var x=(w.get(v,P-1)+2*w.get(v-1,P)+w.get(v-1,P-1))/4;p<x&&(g=x)}w.set(v,P,g)}var M=s.BitMatrix.createEmpty(e,r),L=null;c&&(L=s.BitMatrix.createEmpty(e,r));for(var P=0;P<f;P++)for(var v=0;v<m;v++){for(var N=t(v,2,m-3),I=t(P,2,f-3),h=0,O=-2;O<=2;O++)for(var z=-2;z<=2;z++)h+=w.get(N+O,I+z);for(var S=h/25,O=0;O<a;O++)for(var z=0;z<a;z++){var i=v*a+O,B=P*a+z,X=l.get(i,B);M.set(i,B,X<=S),c&&L.set(i,B,!(X<=S))}}return c?{binarized:M,inverted:L}:{binarized:M}}Object.defineProperty(e,"__esModule",{value:!0});var s=r(0),a=8,d=24,n=function(){function o(o,e){this.width=o,this.data=new Uint8ClampedArray(o*e)}return o.prototype.get=function(o,e){return this.data[e*this.width+o]},o.prototype.set=function(o,e,r){this.data[e*this.width+o]=r},o}();e.binarize=c},function(o,e,r){"use strict";function t(o,e){for(var r=o^e,t=0;r;)t++,r&=r-1;return t}function c(o,e){return e<<1|o}function s(o){var e=17+4*o.versionNumber,r=k.BitMatrix.createEmpty(e,e);r.setRegion(0,0,9,9,!0),r.setRegion(e-8,0,8,9,!0),r.setRegion(0,e-8,9,8,!0);for(var t=0,c=o.alignmentPatternCenters;t<c.length;t++)for(var s=c[t],a=0,d=o.alignmentPatternCenters;a<d.length;a++){var n=d[a];6===s&&6===n||6===s&&n===e-7||s===e-7&&6===n||r.setRegion(s-2,n-2,5,5,!0)}return r.setRegion(6,9,1,e-17,!0),r.setRegion(9,6,e-17,1,!0),o.versionNumber>6&&(r.setRegion(e-11,0,3,6,!0),r.setRegion(0,e-11,6,3,!0)),r}function a(o,e,r){for(var t=w[r.dataMask],a=o.height,d=s(e),n=[],l=0,i=0,B=!0,k=a-1;k>0;k-=2){6===k&&k--;for(var u=0;u<a;u++)for(var C=B?a-1-u:u,m=0;m<2;m++){var f=k-m;if(!d.get(f,C)){i++;var P=o.get(f,C);t({y:C,x:f})&&(P=!P),l=c(P,l),8===i&&(n.push(l),i=0,l=0)}}B=!B}return n}function d(o){var e=o.height,r=Math.floor((e-17)/4);if(r<=6)return m.VERSIONS[r-1];for(var s=0,a=5;a>=0;a--)for(var d=e-9;d>=e-11;d--)s=c(o.get(d,a),s);for(var n=0,d=5;d>=0;d--)for(var a=e-9;a>=e-11;a--)n=c(o.get(d,a),n);for(var l,i=1/0,B=0,k=m.VERSIONS;B<k.length;B++){var u=k[B];if(u.infoBits===s||u.infoBits===n)return u;var C=t(s,u.infoBits);C<i&&(l=u,i=C),C=t(n,u.infoBits),C<i&&(l=u,i=C)}return i<=3?l:void 0}function n(o){for(var e=0,r=0;r<=8;r++)6!==r&&(e=c(o.get(r,8),e));for(var s=7;s>=0;s--)6!==s&&(e=c(o.get(8,s),e));for(var a=o.height,d=0,s=a-1;s>=a-7;s--)d=c(o.get(8,s),d);for(var r=a-8;r<a;r++)d=c(o.get(r,8),d);for(var n=1/0,l=null,i=0,B=f;i<B.length;i++){var k=B[i],u=k.bits,C=k.formatInfo;if(u===e||u===d)return C;var m=t(e,u);m<n&&(l=C,n=m),e!==d&&(m=t(d,u))<n&&(l=C,n=m)}return n<=3?l:null}function l(o,e,r){var t=e.errorCorrectionLevels[r],c=[],s=0;if(t.ecBlocks.forEach(function(o){for(var e=0;e<o.numBlocks;e++)c.push({numDataCodewords:o.dataCodewordsPerBlock,codewords:[]}),s+=o.dataCodewordsPerBlock+t.ecCodewordsPerBlock}),o.length<s)return null;o=o.slice(0,s);for(var a=t.ecBlocks[0].dataCodewordsPerBlock,d=0;d<a;d++)for(var n=0,l=c;n<l.length;n++){var i=l[n];i.codewords.push(o.shift())}if(t.ecBlocks.length>1)for(var B=t.ecBlocks[0].numBlocks,k=t.ecBlocks[1].numBlocks,d=0;d<k;d++)c[B+d].codewords.push(o.shift());for(;o.length>0;)for(var u=0,C=c;u<C.length;u++){var i=C[u];i.codewords.push(o.shift())}return c}function i(o){var e=d(o);if(!e)return null;var r=n(o);if(!r)return null;var t=a(o,e,r),c=l(t,e,r.errorCorrectionLevel);if(!c)return null;for(var s=c.reduce(function(o,e){return o+e.numDataCodewords},0),i=new Uint8ClampedArray(s),B=0,k=0,m=c;k<m.length;k++){var f=m[k],w=C.decode(f.codewords,f.codewords.length-f.numDataCodewords);if(!w)return null;for(var P=0;P<f.numDataCodewords;P++)i[B++]=w[P]}try{return u.decode(i,e.versionNumber)}catch(o){return null}}function B(o){if(null==o)return null;var e=i(o);if(e)return e;for(var r=0;r<o.width;r++)for(var t=r+1;t<o.height;t++)o.get(r,t)!==o.get(t,r)&&(o.set(r,t,!o.get(r,t)),o.set(t,r,!o.get(t,r)));return i(o)}Object.defineProperty(e,"__esModule",{value:!0});var k=r(0),u=r(6),C=r(9),m=r(10),f=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],w=[function(o){return(o.y+o.x)%2==0},function(o){return o.y%2==0},function(o){return o.x%3==0},function(o){return(o.y+o.x)%3==0},function(o){return(Math.floor(o.y/2)+Math.floor(o.x/3))%2==0},function(o){return o.x*o.y%2+o.x*o.y%3==0},function(o){return(o.y*o.x%2+o.y*o.x%3)%2==0},function(o){return((o.y+o.x)%2+o.y*o.x%3)%2==0}];e.decode=B},function(o,e,r){"use strict";function t(o,e){for(var r=[],t="",c=[10,12,14][e],s=o.readBits(c);s>=3;){var a=o.readBits(10);if(a>=1e3)throw new Error("Invalid numeric value above 999");var d=Math.floor(a/100),n=Math.floor(a/10)%10,l=a%10;r.push(48+d,48+n,48+l),t+=d.toString()+n.toString()+l.toString(),s-=3}if(2===s){var a=o.readBits(7);if(a>=100)throw new Error("Invalid numeric value above 99");var d=Math.floor(a/10),n=a%10;r.push(48+d,48+n),t+=d.toString()+n.toString()}else if(1===s){var a=o.readBits(4);if(a>=10)throw new Error("Invalid numeric value above 9");r.push(48+a),t+=a.toString()}return{bytes:r,text:t}}function c(o,e){for(var r=[],t="",c=[9,11,13][e],s=o.readBits(c);s>=2;){var a=o.readBits(11),d=Math.floor(a/45),n=a%45;r.push(k[d].charCodeAt(0),k[n].charCodeAt(0)),t+=k[d]+k[n],s-=2}if(1===s){var d=o.readBits(6);r.push(k[d].charCodeAt(0)),t+=k[d]}return{bytes:r,text:t}}function s(o,e){for(var r=[],t="",c=[8,16,16][e],s=o.readBits(c),a=0;a<s;a++){var d=o.readBits(8);r.push(d)}try{t+=decodeURIComponent(r.map(function(o){return"%"+("0"+o.toString(16)).substr(-2)}).join(""))}catch(o){}return{bytes:r,text:t}}function a(o,e){for(var r=[],t="",c=[8,10,12][e],s=o.readBits(c),a=0;a<s;a++){var d=o.readBits(13),n=Math.floor(d/192)<<8|d%192;n+=n<7936?33088:49472,r.push(n>>8,255&n),t+=String.fromCharCode(i.shiftJISTable[n])}return{bytes:r,text:t}}function d(o,e){for(var r=new l.BitStream(o),d=e<=9?0:e<=26?1:2,i={text:"",bytes:[],chunks:[]};r.available()>=4;){var k=r.readBits(4);if(k===B.Terminator)return i;if(k===B.ECI)0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(7)}):0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(14)}):0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(21)}):i.chunks.push({type:n.ECI,assignmentNumber:-1});else if(k===B.Numeric){var u=t(r,d);i.text+=u.text,(w=i.bytes).push.apply(w,u.bytes),i.chunks.push({type:n.Numeric,text:u.text})}else if(k===B.Alphanumeric){var C=c(r,d);i.text+=C.text,(P=i.bytes).push.apply(P,C.bytes),i.chunks.push({type:n.Alphanumeric,text:C.text})}else if(k===B.Byte){var m=s(r,d);i.text+=m.text,(v=i.bytes).push.apply(v,m.bytes),i.chunks.push({type:n.Byte,bytes:m.bytes,text:m.text})}else if(k===B.Kanji){var f=a(r,d);i.text+=f.text,(h=i.bytes).push.apply(h,f.bytes),i.chunks.push({type:n.Kanji,bytes:f.bytes,text:f.text})}}var w,P,v,h}Object.defineProperty(e,"__esModule",{value:!0});var n,l=r(7),i=r(8);!function(o){o.Numeric="numeric",o.Alphanumeric="alphanumeric",o.Byte="byte",o.Kanji="kanji",o.ECI="eci"}(n=e.Mode||(e.Mode={}));var B;!function(o){o[o.Terminator=0]="Terminator",o[o.Numeric=1]="Numeric",o[o.Alphanumeric=2]="Alphanumeric",o[o.Byte=4]="Byte",o[o.Kanji=8]="Kanji",o[o.ECI=7]="ECI"}(B||(B={}));var k=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];e.decode=d},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function o(o){this.byteOffset=0,this.bitOffset=0,this.bytes=o}return o.prototype.readBits=function(o){if(o<1||o>32||o>this.available())throw new Error("Cannot read "+o.toString()+" bits");var e=0;if(this.bitOffset>0){var r=8-this.bitOffset,t=o<r?o:r,c=r-t,s=255>>8-t<<c;e=(this.bytes[this.byteOffset]&s)>>c,o-=t,this.bitOffset+=t,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(o>0){for(;o>=8;)e=e<<8|255&this.bytes[this.byteOffset],this.byteOffset++,o-=8;if(o>0){var c=8-o,s=255>>c<<c;e=e<<o|(this.bytes[this.byteOffset]&s)>>c,this.bitOffset+=o}}return e},o.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},o}();e.BitStream=t},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,\n36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,\n39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,\n59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(o,e,r){"use strict";function t(o,e,r,t){e.degree()<r.degree()&&(w=[r,e],e=w[0],r=w[1]);for(var c=e,s=r,a=o.zero,d=o.one;s.degree()>=t/2;){var n=c,l=a;if(c=s,a=d,c.isZero())return null;s=n;for(var i=o.zero,B=c.getCoefficient(c.degree()),k=o.inverse(B);s.degree()>=c.degree()&&!s.isZero();){var u=s.degree()-c.degree(),C=o.multiply(s.getCoefficient(s.degree()),k);i=i.addOrSubtract(o.buildMonomial(u,C)),s=s.addOrSubtract(c.multiplyByMonomial(u,C))}if(d=i.multiplyPoly(a).addOrSubtract(l),s.degree()>=c.degree())return null}var m=d.getCoefficient(0);if(0===m)return null;var f=o.inverse(m);return[d.multiply(f),s.multiply(f)];var w}function c(o,e){var r=e.degree();if(1===r)return[e.getCoefficient(1)];for(var t=new Array(r),c=0,s=1;s<o.size&&c<r;s++)0===e.evaluateAt(s)&&(t[c]=o.inverse(s),c++);return c!==r?null:t}function s(o,e,r){for(var t=r.length,c=new Array(t),s=0;s<t;s++){for(var a=o.inverse(r[s]),n=1,l=0;l<t;l++)s!==l&&(n=o.multiply(n,d.addOrSubtractGF(1,o.multiply(r[l],a))));c[s]=o.multiply(e.evaluateAt(a),o.inverse(n)),0!==o.generatorBase&&(c[s]=o.multiply(c[s],a))}return c}function a(o,e){var r=new Uint8ClampedArray(o.length);r.set(o);for(var a=new d.default(285,256,0),l=new n.default(a,r),i=new Uint8ClampedArray(e),B=!1,k=0;k<e;k++){var u=l.evaluateAt(a.exp(k+a.generatorBase));i[i.length-1-k]=u,0!==u&&(B=!0)}if(!B)return r;var C=new n.default(a,i),m=t(a,a.buildMonomial(e,1),C,e);if(null===m)return null;var f=c(a,m[0]);if(null==f)return null;for(var w=s(a,m[1],f),P=0;P<f.length;P++){var v=r.length-1-a.log(f[P]);if(v<0)return null;r[v]=d.addOrSubtractGF(r[v],w[P])}return r}Object.defineProperty(e,"__esModule",{value:!0});var d=r(1),n=r(2);e.decode=a},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(o,e,r){"use strict";function t(o,e,r,t){var c=o.x-e.x+r.x-t.x,s=o.y-e.y+r.y-t.y;if(0===c&&0===s)return{a11:e.x-o.x,a12:e.y-o.y,a13:0,a21:r.x-e.x,a22:r.y-e.y,a23:0,a31:o.x,a32:o.y,a33:1};var a=e.x-r.x,d=t.x-r.x,n=e.y-r.y,l=t.y-r.y,i=a*l-d*n,B=(c*l-d*s)/i,k=(a*s-c*n)/i;return{a11:e.x-o.x+B*e.x,a12:e.y-o.y+B*e.y,a13:B,a21:t.x-o.x+k*t.x,a22:t.y-o.y+k*t.y,a23:k,a31:o.x,a32:o.y,a33:1}}function c(o,e,r,c){var s=t(o,e,r,c);return{a11:s.a22*s.a33-s.a23*s.a32,a12:s.a13*s.a32-s.a12*s.a33,a13:s.a12*s.a23-s.a13*s.a22,a21:s.a23*s.a31-s.a21*s.a33,a22:s.a11*s.a33-s.a13*s.a31,a23:s.a13*s.a21-s.a11*s.a23,a31:s.a21*s.a32-s.a22*s.a31,a32:s.a12*s.a31-s.a11*s.a32,a33:s.a11*s.a22-s.a12*s.a21}}function s(o,e){return{a11:o.a11*e.a11+o.a21*e.a12+o.a31*e.a13,a12:o.a12*e.a11+o.a22*e.a12+o.a32*e.a13,a13:o.a13*e.a11+o.a23*e.a12+o.a33*e.a13,a21:o.a11*e.a21+o.a21*e.a22+o.a31*e.a23,a22:o.a12*e.a21+o.a22*e.a22+o.a32*e.a23,a23:o.a13*e.a21+o.a23*e.a22+o.a33*e.a23,a31:o.a11*e.a31+o.a21*e.a32+o.a31*e.a33,a32:o.a12*e.a31+o.a22*e.a32+o.a32*e.a33,a33:o.a13*e.a31+o.a23*e.a32+o.a33*e.a33}}function a(o,e){for(var r=c({x:3.5,y:3.5},{x:e.dimension-3.5,y:3.5},{x:e.dimension-6.5,y:e.dimension-6.5},{x:3.5,y:e.dimension-3.5}),a=t(e.topLeft,e.topRight,e.alignmentPattern,e.bottomLeft),n=s(a,r),l=d.BitMatrix.createEmpty(e.dimension,e.dimension),i=function(o,e){var r=n.a13*o+n.a23*e+n.a33;return{x:(n.a11*o+n.a21*e+n.a31)/r,y:(n.a12*o+n.a22*e+n.a32)/r}},B=0;B<e.dimension;B++)for(var k=0;k<e.dimension;k++){var u=k+.5,C=B+.5,m=i(u,C);l.set(k,B,o.get(Math.floor(m.x),Math.floor(m.y)))}return{matrix:l,mappingFunction:i}}Object.defineProperty(e,"__esModule",{value:!0});var d=r(0);e.extract=a},function(o,e,r){"use strict";function t(o){return o.reduce(function(o,e){return o+e})}function c(o,e,r){var t,c,s,a=C(o,e),d=C(e,r),n=C(o,r);return d>=a&&d>=n?(l=[e,o,r],t=l[0],c=l[1],s=l[2]):n>=d&&n>=a?(i=[o,e,r],t=i[0],c=i[1],s=i[2]):(B=[o,r,e],t=B[0],c=B[1],s=B[2]),(s.x-c.x)*(t.y-c.y)-(s.y-c.y)*(t.x-c.x)<0&&(k=[s,t],t=k[0],s=k[1]),{bottomLeft:t,topLeft:c,topRight:s};var l,i,B,k}function s(o,e,r,c){var s=(t(d(o,r,c,5))/7+t(d(o,e,c,5))/7+t(d(r,o,c,5))/7+t(d(e,o,c,5))/7)/4;if(s<1)throw new Error("Invalid module size");var a=Math.round(C(o,e)/s),n=Math.round(C(o,r)/s),l=Math.floor((a+n)/2)+7;switch(l%4){case 0:l++;break;case 2:l--}return{dimension:l,moduleSize:s}}function a(o,e,r,t){var c,s,a,d,n=[{x:Math.floor(o.x),y:Math.floor(o.y)}],l=Math.abs(e.y-o.y)>Math.abs(e.x-o.x);l?(c=Math.floor(o.y),s=Math.floor(o.x),a=Math.floor(e.y),d=Math.floor(e.x)):(c=Math.floor(o.x),s=Math.floor(o.y),a=Math.floor(e.x),d=Math.floor(e.y));for(var i=Math.abs(a-c),B=Math.abs(d-s),k=Math.floor(-i/2),u=c<a?1:-1,m=s<d?1:-1,f=!0,w=c,P=s;w!==a+u;w+=u){var v=l?P:w,h=l?w:P;if(r.get(v,h)!==f&&(f=!f,n.push({x:v,y:h}),n.length===t+1))break;if((k+=B)>0){if(P===d)break;P+=m,k-=i}}for(var p=[],y=0;y<t;y++)n[y]&&n[y+1]?p.push(C(n[y],n[y+1])):p.push(0);return p}function d(o,e,r,t){var c=e.y-o.y,s=e.x-o.x,d=a(o,e,r,Math.ceil(t/2)),n=a(o,{x:o.x-s,y:o.y-c},r,Math.ceil(t/2)),l=d.shift()+n.shift()-1;return(i=n.concat(l)).concat.apply(i,d);var i}function n(o,e){var r=t(o)/t(e),c=0;return e.forEach(function(e,t){c+=Math.pow(o[t]-e*r,2)}),{averageSize:r,error:c}}function l(o,e,r){try{var t=d(o,{x:-1,y:o.y},r,e.length),c=d(o,{x:o.x,y:-1},r,e.length),s={x:Math.max(0,o.x-o.y)-1,y:Math.max(0,o.y-o.x)-1},a=d(o,s,r,e.length),l={x:Math.min(r.width,o.x+o.y)+1,y:Math.min(r.height,o.y+o.x)+1},i=d(o,l,r,e.length),B=n(t,e),k=n(c,e),u=n(a,e),C=n(i,e),m=Math.sqrt(B.error*B.error+k.error*k.error+u.error*u.error+C.error*C.error),f=(B.averageSize+k.averageSize+u.averageSize+C.averageSize)/4;return m+(Math.pow(B.averageSize-f,2)+Math.pow(k.averageSize-f,2)+Math.pow(u.averageSize-f,2)+Math.pow(C.averageSize-f,2))/f}catch(o){return 1/0}}function i(o){for(var e=[],r=[],a=[],d=[],n=0;n<=o.height;n++)!function(c){for(var s=0,n=!1,l=[0,0,0,0,0],i=-1;i<=o.width;i++)!function(e){var a=o.get(e,c);if(a===n)s++;else{l=[l[1],l[2],l[3],l[4],s],s=1,n=a;var i=t(l)/7,B=Math.abs(l[0]-i)<i&&Math.abs(l[1]-i)<i&&Math.abs(l[2]-3*i)<3*i&&Math.abs(l[3]-i)<i&&Math.abs(l[4]-i)<i&&!a,C=t(l.slice(-3))/3,m=Math.abs(l[2]-C)<C&&Math.abs(l[3]-C)<C&&Math.abs(l[4]-C)<C&&a;if(B){var f=e-l[3]-l[4],w=f-l[2],P={startX:w,endX:f,y:c},v=r.filter(function(o){return w>=o.bottom.startX&&w<=o.bottom.endX||f>=o.bottom.startX&&w<=o.bottom.endX||w<=o.bottom.startX&&f>=o.bottom.endX&&l[2]/(o.bottom.endX-o.bottom.startX)<u&&l[2]/(o.bottom.endX-o.bottom.startX)>k});v.length>0?v[0].bottom=P:r.push({top:P,bottom:P})}if(m){var h=e-l[4],p=h-l[3],P={startX:p,y:c,endX:h},v=d.filter(function(o){return p>=o.bottom.startX&&p<=o.bottom.endX||h>=o.bottom.startX&&p<=o.bottom.endX||p<=o.bottom.startX&&h>=o.bottom.endX&&l[2]/(o.bottom.endX-o.bottom.startX)<u&&l[2]/(o.bottom.endX-o.bottom.startX)>k});v.length>0?v[0].bottom=P:d.push({top:P,bottom:P})}}}(i);e.push.apply(e,r.filter(function(o){return o.bottom.y!==c&&o.bottom.y-o.top.y>=2})),r=r.filter(function(o){return o.bottom.y===c}),a.push.apply(a,d.filter(function(o){return o.bottom.y!==c})),d=d.filter(function(o){return o.bottom.y===c})}(n);e.push.apply(e,r.filter(function(o){return o.bottom.y-o.top.y>=2})),a.push.apply(a,d);var i=e.filter(function(o){return o.bottom.y-o.top.y>=2}).map(function(e){var r=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,c=(e.top.y+e.bottom.y+1)/2;if(o.get(Math.round(r),Math.round(c))){\nvar s=[e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1],a=t(s)/s.length;return{score:l({x:Math.round(r),y:Math.round(c)},[1,1,3,1,1],o),x:r,y:c,size:a}}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score}).map(function(o,e,r){if(e>B)return null;var t=r.filter(function(o,r){return e!==r}).map(function(e){return{x:e.x,y:e.y,score:e.score+Math.pow(e.size-o.size,2)/o.size,size:e.size}}).sort(function(o,e){return o.score-e.score});if(t.length<2)return null;var c=o.score+t[0].score+t[1].score;return{points:[o].concat(t.slice(0,2)),score:c}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score});if(0===i.length)return null;var m,f,w=c(i[0].points[0],i[0].points[1],i[0].points[2]),P=w.topRight,v=w.topLeft,h=w.bottomLeft;try{L=s(v,P,h,o),m=L.dimension,f=L.moduleSize}catch(o){return null}var p={x:P.x-v.x+h.x,y:P.y-v.y+h.y},y=(C(v,h)+C(v,P))/2/f,b=1-3/y,g={x:v.x+b*(p.x-v.x),y:v.y+b*(p.y-v.y)},x=a.map(function(e){var r=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,c=(e.top.y+e.bottom.y+1)/2;if(o.get(Math.floor(r),Math.floor(c))){var s=[e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1];t(s);return{x:r,y:c,score:l({x:Math.floor(r),y:Math.floor(c)},[1,1,1],o)+C({x:r,y:c},g)}}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score}),M=y>=15&&x.length?x[0]:g;return{alignmentPattern:{x:M.x,y:M.y},bottomLeft:{x:h.x,y:h.y},dimension:m,topLeft:{x:v.x,y:v.y},topRight:{x:P.x,y:P.y}};var L}Object.defineProperty(e,"__esModule",{value:!0});var B=4,k=.5,u=1.5,C=function(o,e){return Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))};e.locate=i}]).default}),self.addEventListener("message",function(o){var e=jsQR(o.data.data,o.data.width,o.data.height);e?postMessage(e.data):postMessage(null)});'],{type:"application/javascript"}),f=["delay","legacyMode","facingMode"];e.exports=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.els={},n.state={mirrorVideo:!1},n.initiate=n.initiate.bind(n),n.initiateLegacyMode=n.initiateLegacyMode.bind(n),n.check=n.check.bind(n),n.handleVideo=n.handleVideo.bind(n),n.handleLoadStart=n.handleLoadStart.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.clearComponent=n.clearComponent.bind(n),n.handleReaderLoad=n.handleReaderLoad.bind(n),n.openImageDialog=n.openImageDialog.bind(n),n.handleWorkerMessage=n.handleWorkerMessage.bind(n),n.setRefFactory=n.setRefFactory.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.worker=new Worker(URL.createObjectURL(h)),this.worker.onmessage=this.handleWorkerMessage,this.props.legacyMode?this.initiateLegacyMode():this.initiate()}},{key:"componentWillReceiveProps",value:function(e){var t=d(this.props,e,f),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;if("facingMode"==l){this.clearComponent(),this.initiate(e);break}if("delay"==l)0!=this.props.delay||e.legacyMode||(this.timeout=setTimeout(this.check,e.delay)),0==e.delay&&clearTimeout(this.timeout);else if("legacyMode"==l){this.props.legacyMode&&!e.legacyMode?(this.clearComponent(),this.initiate(e)):(this.clearComponent(),this.componentDidUpdate=this.initiateLegacyMode);break}}}catch(u){r=!0,a=u}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}}},{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state||d(this.props,e,f).length>0}},{key:"componentWillUnmount",value:function(){this.worker&&(this.worker.terminate(),this.worker=void 0),this.clearComponent()}},{key:"clearComponent",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.stopCamera&&this.stopCamera(),this.reader&&this.reader.removeEventListener("load",this.handleReaderLoad),this.els.img&&this.els.img.removeEventListener("load",this.check)}},{key:"initiate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.onError,n=e.facingMode,r=/firefox/i.test(navigator.userAgent),a={};navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getSupportedConstraints&&(a=navigator.mediaDevices.getSupportedConstraints());var o={};a.facingMode&&(o.facingMode={ideal:n}),a.frameRate&&(o.frameRate={ideal:25,min:10});var i=a.facingMode||r?Promise.resolve(e.constraints||o):g(n).then((function(t){return Object.assign({},{deviceId:t},e.constraints)}));i.then((function(e){return navigator.mediaDevices.getUserMedia({video:e})})).then(this.handleVideo).catch(t)}},{key:"handleVideo",value:function(e){var t=this.els.preview,n=this.props.facingMode;if(!t)return setTimeout(this.handleVideo,200,e);void 0!==(t||{}).srcObject?t.srcObject=e:void 0!==t.mozSrcObject?t.mozSrcObject=e:window.URL.createObjectURL?t.src=window.URL.createObjectURL(e):window.webkitURL?t.src=window.webkitURL.createObjectURL(e):t.src=e,t.playsInline=!0;var r=e.getTracks()[0];this.stopCamera=r.stop.bind(r),t.addEventListener("loadstart",this.handleLoadStart),this.setState({mirrorVideo:"user"==n,streamLabel:r.label})}},{key:"handleLoadStart",value:function(){var e=this.props,t=e.delay,n=e.onLoad,r=this.state,a=r.mirrorVideo,o=r.streamLabel,i=this.els.preview;i.play(),"function"==typeof n&&n({mirrorVideo:a,streamLabel:o}),"number"==typeof t&&(this.timeout=setTimeout(this.check,t)),i.removeEventListener("loadstart",this.handleLoadStart)}},{key:"check",value:function(){var e=this.props,t=e.legacyMode,n=e.resolution,r=e.delay,a=this.els,o=a.preview,i=a.canvas,l=a.img,u=Math.floor(t?l.naturalWidth:o.videoWidth),s=Math.floor(t?l.naturalHeight:o.videoHeight),c=0,g=0;if(t){var d=n/(u>s?u:s);s*=d,u*=d,i.width=u,i.height=s}else{var p=n/(u<s?u:s);g=((s*=p)-n)/2*-1,c=((u*=p)-n)/2*-1,i.width=n,i.height=n}var h=o&&o.readyState===o.HAVE_ENOUGH_DATA;if(t||h){var f=i.getContext("2d");f.drawImage(t?l:o,c,g,u,s);var C=f.getImageData(0,0,i.width,i.height);this.worker.postMessage(C)}else this.timeout=setTimeout(this.check,r)}},{key:"handleWorkerMessage",value:function(e){var t=this.props,n=t.onScan,r=t.legacyMode,a=t.delay;n(e.data||null),!r&&"number"==typeof a&&this.worker&&(this.timeout=setTimeout(this.check,a))}},{key:"initiateLegacyMode",value:function(){this.reader=new FileReader,this.reader.addEventListener("load",this.handleReaderLoad),this.els.img.addEventListener("load",this.check,!1),this.componentDidUpdate=void 0,"function"==typeof this.props.onLoad&&this.props.onLoad()}},{key:"handleInputChange",value:function(e){var t=e.target.files[0];this.reader.readAsDataURL(t)}},{key:"handleReaderLoad",value:function(e){this.els.img.src=e.target.result}},{key:"openImageDialog",value:function(){this.els.input.click()}},{key:"setRefFactory",value:function(e){var t=this;return function(n){t.els[e]=n}}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.onImageLoad,a=e.legacyMode,i=e.showViewFinder,u=(e.facingMode,{display:"none"}),s={top:0,left:0,display:"block",position:"absolute",overflow:"hidden",width:"100%",height:"100%"},c=o({},s,{objectFit:"cover",transform:this.state.mirrorVideo?"scaleX(-1)":void 0}),g=o({},s,{objectFit:"scale-down"});return l.createElement("section",{className:n,style:t},l.createElement("section",{style:{overflow:"hidden",position:"relative",width:"100%",paddingTop:"100%"}},!a&&i?l.createElement("div",{style:{top:0,left:0,zIndex:1,boxSizing:"border-box",border:"50px solid rgba(0, 0, 0, 0.3)",boxShadow:"inset 0 0 0 5px rgba(255, 0, 0, 0.5)",position:"absolute",width:"100%",height:"100%"}}):null,a?l.createElement("input",{style:u,type:"file",accept:"image/*",ref:this.setRefFactory("input"),onChange:this.handleInputChange}):null,a?l.createElement("img",{style:g,ref:this.setRefFactory("img"),onLoad:r}):l.createElement("video",{style:c,ref:this.setRefFactory("preview")}),l.createElement("canvas",{style:u,ref:this.setRefFactory("canvas")})))}}]),t}(u),r.propTypes={onScan:s.func.isRequired,onError:s.func.isRequired,onLoad:s.func,onImageLoad:s.func,delay:s.oneOfType([s.number,s.bool]),facingMode:s.oneOf(["user","environment"]),legacyMode:s.bool,resolution:s.number,showViewFinder:s.bool,style:s.any,className:s.string,constraints:s.object},r.defaultProps={delay:500,resolution:600,facingMode:"environment",showViewFinder:!0,constraints:null},a)},9008:function(e,t,n){e.exports=function(e,t){"use strict";function n(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=n(e),a=n(t);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){if(Array.isArray(e))return e}function u(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return l(e)||u(e,t)||c(e,t)||g()}function p(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function h(e,t){if(null==e)return{};var n,r,a=p(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),a=0,o=n.length;a<o;++a)r[a]=n.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}function C(e,t,n){var r=void 0===t?null:t,a=f(e,void 0!==n&&n),o=a.indexOf("\n",10)+1,i=a.substring(o)+(r?"//# sourceMappingURL="+r:""),l=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(l)}function I(e,t,n){var r;return function(a){return r=r||C(e,t,n),new Worker(r,a)}}var m=I("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),v=["constraints","onError","onLoad","onScan","resolution"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){return new m},k=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},Z=function(t){var n=t.constraints,a=t.onError,i=t.onLoad,l=t.onScan,u=t.resolution,s=h(t,v),c=JSON.stringify(n),g=e.useRef(null),p=e.useRef(null),f=e.useRef(document.createElement("canvas")),C=e.useRef(null),I=e.useRef(),m=d(e.useState(null),2),b=m[0],Z=m[1],S=e.useRef(!1),w=e.useMemo(y,[y]);e.useEffect((function(){return function(){w.terminate()}}),[w]),e.useEffect((function(){w.onmessage=function(e){l&&l(e.data?A(A({},e.data),{},{canvas:f.current}):null),S.current=!1}}),[l,w]);var B=e.useCallback((function(){var e=p.current&&p.current.readyState===p.current.HAVE_ENOUGH_DATA;if(!S.current&&e){S.current=!0;var t=p.current.videoWidth,n=p.current.videoHeight,r=u/(t>n?t:n);n*=r,t*=r,f.current.width=t,f.current.height=n,C.current=f.current.getContext("2d"),C.current.drawImage(p.current,0,0,t,n);var a=C.current.getImageData(0,0,t,n);w.postMessage(a)}I.current=requestAnimationFrame(B)}),[u,w]);return e.useEffect((function(){var e=JSON.parse(c),t=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(t){g.current=e;try{p.current&&(p.current.srcObject=e,p.current.setAttribute("playsinline",!0))}catch(n){Z(window.URL.createObjectURL(e))}i&&i(),I.current=requestAnimationFrame(B)}else k(e)})).catch((function(e){return t?a(e):null})),function(){cancelAnimationFrame(I.current),t=!1,k(g.current),b&&window.URL.revokeObjectURL(b)}}),[B,c,a,i]),r.default.createElement("video",o({autoPlay:!0,playsInline:!0,src:b,ref:p},s))};return Z.propTypes={constraints:a.default.object,onError:a.default.func.isRequired,onLoad:a.default.func,onScan:a.default.func.isRequired,resolution:a.default.number},Z.defaultProps={constraints:{audio:!1,video:!0},resolution:640},Z}(n(2791),n(2007))},2299:function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var u,s,c=l(n(2791)),g=n(2554),d=n(2098),p=g.keyframes(u||(u=r(["\n  0% {transform: rotate(0deg) scale(1)}\n  50% {transform: rotate(180deg) scale(0.8)}\n  100% {transform: rotate(360deg) scale(1)}\n"],["\n  0% {transform: rotate(0deg) scale(1)}\n  50% {transform: rotate(180deg) scale(0.8)}\n  100% {transform: rotate(360deg) scale(1)}\n"]))),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.style=function(){var e=t.props,n=e.size,a=e.color,o=e.speedMultiplier;return g.css(s||(s=r(["\n      background: transparent !important;\n      width: ",";\n      height: ",";\n      border-radius: 100%;\n      border: 2px solid;\n      border-color: ",";\n      border-bottom-color: transparent;\n      display: inline-block;\n      animation: "," ","s 0s infinite linear;\n      animation-fill-mode: both;\n    "],["\n      background: transparent !important;\n      width: ",";\n      height: ",";\n      border-radius: 100%;\n      border: 2px solid;\n      border-color: ",";\n      border-bottom-color: transparent;\n      display: inline-block;\n      animation: "," ","s 0s infinite linear;\n      animation-fill-mode: both;\n    "])),d.cssValue(n),d.cssValue(n),a,p,.75/o)},t}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.loading,n=e.css;return t?g.jsx("span",{css:[this.style(),n]}):null},t.defaultProps=d.sizeDefaults(35),t}(c.PureComponent);t.default=h},779:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRgba=void 0,function(e){e.maroon="#800000",e.red="#FF0000",e.orange="#FFA500",e.yellow="#FFFF00",e.olive="#808000",e.green="#008000",e.purple="#800080",e.fuchsia="#FF00FF",e.lime="#00FF00",e.teal="#008080",e.aqua="#00FFFF",e.blue="#0000FF",e.navy="#000080",e.black="#000000",e.gray="#808080",e.silver="#C0C0C0",e.white="#FFFFFF"}(n||(n={}));t.calculateRgba=function(e,t){if(Object.keys(n).includes(e)&&(e=n[e]),"#"===e[0]&&(e=e.slice(1)),3===e.length){var r="";e.split("").forEach((function(e){r+=e,r+=e})),e=r}return"rgba("+(e.match(/.{2}/g)||[]).map((function(e){return parseInt(e,16)})).join(", ")+", "+t+")"}},2098:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(43),t),a(n(779),t),a(n(8945),t)},43:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heightWidthRadiusDefaults=t.heightWidthDefaults=t.sizeMarginDefaults=t.sizeDefaults=void 0;var n={loading:!0,color:"#000000",css:"",speedMultiplier:1};function r(e){return Object.assign({},n,{size:e})}function a(e,t){return Object.assign({},n,{height:e,width:t})}t.sizeDefaults=r,t.sizeMarginDefaults=function(e){return Object.assign({},r(e),{margin:2})},t.heightWidthDefaults=a,t.heightWidthRadiusDefaults=function(e,t,n){return void 0===n&&(n=2),Object.assign({},a(e,t),{radius:n,margin:2})}},8945:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssValue=t.parseLengthAndUnit=void 0;var n={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function r(e){if("number"===typeof e)return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();t=r.includes(".")?parseFloat(r):parseInt(r,10);var a=(e.match(/[^0-9]*$/)||"").toString();return n[a]?{value:t,unit:a}:(console.warn("React Spinners: "+e+" is not a valid css value. Defaulting to "+t+"px."),{value:t,unit:"px"})}t.parseLengthAndUnit=r,t.cssValue=function(e){var t=r(e);return""+t.value+t.unit}},3765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0},l=c(n(2007)),u=c(n(9285)),s=n(5418);function c(e){return e&&e.__esModule?e:{default:e}}var g=["drag","dragend"],d=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preCanvasDraw=r.preCanvasDraw.bind(r),r.postCanvasDraw=r.postCanvasDraw.bind(r),r.shouldTypeProceed=r.shouldTypeProceed.bind(r),r.preEvaluate=r.preEvaluate.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"preCanvasDraw",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"preCanvasDraw",this).call(this,e,n),e.save();var r=this.context,a=r.margin,o=r.ratio,l=n.chartConfig,u=.5*o+l.origin[0]+a.left,s=.5*o+l.origin[1]+a.top,c=n.chartConfig,g=c.width,d=c.height,p=this.props,h=p.clip,f=p.edgeClip;e.setTransform(1,0,0,1,0,0),e.scale(o,o),f&&(e.beginPath(),e.rect(-1,s-10,g+a.left+a.right+1,d+20),e.clip()),e.translate(u,s),h&&(e.beginPath(),e.rect(-1,-1,g+1,d+1),e.clip())}},{key:"postCanvasDraw",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCanvasDraw",this).call(this,e,n),e.restore()}},{key:"updateMoreProps",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMoreProps",this).call(this,e);var n=e.chartConfig;if(n&&Array.isArray(n)){var r=this.context.chartId,o=(0,s.find)(n,(function(e){return e.id===r}));this.moreProps.chartConfig=o}if((0,s.isDefined)(this.moreProps.chartConfig)){var l=a(this.moreProps.chartConfig.origin,2),u=l[0],c=l[1];if((0,s.isDefined)(e.mouseXY)){var g=a(e.mouseXY,2),d=g[0],p=g[1];this.moreProps.mouseXY=[d-u,p-c]}if((0,s.isDefined)(e.startPos)){var h=a(e.startPos,2),f=h[0],C=h[1];this.moreProps.startPos=[f-u,C-c]}}}},{key:"preEvaluate",value:function(){}},{key:"shouldTypeProceed",value:function(e,t){return!("mousemove"!==e&&"click"!==e||!this.props.disablePan)||(-1!==g.indexOf(e)||!(0,s.isDefined)(t)||!(0,s.isDefined)(t.currentCharts)||t.currentCharts.indexOf(this.context.chartId)>-1)}}]),t}(u.default);d.propTypes=u.default.propTypes,d.defaultProps=u.default.defaultProps,d.contextTypes=r({},u.default.contextTypes,{canvasOriginX:l.default.number,canvasOriginY:l.default.number,chartId:l.default.oneOfType([l.default.number,l.default.string]).isRequired,chartConfig:l.default.object.isRequired,ratio:l.default.number.isRequired}),t.default=d},9285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getAxisCanvas=function(e){return e.axes},t.getMouseCanvas=function(e){return e.mouseCoord};var o=n(2791),i=s(o),l=s(n(2007)),u=n(5418);function s(e){return e&&e.__esModule?e:{default:e}}var c={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag"},g=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.drawOnCanvas=r.drawOnCanvas.bind(r),r.getMoreProps=r.getMoreProps.bind(r),r.listener=r.listener.bind(r),r.draw=r.draw.bind(r),r.updateMoreProps=r.updateMoreProps.bind(r),r.evaluateType=r.evaluateType.bind(r),r.isHover=r.isHover.bind(r),r.preCanvasDraw=r.preCanvasDraw.bind(r),r.postCanvasDraw=r.postCanvasDraw.bind(r),r.getPanConditions=r.getPanConditions.bind(r),r.shouldTypeProceed=r.shouldTypeProceed.bind(r),r.preEvaluate=r.preEvaluate.bind(r);var a=n.generateSubscriptionId;return r.suscriberId=a(),r.moreProps={},r.state={updateCount:0},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"updateMoreProps",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.moreProps[n]=e[n]}))}},{key:"shouldTypeProceed",value:function(){return!0}},{key:"preEvaluate",value:function(){}},{key:"listener",value:function(e,t,n,r){(0,u.isDefined)(t)&&this.updateMoreProps(t),this.evaluationInProgress=!0,this.evaluateType(e,r),this.evaluationInProgress=!1}},{key:"evaluateType",value:function(e,t){var n=c[e]||e;if(this.props.drawOn.indexOf(n)>-1&&(this.preEvaluate(e,this.moreProps,t),this.shouldTypeProceed(e,this.moreProps)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":this.moreProps.hovering=!1;var r=this.getMoreProps();this.props.onUnHover&&this.props.onUnHover(r,t);break;case"contextmenu":this.props.onContextMenu&&this.props.onContextMenu(this.getMoreProps(),t),this.moreProps.hovering&&this.props.onContextMenuWhenHover&&this.props.onContextMenuWhenHover(this.getMoreProps(),t);break;case"mousedown":this.props.onMouseDown&&this.props.onMouseDown(this.getMoreProps(),t);break;case"click":var a=this.getMoreProps();this.moreProps.hovering?this.props.onClickWhenHover(a,t):this.props.onClickOutside(a,t),this.props.onClick&&this.props.onClick(a,t);break;case"mousemove":var o=this.moreProps.hovering;this.moreProps.hovering=this.isHover(t);var i=this.context,l=i.amIOnTop,s=i.setCursorClass;this.moreProps.hovering&&!this.props.selected&&l(this.suscriberId)&&(0,u.isDefined)(this.props.onHover)?(s("react-stockcharts-pointer-cursor"),this.iSetTheCursorClass=!0):this.moreProps.hovering&&this.props.selected&&l(this.suscriberId)?(s(this.props.interactiveCursorClass),this.iSetTheCursorClass=!0):o&&!this.moreProps.hovering&&this.iSetTheCursorClass&&(this.iSetTheCursorClass=!1,s(null));var g=this.getMoreProps();this.moreProps.hovering&&!o&&this.props.onHover&&this.props.onHover(g,t),o&&!this.moreProps.hovering&&this.props.onUnHover&&this.props.onUnHover(g,t),this.props.onMouseMove&&this.props.onMouseMove(g,t);break;case"dblclick":var d=this.getMoreProps();this.props.onDoubleClick&&this.props.onDoubleClick(d,t),this.moreProps.hovering&&this.props.onDoubleClickWhenHover&&this.props.onDoubleClickWhenHover(d,t);break;case"pan":this.moreProps.hovering=!1,this.props.onPan&&this.props.onPan(this.getMoreProps(),t);break;case"panend":this.props.onPanEnd&&this.props.onPanEnd(this.getMoreProps(),t);break;case"dragstart":if(this.getPanConditions().draggable)(0,this.context.amIOnTop)(this.suscriberId)&&(this.dragInProgress=!0,this.props.onDragStart(this.getMoreProps(),t));this.someDragInProgress=!0;break;case"drag":this.dragInProgress&&this.props.onDrag&&this.props.onDrag(this.getMoreProps(),t);break;case"dragend":this.dragInProgress&&this.props.onDragComplete&&this.props.onDragComplete(this.getMoreProps(),t),this.dragInProgress=!1,this.someDragInProgress=!1;break;case"dragcancel":if(this.dragInProgress||this.iSetTheCursorClass)(0,this.context.setCursorClass)(null)}}},{key:"isHover",value:function(e){return!!(0,u.isDefined)(this.props.isHover)&&this.props.isHover(this.getMoreProps(),e)}},{key:"getPanConditions",value:function(){return{draggable:!(!this.props.selected||!this.moreProps.hovering)||this.props.enableDragOnHover&&this.moreProps.hovering,panEnabled:!this.props.disablePan}}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!1},t=e.trigger,n=e.force,r=c[t]||t,a=this.props.drawOn.indexOf(r)>-1;if(a||this.props.selected||n){var o=this.context.chartCanvasType,i=this.props.canvasDraw;if((0,u.isNotDefined)(i)||"svg"===o){var l=this.state.updateCount;this.setState({updateCount:l+1})}else this.drawOnCanvas()}}},{key:"componentWillMount",value:function(){var e=this.context,t=e.subscribe,n=e.chartId,r=this.props,a=r.clip,o=r.edgeClip;t(this.suscriberId,{chartId:n,clip:a,edgeClip:o,listener:this.listener,draw:this.draw,getPanConditions:this.getPanConditions}),this.componentWillReceiveProps(this.props,this.context)}},{key:"componentWillUnmount",value:function(){((0,this.context.unsubscribe)(this.suscriberId),this.iSetTheCursorClass)&&(0,this.context.setCursorClass)(null)}},{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.context.chartCanvasType,n=this.props,r=n.canvasDraw,a=n.selected,o=n.interactiveCursorClass;if(e.selected!==a){var i=this.context.setCursorClass;a&&this.moreProps.hovering?(this.iSetTheCursorClass=!0,i(o)):(this.iSetTheCursorClass=!1,i(null))}(0,u.isDefined)(r)&&!this.evaluationInProgress&&"svg"!==t&&(this.updateMoreProps(this.moreProps),this.drawOnCanvas())}},{key:"componentWillReceiveProps",value:function(e,t){var n=t.xScale,a=t.plotData,o=t.chartConfig,i=t.getMutableState;this.props.debug(t),this.moreProps=r({},this.moreProps,i(),{xScale:n,plotData:a,chartConfig:o})}},{key:"getMoreProps",value:function(){var e=this.context,t=e.xScale,n=e.plotData,a=e.chartConfig,o=e.morePropsDecorator,i=e.xAccessor,l=e.displayXAccessor,s=e.width,c=e.height,g=this.context,d=g.chartId,p=g.fullData,h=r({xScale:t,plotData:n,chartConfig:a,xAccessor:i,displayXAccessor:l,width:s,height:c,chartId:d,fullData:p},this.moreProps);return(o||u.identity)(h)}},{key:"preCanvasDraw",value:function(){}},{key:"postCanvasDraw",value:function(){}},{key:"drawOnCanvas",value:function(){var e=this.props,t=e.canvasDraw,n=e.canvasToDraw,r=this.context.getCanvasContexts,a=this.getMoreProps(),o=n(r());this.preCanvasDraw(o,a),t(o,a),this.postCanvasDraw(o,a)}},{key:"render",value:function(){var e=this.context,t=e.chartCanvasType,n=e.chartId,r=this.props,a=r.canvasDraw,o=r.clip,l=r.svgDraw;if((0,u.isDefined)(a)&&"svg"!==t)return null;var s=(0,u.isDefined)(n)?"-"+n:"",c=o?{clipPath:"url(#chart-area-clip"+s+")"}:null;return i.default.createElement("g",{style:c},l(this.getMoreProps()))}}]),t}(o.Component);g.propTypes={svgDraw:l.default.func.isRequired,canvasDraw:l.default.func,drawOn:l.default.array.isRequired,clip:l.default.bool.isRequired,edgeClip:l.default.bool.isRequired,interactiveCursorClass:l.default.string,selected:l.default.bool.isRequired,enableDragOnHover:l.default.bool.isRequired,disablePan:l.default.bool.isRequired,canvasToDraw:l.default.func.isRequired,isHover:l.default.func,onClick:l.default.func,onClickWhenHover:l.default.func,onClickOutside:l.default.func,onPan:l.default.func,onPanEnd:l.default.func,onDragStart:l.default.func,onDrag:l.default.func,onDragComplete:l.default.func,onDoubleClick:l.default.func,onDoubleClickWhenHover:l.default.func,onContextMenu:l.default.func,onContextMenuWhenHover:l.default.func,onMouseMove:l.default.func,onMouseDown:l.default.func,onHover:l.default.func,onUnHover:l.default.func,debug:l.default.func},g.defaultProps={svgDraw:(0,u.functor)(null),draw:[],canvasToDraw:function(e){return e.mouseCoord},clip:!0,edgeClip:!1,selected:!1,disablePan:!1,enableDragOnHover:!1,onClickWhenHover:u.noop,onClickOutside:u.noop,onDragStart:u.noop,onMouseMove:u.noop,onMouseDown:u.noop,debug:u.noop},g.contextTypes={width:l.default.number.isRequired,height:l.default.number.isRequired,margin:l.default.object.isRequired,chartId:l.default.oneOfType([l.default.number,l.default.string]),getCanvasContexts:l.default.func,chartCanvasType:l.default.string,xScale:l.default.func.isRequired,xAccessor:l.default.func.isRequired,displayXAccessor:l.default.func.isRequired,plotData:l.default.array.isRequired,fullData:l.default.array.isRequired,chartConfig:l.default.oneOfType([l.default.array,l.default.object]).isRequired,morePropsDecorator:l.default.func,generateSubscriptionId:l.default.func,getMutableState:l.default.func.isRequired,amIOnTop:l.default.func.isRequired,subscribe:l.default.func.isRequired,unsubscribe:l.default.func.isRequired,setCursorClass:l.default.func.isRequired},t.default=g},2314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),l=f(i),u=f(n(2007)),s=n(7594),c=n(6263),g=f(n(3765)),d=n(9285),p=f(n(5)),h=n(5418);function f(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n.saveNode=n.saveNode.bind(n),n.getMoreProps=n.getMoreProps.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"saveNode",value:function(e){this.node=e}},{key:"getMoreProps",value:function(){return this.node.getMoreProps()}},{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.showDomain,a=n.showTicks,o=n.transform,i=n.range,l=n.getScale;(e.save(),e.translate(o[0],o[1]),r&&function(e,t,n){var r=t.orient,a=t.outerTickSize,o=t.stroke,i=t.strokeWidth,l=t.opacity,u="top"===r||"left"===r?-1:1,s="bottom"===r||"top"===r;e.lineWidth=i,e.strokeStyle=(0,h.hexToRGBA)(o,l),e.beginPath(),s?(e.moveTo((0,h.first)(n),u*a),e.lineTo((0,h.first)(n),0),e.lineTo((0,h.last)(n),0),e.lineTo((0,h.last)(n),u*a)):(e.moveTo(u*a,(0,h.first)(n)),e.lineTo(0,(0,h.first)(n)),e.lineTo(0,(0,h.last)(n)),e.lineTo(u*a,(0,h.last)(n)));e.stroke()}(e,this.props,i),a)&&function(e,t){var n=t.tickStroke,r=t.tickStrokeOpacity,a=t.tickLabelFill,o=t.textAnchor,i=t.fontSize,l=t.fontFamily,u=t.fontWeight,s=t.ticks,c=t.showTickLabel;e.strokeStyle=(0,h.hexToRGBA)(n,r),e.fillStyle=n,s.forEach((function(n){!function(e,t,n){var r=n.tickStrokeWidth,a=n.tickStrokeDasharray;e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=r,e.setLineDash((0,h.getStrokeDasharray)(a).split(",")),e.stroke()}(e,n,t)})),e.font=u+" "+i+"px "+l,e.fillStyle=a,e.textAlign="middle"===o?"center":o,c&&s.forEach((function(n){!function(e,t,n){var r=n.canvas_dy,a=n.format;e.beginPath(),e.fillText(a(t.value),t.labelX,t.labelY+r)}(e,n,t)}))}(e,I(this.props,l(t)));e.restore()}},{key:"renderSVG",value:function(e){var t=this.props.className,n=this.props,r=n.showDomain,a=n.showTicks,o=n.range,i=n.getScale,u=a?function(e,t){var n=I(e,t),r=n.tickLabelFill,a=n.tickStroke,o=n.tickStrokeOpacity,i=n.tickStrokeWidth,u=n.tickStrokeDasharray,s=n.textAnchor,c=n.fontSize,g=n.fontFamily,d=n.fontWeight,p=n.ticks,h=n.format,f=n.dy;return l.default.createElement("g",null,p.map((function(e,t){return l.default.createElement(m,{key:t,tickStroke:a,tickLabelFill:r,tickStrokeWidth:i,tickStrokeOpacity:o,tickStrokeDasharray:u,dy:f,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,labelX:e.labelX,labelY:e.labelY,textAnchor:s,fontSize:c,fontWeight:d,fontFamily:g},h(e.value))})))}(this.props,i(e)):null,s=r?function(e,t){var n=e.orient,r=e.outerTickSize,a=e.domainClassName,o=e.fill,i=e.stroke,u=e.strokeWidth,s=e.opacity,c="top"===n||"left"===n?-1:1,g=void 0;g="bottom"===n||"top"===n?"M"+t[0]+","+c*r+"V0H"+t[1]+"V"+c*r:"M"+c*r+","+t[0]+"H0V"+t[1]+"H"+c*r;return l.default.createElement("path",{className:a,d:g,fill:o,opacity:s,stroke:i,strokeWidth:u})}(this.props,o):null;return l.default.createElement("g",{className:t},u,s)}},{key:"render",value:function(){var e=this.props,t=e.bg,n=e.axisZoomCallback,r=e.className,a=e.zoomCursorClassName,o=e.zoomEnabled,i=e.getScale,u=e.inverted,s=this.props,c=s.transform,h=s.getMouseDelta,f=s.edgeClip,C=this.props,I=C.onContextMenu,m=C.onDoubleClick,v=o?l.default.createElement(p.default,{bg:t,getScale:i,getMoreProps:this.getMoreProps,getMouseDelta:h,axisZoomCallback:n,className:r,zoomCursorClassName:a,inverted:u,onContextMenu:I,onDoubleClick:m}):null;return l.default.createElement("g",{transform:"translate("+c[0]+", "+c[1]+")"},v,l.default.createElement(g.default,{ref:this.saveNode,canvasToDraw:d.getAxisCanvas,clip:!1,edgeClip:f,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,drawOn:["pan"]}))}}]),t}(i.Component);function I(e,t){var n=e.orient,o=e.innerTickSize,i=e.tickFormat,l=e.tickPadding,u=e.tickLabelFill,g=e.tickStrokeWidth,d=e.tickStrokeDasharray,p=e.fontSize,f=e.fontFamily,C=e.fontWeight,I=e.showTicks,m=e.flexTicks,v=e.showTickLabel,b=e.ticks,A=e.tickValues,y=e.tickStroke,k=e.tickStrokeOpacity,Z=e.tickInterval,S=e.tickIntervalFunction,w=void 0;if((0,h.isDefined)(A))w="function"===typeof A?A(t.domain()):A;else if((0,h.isDefined)(Z)){var B=t.domain(),x=a(B,2),G=x[0],R=x[1],W=(0,c.range)(G,R,(R-G)/Z);w=S?S(G,R,Z):W}else w=(0,h.isDefined)(t.ticks)?t.ticks(b,m):t.domain();var V=t.tickFormat?t.tickFormat(b):h.identity,F=(0,h.isNotDefined)(i)?V:function(e){return i(e)||""},N="top"===n||"left"===n?-1:1,E=Math.max(o,0)+l,D=void 0,X=void 0,J=void 0,H=void 0;if("bottom"===n||"top"===n){if(X=N<0?"0em":".71em",J=N<0?0:.71*p,H="middle",D=w.map((function(e){var n=Math.round(t(e));return{value:e,x1:n,y1:0,x2:n,y2:N*o,labelX:n,labelY:N*E}})),I&&m){for(var Y=D.map((function(e){return{id:e.value,value:e.value,fy:e.y2,origX:e.x1}})),T=(0,s.forceSimulation)(Y).force("x",(0,s.forceX)((function(e){return e.origX})).strength(1)).force("collide",(0,s.forceCollide)(22)).stop(),M=0;M<100;++M)T.tick();D=(0,h.zipper)().combine((function(e,t){return Math.abs(t.x-t.origX)>.01?r({},e,{x2:t.x,labelX:t.x}):e}))(D,Y)}}else D=w.map((function(e){var n=Math.round(t(e));return{value:e,x1:0,y1:n,x2:N*o,y2:n,labelX:N*E,labelY:n}})),X=".32em",J=.32*p,H=N<0?"end":"start";return{ticks:D,scale:t,tickStroke:y,tickLabelFill:u||y,tickStrokeOpacity:k,tickStrokeWidth:g,tickStrokeDasharray:d,dy:X,canvas_dy:J,textAnchor:H,fontSize:p,fontFamily:f,fontWeight:C,format:F,showTickLabel:v}}function m(e){var t=e.tickLabelFill,n=e.tickStroke,r=e.tickStrokeOpacity,a=e.tickStrokeDasharray,o=e.tickStrokeWidth,i=e.textAnchor,u=e.fontSize,s=e.fontFamily,c=e.fontWeight,g=e.x1,d=e.y1,p=e.x2,f=e.y2,C=e.labelX,I=e.labelY,m=e.dy;return l.default.createElement("g",{className:"tick"},l.default.createElement("line",{shapeRendering:"crispEdges",opacity:r,stroke:n,strokeWidth:o,strokeDasharray:(0,h.getStrokeDasharray)(a),x1:g,y1:d,x2:p,y2:f}),l.default.createElement("text",{dy:m,x:C,y:I,fill:t,fontSize:u,fontWeight:c,fontFamily:s,textAnchor:i},e.children))}C.propTypes={innerTickSize:u.default.number,outerTickSize:u.default.number,tickFormat:u.default.func,tickPadding:u.default.number,tickSize:u.default.number,ticks:u.default.number,tickLabelFill:u.default.string,tickStroke:u.default.string,tickStrokeOpacity:u.default.number,tickStrokeWidth:u.default.number,tickStrokeDasharray:u.default.oneOf(h.strokeDashTypes),tickValues:u.default.oneOfType([u.default.array,u.default.func]),tickInterval:u.default.number,tickIntervalFunction:u.default.func,showDomain:u.default.bool,showTicks:u.default.bool,className:u.default.string,axisZoomCallback:u.default.func,zoomEnabled:u.default.bool,inverted:u.default.bool,zoomCursorClassName:u.default.string,transform:u.default.arrayOf(u.default.number).isRequired,range:u.default.arrayOf(u.default.number).isRequired,getMouseDelta:u.default.func.isRequired,getScale:u.default.func.isRequired,bg:u.default.object.isRequired,edgeClip:u.default.bool.isRequired,onContextMenu:u.default.func,onDoubleClick:u.default.func},C.defaultProps={zoomEnabled:!1,zoomCursorClassName:"",edgeClip:!1},m.propTypes={children:u.default.string.isRequired,x1:u.default.number.isRequired,y1:u.default.number.isRequired,x2:u.default.number.isRequired,y2:u.default.number.isRequired,labelX:u.default.number.isRequired,labelY:u.default.number.isRequired,dy:u.default.string.isRequired,tickStroke:u.default.string,tickLabelFill:u.default.string,tickStrokeWidth:u.default.number,tickStrokeOpacity:u.default.number,tickStrokeDasharray:u.default.oneOf(h.strokeDashTypes),textAnchor:u.default.string,fontSize:u.default.number,fontFamily:u.default.string,fontWeight:u.default.oneOfType([u.default.string,u.default.number])},t.default=C},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=c(a),i=c(n(2007)),l=n(4686),u=n(6263),s=n(5418);function c(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDragStartMouse=n.handleDragStartMouse.bind(n),n.handleDragStartTouch=n.handleDragStartTouch.bind(n),n.handleDrag=n.handleDrag.bind(n),n.handleDragEnd=n.handleDragEnd.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.saveNode=n.saveNode.bind(n),n.state={startPosition:null},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"saveNode",value:function(e){this.node=e}},{key:"handleRightClick",value:function(e){e.stopPropagation(),e.preventDefault();var t=this.props.onContextMenu,n=(0,s.mousePosition)(e,this.node.getBoundingClientRect());(0,l.select)((0,s.d3Window)(this.node)).on(s.MOUSEMOVE,null).on(s.MOUSEUP,null),this.setState({startPosition:null}),t(n,e),this.contextMenuClicked=!0}},{key:"handleDragStartMouse",value:function(e){this.mouseInteraction=!0;var t=this.props,n=(0,t.getScale)((0,t.getMoreProps)());if(this.dragHappened=!1,n.invert){(0,l.select)((0,s.d3Window)(this.node)).on(s.MOUSEMOVE,this.handleDrag,!1).on(s.MOUSEUP,this.handleDragEnd,!1);var r=(0,s.mousePosition)(e);this.setState({startPosition:{startXY:r,startScale:n}})}e.preventDefault()}},{key:"handleDragStartTouch",value:function(e){this.mouseInteraction=!1;var t=this.props,n=(0,t.getScale)((0,t.getMoreProps)());if(this.dragHappened=!1,1===e.touches.length&&n.invert){(0,l.select)((0,s.d3Window)(this.node)).on(s.TOUCHMOVE,this.handleDrag).on(s.TOUCHEND,this.handleDragEnd);var r=(0,s.touchPosition)((0,s.getTouchProps)(e.touches[0]),e);this.setState({startPosition:{startXY:r,startScale:n}})}}},{key:"handleDrag",value:function(){var e=this.state.startPosition,t=this.props,n=t.getMouseDelta,r=t.inverted;if(this.dragHappened=!0,(0,s.isDefined)(e)){var a=e.startScale,o=n(e.startXY,this.mouseInteraction?(0,l.mouse)(this.node):(0,l.touches)(this.node)[0]),i=(0,u.mean)(a.range()),c=a.range().map((function(e){return r?e-(0,s.sign)(e-i)*o:e+(0,s.sign)(e-i)*o})),g=c.map(a.invert);if((0,s.sign)((0,s.last)(a.range())-(0,s.first)(a.range()))===(0,s.sign)((0,s.last)(c)-(0,s.first)(c)))(0,this.props.axisZoomCallback)(g)}}},{key:"handleDragEnd",value:function(){var e=this;if(!this.dragHappened)if(this.clicked){var t=l.event,n=this.mouseInteraction?(0,l.mouse)(this.node):(0,l.touches)(this.node)[0];(0,this.props.onDoubleClick)(n,t)}else this.clicked=!0,setTimeout((function(){e.clicked=!1}),300);(0,l.select)((0,s.d3Window)(this.node)).on(s.MOUSEMOVE,null).on(s.MOUSEUP,null).on(s.TOUCHMOVE,null).on(s.TOUCHEND,null),this.setState({startPosition:null})}},{key:"render",value:function(){var e=this.props,t=e.bg,n=e.className,r=e.zoomCursorClassName,a=(0,s.isDefined)(this.state.startPosition)?r:"react-stockcharts-default-cursor";return o.default.createElement("rect",{className:"react-stockcharts-enable-interaction "+a+" "+n,ref:this.saveNode,x:t.x,y:t.y,opacity:0,height:t.h,width:t.w,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}]),t}(a.Component);g.propTypes={innerTickSize:i.default.number,outerTickSize:i.default.number,tickFormat:i.default.func,tickPadding:i.default.number,tickSize:i.default.number,ticks:i.default.number,tickValues:i.default.array,showDomain:i.default.bool,showTicks:i.default.bool,className:i.default.string,axisZoomCallback:i.default.func,inverted:i.default.bool,bg:i.default.object.isRequired,zoomCursorClassName:i.default.string.isRequired,getMoreProps:i.default.func.isRequired,getScale:i.default.func.isRequired,getMouseDelta:i.default.func.isRequired,onDoubleClick:i.default.func.isRequired,onContextMenu:i.default.func.isRequired},g.defaultProps={onDoubleClick:s.noop,onContextMenu:s.noop,inverted:!0},t.default=g},6317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=s(o),l=s(n(2007)),u=s(n(2314));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.axisZoomCallback=r.axisZoomCallback.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"axisZoomCallback",value:function(e){(0,this.context.xAxisZoom)(e)}},{key:"render",value:function(){var e=this.props.showTicks,t=function(e,t){var n=e.axisAt,r=e.xZoomHeight,a=e.orient,o=t.chartConfig,i=o.width,l=o.height,u=void 0;u="top"===n?0:"bottom"===n?l:"middle"===n?l/2:n;return{transform:[0,u],range:[0,i],getScale:g,bg:{x:0,y:"top"===a?-r:0,h:r,w:i}}}(this.props,this.context);return i.default.createElement(u.default,r({},this.props,t,{x:!0,zoomEnabled:this.props.zoomEnabled&&e,axisZoomCallback:this.axisZoomCallback,zoomCursorClassName:"react-stockcharts-ew-resize-cursor"}))}}]),t}(o.Component);function g(e){var t=e.xScale,n=e.width;if(t.invert){var r=[0,n],a=r.map(t.invert);return t.copy().domain(a).range(r)}return t}c.propTypes={axisAt:l.default.oneOfType([l.default.oneOf(["top","bottom","middle"]),l.default.number]).isRequired,orient:l.default.oneOf(["top","bottom"]).isRequired,innerTickSize:l.default.number,outerTickSize:l.default.number,tickFormat:l.default.func,tickPadding:l.default.number,tickSize:l.default.number,ticks:l.default.number,tickValues:l.default.array,showTicks:l.default.bool,className:l.default.string,zoomEnabled:l.default.bool,onContextMenu:l.default.func,onDoubleClick:l.default.func},c.defaultProps={showTicks:!0,showTickLabel:!0,showDomain:!0,className:"react-stockcharts-x-axis",ticks:10,outerTickSize:0,fill:"none",stroke:"#000000",strokeWidth:1,opacity:1,domainClassName:"react-stockcharts-axis-domain",innerTickSize:5,tickPadding:6,tickStroke:"#000000",tickStrokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontWeight:400,xZoomHeight:25,zoomEnabled:!0,getMouseDelta:function(e,t){return e[0]-t[0]}},c.contextTypes={chartConfig:l.default.object.isRequired,xAxisZoom:l.default.func.isRequired},t.default=c},8090:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=s(o),l=s(n(2007)),u=s(n(2314));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.axisZoomCallback=r.axisZoomCallback.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"axisZoomCallback",value:function(e){var t=this.context,n=t.chartId;(0,t.yAxisZoom)(n,e)}},{key:"render",value:function(){var e=function(e,t){var n=e.axisAt,r=e.yZoomWidth,a=e.orient,o=t.chartConfig,i=o.width,l=o.height,u=void 0;u="left"===n?0:"right"===n?i:"middle"===n?i/2:n;return{transform:[u,0],range:[0,l],getScale:g,bg:{x:"left"===a?-r:0,y:0,h:l,w:r},zoomEnabled:t.chartConfig.yPan}}(this.props,this.context),t=e.zoomEnabled,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["zoomEnabled"]);return i.default.createElement(u.default,r({},this.props,n,{zoomEnabled:this.props.zoomEnabled&&t,edgeClip:!0,axisZoomCallback:this.axisZoomCallback,zoomCursorClassName:"react-stockcharts-ns-resize-cursor"}))}}]),t}(o.Component);function g(e){var t=e.chartConfig,n=t.yScale,r=t.flipYScale,a=t.height;if(n.invert){var o=r?[0,a]:[a,0],i=o.map(n.invert);return n.copy().domain(i).range(o)}return n}c.propTypes={axisAt:l.default.oneOfType([l.default.oneOf(["left","right","middle"]),l.default.number]).isRequired,orient:l.default.oneOf(["left","right"]).isRequired,innerTickSize:l.default.number,outerTickSize:l.default.number,tickFormat:l.default.func,tickPadding:l.default.number,tickSize:l.default.number,ticks:l.default.number,yZoomWidth:l.default.number,tickValues:l.default.array,showTicks:l.default.bool,className:l.default.string,zoomEnabled:l.default.bool,onContextMenu:l.default.func,onDoubleClick:l.default.func},c.defaultProps={showTicks:!0,showTickLabel:!0,showDomain:!0,className:"react-stockcharts-y-axis",ticks:10,outerTickSize:0,domainClassName:"react-stockcharts-axis-domain",fill:"none",stroke:"#FFFFFF",strokeWidth:1,opacity:1,innerTickSize:5,tickPadding:6,tickStroke:"#000000",tickStrokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontWeight:400,yZoomWidth:40,zoomEnabled:!0,getMouseDelta:function(e,t){return e[1]-t[1]}},c.contextTypes={yAxisZoom:l.default.func.isRequired,chartId:l.default.oneOfType([l.default.number,l.default.string]).isRequired,chartConfig:l.default.object.isRequired},t.default=c},2771:function(e,t,n){"use strict";var r=n(6317);Object.defineProperty(t,"Kc",{enumerable:!0,get:function(){return o(r).default}});var a=n(8090);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"B2",{enumerable:!0,get:function(){return o(a).default}})},2010:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(207),o=(r=a)&&r.__esModule?r:{default:r},i=n(5418);var l={save:function(e,t,n,r){o.default.svgAsDataUri(t.getElementsByTagName("svg")[0],{},(function(a){var o=new Image;o.onload=function(){var a=e.createElement("canvas");a.width=o.width,a.height=o.height;var l=a.getContext("2d");(0,i.isDefined)(n)&&(l.fillStyle=n,l.fillRect(0,0,a.width,a.height));for(var u=t.getElementsByTagName("canvas"),s=0;s<u.length;s++){var c=u[s];if((0,i.isDefined)(c)){var g=c.parentNode.parentNode.getBoundingClientRect(),d=c.getBoundingClientRect();l.drawImage(c,d.left-g.left+0,d.top-g.top+0)}}l.drawImage(o,0,0),r(a.toDataURL("image/png"))},o.src=a}))},saveWithWhiteBG:function(e,t,n){return this.saveWithBG(e,t,"white",n)},saveWithDarkBG:function(e,t,n){return this.saveWithBG(e,t,"#303030",n)},saveWithBG:function(e,t,n,r){return this.save(e,t,n,r)},saveChartAsImage:function(e){this.saveWithWhiteBG(document,e,(function(e){var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","Chart.png"),document.body.appendChild(t),t.addEventListener("click",(function(){t.parentNode.removeChild(t)})),t.click()}))}};t.default=l},8891:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=l(a),i=l(n(2007));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={type:n.props.type},n.handleTypeChange=n.handleTypeChange.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"handleTypeChange",value:function(e){this.setState({type:e.target.value})}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement("label",null,"Type: "),o.default.createElement("select",{name:"type",id:"type",onChange:this.handleTypeChange,value:this.state.type},o.default.createElement("option",{value:"svg"},"svg"),o.default.createElement("option",{value:"hybrid"},"canvas + svg")),o.default.createElement("div",{style:this.props.style},this.props.children(this.state.type)))}}]),t}(a.Component);u.propTypes={type:i.default.oneOf(["svg","hybrid"]),children:i.default.func.isRequired,style:i.default.object.isRequired},u.defaultProps={type:"hybrid",style:{}},t.default=u},9816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minWidth,s=void 0===n?100:n,h=t.minHeight,f=void 0===h?100:h,C=t.ratio,I=t.width,m=t.height;function v(e){var t=e.parentNode.clientWidth,n=e.parentNode.clientHeight;return{width:(0,u.isDefined)(I)?I:Math.max(t,s),height:(0,u.isDefined)(m)?m:Math.max(n,f)}}var b=function(t){function n(e){c(this,n);var t=g(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleWindowResize=t.handleWindowResize.bind(t),t.getWrappedInstance=t.getWrappedInstance.bind(t),t.saveNode=t.saveNode.bind(t),t.setTestCanvas=t.setTestCanvas.bind(t),t.state={},t}return d(n,t),a(n,[{key:"saveNode",value:function(e){this.node=e}},{key:"setTestCanvas",value:function(e){this.testCanvas=e}},{key:"getRatio",value:function(){if((0,u.isDefined)(this.testCanvas)){var e=this.testCanvas.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}return 1}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize);var e=v(this.node);this.setState(r({},e,{ratio:(0,u.isDefined)(C)?C:this.getRatio()}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"handleWindowResize",value:function(){var e=l.default.findDOMNode(this.node);this.setState(v(e))}},{key:"getWrappedInstance",value:function(){return this.node}},{key:"render",value:function(){var t={ref:this.saveNode};return this.state.width?i.default.createElement(e,r({height:this.state.height,width:this.state.width,ratio:this.state.ratio},this.props,t)):i.default.createElement("div",t,i.default.createElement("canvas",{ref:this.setTestCanvas}))}}]),n}(o.Component);return b.displayName="fitDimensions("+p(e)+")",b};var o=n(2791),i=s(o),l=s(n(4164)),u=n(5418);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){return e.displayName||e.name||"Series"}},3346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=function(o){function i(e){s(this,i);var t=c(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.handleWindowResize=t.handleWindowResize.bind(t),t.getWrappedInstance=t.getWrappedInstance.bind(t),t.saveNode=t.saveNode.bind(t),t.setTestCanvas=t.setTestCanvas.bind(t),t.state={},t}return g(i,o),a(i,[{key:"saveNode",value:function(e){this.node=e}},{key:"setTestCanvas",value:function(e){this.testCanvas=e}},{key:"getRatio",value:function(){if((0,u.isDefined)(this.testCanvas)){var e=this.testCanvas.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}return 1}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize(),this.setState({ratio:this.getRatio()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"handleWindowResize",value:function(){var e=this;this.setState({width:0},(function(){var t=e.node,r=window.getComputedStyle(t.parentNode),a=r.width,o=r.paddingLeft,i=r.paddingRight,l=parseFloat(a)-(parseFloat(o)+parseFloat(i));e.setState({width:Math.round(Math.max(l,n))})}))}},{key:"getWrappedInstance",value:function(){return this.node}},{key:"render",value:function(){var n=t?{ref:this.saveNode}:{};return this.state.width?l.default.createElement(e,r({width:this.state.width,ratio:this.state.ratio},this.props,n)):l.default.createElement("div",n,l.default.createElement("canvas",{ref:this.setTestCanvas}))}}]),i}(i.Component);return o.displayName="fitWidth("+d(e)+")",o};var o,i=n(2791),l=(o=i)&&o.__esModule?o:{default:o},u=n(5418);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){return e.displayName||e.name||"Series"}},464:function(e,t,n){"use strict";var r=n(8891);var a=n(2010);var o=n(3346);Object.defineProperty(t,"V6",{enumerable:!0,get:function(){return l(o).default}});var i=n(9816);function l(e){return e&&e.__esModule?e:{default:e}}},5955:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=c(a),i=c(n(2007)),l=c(n(4223)),u=c(n(139)),s=n(5418);function c(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.renderClip=n.renderClip.bind(n),n.topClip=n.topClip.bind(n),n.bottomClip=n.bottomClip.bind(n),n.baseAt=n.baseAt.bind(n);var r=String(Math.round(1e4*Math.random()*1e4));n.clipPathId1="alternating-area-clip-"+r;var a=String(Math.round(1e4*Math.random()*1e4));return n.clipPathId2="alternating-area-clip-"+a,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"topClip",value:function(e,t){var n=t.chartConfig,r=this.props.baseAt,a=n.yScale,o=n.width;e.beginPath(),e.rect(0,0,o,a(r)),e.clip()}},{key:"bottomClip",value:function(e,t){var n=t.chartConfig,r=this.props.baseAt,a=n.yScale,o=n.width,i=n.height;e.beginPath(),e.rect(0,a(r),o,i-a(r)),e.clip()}},{key:"renderClip",value:function(e){var t=e.chartConfig,n=this.props.baseAt,r=t.yScale,a=t.width,i=t.height;return o.default.createElement("defs",null,o.default.createElement("clipPath",{id:this.clipPathId1},o.default.createElement("rect",{x:0,y:0,width:a,height:r(n)})),o.default.createElement("clipPath",{id:this.clipPathId2},o.default.createElement("rect",{x:0,y:r(n),width:a,height:i-r(n)})))}},{key:"baseAt",value:function(e){return e(this.props.baseAt)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.yAccessor,r=e.interpolation,a=this.props,i=a.stroke,s=a.strokeWidth,c=a.strokeOpacity,g=a.strokeDasharray,d=a.fill,p=a.fillOpacity,h={clipPath:"url(#"+this.clipPathId1+")"},f={clipPath:"url(#"+this.clipPathId2+")"};return o.default.createElement("g",{className:t},o.default.createElement(u.default,null,this.renderClip),o.default.createElement(l.default,{style:h,canvasClip:this.topClip,yAccessor:n,interpolation:r,baseAt:this.baseAt,fill:d.top,opacity:p.top,stroke:i.top,strokeOpacity:c.top,strokeDasharray:g.top,strokeWidth:s.top}),o.default.createElement(l.default,{style:f,canvasClip:this.bottomClip,yAccessor:n,interpolation:r,baseAt:this.baseAt,fill:d.bottom,opacity:p.bottom,stroke:i.bottom,strokeOpacity:c.bottom,strokeDasharray:g.bottom,strokeWidth:s.bottom}))}}]),t}(a.Component);g.propTypes={stroke:i.default.shape({top:i.default.string,bottom:i.default.string}),strokeWidth:i.default.shape({top:i.default.number,bottom:i.default.number}),strokeOpacity:i.default.shape({top:i.default.number,bottom:i.default.number}),fill:i.default.shape({top:i.default.string,bottom:i.default.string}),fillOpacity:i.default.shape({top:i.default.number,bottom:i.default.number}),strokeDasharray:i.default.shape({top:i.default.oneOf(s.strokeDashTypes),bottom:i.default.oneOf(s.strokeDashTypes)}).isRequired,className:i.default.string,yAccessor:i.default.func.isRequired,baseAt:i.default.number.isRequired,interpolation:i.default.func},g.defaultProps={stroke:{top:"#38C172",bottom:"#E3342F"},strokeWidth:{top:2,bottom:2},strokeOpacity:{top:1,bottom:1},fill:{top:"#A2F5BF",bottom:"#EF5753"},fillOpacity:{top:.5,bottom:.5},strokeDasharray:{top:"Solid",bottom:"Solid"},className:"react-stockcharts-alternating-area"},t.default=g},2012:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=g(a),i=g(n(2007)),l=n(7670),u=g(n(3765)),s=n(9285),c=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.yAccessor,a=n.defined,o=n.base,i=n.canvasGradient,u=this.props,s=u.fill,g=u.stroke,d=u.opacity,p=u.interpolation,h=u.canvasClip,f=t.xScale,C=t.chartConfig.yScale,I=t.plotData,m=t.xAccessor;h&&(e.save(),h(e,t)),e.fillStyle=null!=i?i(t,e):(0,c.hexToRGBA)(s,d),e.strokeStyle=g,e.beginPath();var v=(0,c.functor)(o),b=(0,l.area)().defined((function(e){return a(r(e))})).x((function(e){return Math.round(f(m(e)))})).y0((function(e){return v(C,e,t)})).y1((function(e){return Math.round(C(r(e)))})).context(e);(0,c.isDefined)(p)&&b.curve(p),b(I),e.fill(),h&&e.restore()}},{key:"renderSVG",value:function(e){var t=this.props,n=t.yAccessor,r=t.defined,a=t.base,i=t.style,u=this.props,s=u.stroke,g=u.fill,d=u.className,p=u.opacity,h=u.interpolation,f=e.xScale,C=e.chartConfig.yScale,I=e.plotData,m=e.xAccessor,v=(0,c.functor)(a),b=(0,l.area)().defined((function(e){return r(n(e))})).x((function(e){return Math.round(f(m(e)))})).y0((function(t){return v(C,t,e)})).y1((function(e){return Math.round(C(n(e)))}));(0,c.isDefined)(h)&&b.curve(h);var A=b(I),y=d.concat((0,c.isDefined)(s)?"":" line-stroke");return o.default.createElement("path",{style:i,d:A,stroke:s,fill:(0,c.hexToRGBA)(g,p),className:y})}},{key:"render",value:function(){return o.default.createElement(u.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:s.getAxisCanvas,drawOn:["pan"]})}}]),t}(a.Component);d.propTypes={className:i.default.string,yAccessor:i.default.func.isRequired,stroke:i.default.string,fill:i.default.string,opacity:i.default.number,defined:i.default.func,base:i.default.oneOfType([i.default.func,i.default.number]),interpolation:i.default.func,canvasClip:i.default.func,style:i.default.object,canvasGradient:i.default.func},d.defaultProps={className:"line ",fill:"none",opacity:1,defined:function(e){return!isNaN(e)},base:function(e){return(0,c.first)(e.range())}},t.default=d},4223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(2791)),a=u(n(2007)),o=u(n(7416)),i=u(n(2012)),l=n(5418);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.yAccessor,n=e.baseAt,a=e.className,l=e.opacity,u=e.stroke,s=e.strokeWidth,c=e.strokeOpacity,g=e.strokeDasharray,d=e.canvasGradient,p=e.fill,h=e.interpolation,f=e.style,C=e.canvasClip;return r.default.createElement("g",{className:a},r.default.createElement(i.default,{yAccessor:t,interpolation:h,base:n,canvasGradient:d,fill:p,opacity:l,style:f,canvasClip:C,stroke:"none"}),r.default.createElement(o.default,{yAccessor:t,stroke:u,strokeWidth:s,strokeOpacity:c,strokeDasharray:g,interpolation:h,style:f,canvasClip:C,fill:"none",hoverHighlight:!1}))}s.propTypes={stroke:a.default.string,strokeWidth:a.default.number,canvasGradient:a.default.func,fill:a.default.string.isRequired,strokeOpacity:a.default.number.isRequired,opacity:a.default.number.isRequired,className:a.default.string,yAccessor:a.default.func.isRequired,baseAt:a.default.func,interpolation:a.default.func,canvasClip:a.default.func,style:a.default.object,strokeDasharray:a.default.oneOf(l.strokeDashTypes)},s.defaultProps={stroke:"#4682B4",strokeWidth:1,strokeOpacity:1,strokeDasharray:"Solid",opacity:.5,fill:"#4682B4",className:"react-stockcharts-area"},t.default=s},3105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=d(a),i=d(n(2007)),l=d(n(3765)),u=n(9285),s=n(250),c=d(s),g=n(5418);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){if(this.props.swapScales){var n=t.xAccessor;(0,s.drawOnCanvasHelper)(e,this.props,t,n,s.identityStack)}else{var r=h(this.props,t);(0,s.drawOnCanvas2)(this.props,e,r)}}},{key:"renderSVG",value:function(e){if(this.props.swapScales){var t=e.xAccessor;return o.default.createElement("g",null,(0,s.svgHelper)(this.props,e,t,s.identityStack))}var n=h(this.props,e);return o.default.createElement("g",null,(0,s.getBarsSVG2)(this.props,n))}},{key:"render",value:function(){var e=this.props.clip;return o.default.createElement(l.default,{clip:e,svgDraw:this.renderSVG,canvasToDraw:u.getAxisCanvas,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}}]),t}(a.Component);function h(e,t){var n=e.baseAt,r=e.fill,a=e.stroke,o=e.yAccessor,i=t.xScale,l=t.xAccessor,u=t.plotData,s=t.chartConfig.yScale,c=(0,g.functor)(r),d=(0,g.functor)(n),p=(0,g.functor)(e.width)(e,{xScale:i,xAccessor:l,plotData:u}),h=Math.floor(.5*p);return u.filter((function(e){return(0,g.isDefined)(o(e))})).map((function(e){var t=o(e),n=s(t),r=Math.round(i(l(e)))-h,u=d(i,s,e)-s(t);return u<0&&(n+=u,u=-u),{x:r,y:Math.round(n),height:Math.round(u),width:2*h,fill:c(e,0),stroke:a?c(e,0):"none"}}))}p.propTypes={baseAt:i.default.oneOfType([i.default.number,i.default.func]),stroke:i.default.bool,width:i.default.oneOfType([i.default.number,i.default.func]),yAccessor:i.default.func.isRequired,opacity:i.default.number,fill:i.default.oneOfType([i.default.func,i.default.string]),className:i.default.oneOfType([i.default.func,i.default.string]),clip:i.default.bool,swapScales:i.default.bool},p.defaultProps=c.default.defaultProps,t.default=p},2353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=s(a),i=s(n(2007)),l=s(n(7416)),u=s(n(2012));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.yAccessorForTop=n.yAccessorForTop.bind(n),n.yAccessorForMiddle=n.yAccessorForMiddle.bind(n),n.yAccessorForBottom=n.yAccessorForBottom.bind(n),n.yAccessorForScalledBottom=n.yAccessorForScalledBottom.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"yAccessorForTop",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).top}},{key:"yAccessorForMiddle",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).middle}},{key:"yAccessorForBottom",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).bottom}},{key:"yAccessorForScalledBottom",value:function(e,t){var n=this.props.yAccessor;return e(n(t)&&n(t).bottom)}},{key:"render",value:function(){var e=this.props,t=e.areaClassName,n=e.className,r=e.opacity,a=this.props,i=a.stroke,s=a.fill;return o.default.createElement("g",{className:n},o.default.createElement(l.default,{yAccessor:this.yAccessorForTop,stroke:i.top,fill:"none"}),o.default.createElement(l.default,{yAccessor:this.yAccessorForMiddle,stroke:i.middle,fill:"none"}),o.default.createElement(l.default,{yAccessor:this.yAccessorForBottom,stroke:i.bottom,fill:"none"}),o.default.createElement(u.default,{className:t,yAccessor:this.yAccessorForTop,base:this.yAccessorForScalledBottom,stroke:"none",fill:s,opacity:r}))}}]),t}(a.Component);c.propTypes={yAccessor:i.default.func.isRequired,className:i.default.string,areaClassName:i.default.string,opacity:i.default.number,type:i.default.string,stroke:i.default.shape({top:i.default.string.isRequired,middle:i.default.string.isRequired,bottom:i.default.string.isRequired}).isRequired,fill:i.default.string.isRequired},c.defaultProps={className:"react-stockcharts-bollinger-band-series",areaClassName:"react-stockcharts-bollinger-band-series-area",opacity:.2},t.default=c},2463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3904),o=n(2791),i=g(o),l=g(n(2007)),u=g(n(3765)),s=n(9285),c=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){!function(e,t,n){var r=t.opacity,o=t.candleStrokeWidth,i=n.xScale,l=n.chartConfig.yScale,u=n.plotData,s=n.xAccessor,g=p(t,s,i,l,u);(0,a.nest)().key((function(e){return e.wick.stroke})).entries(g).forEach((function(t){var n=t.key,r=t.values;e.strokeStyle=n,e.fillStyle=n,r.forEach((function(t){var n=t.wick;e.fillRect(n.x-.5,n.y1,1,n.y2-n.y1),e.fillRect(n.x-.5,n.y3,1,n.y4-n.y3)}))})),(0,a.nest)().key((function(e){return e.stroke})).key((function(e){return e.fill})).entries(g).forEach((function(t){var n=t.key,a=t.values;"none"!==n&&(e.strokeStyle=n,e.lineWidth=o),a.forEach((function(t){var a=t.key,o=t.values,i=(0,c.head)(o).width<=1?a:(0,c.hexToRGBA)(a,r);e.fillStyle=i,o.forEach((function(t){t.width<=1?e.fillRect(t.x-.5,t.y,1,t.height):0===t.height?e.fillRect(t.x,t.y-.5,t.width,1):(e.fillRect(t.x,t.y,t.width,t.height),"none"!==n&&e.strokeRect(t.x,t.y,t.width,t.height))}))}))}))}(e,this.props,t)}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,r=t.wickClassName,a=t.candleClassName,o=e.xScale,l=e.chartConfig.yScale,u=e.plotData,s=e.xAccessor,c=p(this.props,s,o,l,u);return i.default.createElement("g",{className:n},i.default.createElement("g",{className:r,key:"wicks"},function(e){return e.map((function(e,t){var n=e.wick;return i.default.createElement("path",{key:t,className:e.className,stroke:n.stroke,d:"M"+n.x+","+n.y1+" L"+n.x+","+n.y2+" M"+n.x+","+n.y3+" L"+n.x+","+n.y4})}))}(c)),i.default.createElement("g",{className:a,key:"candles"},function(e,t){var n=e.opacity,r=e.candleStrokeWidth;return t.map((function(e,t){return e.width<=1?i.default.createElement("line",{className:e.className,key:t,x1:e.x,y1:e.y,x2:e.x,y2:e.y+e.height,stroke:e.fill}):0===e.height?i.default.createElement("line",{key:t,x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height,stroke:e.fill}):i.default.createElement("rect",{key:t,className:e.className,fillOpacity:n,x:e.x,y:e.y,width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:r})}))}(this.props,c)))}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(u.default,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:s.getAxisCanvas,drawOn:["pan"]})}}]),t}(o.Component);function p(e,t,n,r,a){for(var o=e.wickStroke,i=(0,c.functor)(o),l=e.classNames,u=e.fill,s=e.stroke,g=e.yAccessor,d=(0,c.functor)(l),p=(0,c.functor)(u),h=(0,c.functor)(s),f=.5*(0,c.functor)(e.width)(e,{xScale:n,xAccessor:t,plotData:a}),C=f>.7?Math.round(f):Math.floor(f),I=[],m=0;m<a.length;m++){var v=a[m];if((0,c.isDefined)(g(v).close)){var b=Math.round(n(t(v))),A=g(v),y=Math.round(r(Math.max(A.open,A.close))),k=Math.round(Math.abs(r(A.open)-r(A.close)));I.push({x:b-C,y:y,wick:{stroke:i(A),x:b,y1:Math.round(r(A.high)),y2:y,y3:y+k,y4:Math.round(r(A.low))},height:k,width:2*C,className:d(A),fill:p(A),stroke:h(A),direction:A.close-A.open})}}return I}d.propTypes={className:l.default.string,wickClassName:l.default.string,candleClassName:l.default.string,widthRatio:l.default.number,width:l.default.oneOfType([l.default.number,l.default.func]),classNames:l.default.oneOfType([l.default.func,l.default.string]),fill:l.default.oneOfType([l.default.func,l.default.string]),stroke:l.default.oneOfType([l.default.func,l.default.string]),wickStroke:l.default.oneOfType([l.default.func,l.default.string]),yAccessor:l.default.func,clip:l.default.bool},d.defaultProps={className:"react-stockcharts-candlestick",wickClassName:"react-stockcharts-candlestick-wick",candleClassName:"react-stockcharts-candlestick-candle",yAccessor:function(e){return{open:e.open,high:e.high,low:e.low,close:e.close}},classNames:function(e){return e.close>e.open?"up":"down"},width:c.plotDataLengthBarWidth,wickStroke:"#000000",fill:function(e){return e.close>e.open?"#6BA583":"#FF0000"},stroke:"#000000",candleStrokeWidth:.5,widthRatio:.8,opacity:.5,clip:!0},t.default=d},2840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2791)),a=i(n(2007)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.className,n=e.stroke,a=e.strokeWidth,i=e.opacity,l=e.fill,u=e.point,s=e.r,c=(0,o.functor)(s)(u.datum);return r.default.createElement("circle",{className:t,cx:u.x,cy:u.y,stroke:n,strokeWidth:a,fillOpacity:i,fill:l,r:c})}l.propTypes={stroke:a.default.string,fill:a.default.string.isRequired,opacity:a.default.number.isRequired,point:a.default.shape({x:a.default.number.isRequired,y:a.default.number.isRequired,datum:a.default.object.isRequired}).isRequired,className:a.default.string,strokeWidth:a.default.number,r:a.default.oneOfType([a.default.number,a.default.func]).isRequired},l.defaultProps={stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-circle"},l.drawOnCanvas=function(e,t,n){var r=e.stroke,a=e.fill,i=e.opacity,u=e.strokeWidth;n.strokeStyle=r,n.lineWidth=u,"none"!==a&&(n.fillStyle=(0,o.hexToRGBA)(a,i)),l.drawOnCanvasWithNoStateChange(e,t,n)},l.drawOnCanvasWithNoStateChange=function(e,t,n){var r=e.r,a=(0,o.functor)(r)(t.datum);n.moveTo(t.x,t.y),n.beginPath(),n.arc(t.x,t.y,a,0,2*Math.PI,!1),n.stroke(),n.fill()},t.default=l},8812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=s(a),i=s(n(2007)),l=s(n(2808)),u=s(n(4212));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fillForEachBar=n.fillForEachBar.bind(n),n.yAccessorTop=n.yAccessorTop.bind(n),n.yAccessorBullTop=n.yAccessorBullTop.bind(n),n.yAccessorBearTop=n.yAccessorBearTop.bind(n),n.yAccessorBullBottom=n.yAccessorBullBottom.bind(n),n.yAccessorBearBottom=n.yAccessorBearBottom.bind(n),n.yAccessorForBarBase=n.yAccessorForBarBase.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"yAccessorTop",value:function(e){var t=this.props.yAccessor;return t(e)&&Math.max(t(e).bullPower,0)}},{key:"yAccessorBullTop",value:function(e){var t=this.props.yAccessor;return t(e)&&(t(e).bullPower>0?t(e).bullPower:void 0)}},{key:"yAccessorBearTop",value:function(e){var t=this.props.yAccessor;return t(e)&&(t(e).bearPower>0?t(e).bearPower:void 0)}},{key:"yAccessorBullBottom",value:function(e){var t=this.props.yAccessor;return t(e)&&(t(e).bullPower<0?0:void 0)}},{key:"yAccessorBearBottom",value:function(e){var t=this.props.yAccessor;return t(e)&&(t(e).bullPower<0||t(e).bullPower*t(e).bearPower<0?Math.min(0,t(e).bullPower):void 0)}},{key:"yAccessorForBarBase",value:function(e,t,n){var r=this.props.yAccessor;return t(r(n)&&Math.min(r(n).bearPower,0))}},{key:"fillForEachBar",value:function(e,t){var n=this.props,r=n.bullPowerFill,a=n.bearPowerFill;return t%2===0?r:a}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.opacity,r=e.stroke,a=e.straightLineStroke,i=e.straightLineOpacity,s=e.widthRatio,c=this.props.clip;return o.default.createElement("g",{className:t},o.default.createElement(l.default,{baseAt:this.yAccessorForBarBase,className:"react-stockcharts-elderray-bar",stroke:r,fill:this.fillForEachBar,opacity:n,widthRatio:s,clip:c,yAccessor:[this.yAccessorBullTop,this.yAccessorBearTop,this.yAccessorBullBottom,this.yAccessorBearBottom]}),o.default.createElement(u.default,{className:"react-stockcharts-elderray-straight-line",yValue:0,stroke:a,opacity:i}))}}]),t}(a.Component);c.propTypes={className:i.default.string,yAccessor:i.default.func,opacity:i.default.number,stroke:i.default.bool,bullPowerFill:i.default.string,bearPowerFill:i.default.string,straightLineStroke:i.default.string,straightLineOpacity:i.default.number,widthRatio:i.default.number,clip:i.default.bool.isRequired},c.defaultProps={className:"react-stockcharts-elderray-series",straightLineStroke:"#000000",straightLineOpacity:.3,opacity:.5,stroke:!0,bullPowerFill:"#6BA583",bearPowerFill:"#FF0000",widthRatio:.8,clip:!0},t.default=c},5001:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=d(o),l=d(n(2007)),u=d(n(3765)),s=n(9285),c=n(250),g=d(c);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor;(0,c.drawOnCanvasHelper)(e,this.props,t,n,c.identityStack,h)}},{key:"renderSVG",value:function(e){var t=e.xAccessor;return i.default.createElement("g",{className:"react-stockcharts-grouped-bar-series"},(0,c.svgHelper)(this.props,e,t,c.identityStack,h))}},{key:"render",value:function(){return i.default.createElement(u.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:s.getAxisCanvas,drawOn:["pan"]})}}]),t}(o.Component);function h(e){return e.map((function(e){return r({},e,{x:e.x+e.offset-e.groupOffset,width:e.groupWidth})}))}p.propTypes={baseAt:l.default.oneOfType([l.default.number,l.default.func]).isRequired,direction:l.default.oneOf(["up","down"]).isRequired,stroke:l.default.bool.isRequired,widthRatio:l.default.number.isRequired,opacity:l.default.number.isRequired,fill:l.default.oneOfType([l.default.func,l.default.string]).isRequired,className:l.default.oneOfType([l.default.func,l.default.string]).isRequired,yAccessor:l.default.arrayOf(l.default.func)},p.defaultProps=r({},g.default.defaultProps,{widthRatio:.8,spaceBetweenBar:5}),t.default=p},9723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=g(a),i=g(n(2007)),l=n(7670),u=g(n(3765)),s=n(9285),c=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor;!function(e,t,n,r){var a=t.stroke,o=t.strokeWidth,i=t.currentValueStroke,l=n.xScale,u=n.chartConfig.yScale,s=p(n.plotData,r),g=!0;s.forEach((function(t){e.strokeStyle=a[t.type],e.lineWidth=o,e.beginPath();var n=void 0;t.plot.forEach((function(t){var r=[l(t[0]),u(t[1])],a=r[0],o=r[1];g?(e.moveTo(a,o),g=!1):((0,c.isDefined)(n)&&e.lineTo(n,o),e.lineTo(a,o)),n=a})),e.stroke()}));var d=s[s.length-1].plot,h=d[d.length-1];e.beginPath(),e.lineWidth=1;var f=[l(h[0]),u(h[2]),u(h[3])],C=f[0],I=f[1],m=f[2];e.moveTo(C,I),e.lineTo(C+10,I),e.stroke(),e.beginPath(),e.strokeStyle=i,e.moveTo(C-10,m),e.lineTo(C,m),e.stroke()}(e,this.props,t,n)}},{key:"render",value:function(){return o.default.createElement(u.default,{svgDraw:this.renderSVG,canvasToDraw:s.getAxisCanvas,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=e.xAccessor,n=e.xScale,r=e.chartConfig.yScale,a=e.plotData,i=this.props,u=i.className,s=i.stroke,c=i.fill,g=i.strokeWidth,d=p(a,t).map((function(e,t){var a=(0,l.line)().x((function(e){return n(e[0])})).y((function(e){return r(e[1])})).curve(l.curveStepBefore);return a(e.plot),o.default.createElement("path",{key:t,d:a(e.plot),className:e.type,stroke:s[e.type],fill:c[e.type],strokeWidth:g})}));return o.default.createElement("g",{className:u},d)}}]),t}(a.Component);function p(e,t){for(var n=[],r={},a=e[0],o=t(a),i=0;i<e.length;i++)a=e[i],(0,c.isNotDefined)(a.close)||((0,c.isNotDefined)(r.type)&&(r.type=a.startAs),(0,c.isNotDefined)(r.plot)&&(r.plot=[]),o=t(a),r.plot.push([o,a.open]),(0,c.isDefined)(a.changeTo)&&(r.plot.push([o,a.changePoint]),r.added=!0,n.push(r),(r={type:a.changeTo,plot:[],added:!1}).plot.push([o,a.changePoint])));return r.added||(r.plot.push([o,a.close,a.current,a.reverseAt]),n.push(r)),n}d.propTypes={className:i.default.string,stroke:i.default.object,fill:i.default.object,strokeWidth:i.default.number.isRequired},d.defaultProps={className:"react-stockcharts-kagi",strokeWidth:2,stroke:{yang:"#6BA583",yin:"#E60000"},fill:{yang:"none",yin:"none"},currentValueStroke:"#000000"},t.default=d},7416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),l=p(i),u=p(n(2007)),s=n(7670),c=p(n(3765)),g=n(9285),d=n(5418);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n.isHover=n.isHover.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"isHover",value:function(e){var t=this.props,n=t.highlightOnHover,r=t.yAccessor,o=t.hoverTolerance;if(!n)return!1;var i=e.mouseXY,l=e.currentItem,u=e.xScale,s=e.plotData,c=e.chartConfig,g=c.yScale,p=c.origin,h=e.xAccessor,f=a(i,2),C=f[0],I=f[1],m=o,v=(0,d.getClosestItemIndexes)(s,u.invert(C),h),b=v.left,A=v.right;if(b===A){var y=g(r(l))+p[1],k=u(h(l))+p[0];return Math.pow(C-k,2)+Math.pow(I-y,2)<Math.pow(m,2)}var Z=s[b],S=s[A],w=u(h(Z))+p[0],B=g(r(Z))+p[1],x=u(h(S))+p[0],G=(g(r(S))+p[1]-B)/(x-w),R=-1*G*w+B,W=Math.round(G*C+R);return I>=W-m&&I<=W+m}},{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.yAccessor,a=n.stroke,o=n.strokeOpacity,i=n.strokeWidth,l=n.hoverStrokeWidth,u=n.defined,c=n.strokeDasharray,g=n.interpolation,p=n.canvasClip,h=this.props.connectNulls,f=t.xAccessor,C=t.xScale,I=t.chartConfig.yScale,m=t.plotData,v=t.hovering;p&&(e.save(),p(e,t)),e.lineWidth=v?l:i,e.strokeStyle=(0,d.hexToRGBA)(a,o),e.setLineDash((0,d.getStrokeDasharray)(c).split(","));var b=(0,s.line)().x((function(e){return Math.round(C(f(e)))})).y((function(e){return Math.round(I(r(e)))}));(0,d.isDefined)(g)&&b.curve(g),h||b.defined((function(e){return u(r(e))})),e.beginPath(),b.context(e)(m),e.stroke(),p&&e.restore()}},{key:"renderSVG",value:function(e){var t=this.props,n=t.yAccessor,r=t.stroke,a=t.strokeOpacity,o=t.strokeWidth,i=t.hoverStrokeWidth,u=t.defined,c=t.strokeDasharray,g=this.props.connectNulls,p=this.props,h=p.interpolation,f=p.style,C=e.xAccessor,I=e.chartConfig,m=e.xScale,v=e.plotData,b=e.hovering,A=I.yScale,y=(0,s.line)().x((function(e){return Math.round(m(C(e)))})).y((function(e){return Math.round(A(n(e)))}));(0,d.isDefined)(h)&&y.curve(h),g||y.defined((function(e){return u(n(e))}));var k=y(v),Z=this.props,S=Z.fill,w=Z.className;return l.default.createElement("path",{style:f,className:w+" "+(r?"":" line-stroke"),d:k,stroke:r,strokeOpacity:a,strokeWidth:b?i:o,strokeDasharray:(0,d.getStrokeDasharray)(c),fill:S})}},{key:"render",value:function(){var e=this.props,t=e.highlightOnHover,n=e.onHover,a=e.onUnHover,o=t||n||a?{isHover:this.isHover,drawOn:["mousemove","pan"],canvasToDraw:g.getMouseCanvas}:{drawOn:["pan"],canvasToDraw:g.getAxisCanvas};return l.default.createElement(c.default,r({svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,onClickWhenHover:this.props.onClick,onDoubleClickWhenHover:this.props.onDoubleClick,onContextMenuWhenHover:this.props.onContextMenu,onHover:this.props.onHover,onUnHover:this.props.onUnHover},o))}}]),t}(i.Component);h.propTypes={className:u.default.string,strokeWidth:u.default.number,strokeOpacity:u.default.number,stroke:u.default.string,hoverStrokeWidth:u.default.number,fill:u.default.string,defined:u.default.func,hoverTolerance:u.default.number,strokeDasharray:u.default.oneOf(d.strokeDashTypes),highlightOnHover:u.default.bool,onClick:u.default.func,onDoubleClick:u.default.func,onHover:u.default.func,onUnHover:u.default.func,onContextMenu:u.default.func,yAccessor:u.default.func,connectNulls:u.default.bool,interpolation:u.default.func,canvasClip:u.default.func,style:u.default.object},h.defaultProps={className:"line ",strokeWidth:1,strokeOpacity:1,hoverStrokeWidth:4,fill:"none",stroke:"#4682B4",strokeDasharray:"Solid",defined:function(e){return!isNaN(e)},hoverTolerance:6,highlightOnHover:!1,connectNulls:!1,onClick:function(e){console.log("Click",e)},onDoubleClick:function(e){console.log("Double Click",e)},onContextMenu:function(e){console.log("Right Click",e)}},t.default=h},8645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=c(a),i=c(n(2007)),l=c(n(3105)),u=c(n(7416)),s=c(n(4212));function c(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.yAccessorForMACD=n.yAccessorForMACD.bind(n),n.yAccessorForSignal=n.yAccessorForSignal.bind(n),n.yAccessorForDivergence=n.yAccessorForDivergence.bind(n),n.yAccessorForDivergenceBase=n.yAccessorForDivergenceBase.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"yAccessorForMACD",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).macd}},{key:"yAccessorForSignal",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).signal}},{key:"yAccessorForDivergence",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).divergence}},{key:"yAccessorForDivergenceBase",value:function(e,t){return t(0)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.opacity,r=e.divergenceStroke,a=e.widthRatio,i=e.width,c=this.props,g=c.stroke,d=c.fill,p=this.props.clip,h=this.props,f=h.zeroLineStroke,C=h.zeroLineOpacity;return o.default.createElement("g",{className:t},o.default.createElement(l.default,{baseAt:this.yAccessorForDivergenceBase,className:"macd-divergence",width:i,widthRatio:a,stroke:r,fill:d.divergence,opacity:n,clip:p,yAccessor:this.yAccessorForDivergence}),o.default.createElement(u.default,{yAccessor:this.yAccessorForMACD,stroke:g.macd,fill:"none"}),o.default.createElement(u.default,{yAccessor:this.yAccessorForSignal,stroke:g.signal,fill:"none"}),o.default.createElement(s.default,{stroke:f,opacity:C,yValue:0}))}}]),t}(a.Component);g.propTypes={className:i.default.string,yAccessor:i.default.func.isRequired,opacity:i.default.number,divergenceStroke:i.default.bool,zeroLineStroke:i.default.string,zeroLineOpacity:i.default.number,clip:i.default.bool.isRequired,stroke:i.default.shape({macd:i.default.string.isRequired,signal:i.default.string.isRequired}).isRequired,fill:i.default.shape({divergence:i.default.oneOfType([i.default.string,i.default.func]).isRequired}).isRequired,widthRatio:i.default.number,width:l.default.propTypes.width},g.defaultProps={className:"react-stockcharts-macd-series",zeroLineStroke:"#000000",zeroLineOpacity:.3,opacity:.6,divergenceStroke:!1,clip:!0,widthRatio:.5,width:l.default.defaultProps.width},t.default=g},8029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3904),o=n(2791),i=g(o),l=g(n(2007)),u=g(n(3765)),s=n(9285),c=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=this.props.yAccessor,r=t.xAccessor,o=t.xScale,i=t.chartConfig.yScale,l=t.plotData;!function(e,t){var n=t.strokeWidth,r=t.bars,o=(0,a.nest)().key((function(e){return e.stroke})).entries(r);e.lineWidth=n,o.forEach((function(t){var n=t.key,r=t.values;e.strokeStyle=n,r.forEach((function(t){e.beginPath(),e.moveTo(t.x,t.y1),e.lineTo(t.x,t.y2),e.moveTo(t.openX1,t.openY),e.lineTo(t.openX2,t.openY),e.moveTo(t.closeX1,t.closeY),e.lineTo(t.closeX2,t.closeY),e.stroke()}))}))}(e,p(this.props,r,n,o,i,l))}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(u.default,{svgDraw:this.renderSVG,canvasToDraw:s.getAxisCanvas,canvasDraw:this.drawOnCanvas,clip:e,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,r=t.yAccessor,a=e.xAccessor,o=e.xScale,l=e.chartConfig.yScale,u=e.plotData,s=p(this.props,a,r,o,l,u),c=s.strokeWidth,g=s.bars;return i.default.createElement("g",{className:n},g.map((function(e,t){return i.default.createElement("path",{key:t,className:e.className,stroke:e.stroke,strokeWidth:c,d:"M"+e.openX1+" "+e.openY+" L"+e.openX2+" "+e.openY+" M"+e.x+" "+e.y1+" L"+e.x+" "+e.y2+" M"+e.closeX1+" "+e.closeY+" L"+e.closeX2+" "+e.closeY})})))}}]),t}(o.Component);function p(e,t,n,r,a,o){var i=e.classNames,l=e.stroke,u=(0,c.functor)(l),s=(0,c.functor)(i),g=r(t(o[o.length-1]))-r(t(o[0])),d=Math.max(1,Math.round(g/(o.length-1)/2)-1.5),p=Math.min(d,6),h=o.filter((function(e){return(0,c.isDefined)(n(e).close)})).map((function(e){var o=n(e),i=Math.round(r(t(e))),l=a(o.high),c=a(o.low),g=i-d,h=i+p/2,f=a(o.open),C=i-p/2,I=i+d,m=a(o.close),v=s(e);return{x:i,y1:l,y2:c,openX1:g,openX2:h,openY:f,closeX1:C,closeX2:I,closeY:m,stroke:u(e),className:v}}));return{barWidth:d,strokeWidth:p,bars:h}}d.propTypes={className:l.default.string,classNames:l.default.oneOfType([l.default.func,l.default.string]).isRequired,stroke:l.default.oneOfType([l.default.func,l.default.string]).isRequired,yAccessor:l.default.func.isRequired,clip:l.default.bool.isRequired},d.defaultProps={className:"react-stockcharts-ohlc",yAccessor:function(e){return{open:e.open,high:e.high,low:e.low,close:e.close}},classNames:function(e){return(0,c.isDefined)(e.absoluteChange)?e.absoluteChange>0?"up":"down":"firstbar"},stroke:function(e){return(0,c.isDefined)(e.absoluteChange)?e.absoluteChange>0?"#6BA583":"#FF0000":"#000000"},clip:!0},t.default=d},2808:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6263),o=n(2791),i=d(o),l=d(n(2007)),u=d(n(3765)),s=n(9285),c=n(250),g=n(5418);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=this.props.yAccessor,r=h(this.props,t,n);(0,c.drawOnCanvas2)(this.props,e,r)}},{key:"renderSVG",value:function(e){var t=this.props.yAccessor,n=h(this.props,e,t);return i.default.createElement("g",{className:"react-stockcharts-bar-series"},(0,c.getBarsSVG2)(this.props,n))}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(u.default,{svgDraw:this.renderSVG,canvasToDraw:s.getAxisCanvas,canvasDraw:this.drawOnCanvas,clip:e,drawOn:["pan"]})}}]),t}(o.Component);function h(e,t,n){var r=t.xScale,o=t.xAccessor,i=t.chartConfig.yScale,l=t.plotData,u=e.baseAt,s=e.className,c=e.fill,d=e.stroke,p=(0,g.functor)(s),h=(0,g.functor)(c),f=(0,g.functor)(u),C=(0,g.functor)(e.width)(e,t),I=Math.floor(.5*C),m=l.map((function(e){for(var t=n.map((function(t,n){var a=t(e);if(!(0,g.isNotDefined)(a)){var l=o(e),u=Math.round(r(l))-I,s=i(a);return{width:2*I,x:u,y:s,className:p(e,n),stroke:d?h(e,n):"none",fill:h(e,n),i:n}}})).filter((function(e){return(0,g.isDefined)(e)})),a=f(r,i,e),l=void 0,u=t.length-1;u>=0;u--)(l=a-t[u].y)<0&&(t[u].y=a,l*=-1),t[u].height=l,a=t[u].y;return t}));return(0,a.merge)(m)}p.propTypes={baseAt:l.default.oneOfType([l.default.number,l.default.func]).isRequired,direction:l.default.oneOf(["up","down"]).isRequired,stroke:l.default.bool.isRequired,widthRatio:l.default.number.isRequired,opacity:l.default.number.isRequired,fill:l.default.oneOfType([l.default.func,l.default.string]).isRequired,className:l.default.oneOfType([l.default.func,l.default.string]).isRequired,xAccessor:l.default.func,yAccessor:l.default.arrayOf(l.default.func),xScale:l.default.func,yScale:l.default.func,plotData:l.default.array,clip:l.default.bool.isRequired},p.defaultProps={baseAt:function(e,t){return(0,g.first)(t.range())},direction:"up",className:"bar",stroke:!1,fill:"#4682B4",opacity:1,widthRatio:.5,width:g.plotDataLengthBarWidth,clip:!0},t.default=p},6730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=g(o),l=g(n(2007)),u=g(n(3765)),s=n(9285),c=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor,a=p(t.xScale,n,t.chartConfig.yScale,t.plotData);!function(e,t,n){var a=t.stroke,o=t.fill,i=t.strokeWidth;e.lineWidth=i,n.forEach((function(t){var n=r(t.offset,2),i=n[0],l=n[1];t.boxes.forEach((function(n){if(t.direction>0)e.fillStyle=o.up,e.strokeStyle=a.up,e.beginPath(),e.moveTo(i,l+n.open),e.lineTo(i+n.columnWidth,l+n.close),e.moveTo(i,l+n.close),e.lineTo(i+n.columnWidth,l+n.open),e.stroke();else{e.fillStyle=o.down,e.strokeStyle=a.down,e.beginPath();var r=i+n.columnWidth/2,u=l+n.open+n.boxHeight/2,s=n.columnWidth/2,c=n.boxHeight/2;e.ellipse(r,u,s,c,0,0,2*Math.PI),e.stroke()}}))})),e.stroke()}(e,this.props,a)}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(u.default,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:s.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=e.xAccessor,n=e.xScale,r=e.chartConfig.yScale,a=e.plotData,o=this.props,l=o.stroke,u=o.fill,s=o.strokeWidth,c=o.className,g=p(n,t,r,a);return i.default.createElement("g",{className:c},g.map((function(e,t){return i.default.createElement("g",{key:t,className:e.className,transform:"translate("+e.offset[0]+", "+e.offset[1]+")"},e.boxes.map((function(n,r){return e.direction>0?i.default.createElement("g",{key:t+"-"+r},i.default.createElement("line",{className:"up",strokeWidth:s,stroke:l.up,fill:u.up,x1:0,y1:n.open,x2:n.columnWidth,y2:n.close}),i.default.createElement("line",{className:"up",strokeWidth:s,stroke:l.up,fill:u.up,x1:0,y1:n.close,x2:n.columnWidth,y2:n.open})):i.default.createElement("ellipse",{key:t+"-"+r,className:"down",strokeWidth:s,stroke:l.down,fill:u.down,cx:n.columnWidth/2,cy:(n.open+n.close)/2,rx:n.columnWidth/2,ry:n.boxHeight/2})})))})))}}]),t}(o.Component);function p(e,t,n,r){for(var a=(e(t(r[r.length-1]))-e(t(r[0])))/(r.length-1),o=void 0,i=0;(0,c.isNotDefined)(o)&&(0,c.isDefined)(r[i].close);)o=r[i].boxes[0],i++;var l=Math.abs(n(o.open)-n(o.close));return r.filter((function(e){return(0,c.isDefined)(e.close)})).map((function(r){var o=r.boxes.map((function(e){return{columnWidth:a,boxHeight:l,open:n(e.open),close:n(e.close)}})),i=e(t(r))-a/2;return{boxes:o,direction:r.direction,offset:[i,0]}}))}d.propTypes={className:l.default.string,strokeWidth:l.default.number.isRequired,stroke:l.default.object.isRequired,fill:l.default.object.isRequired,clip:l.default.bool.isRequired},d.defaultProps={className:"react-stockcharts-point-and-figure",strokeWidth:1,stroke:{up:"#6BA583",down:"#FF0000"},fill:{up:"none",down:"none"},clip:!0},t.default=d},3742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=g(a),i=g(n(2007)),l=g(n(7416)),u=g(n(4212)),s=g(n(139)),c=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.renderClip=n.renderClip.bind(n),n.topAndBottomClip=n.topAndBottomClip.bind(n),n.mainClip=n.mainClip.bind(n);var r=String(Math.round(1e4*Math.random()*1e4));n.clipPathId1="rsi-clip-"+r;var a=String(Math.round(1e4*Math.random()*1e4));return n.clipPathId2="rsi-clip-"+a,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"topAndBottomClip",value:function(e,t){var n=t.chartConfig,r=this.props,a=r.overSold,o=r.overBought,i=n.yScale,l=n.width;e.beginPath(),e.rect(0,i(a),l,i(o)-i(a)),e.clip()}},{key:"mainClip",value:function(e,t){var n=t.chartConfig,r=this.props,a=r.overSold,o=r.overBought,i=n.yScale,l=n.width,u=n.height;e.beginPath(),e.rect(0,0,l,i(a)),e.rect(0,i(o),l,u-i(o)),e.clip()}},{key:"renderClip",value:function(e){var t=e.chartConfig,n=this.props,r=n.overSold,a=n.overBought,i=t.yScale,l=t.width,u=t.height;return o.default.createElement("defs",null,o.default.createElement("clipPath",{id:this.clipPathId1},o.default.createElement("rect",{x:0,y:i(r),width:l,height:i(a)-i(r)})),o.default.createElement("clipPath",{id:this.clipPathId2},o.default.createElement("rect",{x:0,y:0,width:l,height:i(r)}),o.default.createElement("rect",{x:0,y:i(a),width:l,height:u-i(a)})))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.stroke,r=e.opacity,a=e.strokeDasharray,i=e.strokeWidth,c=this.props.yAccessor,g=this.props,d=g.overSold,p=g.middle,h=g.overBought,f={clipPath:"url(#"+this.clipPathId1+")"},C={clipPath:"url(#"+this.clipPathId2+")"};return o.default.createElement("g",{className:t},o.default.createElement(s.default,null,this.renderClip),o.default.createElement(u.default,{stroke:n.top,opacity:r.top,yValue:d,strokeDasharray:a.top,strokeWidth:i.top}),o.default.createElement(u.default,{stroke:n.middle,opacity:r.middle,yValue:p,strokeDasharray:a.middle,strokeWidth:i.middle}),o.default.createElement(u.default,{stroke:n.bottom,opacity:r.bottom,yValue:h,strokeDasharray:a.bottom,strokeWidth:i.bottom}),o.default.createElement(l.default,{style:f,canvasClip:this.topAndBottomClip,className:t,yAccessor:c,stroke:n.insideThreshold||n.line,strokeWidth:i.insideThreshold,strokeDasharray:a.line}),o.default.createElement(l.default,{style:C,canvasClip:this.mainClip,className:t,yAccessor:c,stroke:n.outsideThreshold||n.line,strokeWidth:i.outsideThreshold,strokeDasharray:a.line}))}}]),t}(a.Component);d.propTypes={className:i.default.string,yAccessor:i.default.func.isRequired,stroke:i.default.shape({top:i.default.string.isRequired,middle:i.default.string.isRequired,bottom:i.default.string.isRequired,outsideThreshold:i.default.string.isRequired,insideThreshold:i.default.string.isRequired}).isRequired,opacity:i.default.shape({top:i.default.number.isRequired,middle:i.default.number.isRequired,bottom:i.default.number.isRequired}).isRequired,strokeDasharray:i.default.shape({line:i.default.oneOf(c.strokeDashTypes),top:i.default.oneOf(c.strokeDashTypes),middle:i.default.oneOf(c.strokeDashTypes),bottom:i.default.oneOf(c.strokeDashTypes)}).isRequired,strokeWidth:i.default.shape({outsideThreshold:i.default.number.isRequired,insideThreshold:i.default.number.isRequired,top:i.default.number.isRequired,middle:i.default.number.isRequired,bottom:i.default.number.isRequired}).isRequired,overSold:i.default.number.isRequired,middle:i.default.number.isRequired,overBought:i.default.number.isRequired},d.defaultProps={className:"react-stockcharts-rsi-series",stroke:{line:"#000000",top:"#B8C2CC",middle:"#8795A1",bottom:"#B8C2CC",outsideThreshold:"#b300b3",insideThreshold:"#ffccff"},opacity:{top:1,middle:1,bottom:1},strokeDasharray:{line:"Solid",top:"ShortDash",middle:"ShortDash",bottom:"ShortDash"},strokeWidth:{outsideThreshold:1,insideThreshold:1,top:1,middle:1,bottom:1},overSold:70,middle:50,overBought:30},t.default=d},7656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=c(a),i=c(n(2007)),l=c(n(3765)),u=n(9285),s=n(5418);function c(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor,r=t.xScale,a=t.chartConfig.yScale,o=t.plotData,i=this.props.yAccessor;!function(e,t){t.forEach((function(t){e.beginPath(),e.strokeStyle=t.stroke,e.fillStyle=t.fill,e.rect(t.x,t.y,t.width,t.height),e.closePath(),e.fill()}))}(e,d(this.props,o,r,n,a,i))}},{key:"render",value:function(){var e=this.props.clip;return o.default.createElement(l.default,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:u.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=e.xAccessor,n=e.xScale,r=e.chartConfig.yScale,a=e.plotData,i=this.props.yAccessor,l=d(this.props,a,n,t,r,i).map((function(e,t){return o.default.createElement("rect",{key:t,className:e.className,fill:e.fill,x:e.x,y:e.y,width:e.width,height:e.height})}));return o.default.createElement("g",null,o.default.createElement("g",{className:"candle"},l))}}]),t}(a.Component);function d(e,t,n,r,a,o){var i=e.classNames,l=e.fill,u=(n(r(t[t.length-1]))-n(r(t[0])))/(t.length-1);return t.filter((function(e){return(0,s.isDefined)(o(e).close)})).map((function(e){var t=o(e),s=n(r(e))-.5*u,c=a(Math.max(t.open,t.close)),g=Math.abs(a(t.open)-a(t.close));return{className:t.open<=t.close?i.up:i.down,fill:e.fullyFormed?t.open<=t.close?l.up:l.down:l.partial,x:s,y:c,height:g,width:u}}))}g.propTypes={classNames:i.default.shape({up:i.default.string,down:i.default.string}),stroke:i.default.shape({up:i.default.string,down:i.default.string}),fill:i.default.shape({up:i.default.string,down:i.default.string,partial:i.default.string}),yAccessor:i.default.func.isRequired,clip:i.default.bool.isRequired},g.defaultProps={classNames:{up:"up",down:"down"},stroke:{up:"none",down:"none"},fill:{up:"#6BA583",down:"#E60000",partial:"#4682B4"},yAccessor:function(e){return{open:e.open,high:e.high,low:e.low,close:e.close}},clip:!0},t.default=g},2313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=g(o),l=g(n(2007)),u=g(n(3765)),s=n(9285),c=n(5418);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n.isHover=n.isHover.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"isHover",value:function(e){var t=e.mouseXY,n=e.currentItem,r=e.chartConfig.yScale,a=this.props.yAccessor,o=t[1],i=r(a(n));return o<i+5&&o>i-5}},{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.yAccessor,a=n.fill,o=n.opacity,i=t.xAccessor,l=t.plotData,u=t.xScale,s=t.chartConfig.yScale,g=t.hovering,d=(u(i((0,c.last)(l)))-u(i((0,c.first)(l))))/l.length*.5/2,p=Math.min(2,Math.max(.5,d))+(g?2:0);l.forEach((function(t){var n=u(i(t)),l=s(r(t)),g=r(t)>t.close?a.falling:a.rising;e.fillStyle=(0,c.hexToRGBA)(g,o),e.strokeStyle=g,e.beginPath(),e.ellipse(n,l,p,p,0,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}))}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,r=t.yAccessor,a=e.xAccessor,o=e.plotData,l=e.xScale,u=e.chartConfig.yScale;return i.default.createElement("g",{className:n},o.filter((function(e){return(0,c.isDefined)(r(e))})).map((function(e,t){return i.default.createElement("circle",{key:t,cx:l(a(e)),cy:u(r(e)),r:3,fill:"green"})})))}},{key:"render",value:function(){var e=this.props.highlightOnHover?{isHover:this.isHover,drawOn:["mousemove","pan"],canvasToDraw:s.getMouseCanvas}:{drawOn:["pan"],canvasToDraw:s.getAxisCanvas};return i.default.createElement(u.default,r({svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,onClickWhenHover:this.props.onClick,onDoubleClickWhenHover:this.props.onDoubleClick,onContextMenuWhenHover:this.props.onContextMenu},e))}}]),t}(o.Component);d.propTypes={className:l.default.string,fill:l.default.object.isRequired,yAccessor:l.default.func.isRequired,opacity:l.default.number.isRequired,onClick:l.default.func,onDoubleClick:l.default.func,onContextMenu:l.default.func,highlightOnHover:l.default.bool},d.defaultProps={className:"react-stockcharts-sar",fill:{falling:"#4682B4",rising:"#15EC2E"},highlightOnHover:!0,opacity:.2,onClick:function(e){console.log("Click",e)},onDoubleClick:function(e){console.log("Double Click",e)},onContextMenu:function(e){console.log("Right Click",e)}},t.default=d},139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=u(a),i=u(n(2007)),l=u(n(3765));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var g=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this.props.children;return o.default.createElement(l.default,{drawOn:[],svgDraw:e})}}]),t}(a.Component);g.propTypes={children:i.default.func.isRequired},t.default=g},9786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=d(o),l=d(n(2007)),u=n(3904),s=d(n(3765)),c=n(9285),g=n(5418);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor,a=h(this.props,t,n);!function(e,t,n){var a=t.markerProps;(0,u.nest)().key((function(e){return e.fill})).key((function(e){return e.stroke})).entries(n).forEach((function(t){var n=t.key,o=t.values;"none"!==n&&(e.fillStyle=n),o.forEach((function(t){t.values.forEach((function(t){var o=t.marker;o.drawOnCanvas(r({},o.defaultProps,a,{fill:n}),t,e)}))}))}))}(e,this.props,a)}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,a=t.markerProps,o=e.xAccessor,l=h(this.props,e,o);return i.default.createElement("g",{className:n},l.map((function(e,t){var n=e.marker;return i.default.createElement(n,r({key:t},a,{point:e}))})))}},{key:"render",value:function(){return i.default.createElement(s.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:c.getAxisCanvas,drawOn:["pan"]})}}]),t}(o.Component);function h(e,t,n){var a=e.yAccessor,o=e.markerProvider,i=e.markerProps,l=e.marker,u=t.xScale,s=t.chartConfig.yScale,c=t.plotData;if(!o&&!l)throw new Error("required prop, either marker or markerProvider missing");return c.map((function(e){o&&(l=o(e));var t=r({},l.defaultProps,i),c=(0,g.functor)(t.fill),d=(0,g.functor)(t.stroke);return{x:u(n(e)),y:s(a(e)),fill:(0,g.hexToRGBA)(c(e),t.opacity),stroke:d(e),datum:e,marker:l}}))}p.propTypes={className:l.default.string,yAccessor:l.default.func.isRequired,marker:l.default.func,markerProvider:l.default.func,markerProps:l.default.object},p.defaultProps={className:"react-stockcharts-scatter"},t.default=p},4739:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2791)),a=i(n(2007)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.className,n=e.stroke,a=e.strokeWidth,i=e.opacity,l=e.fill,u=e.point,s=e.width,c=(0,o.functor)(s)(u.datum),g=u.x-c/2,d=u.y-c/2;return r.default.createElement("rect",{className:t,x:g,y:d,stroke:n,strokeWidth:a,fillOpacity:i,fill:l,width:c,height:c})}l.propTypes={stroke:a.default.string,fill:a.default.string.isRequired,opacity:a.default.number.isRequired,point:a.default.shape({x:a.default.number.isRequired,y:a.default.number.isRequired,datum:a.default.object.isRequired}).isRequired,className:a.default.string,strokeWidth:a.default.number,width:a.default.oneOfType([a.default.number,a.default.func]).isRequired},l.defaultProps={stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-rect"},l.drawOnCanvas=function(e,t,n){var r=e.stroke,a=e.fill,i=e.opacity,u=e.strokeWidth;n.strokeStyle=r,n.lineWidth=u,"none"!==a&&(n.fillStyle=(0,o.hexToRGBA)(a,i)),l.drawOnCanvasWithNoStateChange(e,t,n)},l.drawOnCanvasWithNoStateChange=function(e,t,n){var r=e.width,a=(0,o.functor)(r)(t.datum),i=t.x-a/2,l=t.y-a/2;n.beginPath(),n.rect(i,l,a,a),n.stroke(),n.fill()},t.default=l},250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotateXY=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.identityStack=C,t.drawOnCanvasHelper=I,t.svgHelper=v,t.getBarsSVG2=y,t.drawOnCanvas2=k,t.getBars=Z;var o=n(2791),i=h(o),l=h(n(2007)),u=n(3904),s=n(6263),c=n(7670),g=h(n(3765)),d=n(9285),p=n(5418);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor;I(e,this.props,t,n,c.stack)}},{key:"renderSVG",value:function(e){var t=e.xAccessor;return i.default.createElement("g",null,v(this.props,e,t,c.stack))}},{key:"render",value:function(){var e=this.props.clip;return i.default.createElement(g.default,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:d.getAxisCanvas,drawOn:["pan"]})}}]),t}(o.Component);function C(){var e=[];function t(t){return e.map((function(e,n){var r=t.map((function(t){var n=[0,t[e]];return n.data=t,n}));return r.key=e,r.index=n,r}))}return t.keys=function(n){return arguments.length?(e=n,t):e},t}function I(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.identity,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:A,l=n.xScale,u=n.chartConfig.yScale,s=n.plotData,c=b(t,r,s,l,u,a,i,o);k(t,e,c)}function m(e){return Array.isArray(e)?e:[e]}function v(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:p.identity,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:A,i=t.xScale,l=t.chartConfig.yScale,u=t.plotData,s=b(e,n,u,i,l,r,o,a);return y(e,s)}function b(e,t,n,r,a,o,i,l){var u=e.yAccessor,s=e.swapScales;return Z(e,s?u:t,m(s?e.xAccessor:u),s?a:r,s?r:a,n,o,s?i:l)}f.propTypes={baseAt:l.default.oneOfType([l.default.number,l.default.func]).isRequired,direction:l.default.oneOf(["up","down"]).isRequired,stroke:l.default.bool.isRequired,width:l.default.oneOfType([l.default.number,l.default.func]).isRequired,opacity:l.default.number.isRequired,fill:l.default.oneOfType([l.default.func,l.default.string]).isRequired,className:l.default.oneOfType([l.default.func,l.default.string]).isRequired,clip:l.default.bool.isRequired},f.defaultProps={baseAt:function(e,t){return(0,p.head)(t.range())},direction:"up",className:"bar",stroke:!0,fill:"#4682B4",opacity:.5,width:p.plotDataLengthBarWidth,widthRatio:.8,clip:!0,swapScales:!1};var A=t.rotateXY=function(e){return e.map((function(e){return r({},e,{x:e.y,y:e.x,height:e.width,width:e.height})}))};function y(e,t){var n=e.opacity;return t.map((function(e,t){return e.width<=1?i.default.createElement("line",{key:t,className:e.className,stroke:e.fill,x1:e.x,y1:e.y,x2:e.x,y2:e.y+e.height}):i.default.createElement("rect",{key:t,className:e.className,stroke:e.stroke,fill:e.fill,x:e.x,y:e.y,width:e.width,fillOpacity:n,height:e.height})}))}function k(e,t,n){var r=e.stroke;(0,u.nest)().key((function(e){return e.fill})).entries(n).forEach((function(n){var a=n.key,o=n.values;(0,p.head)(o).width>1&&(t.strokeStyle=a);var i=(0,p.head)(o).width<=1?a:(0,p.hexToRGBA)(a,e.opacity);t.fillStyle=i,o.forEach((function(e){e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):(t.fillRect(e.x,e.y,e.width,e.height),r&&t.strokeRect(e.x,e.y,e.width,e.height))}))}))}function Z(e,t,n,a,o,i){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:C,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:p.identity,c=e.baseAt,g=e.className,d=e.fill,h=e.stroke,f=e.spaceBetweenBar,I=void 0===f?0:f,m=(0,p.functor)(g),v=(0,p.functor)(d),b=(0,p.functor)(c),A=(0,p.functor)(e.width),y=A(e,{xScale:a,xAccessor:t,plotData:i}),k=Math.round(y),Z=(k-I*(n.length-1))/n.length,S=1===k?0:.5*y,w=i.map((function(e){var r={appearance:{},x:t(e)};return n.forEach((function(t,n){var a="y"+n;r[a]=t(e);var o={className:m(e,n),stroke:h?v(e,n):"none",fill:v(e,n)};r.appearance[a]=o})),r})),B=n.map((function(e,t){return"y"+t})),x=l().keys(B)(w),G=x.map((function(e,t){var n=e.key;return e.map((function(e){var r=[e[0],e[1]];return r.data={x:e.data.x,i:t,appearance:e.data.appearance[n]},r}))})),R=(0,s.merge)(G).map((function(e){var t=o(e[1]),n=b(a,o,e.data)-o(e[1]-e[0]);return n<0&&(t+=n,n=-n),r({},e.data.appearance,{x:Math.round(a(e.data.x)-y/2),y:t,groupOffset:Math.round(S-(e.data.i>0?(Z+I)*e.data.i:0)),groupWidth:Math.round(Z),offset:Math.round(S),height:n,width:k})})).filter((function(e){return!isNaN(e.y)}));return u(R)}t.default=f},5021:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),o=s(a),i=s(n(2007)),l=s(n(7416)),u=s(n(4212));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.yAccessorForD=n.yAccessorForD.bind(n),n.yAccessorForK=n.yAccessorForK.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"yAccessorForD",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).D}},{key:"yAccessorForK",value:function(e){var t=this.props.yAccessor;return t(e)&&t(e).K}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.stroke,r=e.refLineOpacity,a=this.props,i=a.overSold,s=a.middle,c=a.overBought;return o.default.createElement("g",{className:t},o.default.createElement(l.default,{yAccessor:this.yAccessorForD,stroke:n.dLine,fill:"none"}),o.default.createElement(l.default,{yAccessor:this.yAccessorForK,stroke:n.kLine,fill:"none"}),o.default.createElement(u.default,{stroke:n.top,opacity:r,yValue:i}),o.default.createElement(u.default,{stroke:n.middle,opacity:r,yValue:s}),o.default.createElement(u.default,{stroke:n.bottom,opacity:r,yValue:c}))}}]),t}(a.Component);c.propTypes={className:i.default.string,yAccessor:i.default.func.isRequired,stroke:i.default.shape({top:i.default.string.isRequired,middle:i.default.string.isRequired,bottom:i.default.string.isRequired,dLine:i.default.string.isRequired,kLine:i.default.string.isRequired}).isRequired,overSold:i.default.number.isRequired,middle:i.default.number.isRequired,overBought:i.default.number.isRequired,refLineOpacity:i.default.number.isRequired},c.defaultProps={className:"react-stockcharts-stochastic-series",stroke:{top:"#964B00",middle:"#000000",bottom:"#964B00",dLine:"#EA2BFF",kLine:"#74D400"},overSold:80,middle:50,overBought:20,refLineOpacity:.3},t.default=c},4212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),i=g(o),l=g(n(2007)),u=n(5418),s=g(n(3765)),c=n(9285);function g(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"drawOnCanvas",value:function(e,t){var n=this.props,r=n.type,a=n.stroke,o=n.strokeWidth,i=n.opacity,l=n.strokeDasharray,s=this.props,c=s.yValue,g=s.xValue,d=t.xScale,h=t.chartConfig,f=h.yScale,C=h.width,I=h.height;e.beginPath(),e.strokeStyle=(0,u.hexToRGBA)(a,i),e.lineWidth=o;var m=p(r,d,f,g,c,C,I),v=m.x1,b=m.y1,A=m.x2,y=m.y2;e.setLineDash((0,u.getStrokeDasharray)(l).split(",")),e.moveTo(v,b),e.lineTo(A,y),e.stroke()}},{key:"render",value:function(){return i.default.createElement(s.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:c.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=e.width,n=e.height,a=e.xScale,o=e.chartConfig.yScale,l=this.props.className,s=this.props,c=s.type,g=s.stroke,d=s.strokeWidth,h=s.opacity,f=s.strokeDasharray,C=this.props,I=C.yValue,m=p(c,a,o,C.xValue,I,t,n);return i.default.createElement("line",r({className:l,strokeDasharray:(0,u.getStrokeDasharray)(f),stroke:g,strokeWidth:d,strokeOpacity:h},m))}}]),t}(o.Component);function p(e,t,n,r,a,o,i){return"horizontal"===e?{x1:0,y1:Math.round(n(a)),x2:o,y2:Math.round(n(a))}:{x1:Math.round(t(r)),y1:0,x2:Math.round(t(r)),y2:i}}d.propTypes={className:l.default.string,type:l.default.oneOf(["vertical","horizontal"]),stroke:l.default.string,strokeWidth:l.default.number,strokeDasharray:l.default.oneOf(u.strokeDashTypes),opacity:l.default.number.isRequired,yValue:function(e,t){return"vertical"===e.type&&(0,u.isDefined)(e[t])?new Error("Do not define `yValue` when type is `vertical`, define the `xValue` prop"):"horizontal"===e.type&&(0,u.isNotDefined)(e[t])?new Error("when type = `horizontal` `yValue` is required"):void 0},xValue:function(e,t){return"horizontal"===e.type&&(0,u.isDefined)(e[t])?new Error("Do not define `xValue` when type is `horizontal`, define the `yValue` prop"):"vertical"===e.type&&(0,u.isNotDefined)(e[t])?new Error("when type = `vertical` `xValue` is required"):void 0}},d.defaultProps={className:"line ",type:"horizontal",stroke:"#000000",opacity:.5,strokeWidth:1,strokeDasharray:"Solid"},t.default=d},118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2791)),a=i(n(2007)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.className,n=e.strokeWidth,a=e.opacity,i=e.point,l=e.width,c=s(e,i);if(null==c)return null;var g=function(e){var t=e.fill,n=e.point;return t instanceof Function?t(n.datum):t}(e),d=function(e){var t=e.stroke,n=e.point;return t instanceof Function?t(n.datum):t}(e),p=(0,o.functor)(l)(i.datum),h=i.x,f=i.y,C=u(p),I=C.innerOpposite,m="\n\t\t"+h+" "+(f-C.innerHypotenuse)+",\n\t\t"+(h+p/2)+" "+(f+I)+",\n\t\t"+(h-p/2)+" "+(f+I)+"\n\t";return r.default.createElement("polygon",{className:t,points:m,stroke:d,strokeWidth:n,fillOpacity:a,fill:g,transform:0!==c?"rotate("+c+", "+h+", "+f+")":null})}function u(e){var t=e/2*(1/Math.cos(30*Math.PI/180));return{innerOpposite:e/2*(1/Math.tan(60*Math.PI/180)),innerHypotenuse:t}}function s(e,t){var n=e.direction,r=n instanceof Function?n(t.datum):n;if("hide"===r)return null;var a=0;switch(r){case"bottom":a=180;break;case"left":a=-90;break;case"right":a=90}return a}l.propTypes={direction:a.default.oneOfType([a.default.oneOf(["top","bottom","left","right","hide"]),a.default.func]).isRequired,stroke:a.default.oneOfType([a.default.string,a.default.func]).isRequired,fill:a.default.oneOfType([a.default.string,a.default.func]).isRequired,opacity:a.default.number.isRequired,point:a.default.shape({x:a.default.number.isRequired,y:a.default.number.isRequired,datum:a.default.object.isRequired}).isRequired,className:a.default.string,strokeWidth:a.default.number,width:a.default.oneOfType([a.default.number,a.default.func]).isRequired},l.defaultProps={direction:"top",stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-triangle"},l.drawOnCanvas=function(e,t,n){var r=e.stroke,a=e.fill,i=e.opacity,u=e.strokeWidth;n.strokeStyle=r,n.lineWidth=u,"none"!==a&&(n.fillStyle=(0,o.hexToRGBA)(a,i)),l.drawOnCanvasWithNoStateChange(e,t,n)},l.drawOnCanvasWithNoStateChange=function(e,t,n){var r=e.width,a=(0,o.functor)(r)(t.datum),i=t.x,l=t.y,c=u(a),g=c.innerOpposite,d=c.innerHypotenuse,p=s(e,t);n.beginPath(),n.moveTo(i,l-d),n.lineTo(i+a/2,l+g),n.lineTo(i-a/2,l+g),n.stroke(),null!==p&&0!==p&&(n.save(),n.translate(i,l),n.rotate(p*Math.PI/180),n.fill(),n.restore()),n.fill()},t.default=l},3986:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),l=f(i),u=f(n(2007)),s=n(6263),c=n(3904),g=n(984),d=f(n(3765)),p=n(9285),h=n(5418);function f(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSVG=n.renderSVG.bind(n),n.drawOnCanvas=n.drawOnCanvas.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"drawOnCanvas",value:function(e,t){var n=t.xAccessor,r=t.width,a=I(this.props,t,n,r),o=a.rects,i=a.sessionBg;!function(e,t,n,r){var a=t.opacity,o=t.sessionBackGround,i=t.sessionBackGroundOpacity;t.showSessionBackground&&(e.fillStyle=(0,h.hexToRGBA)(o,i),r.forEach((function(t){var n=t.x,r=t.y,a=t.height,o=t.width;e.beginPath(),e.rect(n,r,o,a),e.closePath(),e.fill()})));n.forEach((function(t){var n=t.x,r=t.y,o=t.height,i=t.w1,l=t.w2,u=t.stroke1,s=t.stroke2,c=t.fill1,g=t.fill2;i>0&&(e.fillStyle=(0,h.hexToRGBA)(c,a),"none"!==u&&(e.strokeStyle=u),e.beginPath(),e.rect(n,r,i,o),e.closePath(),e.fill(),"none"!==u&&e.stroke()),l>0&&(e.fillStyle=(0,h.hexToRGBA)(g,a),"none"!==s&&(e.strokeStyle=s),e.beginPath(),e.rect(n+i,r,l,o),e.closePath(),e.fill(),"none"!==s&&e.stroke())}))}(e,this.props,o,i)}},{key:"render",value:function(){return l.default.createElement(d.default,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:p.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(e){var t=this.props,n=t.className,r=t.opacity,o=this.props,i=o.showSessionBackground,u=o.sessionBackGround,s=o.sessionBackGroundOpacity,c=e.xAccessor,g=e.width,d=I(this.props,e,c,g),p=d.rects,h=d.sessionBg,f=i?h.map((function(e,t){return l.default.createElement("rect",a({key:t},e,{opacity:s,fill:u}))})):null;return l.default.createElement("g",{className:n},f,p.map((function(e,t){return l.default.createElement("g",{key:t},l.default.createElement("rect",{x:e.x,y:e.y,width:e.w1,height:e.height,fill:e.fill1,stroke:e.stroke1,fillOpacity:r}),l.default.createElement("rect",{x:e.x+e.w1,y:e.y,width:e.w2,height:e.height,fill:e.fill2,stroke:e.stroke2,fillOpacity:r}))})))}}]),t}(i.Component);function I(e,t,n,o){var i=t.xScale,l=t.chartConfig.yScale,u=t.plotData,d=e.sessionStart,p=e.bySession,f=e.partialStartOK,C=e.partialEndOK,I=e.bins,m=e.maxProfileWidthPercent,v=e.source,b=e.volume,A=e.absoluteChange,y=e.orient,k=e.fill,Z=e.stroke,S=(0,h.accumulatingWindow)().discardTillStart(!f).discardTillEnd(!C).accumulateTill((function(e,n){return d(a({d:e,i:n},t))})).accumulator(h.identity),w=u.length>1?i(n(u[1]))-i(n((0,h.head)(u))):0,B=(p?S(u):[u]).map((function(e){var t=p?i(n((0,h.head)(e))):0,a=p?i(n((0,h.last)(e))):o,u=a-t+w,d=(0,s.histogram)().value(v).thresholds(I),f=(0,c.nest)().key((function(e){return e.direction})).sortKeys("right"===y?s.descending:s.ascending).rollup((function(e){return(0,s.sum)(e,(function(e){return e.volume}))})),C=d(e),S=C.map((function(e){return e.map((function(e){return A(e)>0?{direction:"up",volume:b(e)}:{direction:"down",volume:b(e)}}))})).map((function(e){return f.entries(e)})),B=S.map((function(e){return(0,s.sum)(e.map((function(e){return e.value})))})),x=r("right"===y?[t,t+u*m/100]:[a,a-u*(100-m)/100],2),G=x[0],R=x[1],W=(0,g.scaleLinear)().domain([0,(0,s.max)(B)]).range([G,R]),V=S.map((function(e){var t=(0,s.sum)(e,(function(e){return e.value})),n=W(t),r=function(e){return(0,h.head)(e.range())}(W)-n;return{x:r<0?n+r:n,ws:e.map((function(e){return{type:e.key,width:e.value*Math.abs(r)/t}})),totalVolumeX:n}})),F=(0,s.zip)(C,V).map((function(e){var t=r(e,2),n=t[0],a=t[1],i=a.x,u=a.ws,s=u[0]||{type:"up",width:0},c=u[1]||{type:"down",width:0};return{y:l(n.x1),height:l(n.x1)-l(n.x0),x:i,width:o,w1:s.width,w2:c.width,stroke1:(0,h.functor)(Z)(s),stroke2:(0,h.functor)(Z)(c),fill1:(0,h.functor)(k)(s),fill2:(0,h.functor)(k)(c)}}));return{rects:F,sessionBg:{x:t,y:(0,h.last)(F).y,height:(0,h.head)(F).y-(0,h.last)(F).y+(0,h.head)(F).height,width:u}}}));return{rects:(0,s.merge)(B.map((function(e){return e.rects}))),sessionBg:B.map((function(e){return e.sessionBg}))}}C.propTypes={className:u.default.string,opacity:u.default.number,showSessionBackground:u.default.bool,sessionBackGround:u.default.string,sessionBackGroundOpacity:u.default.number},C.defaultProps={className:"line ",bins:20,opacity:.5,maxProfileWidthPercent:50,fill:function(e){return"up"===e.type?"#6BA583":"#FF0000"},stroke:"#FFFFFF",showSessionBackground:!1,sessionBackGround:"#4682B4",sessionBackGroundOpacity:.3,source:function(e){return e.close},volume:function(e){return e.volume},absoluteChange:function(e){return e.absoluteChange},bySession:!1,sessionStart:function(e){var t=e.d,n=e.i,r=e.plotData;return n>0&&r[n-1].date.getMonth()!==t.date.getMonth()},orient:"left",partialStartOK:!0,partialEndOK:!0},t.default=C},919:function(e,t,n){"use strict";var r=n(4223);var a=n(5955);var o=n(2012);var i=n(9786);var l=n(2840);var u=n(118);var s=n(4739);var c=n(7416);var g=n(2463);Object.defineProperty(t,"$Y",{enumerable:!0,get:function(){return B(g).default}});var d=n(8029);var p=n(3105);var h=n(250);var f=n(5001);var C=n(9723);var I=n(6730);var m=n(7656);var v=n(8645);var b=n(2353);var A=n(3742);var y=n(5021);var k=n(8812);var Z=n(3986);var S=n(4212);var w=n(2313);function B(e){return e&&e.__esModule?e:{default:e}}},8779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(2791)),o=i(n(3289));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,o.default)(this.props,e)||!(0,o.default)(this.state,t)||!(0,o.default)(this.context,n)}}]),t}(a.default.Component);t.default=s},7706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.functor)(!1),t=r.default,n=a.default,i=!1,l=!1,u=function(r){var a=i?void 0:[],o=[],u=0,s=0;for(s=0;s<r.length;s++){var c=r[s];e(c,s,a||[])?(a&&a.length>0&&o.push(t(a,s,u++)),a=[n(c)]):a&&a.push(n(c))}return l||o.push(t(a,s,u)),o};return u.accumulateTill=function(t){return arguments.length?(e=(0,o.functor)(t),u):e},u.accumulator=function(e){return arguments.length?(t=e,u):t},u.value=function(e){return arguments.length?(n=e,u):n},u.discardTillStart=function(e){return arguments.length?(i=e,u):i},u.discardTillEnd=function(e){return arguments.length?(l=e,u):l},u};var r=i(n(1703)),a=i(n(1492)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}},2410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.plotDataLengthBarWidth=function(e,t){var n=e.widthRatio,a=t.xScale,o=a.range(),i=r(o,2),l=i[0],u=i[1],s=Math.abs(u-l);if(null!=a.invert){var c=a.domain(),g=r(c,2),d=g[0],p=g[1];return s/Math.abs(d-p)*n}return s/a.domain().length*n},t.timeIntervalBarWidth=function(e){return function(t,n){var r=t.widthRatio,o=n.xScale,i=n.xAccessor,l=n.plotData,u=i((0,a.head)(l));return Math.abs(o(e.offset(u,1))-o(u))*r}};var a=n(5418)},1492:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},5418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=t.first=t.overlayColors=t.TOUCHEND=t.TOUCHMOVE=t.MOUSEUP=t.MOUSEMOVE=t.MOUSELEAVE=t.MOUSEENTER=t.yes=t.PureComponent=t.accumulatingWindow=t.mappedSlidingWindow=t.shallowEqual=t.noop=t.identity=t.slidingWindow=t.merge=t.zipper=t.rebind=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(6930);Object.defineProperty(t,"rebind",{enumerable:!0,get:function(){return y(i).default}});var l=n(3288);Object.defineProperty(t,"zipper",{enumerable:!0,get:function(){return y(l).default}});var u=n(3834);Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return y(u).default}});var s=n(4512);Object.defineProperty(t,"slidingWindow",{enumerable:!0,get:function(){return y(s).default}});var c=n(1492);Object.defineProperty(t,"identity",{enumerable:!0,get:function(){return y(c).default}});var g=n(1703);Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return y(g).default}});var d=n(3289);Object.defineProperty(t,"shallowEqual",{enumerable:!0,get:function(){return y(d).default}});var p=n(2668);Object.defineProperty(t,"mappedSlidingWindow",{enumerable:!0,get:function(){return y(p).default}});var h=n(7706);Object.defineProperty(t,"accumulatingWindow",{enumerable:!0,get:function(){return y(h).default}});var f=n(8779);Object.defineProperty(t,"PureComponent",{enumerable:!0,get:function(){return y(f).default}});var C=n(2410);Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}})}));var I=n(9009);Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}})})),t.getLogger=function(e){0;return b.default},t.sign=function(e){return(e>0)-(e<0)},t.path=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Array.isArray(e)?e:[e],n=t.length;return function(e,r){if(0===n)return w(e)?e:r;for(var a=0;null!=e&&a<n;)e=e[t[a++]];return a===n?e:r}},t.functor=function(e){return"function"===typeof e?e:function(){return e}},t.createVerticalLinearGradient=function(e){return function(t,n){var r=t.chartConfig.height,a=n.createLinearGradient(0,r,0,0);return e.forEach((function(e){a.addColorStop(e.stop,e.color)})),a}},t.getClosestItemIndexes2=function(e,t,n){var r=(0,v.bisector)(n).left(e,t);r=Math.max(r-1,0);var a=Math.min(r+1,e.length-1),o=n(e[r]);o>=t&&o<=t&&(a=r);return{left:r,right:a}},t.degrees=function(e){return 180*e/Math.PI},t.radians=function(e){return e*Math.PI/180},t.getClosestValue=function(e,t){var n=(B(e)?e:[e]).map((function(e){return e-t})).reduce((function(e,t){return Math.abs(e)<Math.abs(t)?e:t}));return t+n},t.find=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=0;r<e.length;++r)if(t.call(n,e[r],r,e))return e[r];return},t.d3Window=function(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)},t.getTouchProps=function(e){return e?{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY}:{}},t.getClosestItemIndexes=Z,t.getClosestItem=function(e,t,n,r){var a=Z(e,t,n,r),o=a.left,i=a.right;if(o===i)return e[o];var l=Math.abs(n(e[o])-t)<Math.abs(n(e[i])-t)?e[o]:e[i];r&&console.log(e[o],e[i],l,o,i);return l},t.head=S,t.tail=function(e,t){if(t&&e)return e.map(t).slice(1);return e?e.slice(1):void 0},t.last=function(e,t){if(t&&e){for(var n=void 0,r=e.length-1;r>=0;r--)if(n=e[r],w(t(n)))return n;return}var a=e?e.length:0;return a?e[a-1]:void 0},t.isDefined=w,t.isNotDefined=function(e){return!w(e)},t.isObject=function(e){return w(e)&&"object"===("undefined"===typeof e?"undefined":o(e))&&!Array.isArray(e)},t.touchPosition=function(e,t){var n=t.target,r=n.getBoundingClientRect(),a=e.clientX-r.left-n.clientLeft,o=e.clientY-r.top-n.clientTop;return[Math.round(a),Math.round(o)]},t.mousePosition=function(e,t){var n=e.currentTarget,r=t||n.getBoundingClientRect(),a=e.clientX-r.left-n.clientLeft,o=e.clientY-r.top-n.clientTop;return[Math.round(a),Math.round(o)]},t.clearCanvas=function(e,t){e.forEach((function(e){e.setTransform(1,0,0,1,0,0),e.clearRect(-1,-1,e.canvas.width+2,e.canvas.height+2),e.scale(t,t)}))},t.capitalizeFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},t.hexToRGBA=function(e,t){var n=e.replace("#","");if(e.indexOf("#")>-1&&(3===n.length||6===n.length)){var r=3===n.length?1:2,a=parseInt(n.substring(0,1*r),16),o=parseInt(n.substring(1*r,2*r),16),i=parseInt(n.substring(2*r,3*r),16);return"rgba("+a+", "+o+", "+i+", "+t+")"}return e},t.toObject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.default;return e.reduce((function(e,n){var o=t(n),i=a(o,2),l=i[0],u=i[1];return r({},e,k({},l,u))}),{})},t.mapValue=function(e,t){e=Object(e);var n={};return Object.keys(e).forEach((function(r){var a=t(e[r],r,e);w(a)&&(n[r]=a)})),n},t.mapObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.default,n=Object.keys(e),r=new Array(n.length);return n.forEach((function(n,a){r[a]=t(e[n],n,e)})),r},t.replaceAtIndex=function(e,t,n){if(w(e)&&e.length>t)return e.slice(0,t).concat(n).concat(e.slice(t+1));return e},t.forOwn=function(e,t){var n=Object(e);Object.keys(n).forEach((function(e){return t(n[e],e,n)}))};var m=n(984),v=n(6263),b=y(g),A=y(c);function y(e){return e&&e.__esModule?e:{default:e}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.yes=function(){return!0};t.MOUSEENTER="mouseenter.interaction",t.MOUSELEAVE="mouseleave.interaction",t.MOUSEMOVE="mousemove.pan",t.MOUSEUP="mouseup.pan",t.TOUCHMOVE="touchmove.pan",t.TOUCHEND="touchend.pan touchcancel.pan";function Z(e,t,n,r){for(var a=0,o=e.length-1;o-a>1;){var i=Math.round((a+o)/2);n(e[i])<=t?a=i:o=i}return n(e[a]).valueOf()===t.valueOf()&&(o=a),n(e[o]).valueOf()===t.valueOf()&&(a=o),n(e[a])<t&&n(e[o])<t&&(a=o),n(e[a])>t&&n(e[o])>t&&(o=a),{left:a,right:o}}t.overlayColors=(0,m.scaleOrdinal)(m.schemeCategory10);function S(e,t){if(!t||!e)return e?e[0]:void 0;for(var n=void 0,r=0;r<e.length;r++)if(w(t(n=e[r])))return n}t.first=S;function w(e){return null!==e&&"undefined"!=typeof e}var B=t.isArray=Array.isArray},2668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=void 0,t=10,n=r.default,i=a.default,l=0,u=function(r){var a=(0,o.functor)(t).apply(this,arguments),u=[],s=0,c=(0,o.functor)(e),g=[];return r.forEach((function(e,t){var r=void 0;if(t<l+a-1)return r=c(e,t),g.push(r),void u.push(r);t>=l+a&&u.shift(),u.push(i(e,t)),r=n(u,t,s++),g.push(r),u.pop(),u.push(r)})),g};return u.undefinedValue=function(t){return arguments.length?(e=t,u):e},u.windowSize=function(e){return arguments.length?(t=e,u):t},u.accumulator=function(e){return arguments.length?(n=e,u):n},u.skipInitial=function(e){return arguments.length?(l=e,u):l},u.source=function(e){return arguments.length?(i=e,u):i},u};var r=i(n(1703)),a=i(n(1492)),o=n(5418);function i(e){return e&&e.__esModule?e:{default:e}}},3834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=r.default,t=!0,n=o.default;function l(r){return(0,a.default)().combine((function(e,r){var a=t&&(0,i.isNotDefined)(r)?e:n(e,r);return(0,i.isNotDefined)(a)?e:a}))(r,e(r))}return l.algorithm=function(t){return arguments.length?(e=t,l):e},l.merge=function(e){return arguments.length?(n=e,l):n},l.skipUndefined=function(e){return arguments.length?(t=e,l):t},l};var r=l(n(1492)),a=l(n(3288)),o=l(n(1703)),i=n(5418);function l(e){return e&&e.__esModule?e:{default:e}}},1703:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},6930:function(e,t){"use strict";function n(e,t,n){var r=t[n];if("function"!==typeof r)throw new Error("Attempt to rebind "+n+" which isn't a function on the source object");return function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var i=r.apply(t,a);return i===t?e:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var i=!0,l=!1,u=void 0;try{for(var s,c=a[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var g=s.value;e[g]=n(e,t,g)}}catch(d){l=!0,u=d}finally{try{!i&&c.return&&c.return()}finally{if(l)throw u}}return e}},3289:function(e,t){"use strict";function n(e){return"[object Date]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;var r=0,a=0,o=void 0;for(o in t)if(a++,t.hasOwnProperty(o)&&!e.hasOwnProperty(o)||(i=e[o],l=t[o],!(n(i)&&n(l)?i.getTime()===l.getTime():i===l)))return!1;var i,l;for(o in e)r++;return r===a}},4512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=void 0,t=10,n=o.default,r=void 0,a=void 0,l=0,u=void 0,s=function(o){var s=a||(0,i.path)(r),c=(0,i.functor)(t).apply(this,arguments),g=o.slice(l,c+l).map(s),d=0,p=(0,i.functor)(e);return o.map((function(e,t){return t<l+c-1?p(s(e),t,u):(t>=l+c&&(g.shift(),g.push(s(e,t))),n(g,t,d++,u))}))};return s.undefinedValue=function(t){return arguments.length?(e=t,s):e},s.windowSize=function(e){return arguments.length?(t=e,s):t},s.misc=function(e){return arguments.length?(u=e,s):u},s.accumulator=function(e){return arguments.length?(n=e,s):n},s.skipInitial=function(e){return arguments.length?(l=e,s):l},s.sourcePath=function(e){return arguments.length?(r=e,s):r},s.source=function(e){return arguments.length?(a=e,s):a},s};var r,a=n(1703),o=(r=a)&&r.__esModule?r:{default:r},i=n(5418)},9009:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStrokeDasharrayCanvas=function(e){var t=n(e).split(",");return 1===t.length?[]:t.map((function(e){return Number(e)}))};t.strokeDashTypes=["Solid","ShortDash","ShortDash2","ShortDot","ShortDashDot","ShortDashDotDot","Dot","Dash","LongDash","DashDot","LongDashDot","LongDashDotDot"];var n=t.getStrokeDasharray=function(e){switch(e){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"8, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}}},3288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=i.default;function t(){var t=arguments.length;if(!t)return[];var r=(0,a.min)(arguments,n),o=void 0,i=new Array(r);for(o=-1;++o<r;){for(var l=-1,u=i[o]=new Array(t);++l<t;)u[l]=arguments[l][o];i[o]=e.apply(this,i[o])}return i}function n(e){return e.length}return t.combine=function(n){return arguments.length?(e=n,t):e},t};var r,a=n(6263),o=n(1492),i=(r=o)&&r.__esModule?r:{default:r}},6263:function(e,t,n){"use strict";function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function a(e){var t;return 1===e.length&&(t=e,e=function(e,n){return r(t(e),n)}),{left:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;e(t[o],n)<0?r=o+1:a=o}return r},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;e(t[o],n)>0?a=o:r=o+1}return r}}}n.r(t),n.d(t,{ascending:function(){return r},bisect:function(){return u},bisectLeft:function(){return l},bisectRight:function(){return i},bisector:function(){return a},cross:function(){return g},descending:function(){return d},deviation:function(){return f},extent:function(){return C},histogram:function(){return R},max:function(){return N},mean:function(){return E},median:function(){return D},merge:function(){return X},min:function(){return J},pairs:function(){return s},permute:function(){return H},quantile:function(){return W},range:function(){return y},scan:function(){return Y},shuffle:function(){return T},sum:function(){return M},thresholdFreedmanDiaconis:function(){return V},thresholdScott:function(){return F},thresholdSturges:function(){return G},tickIncrement:function(){return B},tickStep:function(){return x},ticks:function(){return w},transpose:function(){return K},variance:function(){return h},zip:function(){return z}});var o=a(r),i=o.right,l=o.left,u=i;function s(e,t){null==t&&(t=c);for(var n=0,r=e.length-1,a=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(a,a=e[++n]);return o}function c(e,t){return[e,t]}function g(e,t,n){var r,a,o,i,l=e.length,u=t.length,s=new Array(l*u);for(null==n&&(n=c),r=o=0;r<l;++r)for(i=e[r],a=0;a<u;++a,++o)s[o]=n(i,t[a]);return s}function d(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function p(e){return null===e?NaN:+e}function h(e,t){var n,r,a=e.length,o=0,i=-1,l=0,u=0;if(null==t)for(;++i<a;)isNaN(n=p(e[i]))||(u+=(r=n-l)*(n-(l+=r/++o)));else for(;++i<a;)isNaN(n=p(t(e[i],i,e)))||(u+=(r=n-l)*(n-(l+=r/++o)));if(o>1)return u/(o-1)}function f(e,t){var n=h(e,t);return n?Math.sqrt(n):n}function C(e,t){var n,r,a,o=e.length,i=-1;if(null==t){for(;++i<o;)if(null!=(n=e[i])&&n>=n)for(r=a=n;++i<o;)null!=(n=e[i])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++i<o;)if(null!=(n=t(e[i],i,e))&&n>=n)for(r=a=n;++i<o;)null!=(n=t(e[i],i,e))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]}var I=Array.prototype,m=I.slice,v=I.map;function b(e){return function(){return e}}function A(e){return e}function y(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++r<a;)o[r]=e+r*n;return o}var k=Math.sqrt(50),Z=Math.sqrt(10),S=Math.sqrt(2);function w(e,t,n){var r,a,o,i,l=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(i=B(e,t,n))||!isFinite(i))return[];if(i>0)for(e=Math.ceil(e/i),t=Math.floor(t/i),o=new Array(a=Math.ceil(t-e+1));++l<a;)o[l]=(e+l)*i;else for(e=Math.floor(e*i),t=Math.ceil(t*i),o=new Array(a=Math.ceil(e-t+1));++l<a;)o[l]=(e-l)/i;return r&&o.reverse(),o}function B(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,a);return a>=0?(o>=k?10:o>=Z?5:o>=S?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=k?10:o>=Z?5:o>=S?2:1)}function x(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=k?a*=10:o>=Z?a*=5:o>=S&&(a*=2),t<e?-a:a}function G(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function R(){var e=A,t=C,n=G;function r(r){var a,o,i=r.length,l=new Array(i);for(a=0;a<i;++a)l[a]=e(r[a],a,r);var s=t(l),c=s[0],g=s[1],d=n(l,c,g);Array.isArray(d)||(d=x(c,g,d),d=y(Math.ceil(c/d)*d,g,d));for(var p=d.length;d[0]<=c;)d.shift(),--p;for(;d[p-1]>g;)d.pop(),--p;var h,f=new Array(p+1);for(a=0;a<=p;++a)(h=f[a]=[]).x0=a>0?d[a-1]:c,h.x1=a<p?d[a]:g;for(a=0;a<i;++a)c<=(o=l[a])&&o<=g&&f[u(d,o,0,p)].push(r[a]);return f}return r.value=function(t){return arguments.length?(e="function"===typeof t?t:b(t),r):e},r.domain=function(e){return arguments.length?(t="function"===typeof e?e:b([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"===typeof e?e:Array.isArray(e)?b(m.call(e)):b(e),r):n},r}function W(e,t,n){if(null==n&&(n=p),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,o=Math.floor(a),i=+n(e[o],o,e);return i+(+n(e[o+1],o+1,e)-i)*(a-o)}}function V(e,t,n){return e=v.call(e,p).sort(r),Math.ceil((n-t)/(2*(W(e,.75)-W(e,.25))*Math.pow(e.length,-1/3)))}function F(e,t,n){return Math.ceil((n-t)/(3.5*f(e)*Math.pow(e.length,-1/3)))}function N(e,t){var n,r,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<a;)null!=(n=e[o])&&n>r&&(r=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<a;)null!=(n=t(e[o],o,e))&&n>r&&(r=n);return r}function E(e,t){var n,r=e.length,a=r,o=-1,i=0;if(null==t)for(;++o<r;)isNaN(n=p(e[o]))?--a:i+=n;else for(;++o<r;)isNaN(n=p(t(e[o],o,e)))?--a:i+=n;if(a)return i/a}function D(e,t){var n,a=e.length,o=-1,i=[];if(null==t)for(;++o<a;)isNaN(n=p(e[o]))||i.push(n);else for(;++o<a;)isNaN(n=p(t(e[o],o,e)))||i.push(n);return W(i.sort(r),.5)}function X(e){for(var t,n,r,a=e.length,o=-1,i=0;++o<a;)i+=e[o].length;for(n=new Array(i);--a>=0;)for(t=(r=e[a]).length;--t>=0;)n[--i]=r[t];return n}function J(e,t){var n,r,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<a;)null!=(n=e[o])&&r>n&&(r=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<a;)null!=(n=t(e[o],o,e))&&r>n&&(r=n);return r}function H(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r}function Y(e,t){if(n=e.length){var n,a,o=0,i=0,l=e[i];for(null==t&&(t=r);++o<n;)(t(a=e[o],l)<0||0!==t(l,l))&&(l=a,i=o);return 0===t(l,l)?i:void 0}}function T(e,t,n){for(var r,a,o=(null==n?e.length:n)-(t=null==t?0:+t);o;)a=Math.random()*o--|0,r=e[o+t],e[o+t]=e[a+t],e[a+t]=r;return e}function M(e,t){var n,r=e.length,a=-1,o=0;if(null==t)for(;++a<r;)(n=+e[a])&&(o+=n);else for(;++a<r;)(n=+t(e[a],a,e))&&(o+=n);return o}function K(e){if(!(a=e.length))return[];for(var t=-1,n=J(e,P),r=new Array(n);++t<n;)for(var a,o=-1,i=r[t]=new Array(a);++o<a;)i[o]=e[o][t];return r}function P(e){return e.length}function z(){return K(arguments)}},3135:function(e,t,n){"use strict";function r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}n.d(t,{Z:function(){return r}})},984:function(e,t,n){"use strict";n.r(t),n.d(t,{interpolateCool:function(){return zr},interpolateCubehelixDefault:function(){return Kr},interpolateInferno:function(){return Qr},interpolateMagma:function(){return jr},interpolatePlasma:function(){return qr},interpolateRainbow:function(){return _r},interpolateViridis:function(){return Ur},interpolateWarm:function(){return Pr},scaleBand:function(){return c},scaleIdentity:function(){return Fe},scaleImplicit:function(){return u},scaleLinear:function(){return Ve},scaleLog:function(){return Te},scaleOrdinal:function(){return s},scalePoint:function(){return d},scalePow:function(){return Ke},scaleQuantile:function(){return ze},scaleQuantize:function(){return Le},scaleSequential:function(){return $r},scaleSqrt:function(){return Pe},scaleThreshold:function(){return _e},scaleTime:function(){return fr},scaleUtc:function(){return yr},schemeCategory10:function(){return Zr},schemeCategory20:function(){return Br},schemeCategory20b:function(){return Sr},schemeCategory20c:function(){return wr}});var r=n(6263),a=n(3904),o=Array.prototype,i=o.map,l=o.slice,u={name:"implicit"};function s(e){var t=(0,a.map)(),n=[],r=u;function o(a){var o=a+"",i=t.get(o);if(!i){if(r!==u)return r;t.set(o,i=n.push(a))}return e[(i-1)%e.length]}return e=null==e?[]:l.call(e),o.domain=function(e){if(!arguments.length)return n.slice();n=[],t=(0,a.map)();for(var r,i,l=-1,u=e.length;++l<u;)t.has(i=(r=e[l])+"")||t.set(i,n.push(r));return o},o.range=function(t){return arguments.length?(e=l.call(t),o):e.slice()},o.unknown=function(e){return arguments.length?(r=e,o):r},o.copy=function(){return s().domain(n).range(e).unknown(r)},o}function c(){var e,t,n=s().unknown(void 0),a=n.domain,o=n.range,i=[0,1],l=!1,u=0,g=0,d=.5;function p(){var n=a().length,s=i[1]<i[0],c=i[s-0],p=i[1-s];e=(p-c)/Math.max(1,n-u+2*g),l&&(e=Math.floor(e)),c+=(p-c-e*(n-u))*d,t=e*(1-u),l&&(c=Math.round(c),t=Math.round(t));var h=(0,r.range)(n).map((function(t){return c+e*t}));return o(s?h.reverse():h)}return delete n.unknown,n.domain=function(e){return arguments.length?(a(e),p()):a()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],p()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],l=!0,p()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(l=!!e,p()):l},n.padding=function(e){return arguments.length?(u=g=Math.max(0,Math.min(1,e)),p()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),p()):u},n.paddingOuter=function(e){return arguments.length?(g=Math.max(0,Math.min(1,e)),p()):g},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),p()):d},n.copy=function(){return c().domain(a()).range(i).round(l).paddingInner(u).paddingOuter(g).align(d)},p()}function g(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return g(t())},e}function d(){return g(c().paddingInner(1))}var p=n(3135);function h(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function f(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function C(){}var I=.7,m=1/I,v="\\s*([+-]?\\d+)\\s*",b="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",A="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",y=/^#([0-9a-f]{3,8})$/,k=new RegExp("^rgb\\("+[v,v,v]+"\\)$"),Z=new RegExp("^rgb\\("+[A,A,A]+"\\)$"),S=new RegExp("^rgba\\("+[v,v,v,b]+"\\)$"),w=new RegExp("^rgba\\("+[A,A,A,b]+"\\)$"),B=new RegExp("^hsl\\("+[b,A,A]+"\\)$"),x=new RegExp("^hsla\\("+[b,A,A,b]+"\\)$"),G={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function R(){return this.rgb().formatHex()}function W(){return this.rgb().formatRgb()}function V(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=y.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?F(t):3===n?new X(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?N(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?N(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=k.exec(e))?new X(t[1],t[2],t[3],1):(t=Z.exec(e))?new X(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=S.exec(e))?N(t[1],t[2],t[3],t[4]):(t=w.exec(e))?N(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=B.exec(e))?T(t[1],t[2]/100,t[3]/100,1):(t=x.exec(e))?T(t[1],t[2]/100,t[3]/100,t[4]):G.hasOwnProperty(e)?F(G[e]):"transparent"===e?new X(NaN,NaN,NaN,0):null}function F(e){return new X(e>>16&255,e>>8&255,255&e,1)}function N(e,t,n,r){return r<=0&&(e=t=n=NaN),new X(e,t,n,r)}function E(e){return e instanceof C||(e=V(e)),e?new X((e=e.rgb()).r,e.g,e.b,e.opacity):new X}function D(e,t,n,r){return 1===arguments.length?E(e):new X(e,t,n,null==r?1:r)}function X(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function J(){return"#"+Y(this.r)+Y(this.g)+Y(this.b)}function H(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Y(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function T(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new K(e,t,n,r)}function M(e){if(e instanceof K)return new K(e.h,e.s,e.l,e.opacity);if(e instanceof C||(e=V(e)),!e)return new K;if(e instanceof K)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,l=o-a,u=(o+a)/2;return l?(i=t===o?(n-r)/l+6*(n<r):n===o?(r-t)/l+2:(t-n)/l+4,l/=u<.5?o+a:2-o-a,i*=60):l=u>0&&u<1?0:i,new K(i,l,u,e.opacity)}function K(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function P(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function z(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}function L(e){return function(){return e}}function _(e,t){return function(n){return e+n*t}}function O(e){return 1===(e=+e)?U:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):L(isNaN(t)?n:t)}}function U(e,t){var n=t-e;return n?_(e,n):L(isNaN(e)?t:e)}h(C,V,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:R,formatHex:R,formatHsl:function(){return M(this).formatHsl()},formatRgb:W,toString:W}),h(X,D,f(C,{brighter:function(e){return e=null==e?m:Math.pow(m,e),new X(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?I:Math.pow(I,e),new X(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J,formatHex:J,formatRgb:H,toString:H})),h(K,(function(e,t,n,r){return 1===arguments.length?M(e):new K(e,t,n,null==r?1:r)}),f(C,{brighter:function(e){return e=null==e?m:Math.pow(m,e),new K(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?I:Math.pow(I,e),new K(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new X(P(e>=240?e-240:e+120,a,r),P(e,a,r),P(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var j=function e(t){var n=O(t);function r(e,t){var r=n((e=D(e)).r,(t=D(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=U(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Q(e){return function(t){var n,r,a=t.length,o=new Array(a),i=new Array(a),l=new Array(a);for(n=0;n<a;++n)r=D(t[n]),o[n]=r.r||0,i[n]=r.g||0,l[n]=r.b||0;return o=e(o),i=e(i),l=e(l),r.opacity=1,function(e){return r.r=o(e),r.g=i(e),r.b=l(e),r+""}}}Q((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],i=r>0?e[r-1]:2*a-o,l=r<t-1?e[r+2]:2*o-a;return z((n-r/t)*t,i,a,o,l)}})),Q((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],i=e[(r+1)%t],l=e[(r+2)%t];return z((n-r/t)*t,a,o,i,l)}}));function q(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=oe(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=o[n](e);return i}}function $(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ee(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=oe(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var te=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ne=new RegExp(te.source,"g");function re(e,t){var n,r,a,o=te.lastIndex=ne.lastIndex=0,i=-1,l=[],u=[];for(e+="",t+="";(n=te.exec(e))&&(r=ne.exec(t));)(a=r.index)>o&&(a=t.slice(o,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(r=r[0])?l[i]?l[i]+=r:l[++i]=r:(l[++i]=null,u.push({i:i,x:(0,p.Z)(n,r)})),o=ne.lastIndex;return o<t.length&&(a=t.slice(o),l[i]?l[i]+=a:l[++i]=a),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)l[(n=u[r]).i]=n.x(e);return l.join("")})}function ae(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<r;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function oe(e,t){var n,r,a=typeof t;return null==t||"boolean"===a?L(t):("number"===a?p.Z:"string"===a?(n=V(t))?(t=n,j):re:t instanceof V?j:t instanceof Date?$:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?q:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?ee:p.Z:ae))(e,t)}function ie(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function le(e){return function(){return e}}function ue(e){return+e}var se=[0,1];function ce(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:le(t)}function ge(e,t,n,r){var a=e[0],o=e[1],i=t[0],l=t[1];return o<a?(a=n(o,a),i=r(l,i)):(a=n(a,o),i=r(i,l)),function(e){return i(a(e))}}function de(e,t,n,a){var o=Math.min(e.length,t.length)-1,i=new Array(o),l=new Array(o),u=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<o;)i[u]=n(e[u],e[u+1]),l[u]=a(t[u],t[u+1]);return function(t){var n=(0,r.bisect)(e,t,1,o)-1;return l[n](i[n](t))}}function pe(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function he(e,t){var n,r,a,o=se,u=se,s=oe,c=!1;function g(){return n=Math.min(o.length,u.length)>2?de:ge,r=a=null,d}function d(t){return(r||(r=n(o,u,c?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,s)))(+t)}return d.invert=function(e){return(a||(a=n(u,o,ce,c?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}(t):t)))(+e)},d.domain=function(e){return arguments.length?(o=i.call(e,ue),g()):o.slice()},d.range=function(e){return arguments.length?(u=l.call(e),g()):u.slice()},d.rangeRound=function(e){return u=l.call(e),s=ie,g()},d.clamp=function(e){return arguments.length?(c=!!e,g()):c},d.interpolate=function(e){return arguments.length?(s=e,g()):s},g()}var fe,Ce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ie(e){if(!(t=Ce.exec(e)))throw new Error("invalid format: "+e);var t;return new me({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function me(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function ve(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function be(e){return(e=ve(Math.abs(e)))?e[1]:NaN}function Ae(e,t){var n=ve(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}Ie.prototype=me.prototype,me.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ye={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Ae(100*e,t)},r:Ae,s:function(e,t){var n=ve(e,t);if(!n)return e+"";var r=n[0],a=n[1],o=a-(fe=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ve(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function ke(e){return e}var Ze,Se,we,Be=Array.prototype.map,xe=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Ge(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?ke:(t=Be.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,o=[],i=0,l=t[0],u=0;a>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),o.push(e.substring(a-=l,a+l)),!((u+=l+1)>r));)l=t[i=(i+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?ke:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Be.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",s=void 0===e.minus?"-":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function g(e){var t=(e=Ie(e)).fill,n=e.align,g=e.sign,d=e.symbol,p=e.zero,h=e.width,f=e.comma,C=e.precision,I=e.trim,m=e.type;"n"===m?(f=!0,m="g"):ye[m]||(void 0===C&&(C=12),I=!0,m="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var v="$"===d?a:"#"===d&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===d?o:/[%p]/.test(m)?u:"",A=ye[m],y=/[defgprs%]/.test(m);function k(e){var a,o,u,d=v,k=b;if("c"===m)k=A(e)+k,e="";else{var Z=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:A(Math.abs(e),C),I&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),Z&&0===+e&&"+"!==g&&(Z=!1),d=(Z?"("===g?g:s:"-"===g||"("===g?"":g)+d,k=("s"===m?xe[8+fe/3]:"")+k+(Z&&"("===g?")":""),y)for(a=-1,o=e.length;++a<o;)if(48>(u=e.charCodeAt(a))||u>57){k=(46===u?i+e.slice(a+1):e.slice(a))+k,e=e.slice(0,a);break}}f&&!p&&(e=r(e,1/0));var S=d.length+e.length+k.length,w=S<h?new Array(h-S+1).join(t):"";switch(f&&p&&(e=r(w+e,w.length?h-k.length:1/0),w=""),n){case"<":e=d+e+k+w;break;case"=":e=d+w+e+k;break;case"^":e=w.slice(0,S=w.length>>1)+d+e+k+w.slice(S);break;default:e=w+d+e+k}return l(e)}return C=void 0===C?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C)),k.toString=function(){return e+""},k}return{format:g,formatPrefix:function(e,t){var n=g(((e=Ie(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(be(t)/3))),a=Math.pow(10,-r),o=xe[8+r/3];return function(e){return n(a*e)+o}}}}function Re(e,t,n){var a,o=e[0],i=e[e.length-1],l=(0,r.tickStep)(o,i,null==t?10:t);switch((n=Ie(null==n?",f":n)).type){case"s":var u=Math.max(Math.abs(o),Math.abs(i));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(be(t)/3)))-be(Math.abs(e)))}(l,u))||(n.precision=a),we(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,be(t)-be(e))+1}(l,Math.max(Math.abs(o),Math.abs(i))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-be(Math.abs(e)))}(l))||(n.precision=a-2*("%"===n.type))}return Se(n)}function We(e){var t=e.domain;return e.ticks=function(e){var n=t();return(0,r.ticks)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Re(t(),e,n)},e.nice=function(n){null==n&&(n=10);var a,o=t(),i=0,l=o.length-1,u=o[i],s=o[l];return s<u&&(a=u,u=s,s=a,a=i,i=l,l=a),(a=(0,r.tickIncrement)(u,s,n))>0?(u=Math.floor(u/a)*a,s=Math.ceil(s/a)*a,a=(0,r.tickIncrement)(u,s,n)):a<0&&(u=Math.ceil(u*a)/a,s=Math.floor(s*a)/a,a=(0,r.tickIncrement)(u,s,n)),a>0?(o[i]=Math.floor(u/a)*a,o[l]=Math.ceil(s/a)*a,t(o)):a<0&&(o[i]=Math.ceil(u*a)/a,o[l]=Math.floor(s*a)/a,t(o)),e},e}function Ve(){var e=he(ce,p.Z);return e.copy=function(){return pe(e,Ve())},We(e)}function Fe(){var e=[0,1];function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=i.call(n,ue),t):e.slice()},t.copy=function(){return Fe().domain(e)},We(t)}function Ne(e,t){var n,r=0,a=(e=e.slice()).length-1,o=e[r],i=e[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),e[r]=t.floor(o),e[a]=t.ceil(i),e}function Ee(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:le(t)}function De(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function Xe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Je(e){return 10===e?Xe:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function He(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function Ye(e){return function(t){return-e(-t)}}function Te(){var e=he(Ee,De).domain([1,10]),t=e.domain,n=10,a=He(10),o=Je(10);function i(){return a=He(n),o=Je(n),t()[0]<0&&(a=Ye(a),o=Ye(o)),e}return e.base=function(e){return arguments.length?(n=+e,i()):n},e.domain=function(e){return arguments.length?(t(e),i()):t()},e.ticks=function(e){var i,l=t(),u=l[0],s=l[l.length-1];(i=s<u)&&(p=u,u=s,s=p);var c,g,d,p=a(u),h=a(s),f=null==e?10:+e,C=[];if(!(n%1)&&h-p<f){if(p=Math.round(p)-1,h=Math.round(h)+1,u>0){for(;p<h;++p)for(g=1,c=o(p);g<n;++g)if(!((d=c*g)<u)){if(d>s)break;C.push(d)}}else for(;p<h;++p)for(g=n-1,c=o(p);g>=1;--g)if(!((d=c*g)<u)){if(d>s)break;C.push(d)}}else C=(0,r.ticks)(p,h,Math.min(h-p,f)).map(o);return i?C.reverse():C},e.tickFormat=function(t,r){if(null==r&&(r=10===n?".0e":","),"function"!==typeof r&&(r=Se(r)),t===1/0)return r;null==t&&(t=10);var i=Math.max(1,n*t/e.ticks().length);return function(e){var t=e/o(Math.round(a(e)));return t*n<n-.5&&(t*=n),t<=i?r(e):""}},e.nice=function(){return t(Ne(t(),{floor:function(e){return o(Math.floor(a(e)))},ceil:function(e){return o(Math.ceil(a(e)))}}))},e.copy=function(){return pe(e,Te().base(n))},e}function Me(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function Ke(){var e=1,t=he((function(t,n){return(n=Me(n,e)-(t=Me(t,e)))?function(r){return(Me(r,e)-t)/n}:le(n)}),(function(t,n){return n=Me(n,e)-(t=Me(t,e)),function(r){return Me(t+n*r,1/e)}})),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return pe(t,Ke().exponent(e))},We(t)}function Pe(){return Ke().exponent(.5)}function ze(){var e=[],t=[],n=[];function a(){var a=0,i=Math.max(1,t.length);for(n=new Array(i-1);++a<i;)n[a-1]=(0,r.quantile)(e,a/i);return o}function o(e){if(!isNaN(e=+e))return t[(0,r.bisect)(n,e)]}return o.invertExtent=function(r){var a=t.indexOf(r);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,o=0,i=t.length;o<i;++o)null==(n=t[o])||isNaN(n=+n)||e.push(n);return e.sort(r.ascending),a()},o.range=function(e){return arguments.length?(t=l.call(e),a()):t.slice()},o.quantiles=function(){return n.slice()},o.copy=function(){return ze().domain(e).range(t)},o}function Le(){var e=0,t=1,n=1,a=[.5],o=[0,1];function i(e){if(e<=e)return o[(0,r.bisect)(a,e,0,n)]}function u(){var r=-1;for(a=new Array(n);++r<n;)a[r]=((r+1)*t-(r-n)*e)/(n+1);return i}return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[1],u()):[e,t]},i.range=function(e){return arguments.length?(n=(o=l.call(e)).length-1,u()):o.slice()},i.invertExtent=function(r){var i=o.indexOf(r);return i<0?[NaN,NaN]:i<1?[e,a[0]]:i>=n?[a[n-1],t]:[a[i-1],a[i]]},i.copy=function(){return Le().domain([e,t]).range(o)},We(i)}function _e(){var e=[.5],t=[0,1],n=1;function a(a){if(a<=a)return t[(0,r.bisect)(e,a,0,n)]}return a.domain=function(r){return arguments.length?(e=l.call(r),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(r){return arguments.length?(t=l.call(r),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(n){var r=t.indexOf(n);return[e[r-1],e[r]]},a.copy=function(){return _e().domain(e).range(t)},a}Ze=Ge({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Se=Ze.format,we=Ze.formatPrefix;var Oe=new Date,Ue=new Date;function je(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,o){var i,l=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return l;do{l.push(i=new Date(+n)),t(n,o),e(n)}while(i<n&&n<r);return l},a.filter=function(n){return je((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return Oe.setTime(+t),Ue.setTime(+r),e(Oe),e(Ue),Math.floor(n(Oe,Ue))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var Qe=je((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));Qe.every=function(e){return isFinite(e=Math.floor(e))&&e>0?je((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var qe=Qe,$e=(Qe.range,je((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),et=$e,tt=($e.range,1e3),nt=6e4,rt=36e5,at=864e5,ot=6048e5;function it(e){return je((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nt)/ot}))}var lt=it(0),ut=it(1),st=it(2),ct=it(3),gt=it(4),dt=it(5),pt=it(6),ht=(lt.range,ut.range,st.range,ct.range,gt.range,dt.range,pt.range,je((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nt)/at}),(function(e){return e.getDate()-1}))),ft=ht,Ct=(ht.range,je((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*tt-e.getMinutes()*nt)}),(function(e,t){e.setTime(+e+t*rt)}),(function(e,t){return(t-e)/rt}),(function(e){return e.getHours()}))),It=Ct,mt=(Ct.range,je((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*tt)}),(function(e,t){e.setTime(+e+t*nt)}),(function(e,t){return(t-e)/nt}),(function(e){return e.getMinutes()}))),vt=mt,bt=(mt.range,je((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*tt)}),(function(e,t){return(t-e)/tt}),(function(e){return e.getUTCSeconds()}))),At=bt,yt=(bt.range,je((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));yt.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?je((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):yt:null};var kt=yt;yt.range;function Zt(e){return je((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/ot}))}var St=Zt(0),wt=Zt(1),Bt=Zt(2),xt=Zt(3),Gt=Zt(4),Rt=Zt(5),Wt=Zt(6),Vt=(St.range,wt.range,Bt.range,xt.range,Gt.range,Rt.range,Wt.range,je((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/at}),(function(e){return e.getUTCDate()-1}))),Ft=Vt,Nt=(Vt.range,je((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Nt.every=function(e){return isFinite(e=Math.floor(e))&&e>0?je((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Et=Nt;Nt.range;function Dt(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Xt(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Jt(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Ht,Yt,Tt,Mt={"-":"",_:" ",0:"0"},Kt=/^\s*\d+/,Pt=/^%/,zt=/[\\^$*+?|[\]().{}]/g;function Lt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function _t(e){return e.replace(zt,"\\$&")}function Ot(e){return new RegExp("^(?:"+e.map(_t).join("|")+")","i")}function Ut(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function jt(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Qt(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function qt(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function $t(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function en(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function tn(e,t,n){var r=Kt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function nn(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function rn(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function an(e,t,n){var r=Kt.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function on(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ln(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function un(e,t,n){var r=Kt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function sn(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function cn(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function gn(e,t,n){var r=Kt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function dn(e,t,n){var r=Kt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function pn(e,t,n){var r=Kt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hn(e,t,n){var r=Pt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fn(e,t,n){var r=Kt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Cn(e,t,n){var r=Kt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function In(e,t){return Lt(e.getDate(),t,2)}function mn(e,t){return Lt(e.getHours(),t,2)}function vn(e,t){return Lt(e.getHours()%12||12,t,2)}function bn(e,t){return Lt(1+ft.count(qe(e),e),t,3)}function An(e,t){return Lt(e.getMilliseconds(),t,3)}function yn(e,t){return An(e,t)+"000"}function kn(e,t){return Lt(e.getMonth()+1,t,2)}function Zn(e,t){return Lt(e.getMinutes(),t,2)}function Sn(e,t){return Lt(e.getSeconds(),t,2)}function wn(e){var t=e.getDay();return 0===t?7:t}function Bn(e,t){return Lt(lt.count(qe(e)-1,e),t,2)}function xn(e){var t=e.getDay();return t>=4||0===t?gt(e):gt.ceil(e)}function Gn(e,t){return e=xn(e),Lt(gt.count(qe(e),e)+(4===qe(e).getDay()),t,2)}function Rn(e){return e.getDay()}function Wn(e,t){return Lt(ut.count(qe(e)-1,e),t,2)}function Vn(e,t){return Lt(e.getFullYear()%100,t,2)}function Fn(e,t){return Lt((e=xn(e)).getFullYear()%100,t,2)}function Nn(e,t){return Lt(e.getFullYear()%1e4,t,4)}function En(e,t){var n=e.getDay();return Lt((e=n>=4||0===n?gt(e):gt.ceil(e)).getFullYear()%1e4,t,4)}function Dn(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Lt(t/60|0,"0",2)+Lt(t%60,"0",2)}function Xn(e,t){return Lt(e.getUTCDate(),t,2)}function Jn(e,t){return Lt(e.getUTCHours(),t,2)}function Hn(e,t){return Lt(e.getUTCHours()%12||12,t,2)}function Yn(e,t){return Lt(1+Ft.count(Et(e),e),t,3)}function Tn(e,t){return Lt(e.getUTCMilliseconds(),t,3)}function Mn(e,t){return Tn(e,t)+"000"}function Kn(e,t){return Lt(e.getUTCMonth()+1,t,2)}function Pn(e,t){return Lt(e.getUTCMinutes(),t,2)}function zn(e,t){return Lt(e.getUTCSeconds(),t,2)}function Ln(e){var t=e.getUTCDay();return 0===t?7:t}function _n(e,t){return Lt(St.count(Et(e)-1,e),t,2)}function On(e){var t=e.getUTCDay();return t>=4||0===t?Gt(e):Gt.ceil(e)}function Un(e,t){return e=On(e),Lt(Gt.count(Et(e),e)+(4===Et(e).getUTCDay()),t,2)}function jn(e){return e.getUTCDay()}function Qn(e,t){return Lt(wt.count(Et(e)-1,e),t,2)}function qn(e,t){return Lt(e.getUTCFullYear()%100,t,2)}function $n(e,t){return Lt((e=On(e)).getUTCFullYear()%100,t,2)}function er(e,t){return Lt(e.getUTCFullYear()%1e4,t,4)}function tr(e,t){var n=e.getUTCDay();return Lt((e=n>=4||0===n?Gt(e):Gt.ceil(e)).getUTCFullYear()%1e4,t,4)}function nr(){return"+0000"}function rr(){return"%"}function ar(e){return+e}function or(e){return Math.floor(+e/1e3)}!function(e){Ht=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,l=e.months,u=e.shortMonths,s=Ot(a),c=Ut(a),g=Ot(o),d=Ut(o),p=Ot(i),h=Ut(i),f=Ot(l),C=Ut(l),I=Ot(u),m=Ut(u),v={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:In,e:In,f:yn,g:Fn,G:En,H:mn,I:vn,j:bn,L:An,m:kn,M:Zn,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:ar,s:or,S:Sn,u:wn,U:Bn,V:Gn,w:Rn,W:Wn,x:null,X:null,y:Vn,Y:Nn,Z:Dn,"%":rr},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:Xn,e:Xn,f:Mn,g:$n,G:tr,H:Jn,I:Hn,j:Yn,L:Tn,m:Kn,M:Pn,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:ar,s:or,S:zn,u:Ln,U:_n,V:Un,w:jn,W:Qn,x:null,X:null,y:qn,Y:er,Z:nr,"%":rr},A={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=I.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=C[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return Z(e,t,n,r)},d:ln,e:ln,f:pn,g:nn,G:tn,H:sn,I:sn,j:un,L:dn,m:on,M:cn,p:function(e,t,n){var r=s.exec(t.slice(n));return r?(e.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:an,Q:fn,s:Cn,S:gn,u:Qt,U:qt,V:$t,w:jt,W:en,x:function(e,t,r){return Z(e,n,t,r)},X:function(e,t,n){return Z(e,r,t,n)},y:nn,Y:tn,Z:rn,"%":hn};function y(e,t){return function(n){var r,a,o,i=[],l=-1,u=0,s=e.length;for(n instanceof Date||(n=new Date(+n));++l<s;)37===e.charCodeAt(l)&&(i.push(e.slice(u,l)),null!=(a=Mt[r=e.charAt(++l)])?r=e.charAt(++l):a="e"===r?" ":"0",(o=t[r])&&(r=o(n,a)),i.push(r),u=l+1);return i.push(e.slice(u,l)),i.join("")}}function k(e,t){return function(n){var r,a,o=Jt(1900,void 0,1);if(Z(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(r=Xt(Jt(o.y,0,1))).getUTCDay(),r=a>4||0===a?wt.ceil(r):wt(r),r=Ft.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(a=(r=Dt(Jt(o.y,0,1))).getDay(),r=a>4||0===a?ut.ceil(r):ut(r),r=ft.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Xt(Jt(o.y,0,1)).getUTCDay():Dt(Jt(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Xt(o)):Dt(o)}}function Z(e,t,n,r){for(var a,o,i=0,l=t.length,u=n.length;i<l;){if(r>=u)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(o=A[a in Mt?t.charAt(i++):a])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return v.x=y(n,v),v.X=y(r,v),v.c=y(t,v),b.x=y(n,b),b.X=y(r,b),b.c=y(t,b),{format:function(e){var t=y(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=y(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}(e),Yt=Ht.format,Ht.parse,Tt=Ht.utcFormat,Ht.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ir=1e3,lr=6e4,ur=36e5,sr=864e5,cr=2592e6,gr=31536e6;function dr(e){return new Date(e)}function pr(e){return e instanceof Date?+e:+new Date(+e)}function hr(e,t,n,a,o,l,u,s,c){var g=he(ce,p.Z),d=g.invert,h=g.domain,f=c(".%L"),C=c(":%S"),I=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),b=c("%b %d"),A=c("%B"),y=c("%Y"),k=[[u,1,ir],[u,5,5e3],[u,15,15e3],[u,30,3e4],[l,1,lr],[l,5,3e5],[l,15,9e5],[l,30,18e5],[o,1,ur],[o,3,108e5],[o,6,216e5],[o,12,432e5],[a,1,sr],[a,2,1728e5],[n,1,6048e5],[t,1,cr],[t,3,7776e6],[e,1,gr]];function Z(r){return(u(r)<r?f:l(r)<r?C:o(r)<r?I:a(r)<r?m:t(r)<r?n(r)<r?v:b:e(r)<r?A:y)(r)}function S(t,n,a,o){if(null==t&&(t=10),"number"===typeof t){var i=Math.abs(a-n)/t,l=(0,r.bisector)((function(e){return e[2]})).right(k,i);l===k.length?(o=(0,r.tickStep)(n/gr,a/gr,t),t=e):l?(o=(l=k[i/k[l-1][2]<k[l][2]/i?l-1:l])[1],t=l[0]):(o=Math.max((0,r.tickStep)(n,a,t),1),t=s)}return null==o?t:t.every(o)}return g.invert=function(e){return new Date(d(e))},g.domain=function(e){return arguments.length?h(i.call(e,pr)):h().map(dr)},g.ticks=function(e,t){var n,r=h(),a=r[0],o=r[r.length-1],i=o<a;return i&&(n=a,a=o,o=n),n=(n=S(e,a,o,t))?n.range(a,o+1):[],i?n.reverse():n},g.tickFormat=function(e,t){return null==t?Z:c(t)},g.nice=function(e,t){var n=h();return(e=S(e,n[0],n[n.length-1],t))?h(Ne(n,e)):g},g.copy=function(){return pe(g,hr(e,t,n,a,o,l,u,s,c))},g}function fr(){return hr(qe,et,lt,ft,It,vt,At,kt,Yt).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}var Cr=je((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),Ir=Cr,mr=(Cr.range,je((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*rt)}),(function(e,t){return(t-e)/rt}),(function(e){return e.getUTCHours()}))),vr=mr,br=(mr.range,je((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*nt)}),(function(e,t){return(t-e)/nt}),(function(e){return e.getUTCMinutes()}))),Ar=br;br.range;function yr(){return hr(Et,Ir,St,Ft,vr,Ar,At,kt,Tt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function kr(e){return e.match(/.{6}/g).map((function(e){return"#"+e}))}var Zr=kr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Sr=kr("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),wr=kr("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Br=kr("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),xr=Math.PI/180,Gr=180/Math.PI,Rr=-.14861,Wr=1.78277,Vr=-.29227,Fr=-.90649,Nr=1.97294,Er=Nr*Fr,Dr=Nr*Wr,Xr=Wr*Vr-Fr*Rr;function Jr(e){if(e instanceof Yr)return new Yr(e.h,e.s,e.l,e.opacity);e instanceof X||(e=E(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(Xr*r+Er*t-Dr*n)/(Xr+Er-Dr),o=r-a,i=(Nr*(n-a)-Vr*o)/Fr,l=Math.sqrt(i*i+o*o)/(Nr*a*(1-a)),u=l?Math.atan2(i,o)*Gr-120:NaN;return new Yr(u<0?u+360:u,l,a,e.opacity)}function Hr(e,t,n,r){return 1===arguments.length?Jr(e):new Yr(e,t,n,null==r?1:r)}function Yr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Tr(e){return function t(n){function r(t,r){var a=e((t=Hr(t)).h,(r=Hr(r)).h),o=U(t.s,r.s),i=U(t.l,r.l),l=U(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=o(e),t.l=i(Math.pow(e,n)),t.opacity=l(e),t+""}}return n=+n,r.gamma=t,r}(1)}h(Yr,Hr,f(C,{brighter:function(e){return e=null==e?m:Math.pow(m,e),new Yr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?I:Math.pow(I,e),new Yr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*xr,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new X(255*(t+n*(Rr*r+Wr*a)),255*(t+n*(Vr*r+Fr*a)),255*(t+n*(Nr*r)),this.opacity)}}));Tr((function(e,t){var n=t-e;return n?_(e,n>180||n<-180?n-360*Math.round(n/360):n):L(isNaN(e)?t:e)}));var Mr=Tr(U),Kr=Mr(Hr(300,.5,0),Hr(-240,.5,1)),Pr=Mr(Hr(-100,.75,.35),Hr(80,1.5,.8)),zr=Mr(Hr(260,.75,.35),Hr(80,1.5,.8)),Lr=Hr();function _r(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Lr.h=360*e-100,Lr.s=1.5-1.5*t,Lr.l=.8-.9*t,Lr+""}function Or(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var Ur=Or(kr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),jr=Or(kr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Qr=Or(kr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),qr=Or(kr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function $r(e){var t=0,n=1,r=!1;function a(a){var o=(a-t)/(n-t);return e(r?Math.max(0,Math.min(1,o)):o)}return a.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],a):[t,n]},a.clamp=function(e){return arguments.length?(r=!!e,a):r},a.interpolator=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return $r(e).domain([t,n]).clamp(r)},We(a)}},5452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(2791)),o=u(n(1694)),i=u(n(7689)),l=u(n(8478));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var c=function(){return{}};t.default={data:[],loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return t=null===t||void 0===t?"":t,(e="string"===typeof(e=null===e||void 0===e?"":e)?e.toLowerCase():e)>(t="string"===typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:c,getTableProps:c,getTheadGroupProps:c,getTheadGroupTrProps:c,getTheadGroupThProps:c,getTheadProps:c,getTheadTrProps:c,getTheadThProps:c,getTheadFilterProps:c,getTheadFilterTrProps:c,getTheadFilterThProps:c,getTbodyProps:c,getTrGroupProps:c,getTrProps:c,getTdProps:c,getTfootProps:c,getTfootTrProps:c,getTfootTdProps:c,getPaginationProps:c,getLoadingProps:c,getNoDataProps:c,getResizerProps:c,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,className:"",style:{},getProps:c,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:c,footerClassName:"",footerStyle:{},getFooterProps:c,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",TableComponent:i.default.makeTemplateComponent("rt-table","Table"),TheadComponent:i.default.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:i.default.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:i.default.makeTemplateComponent("rt-tr-group","TrGroup"),TrComponent:i.default.makeTemplateComponent("rt-tr","Tr"),ThComponent:function(e){var t=e.toggleSort,n=e.className,i=e.children,l=s(e,["toggleSort","className","children"]);return a.default.createElement("div",r({className:(0,o.default)(n,"rt-th"),onClick:function(e){t&&t(e)}},l),i)},TdComponent:i.default.makeTemplateComponent("rt-td","Td"),TfootComponent:i.default.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange;return a.default.createElement("input",{type:"text",style:{width:"100%"},value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return a.default.createElement("div",{className:(0,o.default)("rt-expander",t&&"-open")},"\u2022")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return a.default.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter((function(e){return"undefined"!==typeof e[n.id]})).map((function(e,r){return a.default.createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")}));return a.default.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:l.default,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,i=e.loadingText,l=s(e,["className","loading","loadingText"]);return a.default.createElement("div",r({className:(0,o.default)("-loading",{"-active":n},t)},l),a.default.createElement("div",{className:"-loading-inner"},i))},NoDataComponent:i.default.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:i.default.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return a.default.createElement("span",null,"\xa0")}}},6883:function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),l=h(i),u=h(n(1694)),s=h(n(7689)),c=h(n(3823)),g=h(n(7970)),d=h(n(5452)),p=h(n(8461));function h(e){return e&&e.__esModule?e:{default:e}}d.default;var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:0,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,o=t.className,i=t.style,c=t.getProps,g=t.getTableProps,p=t.getTheadGroupProps,h=t.getTheadGroupTrProps,f=t.getTheadGroupThProps,C=t.getTheadProps,I=t.getTheadTrProps,m=t.getTheadThProps,v=t.getTheadFilterProps,b=t.getTheadFilterTrProps,A=t.getTheadFilterThProps,y=t.getTbodyProps,k=t.getTrGroupProps,Z=t.getTrProps,S=t.getTdProps,w=t.getTfootProps,B=t.getTfootTrProps,x=t.getTfootTdProps,G=t.getPaginationProps,R=t.getLoadingProps,W=t.getNoDataProps,V=t.getResizerProps,F=t.showPagination,N=t.showPaginationTop,E=t.showPaginationBottom,D=t.manual,X=t.loadingText,J=t.noDataText,H=t.sortable,Y=t.resizable,T=t.filterable,M=t.pivotIDKey,K=t.pivotValKey,P=t.pivotBy,z=t.subRowsKey,L=t.aggregatedKey,_=t.originalKey,O=t.indexKey,U=t.groupedByPivotKey,j=t.loading,Q=t.pageSize,q=t.page,$=t.sorted,ee=t.filtered,te=t.resized,ne=t.expanded,re=t.pages,ae=t.onExpandedChange,oe=t.TableComponent,ie=t.TheadComponent,le=t.TbodyComponent,ue=t.TrGroupComponent,se=t.TrComponent,ce=t.ThComponent,ge=t.TdComponent,de=t.TfootComponent,pe=t.PaginationComponent,he=t.LoadingComponent,fe=t.SubComponent,Ce=t.NoDataComponent,Ie=t.ResizerComponent,me=t.ExpanderComponent,ve=t.PivotValueComponent,be=t.PivotComponent,Ae=t.AggregatedComponent,ye=t.FilterComponent,ke=t.PadRowComponent,Ze=t.resolvedData,Se=t.allVisibleColumns,we=t.headerGroups,Be=t.hasHeaderGroups,xe=t.sortedData,Ge=t.currentlyResizing,Re=Q*q,We=Re+Q,Ve=D?Ze:xe.slice(Re,We),Fe=this.getMinRows(),Ne=s.default.range(Math.max(Fe-Ve.length,0)),Ee=Se.some((function(e){return e.Footer})),De=T||Se.some((function(e){return e.filterable})),Xe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map((function(t,i){o++;var l=a({},t,{_viewIndex:o}),u=n.concat([i]);if(l[z]&&s.default.get(ne,u)){var c=e(l[z],u,o),g=r(c,2);l[z]=g[0],o=g[1]}return l})),o]}(Ve),Je=r(Xe,1);Ve=Je[0];var He=q>0,Ye=q+1<re,Te=s.default.sum(Se.map((function(e){var t=te.find((function(t){return t.id===e.id}))||{};return s.default.getFirstDefined(t.value,e.width,e.minWidth)}))),Me=-1,Ke=a({},t,{startRow:Re,endRow:We,pageRows:Ve,minRows:Fe,padRows:Ne,hasColumnFooter:Ee,canPrevious:He,canNext:Ye,rowMinWidth:Te}),Pe=function(t,n){var r=function(e){return(te.find((function(t){return t.id===e.id}))||{}).value},o=s.default.sum(t.columns.map((function(e){return e.width||r(e)?0:e.minWidth}))),i=s.default.sum(t.columns.map((function(e){return s.default.getFirstDefined(r(e),e.width,e.minWidth)}))),c=s.default.sum(t.columns.map((function(e){return s.default.getFirstDefined(r(e),e.width,e.maxWidth)}))),g=s.default.splitProps(f(Ke,void 0,t,e)),d=s.default.splitProps(t.getHeaderProps(Ke,void 0,t,e)),p=[t.headerClassName,g.className,d.className],h=a({},t.headerStyle,g.style,d.style),C=a({},g.rest,d.rest),I={flex:o+" 0 auto",width:s.default.asPx(i),maxWidth:s.default.asPx(c)};return l.default.createElement(ce,a({key:n+"-"+t.id,className:(0,u.default)(p),style:a({},h,I)},C),s.default.normalizeComponent(t.Header,{data:xe,column:t}))},ze=function(t,n){var r=te.find((function(e){return e.id===t.id}))||{},o=$.find((function(e){return e.id===t.id})),i="function"===typeof t.show?t.show():t.show,c=s.default.getFirstDefined(r.value,t.width,t.minWidth),g=s.default.getFirstDefined(r.value,t.width,t.maxWidth),d=s.default.splitProps(m(Ke,void 0,t,e)),p=s.default.splitProps(t.getHeaderProps(Ke,void 0,t,e)),h=[t.headerClassName,d.className,p.className],f=a({},t.headerStyle,d.style,p.style),C=a({},d.rest,p.rest),I=s.default.getFirstDefined(t.resizable,Y,!1),v=I?l.default.createElement(Ie,a({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},nt)):null,b=s.default.getFirstDefined(t.sortable,H,!1);return l.default.createElement(ce,a({key:n+"-"+t.id,className:(0,u.default)(h,I&&"rt-resizable-header",o?o.desc?"-sort-desc":"-sort-asc":"",b&&"-cursor-pointer",!i&&"-hidden",P&&P.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:a({},f,{flex:c+" 0 auto",width:s.default.asPx(c),maxWidth:s.default.asPx(g)}),toggleSort:function(n){b&&e.sortColumn(t,n.shiftKey)}},C),l.default.createElement("div",{className:(0,u.default)(I&&"rt-resizable-header-content")},s.default.normalizeComponent(t.Header,{data:xe,column:t})),v)},Le=function(t,n){var r=te.find((function(e){return e.id===t.id}))||{},o=s.default.getFirstDefined(r.value,t.width,t.minWidth),i=s.default.getFirstDefined(r.value,t.width,t.maxWidth),c=s.default.splitProps(A(Ke,void 0,t,e)),g=s.default.splitProps(t.getHeaderProps(Ke,void 0,t,e)),p=[t.headerClassName,c.className,g.className],h=a({},t.headerStyle,c.style,g.style),f=a({},c.rest,g.rest),C=ee.find((function(e){return e.id===t.id})),I=t.Filter||ye,m=s.default.getFirstDefined(t.filterable,T,!1);return l.default.createElement(ce,a({key:n+"-"+t.id,className:(0,u.default)(p),style:a({},h,{flex:o+" 0 auto",width:s.default.asPx(o),maxWidth:s.default.asPx(i)})},f),m?s.default.normalizeComponent(I,{column:t,filter:C,onChange:function(n){return e.filterColumn(t,n)}},d.default.column.Filter):null)},_e=function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={original:n[_],row:n,index:n[O],viewIndex:++Me,pageSize:Q,page:q,level:o.length,nestingPath:o.concat([r]),aggregated:n[L],groupedByPivot:n[U],subRows:n[z]},c=s.default.get(ne,i.nestingPath),g=k(Ke,i,void 0,e),d=s.default.splitProps(Z(Ke,i,void 0,e));return l.default.createElement(ue,a({key:i.nestingPath.join("_")},g),l.default.createElement(se,a({className:(0,u.default)(d.className,n._viewIndex%2?"-even":"-odd"),style:d.style},d.rest),Se.map((function(t,r){var o=te.find((function(e){return e.id===t.id}))||{},g="function"===typeof t.show?t.show():t.show,d=s.default.getFirstDefined(o.value,t.width,t.minWidth),p=s.default.getFirstDefined(o.value,t.width,t.maxWidth),h=s.default.splitProps(S(Ke,i,t,e)),f=s.default.splitProps(t.getProps(Ke,i,t,e)),C=[h.className,t.className,f.className],I=a({},h.style,t.style,f.style),m=a({},i,{isExpanded:c,column:a({},t),value:i.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:te,show:g,width:d,maxWidth:p,tdProps:h,columnProps:f,classes:C,styles:I}),v=m.value,b=void 0,A=void 0,y=void 0,k=s.default.normalizeComponent(t.Cell,m,v),Z=t.Aggregated||(t.aggregate?t.Cell:Ae),w=t.Expander||me,B=t.PivotValue||ve,x=be||function(e){return l.default.createElement("div",null,l.default.createElement(w,e),l.default.createElement(B,e))},G=t.Pivot||x;(m.pivoted||m.expander)&&(m.expandable=!0,b=!0,!m.pivoted||m.subRows||fe||(m.expandable=!1)),m.pivoted?(A=i.row[M]===t.id&&m.subRows,y=P.indexOf(t.id)>P.indexOf(i.row[M])&&m.subRows,k=A?s.default.normalizeComponent(G,a({},m,{value:n[K]}),n[K]):y?s.default.normalizeComponent(Z,m,v):null):m.aggregated&&(k=s.default.normalizeComponent(Z,m,v)),m.expander&&(k=s.default.normalizeComponent(w,m,n[K]),P&&(m.groupedByPivot&&(k=null),m.subRows||fe||(k=null)));var R=b?function(t){var n=s.default.clone(ne);return n=c?s.default.set(n,m.nestingPath,!1):s.default.set(n,m.nestingPath,{}),e.setStateWithData({expanded:n},(function(){ae&&ae(n,m.nestingPath,t)}))}:function(){},W={onClick:R};return h.rest.onClick&&(W.onClick=function(e){h.rest.onClick(e,(function(){return R(e)}))}),f.rest.onClick&&(W.onClick=function(e){f.rest.onClick(e,(function(){return R(e)}))}),l.default.createElement(ge,a({key:r+"-"+t.id,className:(0,u.default)(C,!g&&"hidden",m.expandable&&"rt-expandable",(A||y)&&"rt-pivot"),style:a({},I,{flex:d+" 0 auto",width:s.default.asPx(d),maxWidth:s.default.asPx(p)})},h.rest,f.rest,W),k)}))),i.subRows&&c&&i.subRows.map((function(e,n){return t(e,n,i.nestingPath)})),fe&&!i.subRows&&c&&fe(i))},Oe=function(t,n){var r=k(Ke,void 0,void 0,e),o=s.default.splitProps(Z(Ke,void 0,void 0,e));return l.default.createElement(ue,a({key:n},r),l.default.createElement(se,{className:(0,u.default)("-padRow",(Ve.length+n)%2?"-even":"-odd",o.className),style:o.style||{}},Se.map(Ue)))},Ue=function(t,n){var r=te.find((function(e){return e.id===t.id}))||{},o="function"===typeof t.show?t.show():t.show,i=s.default.getFirstDefined(r.value,t.width,t.minWidth),c=i,g=s.default.getFirstDefined(r.value,t.width,t.maxWidth),d=s.default.splitProps(S(Ke,void 0,t,e)),p=s.default.splitProps(t.getProps(Ke,void 0,t,e)),h=[d.className,t.className,p.className],f=a({},d.style,t.style,p.style);return l.default.createElement(ge,a({key:n+"-"+t.id,className:(0,u.default)(h,!o&&"hidden"),style:a({},f,{flex:c+" 0 auto",width:s.default.asPx(i),maxWidth:s.default.asPx(g)})},d.rest),s.default.normalizeComponent(ke))},je=function(t,n){var r=te.find((function(e){return e.id===t.id}))||{},o="function"===typeof t.show?t.show():t.show,i=s.default.getFirstDefined(r.value,t.width,t.minWidth),c=s.default.getFirstDefined(r.value,t.width,t.maxWidth),g=s.default.splitProps(x(Ke,void 0,void 0,e)),d=s.default.splitProps(t.getProps(Ke,void 0,t,e)),p=s.default.splitProps(t.getFooterProps(Ke,void 0,t,e)),h=[g.className,t.className,d.className,p.className],f=a({},g.style,t.style,d.style,p.style);return l.default.createElement(ge,a({key:n+"-"+t.id,className:(0,u.default)(h,!o&&"hidden"),style:a({},f,{flex:i+" 0 auto",width:s.default.asPx(i),maxWidth:s.default.asPx(c)})},d.rest,g.rest,p.rest),s.default.normalizeComponent(t.Footer,{data:xe,column:t}))},Qe=s.default.splitProps(c(Ke,void 0,void 0,this)),qe=s.default.splitProps(g(Ke,void 0,void 0,this)),$e=s.default.splitProps(y(Ke,void 0,void 0,this)),et=R(Ke,void 0,void 0,this),tt=W(Ke,void 0,void 0,this),nt=V(Ke,void 0,void 0,this),rt=function(){var n=function(){var n=s.default.splitProps(G(Ke,void 0,void 0,e));return l.default.createElement(pe,a({},t,{pages:re,canPrevious:He,canNext:Ye,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:n.className,style:n.style},n.rest))}();return l.default.createElement("div",a({className:(0,u.default)("ReactTable",o,Qe.className),style:a({},i,Qe.style)},Qe.rest),F&&N?l.default.createElement("div",{className:"pagination-top"},n):null,l.default.createElement(oe,a({className:(0,u.default)(qe.className,Ge?"rt-resizing":""),style:qe.style},qe.rest),Be?function(){var t=s.default.splitProps(p(Ke,void 0,void 0,e)),n=s.default.splitProps(h(Ke,void 0,void 0,e));return l.default.createElement(ie,a({className:(0,u.default)("-headerGroups",t.className),style:a({},t.style,{minWidth:Te+"px"})},t.rest),l.default.createElement(se,a({className:n.className,style:n.style},n.rest),we.map(Pe)))}():null,function(){var t=s.default.splitProps(C(Ke,void 0,void 0,e)),n=s.default.splitProps(I(Ke,void 0,void 0,e));return l.default.createElement(ie,a({className:(0,u.default)("-header",t.className),style:a({},t.style,{minWidth:Te+"px"})},t.rest),l.default.createElement(se,a({className:n.className,style:n.style},n.rest),Se.map(ze)))}(),De?function(){var t=s.default.splitProps(v(Ke,void 0,void 0,e)),n=s.default.splitProps(b(Ke,void 0,void 0,e));return l.default.createElement(ie,a({className:(0,u.default)("-filters",t.className),style:a({},t.style,{minWidth:Te+"px"})},t.rest),l.default.createElement(se,a({className:n.className,style:n.style},n.rest),Se.map(Le)))}():null,l.default.createElement(le,a({className:(0,u.default)($e.className),style:a({},$e.style,{minWidth:Te+"px"})},$e.rest),Ve.map((function(e,t){return _e(e,t)})),Ne.map(Oe)),Ee?function(){var t=w(Ke,void 0,void 0,e),n=s.default.splitProps(B(Ke,void 0,void 0,e));return l.default.createElement(de,a({className:t.className,style:a({},t.style,{minWidth:Te+"px"})},t.rest),l.default.createElement(se,a({className:(0,u.default)(n.className),style:n.style},n.rest),Se.map(je)))}():null),F&&E?l.default.createElement("div",{className:"pagination-bottom"},n):null,!Ve.length&&l.default.createElement(Ce,tt,s.default.normalizeComponent(J)),l.default.createElement(he,a({loading:j,loadingText:X},et)))};return n?n(Ke,rt,this):rt()}}]),t}((0,g.default)((0,c.default)(i.Component)));f.propTypes=p.default,f.defaultProps=d.default},3823:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=function(e){return function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState()))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach((function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])}));["sortable","filterable","resizable"].forEach((function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",a="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[a]}})),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),a=this.getResolvedState({},e),o=a.freezeWhenExpanded;if(a.frozen=!1,o)for(var i=Object.keys(a.expanded),l=0;l<i.length;l++)if(a.expanded[i[l]]){a.frozen=!0;break}return(r.frozen&&!a.frozen||r.sorted!==a.sorted||r.filtered!==a.filtered||r.showFilters!==a.showFilters||!a.frozen&&r.resolvedData!==a.resolvedData)&&((r.sorted!==a.sorted&&this.props.collapseOnSortingChange||r.filtered!==a.filtered||r.showFilters!==a.showFilters||r.sortedData&&!a.frozen&&r.resolvedData!==a.resolvedData&&this.props.collapseOnDataChange)&&(a.expanded={}),Object.assign(a,this.getSortedData(a))),r.filtered!==a.filtered&&(a.page=0),a.sortedData&&(a.pages=a.manual?a.pages:Math.ceil(a.sortedData.length/a.pageSize),a.page=Math.max(a.page>=a.pages?a.pages-1:a.page,0)),this.setState(a,(function(){t&&t(),r.page===a.page&&r.pageSize===a.pageSize&&r.sorted===a.sorted&&r.filtered===a.filtered||n.fireFetchData()}))}}]),t}(e)}},7970:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=s(n(2791)),u=s(n(7689));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=function(e){return function(e){function t(){return d(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getResolvedState",value:function(e,t){return o({},u.default.compactObject(this.state),u.default.compactObject(this.props),u.default.compactObject(t),u.default.compactObject(e))}},{key:"getDataModel",value:function(e){var t=this,n=e.columns,i=e.pivotBy,s=void 0===i?[]:i,d=e.data,p=e.pivotIDKey,h=e.pivotValKey,f=e.subRowsKey,C=e.aggregatedKey,I=e.nestingLevelKey,m=e.originalKey,v=e.indexKey,b=e.groupedByPivotKey,A=e.SubComponent,y=!1;n.forEach((function(e){e.columns&&(y=!0)}));var k=[].concat(g(n)),Z=n.find((function(e){return e.expander||e.columns&&e.columns.some((function(e){return e.expander}))}));Z&&!Z.expander&&(Z=Z.columns.find((function(e){return e.expander}))),A&&!Z&&(k=[Z={expander:!0}].concat(g(k)));var S=function(e,n){var r=function(e,n){var r=void 0;if((r=e.expander?o({},t.props.column,t.props.expanderDefaults,e):o({},t.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),n&&(r.parentColumn=n),"string"===typeof r.accessor){var i=function(){r.id=r.id||r.accessor;var e=r.accessor;return r.accessor=function(t){return u.default.get(t,e)},{v:r}}();if("object"===("undefined"===typeof i?"undefined":a(i)))return i.v}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(e){}),r}(e,n);return w.push(r),r},w=[],B=k.map((function(e,t){return e.columns?o({},e,{columns:e.columns.map((function(t){return S(t,e)}))}):S(e)})).slice(),x=[],G=(B=(B=B.map((function(e,t){if(e.columns){var n=e.columns.filter((function(e){return!(s.indexOf(e.id)>-1)&&u.default.getFirstDefined(e.show,!0)}));return o({},e,{columns:n})}return e}))).filter((function(e){return e.columns?e.columns.length:!(s.indexOf(e.id)>-1)&&u.default.getFirstDefined(e.show,!0)}))).findIndex((function(e){return e.pivot}));s.length&&function(){var e=[];s.forEach((function(t){var n=w.find((function(e){return e.id===t}));n&&e.push(n)}));var n=e.reduce((function(e,t){return e&&e===t.parentColumn&&t.parentColumn}),e[0].parentColumn),r=y&&n.Header,a={Header:r=r||function(){return l.default.createElement("strong",null,"Pivoted")},columns:e.map((function(e){return o({},t.props.pivotDefaults,e,{pivoted:!0})}))};G>=0?(a=o({},B[G],a),B.splice(G,1,a)):B.unshift(a)}();var R=[],W=[],V=function(e,n){R.push(o({},t.props.column,n,{columns:e})),W=[]};B.forEach((function(e,t){if(e.columns)return x=x.concat(e.columns),W.length>0&&V(W),void V(e.columns,e);x.push(e),W.push(e)})),y&&W.length>0&&V(W);var F=function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(c(r={},m,t),c(r,v,n),c(r,f,t[f]),c(r,I,a),r);return w.forEach((function(e){e.expander||(o[e.id]=e.accessor(t))})),o[f]&&(o[f]=o[f].map((function(t,n){return e(t,n,a+1)}))),o},N=d.map((function(e,t){return F(e,t)})),E=function(e){var t={};return D.forEach((function(n){var r=e.map((function(e){return e[n.id]}));t[n.id]=n.aggregate(r,e)})),t},D=x.filter((function(e){return!e.expander&&e.aggregate}));return s.length&&(N=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a===n.length)return t;var i=Object.entries(u.default.groupBy(t,n[a])).map((function(e){var t,o=r(e,2),i=o[0],l=o[1];return c(t={},p,n[a]),c(t,h,i),c(t,n[a],i),c(t,f,l),c(t,I,a),c(t,b,!0),t}));return i=i.map((function(t){var r,i=e(t[f],n,a+1);return o({},t,(c(r={},f,i),c(r,C,!0),r),E(i))}))}(N,s)),o({},e,{resolvedData:N,allVisibleColumns:x,headerGroups:R,allDecoratedColumns:w,hasHeaderGroups:y})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,a=e.defaultFilterMethod,o=e.resolvedData,i=e.allVisibleColumns,l=e.allDecoratedColumns,u={};return l.filter((function(e){return e.sortMethod})).forEach((function(e){u[e.id]=e.sortMethod})),{sortedData:t?o:this.sortData(this.filterData(o,r,a,i),n,u)}}},{key:"fireFetchData",value:function(){this.props.onFetchData(this.getResolvedState(),this)}},{key:"getPropOrState",value:function(e){return u.default.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return u.default.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var a=this,i=e;return t.length&&(i=(i=t.reduce((function(e,t){var a=r.find((function(e){return e.id===t.id}));if(!a||!1===a.filterable)return e;var o=a.filterMethod||n;return a.filterAll?o(t,e,a):e.filter((function(e){return o(t,e,a)}))}),i)).map((function(e){return e[a.props.subRowsKey]?o({},e,c({},a.props.subRowsKey,a.filterData(e[a.props.subRowsKey],t,n,r))):e})).filter((function(e){return!e[a.props.subRowsKey]||e[a.props.subRowsKey].length>0}))),i}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var a=(this.props.orderByMethod||u.default.orderBy)(e,t.map((function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}})),t.map((function(e){return!e.desc})),this.props.indexKey);return a.forEach((function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))})),a}},{key:"getMinRows",value:function(){return u.default.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,a={page:e};r&&(a.expanded={}),this.setStateWithData(a,(function(){n&&n(e)}))}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,a=Math.floor(r/e);this.setStateWithData({pageSize:e,page:a},(function(){t&&t(e,a)}))}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,a=n.skipNextSort,o=n.defaultSortDesc,i=e.hasOwnProperty("defaultSortDesc")?e.defaultSortDesc:o,l=!i;if(a)this.setStateWithData({skipNextSort:!1});else{var s=this.props.onSortedChange,c=u.default.clone(r||[]).map((function(e){return e.desc=u.default.isSortingDesc(e),e}));if(u.default.isArray(e))!function(){var n=c.findIndex((function(t){return t.id===e[0].id}));n>-1?(c[n].desc===l?t?c.splice(n,e.length):e.forEach((function(e,t){c[n+t].desc=i})):e.forEach((function(e,t){c[n+t].desc=l})),t||(c=c.slice(n,e.length))):c=t?c.concat(e.map((function(e){return{id:e.id,desc:i}}))):e.map((function(e){return{id:e.id,desc:i}}))}();else{var g=c.findIndex((function(t){return t.id===e.id}));if(g>-1){var d=c[g];d.desc===l?t?c.splice(g,1):(d.desc=i,c=[d]):(d.desc=l,t||(c=[d]))}else t?c.push({id:e.id,desc:i}):c=[{id:e.id,desc:i}]}this.setStateWithData({page:!r.length&&c.length||!t?0:this.state.page,sorted:c},(function(){s&&s(c,e,t)}))}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,a=(n||[]).filter((function(t){if(t.id!==e.id)return!0}));""!==t&&a.push({id:e.id,value:t}),this.setStateWithData({filtered:a},(function(){r&&r(a,e,t)}))}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var a=e.target.parentElement.getBoundingClientRect().width,o=void 0;o=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:o,parentWidth:a}},(function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))}))}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props.onResizedChange,n=this.getResolvedState(),r=n.resized,a=n.currentlyResizing,o=r.filter((function(e){return e.id!==a.id})),i=void 0;"touchmove"===e.type?i=e.changedTouches[0].pageX:"mousemove"===e.type&&(i=e.pageX);var l=Math.max(a.parentWidth+i-a.startX,11);o.push({id:a.id,value:l}),this.setStateWithData({resized:o},(function(){t&&t(o,e)}))}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),t}(e)}},8478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2791),i=u(o),l=u(n(1694));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return i.default.createElement("button",a({type:"button"},e,{className:"-btn"}),e.children)},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,a=t.showPageSizeOptions,o=t.pageSizeOptions,u=t.pageSize,c=t.showPageJump,g=t.canPrevious,d=t.canNext,p=t.onPageSizeChange,h=t.className,f=t.PreviousComponent,C=void 0===f?s:f,I=t.NextComponent,m=void 0===I?s:I;return i.default.createElement("div",{className:(0,l.default)(h,"-pagination"),style:this.props.paginationStyle},i.default.createElement("div",{className:"-previous"},i.default.createElement(C,{onClick:function(t){g&&e.changePage(r-1)},disabled:!g},this.props.previousText)),i.default.createElement("div",{className:"-center"},i.default.createElement("span",{className:"-pageInfo"},this.props.pageText," ",c?i.default.createElement("div",{className:"-pageJump"},i.default.createElement("input",{type:""===this.state.page?"text":"number",onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},value:""===this.state.page?"":this.state.page+1,onBlur:this.applyPage,onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()}})):i.default.createElement("span",{className:"-currentPage"},r+1)," ",this.props.ofText," ",i.default.createElement("span",{className:"-totalPages"},n||1)),a&&i.default.createElement("span",{className:"select-wrap -pageSizeOptions"},i.default.createElement("select",{onChange:function(e){return p(Number(e.target.value))},value:u},o.map((function(t,n){return i.default.createElement("option",{key:n,value:t},t," ",e.props.rowsText)}))))),i.default.createElement("div",{className:"-next"},i.default.createElement(m,{onClick:function(t){d&&e.changePage(r+1)},disabled:!d},this.props.nextText)))}}]),t}(o.Component);t.default=c},8461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(2007),o=(r=a)&&r.__esModule?r:{default:r};t.default={data:o.default.array,loading:o.default.bool,showPagination:o.default.bool,showPaginationTop:o.default.bool,showPaginationBottom:o.default.bool,showPageSizeOptions:o.default.bool,pageSizeOptions:o.default.array,defaultPageSize:o.default.number,showPageJump:o.default.bool,collapseOnSortingChange:o.default.bool,collapseOnPageChange:o.default.bool,collapseOnDataChange:o.default.bool,freezeWhenExpanded:o.default.bool,sortable:o.default.bool,resizable:o.default.bool,filterable:o.default.bool,defaultSortDesc:o.default.bool,defaultSorted:o.default.array,defaultFiltered:o.default.array,defaultResized:o.default.array,defaultExpanded:o.default.object,defaultFilterMethod:o.default.func,defaultSortMethod:o.default.func,onPageChange:o.default.func,onPageSizeChange:o.default.func,onSortedChange:o.default.func,onFilteredChange:o.default.func,onResizedChange:o.default.func,onExpandedChange:o.default.func,pivotBy:o.default.array,pivotValKey:o.default.string,pivotIDKey:o.default.string,subRowsKey:o.default.string,aggregatedKey:o.default.string,nestingLevelKey:o.default.string,originalKey:o.default.string,indexKey:o.default.string,groupedByPivotKey:o.default.string,onFetchData:o.default.func,className:o.default.string,style:o.default.object,getProps:o.default.object,getTableProps:o.default.object,getTheadGroupProps:o.default.object,getTheadGroupTrProps:o.default.object,getTheadGroupThProps:o.default.object,getTheadProps:o.default.object,getTheadTrProps:o.default.object,getTheadThProps:o.default.object,getTheadFilterProps:o.default.object,getTheadFilterTrProps:o.default.object,getTheadFilterThProps:o.default.object,getTbodyProps:o.default.object,getTrGroupProps:o.default.object,getTrProps:o.default.object,getTdProps:o.default.object,getTfootProps:o.default.object,getTfootTrProps:o.default.object,getTfootTdProps:o.default.object,getPaginationProps:o.default.object,getLoadingProps:o.default.object,getNoDataProps:o.default.object,getResizerProps:o.default.object,columns:o.default.shape({Cell:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Header:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Footer:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Aggregated:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Pivot:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),PivotValue:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Expander:o.default.oneOfType([o.default.element,o.default.string,o.default.func]),Filter:o.default.oneOfType([o.default.element,o.default.func]),sortable:o.default.bool,resizable:o.default.bool,filterable:o.default.bool,show:o.default.bool,minWidth:o.default.number,className:o.default.string,style:o.default.object,getProps:o.default.object,aggregate:o.default.func,headerClassName:o.default.string,headerStyle:o.default.object,getHeaderProps:o.default.object,footerClassName:o.default.string,footerStyle:o.default.object,getFooterProps:o.default.object,filterMethod:o.default.func,filterAll:o.default.bool,sortMethod:o.default.func}),expanderDefaults:o.default.shape({sortable:o.default.bool,resizable:o.default.bool,filterable:o.default.bool,width:o.default.number}),pivotDefaults:o.default.object,previousText:o.default.string,nextText:o.default.string,loadingText:o.default.string,noDataText:o.default.string,pageText:o.default.string,ofText:o.default.string,rowsText:o.default.string,TableComponent:o.default.element,TheadComponent:o.default.element,TbodyComponent:o.default.element,TrGroupComponent:o.default.element,TrComponent:o.default.element,ThComponent:o.default.element,TdComponent:o.default.element,TfootComponent:o.default.element,FilterComponent:o.default.element,ExpanderComponent:o.default.element,PivotValueComponent:o.default.element,AggregatedComponent:o.default.element,PivotComponent:o.default.element,PaginationComponent:o.default.element,PreviousComponent:o.default.element,NextComponent:o.default.element,LoadingComponent:o.default.element,NoDataComponent:o.default.element,ResizerComponent:o.default.element,PadRowComponent:o.default.element}},7689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=i(n(2791)),o=i(n(1694));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function u(e){return Array.isArray(e)}function s(e){return c(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(u(e))for(var n=0;n<e.length;n++)c(e[n],t);else t.push(e);return t}t.default={get:function(e,t,n){if(!t)return e;var r=s(t),a=void 0;try{a=r.reduce((function(e,t){return e[t]}),e)}catch(o){}return"undefined"!==typeof a?a:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=s(t),a=void 0,o=e;for(;(a=r.shift())&&r.length;)o[a]||(o[a]={}),o=o[a];return o[a]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort((function(e,a){for(var o=0;o<t.length;o++){var i=t[o],l=!1===n[o]||"desc"===n[o],u=i(e,a);if(u)return l?-u:u}return n[0]?e[r]-a[r]:a[r]-e[r]}))},range:function(e){for(var t=[],n=0;n<e;n++)t.push(e);return t},remove:function(e,t){return e.filter((function(n,r){return!!t(n)&&(e.splice(r,1),!0)}))},clone:function(e){try{return JSON.parse(JSON.stringify(e,(function(e,t){return"function"===typeof t?t.toString():t})))}catch(t){return e}},getFirstDefined:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)if("undefined"!==typeof t[r])return t[r]},sum:function(e){return e.reduce((function(e,t){return e+t}),0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,i=t.className,u=l(t,["children","className"]);return a.default.createElement("div",r({className:(0,o.default)(e,i)},u),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce((function(e,n,r){var a="function"===typeof t?t(n,r):n[t];return e[a]=u(e[a])?e[a]:[],e[a].push(n),e}),{})},isArray:u,splitProps:function(e){var t=e.className,n=e.style,r=l(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&"undefined"!==typeof e[n]&&(t[n]=e[n]);return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"===typeof e?Object.getPrototypeOf(e).isReactComponent?a.default.createElement(e,t):e(t):n},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}}},6374:function(e,t,n){"use strict";n(1725);var r=n(2791),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;a=o("react.element"),t.Fragment=o("react.fragment")}var i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,n){var r,o={},s=null,c=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:s,ref:c,props:o,_owner:i.current}}t.jsx=s,t.jsxs=s},9117:function(e,t,n){"use strict";var r=n(1725),a=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,l=60110,u=60112;t.Suspense=60113;var s=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var g=Symbol.for;a=g("react.element"),o=g("react.portal"),t.Fragment=g("react.fragment"),t.StrictMode=g("react.strict_mode"),t.Profiler=g("react.profiler"),i=g("react.provider"),l=g("react.context"),u=g("react.forward_ref"),t.Suspense=g("react.suspense"),s=g("react.memo"),c=g("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f={};function C(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||h}function I(){}function m(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||h}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},I.prototype=C.prototype;var v=m.prototype=new I;v.constructor=m,r(v,C.prototype),v.isPureReactComponent=!0;var b={current:null},A=Object.prototype.hasOwnProperty,y={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,o={},i=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)A.call(t,r)&&!y.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var s=Array(u),c=0;c<u;c++)s[c]=arguments[c+2];o.children=s}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:a,type:e,key:i,ref:l,props:o,_owner:b.current}}function Z(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function w(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function B(e,t,n,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var u=!1;if(null===e)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return i=i(u=e),e=""===r?"."+w(u,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),B(i,t,n,"",(function(e){return e}))):null!=i&&(Z(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var c=r+w(l=e[s],s);u+=B(l,t,n,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),s=0;!(l=e.next()).done;)u+=B(l=l.value,t,n,c=r+w(l,s++),i);else if("object"===l)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function x(e,t,n){if(null==e)return e;var r=[],a=0;return B(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function G(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R={current:null};function W(){var e=R.current;if(null===e)throw Error(p(321));return e}var V={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!Z(e))throw Error(p(143));return e}},t.Component=C,t.PureComponent=m,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=r({},e.props),i=e.key,l=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,u=b.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)A.call(t,c)&&!y.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){s=Array(c);for(var g=0;g<c;g++)s[g]=arguments[g+2];o.children=s}return{$$typeof:a,type:e.type,key:i,ref:l,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:l,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=Z,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:G}},t.memo=function(e,t){return{$$typeof:s,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return W().useCallback(e,t)},t.useContext=function(e,t){return W().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return W().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return W().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return W().useLayoutEffect(e,t)},t.useMemo=function(e,t){return W().useMemo(e,t)},t.useReducer=function(e,t,n){return W().useReducer(e,t,n)},t.useRef=function(e){return W().useRef(e)},t.useState=function(e){return W().useState(e)},t.version="17.0.2"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(W){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof C?t:C,o=Object.create(a.prototype),i=new x(r||[]);return o._invoke=function(e,t,n){var r=g;return function(a,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw o;return R()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===g)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?h:d,u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(W){return{type:"throw",arg:W}}}e.wrap=s;var g="suspendedStart",d="suspendedYield",p="executing",h="completed",f={};function C(){}function I(){}function m(){}var v={};u(v,o,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(G([])));A&&A!==n&&r.call(A,o)&&(v=A);var y=m.prototype=C.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function Z(e,t){function n(a,o,i,l){var u=c(e[a],e,o);if("throw"!==u.type){var s=u.arg,g=s.value;return g&&"object"===typeof g&&r.call(g,"__await")?t.resolve(g.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(g).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var a=c(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function G(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:R}}function R(){return{value:t,done:!0}}return I.prototype=m,u(y,"constructor",m),u(m,"constructor",I),I.displayName=u(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===I||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},k(Z.prototype),u(Z.prototype,i,(function(){return this})),e.AsyncIterator=Z,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new Z(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(y),u(y,l,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=G,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return l.type="throw",l.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;B(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:G(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},8688:function(e,t,n){"use strict";var r=n(7800);function a(e,t,n,a,o){var i=r.writeRtpDescription(e.kind,t);if(i+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),i+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var l=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=l;var u="msid:"+(a?a.id:"-")+" "+l+"\r\n";i+="a="+u,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+u,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+u,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),i}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},a=function(e,t,n,a){var o=r(e.parameters.apt,n),i=r(t.parameters.apt,a);return o&&i&&o.name.toLowerCase()===i.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var i=t.codecs[o];if(r.name.toLowerCase()===i.name.toLowerCase()&&r.clockRate===i.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&i.parameters.apt&&!a(r,i,e.codecs,t.codecs))continue;(i=JSON.parse(JSON.stringify(i))).numChannels=Math.min(r.numChannels,i.numChannels),n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var a=t.headerExtensions[r];if(e.uri===a.uri){n.headerExtensions.push(a);break}}})),n}function i(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function l(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function u(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function s(t,n,r,a){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=a,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var c=function(n){var a=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){a[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw u("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"===typeof r;return a&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=a?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var i=n.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(c.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(c.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),c.prototype.onicecandidate=null,c.prototype.onaddstream=null,c.prototype.ontrack=null,c.prototype.onremovestream=null,c.prototype.onsignalingstatechange=null,c.prototype.oniceconnectionstatechange=null,c.prototype.onconnectionstatechange=null,c.prototype.onicegatheringstatechange=null,c.prototype.onnegotiationneeded=null,c.prototype.ondatachannel=null,c.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},c.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},c.prototype.getConfiguration=function(){return this._config},c.prototype.getLocalStreams=function(){return this.localStreams},c.prototype.getRemoteStreams=function(){return this.remoteStreams},c.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();r.iceTransport=a.iceTransport,r.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(r),r},c.prototype.addTrack=function(t,n){if(this._isClosed)throw u("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw u("InvalidAccessError","Track already exists.");for(var a=0;a<this.transceivers.length;a++)this.transceivers[a].track||this.transceivers[a].kind!==t.kind||(r=this.transceivers[a]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},c.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},c.prototype.removeTrack=function(t){if(this._isClosed)throw u("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw u("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},c.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},c.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},c.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},c.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var a=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(a,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;a.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},a.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),a},c.prototype._gather=function(t,n){var a=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var i=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(a.usingBundle&&n>0)){var i=new Event("icecandidate");i.candidate={sdpMid:t,sdpMLineIndex:n};var l=e.candidate,u=!l||0===Object.keys(l).length;if(u)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),l.component=1,l.ufrag=o.getLocalParameters().usernameFragment;var s=r.writeCandidate(l);i.candidate=Object.assign(i.candidate,r.parseCandidate(s)),i.candidate.candidate=s,i.candidate.toJSON=function(){return{candidate:i.candidate.candidate,sdpMid:i.candidate.sdpMid,sdpMLineIndex:i.candidate.sdpMLineIndex,usernameFragment:i.candidate.usernameFragment}}}var c=r.getMediaSections(a._localDescription.sdp);c[i.candidate.sdpMLineIndex]+=u?"a=end-of-candidates\r\n":"a="+i.candidate.candidate+"\r\n",a._localDescription.sdp=r.getDescription(a._localDescription.sdp)+c.join("");var g=a.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==a.iceGatheringState&&(a.iceGatheringState="gathering",a._emitGatheringStateChange()),u||a._dispatchEvent("icecandidate",i),g&&(a._dispatchEvent("icecandidate",new Event("icecandidate")),a.iceGatheringState="complete",a._emitGatheringStateChange())}},e.setTimeout((function(){i.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},c.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},c.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},c.prototype._transceive=function(e,n,a){var i=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),a&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},c.prototype.setLocalDescription=function(e){var t,n,a=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(u("TypeError",'Unsupported type "'+e.type+'"'));if(!i("setLocalDescription",e.type,a.signalingState)||a._isClosed)return Promise.reject(u("InvalidStateError","Can not set local "+e.type+" in state "+a.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);a.transceivers[t].localCapabilities=n})),a.transceivers.forEach((function(e,t){a._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(a._remoteDescription.sdp),n=t.shift();var l=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var i=a.transceivers[t],u=i.iceGatherer,s=i.iceTransport,c=i.dtlsTransport,g=i.localCapabilities,d=i.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!i.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);l&&(h.role="server"),a.usingBundle&&0!==t||(a._gather(i.mid,t),"new"===s.state&&s.start(u,p,l?"controlling":"controlled"),"new"===c.state&&c.start(h));var f=o(g,d);a._transceive(i,f.codecs.length>0,!1)}}))}return a._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?a._updateSignalingState("have-local-offer"):a._updateSignalingState("stable"),Promise.resolve()},c.prototype.setRemoteDescription=function(a){var c=this;if(-1===["offer","answer"].indexOf(a.type))return Promise.reject(u("TypeError",'Unsupported type "'+a.type+'"'));if(!i("setRemoteDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(u("InvalidStateError","Can not set remote "+a.type+" in state "+c.signalingState));var g={};c.remoteStreams.forEach((function(e){g[e.id]=e}));var d=[],p=r.splitSections(a.sdp),h=p.shift(),f=r.matchPrefix(h,"a=ice-lite").length>0,C=r.matchPrefix(h,"a=group:BUNDLE ").length>0;c.usingBundle=C;var I=r.matchPrefix(h,"a=ice-options:")[0];return c.canTrickleIceCandidates=!!I&&I.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(i,u){var s=r.splitLines(i),p=r.getKind(i),I=r.isRejected(i)&&0===r.matchPrefix(i,"a=bundle-only").length,m=s[0].substr(2).split(" ")[2],v=r.getDirection(i,h),b=r.parseMsid(i),A=r.getMid(i)||r.generateIdentifier();if(I||"application"===p&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m))c.transceivers[u]={mid:A,kind:p,protocol:m,rejected:!0};else{var y,k,Z,S,w,B,x,G,R;!I&&c.transceivers[u]&&c.transceivers[u].rejected&&(c.transceivers[u]=c._createTransceiver(p,!0));var W,V,F=r.parseRtpParameters(i);I||(W=r.getIceParameters(i,h),(V=r.getDtlsParameters(i,h)).role="client"),x=r.parseRtpEncodingParameters(i);var N=r.parseRtcpParameters(i),E=r.matchPrefix(i,"a=end-of-candidates",h).length>0,D=r.matchPrefix(i,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===a.type||"answer"===a.type)&&!I&&C&&u>0&&c.transceivers[u]&&(c._disposeIceAndDtlsTransports(u),c.transceivers[u].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[u].iceTransport=c.transceivers[0].iceTransport,c.transceivers[u].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[u].rtpSender&&c.transceivers[u].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[u].rtpReceiver&&c.transceivers[u].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),"offer"!==a.type||I){if("answer"===a.type&&!I){k=(y=c.transceivers[u]).iceGatherer,Z=y.iceTransport,S=y.dtlsTransport,w=y.rtpReceiver,B=y.sendEncodingParameters,G=y.localCapabilities,c.transceivers[u].recvEncodingParameters=x,c.transceivers[u].remoteCapabilities=F,c.transceivers[u].rtcpParameters=N,D.length&&"new"===Z.state&&(!f&&!E||C&&0!==u?D.forEach((function(e){l(y.iceTransport,e)})):Z.setRemoteCandidates(D)),C&&0!==u||("new"===Z.state&&Z.start(k,W,"controlling"),"new"===S.state&&S.start(V)),!o(y.localCapabilities,y.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&y.sendEncodingParameters[0].rtx&&delete y.sendEncodingParameters[0].rtx,c._transceive(y,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!w||"sendrecv"!==v&&"sendonly"!==v?delete y.rtpReceiver:(R=w.track,b?(g[b.stream]||(g[b.stream]=new e.MediaStream),n(R,g[b.stream]),d.push([R,w,g[b.stream]])):(g.default||(g.default=new e.MediaStream),n(R,g.default),d.push([R,w,g.default])))}}else{(y=c.transceivers[u]||c._createTransceiver(p)).mid=A,y.iceGatherer||(y.iceGatherer=c._createIceGatherer(u,C)),D.length&&"new"===y.iceTransport.state&&(!E||C&&0!==u?D.forEach((function(e){l(y.iceTransport,e)})):y.iceTransport.setRemoteCandidates(D)),G=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(G.codecs=G.codecs.filter((function(e){return"rtx"!==e.name}))),B=y.sendEncodingParameters||[{ssrc:1001*(2*u+2)}];var X,J=!1;if("sendrecv"===v||"sendonly"===v){if(J=!y.rtpReceiver,w=y.rtpReceiver||new e.RTCRtpReceiver(y.dtlsTransport,p),J)R=w.track,b&&"-"===b.stream||(b?(g[b.stream]||(g[b.stream]=new e.MediaStream,Object.defineProperty(g[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(R,"id",{get:function(){return b.track}}),X=g[b.stream]):(g.default||(g.default=new e.MediaStream),X=g.default)),X&&(n(R,X),y.associatedRemoteMediaStreams.push(X)),d.push([R,w,X])}else y.rtpReceiver&&y.rtpReceiver.track&&(y.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===y.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),y.associatedRemoteMediaStreams=[]);y.localCapabilities=G,y.remoteCapabilities=F,y.rtpReceiver=w,y.rtcpParameters=N,y.sendEncodingParameters=B,y.recvEncodingParameters=x,c._transceive(c.transceivers[u],!1,J)}}})),void 0===c._dtlsRole&&(c._dtlsRole="offer"===a.type?"active":"passive"),c._remoteDescription={type:a.type,sdp:a.sdp},"offer"===a.type?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(g).forEach((function(t){var n=g[t];if(n.getTracks().length){if(-1===c.remoteStreams.indexOf(n)){c.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){c._dispatchEvent("addstream",r)}))}d.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&s(c,t,r,[n])}))}})),d.forEach((function(e){e[2]||s(c,e[0],e[1],[])})),e.setTimeout((function(){c&&c.transceivers&&c.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},c.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},c.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},c.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},c.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},c.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},c.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(u("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,i=n.transceivers.filter((function(e){return"video"===e.kind})).length,l=arguments[0];if(l){if(l.mandatory||l.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==l.offerToReceiveAudio&&(o=!0===l.offerToReceiveAudio?1:!1===l.offerToReceiveAudio?0:l.offerToReceiveAudio),void 0!==l.offerToReceiveVideo&&(i=!0===l.offerToReceiveVideo?1:!1===l.offerToReceiveVideo?0:l.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)}));o>0||i>0;)o>0&&(n._createTransceiver("audio"),o--),i>0&&(n._createTransceiver("video"),i--);var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(a,o){var i=a.track,l=a.kind,u=a.mid||r.generateIdentifier();a.mid=u,a.iceGatherer||(a.iceGatherer=n._createIceGatherer(o,n.usingBundle));var s=e.RTCRtpSender.getCapabilities(l);t<15019&&(s.codecs=s.codecs.filter((function(e){return"rtx"!==e.name}))),s.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),a.remoteCapabilities&&a.remoteCapabilities.codecs&&a.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),s.headerExtensions.forEach((function(e){(a.remoteCapabilities&&a.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var c=a.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];i&&t>=15019&&"video"===l&&!c[0].rtx&&(c[0].rtx={ssrc:c[0].ssrc+1}),a.wantReceive&&(a.rtpReceiver=new e.RTCRtpReceiver(a.dtlsTransport,l)),a.localCapabilities=s,a.sendEncodingParameters=c})),"max-compat"!==n._config.bundlePolicy&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){s+=a(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),s+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,s+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))}));var c=new e.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(c)},c.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(u("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(u("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var i=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(i+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n";var l=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>l)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\r\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var u;if(e.stream)"audio"===e.kind?u=e.stream.getAudioTracks()[0]:"video"===e.kind&&(u=e.stream.getVideoTracks()[0]),u&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var s=o(e.localCapabilities,e.remoteCapabilities);!s.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=a(e,s,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")}}));var s=new e.RTCSessionDescription({type:"answer",sdp:i});return Promise.resolve(s)},c.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(a,o){if(!n._remoteDescription)return o(u("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var i=e.sdpMLineIndex;if(e.sdpMid)for(var s=0;s<n.transceivers.length;s++)if(n.transceivers[s].mid===e.sdpMid){i=s;break}var c=n.transceivers[i];if(!c)return o(u("OperationError","Can not add ICE candidate"));if(c.rejected)return a();var g=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===g.protocol&&(0===g.port||9===g.port))return a();if(g.component&&1!==g.component)return a();if((0===i||i>0&&c.iceTransport!==n.transceivers[0].iceTransport)&&!l(c.iceTransport,g))return o(u("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[i]+="a="+(g.type?d:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);a()}))},c.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw u("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var g=["createOffer","createAnswer"];return g.forEach((function(e){var t=c.prototype[e];c.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"===typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"===typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(g=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=c.prototype[e];c.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)}),(function(t){"function"===typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=c.prototype[e];c.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),c}},207:function(e,t){"use strict";var n;!function(){var r=t||{}||this||window;void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n),r.default=r;var a="http://www.w3.org/2000/xmlns/",o="http://www.w3.org/2000/svg",i=/url\(["']?(.+?)["']?\)/,l={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},u=function(e){return e instanceof HTMLElement||e instanceof SVGElement},s=function(e){if(!u(e))throw new Error("an HTMLElement or SVGElement is required; got "+e)},c=function(e){return new Promise((function(t,n){u(e)?t(e):n(new Error("an HTMLElement or SVGElement is required; got "+e))}))},g=function(e){var t=Object.keys(l).filter((function(t){return e.indexOf("."+t)>0})).map((function(e){return l[e]}));return t?t[0]:(console.error("Unknown font format for "+e+". Fonts may not be working correctly."),"application/octet-stream")},d=function(e,t,n){var r=e.viewBox&&e.viewBox.baseVal&&e.viewBox.baseVal[n]||null!==t.getAttribute(n)&&!t.getAttribute(n).match(/%$/)&&parseInt(t.getAttribute(n))||e.getBoundingClientRect()[n]||parseInt(t.style[n])||parseInt(window.getComputedStyle(e).getPropertyValue(n));return"undefined"===typeof r||null===r||isNaN(parseFloat(r))?0:r},p=function(e){for(var t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r),o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return new Blob([r],{type:n})},h=function(e){return Promise.all(Array.from(e.querySelectorAll("image")).map((function(e){var t,n=e.getAttributeNS("http://www.w3.org/1999/xlink","href")||e.getAttribute("href");return n?((t=n)&&0===t.lastIndexOf("http",0)&&-1===t.lastIndexOf(window.location.host)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+(new Date).valueOf()),new Promise((function(t,r){var a=document.createElement("canvas"),o=new Image;o.crossOrigin="anonymous",o.src=n,o.onerror=function(){return r(new Error("Could not load "+n))},o.onload=function(){a.width=o.width,a.height=o.height,a.getContext("2d").drawImage(o,0,0),e.setAttributeNS("http://www.w3.org/1999/xlink","href",a.toDataURL("image/png")),t(!0)}}))):Promise.resolve(null)})))},f={},C=function(e){return Promise.all(e.map((function(e){return new Promise((function(t,n){if(f[e.url])return t(f[e.url]);var r=new XMLHttpRequest;r.addEventListener("load",(function(){var n=function(e){for(var t="",n=new Uint8Array(e),r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)}(r.response),a=e.text.replace(i,'url("data:'+e.format+";base64,"+n+'")')+"\n";f[e.url]=a,t(a)})),r.addEventListener("error",(function(n){console.warn("Failed to load font from: "+e.url,n),f[e.url]=null,t(null)})),r.addEventListener("abort",(function(n){console.warn("Aborted loading font from: "+e.url,n),t(null)})),r.open("GET",e.url),r.responseType="arraybuffer",r.send()}))}))).then((function(e){return e.filter((function(e){return e})).join("")}))},I=null,m=function(e,t){var n=t||{},r=n.selectorRemap,a=n.modifyStyle,o=n.modifyCss,l=n.fonts,u=n.excludeUnusedCss,s=o||function(e,t){return(r?r(e):e)+"{"+(a?a(t):t)+"}\n"},c=[],d="undefined"===typeof l,p=l||[];return(I||(I=Array.from(document.styleSheets).map((function(e){try{return{rules:e.cssRules,href:e.href}}catch(t){return console.warn("Stylesheet could not be loaded: "+e.href,t),{}}})))).forEach((function(t){var n=t.rules,r=t.href;n&&Array.from(n).forEach((function(t){if("undefined"!=typeof t.style)if(function(e,t){if(t)try{return e.querySelector(t)||e.parentNode&&e.parentNode.querySelector(t)}catch(n){console.warn('Invalid CSS selector "'+t+'"',n)}}(e,t.selectorText))c.push(s(t.selectorText,t.style.cssText));else if(d&&t.cssText.match(/^@font-face/)){var n=function(e,t){var n=e.cssText.match(i),r=n&&n[1]||"";if(r&&!r.match(/^data:/)&&"about:blank"!==r){var a=r.startsWith("../")?t+"/../"+r:r.startsWith("./")?t+"/."+r:r;return{text:e.cssText,format:g(a),url:a}}}(t,r);n&&p.push(n)}else u||c.push(t.cssText)}))})),C(p).then((function(e){return c.join("\n")+e}))},v=function(){if(!navigator.msSaveOrOpenBlob&&!("download"in document.createElement("a")))return{popup:window.open()}};r.prepareSvg=function(e,t,n){s(e);var r=t||{},i=r.left,l=void 0===i?0:i,u=r.top,c=void 0===u?0:u,g=r.width,p=r.height,f=r.scale,C=void 0===f?1:f,I=r.responsive,v=void 0!==I&&I,b=r.excludeCss,A=void 0!==b&&b;return h(e).then((function(){var r=e.cloneNode(!0);r.style.backgroundColor=(t||{}).backgroundColor||e.style.backgroundColor;var i=function(e,t,n,r){if("svg"===e.tagName)return{width:n||d(e,t,"width"),height:r||d(e,t,"height")};if(e.getBBox){var a=e.getBBox(),o=a.x,i=a.y;return{width:o+a.width,height:i+a.height}}}(e,r,g,p),u=i.width,s=i.height;if("svg"!==e.tagName){if(!e.getBBox)return void console.error("Attempted to render non-SVG element",e);null!=r.getAttribute("transform")&&r.setAttribute("transform",r.getAttribute("transform").replace(/translate\(.*?\)/,""));var h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.appendChild(r),r=h}if(r.setAttribute("version","1.1"),r.setAttribute("viewBox",[l,c,u,s].join(" ")),r.getAttribute("xmlns")||r.setAttributeNS(a,"xmlns",o),r.getAttribute("xmlns:xlink")||r.setAttributeNS(a,"xmlns:xlink","http://www.w3.org/1999/xlink"),v?(r.removeAttribute("width"),r.removeAttribute("height"),r.setAttribute("preserveAspectRatio","xMinYMin meet")):(r.setAttribute("width",u*C),r.setAttribute("height",s*C)),Array.from(r.querySelectorAll("foreignObject > *")).forEach((function(e){e.setAttributeNS(a,"xmlns","svg"===e.tagName?o:"http://www.w3.org/1999/xhtml")})),!A)return m(e,t).then((function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML="<![CDATA[\n"+e+"\n]]>";var a=document.createElement("defs");a.appendChild(t),r.insertBefore(a,r.firstChild);var o=document.createElement("div");o.appendChild(r);var i=o.innerHTML.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href');if("function"!==typeof n)return{src:i,width:u,height:s};n(i,u,s)}));var f=document.createElement("div");f.appendChild(r);var I=f.innerHTML;if("function"!==typeof n)return{src:I,width:u,height:s};n(I,u,s)}))},r.svgAsDataUri=function(e,t,n){return s(e),r.prepareSvg(e,t).then((function(e){var t=e.src,r=e.width,a=e.height,o="data:image/svg+xml;base64,"+window.btoa(decodeURIComponent(encodeURIComponent('<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+t).replace(/%([0-9A-F]{2})/g,(function(e,t){var n=String.fromCharCode("0x"+t);return"%"===n?"%25":n}))));return"function"===typeof n&&n(o,r,a),o}))},r.svgAsPngUri=function(e,t,n){s(e);var a=t||{},o=a.encoderType,i=void 0===o?"image/png":o,l=a.encoderOptions,u=void 0===l?.8:l,c=a.canvg,g=function(e){var t=e.src,r=e.width,a=e.height,o=document.createElement("canvas"),l=o.getContext("2d"),s=window.devicePixelRatio||1;o.width=r*s,o.height=a*s,o.style.width=o.width+"px",o.style.height=o.height+"px",l.setTransform(s,0,0,s,0,0),c?c(o,t):l.drawImage(t,0,0);var g=void 0;try{g=o.toDataURL(i,u)}catch(d){if("undefined"!==typeof SecurityError&&d instanceof SecurityError||"SecurityError"===d.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw d}return"function"===typeof n&&n(g,o.width,o.height),Promise.resolve(g)};return c?r.prepareSvg(e,t).then(g):r.svgAsDataUri(e,t).then((function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(g({src:r,width:r.width,height:r.height}))},r.onerror=function(){n("There was an error loading the data URI as an image on the following SVG\n"+window.atob(e.slice(26))+"Open the following link to see browser's diagnosis\n"+e)},r.src=e}))}))},r.download=function(e,t,n){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(p(t),e);else{var r=document.createElement("a");if("download"in r){r.download=e,r.style.display="none",document.body.appendChild(r);try{var a=p(t),o=URL.createObjectURL(a);r.href=o,r.onclick=function(){return requestAnimationFrame((function(){return URL.revokeObjectURL(o)}))}}catch(i){console.error(i),console.warn("Error while getting object URL. Falling back to string URL."),r.href=t}r.click(),document.body.removeChild(r)}else n&&n.popup&&(n.popup.document.title=e,n.popup.location.replace(t))}},r.saveSvg=function(e,t,n){var a=v();return c(e).then((function(e){return r.svgAsDataUri(e,n||{})})).then((function(e){return r.download(t,e,a)}))},r.saveSvgAsPng=function(e,t,n){var a=v();return c(e).then((function(e){return r.svgAsPngUri(e,n||{})})).then((function(e){return r.download(t,e,a)}))}}()},6813:function(e,t){"use strict";var n,r,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var s=null,c=null,g=function e(){if(null!==s)try{var n=t.unstable_now();s(!0,n),s=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(g,0))},r=function(e,t){c=setTimeout(e,t)},a=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var h=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var f=!1,C=null,I=-1,m=5,v=0;t.unstable_shouldYield=function(){return t.unstable_now()>=v},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):m=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,A=b.port2;b.port1.onmessage=function(){if(null!==C){var e=t.unstable_now();v=e+m;try{C(!0,e)?A.postMessage(null):(f=!1,C=null)}catch(n){throw A.postMessage(null),n}}else f=!1},n=function(e){C=e,f||(f=!0,A.postMessage(null))},r=function(e,n){I=d((function(){e(t.unstable_now())}),n)},a=function(){p(I),I=-1}}function y(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<S(a,t)))break e;e[r]=t,e[n]=a,n=r}}function k(e){return void 0===(e=e[0])?null:e}function Z(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],l=o+1,u=e[l];if(void 0!==i&&0>S(i,n))void 0!==u&&0>S(u,i)?(e[r]=u,e[l]=n,r=l):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var w=[],B=[],x=1,G=null,R=3,W=!1,V=!1,F=!1;function N(e){for(var t=k(B);null!==t;){if(null===t.callback)Z(B);else{if(!(t.startTime<=e))break;Z(B),t.sortIndex=t.expirationTime,y(w,t)}t=k(B)}}function E(e){if(F=!1,N(e),!V)if(null!==k(w))V=!0,n(D);else{var t=k(B);null!==t&&r(E,t.startTime-e)}}function D(e,n){V=!1,F&&(F=!1,a()),W=!0;var o=R;try{for(N(n),G=k(w);null!==G&&(!(G.expirationTime>n)||e&&!t.unstable_shouldYield());){var i=G.callback;if("function"===typeof i){G.callback=null,R=G.priorityLevel;var l=i(G.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?G.callback=l:G===k(w)&&Z(w),N(n)}else Z(w);G=k(w)}if(null!==G)var u=!0;else{var s=k(B);null!==s&&r(E,s.startTime-n),u=!1}return u}finally{G=null,R=o,W=!1}}var X=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){V||W||(V=!0,n(D))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return k(w)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=X,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,o,i){var l=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?l+i:l:i=l,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:x++,callback:o,priorityLevel:e,startTime:i,expirationTime:u=i+u,sortIndex:-1},i>l?(e.sortIndex=i,y(B,e),null===k(w)&&e===k(B)&&(F?a():F=!0,r(E,i-l))):(e.sortIndex=u,y(w,e),V||W||(V=!0,n(D))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},7800:function(e){"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),a=0;a<r.length;a++)n[(t=r[a].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],a=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&a?{usernameFragment:r.substr(12),password:a.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),a=3;a<r.length;a++){var o=r[a],i=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(i){var l=t.parseRtpMap(i),u=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(l.parameters=u.length?t.parseFmtp(u[0]):{},l.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(l.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var a=0;return n.codecs.forEach((function(e){e.maxptime>a&&(a=e.maxptime)})),a>0&&(r+="a=maxptime:"+a+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],a=t.parseRtpParameters(e),o=-1!==a.fecMechanisms.indexOf("RED"),i=-1!==a.fecMechanisms.indexOf("ULPFEC"),l=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),u=l.length>0&&l[0].ssrc,s=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));s.length>0&&s[0].length>1&&s[0][0]===u&&(n=s[0][1]),a.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:u,codecPayloadType:parseInt(e.parameters.apt,10)};u&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:u,mechanism:i?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&u&&r.push({ssrc:u});var c=t.matchPrefix(e,"b=");return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=c}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var a=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=0===a.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return a.length>0?{stream:(n=a[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),a=t.matchPrefix(e,"a=max-message-size:");a.length>0&&(n=parseInt(a[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var i=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var a=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+a+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,a){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var i="msid:"+a.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+i,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),a=0;a<r.length;a++)switch(r[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[a].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},6699:function(e,t,n){var r=n(2501),a=n(9112),o=n(2132),i=n(890),l=n(4113),u=n(1350),s=n(3411);s.alea=r,s.xor128=a,s.xorwow=o,s.xorshift7=i,s.xor4096=l,s.tychei=u,e.exports=s},2501:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function l(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&l(r,n),a.state=function(){return l(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1350:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function l(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&l(r,n),a.state=function(){return l(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function l(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&l(r,n),a.state=function(){return l(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,l=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=l[127&o]^=r+i)?a+1:0);for(a>=128&&(l[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=l[a+34&127],n=l[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,l[a]=r^n;e.w=i,e.X=l,e.i=a}(t,e)}function l(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&l(r,n),a.state=function(){return l(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function l(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&l(r,n),a.state=function(){return l(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function l(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&l(r,n),a.state=function(){return l(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,o){var i,l=this,u=256,s=o.pow(u,6),c=o.pow(2,52),g=2*c,d=255;function p(e,t,n){var r=[],d=I(C((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(a)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(u):(e=new Uint8Array(u),(l.crypto||l.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=l.navigator,n=t&&t.plugins;return[+new Date,l,n,l.screen,m(a)]}}():e,3),r),p=new h(r),v=function(){for(var e=p.g(6),t=s,n=0;e<c;)e=(e+n)*u,t*=u,n=p.g(1);for(;e>=g;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|p.g(4)},v.quick=function(){return p.g(4)/4294967296},v.double=v,I(m(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&f(r,p),e.state=function(){return f(p,{})}),n?(o.random=e,t):e})(v,d,"global"in t?t.global:this==o,t.state)}function h(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<u;)i[a]=a++;for(a=0;a<u;a++)i[a]=i[o=d&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=d&a+1],n=n*u+i[d&(i[a]=i[o=d&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(u)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function C(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(C(e[n],t-1))}catch(o){}return r.length?r:"string"==a?e:e+"\0"}function I(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(o.seedrandom=p,I(o.random(),a),e.exports){e.exports=p;try{i=n(5042)}catch(v){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}([],Math)},9613:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var s=o[u];if(!l(s))return!1;var c=e[s],g=t[s];if(!1===(a=n?n.call(r,c,g,s):void 0)||void 0===a&&c!==g)return!1}return!0}},845:function(e){"use strict";e.exports=function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},499:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},9481:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ce}});var r={};n.r(r),n.d(r,{fixNegotiationNeeded:function(){return F},shimAddTrackRemoveTrack:function(){return W},shimAddTrackRemoveTrackWithNative:function(){return R},shimGetDisplayMedia:function(){return Z},shimGetSendersWithDtmf:function(){return B},shimGetStats:function(){return x},shimGetUserMedia:function(){return k},shimMediaStream:function(){return S},shimOnTrack:function(){return w},shimPeerConnection:function(){return V},shimSenderReceiverGetStats:function(){return G}});var a={};n.r(a),n.d(a,{shimGetDisplayMedia:function(){return X},shimGetUserMedia:function(){return D},shimPeerConnection:function(){return J},shimReplaceTrack:function(){return H}});var o={};n.r(o),n.d(o,{shimAddTransceiver:function(){return O},shimCreateAnswer:function(){return Q},shimCreateOffer:function(){return j},shimGetDisplayMedia:function(){return T},shimGetParameters:function(){return U},shimGetUserMedia:function(){return Y},shimOnTrack:function(){return M},shimPeerConnection:function(){return K},shimRTCDataChannel:function(){return _},shimReceiverGetStats:function(){return z},shimRemoveStream:function(){return L},shimSenderGetStats:function(){return P}});var i={};n.r(i),n.d(i,{shimAudioContext:function(){return ie},shimCallbacksAPI:function(){return ee},shimConstraints:function(){return ne},shimCreateOfferLegacy:function(){return oe},shimGetUserMedia:function(){return te},shimLocalStreamsAPI:function(){return q},shimRTCIceServerUrls:function(){return re},shimRemoteStreamsAPI:function(){return $},shimTrackEventTransceiver:function(){return ae}});var l={};n.r(l),n.d(l,{removeExtmapAllowMixed:function(){return pe},shimAddIceCandidateNullOrEmpty:function(){return he},shimConnectionState:function(){return de},shimMaxMessageSize:function(){return ce},shimRTCIceCandidate:function(){return se},shimSendThrowTypeError:function(){return ge}});var u=n(4942),s=!0,c=!0;function g(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function d(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return a.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),a.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function p(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(s=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function h(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(c=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function f(){if("object"===typeof window){if(s)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function C(e,t){c&&console.warn(e+" is deprecated, please use "+t+" instead.")}function I(e){var t={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=g(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=g(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=g(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=g(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e){return m(e)?Object.keys(e).reduce((function(t,n){var r=m(e[n]),a=r?v(e[n]):e[n],o=r&&!Object.keys(a).length;return void 0===a||o?t:Object.assign(t,(0,u.Z)({},n,a))}),{}):e}function b(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?b(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){b(e,e.get(t),n)}))})))}function A(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",a=new Map;if(null===t)return a;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&b(e,n,a)}))})),a}var y=f;function k(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);var a=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"===typeof r.ideal?(o[a("min",n)]=r.ideal,t.optional.push(o),(o={})[a("max",n)]=r.ideal,t.optional.push(o)):(o[a("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[a("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[a(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,a){if(t.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){var i=e.video.facingMode;i=i&&("object"===typeof i?i:{ideal:i});var l,u=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||u))if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?l=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(l=["front"]),l)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return l.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&l.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=i.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),y("chrome: "+JSON.stringify(e)),a(e)}));e.video=r(e.video)}return y("chrome: "+JSON.stringify(e)),a(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){a(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var i=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return i(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(o(e))}))}))}}}}function Z(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,a=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),a&&(n.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function S(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function w(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var a;a=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=a,o.transceiver={receiver:a},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var a;a=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=a,o.transceiver={receiver:a},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else d(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function B(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var a=n.apply(this,arguments);return a||(a=t(this,e),this._senders.push(a)),a};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var i=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function x(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],a=n[1],o=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var i=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},l=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var u=function(e){a(l(i(e)))};return t.apply(this,[u,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(l(i(e)))},r])})).then(a,o)}}}function G(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return A(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),d(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return A(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(this,arguments)}}}}function R(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var a=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(a)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),a.apply(this,arguments)}}function W(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return R(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var a=new e.MediaStream(t.getTracks());this._streams[t.id]=a,this._reverseStreams[a.id]=t,t=a}r.apply(this,[t])};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var a=[].slice.call(arguments,1);if(1!==a.length||!a[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var l=new e.MediaStream([t]);this._streams[n.id]=l,this._reverseStreams[l.id]=n,this.addStream(l)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,u.Z)({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"===typeof arguments[0];return r?n.apply(this,[function(n){var r=l(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return l(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var i=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=i.get.apply(this);return""===e.type?e:l(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function l(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],a=e._streams[r.id];n=n.replace(new RegExp(a.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],a=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),a.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function V(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,u.Z)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function F(e,t){d(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var N=n(8688),E=n.n(N);function D(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}function X(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function J(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=E()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&C("RTCIceServer.url","RTCIceServer.urls");var r="string"===typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}(e.iceServers,t.version),f("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function H(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function Y(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){C("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===typeof e&&"object"===typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var i=r.prototype.getSettings;r.prototype.getSettings=function(){var e=i.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===typeof e&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}}function T(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function M(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function K(e,t){if("object"===typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,u.Z)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),a=e[0],o=e[1],i=e[2];return r.apply(this,[a||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,i)}}}function P(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function z(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),d(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function L(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;C("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function _(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function O(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var a=r.sender,o=a.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,a.sendEncodings=e.sendEncodings,this.setParametersPromises.push(a.setParameters(o).then((function(){delete a.sendEncodings})).catch((function(){delete a.sendEncodings}))))}return r})}}function U(e){if("object"===typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function j(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function Q(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function q(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a&&a.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function $(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function ee(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,a=t.setLocalDescription,o=t.setRemoteDescription,i=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],a=n.apply(this,[r]);return t?(a.then(e,t),Promise.resolve()):a},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],a=r.apply(this,[n]);return t?(a.then(e,t),Promise.resolve()):a};var l=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=l,l=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=l,l=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=l}}function te(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(ne(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ne(e){return e&&void 0!==e.video?Object.assign({},e,{video:v(e.video)}):e}function re(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],a=0;a<e.iceServers.length;a++){var o=e.iceServers[a];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(C("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[a])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function ae(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function oe(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function ie(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var le=n(7800),ue=n.n(le);function se(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=ue().parseCandidate(e.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,d(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function ce(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=ue().splitSections(e.sdp);return t.shift(),t.some((function(e){var t=ue().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},a=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var a=ue().matchPrefix(e.sdp,"a=max-message-size:");return a.length>0?r=parseInt(a[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),l=e.sdpSemantics;"plan-b"===l&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var u,s=r(arguments[0]),c=a(s),g=o(arguments[0],s);u=0===c&&0===g?Number.POSITIVE_INFINITY:0===c||0===g?Math.max(c,g):Math.min(c,g);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return u}}),this._sctp=d}return i.apply(this,arguments)}}}function ge(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},d(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],a=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&a>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function de(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function pe(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function he(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}var fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},u=f,s=I(t),c={browserDetails:s,commonShim:l,extractVersion:g,disableLog:p,disableWarnings:h};switch(s.browser){case"chrome":if(!r||!V||!n.shimChrome)return u("Chrome shim is not included in this adapter release."),c;if(null===s.version)return u("Chrome shim can not determine version, not shimming."),c;u("adapter.js shimming chrome."),c.browserShim=r,he(t,s),k(t,s),S(t),V(t,s),w(t),W(t,s),B(t),x(t),G(t),F(t,s),se(t),de(t),ce(t,s),ge(t),pe(t,s);break;case"firefox":if(!o||!K||!n.shimFirefox)return u("Firefox shim is not included in this adapter release."),c;u("adapter.js shimming firefox."),c.browserShim=o,he(t,s),Y(t,s),K(t,s),M(t),L(t),P(t),z(t),_(t),O(t),U(t),j(t),Q(t),se(t),de(t),ce(t,s),ge(t);break;case"edge":if(!a||!J||!n.shimEdge)return u("MS edge shim is not included in this adapter release."),c;u("adapter.js shimming edge."),c.browserShim=a,D(t),X(t),J(t,s),H(t),ce(t,s),ge(t);break;case"safari":if(!i||!n.shimSafari)return u("Safari shim is not included in this adapter release."),c;u("adapter.js shimming safari."),c.browserShim=i,he(t,s),re(t),oe(t),ee(t),q(t),$(t),ae(t),te(t),ie(t),se(t),ce(t,s),ge(t),pe(t,s);break;default:u("Unsupported browser!")}return c}({window:"undefined"===typeof window?void 0:window}),Ce=fe},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},2480:function(){},5042:function(){},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3878);var a=n(181),o=n(5267);function i(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||(0,a.Z)(e,t)||(0,o.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var a=n(9199),o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var a=Object.create(null);__webpack_require__.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){o[e]=function(){return n[e]}}));return o.default=function(){return n},__webpack_require__.d(a,o),a}}(),__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))},__webpack_require__.u=function(e){return"static/js/"+e+".bedb50ca.chunk.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="fyp:";__webpack_require__.l=function(n,r,a,o){if(e[n])e[n].push(r);else{var i,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),s=0;s<u.length;s++){var c=u[s];if(c.getAttribute("src")==n||c.getAttribute("data-webpack")==t+a){i=c;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",t+a),i.src=n),e[n]=[r];var g=function(t,r){i.onerror=i.onload=null,clearTimeout(d);var a=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(r)})),t)return t(r)},d=setTimeout(g.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=g.bind(null,i.onerror),i.onload=g.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.p="/",function(){var e={179:0};__webpack_require__.f.j=function(t,n){var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((function(n,a){r=e[t]=[n,a]}));n.push(r[2]=a);var o=__webpack_require__.p+__webpack_require__.u(t),i=new Error;__webpack_require__.l(o,(function(n){if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,r[1](i)}}),"chunk-"+t,t)}};var t=function(t,n){var r,a,o=n[0],i=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in i)__webpack_require__.o(i,r)&&(__webpack_require__.m[r]=i[r]);if(l)l(__webpack_require__)}for(t&&t(n);u<o.length;u++)a=o[u],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkfyp=self.webpackChunkfyp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{browserFiles:function(){return DJ},browserHTTPRequest:function(){return OJ},concatenateArrayBuffers:function(){return WX},copyModel:function(){return AJ},decodeWeights:function(){return SX},encodeWeights:function(){return kX},fromMemory:function(){return QJ},getLoadHandlers:function(){return MX},getModelArtifactsForJSON:function(){return NX},getModelArtifactsInfoForJSON:function(){return DX},getSaveHandlers:function(){return TX},http:function(){return _J},isHTTPScheme:function(){return zJ},listModels:function(){return IJ},loadWeights:function(){return YJ},moveModel:function(){return kJ},registerLoadRouter:function(){return YX},registerSaveRouter:function(){return HX},removeModel:function(){return vJ},weightsLoaderFactory:function(){return MJ},withSaveHandler:function(){return qJ}});var t,n=__webpack_require__(2791),r=__webpack_require__(4164),a=__webpack_require__(184),o=function(){return(0,a.jsx)("div",{className:"main-footer",children:(0,a.jsx)("div",{className:"footer-container",children:(0,a.jsxs)("div",{className:"footer-row",children:[(0,a.jsxs)("div",{className:"footer-col",children:[(0,a.jsx)("h4",{children:"Weather ( HK )"}),(0,a.jsx)("a",{target:"_blank",href:"https://www.booked.net/weather/kowloon-343623",children:(0,a.jsx)("img",{src:"https://w.bookcdn.com/weather/picture/1_343623_1_1_137AE9_160_ffffff_333333_08488D_1_ffffff_333333_0_6.png?scode=124&domid=w209&anc_id=36821",alt:"booked.net"})})]}),(0,a.jsxs)("div",{className:"footer-col",children:[(0,a.jsx)("h4",{children:"Get in touch"}),(0,a.jsxs)("ul",{className:"list-unstyled",children:[(0,a.jsx)("li",{children:"+852 12345678"}),(0,a.jsx)("li",{children:"aquamon2122@gmail.com"}),(0,a.jsx)("li",{children:"IVE ( CW )"})]})]}),(0,a.jsxs)("div",{className:"footer-col",children:[(0,a.jsx)("h4",{children:"follow us"}),(0,a.jsxs)("ul",{className:"list-unstyled",children:[(0,a.jsx)("li",{children:(0,a.jsx)("i",{className:"fab fa-facebook-f"})}),(0,a.jsx)("li",{children:(0,a.jsx)("i",{className:"fab fa-twitter"})}),(0,a.jsx)("li",{children:(0,a.jsx)("i",{className:"fab fa-instagram"})}),(0,a.jsx)("li",{children:(0,a.jsx)("i",{className:"fab fa-linkedin-in"})})]})]})]})})})},i=__webpack_require__(9439),l=__webpack_require__(7462);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var u=function(e){return e};var s="beforeunload",c="popstate";function g(e){e.preventDefault(),e.returnValue=""}function d(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function p(){return Math.random().toString(36).substr(2,8)}function h(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,o=e.hash,i=void 0===o?"":o;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),i&&"#"!==i&&(n+="#"===i.charAt(0)?i:"#"+i),n}function f(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function C(e,t){if(!e)throw new Error(t)}var I=(0,n.createContext)(null);var m=(0,n.createContext)(null);var v=(0,n.createContext)({outlet:null,matches:[]});function b(e){return function(e){var t=(0,n.useContext)(v).outlet;if(t)return(0,n.createElement)(x.Provider,{value:e},t);return t}(e.context)}function A(e){C(!1)}function y(e){var r=e.basename,a=void 0===r?"/":r,o=e.children,i=void 0===o?null:o,l=e.location,u=e.navigationType,s=void 0===u?t.Pop:u,c=e.navigator,g=e.static,d=void 0!==g&&g;S()&&C(!1);var p=T(a),h=(0,n.useMemo)((function(){return{basename:p,navigator:c,static:d}}),[p,c,d]);"string"===typeof l&&(l=f(l));var v=l,b=v.pathname,A=void 0===b?"/":b,y=v.search,k=void 0===y?"":y,Z=v.hash,w=void 0===Z?"":Z,B=v.state,x=void 0===B?null:B,G=v.key,R=void 0===G?"default":G,W=(0,n.useMemo)((function(){var e=H(A,p);return null==e?null:{pathname:e,search:k,hash:w,state:x,key:R}}),[p,A,k,w,x,R]);return null==W?null:(0,n.createElement)(I.Provider,{value:h},(0,n.createElement)(m.Provider,{children:i,value:{location:W,navigationType:s}}))}function k(e){var t=e.children,r=e.location;return function(e,t){S()||C(!1);var r=(0,n.useContext)(v).matches,a=r[r.length-1],o=a?a.params:{},i=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;0;var l,u=w();if(t){var s,c="string"===typeof t?f(t):t;"/"===i||(null==(s=c.pathname)?void 0:s.startsWith(i))||C(!1),l=c}else l=u;var g=l.pathname||"/",d="/"===i?g:g.slice(i.length)||"/",p=function(e,t,n){void 0===n&&(n="/");var r=H(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;var a=W(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var o=null,i=0;null==o&&i<a.length;++i)o=E(a[i],r);return o}(e,{pathname:d});0;return D(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:Y([i,e.pathname]),pathnameBase:"/"===e.pathnameBase?i:Y([i,e.pathnameBase])})})),r)}(R(t),r)}function Z(e){S()||C(!1);var t=(0,n.useContext)(I),r=t.basename,a=t.navigator,o=G(e),i=o.hash,l=o.pathname,u=o.search,s=l;if("/"!==r){var c=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?f(e).pathname:e.pathname}(e),g=null!=c&&c.endsWith("/");s="/"===l?r+(g?"/":""):Y([r,l])}return a.createHref({pathname:s,search:u,hash:i})}function S(){return null!=(0,n.useContext)(m)}function w(){return S()||C(!1),(0,n.useContext)(m).location}function B(){S()||C(!1);var e=(0,n.useContext)(I),t=e.basename,r=e.navigator,a=(0,n.useContext)(v).matches,o=w().pathname,i=JSON.stringify(a.map((function(e){return e.pathnameBase}))),l=(0,n.useRef)(!1);return(0,n.useEffect)((function(){l.current=!0})),(0,n.useCallback)((function(e,n){if(void 0===n&&(n={}),l.current)if("number"!==typeof e){var a=J(e,JSON.parse(i),o);"/"!==t&&(a.pathname=Y([t,a.pathname])),(n.replace?r.replace:r.push)(a,n.state)}else r.go(e)}),[t,r,i,o])}var x=(0,n.createContext)(null);function G(e){var t=(0,n.useContext)(v).matches,r=w().pathname,a=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,n.useMemo)((function(){return J(e,JSON.parse(a),r)}),[e,a,r])}function R(e){var t=[];return n.Children.forEach(e,(function(e){if((0,n.isValidElement)(e))if(e.type!==n.Fragment){e.type!==A&&C(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=R(e.props.children)),t.push(r)}else t.push.apply(t,R(e.props.children))})),t}function W(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||C(!1),o.relativePath=o.relativePath.slice(r.length));var i=Y([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(!0===e.index&&C(!1),W(e.children,t,l,i)),(null!=e.path||e.index)&&t.push({path:i,score:N(i,e.index),routesMeta:l})})),t}var V=/^:\w+$/,F=function(e){return"*"===e};function N(e,t){var n=e.split("/"),r=n.length;return n.some(F)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!F(e)})).reduce((function(e,t){return e+(V.test(t)?3:""===t?1:10)}),r)}function E(e,t){for(var n=e.routesMeta,r={},a="/",o=[],i=0;i<n.length;++i){var l=n[i],u=i===n.length-1,s="/"===a?t:t.slice(a.length)||"/",c=X({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},s);if(!c)return null;Object.assign(r,c.params);var g=l.route;o.push({params:r,pathname:Y([a,c.pathname]),pathnameBase:Y([a,c.pathnameBase]),route:g}),"/"!==c.pathnameBase&&(a=Y([a,c.pathnameBase]))}return o}function D(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(r,a,o){return(0,n.createElement)(v.Provider,{children:void 0!==a.route.element?a.route.element:(0,n.createElement)(b,null),value:{outlet:r,matches:t.concat(e.slice(0,o+1))}})}),null)}function X(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,i.Z)(n,2),a=r[0],o=r[1],l=t.match(a);if(!l)return null;var u=l[0],s=u.replace(/(.)\/+$/,"$1"),c=l.slice(1),g=o.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{});return{params:g,pathname:u,pathnameBase:s,pattern:e}}function J(e,t,n){var r,a="string"===typeof e?f(e):e,o=""===e||""===a.pathname?"/":a.pathname;if(null==o)r=n;else{var i=t.length-1;if(o.startsWith("..")){for(var l=o.split("/");".."===l[0];)l.shift(),i-=1;a.pathname=l.join("/")}r=i>=0?t[i]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?f(e):e,r=n.pathname,a=n.search,o=void 0===a?"":a,i=n.hash,l=void 0===i?"":i,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:M(o),hash:K(l)}}(a,r);return o&&"/"!==o&&o.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var Y=function(e){return e.join("/").replace(/\/\/+/g,"/")},T=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},M=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},K=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function z(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var L=["onClick","reloadDocument","replace","state","target","to"];function _(e){var r=e.basename,a=e.children,o=e.window,C=(0,n.useRef)();null==C.current&&(C.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,a=r.history;function o(){var e=r.location,t=e.pathname,n=e.search,o=e.hash,i=a.state||{};return[i.idx,u({pathname:t,search:n,hash:o,state:i.usr||null,key:i.key||"default"})]}var i=null;r.addEventListener(c,(function(){if(i)A.call(i),i=null;else{var e=t.Pop,n=o(),r=n[0],a=n[1];if(A.length){if(null!=r){var l=m-r;l&&(i={action:e,location:a,retry:function(){B(-1*l)}},B(l))}}else w(e)}}));var C=t.Pop,I=o(),m=I[0],v=I[1],b=d(),A=d();function y(e){return"string"===typeof e?e:h(e)}function k(e,t){return void 0===t&&(t=null),u((0,l.Z)({pathname:v.pathname,hash:"",search:""},"string"===typeof e?f(e):e,{state:t,key:p()}))}function Z(e,t){return[{usr:e.state,key:e.key,idx:t},y(e)]}function S(e,t,n){return!A.length||(A.call({action:e,location:t,retry:n}),!1)}function w(e){C=e;var t=o();m=t[0],v=t[1],b.call({action:C,location:v})}function B(e){a.go(e)}null==m&&(m=0,a.replaceState((0,l.Z)({},a.state,{idx:m}),""));var x={get action(){return C},get location(){return v},createHref:y,push:function e(n,o){var i=t.Push,l=k(n,o);if(S(i,l,(function(){e(n,o)}))){var u=Z(l,m+1),s=u[0],c=u[1];try{a.pushState(s,"",c)}catch(g){r.location.assign(c)}w(i)}},replace:function e(n,r){var o=t.Replace,i=k(n,r);if(S(o,i,(function(){e(n,r)}))){var l=Z(i,m),u=l[0],s=l[1];a.replaceState(u,"",s),w(o)}},go:B,back:function(){B(-1)},forward:function(){B(1)},listen:function(e){return b.push(e)},block:function(e){var t=A.push(e);return 1===A.length&&r.addEventListener(s,g),function(){t(),A.length||r.removeEventListener(s,g)}}};return x}({window:o}));var I=C.current,m=(0,n.useState)({action:I.action,location:I.location}),v=(0,i.Z)(m,2),b=v[0],A=v[1];return(0,n.useLayoutEffect)((function(){return I.listen(A)}),[I]),(0,n.createElement)(y,{basename:r,children:a,location:b.location,navigationType:b.action,navigator:I})}var O=(0,n.forwardRef)((function(e,t){var r=e.onClick,a=e.reloadDocument,o=e.replace,i=void 0!==o&&o,l=e.state,u=e.target,s=e.to,c=z(e,L),g=Z(s),d=function(e,t){var r=void 0===t?{}:t,a=r.target,o=r.replace,i=r.state,l=B(),u=w(),s=G(e);return(0,n.useCallback)((function(t){if(0===t.button&&(!a||"_self"===a)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!o||h(u)===h(s);l(e,{replace:n,state:i})}}),[u,l,s,o,i,a,e])}(s,{replace:i,state:l,target:u});return(0,n.createElement)("a",P({},c,{href:g,onClick:function(e){r&&r(e),e.defaultPrevented||a||d(e)},ref:t,target:u}))}));function U(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(s){return void n(s)}l.done?t(u):Promise.resolve(u).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){U(o,r,a,i,l,"next",e)}function l(e){U(o,r,a,i,l,"throw",e)}i(void 0)}))}}var Q=__webpack_require__(7757),q=__webpack_require__.n(Q),$="token",ee=function(e){localStorage.setItem($,e)},te=function(){return localStorage.getItem($)},ne=function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/auth/refresh"),{method:"GET",credentials:"include"}).then((function(e){return e.json()}));case 3:1==(t=e.sent).ok?ee(t.newToken):ee(""),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=j(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=!1,e.prev=2,e.next=5,fetch("".concat("http://8.218.88.75:5000/","api/auth/check"),{method:"POST",headers:{token:te()},credentials:"include"}).then((function(e){return e.json()}));case 5:(r=e.sent).ok&&(t=!0),r.isAdmin&&(n=!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.abrupt("return",[t,n]);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){for(var e=[],t=0;t<1500;t++){var n={};n.PH=Math.random()*(7.5-6.8)+6.8,n.WT=8*Math.random()+28,n.DO=Math.random()*(154.9-137.8)+137.8,n.ORP=150*Math.random()+300,n.TDS=100*Math.random()+250,n.AC=Math.random()*(145.053-144.791)+144.791,n.NC=Math.random()*(144.21-143.62)+143.62,n.C=20*Math.random()+80,n.start_qty=100*Math.random()+100,n.end_qty=150*Math.random()+100,e.push(n)}return e},oe=function(){var e=B();return(0,n.useEffect)((function(){j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://8.218.88.75:5000/","api/auth/deletecookie"),{method:"GET",credentials:"include"}).then((function(e){return e.json()}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))(),ee("");var t=setTimeout((function(){e("/")}),5e3);return function(){return clearInterval(t)}}),[]),(0,a.jsx)("div",{children:"Logged Out"})},ie=function(){return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"404"}),(0,a.jsx)("div",{children:"Not Found"}),(0,a.jsx)(O,{to:"/",children:"Back to Home page "})]})},le=__webpack_require__(4942);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,le.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=__webpack_require__(8472),ge=__webpack_require__(3366),de=__webpack_require__(8182),pe=__webpack_require__(5735),he=__webpack_require__(767),fe=__webpack_require__(2065),Ce=__webpack_require__(7630),Ie=__webpack_require__(1046),me=__webpack_require__(2071),ve=__webpack_require__(9683),be=__webpack_require__(3031),Ae=__webpack_require__(3433);function ye(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t){return Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ze(e,t)}function Se(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ze(e,t)}var we=n.createContext(null);function Be(e,t){var r=Object.create(null);return e&&n.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return t&&(0,n.isValidElement)(e)?t(e):e}(e)})),r}function xe(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Ge(e,t,r){var a=Be(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),o=[];for(var i in e)i in t?o.length&&(a[i]=o,o=[]):o.push(i);var l={};for(var u in t){if(a[u])for(r=0;r<a[u].length;r++){var s=a[u][r];l[a[u][r]]=n(s)}l[u]=n(u)}for(r=0;r<o.length;r++)l[o[r]]=n(o[r]);return l}(t,a);return Object.keys(o).forEach((function(i){var l=o[i];if((0,n.isValidElement)(l)){var u=i in t,s=i in a,c=t[i],g=(0,n.isValidElement)(c)&&!c.props.in;!s||u&&!g?s||!u||g?s&&u&&(0,n.isValidElement)(c)&&(o[i]=(0,n.cloneElement)(l,{onExited:r.bind(null,l),in:c.props.in,exit:xe(l,"exit",e),enter:xe(l,"enter",e)})):o[i]=(0,n.cloneElement)(l,{in:!1}):o[i]=(0,n.cloneElement)(l,{onExited:r.bind(null,l),in:!0,exit:xe(l,"exit",e),enter:xe(l,"enter",e)})}})),o}var Re=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},We=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(ke(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}Se(t,e);var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var r,a,o=t.children,i=t.handleExited;return{children:t.firstRender?(r=e,a=i,Be(r.children,(function(e){return(0,n.cloneElement)(e,{onExited:a.bind(null,e),in:!0,appear:xe(e,"appear",r),enter:xe(e,"enter",r),exit:xe(e,"exit",r)})}))):Ge(e,o,i),firstRender:!1}},r.handleExited=function(e,t){var n=Be(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,l.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,t=e.component,r=e.childFactory,a=(0,ge.Z)(e,["component","childFactory"]),o=this.state.contextValue,i=Re(this.state.children).map(r);return delete a.appear,delete a.enter,delete a.exit,null===t?n.createElement(we.Provider,{value:o},i):n.createElement(we.Provider,{value:o},n.createElement(t,a,i))},t}(n.Component);We.propTypes={},We.defaultProps={component:"div",childFactory:function(e){return e}};var Ve=We,Fe=__webpack_require__(2554);var Ne=function(e){var t=e.className,r=e.classes,o=e.pulsate,l=void 0!==o&&o,u=e.rippleX,s=e.rippleY,c=e.rippleSize,g=e.in,d=e.onExited,p=e.timeout,h=n.useState(!1),f=(0,i.Z)(h,2),C=f[0],I=f[1],m=(0,de.Z)(t,r.ripple,r.rippleVisible,l&&r.ripplePulsate),v={width:c,height:c,top:-c/2+s,left:-c/2+u},b=(0,de.Z)(r.child,C&&r.childLeaving,l&&r.childPulsate);return g||C||I(!0),n.useEffect((function(){if(!g&&null!=d){var e=setTimeout(d,p);return function(){clearTimeout(e)}}}),[d,g,p]),(0,a.jsx)("span",{className:m,style:v,children:(0,a.jsx)("span",{className:b})})},Ee=__webpack_require__(208);var De,Xe,Je,He,Ye,Te,Me,Ke,Pe=(0,Ee.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ze=["center","classes","className"],Le=(0,Fe.keyframes)(Ye||(Ye=De||(De=ye(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),_e=(0,Fe.keyframes)(Te||(Te=Xe||(Xe=ye(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Oe=(0,Fe.keyframes)(Me||(Me=Je||(Je=ye(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),Ue=(0,Ce.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),je=(0,Ce.ZP)(Ne,{name:"MuiTouchRipple",slot:"Ripple"})(Ke||(Ke=He||(He=ye(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Pe.rippleVisible,Le,550,(function(e){return e.theme.transitions.easing.easeInOut}),Pe.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Pe.child,Pe.childLeaving,_e,550,(function(e){return e.theme.transitions.easing.easeInOut}),Pe.childPulsate,Oe,(function(e){return e.theme.transitions.easing.easeInOut})),Qe=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiTouchRipple"}),o=r.center,u=void 0!==o&&o,s=r.classes,c=void 0===s?{}:s,g=r.className,d=(0,ge.Z)(r,ze),p=n.useState([]),h=(0,i.Z)(p,2),f=h[0],C=h[1],I=n.useRef(0),m=n.useRef(null);n.useEffect((function(){m.current&&(m.current(),m.current=null)}),[f]);var v=n.useRef(!1),b=n.useRef(null),A=n.useRef(null),y=n.useRef(null);n.useEffect((function(){return function(){clearTimeout(b.current)}}),[]);var k=n.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,o=e.rippleSize,i=e.cb;C((function(e){return[].concat((0,Ae.Z)(e),[(0,a.jsx)(je,{classes:{ripple:(0,de.Z)(c.ripple,Pe.ripple),rippleVisible:(0,de.Z)(c.rippleVisible,Pe.rippleVisible),ripplePulsate:(0,de.Z)(c.ripplePulsate,Pe.ripplePulsate),child:(0,de.Z)(c.child,Pe.child),childLeaving:(0,de.Z)(c.childLeaving,Pe.childLeaving),childPulsate:(0,de.Z)(c.childPulsate,Pe.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},I.current)])})),I.current+=1,m.current=i}),[c]),Z=n.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,a=void 0!==r&&r,o=t.center,i=void 0===o?u||t.pulsate:o,l=t.fakeElement,s=void 0!==l&&l;if("mousedown"===e.type&&v.current)v.current=!1;else{"touchstart"===e.type&&(v.current=!0);var c,g,d,p=s?null:y.current,h=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(i||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(h.width/2),g=Math.round(h.height/2);else{var f=e.touches?e.touches[0]:e,C=f.clientX,I=f.clientY;c=Math.round(C-h.left),g=Math.round(I-h.top)}if(i)(d=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(d+=1);else{var m=2*Math.max(Math.abs((p?p.clientWidth:0)-c),c)+2,Z=2*Math.max(Math.abs((p?p.clientHeight:0)-g),g)+2;d=Math.sqrt(Math.pow(m,2)+Math.pow(Z,2))}e.touches?null===A.current&&(A.current=function(){k({pulsate:a,rippleX:c,rippleY:g,rippleSize:d,cb:n})},b.current=setTimeout((function(){A.current&&(A.current(),A.current=null)}),80)):k({pulsate:a,rippleX:c,rippleY:g,rippleSize:d,cb:n})}}),[u,k]),S=n.useCallback((function(){Z({},{pulsate:!0})}),[Z]),w=n.useCallback((function(e,t){if(clearTimeout(b.current),"touchend"===e.type&&A.current)return A.current(),A.current=null,void(b.current=setTimeout((function(){w(e,t)})));A.current=null,C((function(e){return e.length>0?e.slice(1):e})),m.current=t}),[]);return n.useImperativeHandle(t,(function(){return{pulsate:S,start:Z,stop:w}}),[S,Z,w]),(0,a.jsx)(Ue,(0,l.Z)({className:(0,de.Z)(c.root,Pe.root,g),ref:y},d,{children:(0,a.jsx)(Ve,{component:null,exit:!0,children:f})}))})),qe=Qe,$e=__webpack_require__(5159);function et(e){return(0,$e.Z)("MuiButtonBase",e)}var tt,nt=(0,Ee.Z)("MuiButtonBase",["root","disabled","focusVisible"]),rt=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],at=(0,Ce.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((tt={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,le.Z)(tt,"&.".concat(nt.disabled),{pointerEvents:"none",cursor:"default"}),(0,le.Z)(tt,"@media print",{colorAdjust:"exact"}),tt)),ot=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiButtonBase"}),o=r.action,u=r.centerRipple,s=void 0!==u&&u,c=r.children,g=r.className,d=r.component,p=void 0===d?"button":d,h=r.disabled,f=void 0!==h&&h,C=r.disableRipple,I=void 0!==C&&C,m=r.disableTouchRipple,v=void 0!==m&&m,b=r.focusRipple,A=void 0!==b&&b,y=r.LinkComponent,k=void 0===y?"a":y,Z=r.onBlur,S=r.onClick,w=r.onContextMenu,B=r.onDragLeave,x=r.onFocus,G=r.onFocusVisible,R=r.onKeyDown,W=r.onKeyUp,V=r.onMouseDown,F=r.onMouseLeave,N=r.onMouseUp,E=r.onTouchEnd,D=r.onTouchMove,X=r.onTouchStart,J=r.tabIndex,H=void 0===J?0:J,Y=r.TouchRippleProps,T=r.touchRippleRef,M=r.type,K=(0,ge.Z)(r,rt),P=n.useRef(null),z=n.useRef(null),L=(0,me.Z)(z,T),_=(0,be.Z)(),O=_.isFocusVisibleRef,U=_.onFocus,j=_.onBlur,Q=_.ref,q=n.useState(!1),$=(0,i.Z)(q,2),ee=$[0],te=$[1];f&&ee&&te(!1),n.useImperativeHandle(o,(function(){return{focusVisible:function(){te(!0),P.current.focus()}}}),[]);var ne=n.useState(!1),re=(0,i.Z)(ne,2),ae=re[0],oe=re[1];n.useEffect((function(){oe(!0)}),[]);var ie=ae&&!I&&!f;function le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return(0,ve.Z)((function(r){return t&&t(r),!n&&z.current&&z.current[e](r),!0}))}n.useEffect((function(){ee&&A&&!I&&ae&&z.current.pulsate()}),[I,A,ee,ae]);var ue=le("start",V),se=le("stop",w),ce=le("stop",B),pe=le("stop",N),fe=le("stop",(function(e){ee&&e.preventDefault(),F&&F(e)})),Ce=le("start",X),Ae=le("stop",E),ye=le("stop",D),ke=le("stop",(function(e){j(e),!1===O.current&&te(!1),Z&&Z(e)}),!1),Ze=(0,ve.Z)((function(e){P.current||(P.current=e.currentTarget),U(e),!0===O.current&&(te(!0),G&&G(e)),x&&x(e)})),Se=function(){var e=P.current;return p&&"button"!==p&&!("A"===e.tagName&&e.href)},we=n.useRef(!1),Be=(0,ve.Z)((function(e){A&&!we.current&&ee&&z.current&&" "===e.key&&(we.current=!0,z.current.stop(e,(function(){z.current.start(e)}))),e.target===e.currentTarget&&Se()&&" "===e.key&&e.preventDefault(),R&&R(e),e.target===e.currentTarget&&Se()&&"Enter"===e.key&&!f&&(e.preventDefault(),S&&S(e))})),xe=(0,ve.Z)((function(e){A&&" "===e.key&&z.current&&ee&&!e.defaultPrevented&&(we.current=!1,z.current.stop(e,(function(){z.current.pulsate(e)}))),W&&W(e),S&&e.target===e.currentTarget&&Se()&&" "===e.key&&!e.defaultPrevented&&S(e)})),Ge=p;"button"===Ge&&(K.href||K.to)&&(Ge=k);var Re={};"button"===Ge?(Re.type=void 0===M?"button":M,Re.disabled=f):(K.href||K.to||(Re.role="button"),f&&(Re["aria-disabled"]=f));var We=(0,me.Z)(Q,P),Ve=(0,me.Z)(t,We);var Fe=(0,l.Z)({},r,{centerRipple:s,component:p,disabled:f,disableRipple:I,disableTouchRipple:v,focusRipple:A,tabIndex:H,focusVisible:ee}),Ne=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,a=e.classes,o={root:["root",t&&"disabled",n&&"focusVisible"]},i=(0,he.Z)(o,et,a);return n&&r&&(i.root+=" ".concat(r)),i}(Fe);return(0,a.jsxs)(at,(0,l.Z)({as:Ge,className:(0,de.Z)(Ne.root,g),ownerState:Fe,onBlur:ke,onClick:S,onContextMenu:se,onFocus:Ze,onKeyDown:Be,onKeyUp:xe,onMouseDown:ue,onMouseLeave:fe,onMouseUp:pe,onDragLeave:ce,onTouchEnd:Ae,onTouchMove:ye,onTouchStart:Ce,ref:Ve,tabIndex:f?-1:H,type:M},Re,K,{children:[c,ie?(0,a.jsx)(qe,(0,l.Z)({ref:L,center:s},Y)):null]}))})),it=ot,lt=__webpack_require__(4036);function ut(e){return(0,$e.Z)("MuiButton",e)}var st=(0,Ee.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var ct=n.createContext({}),gt=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],dt=function(e){return(0,l.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},pt=(0,Ce.ZP)(it,{shouldForwardProp:function(e){return(0,Ce.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,lt.Z)(n.color))],t["size".concat((0,lt.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,lt.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({},n.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:n.shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":(0,l.Z)({textDecoration:"none",backgroundColor:(0,fe.Fq)(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===r.variant&&"inherit"!==r.color&&{backgroundColor:(0,fe.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===r.variant&&"inherit"!==r.color&&{border:"1px solid ".concat(n.palette[r.color].main),backgroundColor:(0,fe.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===r.variant&&{backgroundColor:n.palette.grey.A100,boxShadow:n.shadows[4],"@media (hover: none)":{boxShadow:n.shadows[2],backgroundColor:n.palette.grey[300]}},"contained"===r.variant&&"inherit"!==r.color&&{backgroundColor:n.palette[r.color].dark,"@media (hover: none)":{backgroundColor:n.palette[r.color].main}}),"&:active":(0,l.Z)({},"contained"===r.variant&&{boxShadow:n.shadows[8]})},(0,le.Z)(t,"&.".concat(st.focusVisible),(0,l.Z)({},"contained"===r.variant&&{boxShadow:n.shadows[6]})),(0,le.Z)(t,"&.".concat(st.disabled),(0,l.Z)({color:n.palette.action.disabled},"outlined"===r.variant&&{border:"1px solid ".concat(n.palette.action.disabledBackground)},"outlined"===r.variant&&"secondary"===r.color&&{border:"1px solid ".concat(n.palette.action.disabled)},"contained"===r.variant&&{color:n.palette.action.disabled,boxShadow:n.shadows[0],backgroundColor:n.palette.action.disabledBackground})),t),"text"===r.variant&&{padding:"6px 8px"},"text"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main},"outlined"===r.variant&&{padding:"5px 15px",border:"1px solid ".concat("light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main,border:"1px solid ".concat((0,fe.Fq)(n.palette[r.color].main,.5))},"contained"===r.variant&&{color:n.palette.getContrastText(n.palette.grey[300]),backgroundColor:n.palette.grey[300],boxShadow:n.shadows[2]},"contained"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].contrastText,backgroundColor:n.palette[r.color].main},"inherit"===r.color&&{color:"inherit",borderColor:"currentColor"},"small"===r.size&&"text"===r.variant&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"text"===r.variant&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"outlined"===r.variant&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"outlined"===r.variant&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"contained"===r.variant&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"contained"===r.variant&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},r.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,le.Z)(t,"&.".concat(st.focusVisible),{boxShadow:"none"}),(0,le.Z)(t,"&:active",{boxShadow:"none"}),(0,le.Z)(t,"&.".concat(st.disabled),{boxShadow:"none"}),t)})),ht=(0,Ce.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,lt.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,l.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},dt(t))})),ft=(0,Ce.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,lt.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,l.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},dt(t))})),Ct=n.forwardRef((function(e,t){var r=n.useContext(ct),o=(0,pe.Z)(r,e),i=(0,Ie.Z)({props:o,name:"MuiButton"}),u=i.children,s=i.color,c=void 0===s?"primary":s,g=i.component,d=void 0===g?"button":g,p=i.className,h=i.disabled,f=void 0!==h&&h,C=i.disableElevation,I=void 0!==C&&C,m=i.disableFocusRipple,v=void 0!==m&&m,b=i.endIcon,A=i.focusVisibleClassName,y=i.fullWidth,k=void 0!==y&&y,Z=i.size,S=void 0===Z?"medium":Z,w=i.startIcon,B=i.type,x=i.variant,G=void 0===x?"text":x,R=(0,ge.Z)(i,gt),W=(0,l.Z)({},i,{color:c,component:d,disabled:f,disableElevation:I,disableFocusRipple:v,fullWidth:k,size:S,type:B,variant:G}),V=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,a=e.size,o=e.variant,i=e.classes,u={root:["root",o,"".concat(o).concat((0,lt.Z)(t)),"size".concat((0,lt.Z)(a)),"".concat(o,"Size").concat((0,lt.Z)(a)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,lt.Z)(a))],endIcon:["endIcon","iconSize".concat((0,lt.Z)(a))]},s=(0,he.Z)(u,ut,i);return(0,l.Z)({},i,s)}(W),F=w&&(0,a.jsx)(ht,{className:V.startIcon,ownerState:W,children:w}),N=b&&(0,a.jsx)(ft,{className:V.endIcon,ownerState:W,children:b});return(0,a.jsxs)(pt,(0,l.Z)({ownerState:W,className:(0,de.Z)(p,r.className),component:d,disabled:f,focusRipple:!v,focusVisibleClassName:(0,de.Z)(V.focusVisible,A),ref:t,type:B},R,{classes:V,children:[F,u,N]}))})),It=Ct,mt={filename:"Report.csv",headers:[{label:"PH",key:"PH"},{label:"WT",key:"WT"},{label:"DO",key:"DO"},{label:"TDS",key:"TDS"},{label:"AC",key:"AC"},{label:"NC",key:"NC"},{label:"C",key:"C"},{label:"start_qty",key:"start_qty"},{label:"end_qty",key:"end_qty"}],data:ae()},vt=function(){return(0,n.useEffect)((function(){ae()}),[]),(0,a.jsx)("div",{children:(0,a.jsx)(It,{children:(0,a.jsx)(ce.CSVLink,se(se({},mt),{},{children:"Download"}))})})},bt=__webpack_require__(2007),At=__webpack_require__.n(bt);function yt(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kt(e){var t=e,n=e,r=e;function a(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==n(t,t))return o;do{var i=a+o>>>1;r(e[i],t)<0?a=i+1:o=i}while(a<o)}return a}return 2!==e.length&&(t=function(t,n){return e(t)-n},n=yt,r=function(t,n){return yt(e(t),n)}),{left:a,center:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=a(e,n,r,o-1);return i>r&&t(e[i-1],n)>-t(e[i],n)?i-1:i},right:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==n(t,t))return o;do{var i=a+o>>>1;r(e[i],t)<=0?a=i+1:o=i}while(a<o)}return a}}}var Zt=Math.sqrt(50),St=Math.sqrt(10),wt=Math.sqrt(2);function Bt(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=Zt?a*=10:o>=St?a*=5:o>=wt&&(a*=2),t<e?-a:a}var xt=1e3,Gt=6e4,Rt=36e5,Wt=864e5,Vt=6048e5,Ft=2592e6,Nt=31536e6,Et=new Date,Dt=new Date;function Xt(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,o){var i,l=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return l;do{l.push(i=new Date(+n)),t(n,o),e(n)}while(i<n&&n<r);return l},a.filter=function(n){return Xt((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return Et.setTime(+t),Dt.setTime(+r),e(Et),e(Dt),Math.floor(n(Et,Dt))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var Jt=Xt((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Jt.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Xt((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Jt:null};var Ht=Jt,Yt=(Jt.range,Xt((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*xt)}),(function(e,t){return(t-e)/xt}),(function(e){return e.getUTCSeconds()}))),Tt=Yt,Mt=(Yt.range,Xt((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*xt)}),(function(e,t){e.setTime(+e+t*Gt)}),(function(e,t){return(t-e)/Gt}),(function(e){return e.getMinutes()}))),Kt=Mt,Pt=(Mt.range,Xt((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*xt-e.getMinutes()*Gt)}),(function(e,t){e.setTime(+e+t*Rt)}),(function(e,t){return(t-e)/Rt}),(function(e){return e.getHours()}))),zt=Pt,Lt=(Pt.range,Xt((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gt)/Wt}),(function(e){return e.getDate()-1}))),_t=Lt;Lt.range;function Ot(e){return Xt((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gt)/Vt}))}var Ut=Ot(0),jt=Ot(1),Qt=Ot(2),qt=Ot(3),$t=Ot(4),en=Ot(5),tn=Ot(6),nn=(Ut.range,jt.range,Qt.range,qt.range,$t.range,en.range,tn.range,Xt((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),rn=nn,an=(nn.range,Xt((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));an.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Xt((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var on=an,ln=(an.range,Xt((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Gt)}),(function(e,t){return(t-e)/Gt}),(function(e){return e.getUTCMinutes()}))),un=ln,sn=(ln.range,Xt((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Rt)}),(function(e,t){return(t-e)/Rt}),(function(e){return e.getUTCHours()}))),cn=sn,gn=(sn.range,Xt((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Wt}),(function(e){return e.getUTCDate()-1}))),dn=gn;gn.range;function pn(e){return Xt((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Vt}))}var hn=pn(0),fn=pn(1),Cn=pn(2),In=pn(3),mn=pn(4),vn=pn(5),bn=pn(6),An=(hn.range,fn.range,Cn.range,In.range,mn.range,vn.range,bn.range,Xt((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),yn=An,kn=(An.range,Xt((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));kn.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Xt((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Zn=kn;kn.range;function Sn(e,t,n,r,a,o){var l=[[Tt,1,xt],[Tt,5,5e3],[Tt,15,15e3],[Tt,30,3e4],[o,1,Gt],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,Rt],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,Wt],[r,2,1728e5],[n,1,Vt],[t,1,Ft],[t,3,7776e6],[e,1,Nt]];function u(t,n,r){var a=Math.abs(n-t)/r,o=kt((function(e){return(0,i.Z)(e,3)[2]})).right(l,a);if(o===l.length)return e.every(Bt(t/Nt,n/Nt,r));if(0===o)return Ht.every(Math.max(Bt(t,n,r),1));var u=(0,i.Z)(l[a/l[o-1][2]<l[o][2]/a?o-1:o],2),s=u[0],c=u[1];return s.every(c)}return[function(e,t,n){var r=t<e;if(r){var a=[t,e];e=a[0],t=a[1]}var o=n&&"function"===typeof n.range?n:u(e,t,n),i=o?o.range(e,+t+1):[];return r?i.reverse():i},u]}var wn=Sn(Zn,yn,hn,dn,cn,un),Bn=(0,i.Z)(wn,2),xn=(Bn[0],Bn[1],Sn(on,rn,Ut,_t,zt,Kt)),Gn=(0,i.Z)(xn,2),Rn=Gn[0],Wn=Gn[1];function Vn(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Fn(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nn(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var En,Dn,Xn={"-":"",_:" ",0:"0"},Jn=/^\s*\d+/,Hn=/^%/,Yn=/[\\^$*+?|[\]().{}]/g;function Tn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function Mn(e){return e.replace(Yn,"\\$&")}function Kn(e){return new RegExp("^(?:"+e.map(Mn).join("|")+")","i")}function Pn(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function zn(e,t,n){var r=Jn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ln(e,t,n){var r=Jn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function _n(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function On(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Un(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function jn(e,t,n){var r=Jn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Qn(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function qn(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $n(e,t,n){var r=Jn.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function er(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function tr(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function nr(e,t,n){var r=Jn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function rr(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ar(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function or(e,t,n){var r=Jn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ir(e,t,n){var r=Jn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function lr(e,t,n){var r=Jn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ur(e,t,n){var r=Hn.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sr(e,t,n){var r=Jn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function cr(e,t,n){var r=Jn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function gr(e,t){return Tn(e.getDate(),t,2)}function dr(e,t){return Tn(e.getHours(),t,2)}function pr(e,t){return Tn(e.getHours()%12||12,t,2)}function hr(e,t){return Tn(1+_t.count(on(e),e),t,3)}function fr(e,t){return Tn(e.getMilliseconds(),t,3)}function Cr(e,t){return fr(e,t)+"000"}function Ir(e,t){return Tn(e.getMonth()+1,t,2)}function mr(e,t){return Tn(e.getMinutes(),t,2)}function vr(e,t){return Tn(e.getSeconds(),t,2)}function br(e){var t=e.getDay();return 0===t?7:t}function Ar(e,t){return Tn(Ut.count(on(e)-1,e),t,2)}function yr(e){var t=e.getDay();return t>=4||0===t?$t(e):$t.ceil(e)}function kr(e,t){return e=yr(e),Tn($t.count(on(e),e)+(4===on(e).getDay()),t,2)}function Zr(e){return e.getDay()}function Sr(e,t){return Tn(jt.count(on(e)-1,e),t,2)}function wr(e,t){return Tn(e.getFullYear()%100,t,2)}function Br(e,t){return Tn((e=yr(e)).getFullYear()%100,t,2)}function xr(e,t){return Tn(e.getFullYear()%1e4,t,4)}function Gr(e,t){var n=e.getDay();return Tn((e=n>=4||0===n?$t(e):$t.ceil(e)).getFullYear()%1e4,t,4)}function Rr(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Tn(t/60|0,"0",2)+Tn(t%60,"0",2)}function Wr(e,t){return Tn(e.getUTCDate(),t,2)}function Vr(e,t){return Tn(e.getUTCHours(),t,2)}function Fr(e,t){return Tn(e.getUTCHours()%12||12,t,2)}function Nr(e,t){return Tn(1+dn.count(Zn(e),e),t,3)}function Er(e,t){return Tn(e.getUTCMilliseconds(),t,3)}function Dr(e,t){return Er(e,t)+"000"}function Xr(e,t){return Tn(e.getUTCMonth()+1,t,2)}function Jr(e,t){return Tn(e.getUTCMinutes(),t,2)}function Hr(e,t){return Tn(e.getUTCSeconds(),t,2)}function Yr(e){var t=e.getUTCDay();return 0===t?7:t}function Tr(e,t){return Tn(hn.count(Zn(e)-1,e),t,2)}function Mr(e){var t=e.getUTCDay();return t>=4||0===t?mn(e):mn.ceil(e)}function Kr(e,t){return e=Mr(e),Tn(mn.count(Zn(e),e)+(4===Zn(e).getUTCDay()),t,2)}function Pr(e){return e.getUTCDay()}function zr(e,t){return Tn(fn.count(Zn(e)-1,e),t,2)}function Lr(e,t){return Tn(e.getUTCFullYear()%100,t,2)}function _r(e,t){return Tn((e=Mr(e)).getUTCFullYear()%100,t,2)}function Or(e,t){return Tn(e.getUTCFullYear()%1e4,t,4)}function Ur(e,t){var n=e.getUTCDay();return Tn((e=n>=4||0===n?mn(e):mn.ceil(e)).getUTCFullYear()%1e4,t,4)}function jr(){return"+0000"}function Qr(){return"%"}function qr(e){return+e}function $r(e){return Math.floor(+e/1e3)}En=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,l=e.months,u=e.shortMonths,s=Kn(a),c=Pn(a),g=Kn(o),d=Pn(o),p=Kn(i),h=Pn(i),f=Kn(l),C=Pn(l),I=Kn(u),m=Pn(u),v={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:gr,e:gr,f:Cr,g:Br,G:Gr,H:dr,I:pr,j:hr,L:fr,m:Ir,M:mr,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:qr,s:$r,S:vr,u:br,U:Ar,V:kr,w:Zr,W:Sr,x:null,X:null,y:wr,Y:xr,Z:Rr,"%":Qr},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:Wr,e:Wr,f:Dr,g:_r,G:Ur,H:Vr,I:Fr,j:Nr,L:Er,m:Xr,M:Jr,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:qr,s:$r,S:Hr,u:Yr,U:Tr,V:Kr,w:Pr,W:zr,x:null,X:null,y:Lr,Y:Or,Z:jr,"%":Qr},A={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=I.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=C.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return Z(e,t,n,r)},d:tr,e:tr,f:lr,g:Qn,G:jn,H:rr,I:rr,j:nr,L:ir,m:er,M:ar,p:function(e,t,n){var r=s.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:$n,Q:sr,s:cr,S:or,u:Ln,U:_n,V:On,w:zn,W:Un,x:function(e,t,r){return Z(e,n,t,r)},X:function(e,t,n){return Z(e,r,t,n)},y:Qn,Y:jn,Z:qn,"%":ur};function y(e,t){return function(n){var r,a,o,i=[],l=-1,u=0,s=e.length;for(n instanceof Date||(n=new Date(+n));++l<s;)37===e.charCodeAt(l)&&(i.push(e.slice(u,l)),null!=(a=Xn[r=e.charAt(++l)])?r=e.charAt(++l):a="e"===r?" ":"0",(o=t[r])&&(r=o(n,a)),i.push(r),u=l+1);return i.push(e.slice(u,l)),i.join("")}}function k(e,t){return function(n){var r,a,o=Nn(1900,void 0,1);if(Z(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(r=Fn(Nn(o.y,0,1))).getUTCDay(),r=a>4||0===a?fn.ceil(r):fn(r),r=dn.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(a=(r=Vn(Nn(o.y,0,1))).getDay(),r=a>4||0===a?jt.ceil(r):jt(r),r=_t.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Fn(Nn(o.y,0,1)).getUTCDay():Vn(Nn(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Fn(o)):Vn(o)}}function Z(e,t,n,r){for(var a,o,i=0,l=t.length,u=n.length;i<l;){if(r>=u)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(o=A[a in Xn?t.charAt(i++):a])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return v.x=y(n,v),v.X=y(r,v),v.c=y(t,v),b.x=y(n,b),b.X=y(r,b),b.c=y(t,b),{format:function(e){var t=y(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=y(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Dn=En.format,En.parse,En.utcFormat,En.utcParse;var ea=__webpack_require__(181);function ta(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,ea.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}var na=kt(yt),ra=na.right,aa=(na.left,kt((function(e){return null===e?NaN:+e})).center,ra);function oa(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ia(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function la(){}var ua=.7,sa=1/ua,ca="\\s*([+-]?\\d+)\\s*",ga="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pa=/^#([0-9a-f]{3,8})$/,ha=new RegExp("^rgb\\("+[ca,ca,ca]+"\\)$"),fa=new RegExp("^rgb\\("+[da,da,da]+"\\)$"),Ca=new RegExp("^rgba\\("+[ca,ca,ca,ga]+"\\)$"),Ia=new RegExp("^rgba\\("+[da,da,da,ga]+"\\)$"),ma=new RegExp("^hsl\\("+[ga,da,da]+"\\)$"),va=new RegExp("^hsla\\("+[ga,da,da,ga]+"\\)$"),ba={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Aa(){return this.rgb().formatHex()}function ya(){return this.rgb().formatRgb()}function ka(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Za(t):3===n?new xa(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Sa(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Sa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ha.exec(e))?new xa(t[1],t[2],t[3],1):(t=fa.exec(e))?new xa(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ca.exec(e))?Sa(t[1],t[2],t[3],t[4]):(t=Ia.exec(e))?Sa(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ma.exec(e))?Va(t[1],t[2]/100,t[3]/100,1):(t=va.exec(e))?Va(t[1],t[2]/100,t[3]/100,t[4]):ba.hasOwnProperty(e)?Za(ba[e]):"transparent"===e?new xa(NaN,NaN,NaN,0):null}function Za(e){return new xa(e>>16&255,e>>8&255,255&e,1)}function Sa(e,t,n,r){return r<=0&&(e=t=n=NaN),new xa(e,t,n,r)}function wa(e){return e instanceof la||(e=ka(e)),e?new xa((e=e.rgb()).r,e.g,e.b,e.opacity):new xa}function Ba(e,t,n,r){return 1===arguments.length?wa(e):new xa(e,t,n,null==r?1:r)}function xa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ga(){return"#"+Wa(this.r)+Wa(this.g)+Wa(this.b)}function Ra(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Wa(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Va(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Na(e,t,n,r)}function Fa(e){if(e instanceof Na)return new Na(e.h,e.s,e.l,e.opacity);if(e instanceof la||(e=ka(e)),!e)return new Na;if(e instanceof Na)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,l=o-a,u=(o+a)/2;return l?(i=t===o?(n-r)/l+6*(n<r):n===o?(r-t)/l+2:(t-n)/l+4,l/=u<.5?o+a:2-o-a,i*=60):l=u>0&&u<1?0:i,new Na(i,l,u,e.opacity)}function Na(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ea(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Da(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}oa(la,ka,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Aa,formatHex:Aa,formatHsl:function(){return Fa(this).formatHsl()},formatRgb:ya,toString:ya}),oa(xa,Ba,ia(la,{brighter:function(e){return e=null==e?sa:Math.pow(sa,e),new xa(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?ua:Math.pow(ua,e),new xa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ga,formatHex:Ga,formatRgb:Ra,toString:Ra})),oa(Na,(function(e,t,n,r){return 1===arguments.length?Fa(e):new Na(e,t,n,null==r?1:r)}),ia(la,{brighter:function(e){return e=null==e?sa:Math.pow(sa,e),new Na(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?ua:Math.pow(ua,e),new Na(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new xa(Ea(e>=240?e-240:e+120,a,r),Ea(e,a,r),Ea(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Xa=function(e){return function(){return e}};function Ja(e,t){return function(n){return e+n*t}}function Ha(e){return 1===(e=+e)?Ya:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Xa(isNaN(t)?n:t)}}function Ya(e,t){var n=t-e;return n?Ja(e,n):Xa(isNaN(e)?t:e)}var Ta=function e(t){var n=Ha(t);function r(e,t){var r=n((e=Ba(e)).r,(t=Ba(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=Ya(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Ma(e){return function(t){var n,r,a=t.length,o=new Array(a),i=new Array(a),l=new Array(a);for(n=0;n<a;++n)r=Ba(t[n]),o[n]=r.r||0,i[n]=r.g||0,l[n]=r.b||0;return o=e(o),i=e(i),l=e(l),r.opacity=1,function(e){return r.r=o(e),r.g=i(e),r.b=l(e),r+""}}}Ma((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],i=r>0?e[r-1]:2*a-o,l=r<t-1?e[r+2]:2*o-a;return Da((n-r/t)*t,i,a,o,l)}})),Ma((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],i=e[(r+1)%t],l=e[(r+2)%t];return Da((n-r/t)*t,a,o,i,l)}}));function Ka(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=Qa(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=o[n](e);return i}}function Pa(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function za(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function La(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Qa(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var _a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oa=new RegExp(_a.source,"g");function Ua(e,t){var n,r,a,o=_a.lastIndex=Oa.lastIndex=0,i=-1,l=[],u=[];for(e+="",t+="";(n=_a.exec(e))&&(r=Oa.exec(t));)(a=r.index)>o&&(a=t.slice(o,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(r=r[0])?l[i]?l[i]+=r:l[++i]=r:(l[++i]=null,u.push({i:i,x:za(n,r)})),o=Oa.lastIndex;return o<t.length&&(a=t.slice(o),l[i]?l[i]+=a:l[++i]=a),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)l[(n=u[r]).i]=n.x(e);return l.join("")})}function ja(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<r;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function Qa(e,t){var n,r=typeof t;return null==t||"boolean"===r?Xa(t):("number"===r?za:"string"===r?(n=ka(t))?(t=n,Ta):Ua:t instanceof ka?Ta:t instanceof Date?Pa:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?ja:Array.isArray(t)?Ka:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?La:za)(e,t)}function qa(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function $a(e){return+e}var eo=[0,1];function to(e){return e}function no(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function ro(e,t,n){var r=e[0],a=e[1],o=t[0],i=t[1];return a<r?(r=no(a,r),o=n(i,o)):(r=no(r,a),o=n(o,i)),function(e){return o(r(e))}}function ao(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),o=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)a[i]=no(e[i],e[i+1]),o[i]=n(t[i],t[i+1]);return function(t){var n=aa(e,t,1,r)-1;return o[n](a[n](t))}}function oo(){var e,t,n,r,a,o,i=eo,l=eo,u=Qa,s=to;function c(){var e=Math.min(i.length,l.length);return s!==to&&(s=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),r=e>2?ao:ro,a=o=null,g}function g(t){return null==t||isNaN(t=+t)?n:(a||(a=r(i.map(e),l,u)))(e(s(t)))}return g.invert=function(n){return s(t((o||(o=r(l,i.map(e),za)))(n)))},g.domain=function(e){return arguments.length?(i=Array.from(e,$a),c()):i.slice()},g.range=function(e){return arguments.length?(l=Array.from(e),c()):l.slice()},g.rangeRound=function(e){return l=Array.from(e),u=qa,c()},g.clamp=function(e){return arguments.length?(s=!!e||to,c()):s!==to},g.interpolate=function(e){return arguments.length?(u=e,c()):u},g.unknown=function(e){return arguments.length?(n=e,g):n},function(n,r){return e=n,t=r,c()}}function io(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function lo(e){return new Date(e)}function uo(e){return e instanceof Date?+e:+new Date(+e)}function so(e,t,n,r,a,o,i,l,u,s){var c=oo()(to,to),g=c.invert,d=c.domain,p=s(".%L"),h=s(":%S"),f=s("%I:%M"),C=s("%I %p"),I=s("%a %d"),m=s("%b %d"),v=s("%B"),b=s("%Y");function A(e){return(u(e)<e?p:l(e)<e?h:i(e)<e?f:o(e)<e?C:r(e)<e?a(e)<e?I:m:n(e)<e?v:b)(e)}return c.invert=function(e){return new Date(g(e))},c.domain=function(e){return arguments.length?d(Array.from(e,uo)):d().map(lo)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?A:s(t)},c.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(function(e,t){var n,r=0,a=(e=e.slice()).length-1,o=e[r],i=e[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),e[r]=t.floor(o),e[a]=t.ceil(i),e}(n,e)):c},c.copy=function(){return g=c,so(e,t,n,r,a,o,i,l,u,s).domain(g.domain()).range(g.range()).interpolate(g.interpolate()).clamp(g.clamp()).unknown(g.unknown());var g},c}function co(){return io.apply(so(Rn,Wn,on,rn,Ut,_t,zt,Kt,Tt,Dn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}__webpack_require__(4115);var go=__webpack_require__(6263),po=__webpack_require__(984),ho=function(){},fo=function(e){return e};function Co(e){return"[object Date]"===Object.prototype.toString.call(e)}function Io(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;var n,r,a=0,o=0,i=void 0;for(i in t)if(o++,t.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(n=e[i],r=t[i],!(Co(n)&&Co(r)?n.getTime()===r.getTime():n===r)))return!1;for(i in e)a++;return a===o}var mo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function vo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Ao=function(e){function t(){return vo(this,t),bo(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),mo(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return!Io(this.props,e)||!Io(this.state,t)||!Io(this.context,n)}}]),t}(n.Component),yo=Ao;Object.assign;var ko="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Zo(e){return ho}function So(e){return"function"===typeof e?e:function(){return e}}function wo(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=0;r<e.length;++r)if(t.call(n,e[r],r,e))return e[r]}function Bo(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}var xo="mouseenter.interaction",Go="mouseleave.interaction",Ro="mousemove.pan",Wo="mouseup.pan",Vo="touchmove.pan",Fo="touchend.pan touchcancel.pan";function No(e){return e?{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY}:{}}function Eo(e,t,n,r){for(var a=0,o=e.length-1;o-a>1;){var i=Math.round((a+o)/2);n(e[i])<=t?a=i:o=i}return n(e[a]).valueOf()===t.valueOf()&&(o=a),n(e[o]).valueOf()===t.valueOf()&&(a=o),n(e[a])<t&&n(e[o])<t&&(a=o),n(e[a])>t&&n(e[o])>t&&(o=a),{left:a,right:o}}(0,po.scaleOrdinal)(po.schemeCategory10);function Do(e,t){if(!t||!e)return e?e[0]:void 0;for(var n=void 0,r=0;r<e.length;r++)if(Jo(t(n=e[r])))return n}function Xo(e,t){if(!t||!e){var n=e?e.length:0;return n?e[n-1]:void 0}for(var r=void 0,a=e.length-1;a>=0;a--)if(Jo(t(r=e[a])))return r}function Jo(e){return null!==e&&"undefined"!=typeof e}function Ho(e){return!Jo(e)}Array.isArray;function Yo(e,t){var n=t.target,r=n.getBoundingClientRect(),a=e.clientX-r.left-n.clientLeft,o=e.clientY-r.top-n.clientTop;return[Math.round(a),Math.round(o)]}function To(e,t){var n=e.currentTarget,r=t||n.getBoundingClientRect(),a=e.clientX-r.left-n.clientLeft,o=e.clientY-r.top-n.clientTop;return[Math.round(a),Math.round(o)]}function Mo(e,t){e.forEach((function(e){e.setTransform(1,0,0,1,0,0),e.clearRect(-1,-1,e.canvas.width+2,e.canvas.height+2),e.scale(t,t)}))}function Ko(e,t){var n=e.replace("#","");if(e.indexOf("#")>-1&&(3===n.length||6===n.length)){var r=3===n.length?1:2;return"rgba("+parseInt(n.substring(0,1*r),16)+", "+parseInt(n.substring(1*r,2*r),16)+", "+parseInt(n.substring(2*r,3*r),16)+", "+t+")"}return e}var Po=__webpack_require__(3904),zo=__webpack_require__(1596),Lo=__webpack_require__.n(zo),_o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Oo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Uo=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.yScale=r.yScale.bind(r),r.listener=r.listener.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Oo(t,[{key:"componentWillMount",value:function(){var e=this.props.id;(0,this.context.subscribe)("chart_"+e,{listener:this.listener})}},{key:"componentWillUnmount",value:function(){var e=this.props.id;(0,this.context.unsubscribe)("chart_"+e)}},{key:"listener",value:function(e,t,n,r){var a=this.props,o=a.id,i=a.onContextMenu;"contextmenu"===e&&(t.currentCharts.indexOf(o)>-1&&i(t,r))}},{key:"yScale",value:function(){var e=this;return wo(this.context.chartConfig,(function(t){return t.id===e.props.id})).yScale.copy()}},{key:"getChildContext",value:function(){var e=this.props.id,t=wo(this.context.chartConfig,(function(t){return t.id===e}));return{chartId:e,chartConfig:t}}},{key:"render",value:function(){var e=this,t=wo(this.context.chartConfig,(function(t){return t.id===e.props.id})).origin,r=_o(t,2),a=r[0],o=r[1];return n.createElement("g",{transform:"translate("+a+", "+o+")"},this.props.children)}}]),t}(yo);Uo.propTypes={height:At().number,origin:At().oneOfType([At().array,At().func]),id:At().oneOfType([At().number,At().string]).isRequired,yExtents:At().oneOfType([At().array,At().func]),yExtentsCalculator:function(e,t,n){if(Ho(e.yExtents)&&"function"!==typeof e.yExtentsCalculator)return new Error("yExtents or yExtentsCalculator must be present on "+n+". Validation failed.")},onContextMenu:At().func,yScale:At().func,flipYScale:At().bool,padding:At().oneOfType([At().number,At().shape({top:At().number,bottom:At().number})]),children:At().node},Uo.defaultProps={id:0,origin:[0,0],padding:0,yScale:(0,po.scaleLinear)(),flipYScale:!1,yPan:!0,yPanEnabled:!1,onContextMenu:ho},Uo.contextTypes={chartConfig:At().array,subscribe:At().func.isRequired,unsubscribe:At().func.isRequired},Uo.childContextTypes={chartConfig:At().object.isRequired,chartId:At().oneOfType([At().number,At().string]).isRequired};var jo=Uo,Qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qo=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function $o(e,t){var n=e.width,r=e.height;return{availableHeight:r,width:n,height:t.height||r}}function ei(e){return function(t){var n=e(t);return function(e){return Jo(e)&&"object"===("undefined"===typeof e?"undefined":ko(e))&&!Array.isArray(e)}(n)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fo,n=Object.keys(e),r=new Array(n.length);return n.forEach((function(n,a){r[a]=t(e[n],n,e)})),r}(n):n}}function ti(e){if(Array.isArray(e)&&2===e.length){var t=qo(e,2),n=t[0],r=t[1];return"number"==typeof n&&"number"==typeof r}return!1}function ni(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.Children.map(t,(function(t){if(t&&t.type.toString()===jo.toString()){var n=Qo({},jo.defaultProps,t.props),a=n.id,o=n.origin,i=n.padding,l=n.yExtents,u=n.yScale,s=n.flipYScale,c=n.yExtentsCalculator,g=u.copy(),d=$o(e,n),p=d.width,h=d.height,f=d.availableHeight,C=n.yPan,I=n.yPanEnabled,m=Jo(l)?(Array.isArray(l)?l:[l]).map(So):void 0,v=wo(r,(function(e){return e.id===a}));if(ti(l))if(Jo(v)&&v.yPan&&v.yPanEnabled&&C&&I&&Io(v.originalYExtentsProp,l))g.domain(v.yScale.domain());else{var b=qo(l,2),A=b[0],y=b[1];g.domain([A,y])}else Jo(v)&&v.yPanEnabled&&(ti(v.originalYExtentsProp)||(g.domain(v.yScale.domain()),I=!0));return{id:a,origin:So(o)(p,f),padding:i,originalYExtentsProp:l,yExtents:m,yExtentsCalculator:c,flipYScale:s,yScale:g,yPan:C,yPanEnabled:I,width:p,height:h}}})).filter((function(e){return Jo(e)}))}function ri(e,t){var n=e.filter((function(e){var n=e.origin[1],r=n+e.height;return t[1]>n&&t[1]<r})).map((function(e){return e.id}));return n}function ai(e,t,n,r,a){var o=t.plotData,i=t.xAccessor,l=t.displayXAccessor,u=t.fullData,s=e.map((function(e){var t=e.yExtentsCalculator,a=e.yExtents,s=e.yScale,c=Jo(t)?t({plotData:o,xDomain:n,xAccessor:i,displayXAccessor:l,fullData:u}):function(e,t,n){var r=e.map((function(e){return n.map(ei(e))})),a=Lo()(r);return t.invert?(0,go.extent)(a):(0,Po.set)(a).values()}(a,s,o);return{realYDomain:c,yDomainDY:Jo(r)?s.range().map((function(e){return e-r})).map(s.invert):s.domain(),prevYDomain:s.domain()}})),c=function(){var e=fo;function t(){var t=arguments.length;if(!t)return[];var r=(0,go.min)(arguments,n),a=void 0,o=new Array(r);for(a=-1;++a<r;){for(var i=-1,l=o[a]=new Array(t);++i<t;)l[i]=arguments[i][a];o[a]=e.apply(this,o[a])}return o}function n(e){return e.length}return t.combine=function(n){return arguments.length?(e=n,t):e},t}().combine((function(e,t){var n=t.realYDomain,r=t.yDomainDY,o=t.prevYDomain,i=e.id,l=e.padding,u=e.height,s=e.yScale,c=e.yPan,g=e.flipYScale,d=e.yPanEnabled,p=void 0!==d&&d,h=!Jo(a)||a.indexOf(i)>-1,f=c&&p?h?r:o:n,C=function(e,t,n,r){if(e.rangeRoundPoints||Ho(e.invert)){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");e.rangeRoundPoints&&e.rangeRoundPoints(r?[0,t]:[t,0],n),e.rangeRound&&e.range(r?[0,t]:[t,0]).padding(n)}else{var a=isNaN(n)?n:{top:n,bottom:n},o=a.top,i=a.bottom;e.range(r?[o,t-i]:[t-i,o])}return e}(s.copy().domain(f),u,l,g);return Qo({},e,{yScale:C,realYDomain:n})}));return c(e,s)}function oi(e,t,n,r){var a=void 0;if(e.invert)a=function(e,t,n,r){var a=Eo(e,t,n),o=a.left,i=a.right;if(o===i)return e[o];var l=Math.abs(n(e[o])-t)<Math.abs(n(e[i])-t)?e[o]:e[i];return r&&console.log(e[o],e[i],l,o,i),l}(r,e.invert(n[0]),t);else{var o=e.range().map((function(e,t){return{x:Math.abs(e-n[0]),idx:t}})).reduce((function(e,t){return e.x<t.x?e:t}));a=Jo(o)?r[o.idx]:r[0]}return a}var ii=__webpack_require__(9261),li=__webpack_require__(2923),ui=__webpack_require__(2698),si=__webpack_require__(9064),ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gi=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},di=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function pi(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var hi=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleEnter=n.handleEnter.bind(n),n.handleLeave=n.handleLeave.bind(n),n.handleWheel=n.handleWheel.bind(n),n.handleMouseMove=n.handleMouseMove.bind(n),n.handleMouseDown=n.handleMouseDown.bind(n),n.handlePanEnd=n.handlePanEnd.bind(n),n.handlePan=n.handlePan.bind(n),n.handleTouchStart=n.handleTouchStart.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.handlePinchZoom=n.handlePinchZoom.bind(n),n.handlePinchZoomEnd=n.handlePinchZoomEnd.bind(n),n.handleClick=n.handleClick.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.handleDrag=n.handleDrag.bind(n),n.handleDragEnd=n.handleDragEnd.bind(n),n.shouldPan=n.shouldPan.bind(n),n.canPan=n.canPan.bind(n),n.setCursorClass=n.setCursorClass.bind(n),n.saveNode=n.saveNode.bind(n),n.mouseInside=!1,n.mouseInteraction=!0,n.state={panInProgress:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),di(t,[{key:"saveNode",value:function(e){this.node=e}},{key:"componentWillMount",value:function(){this.focus=this.props.focus}},{key:"componentDidMount",value:function(){this.node&&(0,ii.Z)(this.node).on(xo,this.handleEnter).on(Go,this.handleLeave)}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"componentWillUnmount",value:function(){if(this.node){(0,ii.Z)(this.node).on(xo,null).on(Go,null);var e=Bo(this.node);(0,ii.Z)(e).on(Ro,null)}}},{key:"handleEnter",value:function(){var e=li.B,t=this.props.onMouseEnter;if(this.mouseInside=!0,!this.state.panInProgress&&!this.state.dragInProgress){var n=Bo(this.node);(0,ii.Z)(n).on(Ro,this.handleMouseMove)}t(e)}},{key:"handleLeave",value:function(e){var t=this.props.onMouseLeave;if(this.mouseInside=!1,!this.state.panInProgress&&!this.state.dragInProgress){var n=Bo(this.node);(0,ii.Z)(n).on(Ro,null)}t(e)}},{key:"handleWheel",value:function(e){var t=this.props,n=t.zoom,r=t.onZoom,a=this.state.panInProgress,o=Math.abs(e.deltaY)>Math.abs(e.deltaX)&&Math.abs(e.deltaY)>0,i=To(e);if(e.preventDefault(),n&&this.focus&&o&&!a)r(e.deltaY>0?1:-1,i,e);else if(this.focus){if(this.shouldPan()){var l=this.state.panStart,u=l.panStartXScale,s=l.chartsToPan;this.lastNewPos=i,this.panHappened=!0,this.dx+=e.deltaX,this.dy+=e.deltaY;var c={dx:this.dx,dy:this.dy};this.props.onPan(i,u,c,s,e)}else{var g=this.props,d=g.xScale,p=ri(g.chartConfig,i);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:d,panOrigin:i,chartsToPan:p}})}this.queuePanEnd()}}},{key:"queuePanEnd",value:function(){var e=this;Jo(this.panEndTimeout)&&clearTimeout(this.panEndTimeout),this.panEndTimeout=setTimeout((function(){e.handlePanEnd()}),100)}},{key:"handleMouseMove",value:function(){var e=li.B,t=this.props,n=t.onMouseMove,r=t.mouseMove;this.mouseInteraction&&r&&!this.state.panInProgress&&n((0,ui.Z)(this.node),"mouse",e)}},{key:"handleClick",value:function(e){var t=this,n=To(e),r=this.props,a=r.onClick,o=r.onDoubleClick;this.panHappened||this.dragHappened||(this.clicked?(o(n,e),this.clicked=!1):(a(n,e),this.clicked=!0,setTimeout((function(){t.clicked&&(t.clicked=!1)}),400)))}},{key:"handleRightClick",value:function(e){e.stopPropagation(),e.preventDefault();var t=this.props,n=t.onContextMenu,r=t.onPanEnd,a=To(e,this.node.getBoundingClientRect());if(Jo(this.state.panStart)){var o=this.state.panStart,i=o.panStartXScale,l=o.panOrigin,u=o.chartsToPan;this.panHappened&&r(a,i,l,u,e);var s=Bo(this.node);(0,ii.Z)(s).on(Ro,null).on(Wo,null),this.setState({panInProgress:!1,panStart:null})}n(a,e)}},{key:"handleDrag",value:function(){var e=li.B;if(this.props.onDrag){this.dragHappened=!0;var t=(0,ui.Z)(this.node);this.props.onDrag({startPos:this.state.dragStartPosition,mouseXY:t},e)}}},{key:"cancelDrag",value:function(){var e=Bo(this.node);(0,ii.Z)(e).on(Ro,this.mouseInside?this.handleMouseMove:null).on(Wo,null),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}},{key:"handleDragEnd",value:function(){var e=li.B,t=(0,ui.Z)(this.node),n=Bo(this.node);(0,ii.Z)(n).on(Ro,this.mouseInside?this.handleMouseMove:null).on(Wo,null),this.dragHappened&&this.props.onDragComplete({mouseXY:t},e),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}},{key:"canPan",value:function(){var e=this.props.getAllPanConditions,t=this.props.pan,n=e().reduce((function(e,t){return{draggable:e.draggable||t.draggable,panEnabled:e.panEnabled&&t.panEnabled}}),{draggable:!1,panEnabled:t});return{panEnabled:n.panEnabled,somethingSelected:n.draggable}}},{key:"handleMouseDown",value:function(e){if(0===e.button){var t=this.props,n=t.xScale,r=t.chartConfig,a=t.onMouseDown;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){var o=To(e),i=ri(r,o),l=this.canPan(),u=l.panEnabled,s=l.somethingSelected,c=u&&!s;if(c){this.setState({panInProgress:c,panStart:{panStartXScale:n,panOrigin:o,chartsToPan:i}});var g=Bo(this.node);(0,ii.Z)(g).on(Ro,this.handlePan).on(Wo,this.handlePanEnd)}else if(s){this.setState({panInProgress:!1,dragInProgress:!0,panStart:null,dragStartPosition:o}),this.props.onDragStart({startPos:o},e);var d=Bo(this.node);(0,ii.Z)(d).on(Ro,this.handleDrag).on(Wo,this.handleDragEnd)}a(o,i,e)}e.preventDefault()}}},{key:"shouldPan",value:function(){var e=this.props,t=e.pan,n=e.onPan;return t&&n&&Jo(this.state.panStart)}},{key:"handlePan",value:function(){var e=li.B;if(this.shouldPan()){this.panHappened=!0;var t=this.state.panStart,n=t.panStartXScale,r=t.panOrigin,a=t.chartsToPan,o=this.mouseInteraction?(0,ui.Z)(this.node):(0,si.Z)(this.node)[0];this.lastNewPos=o;var i=o[0]-r[0],l=o[1]-r[1];this.dx=i,this.dy=l,this.props.onPan(o,n,{dx:i,dy:l},a,e)}}},{key:"handlePanEnd",value:function(){var e=li.B,t=this.props,n=t.pan,r=t.onPanEnd;if(Jo(this.state.panStart)){var a=this.state.panStart,o=a.panStartXScale,i=a.chartsToPan,l=Bo(this.node);if((0,ii.Z)(l).on(Ro,this.mouseInside?this.handleMouseMove:null).on(Wo,null).on(Vo,null).on(Fo,null),this.panHappened&&n&&r){var u=this.dx,s=this.dy;delete this.dx,delete this.dy,r(this.lastNewPos,o,{dx:u,dy:s},i,e)}this.setState({panInProgress:!1,panStart:null})}}},{key:"handleTouchMove",value:function(e){(0,this.props.onMouseMove)(Yo(No(e.touches[0]),e),"touch",e)}},{key:"handleTouchStart",value:function(e){this.mouseInteraction=!1;var t=this.props,n=t.pan,r=t.chartConfig,a=t.onMouseMove,o=this.props,i=o.xScale,l=o.onPanEnd;if(1===e.touches.length){this.panHappened=!1;var u=Yo(No(e.touches[0]),e);if(a(u,"touch",e),n){var s=ri(r,u);this.setState({panInProgress:!0,panStart:{panStartXScale:i,panOrigin:u,chartsToPan:s}});var c=Bo(this.node);(0,ii.Z)(c).on(Vo,this.handlePan,!1).on(Fo,this.handlePanEnd,!1)}}else if(2===e.touches.length){var g=this.state,d=g.panInProgress,p=g.panStart;if(d&&n&&l){var h=p.panStartXScale,f=p.panOrigin,C=p.chartsToPan,I=Bo(this.node);(0,ii.Z)(I).on(Ro,this.mouseInside?this.handleMouseMove:null).on(Wo,null).on(Vo,this.handlePinchZoom,!1).on(Fo,this.handlePinchZoomEnd,!1);var m=Yo(No(e.touches[0]),e),v=Yo(No(e.touches[1]),e);this.panHappened&&n&&l&&l(this.lastNewPos,h,f,C,e),this.setState({panInProgress:!1,pinchZoomStart:{xScale:i,touch1Pos:m,touch2Pos:v,range:i.range(),chartsToPan:C}})}}}},{key:"handlePinchZoom",value:function(){var e=li.B,t=(0,si.Z)(this.node),n=gi(t,2),r=n[0],a=n[1],o=this.props,i=o.xScale,l=o.zoom,u=o.onPinchZoom,s=this.state.pinchZoomStart,c=(s.chartsToPan,pi(s,["chartsToPan"]));l&&u&&u(c,{touch1Pos:r,touch2Pos:a,xScale:i},e)}},{key:"handlePinchZoomEnd",value:function(){var e=li.B,t=Bo(this.node);(0,ii.Z)(t).on(Vo,null).on(Fo,null);var n=this.props,r=n.zoom,a=n.onPinchZoomEnd,o=this.state.pinchZoomStart,i=(o.chartsToPan,pi(o,["chartsToPan"]));r&&a&&a(i,e),this.setState({pinchZoomStart:null})}},{key:"setCursorClass",value:function(e){e!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:e})}},{key:"render",value:function(){var e=this.props,t=e.height,r=e.width,a=e.disableInteraction,o=e.useCrossHairStyleCursor,i=null!=this.state.cursorOverrideClass?this.state.cursorOverrideClass:o?this.state.panInProgress?"react-stockcharts-grabbing-cursor":"react-stockcharts-crosshair-cursor":"",l=a||{onWheel:this.handleWheel,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return n.createElement("rect",ci({ref:this.saveNode,className:i,width:r,height:t,style:{opacity:0}},l))}}]),t}(n.Component);hi.propTypes={mouseMove:At().bool.isRequired,zoom:At().bool.isRequired,pan:At().bool.isRequired,panSpeedMultiplier:At().number.isRequired,focus:At().bool.isRequired,useCrossHairStyleCursor:At().bool.isRequired,width:At().number.isRequired,height:At().number.isRequired,chartConfig:At().array,xScale:At().func.isRequired,xAccessor:At().func.isRequired,disableInteraction:At().bool.isRequired,getAllPanConditions:At().func.isRequired,onMouseMove:At().func,onMouseEnter:At().func,onMouseLeave:At().func,onZoom:At().func,onPinchZoom:At().func,onPinchZoomEnd:At().func.isRequired,onPan:At().func,onPanEnd:At().func,onDragStart:At().func,onDrag:At().func,onDragComplete:At().func,onClick:At().func,onDoubleClick:At().func,onContextMenu:At().func,onMouseDown:At().func,children:At().node},hi.defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,onDragComplete:ho,disableInteraction:!1};var fi=hi,Ci=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ii=Zo(),mi=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDrawCanvas=n.setDrawCanvas.bind(n),n.drawCanvas={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ci(t,[{key:"setDrawCanvas",value:function(e){Jo(e)?this.drawCanvas[e.id]=e.getContext("2d"):this.drawCanvas={}}},{key:"getCanvasContexts",value:function(){if(Jo(this.drawCanvas.axes))return this.drawCanvas}},{key:"render",value:function(){var e=this.props,t=e.height,r=e.width,a=e.type,o=e.zIndex,i=e.ratio;return"svg"===a?null:(Ii("using ratio ",i),n.createElement("div",{style:{position:"absolute",zIndex:o}},n.createElement("canvas",{id:"bg",ref:this.setDrawCanvas,width:r*i,height:t*i,style:{position:"absolute",width:r,height:t}}),n.createElement("canvas",{id:"axes",ref:this.setDrawCanvas,width:r*i,height:t*i,style:{position:"absolute",width:r,height:t}}),n.createElement("canvas",{id:"mouseCoord",ref:this.setDrawCanvas,width:r*i,height:t*i,style:{position:"absolute",width:r,height:t}})))}}]),t}(n.Component);mi.propTypes={width:At().number.isRequired,height:At().number.isRequired,type:At().string.isRequired,zIndex:At().number,ratio:At().number.isRequired};var vi=mi,bi=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Ai=Zo();function yi(e,t,n,r){var a=e.lastItem,o=e.lastItemX,i=t(a),l=n.range(),u=bi(l,2),s=u[0];return(u[1]-s)/(o-s)*(i-r)+r}function ki(e,t,n,r){return t>function(e,t){return Math.max(1,Math.ceil(e*t))}(e,r)&&t<Zi(e,n)}function Zi(e,t){return Math.floor(e*t)}function Si(e,t){return Math.floor(.97*Zi(e,t))}function wi(e,t,n,r){var a=Eo(e,t,r).right,o=Eo(e,n,r).left;return e.slice(a,o+1)}function Bi(e){var t=e.xScale,n=e.useWholeData,r=e.clamp,a=e.pointsPerPxThreshold,o=e.minPointsPerPxThreshold,i=e.flipXScale;return function(e,t,n,r,a){return{filterData:function(o,i,l,u){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=s.currentPlotData,g=s.currentDomain,d=s.fallbackStart,p=s.fallbackEnd;if(e)return{plotData:o,domain:i};var h=Do(i),f=Xo(i),C=i,I=wi(o,h,f,l);1===I.length&&Jo(d)&&(C=[h=d,f=yi(p,l,u,h)],I=wi(o,h,f,l)),"function"===typeof t?C=t(C,[l(Do(o)),l(Xo(o))]):("left"!==t&&"both"!==t&&!0!==t||(C=[Math.max(h,l(Do(o))),C[1]]),"right"!==t&&"both"!==t&&!0!==t||(C=[C[0],Math.min(f,l(Xo(o)))])),C!==i&&(I=wi(o,C[0],C[1],l));var m=C,v=u.copy().domain(m),b=Math.floor(v(l(Xo(I)))-v(l(Do(I))));a&&b<0&&(b*=-1);var A=void 0,y=void 0,k=Xo(v.range())-Do(v.range());if(Ai("Trying to show "+I.length+" points in "+b+"px, I can show up to "+(Zi(b,n)-1)+" points in that width. Also FYI the entire chart width is "+k+"px and pointsPerPxThreshold is "+n),ki(b,I.length,n,r))A=I,y=m,Ai("AND IT WORKED");else if(k>Zi(b,n)&&Jo(p)){A=I;var Z=yi(p,l,u,Do(m));y=[Do(m),Z];var S=v.copy().domain(y),w=Math.floor(S(l(Xo(A)))-S(l(Do(A))));Ai("and ouch, that is too much, so instead showing "+A.length+" in "+w+"px")}else{A=c||I.slice(I.length-Si(b,n)),y=g||[l(Do(A)),l(Xo(A))];var B=v.copy().domain(y),x=Math.floor(B(l(Xo(A)))-B(l(Do(A))));Ai("and ouch, that is too much, so instead showing "+A.length+" in "+x+"px")}return{plotData:A,domain:y}}}}(n||Ho(t.invert),r,a,o,i)}var xi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Gi=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Wi(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Zo();var Vi=["seriesName"];function Fi(e){return{height:e.height-e.margin.top-e.margin.bottom,width:e.width-e.margin.left-e.margin.right}}function Ni(e){return e?-1:1}function Ei(e){var t=e.data,n=e.plotFull,r=e.xScale,a=e.clamp,o=e.pointsPerPxThreshold,i=e.flipXScale,l=e.xAccessor,u=e.displayXAccessor,s=e.minPointsPerPxThreshold,c=Bi({xScale:r,useWholeData:Jo(n)?n:l===fo,clamp:a,pointsPerPxThreshold:o,minPointsPerPxThreshold:s,flipXScale:i}).filterData;return{xAccessor:l,displayXAccessor:u||l,xScale:r.copy(),fullData:t,filterData:c}}function Di(e){var t=Xi(e),n=t.xAccessor,r=t.displayXAccessor,a=t.fullData,o=t.plotData,i=t.xScale,l=e.postCalculator,u=e.children,s=l(o),c=Fi(e),g=ai(ni(c,u),{plotData:s,xAccessor:n,displayXAccessor:r,fullData:a},i.domain());return Ri({},t,{xScale:i,plotData:s,chartConfig:g})}function Xi(e){var t=e.xAccessor,n=e.xExtents,r=e.data,a=e.padding,o=Ni(e.flipXScale),i=Fi(e),l="function"===typeof n?n(r):(0,go.extent)(n.map((function(e){return So(e)})).map((function(e){return e(r,t)}))),u=Ei(e),s=u.xAccessor,c=u.displayXAccessor,g=u.xScale,d=u.fullData,p=u.filterData,h=Ji(g,i,a,o),f=p(d,l,t,h),C=f.plotData,I=f.domain;return{plotData:C,xScale:h.domain(I),xAccessor:s,displayXAccessor:c,fullData:d,filterData:p}}function Ji(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e.rangeRoundPoints){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");e.rangeRoundPoints([0,t.width],n)}else if(e.padding){if(isNaN(n))throw new Error("padding has to be a number for ordinal scale");e.range([0,t.width]),e.padding(n/2)}else{var a=isNaN(n)?n:{left:n,right:n},o=a.left,i=a.right;r>0?e.range([o,t.width-i]):e.range([t.width-i,o])}return e}function Hi(e){var t=e.touch1Pos,n=e.touch2Pos;return{topLeft:[Math.min(t[0],n[0]),Math.min(t[1],n[1])],bottomRight:[Math.max(t[0],n[0]),Math.max(t[1],n[1])]}}var Yi=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.getDataInfo=e.getDataInfo.bind(e),e.getCanvasContexts=e.getCanvasContexts.bind(e),e.handleMouseMove=e.handleMouseMove.bind(e),e.handleMouseEnter=e.handleMouseEnter.bind(e),e.handleMouseLeave=e.handleMouseLeave.bind(e),e.handleZoom=e.handleZoom.bind(e),e.handlePinchZoom=e.handlePinchZoom.bind(e),e.handlePinchZoomEnd=e.handlePinchZoomEnd.bind(e),e.handlePan=e.handlePan.bind(e),e.handlePanEnd=e.handlePanEnd.bind(e),e.handleClick=e.handleClick.bind(e),e.handleMouseDown=e.handleMouseDown.bind(e),e.handleDoubleClick=e.handleDoubleClick.bind(e),e.handleContextMenu=e.handleContextMenu.bind(e),e.handleDragStart=e.handleDragStart.bind(e),e.handleDrag=e.handleDrag.bind(e),e.handleDragEnd=e.handleDragEnd.bind(e),e.panHelper=e.panHelper.bind(e),e.pinchZoomHelper=e.pinchZoomHelper.bind(e),e.xAxisZoom=e.xAxisZoom.bind(e),e.yAxisZoom=e.yAxisZoom.bind(e),e.resetYDomain=e.resetYDomain.bind(e),e.calculateStateForDomain=e.calculateStateForDomain.bind(e),e.generateSubscriptionId=e.generateSubscriptionId.bind(e),e.draw=e.draw.bind(e),e.redraw=e.redraw.bind(e),e.getAllPanConditions=e.getAllPanConditions.bind(e),e.subscriptions=[],e.subscribe=e.subscribe.bind(e),e.unsubscribe=e.unsubscribe.bind(e),e.amIOnTop=e.amIOnTop.bind(e),e.saveEventCaptureNode=e.saveEventCaptureNode.bind(e),e.saveCanvasContainerNode=e.saveCanvasContainerNode.bind(e),e.setCursorClass=e.setCursorClass.bind(e),e.getMutableState=e.getMutableState.bind(e),e.interactiveState=[],e.panInProgress=!1,e.state={},e.mutableState={},e.lastSubscriptionId=0,e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),xi(t,[{key:"saveEventCaptureNode",value:function(e){this.eventCaptureNode=e}},{key:"saveCanvasContainerNode",value:function(e){this.canvasContainerNode=e}},{key:"getMutableState",value:function(){return this.mutableState}},{key:"getDataInfo",value:function(){return Ri({},this.state,{fullData:this.fullData})}},{key:"getCanvasContexts",value:function(){if(this.canvasContainerNode)return this.canvasContainerNode.getCanvasContexts()}},{key:"generateSubscriptionId",value:function(){return this.lastSubscriptionId++,this.lastSubscriptionId}},{key:"clearBothCanvas",value:function(){var e=this.getCanvasContexts();e&&e.axes&&Mo([e.axes,e.mouseCoord],this.props.ratio)}},{key:"clearMouseCanvas",value:function(){var e=this.getCanvasContexts();e&&e.mouseCoord&&Mo([e.mouseCoord],this.props.ratio)}},{key:"clearThreeCanvas",value:function(){var e=this.getCanvasContexts();e&&e.axes&&Mo([e.axes,e.mouseCoord,e.bg],this.props.ratio)}},{key:"subscribe",value:function(e,t){var n=t.getPanConditions,r=void 0===n?So({draggable:!1,panEnabled:!0}):n;this.subscriptions=this.subscriptions.concat(Ri({id:e},t,{getPanConditions:r}))}},{key:"unsubscribe",value:function(e){this.subscriptions=this.subscriptions.filter((function(t){return t.id!==e}))}},{key:"getAllPanConditions",value:function(){return this.subscriptions.map((function(e){return e.getPanConditions()}))}},{key:"setCursorClass",value:function(e){null!=this.eventCaptureNode&&this.eventCaptureNode.setCursorClass(e)}},{key:"amIOnTop",value:function(e){var t=this.subscriptions.filter((function(e){return e.getPanConditions().draggable}));return t.length>0&&Xo(t).id===e}},{key:"handleContextMenu",value:function(e,t){var n=this.state,r=n.xAccessor,a=n.chartConfig,o=n.plotData,i=n.xScale,l=ri(a,e),u=oi(i,r,e,o);this.triggerEvent("contextmenu",{mouseXY:e,currentItem:u,currentCharts:l},t)}},{key:"calculateStateForDomain",value:function(e){var t=this.state,n=t.xAccessor,r=t.displayXAccessor,a=t.xScale,o=t.chartConfig,i=t.plotData,l=this.state.filterData,u=this.fullData,s=this.props.postCalculator,c=l(u,e,n,a,{currentPlotData:i,currentDomain:a.domain()}),g=c.plotData,d=c.domain,p=s(g),h=a.copy().domain(d),f=ai(o,{plotData:p,xAccessor:n,displayXAccessor:r,fullData:u},h.domain());return{xScale:h,plotData:p,chartConfig:f}}},{key:"pinchZoomHelper",value:function(e,t){var n=e.xScale,r=this.state,a=r.xScale,o=r.chartConfig,i=r.plotData,l=r.xAccessor,u=r.displayXAccessor,s=this.state.filterData,c=this.fullData,g=this.props.postCalculator,d=Hi(e),p=d.topLeft,h=d.bottomRight,f=Hi(t),C=f.topLeft,I=f.bottomRight,m=n.range()[1],v=Math.round(-(h[0]*C[0]-p[0]*I[0])/(p[0]-h[0])),b=Math.round(m+((m-h[0])*(m-C[0])-(m-p[0])*(m-I[0]))/(m-p[0]-(m-h[0]))),A=s(c,[Math.round(-v*p[0]/(-v+C[0])),Math.round(m-(b-m)*(m-p[0])/(b+(m-C[0])))].map(n.invert),l,n,{currentPlotData:i,currentDomain:a.domain()}),y=A.plotData,k=A.domain,Z=g(y),S=a.copy().domain(k),w=t.touch1Pos;return{chartConfig:ai(o,{plotData:Z,xAccessor:l,displayXAccessor:u,fullData:c},S.domain()),xScale:S,plotData:Z,mouseXY:w,currentItem:oi(S,l,w,Z)}}},{key:"cancelDrag",value:function(){this.eventCaptureNode.cancelDrag(),this.triggerEvent("dragcancel")}},{key:"handlePinchZoom",value:function(e,t,n){var r=this;if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;var a=this.pinchZoomHelper(e,t);this.triggerEvent("pinchzoom",a,n),this.finalPinch=t,requestAnimationFrame((function(){r.clearBothCanvas(),r.draw({trigger:"pinchzoom"}),r.waitingForPinchZoomAnimationFrame=!1}))}}},{key:"handlePinchZoomEnd",value:function(e,t){var n=this.state.xAccessor;if(this.finalPinch){var r=this.pinchZoomHelper(e,this.finalPinch),a=r.xScale;this.triggerEvent("pinchzoom",r,t),this.finalPinch=null,this.clearThreeCanvas();var o=Do(this.fullData),i=Do(a.domain()),l=n(o),u=this.props.onLoadMore;this.setState(r,(function(){i<l&&u(i,l)}))}}},{key:"handleZoom",value:function(e,t,n){if(!this.panInProgress){var r=this.state,a=r.xAccessor,o=r.xScale,i=r.plotData,l=this.props,u=l.zoomMultiplier,s=l.zoomAnchor,c=this.fullData,g=o(s({xScale:o,xAccessor:a,mouseXY:t,plotData:i,fullData:c})),d=e>0?1*u:1/u,p=o.range().map((function(e){return g+(e-g)*d})).map(o.invert),h=this.calculateStateForDomain(p),f=h.xScale,C=h.plotData,I=h.chartConfig,m=oi(f,a,t,C),v=ri(I,t);this.clearThreeCanvas();var b=Do(c),A=Do(f.domain()),y=a(b),k=this.props.onLoadMore;this.mutableState={mouseXY:t,currentItem:m,currentCharts:v},this.triggerEvent("zoom",{xScale:f,plotData:C,chartConfig:I,mouseXY:t,currentCharts:v,currentItem:m,show:!0},n),this.setState({xScale:f,plotData:C,chartConfig:I},(function(){A<y&&k(A,y)}))}}},{key:"xAxisZoom",value:function(e){var t=this.calculateStateForDomain(e),n=t.xScale,r=t.plotData,a=t.chartConfig;this.clearThreeCanvas();var o=this.state.xAccessor,i=Do(this.fullData),l=Do(n.domain()),u=o(i),s=this.props.onLoadMore;this.setState({xScale:n,plotData:r,chartConfig:a},(function(){l<u&&s(l,u)}))}},{key:"yAxisZoom",value:function(e,t){this.clearThreeCanvas();var n=this.state.chartConfig.map((function(n){if(n.id===e){var r=n.yScale;return Ri({},n,{yScale:r.copy().domain(t),yPanEnabled:!0})}return n}));this.setState({chartConfig:n})}},{key:"triggerEvent",value:function(e,t,n){var r=this;this.subscriptions.forEach((function(a){var o=Ri({},r.state,{fullData:r.fullData,subscriptions:r.subscriptions});a.listener(e,t,o,n)}))}},{key:"draw",value:function(e){this.subscriptions.forEach((function(t){Jo(t.draw)&&t.draw(e)}))}},{key:"redraw",value:function(){this.clearThreeCanvas(),this.draw({force:!0})}},{key:"panHelper",value:function(e,t,n,r){var a=n.dx,o=n.dy,i=this.state,l=i.xAccessor,u=i.displayXAccessor,s=i.chartConfig,c=this.state.filterData,g=this.fullData,d=this.props.postCalculator;if(Ho(t.invert))throw new Error("xScale provided does not have an invert() method.You are likely using an ordinal scale. This scale does not support zoom, pan");var p=t.range().map((function(e){return e-a})).map(t.invert),h=c(g,p,l,t,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain}),f=h.plotData,C=h.domain,I=t.copy().domain(C),m=d(f),v=oi(I,l,e,m),b=ai(s,{plotData:m,xAccessor:l,displayXAccessor:u,fullData:g},I.domain(),o,r);return{xScale:I,plotData:m,chartConfig:b,mouseXY:e,currentCharts:ri(b,e),currentItem:v}}},{key:"handlePan",value:function(e,t,n,r,a){var o=this;if(!this.waitingForPanAnimationFrame){this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=this.hackyWayToStopPanBeyondBounds__plotData||this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=this.hackyWayToStopPanBeyondBounds__domain||this.state.xScale.domain();var i=this.panHelper(e,t,n,r);this.hackyWayToStopPanBeyondBounds__plotData=i.plotData,this.hackyWayToStopPanBeyondBounds__domain=i.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",i,a),this.mutableState={mouseXY:i.mouseXY,currentItem:i.currentItem,currentCharts:i.currentCharts},requestAnimationFrame((function(){o.waitingForPanAnimationFrame=!1,o.clearBothCanvas(),o.draw({trigger:"pan"})}))}}},{key:"handlePanEnd",value:function(e,t,n,r,a){var o=this,i=this.panHelper(e,t,n,r);this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1;var l=i.xScale,u=i.plotData,s=i.chartConfig;this.triggerEvent("panend",i,a),requestAnimationFrame((function(){var e=o.state.xAccessor,t=Do(o.fullData),n=Do(l.domain()),r=e(t),a=o.props.onLoadMore;o.clearThreeCanvas(),o.setState({xScale:l,plotData:u,chartConfig:s},(function(){n<r&&a(n,r)}))}))}},{key:"handleMouseDown",value:function(e,t,n){this.triggerEvent("mousedown",this.mutableState,n)}},{key:"handleMouseEnter",value:function(e){this.triggerEvent("mouseenter",{show:!0},e)}},{key:"handleMouseMove",value:function(e,t,n){var r=this;if(!this.waitingForMouseMoveAnimationFrame){this.waitingForMouseMoveAnimationFrame=!0;var a=this.state,o=a.chartConfig,i=a.plotData,l=a.xScale,u=a.xAccessor,s=ri(o,e),c=oi(l,u,e,i);this.triggerEvent("mousemove",{show:!0,mouseXY:e,prevMouseXY:this.prevMouseXY,currentItem:c,currentCharts:s},n),this.prevMouseXY=e,this.mutableState={mouseXY:e,currentItem:c,currentCharts:s},requestAnimationFrame((function(){r.clearMouseCanvas(),r.draw({trigger:"mousemove"}),r.waitingForMouseMoveAnimationFrame=!1}))}}},{key:"handleMouseLeave",value:function(e){this.triggerEvent("mouseleave",{show:!1},e),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})}},{key:"handleDragStart",value:function(e,t){var n=e.startPos;this.triggerEvent("dragstart",{startPos:n},t)}},{key:"handleDrag",value:function(e,t){var n=this,r=e.startPos,a=e.mouseXY,o=this.state,i=o.chartConfig,l=o.plotData,u=o.xScale,s=o.xAccessor,c=ri(i,a),g=oi(u,s,a,l);this.triggerEvent("drag",{startPos:r,mouseXY:a,currentItem:g,currentCharts:c},t),this.mutableState={mouseXY:a,currentItem:g,currentCharts:c},requestAnimationFrame((function(){n.clearMouseCanvas(),n.draw({trigger:"drag"})}))}},{key:"handleDragEnd",value:function(e,t){var n=this,r=e.mouseXY;this.triggerEvent("dragend",{mouseXY:r},t),requestAnimationFrame((function(){n.clearMouseCanvas(),n.draw({trigger:"dragend"})}))}},{key:"handleClick",value:function(e,t){var n=this;this.triggerEvent("click",this.mutableState,t),requestAnimationFrame((function(){n.clearMouseCanvas(),n.draw({trigger:"click"})}))}},{key:"handleDoubleClick",value:function(e,t){this.triggerEvent("dblclick",{},t)}},{key:"getChildContext",value:function(){var e=Fi(this.props);return{fullData:this.fullData,plotData:this.state.plotData,width:e.width,height:e.height,chartConfig:this.state.chartConfig,xScale:this.state.xScale,xAccessor:this.state.xAccessor,displayXAccessor:this.state.displayXAccessor,chartCanvasType:this.props.type,margin:this.props.margin,ratio:this.props.ratio,xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}},{key:"componentWillMount",value:function(){var e=Di(this.props,!0),t=e.fullData,n=Wi(e,["fullData"]);this.setState(n),this.fullData=t}},{key:"componentWillReceiveProps",value:function(e){var t=function(e,t){return!Vi.every((function(n){return Io(e[n],t[n])}))}(this.props,e),n=Ti(this.state.xScale,this.state.xAccessor,this.state.plotData),r=this.state.chartConfig,a=void 0;if(n&&!t&&Io(this.props.xExtents,e.xExtents)){var o=this.state.xScale.domain(),i=Gi(o,2),l=i[0],u=i[1],s=Xo(this.fullData),c=Ei(e),g=c.xAccessor,d=g(s)<=u&&g(s)>=l;0,a=function(e,t,n,r,a){var o=e.fullData,i=e.xScale,l=e.xAccessor,u=e.displayXAccessor,s=e.filterData,c=Xo(o),g=t.domain(),d=Gi(g,2),p=d[0],h=d[1],f=n.postCalculator,C=n.children,I=n.padding,m=n.flipXScale,v=n.maintainPointsPerPixelOnResize,b=Ni(m),A=Fi(n),y=Ji(i,A,I,b),k=void 0;if(!r||h>=l(c)){var Z=t.range(),S=Gi(Z,2),w=S[0],B=S[1],x=y.range(),G=Gi(x,2),R=G[0],W=G[1],V=v?h-(W-R)/(B-w)*(h-p):p,F=t(l(c)),N=s(o,[V,h],l,y,{fallbackStart:p,fallbackEnd:{lastItem:c,lastItemX:F}});k=N.plotData,y.domain(N.domain)}else if(r&&h<l(c)){var E=t(l(c))-t.range()[1],D=t.range().map((function(e){return e+E})).map(t.invert),X=Gi(D,2),J=s(o,[X[0],X[1]],l,y);k=J.plotData,y.domain(J.domain)}var H=f(k),Y=ai(ni(A,C,a),{plotData:H,xAccessor:l,displayXAccessor:u,fullData:o},y.domain());return{xScale:y,xAccessor:l,chartConfig:Y,plotData:H,fullData:o,filterData:s}}(c,this.state.xScale,e,d,r)}else a=Di(e),this.mutableState={};var p=a,h=p.fullData,f=Wi(p,["fullData"]);this.panInProgress||(this.clearThreeCanvas(),this.setState(f)),this.fullData=h}},{key:"resetYDomain",value:function(e){var t=this.state.chartConfig,n=!1,r=t.map((function(t){return!Ho(e)&&t.id!==e||Io(t.yScale.domain(),t.realYDomain)?t:(n=!0,Ri({},t,{yScale:t.yScale.domain(t.realYDomain),yPanEnabled:!1}))}));n&&(this.clearThreeCanvas(),this.setState({chartConfig:r}))}},{key:"shouldComponentUpdate",value:function(){return!this.panInProgress}},{key:"render",value:function(){var e=this.props,t=e.type,r=e.height,a=e.width,o=e.margin,i=e.className,l=e.zIndex,u=e.defaultFocus,s=e.ratio,c=e.mouseMoveEvent,g=e.panEvent,d=e.zoomEvent,p=this.props,h=p.useCrossHairStyleCursor,f=p.onSelect,C=this.state,I=C.plotData,m=C.xScale,v=C.xAccessor,b=C.chartConfig,A=Fi(this.props),y=Ti(m,v,I),k=h&&y,Z=n.createElement("style",{type:"text/css"},"\n\t.react-stockcharts-grabbing-cursor {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t.react-stockcharts-crosshair-cursor {\n\t\tpointer-events: all;\n\t\tcursor: crosshair;\n\t}\n\t.react-stockcharts-tooltip-hover {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-avoid-interaction {\n\t\tpointer-events: none;\n\t}\n\t.react-stockcharts-enable-interaction {\n\t\tpointer-events: all;\n\t}\n\t.react-stockcharts-tooltip {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-default-cursor {\n\t\tcursor: default;\n\t}\n\t.react-stockcharts-move-cursor {\n\t\tcursor: move;\n\t}\n\t.react-stockcharts-pointer-cursor {\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-ns-resize-cursor {\n\t\tcursor: ns-resize;\n\t}\n\t.react-stockcharts-ew-resize-cursor {\n\t\tcursor: ew-resize;\n\t}");return n.createElement("div",{style:{position:"relative",width:a,height:r},className:i,onClick:f},n.createElement(vi,{ref:this.saveCanvasContainerNode,type:t,ratio:s,width:a,height:r,zIndex:l}),n.createElement("svg",{className:i,width:a,height:r,style:{position:"absolute",zIndex:l+5}},Z,n.createElement("defs",null,n.createElement("clipPath",{id:"chart-area-clip"},n.createElement("rect",{x:"0",y:"0",width:A.width,height:A.height})),b.map((function(e,t){return n.createElement("clipPath",{key:t,id:"chart-area-clip-"+e.id},n.createElement("rect",{x:"0",y:"0",width:e.width,height:e.height}))}))),n.createElement("g",{transform:"translate("+(o.left+.5)+", "+(o.top+.5)+")"},n.createElement(fi,{ref:this.saveEventCaptureNode,useCrossHairStyleCursor:k,mouseMove:c&&y,zoom:d&&y,pan:g&&y,width:A.width,height:A.height,chartConfig:b,xScale:m,xAccessor:v,focus:u,disableInteraction:this.props.disableInteraction,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),n.createElement("g",{className:"react-stockcharts-avoid-interaction"},this.props.children))))}}]),t}(n.Component);function Ti(e,t,n){return!isNaN(e(t(Do(n))))&&Jo(e.invert)}Yi.propTypes={width:At().number.isRequired,height:At().number.isRequired,margin:At().object,ratio:At().number.isRequired,type:At().oneOf(["svg","hybrid"]),pointsPerPxThreshold:At().number,minPointsPerPxThreshold:At().number,data:At().array.isRequired,xAccessor:At().func,xExtents:At().oneOfType([At().array,At().func]),zoomAnchor:At().func,className:At().string,seriesName:At().string.isRequired,zIndex:At().number,children:At().node.isRequired,xScale:At().func.isRequired,postCalculator:At().func,flipXScale:At().bool,useCrossHairStyleCursor:At().bool,padding:At().oneOfType([At().number,At().shape({left:At().number,right:At().number})]),defaultFocus:At().bool,zoomMultiplier:At().number,onLoadMore:At().func,displayXAccessor:function(e,t){if(Ho(e[t]))console.warn("`displayXAccessor` is not defined, will use the value from `xAccessor` as `displayXAccessor`. This might be ok if you do not use a discontinuous scale but if you do, provide a `displayXAccessor` prop to `ChartCanvas`");else if("function"!==typeof e[t])return new Error("displayXAccessor has to be a function")},mouseMoveEvent:At().bool,panEvent:At().bool,clamp:At().oneOfType([At().string,At().bool,At().func]),zoomEvent:At().bool,onSelect:At().func,maintainPointsPerPixelOnResize:At().bool,disableInteraction:At().bool},Yi.defaultProps={margin:{top:20,right:30,bottom:30,left:80},type:"hybrid",pointsPerPxThreshold:2,minPointsPerPxThreshold:.01,className:"react-stockchart",zIndex:1,xExtents:[go.min,go.max],postCalculator:fo,padding:0,xAccessor:fo,flipXScale:!1,useCrossHairStyleCursor:!0,defaultFocus:!0,onLoadMore:ho,onSelect:ho,mouseMoveEvent:!0,panEvent:!0,zoomEvent:!0,zoomMultiplier:1.1,clamp:!1,zoomAnchor:function(e){var t=e.xScale,n=e.xAccessor,r=e.mouseXY,a=e.plotData;return e.fullData,n(oi(t,n,r,a))},maintainPointsPerPixelOnResize:!0,disableInteraction:!1},Yi.childContextTypes={plotData:At().array,fullData:At().array,chartConfig:At().arrayOf(At().shape({id:At().oneOfType([At().number,At().string]).isRequired,origin:At().arrayOf(At().number).isRequired,padding:At().oneOfType([At().number,At().shape({top:At().number,bottom:At().number})]),yExtents:At().arrayOf(At().func),yExtentsProvider:At().func,yScale:At().func.isRequired,mouseCoordinates:At().shape({at:At().string,format:At().func}),width:At().number.isRequired,height:At().number.isRequired})).isRequired,xScale:At().func.isRequired,xAccessor:At().func.isRequired,displayXAccessor:At().func.isRequired,width:At().number.isRequired,height:At().number.isRequired,chartCanvasType:At().oneOf(["svg","hybrid"]).isRequired,margin:At().object.isRequired,ratio:At().number.isRequired,getCanvasContexts:At().func,xAxisZoom:At().func,yAxisZoom:At().func,amIOnTop:At().func,redraw:At().func,subscribe:At().func,unsubscribe:At().func,setCursorClass:At().func,generateSubscriptionId:At().func,getMutableState:At().func},Yi.ohlcv=function(e){return{date:e.date,open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume}};var Mi=Yi,Ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var zi={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag"},Li=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.drawOnCanvas=r.drawOnCanvas.bind(r),r.getMoreProps=r.getMoreProps.bind(r),r.listener=r.listener.bind(r),r.draw=r.draw.bind(r),r.updateMoreProps=r.updateMoreProps.bind(r),r.evaluateType=r.evaluateType.bind(r),r.isHover=r.isHover.bind(r),r.preCanvasDraw=r.preCanvasDraw.bind(r),r.postCanvasDraw=r.postCanvasDraw.bind(r),r.getPanConditions=r.getPanConditions.bind(r),r.shouldTypeProceed=r.shouldTypeProceed.bind(r),r.preEvaluate=r.preEvaluate.bind(r);var a=n.generateSubscriptionId;return r.suscriberId=a(),r.moreProps={},r.state={updateCount:0},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Pi(t,[{key:"updateMoreProps",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.moreProps[n]=e[n]}))}},{key:"shouldTypeProceed",value:function(){return!0}},{key:"preEvaluate",value:function(){}},{key:"listener",value:function(e,t,n,r){Jo(t)&&this.updateMoreProps(t),this.evaluationInProgress=!0,this.evaluateType(e,r),this.evaluationInProgress=!1}},{key:"evaluateType",value:function(e,t){var n=zi[e]||e;if(this.props.drawOn.indexOf(n)>-1&&(this.preEvaluate(e,this.moreProps,t),this.shouldTypeProceed(e,this.moreProps)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":this.moreProps.hovering=!1;var r=this.getMoreProps();this.props.onUnHover&&this.props.onUnHover(r,t);break;case"contextmenu":this.props.onContextMenu&&this.props.onContextMenu(this.getMoreProps(),t),this.moreProps.hovering&&this.props.onContextMenuWhenHover&&this.props.onContextMenuWhenHover(this.getMoreProps(),t);break;case"mousedown":this.props.onMouseDown&&this.props.onMouseDown(this.getMoreProps(),t);break;case"click":var a=this.getMoreProps();this.moreProps.hovering?this.props.onClickWhenHover(a,t):this.props.onClickOutside(a,t),this.props.onClick&&this.props.onClick(a,t);break;case"mousemove":var o=this.moreProps.hovering;this.moreProps.hovering=this.isHover(t);var i=this.context,l=i.amIOnTop,u=i.setCursorClass;this.moreProps.hovering&&!this.props.selected&&l(this.suscriberId)&&Jo(this.props.onHover)?(u("react-stockcharts-pointer-cursor"),this.iSetTheCursorClass=!0):this.moreProps.hovering&&this.props.selected&&l(this.suscriberId)?(u(this.props.interactiveCursorClass),this.iSetTheCursorClass=!0):o&&!this.moreProps.hovering&&this.iSetTheCursorClass&&(this.iSetTheCursorClass=!1,u(null));var s=this.getMoreProps();this.moreProps.hovering&&!o&&this.props.onHover&&this.props.onHover(s,t),o&&!this.moreProps.hovering&&this.props.onUnHover&&this.props.onUnHover(s,t),this.props.onMouseMove&&this.props.onMouseMove(s,t);break;case"dblclick":var c=this.getMoreProps();this.props.onDoubleClick&&this.props.onDoubleClick(c,t),this.moreProps.hovering&&this.props.onDoubleClickWhenHover&&this.props.onDoubleClickWhenHover(c,t);break;case"pan":this.moreProps.hovering=!1,this.props.onPan&&this.props.onPan(this.getMoreProps(),t);break;case"panend":this.props.onPanEnd&&this.props.onPanEnd(this.getMoreProps(),t);break;case"dragstart":if(this.getPanConditions().draggable)(0,this.context.amIOnTop)(this.suscriberId)&&(this.dragInProgress=!0,this.props.onDragStart(this.getMoreProps(),t));this.someDragInProgress=!0;break;case"drag":this.dragInProgress&&this.props.onDrag&&this.props.onDrag(this.getMoreProps(),t);break;case"dragend":this.dragInProgress&&this.props.onDragComplete&&this.props.onDragComplete(this.getMoreProps(),t),this.dragInProgress=!1,this.someDragInProgress=!1;break;case"dragcancel":if(this.dragInProgress||this.iSetTheCursorClass)(0,this.context.setCursorClass)(null)}}},{key:"isHover",value:function(e){return!!Jo(this.props.isHover)&&this.props.isHover(this.getMoreProps(),e)}},{key:"getPanConditions",value:function(){return{draggable:!(!this.props.selected||!this.moreProps.hovering)||this.props.enableDragOnHover&&this.moreProps.hovering,panEnabled:!this.props.disablePan}}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!1},t=e.trigger,n=e.force,r=zi[t]||t,a=this.props.drawOn.indexOf(r)>-1;if(a||this.props.selected||n){var o=this.context.chartCanvasType,i=this.props.canvasDraw;if(Ho(i)||"svg"===o){var l=this.state.updateCount;this.setState({updateCount:l+1})}else this.drawOnCanvas()}}},{key:"componentWillMount",value:function(){var e=this.context,t=e.subscribe,n=e.chartId,r=this.props,a=r.clip,o=r.edgeClip;t(this.suscriberId,{chartId:n,clip:a,edgeClip:o,listener:this.listener,draw:this.draw,getPanConditions:this.getPanConditions}),this.componentWillReceiveProps(this.props,this.context)}},{key:"componentWillUnmount",value:function(){((0,this.context.unsubscribe)(this.suscriberId),this.iSetTheCursorClass)&&(0,this.context.setCursorClass)(null)}},{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.context.chartCanvasType,n=this.props,r=n.canvasDraw,a=n.selected,o=n.interactiveCursorClass;if(e.selected!==a){var i=this.context.setCursorClass;a&&this.moreProps.hovering?(this.iSetTheCursorClass=!0,i(o)):(this.iSetTheCursorClass=!1,i(null))}Jo(r)&&!this.evaluationInProgress&&"svg"!==t&&(this.updateMoreProps(this.moreProps),this.drawOnCanvas())}},{key:"componentWillReceiveProps",value:function(e,t){var n=t.xScale,r=t.plotData,a=t.chartConfig,o=t.getMutableState;this.props.debug(t),this.moreProps=Ki({},this.moreProps,o(),{xScale:n,plotData:r,chartConfig:a})}},{key:"getMoreProps",value:function(){var e=this.context,t=e.xScale,n=e.plotData,r=e.chartConfig,a=e.morePropsDecorator,o=e.xAccessor,i=e.displayXAccessor,l=e.width,u=e.height,s=this.context,c=s.chartId,g=s.fullData,d=Ki({xScale:t,plotData:n,chartConfig:r,xAccessor:o,displayXAccessor:i,width:l,height:u,chartId:c,fullData:g},this.moreProps);return(a||fo)(d)}},{key:"preCanvasDraw",value:function(){}},{key:"postCanvasDraw",value:function(){}},{key:"drawOnCanvas",value:function(){var e=this.props,t=e.canvasDraw,n=e.canvasToDraw,r=this.context.getCanvasContexts,a=this.getMoreProps(),o=n(r());this.preCanvasDraw(o,a),t(o,a),this.postCanvasDraw(o,a)}},{key:"render",value:function(){var e=this.context,t=e.chartCanvasType,r=e.chartId,a=this.props,o=a.canvasDraw,i=a.clip,l=a.svgDraw;if(Jo(o)&&"svg"!==t)return null;var u=Jo(r)?"-"+r:"",s=i?{clipPath:"url(#chart-area-clip"+u+")"}:null;return n.createElement("g",{style:s},l(this.getMoreProps()))}}]),t}(n.Component);Li.propTypes={svgDraw:At().func.isRequired,canvasDraw:At().func,drawOn:At().array.isRequired,clip:At().bool.isRequired,edgeClip:At().bool.isRequired,interactiveCursorClass:At().string,selected:At().bool.isRequired,enableDragOnHover:At().bool.isRequired,disablePan:At().bool.isRequired,canvasToDraw:At().func.isRequired,isHover:At().func,onClick:At().func,onClickWhenHover:At().func,onClickOutside:At().func,onPan:At().func,onPanEnd:At().func,onDragStart:At().func,onDrag:At().func,onDragComplete:At().func,onDoubleClick:At().func,onDoubleClickWhenHover:At().func,onContextMenu:At().func,onContextMenuWhenHover:At().func,onMouseMove:At().func,onMouseDown:At().func,onHover:At().func,onUnHover:At().func,debug:At().func},Li.defaultProps={svgDraw:So(null),draw:[],canvasToDraw:function(e){return e.mouseCoord},clip:!0,edgeClip:!1,selected:!1,disablePan:!1,enableDragOnHover:!1,onClickWhenHover:ho,onClickOutside:ho,onDragStart:ho,onMouseMove:ho,onMouseDown:ho,debug:ho},Li.contextTypes={width:At().number.isRequired,height:At().number.isRequired,margin:At().object.isRequired,chartId:At().oneOfType([At().number,At().string]),getCanvasContexts:At().func,chartCanvasType:At().string,xScale:At().func.isRequired,xAccessor:At().func.isRequired,displayXAccessor:At().func.isRequired,plotData:At().array.isRequired,fullData:At().array.isRequired,chartConfig:At().oneOfType([At().array,At().object]).isRequired,morePropsDecorator:At().func,generateSubscriptionId:At().func,getMutableState:At().func.isRequired,amIOnTop:At().func.isRequired,subscribe:At().func.isRequired,unsubscribe:At().func.isRequired,setCursorClass:At().func.isRequired};var _i=Li;var Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ui=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ji=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Qi=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0};var qi=["drag","dragend"],$i=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preCanvasDraw=r.preCanvasDraw.bind(r),r.postCanvasDraw=r.postCanvasDraw.bind(r),r.shouldTypeProceed=r.shouldTypeProceed.bind(r),r.preEvaluate=r.preEvaluate.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ji(t,[{key:"preCanvasDraw",value:function(e,n){Qi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"preCanvasDraw",this).call(this,e,n),e.save();var r=this.context,a=r.margin,o=r.ratio,i=n.chartConfig,l=.5*o+i.origin[0]+a.left,u=.5*o+i.origin[1]+a.top,s=n.chartConfig,c=s.width,g=s.height,d=this.props,p=d.clip,h=d.edgeClip;e.setTransform(1,0,0,1,0,0),e.scale(o,o),h&&(e.beginPath(),e.rect(-1,u-10,c+a.left+a.right+1,g+20),e.clip()),e.translate(l,u),p&&(e.beginPath(),e.rect(-1,-1,c+1,g+1),e.clip())}},{key:"postCanvasDraw",value:function(e,n){Qi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCanvasDraw",this).call(this,e,n),e.restore()}},{key:"updateMoreProps",value:function(e){Qi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMoreProps",this).call(this,e);var n=e.chartConfig;if(n&&Array.isArray(n)){var r=this.context.chartId,a=wo(n,(function(e){return e.id===r}));this.moreProps.chartConfig=a}if(Jo(this.moreProps.chartConfig)){var o=Ui(this.moreProps.chartConfig.origin,2),i=o[0],l=o[1];if(Jo(e.mouseXY)){var u=Ui(e.mouseXY,2),s=u[0],c=u[1];this.moreProps.mouseXY=[s-i,c-l]}if(Jo(e.startPos)){var g=Ui(e.startPos,2),d=g[0],p=g[1];this.moreProps.startPos=[d-i,p-l]}}}},{key:"preEvaluate",value:function(){}},{key:"shouldTypeProceed",value:function(e,t){return!("mousemove"!==e&&"click"!==e||!this.props.disablePan)||(-1!==qi.indexOf(e)||!Jo(t)||!Jo(t.currentCharts)||t.currentCharts.indexOf(this.context.chartId)>-1)}}]),t}(_i);$i.propTypes=_i.propTypes,$i.defaultProps=_i.defaultProps,$i.contextTypes=Oi({},_i.contextTypes,{canvasOriginX:At().number,canvasOriginY:At().number,chartId:At().oneOfType([At().number,At().string]).isRequired,chartConfig:At().object.isRequired,ratio:At().number.isRequired});var el=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function tl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var rl=function(e){function t(){return tl(this,t),nl(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),el(t,[{key:"componentDidMount",value:function(){if("svg"!==this.context.chartCanvasType&&Jo(this.context.getCanvasContexts)){var e=this.context.getCanvasContexts();e&&t.drawOnCanvas(e.bg,this.props,this.context,this.props.children)}}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){if("svg"!==this.context.chartCanvasType)return null;var e=this.props,t={x:e.x,y:e.y,fill:e.fill,opacity:e.opacity,stroke:e.stroke,strokeOpacity:e.strokeOpacity,fontFamily:e.fontFamily,fontSize:e.fontSize,textAnchor:e.textAnchor};return n.createElement("text",t,"this.props.children(interval)")}}]),t}(yo);rl.drawOnCanvas=function(e,t,n,r){var a=n.interval;e.clearRect(-1,-1,e.canvas.width+2,e.canvas.height+2),e.save(),e.setTransform(1,0,0,1,0,0),e.translate(.5,.5);var o=t.x,i=t.y,l=t.fill,u=t.opacity,s=t.stroke,c=t.strokeOpacity,g=t.fontFamily,d=t.fontSize,p=t.textAnchor,h=r(a);e.strokeStyle=Ko(s,c),e.font=d+"px "+g,e.fillStyle=Ko(l,u),e.textAlign="middle"===p?"center":p,"none"!==s&&e.strokeText(h,o,i),e.fillText(h,o,i),e.restore()},rl.propTypes={x:At().number.isRequired,y:At().number.isRequired,fontFamily:At().string,fontSize:At().number.isRequired,fill:At().string,stroke:At().string,opacity:At().number,strokeOpacity:At().number,textAnchor:At().string,children:At().func},rl.defaultProps={opacity:.3,fill:"#9E7523",stroke:"#9E7523",strokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,textAnchor:"middle"},rl.contextTypes={interval:At().string.isRequired,getCanvasContexts:At().func,chartCanvasType:At().string};var al=__webpack_require__(3339),ol=__webpack_require__(3135),il=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ll=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ul=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleZoomOut=n.handleZoomOut.bind(n),n.handleZoomIn=n.handleZoomIn.bind(n),n.zoom=n.zoom.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ll(t,[{key:"zoom",value:function(e){var t=this,n=this.context,r=n.xAxisZoom,a=n.xScale,o=n.plotData,i=a((0,n.xAccessor)(Xo(o))),l=this.props.zoomMultiplier,u=e>0?1*l:1/l,s=a.domain(),c=il(s,2),g=c[0],d=c[1],p=a.range().map((function(e){return i+(e-i)*u})).map(a.invert),h=il(p,2),f=h[0],C=h[1],I=(0,ol.Z)(g,f),m=(0,ol.Z)(d,C),v=[.25,.3,.5,.6,.75,1].map((function(e){return[I(e),m(e)]}));this.interval=setInterval((function(){r(v.shift()),0===v.length&&(clearInterval(t.interval),delete t.interval)}),10)}},{key:"handleZoomOut",value:function(){this.interval||this.zoom(1)}},{key:"handleZoomIn",value:function(){this.interval||this.zoom(-1)}},{key:"render",value:function(){var e=this.context.chartConfig,t=e.width,r=e.height,a=this.props,o=a.size,i=a.heightFromBase,l=a.rx,u=a.ry,s=this.props,c=s.stroke,g=s.strokeOpacity,d=s.fill,p=s.strokeWidth,h=s.fillOpacity,f=this.props,C=f.textFill,I=f.textStrokeWidth,m=this.props.onReset,v=Math.round(t/2),b=r-i,A=il(o,2),y=A[0],k=A[1],Z=Math.round(b+k/2),S=v,w=(0,al.Z)(),B=v-y-2*p;w.moveTo(B-6,Z),w.lineTo(B+6,Z),w.closePath();var x=(0,al.Z)(),G=v+y+2*p;return x.moveTo(G-6,Z),x.lineTo(G+6,Z),x.moveTo(G,Z-5),x.lineTo(G,Z+5),n.createElement("g",{className:"react-stockcharts-zoom-button"},n.createElement("rect",{x:B-y/2,y:b,rx:l,ry:u,height:k,width:y,fill:d,fillOpacity:h,stroke:c,strokeOpacity:g,strokeWidth:p}),n.createElement("path",{d:w.toString(),stroke:C,strokeWidth:I}),n.createElement("rect",{x:S-y/2,y:b,rx:l,ry:u,height:k,width:y,fill:d,fillOpacity:h,stroke:c,strokeOpacity:g,strokeWidth:p}),n.createElement("g",{transform:"translate ("+S+", "+(b+k/4)+") scale(.14)"},n.createElement("path",{d:"M31 13C23.4 5.3 12.8.5 1.1.5c-23.3 0-42.3 19-42.3 42.5s18.9 42.5 42.3 42.5c13.8 0 26-6.6 33.7-16.9l-16.5-1.8C13.5 70.4 7.5 72.5 1 72.5c-16.2 0-29.3-13.2-29.3-29.4S-15.2 13.7 1 13.7c8.1 0 15.4 3.3 20.7 8.6l-10.9 11h32.5V.5L31 13z",fill:C})),n.createElement("rect",{x:G-y/2,y:b,rx:l,ry:u,height:k,width:y,fill:d,fillOpacity:h,stroke:c,strokeOpacity:g,strokeWidth:p}),n.createElement("path",{d:x.toString(),stroke:C,strokeWidth:I}),n.createElement("rect",{className:"react-stockcharts-enable-interaction out",onClick:this.handleZoomOut,x:B-y/2,y:b,rx:l,ry:u,height:k,width:y,fill:"none"}),n.createElement("rect",{className:"react-stockcharts-enable-interaction reset",onClick:m,x:S-y/2,y:b,rx:l,ry:u,height:k,width:y,fill:"none"}),n.createElement("rect",{className:"react-stockcharts-enable-interaction in",onClick:this.handleZoomIn,x:G-y/2,y:b,rx:l,ry:u,height:k,width:y,fill:"none"}))}}]),t}(n.Component);ul.propTypes={zoomMultiplier:At().number.isRequired,size:At().array.isRequired,heightFromBase:At().number.isRequired,rx:At().number.isRequired,ry:At().number.isRequired,stroke:At().string.isRequired,strokeWidth:At().number.isRequired,strokeOpacity:At().number.isRequired,fill:At().string.isRequired,fillOpacity:At().number.isRequired,fontSize:At().number.isRequired,textDy:At().string.isRequired,textFill:At().string.isRequired,textStrokeWidth:At().number.isRequired,onReset:At().func},ul.defaultProps={size:[30,24],heightFromBase:50,rx:3,ry:3,stroke:"#000000",strokeOpacity:.3,strokeWidth:1,fill:"#D6D6D6",fillOpacity:.4,fontSize:16,textDy:".3em",textFill:"#000000",textStrokeWidth:2,zoomMultiplier:1.5,onReset:ho},ul.contextTypes={xScale:At().func.isRequired,chartConfig:At().object.isRequired,plotData:At().array.isRequired,xAccessor:At().func.isRequired,xAxisZoom:At().func.isRequired};var sl=__webpack_require__(919),cl=__webpack_require__(2771),gl=__webpack_require__(464),dl=__webpack_require__(5418),pl=__webpack_require__(4245),hl=function(e){var t=e.type,r=e.width,o=e.ratio,l=e.allData,u=w().search,s=pl.parse(u),c=(s.periodid,s.sensortype,(0,n.useState)(null)),g=(0,i.Z)(c,2),d=(g[0],g[1],function(e){return e.date}),p=[d((0,dl.last)(l)),d(l.length>100?l[l.length-100]:l[0])];return(0,a.jsx)("div",{className:"ChartJS",children:null!=l?(0,a.jsx)(Mi,{height:400,ratio:o,width:r,margin:{left:50,right:50,top:10,bottom:30},type:t,data:l,seriesName:"MSFT",xAccessor:d,xScale:co(),xExtents:p,children:(0,a.jsxs)(jo,{id:1,yExtents:function(e){return[e.high,e.low]},children:[(0,a.jsx)(cl.Kc,{axisAt:"bottom",orient:"bottom",ticks:5}),(0,a.jsx)(cl.B2,{axisAt:"left",orient:"left",ticks:5}),(0,a.jsx)(sl.$Y,{width:(0,dl.timeIntervalBarWidth)(dn)})]})}):null})};hl.prototype={allData:At().array.isRequired,width:At().number.isRequired,ratio:At().number.isRequired,type:At().oneOf(["svg","hybrid"]).isRequired},hl.defaultProps={type:"svg"};var fl=hl=(0,gl.V6)(hl);var Cl=__webpack_require__(162);function Il(e){return(0,$e.Z)("MuiDataGrid",e)}var ml=(0,Ee.Z)("MuiDataGrid",["actionsCell","autoHeight","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell","cellContent","cellCheckbox","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLinkOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","root","row","row--editable","row--editing","row--lastVisible","row--dragging","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle"]),vl=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:function(e,t){return[(0,le.Z)({},"&.".concat(ml.autoHeight),t.autoHeight),(0,le.Z)({},"& .".concat(ml.editBooleanCell),t.editBooleanCell),(0,le.Z)({},"& .".concat(ml["cell--editing"]),t["cell--editing"]),(0,le.Z)({},"& .".concat(ml["cell--textCenter"]),t["cell--textCenter"]),(0,le.Z)({},"& .".concat(ml["cell--textLeft"]),t["cell--textLeft"]),(0,le.Z)({},"& .".concat(ml["cell--textRight"]),t["cell--textRight"]),(0,le.Z)({},"& .".concat(ml["cell--withRenderer"]),t["cell--withRenderer"]),(0,le.Z)({},"& .".concat(ml.cell),t.cell),(0,le.Z)({},"& .".concat(ml.cellContent),t.cellContent),(0,le.Z)({},"& .".concat(ml.cellCheckbox),t.cellCheckbox),(0,le.Z)({},"& .".concat(ml.checkboxInput),t.checkboxInput),(0,le.Z)({},"& .".concat(ml["columnHeader--alignCenter"]),t["columnHeader--alignCenter"]),(0,le.Z)({},"& .".concat(ml["columnHeader--alignLeft"]),t["columnHeader--alignLeft"]),(0,le.Z)({},"& .".concat(ml["columnHeader--alignRight"]),t["columnHeader--alignRight"]),(0,le.Z)({},"& .".concat(ml["columnHeader--dragging"]),t["columnHeader--dragging"]),(0,le.Z)({},"& .".concat(ml["columnHeader--moving"]),t["columnHeader--moving"]),(0,le.Z)({},"& .".concat(ml["columnHeader--numeric"]),t["columnHeader--numeric"]),(0,le.Z)({},"& .".concat(ml["columnHeader--sortable"]),t["columnHeader--sortable"]),(0,le.Z)({},"& .".concat(ml["columnHeader--sorted"]),t["columnHeader--sorted"]),(0,le.Z)({},"& .".concat(ml.columnHeader),t.columnHeader),(0,le.Z)({},"& .".concat(ml.columnHeaderCheckbox),t.columnHeaderCheckbox),(0,le.Z)({},"& .".concat(ml.columnHeaderDraggableContainer),t.columnHeaderDraggableContainer),(0,le.Z)({},"& .".concat(ml.columnHeaderTitleContainer),t.columnHeaderTitleContainer),(0,le.Z)({},"& .".concat(ml["columnSeparator--resizable"]),t["columnSeparator--resizable"]),(0,le.Z)({},"& .".concat(ml["columnSeparator--resizing"]),t["columnSeparator--resizing"]),(0,le.Z)({},"& .".concat(ml.columnSeparator),t.columnSeparator),(0,le.Z)({},"& .".concat(ml.filterIcon),t.filterIcon),(0,le.Z)({},"& .".concat(ml.iconSeparator),t.iconSeparator),(0,le.Z)({},"& .".concat(ml.menuIcon),t.menuIcon),(0,le.Z)({},"& .".concat(ml.menuIconButton),t.menuIconButton),(0,le.Z)({},"& .".concat(ml.menuOpen),t.menuOpen),(0,le.Z)({},"& .".concat(ml.menuList),t.menuList),(0,le.Z)({},"& .".concat(ml["row--editable"]),t["row--editable"]),(0,le.Z)({},"& .".concat(ml["row--editing"]),t["row--editing"]),(0,le.Z)({},"& .".concat(ml["row--dragging"]),t["row--dragging"]),(0,le.Z)({},"& .".concat(ml.row),t.row),(0,le.Z)({},"& .".concat(ml.rowReorderCellPlaceholder),t.rowReorderCellPlaceholder),(0,le.Z)({},"& .".concat(ml.rowReorderCell),t.rowReorderCell),(0,le.Z)({},"& .".concat(ml["rowReorderCell--draggable"]),t["rowReorderCell--draggable"]),(0,le.Z)({},"& .".concat(ml.sortIcon),t.sortIcon),(0,le.Z)({},"& .".concat(ml.withBorder),t.withBorder),(0,le.Z)({},"& .".concat(ml.treeDataGroupingCell),t.treeDataGroupingCell),(0,le.Z)({},"& .".concat(ml.treeDataGroupingCellToggle),t.treeDataGroupingCellToggle),(0,le.Z)({},"& .".concat(ml.detailPanelToggleCell),t.detailPanelToggleCell),(0,le.Z)({},"& .".concat(ml["detailPanelToggleCell--expanded"]),t["detailPanelToggleCell--expanded"]),t.root]}})((function(e){var t,n,r=e.theme,a="light"===r.palette.mode?(0,fe.$n)((0,fe.Fq)(r.palette.divider,1),.88):(0,fe._j)((0,fe.Fq)(r.palette.divider,1),.68);return(0,l.Z)({flex:1,boxSizing:"border-box",position:"relative",border:"1px solid ".concat(a),borderRadius:r.shape.borderRadius,color:r.palette.text.primary},r.typography.body2,(n={outline:"none",height:"100%",display:"flex",flexDirection:"column"},(0,le.Z)(n,"&.".concat(ml.autoHeight),(0,le.Z)({height:"auto"},"& .".concat(ml["row--lastVisible"]," .").concat(ml.cell),{borderBottomColor:"transparent"})),(0,le.Z)(n,"& .".concat(ml["virtualScrollerContent--overflowed"]," .").concat(ml["row--lastVisible"]," .").concat(ml.cell),{borderBottomColor:"transparent"}),(0,le.Z)(n,"& .".concat(ml.columnHeader,", & .").concat(ml.cell),{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"}),(0,le.Z)(n,"& .".concat(ml.columnHeader,":focus-within, & .").concat(ml.cell,":focus-within"),{outline:"solid ".concat((0,fe.Fq)(r.palette.primary.main,.5)," 1px"),outlineWidth:1,outlineOffset:-1}),(0,le.Z)(n,"& .".concat(ml.columnHeader,":focus, & .").concat(ml.cell,":focus"),{outline:"solid ".concat(r.palette.primary.main," 1px")}),(0,le.Z)(n,"& .".concat(ml.columnHeaderCheckbox,", & .").concat(ml.cellCheckbox),{padding:0,justifyContent:"center",alignItems:"center"}),(0,le.Z)(n,"& .".concat(ml.columnHeader),{position:"relative",display:"flex",alignItems:"center"}),(0,le.Z)(n,"& .".concat(ml["columnHeader--sorted"]," .").concat(ml.iconButtonContainer,", & .").concat(ml["columnHeader--filtered"]," .").concat(ml.iconButtonContainer),{visibility:"visible",width:"auto"}),(0,le.Z)(n,"& .".concat(ml.columnHeader,":not(.").concat(ml["columnHeader--sorted"],") .").concat(ml.sortIcon),{opacity:0,transition:r.transitions.create(["opacity"],{duration:r.transitions.duration.shorter})}),(0,le.Z)(n,"& .".concat(ml.columnHeader,":not(.").concat(ml["columnHeader--sorted"],"):hover .").concat(ml.sortIcon),{opacity:.5}),(0,le.Z)(n,"& .".concat(ml.columnHeaderTitleContainer),{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"}),(0,le.Z)(n,"& .".concat(ml.columnHeaderTitleContainerContent),{overflow:"hidden",display:"flex",alignItems:"center"}),(0,le.Z)(n,"& .".concat(ml.sortIcon,", & .").concat(ml.filterIcon),{fontSize:"inherit"}),(0,le.Z)(n,"& .".concat(ml["columnHeader--sortable"]),{cursor:"pointer"}),(0,le.Z)(n,"& .".concat(ml["columnHeader--alignCenter"]," .").concat(ml.columnHeaderTitleContainer),{justifyContent:"center"}),(0,le.Z)(n,"& .".concat(ml["columnHeader--alignRight"]," .").concat(ml.columnHeaderDraggableContainer,", & .").concat(ml["columnHeader--alignRight"]," .").concat(ml.columnHeaderTitleContainer),{flexDirection:"row-reverse"}),(0,le.Z)(n,"& .".concat(ml["columnHeader--alignCenter"]," .").concat(ml.menuIcon,", & .").concat(ml["columnHeader--alignRight"]," .").concat(ml.menuIcon),{marginRight:"auto",marginLeft:-6}),(0,le.Z)(n,"& .".concat(ml["columnHeader--alignRight"]," .").concat(ml.menuIcon,", & .").concat(ml["columnHeader--alignRight"]," .").concat(ml.menuIcon),{marginRight:"auto",marginLeft:-10}),(0,le.Z)(n,"& .".concat(ml["columnHeader--moving"]),{backgroundColor:r.palette.action.hover}),(0,le.Z)(n,"& .".concat(ml.columnSeparator),{position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:a}),(0,le.Z)(n,"& .".concat(ml["columnSeparator--sideLeft"]),{left:-12}),(0,le.Z)(n,"& .".concat(ml["columnSeparator--sideRight"]),{right:-12}),(0,le.Z)(n,"& .".concat(ml["columnSeparator--resizable"]),(0,le.Z)({cursor:"col-resize",touchAction:"none","&:hover":{color:r.palette.text.primary,"@media (hover: none)":{color:a}}},"&.".concat(ml["columnSeparator--resizing"]),{color:r.palette.text.primary})),(0,le.Z)(n,"& .".concat(ml.iconSeparator),{color:"inherit"}),(0,le.Z)(n,"& .".concat(ml.menuIcon),{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"}),(0,le.Z)(n,"& .".concat(ml.columnHeader,":hover"),(t={},(0,le.Z)(t,"& .".concat(ml.iconButtonContainer),{visibility:"visible",width:"auto"}),(0,le.Z)(t,"& .".concat(ml.menuIcon),{width:"auto",visibility:"visible"}),t)),(0,le.Z)(n,".".concat(ml.menuOpen),{visibility:"visible",width:"auto"}),(0,le.Z)(n,"& .".concat(ml.row),{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:r.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,fe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,fe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,fe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)}}}}),(0,le.Z)(n,"& .".concat(ml.cell),{display:"flex",alignItems:"center",overflow:"hidden",whiteSpace:"nowrap",borderBottom:"1px solid ".concat(a)}),(0,le.Z)(n,"& .".concat(ml.cellContent),{overflow:"hidden",textOverflow:"ellipsis"}),(0,le.Z)(n,"& .".concat(ml.cell,".").concat(ml["cell--editing"]),{padding:1,display:"flex",boxShadow:r.shadows[2],backgroundColor:r.palette.background.paper,"&:focus-within":{outline:"solid ".concat(r.palette.primary.main," 1px"),outlineOffset:"-1px"}}),(0,le.Z)(n,"& .".concat(ml["row--editing"]),{boxShadow:r.shadows[2]}),(0,le.Z)(n,"& .".concat(ml["row--editing"]," .").concat(ml.cell),{boxShadow:r.shadows[0],backgroundColor:r.palette.background.paper}),(0,le.Z)(n,"& .".concat(ml.editBooleanCell),{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"}),(0,le.Z)(n,"& .".concat(ml.booleanCell,'[data-value="true"]'),{color:r.palette.text.secondary}),(0,le.Z)(n,"& .".concat(ml.booleanCell,'[data-value="false"]'),{color:r.palette.text.disabled}),(0,le.Z)(n,"& .".concat(ml.actionsCell),{display:"inline-flex",alignItems:"center",gridGap:r.spacing(1)}),(0,le.Z)(n,"& .".concat(ml.rowReorderCell),{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:r.palette.action.disabledOpacity}),(0,le.Z)(n,"& .".concat(ml["rowReorderCell--draggable"]),{cursor:"move",opacity:1}),(0,le.Z)(n,"& .".concat(ml.rowReorderCellContainer),{padding:0,alignItems:"stretch"}),(0,le.Z)(n,"& .".concat(ml.withBorder),{borderRight:"1px solid ".concat(a)}),(0,le.Z)(n,"& .".concat(ml["cell--textLeft"]),{justifyContent:"flex-start"}),(0,le.Z)(n,"& .".concat(ml["cell--textRight"]),{justifyContent:"flex-end"}),(0,le.Z)(n,"& .".concat(ml["cell--textCenter"]),{justifyContent:"center"}),(0,le.Z)(n,"& .".concat(ml.columnHeaderDraggableContainer),{display:"flex",width:"100%"}),(0,le.Z)(n,"& .".concat(ml.rowReorderCellPlaceholder),{display:"none"}),(0,le.Z)(n,"& .".concat(ml["columnHeader--dragging"],", & .").concat(ml["row--dragging"]),{background:r.palette.background.paper,padding:"0 12px",borderRadius:r.shape.borderRadius,opacity:r.palette.action.disabledOpacity}),(0,le.Z)(n,"& .".concat(ml["row--dragging"]),(0,le.Z)({background:r.palette.background.paper,padding:"0 12px",borderRadius:r.shape.borderRadius,opacity:r.palette.action.disabledOpacity},"& .".concat(ml.rowReorderCellPlaceholder),{display:"flex"})),(0,le.Z)(n,"& .".concat(ml.treeDataGroupingCell),{display:"flex",alignItems:"center",width:"100%"}),(0,le.Z)(n,"& .".concat(ml.treeDataGroupingCellToggle),{flex:"0 0 28px",alignSelf:"stretch",marginRight:r.spacing(2)}),(0,le.Z)(n,"& .".concat(ml.groupingCriteriaCell),{display:"flex",alignItems:"center",width:"100%"}),(0,le.Z)(n,"& .".concat(ml.groupingCriteriaCellToggle),{flex:"0 0 28px",alignSelf:"stretch",marginRight:r.spacing(2)}),n))})),bl="NOT_FOUND";var Al=function(e,t){return e===t};function yl(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,a=void 0===r?Al:r,o=n.maxSize,i=void 0===o?1:o,l=n.resultEqualityCheck,u=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}}(a),s=1===i?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:bl},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(u):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var a=n[r];return r>0&&(n.splice(r,1),n.unshift(a)),a.value}return bl}return{get:r,put:function(t,a){r(t)===bl&&(n.unshift({key:t,value:a}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(i,u);function c(){var t=s.get(arguments);if(t===bl){if(t=e.apply(null,arguments),l){var n=s.getEntries(),r=n.find((function(e){return l(e.value,t)}));r&&(t=r.value)}s.put(arguments,t)}return t}return c.clearCache=function(){return s.clear()},c}function kl(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function Zl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o,i=0,l={memoizeOptions:void 0},u=r.pop();if("object"===typeof u&&(l=u,u=r.pop()),"function"!==typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var s=l,c=s.memoizeOptions,g=void 0===c?n:c,d=Array.isArray(g)?g:[g],p=kl(r),h=e.apply(void 0,[function(){return i++,u.apply(null,arguments)}].concat(d)),f=e((function(){for(var e=[],t=p.length,n=0;n<t;n++)e.push(p[n].apply(null,arguments));return o=h.apply(null,e)}));return Object.assign(f,{resultFunc:u,memoizedResultFunc:h,dependencies:p,lastResult:function(){return o},recomputations:function(){return i},resetRecomputations:function(){return i=0}}),f};return a}var Sl=Zl(yl),wl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",n=!1,r=Array.isArray(e)?e.join("\n"):e;return function(){n||(n=!0,"error"===t?console.error(r):console.warn(r))}},Bl=function(e,t){return e},xl={},Gl=(wl(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g `mySelector(state, apiRef.current.instanceId)`."]),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n[0],o=n[1],i=!!a.current,l=i?a.current.instanceId:null!=o?o:"default",u=i?a.current.state:a;if(xl[l]&&xl[l].get(t))return xl[l].get(t)(u,l);var s=Sl.apply(void 0,t);return xl[l]||(xl[l]=new Map),xl[l].set(t,s),s(u,l)};return r.cache=xl,r}),Rl=function(e){return e.columns},Wl=Gl(Rl,(function(e){return e.all})),Vl=Gl(Rl,(function(e){return e.lookup})),Fl=Gl(Wl,Vl,(function(e,t){return e.map((function(e){return t[e]}))})),Nl=Gl(Rl,(function(e){return e.columnVisibilityModel})),El=Gl(Fl,Nl,(function(e,t){return e.filter((function(e){return!1!==t[e.field]}))})),Dl=(Gl(El,(function(e){return e.map((function(e){return e.field}))})),Gl(El,(function(e){for(var t=[],n=0,r=0;r<e.length;r+=1)t.push(n),n+=e[r].computedWidth;return t}))),Xl=Gl(El,Dl,(function(e,t){var n=e.length;return 0===n?0:t[n-1]+e[n-1].computedWidth})),Jl=Gl(Fl,(function(e){return e.filter((function(e){return e.filterable}))})),Hl=Gl(Fl,(function(e){return e.reduce((function(e,t){return t.filterable&&(e[t.field]=t),e}),{})})),Yl=(Bl(Wl),Bl(Fl),Bl(El),Bl(Jl),Bl(Gl(Jl,(function(e){return e.map((function(e){return e.field}))}))),Bl(Gl(El,(function(e){return e.length}))),Bl(Gl(Dl,Xl,(function(e,t){return{totalWidth:t,positions:e}}))));wl(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);var Tl=function(e,t){return function(e){return e.cache}(t)?t(e):t(e.current.state)},Ml=n.createContext(void 0);function Kl(){var e=n.useContext(Ml);if(void 0===e)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid or DataGridPro parent component.","This can also happen if you are bundling multiple versions of the data grid."].join("\n"));return e}var Pl=n.createContext(void 0);var zl=function(){var e=n.useContext(Pl);if(!e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid/DataGridPro component.");return e},Ll=function(e){return e.rows},_l=Gl(Ll,(function(e){return e.totalRowCount})),Ol=Gl(Ll,(function(e){return e.loading})),Ul=Gl(Ll,(function(e){return e.totalTopLevelRowCount})),jl=Gl(Ll,(function(e){return e.idRowsLookup})),Ql=Gl(Ll,(function(e){return e.tree})),ql=Gl(Ll,(function(e){return e.groupingName})),$l=Gl(Ll,(function(e){return e.treeDepth})),eu=Gl(Ll,(function(e){return e.ids})),tu=["children","className"],nu=n.forwardRef((function(e,t){var r,o=zl(),u=e.children,s=e.className,c=(0,ge.Z)(e,tu),g=Kl(),d=Tl(g,El),p=Tl(g,_l),h=n.useRef(null),f=(0,me.Z)(h,t);g.current.rootElementRef=h;var C=n.useState(!1),I=(0,i.Z)(C,2),m=I[0],v=I[1];return(0,Cl.Z)((function(){v(!0)}),[]),(0,Cl.Z)((function(){m&&g.current.unstable_updateGridDimensionsRef()}),[g,m]),m?(0,a.jsx)(vl,(0,l.Z)({ref:f,className:(0,de.Z)(s,null==(r=o.classes)?void 0:r.root,ml.root,o.autoHeight&&ml.autoHeight),role:"grid","aria-colcount":d.length,"aria-rowcount":p,"aria-multiselectable":!o.disableMultipleSelection,"aria-label":o["aria-label"],"aria-labelledby":o["aria-labelledby"]},c,{children:u})):null}));function ru(e,t){var r=n.useRef(null);if(r.current)return r.current;var a=e.current.getLogger(t);return r.current=a,a}var au=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:function(e,t){return t.main}})((function(){return{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"}}));function ou(e){var t=function(e){var t=e.classes;return(0,he.Z)({root:["main"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(au,{className:t.root,children:e.children})}function iu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uu(e,t,n){return t&&lu(e.prototype,t),n&&lu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function su(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}function cu(e){return cu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cu(e)}function gu(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function du(e){return du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(e)}function pu(e,t){if(t&&("object"===du(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function hu(e){var t=gu();return function(){var n,r=cu(e);if(t){var a=cu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pu(this,n)}}var fu,Cu=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"componentDidCatch",value:function(e,t){this.props.api.current&&(this.logError(e),this.props.api.current.showError({error:e,errorInfo:t}))}},{key:"logError",value:function(e,t){this.props.logger.error("An unexpected error occurred. Error: ".concat(e&&e.message,". "),e,t)}},{key:"render",value:function(){var e;return this.props.hasError||null!=(e=this.state)&&e.hasError?this.props.render(this.props.componentProps||this.state):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(n.Component);function Iu(e){var t=e.children,n=Kl(),r=ru(n,"GridErrorHandler"),o=zl(),i=n.current.state.error;return(0,a.jsx)(Cu,{hasError:null!=i,componentProps:i,api:n,logger:r,render:function(e){var t;return(0,a.jsx)(ou,{children:(0,a.jsx)(o.components.ErrorOverlay,(0,l.Z)({},e,null==(t=o.componentsProps)?void 0:t.errorOverlay))})},children:t})}function mu(){var e,t=Kl(),r=zl(),o=n.useRef(null);return t.current.headerRef=o,(0,a.jsx)("div",{ref:o,children:(0,a.jsx)(r.components.Header,(0,l.Z)({},null==(e=r.componentsProps)?void 0:e.header))})}!function(e){e.resize="resize",e.debouncedResize="debouncedResize",e.viewportInnerSizeChange="viewportInnerSizeChange",e.componentError="componentError",e.unmount="unmount",e.cellModeChange="cellModeChange",e.cellClick="cellClick",e.cellDoubleClick="cellDoubleClick",e.cellMouseDown="cellMouseDown",e.cellMouseUp="cellMouseUp",e.cellKeyDown="cellKeyDown",e.cellFocusIn="cellFocusIn",e.cellFocusOut="cellFocusOut",e.cellDragEnter="cellDragEnter",e.cellDragOver="cellDragOver",e.editCellPropsChange="editCellPropsChange",e.cellEditCommit="cellEditCommit",e.cellEditStart="cellEditStart",e.cellEditStop="cellEditStop",e.rowEditStart="rowEditStart",e.rowEditStop="rowEditStop",e.rowEditCommit="rowEditCommit",e.cellNavigationKeyDown="cellNavigationKeyDown",e.rowClick="rowClick",e.rowDoubleClick="rowDoubleClick",e.rowMouseEnter="rowMouseEnter",e.rowMouseLeave="rowMouseLeave",e.editRowsModelChange="editRowsModelChange",e.rowDragStart="rowDragStart",e.rowDragOver="rowDragOver",e.rowDragEnd="rowDragEnd",e.columnHeaderBlur="columnHeaderBlur",e.columnHeaderFocus="columnHeaderFocus",e.columnHeaderNavigationKeyDown="columnHeaderNavigationKeyDown",e.columnHeaderKeyDown="columnHeaderKeyDown",e.columnHeaderClick="columnHeaderClick",e.columnHeaderDoubleClick="columnHeaderDoubleClick",e.columnHeaderOver="columnHeaderOver",e.columnHeaderOut="columnHeaderOut",e.columnHeaderEnter="columnHeaderEnter",e.columnHeaderLeave="columnHeaderLeave",e.columnHeaderDragStart="columnHeaderDragStart",e.columnHeaderDragOver="columnHeaderDragOver",e.columnHeaderDragEnter="columnHeaderDragEnter",e.columnHeaderDragEnd="columnHeaderDragEnd",e.selectionChange="selectionChange",e.headerSelectionCheckboxChange="headerSelectionCheckboxChange",e.rowSelectionCheckboxChange="rowSelectionCheckboxChange",e.pageChange="pageChange",e.pageSizeChange="pageSizeChange",e.rowGroupingModelChange="rowGroupingModelChange",e.rowsScroll="rowsScroll",e.rowsScrollEnd="rowsScrollEnd",e.columnSeparatorMouseDown="columnSeparatorMouseDown",e.columnResize="columnResize",e.columnWidthChange="columnWidthChange",e.columnResizeStart="columnResizeStart",e.columnResizeStop="columnResizeStop",e.columnOrderChange="columnOrderChange",e.rowOrderChange="rowOrderChange",e.rowsSet="rowsSet",e.rowExpansionChange="rowExpansionChange",e.sortedRowsSet="sortedRowsSet",e.filteredRowsSet="filteredRowsSet",e.columnsChange="columnsChange",e.detailPanelsExpandedRowIdsChange="detailPanelsExpandedRowIdsChange",e.pinnedColumnsChange="pinnedColumnsChange",e.activeStrategyProcessorChange="activeStrategyProcessorChange",e.strategyAvailabilityChange="strategyAvailabilityChange",e.sortModelChange="sortModelChange",e.filterModelChange="filterModelChange",e.columnVisibilityModelChange="columnVisibilityModelChange",e.stateChange="stateChange",e.columnVisibilityChange="columnVisibilityChange",e.virtualScrollerContentSizeChange="virtualScrollerContentSizeChange",e.virtualScrollerWheel="virtualScrollerWheel",e.virtualScrollerTouchMove="virtualScrollerTouchMove",e.preferencePanelClose="preferencePanelClose",e.preferencePanelOpen="preferencePanelOpen"}(fu||(fu={}));var vu=__webpack_require__(7602);function bu(e,t){var n=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,a=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.style.width=n.offsetWidth+1+"px",a.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},r=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var r=this;n(this),this.__resizeRAF__&&t.cancelAnimationFrame(this.__resizeRAF__),this.__resizeRAF__=t.requestAnimationFrame((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(r)&&(r.__resizeLast__.width=r.offsetWidth,r.__resizeLast__.height=r.offsetHeight,r.__resizeListeners__.forEach((function(t){t.call(r,e)})))}))}},a=!1,o="",i="animationstart",l="Webkit Moz O ms".split(" "),u="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),s=document.createElement("fakeelement");if(void 0!==s.style.animationName&&(a=!0),!1===a)for(var c=0;c<l.length;c++)if(void 0!==s.style[l[c]+"AnimationName"]){o="-"+l[c].toLowerCase()+"-",i=u[c],a=!0;break}var g="resizeanim",d="@"+o+"keyframes "+"resizeanim { from { opacity: 0; } to { opacity: 0; } } ",p=o+"animation: 1ms "+"resizeanim; ";return{addResizeListener:function(a,o){if(!a.__resizeTriggers__){var l=a.ownerDocument,u=t.getComputedStyle(a);u&&"static"==u.position&&(a.style.position="relative"),function(t){if(!t.getElementById("muiDetectElementResize")){var n=(d||"")+".Mui-resizeTriggers { "+(p||"")+'visibility: hidden; opacity: 0; } .Mui-resizeTriggers, .Mui-resizeTriggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .Mui-resizeTriggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=t.head||t.getElementsByTagName("head")[0],a=t.createElement("style");a.id="muiDetectElementResize",a.type="text/css",null!=e&&a.setAttribute("nonce",e),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(t.createTextNode(n)),r.appendChild(a)}}(l),a.__resizeLast__={},a.__resizeListeners__=[],(a.__resizeTriggers__=l.createElement("div")).className="Mui-resizeTriggers",a.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',a.appendChild(a.__resizeTriggers__),n(a),a.addEventListener("scroll",r,!0),i&&(a.__resizeTriggers__.__animationListener__=function(e){e.animationName==g&&n(a)},a.__resizeTriggers__.addEventListener(i,a.__resizeTriggers__.__animationListener__))}a.__resizeListeners__.push(o)},removeResizeListener:function(e,t){if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",r,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(i,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(n){}}}}}var Au=["children","defaultHeight","defaultWidth","disableHeight","disableWidth","nonce","onResize","style"],yu=n.forwardRef((function(e,t){var r=e.children,o=e.defaultHeight,u=void 0===o?null:o,s=e.defaultWidth,c=void 0===s?null:s,g=e.disableHeight,d=void 0!==g&&g,p=e.disableWidth,h=void 0!==p&&p,f=e.nonce,C=e.onResize,I=e.style,m=(0,ge.Z)(e,Au),v=n.useState({height:u,width:c}),b=(0,i.Z)(v,2),A=b[0],y=b[1],k=n.useRef(null),Z=n.useRef(null),S=(0,ve.Z)((function(){if(Z.current){var e=Z.current.offsetHeight||0,t=Z.current.offsetWidth||0,n=(0,vu.Z)(Z.current).getComputedStyle(Z.current),r=parseInt(n.paddingLeft,10)||0,a=parseInt(n.paddingRight,10)||0,o=e-(parseInt(n.paddingTop,10)||0)-(parseInt(n.paddingBottom,10)||0),i=t-r-a;(!d&&A.height!==o||!h&&A.width!==i)&&(y({height:o,width:i}),C&&C({height:o,width:i}))}}));(0,Cl.Z)((function(){var e;if(Z.current=k.current.parentElement,Z){var t=(0,vu.Z)(null!=(e=Z.current)?e:void 0),n=bu(f,t);return n.addResizeListener(Z.current,S),S(),function(){n.removeResizeListener(Z.current,S)}}}),[f,S]);var w={overflow:"visible"},B={};d||(w.height=0,B.height=A.height),h||(w.width=0,B.width=A.width);var x=(0,me.Z)(k,t);return(0,a.jsx)("div",(0,l.Z)({ref:x,style:(0,l.Z)({},w,I)},m,{children:null===A.height&&null===A.width?null:r(B)}))})),ku=function(e){return e.sorting},Zu=Gl(ku,(function(e){return e.sortedRows})),Su=Gl(Zu,jl,(function(e,t){return e.map((function(e){return{id:e,model:t[e]}}))})),wu=Gl(ku,(function(e){return e.sortModel})),Bu=Gl(wu,(function(e){var t=e.reduce((function(t,n,r){return t[n.field]={sortDirection:n.sort,sortIndex:e.length>1?r+1:void 0},t}),{});return t})),xu=function(e){return e.filter},Gu=Gl(xu,(function(e){return e.filterModel})),Ru=Gl(xu,(function(e){return e.visibleRowsLookup})),Wu=Gl(xu,(function(e){return e.filteredRowsLookup})),Vu=(Gl(xu,(function(e){return e.filteredDescendantCountLookup})),Gl(Ru,Su,(function(e,t){return t.filter((function(t){return!1!==e[t.id]}))}))),Fu=Gl(Vu,(function(e){return e.map((function(e){return e.id}))})),Nu=Gl(Wu,Su,(function(e,t){return t.filter((function(t){return!1!==e[t.id]}))})),Eu=Gl(Nu,(function(e){return e.map((function(e){return e.id}))})),Du=Gl(Vu,Ql,$l,(function(e,t,n){return n<2?e:e.filter((function(e){var n;return 0===(null==(n=t[e.id])?void 0:n.depth)}))})),Xu=Gl(Vu,(function(e){return e.length})),Ju=Gl(Du,(function(e){return e.length})),Hu=Gl(Gu,Vl,(function(e,t){var n;return null==(n=e.items)?void 0:n.filter((function(e){var n,r;if(!e.columnField)return!1;var a=t[e.columnField];if(null==a||!a.filterOperators||0===(null==a||null==(n=a.filterOperators)?void 0:n.length))return!1;var o=a.filterOperators.find((function(t){return t.value===e.operatorValue}));return!!o&&(!o.InputComponent||null!=e.value&&""!==(null==(r=e.value)?void 0:r.toString()))}))})),Yu=Gl(Hu,(function(e){return e.reduce((function(e,t){return e[t.columnField]?e[t.columnField].push(t):e[t.columnField]=[t],e}),{})})),Tu=function(e){return e.density},Mu=Gl(Tu,(function(e){return e.value})),Ku=Gl(Tu,(function(e){return e.rowHeight})),Pu=Gl(Tu,(function(e){return e.headerHeight})),zu=Gl(Tu,(function(e){return e.factor}));function Lu(e){var t,r,o=Kl(),u=zl(),s=Tl(o,Pu),c=n.useState((function(){var e,t;return null!=(e=null==(t=o.current.getRootDimensions())?void 0:t.viewportInnerSize)?e:null})),g=(0,i.Z)(c,2),d=g[0],p=g[1],h=n.useCallback((function(){var e,t;p(null!=(e=null==(t=o.current.getRootDimensions())?void 0:t.viewportInnerSize)?e:null)}),[o]);(0,Cl.Z)((function(){return o.current.subscribeEvent(fu.viewportInnerSizeChange,h)}),[o,h]);var f=null!=(t=null==d?void 0:d.height)?t:0;return u.autoHeight&&0===f&&(f="auto"),d?(0,a.jsx)("div",(0,l.Z)({style:{height:f,width:null!=(r=null==d?void 0:d.width)?r:0,position:"absolute",top:s,bottom:"auto"===f?0:void 0}},e)):null}function _u(){var e,t,n,r=Kl(),o=zl(),i=Tl(r,_l),u=Tl(r,Xu),s=Tl(r,Ol),c=!s&&i>0&&0===u,g=null;s||0!==i||(g=(0,a.jsx)(o.components.NoRowsOverlay,(0,l.Z)({},null==(e=o.componentsProps)?void 0:e.noRowsOverlay)));c&&(g=(0,a.jsx)(o.components.NoResultsOverlay,(0,l.Z)({},null==(t=o.componentsProps)?void 0:t.noResultsOverlay)));o.loading&&(g=(0,a.jsx)(o.components.LoadingOverlay,(0,l.Z)({},null==(n=o.componentsProps)?void 0:n.loadingOverlay)));return null===g?null:(0,a.jsx)(Lu,{children:g})}function Ou(e){var t=e.children,r=e.VirtualScrollerComponent,o=e.ColumnHeadersComponent,l=Kl(),u=zl(),s=Tl(l,Pu),c=n.useState(u.disableVirtualization),g=(0,i.Z)(c,2),d=g[0],p=g[1],h=n.useCallback((function(){p(!0)}),[]),f=n.useCallback((function(){p(!1)}),[]);l.current.unstable_disableVirtualization=h,l.current.unstable_enableVirtualization=f;var C=n.useRef(null),I=n.useRef(null),m=n.useRef(null),v=n.useRef(null);l.current.columnHeadersContainerElementRef=I,l.current.columnHeadersElementRef=C,l.current.windowRef=m,l.current.renderingZoneRef=v;var b=n.useCallback((function(e){l.current.publishEvent(fu.resize,e)}),[l]);return(0,a.jsxs)(ou,{children:[(0,a.jsx)(_u,{}),(0,a.jsx)(o,{ref:I,innerRef:C}),(0,a.jsx)(yu,{nonce:u.nonce,disableHeight:u.autoHeight,onResize:b,children:function(e){var t={width:e.width,height:e.height?e.height-s:"auto",marginTop:s};return(0,a.jsx)(r,{ref:m,style:t,disableVirtualization:d})}}),t]})}function Uu(){var e,t=Kl(),r=zl(),o=n.useRef(null);return t.current.footerRef=o,r.hideFooter?null:(0,a.jsx)("div",{ref:o,children:(0,a.jsx)(r.components.Footer,(0,l.Z)({},null==(e=r.componentsProps)?void 0:e.footer))})}var ju=function(e){var t=e.apiRef,n=e.props,r=e.children;return(0,a.jsx)(Pl.Provider,{value:n,children:(0,a.jsx)(Ml.Provider,{value:t,children:r})})};function Qu(e){return"function"===typeof e}function qu(){try{var e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(t){return!1}}function $u(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var es=function(e,t,n){return Math.max(t,Math.min(n,e))};function ts(e,t){if(e===t)return!0;if(e&&t&&"object"===typeof e&&"object"===typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r+=1)if(!ts(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(var a=Array.from(e.entries()),o=0;o<a.length;o+=1)if(!t.has(a[o][0]))return!1;for(var i=0;i<a.length;i+=1){var l=a[i];if(!ts(l[1],t.get(l[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(var u=Array.from(e.entries()),s=0;s<u.length;s+=1)if(!t.has(u[s][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){var c=e.length;if(c!==t.length)return!1;for(var g=0;g<c;g+=1)if(e[g]!==t[g])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var d=Object.keys(e),p=d.length;if(p!==Object.keys(t).length)return!1;for(var h=0;h<p;h+=1)if(!Object.prototype.hasOwnProperty.call(t,d[h]))return!1;for(var f=0;f<p;f+=1){var C=d[f];if(!ts(e[C],t[C]))return!1}return!0}return e!==e&&t!==t}var ns=qu()&&null!=window.localStorage.getItem("DEBUG"),rs=function(){},as={debug:rs,info:rs,warn:rs,error:rs},os=["debug","info","warn","error"];function is(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console,r=os.indexOf(t);if(-1===r)throw new Error("MUI: Log level ".concat(t," not recognized."));var a=os.reduce((function(t,a,o){return t[a]=o>=r?function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=r[0],l=r.slice(1);n[a].apply(n,["MUI: ".concat(e," - ").concat(i)].concat((0,Ae.Z)(l)))}:rs,t}),{});return a}function ls(e,t,r){var a=n.useRef(t),o=n.useState(Object.keys(t)),l=(0,i.Z)(o,1)[0],u=n.useCallback((function(){e.current&&l.forEach((function(t){e.current.hasOwnProperty(t)||(e.current[t]=function(){var e;return(e=a.current)[t].apply(e,arguments)})}))}),[l,e]);n.useEffect((function(){a.current=t}),[t]),n.useEffect((function(){u()}),[u]),u()}var us,ss=1e3,cs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss;iu(this,e),this.timeouts=new Map,this.cleanupTimeout=ss,this.cleanupTimeout=t}return uu(e,[{key:"register",value:function(e,t,n){var r=this;this.timeouts||(this.timeouts=new Map);var a=setTimeout((function(){"function"===typeof t&&t(),r.timeouts.delete(n.cleanupToken)}),this.cleanupTimeout);this.timeouts.set(n.cleanupToken,a)}},{key:"unregister",value:function(e){var t=this.timeouts.get(e.cleanupToken);t&&(this.timeouts.delete(e.cleanupToken),clearTimeout(t))}},{key:"reset",value:function(){var e=this;this.timeouts&&(this.timeouts.forEach((function(t,n){e.unregister({cleanupToken:n})})),this.timeouts=void 0)}}]),e}(),gs=function(){function e(){iu(this,e),this.registry=new FinalizationRegistry((function(e){"function"===typeof e&&e()}))}return uu(e,[{key:"register",value:function(e,t,n){this.registry.register(e,t,n)}},{key:"unregister",value:function(e){this.registry.unregister(e)}},{key:"reset",value:function(){}}]),e}();!function(e){e.DataGrid="DataGrid",e.DataGridPro="DataGridPro"}(us||(us={}));var ds=uu((function e(){iu(this,e)}));var ps="undefined"!==typeof FinalizationRegistry?new gs:new cs,hs=function(e){var t=0;return function(r,a,o,l){var u=n.useState(new ds),s=(0,i.Z)(u,1)[0],c=n.useRef(null),g=n.useRef();g.current=o;var d=n.useRef(null);if(!c.current&&g.current){c.current=r.current.subscribeEvent(a,(function(e,t,n){var r;t.defaultMuiPrevented||(null==(r=g.current)||r.call(g,e,t,n))}),l),t+=1,d.current={cleanupToken:t},e.register(s,(function(){var e;null==(e=c.current)||e.call(c),c.current=null,d.current=null}),d.current)}else!g.current&&c.current&&(c.current(),c.current=null,d.current&&(e.unregister(d.current),d.current=null));n.useEffect((function(){if(!c.current&&g.current){c.current=r.current.subscribeEvent(a,(function(e,t,n){var r;t.defaultMuiPrevented||(null==(r=g.current)||r.call(g,e,t,n))}),l)}return d.current&&e&&(e.unregister(d.current),d.current=null),function(){var e;null==(e=c.current)||e.call(c),c.current=null}}),[r,a,l])}}(ps),fs={isFirst:!0};function Cs(e,t,n){hs(e,t,n,fs)}var Is=function(){function e(){iu(this,e),this.maxListeners=10,this.warnOnce=!1,this.events={}}return uu(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.events[e];r||(r={highPriority:new Map,regular:new Map},this.events[e]=r),n.isFirst?r.highPriority.set(t,!0):r.regular.set(t,!0)}},{key:"removeListener",value:function(e,t){this.events[e]&&(this.events[e].regular.delete(t),this.events[e].highPriority.delete(t))}},{key:"removeAllListeners",value:function(){this.events={}}},{key:"emit",value:function(e){var t=this.events[e];if(t){for(var n=Array.from(t.highPriority.keys()),r=Array.from(t.regular.keys()),a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];for(var l=n.length-1;l>=0;l-=1){var u=n[l];t.highPriority.has(u)&&u.apply(this,o)}for(var s=0;s<r.length;s+=1){var c=r[s];t.regular.has(c)&&c.apply(this,o)}}}},{key:"once",value:function(e,t){var n=this;this.on(e,(function r(){n.removeListener(e,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];t.apply(n,o)}))}}]),e}(),ms=function(e){return void 0!==e.isPropagationStopped},vs=0;function bs(e){var t=function(e,t){if("object"!==du(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==du(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===du(t)?t:String(t)}var As="none",ys={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree"},ks=["stateId"],Zs=function(e,t){var r=function(e,t){var r=n.useRef();r.current||(r.current={unstable_eventManager:new Is,state:{},instanceId:vs},vs+=1),n.useImperativeHandle(e,(function(){return r.current}),[r]);var a=n.useCallback((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=n[0],i=n[1],l=n[2],u=void 0===l?{}:l;if(u.defaultMuiPrevented=!1,!ms(u)||!u.isPropagationStopped()){var s=t.signature===us.DataGridPro?{api:r.current}:{};r.current.unstable_eventManager.emit(o,i,u,s)}}),[r,t.signature]),o=n.useCallback((function(e,t,n){r.current.unstable_eventManager.on(e,t,n);var a=r.current;return function(){a.unstable_eventManager.removeListener(e,t)}}),[r]),i=n.useCallback((function(e){r.current.publishEvent(fu.componentError,e)}),[r]);return ls(r,{subscribeEvent:o,publishEvent:a,showError:i}),n.useEffect((function(){var e=r.current;return function(){e.publishEvent(fu.unmount)}}),[r]),r}(e,t);return function(e,t){e.current.getLogger=n.useCallback((function(e){return ns?is(e,"debug",t.logger):t.logLevel?is(e,t.logLevel.toString(),t.logger):as}),[t.logLevel,t.logger])}(r,t),function(e,t){var r=n.useCallback((function(t){e.current.setState((function(e){return(0,l.Z)({},e,{error:t})}))}),[e]);n.useEffect((function(){r(t.error)}),[r,t.error]),hs(e,fu.componentError,r)}(r,t),function(e,t){var r=n.useRef({}),a=n.useState(),o=(0,i.Z)(a,2)[1],u=n.useCallback((function(e){var t=e.stateId,n=(0,ge.Z)(e,ks);r.current[t]=(0,l.Z)({},n,{stateId:t})}),[]),s=n.useCallback((function(n){var a;if(a=Qu(n)?n(e.current.state):n,e.current.state===a)return!1;var o=!1,i=[];if(Object.keys(r.current).forEach((function(t){var n=r.current[t],l=n.stateSelector(e.current.state,e.current.instanceId),u=n.stateSelector(a,e.current.instanceId);u!==l&&(i.push({stateId:n.stateId,hasPropChanged:u!==n.propModel}),void 0!==n.propModel&&u!==n.propModel&&(o=!0))})),i.length>1)throw new Error("You're not allowed to update several sub-state in one transaction. You already updated ".concat(i[0].stateId,", therefore, you're not allowed to update ").concat(i.map((function(e){return e.stateId})).join(", ")," in the same transaction."));if(o||(e.current.state=a,e.current.publishEvent&&e.current.publishEvent(fu.stateChange,a)),1===i.length){var l=i[0],u=l.stateId,s=l.hasPropChanged,c=r.current[u],g=c.stateSelector(a,e.current.instanceId);if(c.propOnChange&&s){var d=t.signature===us.DataGridPro?{api:e.current}:{};c.propOnChange(g,d)}o||e.current.publishEvent(c.changeEvent,g)}return!o}),[e,t.signature]),c=n.useCallback((function(){return o((function(){return e.current.state}))}),[e]);ls(e,{setState:s,forceUpdate:c,unstable_updateControlState:u})}(r,t),function(e){var t=n.useRef({}),r=n.useCallback((function(e){e&&Object.values(e.appliers).forEach((function(e){e()}))}),[]),a=n.useCallback((function(e,n,a){t.current[e]||(t.current[e]={processors:{},appliers:{}});var o=t.current[e];return o.processors[n]!==a&&(o.processors[n]=a,r(o)),function(){var r=t.current[e].processors,a=(0,ge.Z)(r,[n].map(bs));t.current[e].processors=a}}),[r]),o=n.useCallback((function(e,n,r){return t.current[e]||(t.current[e]={processors:{},appliers:{}}),t.current[e].appliers[n]=r,function(){var r=t.current[e].appliers,a=(0,ge.Z)(r,[n].map(bs));t.current[e].appliers=a}}),[]),i=n.useCallback((function(e){var n=t.current[e];r(n)}),[r]),l=n.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n[0],o=n[1],i=n[2];return t.current[a]?Object.values(t.current[a].processors).reduce((function(e,t){return t(e,i)}),o):o}),[]);ls(e,{unstable_registerPipeProcessor:a,unstable_registerPipeApplier:o,unstable_requestPipeProcessorsApplication:i,unstable_applyPipeProcessors:l})}(r),function(e){var t=n.useRef(new Map),r=n.useRef({}),a=n.useCallback((function(t,n,a){var o=function(){var e=r.current[n],a=(0,ge.Z)(e,[t].map(bs));r.current[n]=a};r.current[n]||(r.current[n]={});var i=r.current[n],l=i[t];return i[t]=a,l&&l!==a?(t===e.current.unstable_getActiveStrategy(ys[n])&&e.current.publishEvent(fu.activeStrategyProcessorChange,n),o):o}),[e]),o=n.useCallback((function(t,n){var a=e.current.unstable_getActiveStrategy(ys[t]);if(null==a)throw new Error("Can't apply a strategy processor before defining an active strategy");var o=r.current[t];if(!o||!o[a])throw new Error('No processor found for processor "'.concat(t,'" on strategy "').concat(a,'"'));return(0,o[a])(n)}),[e]),l=n.useCallback((function(e){var n,r=Array.from(t.current.entries()).find((function(t){var n=(0,i.Z)(t,2)[1];return n.group===e&&n.isAvailable()}));return null!=(n=null==r?void 0:r[0])?n:As}),[]),u=n.useCallback((function(n,r,a){t.current.set(r,{group:n,isAvailable:a}),e.current.publishEvent(fu.strategyAvailabilityChange)}),[e]);ls(e,{unstable_registerStrategyProcessor:a,unstable_applyStrategyProcessor:o,unstable_getActiveStrategy:l,unstable_setStrategyAvailability:u})}(r),function(e,t){var r=n.useCallback((function(e){if(null==t.localeText[e])throw new Error("Missing translation for key ".concat(e,"."));return t.localeText[e]}),[t.localeText]);ls(e,{getLocaleText:r})}(r,t),r},Ss=function(e,t,r){var a=n.useRef(!1);a.current||(t.current.state=e(t.current.state,r,t),a.current=!0)};function ws(e){var t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);var n=document.createRange();n.selectNode(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}var Bs=function(e){var t=n.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0!==e.current.getSelectedRows().size){var n=e.current.getDataAsCsv({includeHeaders:t,delimiter:"\t"});navigator.clipboard?navigator.clipboard.writeText(n).catch((function(){ws(n)})):ws(n)}}),[e]),r=n.useCallback((function(t){var n,r=t.ctrlKey||t.metaKey||t.altKey;"C"===String.fromCharCode(t.keyCode)&&r&&""===(null==(n=window.getSelection())?void 0:n.toString())&&e.current.unstable_copySelectedRowsToClipboard(t.altKey)}),[e]);!function(e,t,r,a,o){var l=ru(e,"useNativeEventListener"),u=n.useState(!1),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=n.useRef(a),p=n.useCallback((function(e){return d.current&&d.current(e)}),[]);n.useEffect((function(){d.current=a}),[a]),n.useEffect((function(){var n;if((n=Qu(t)?t():t&&t.current?t.current:null)&&p&&r&&!c){l.debug("Binding native ".concat(r," event")),n.addEventListener(r,p,o);var a=n;g(!0),e.current.subscribeEvent(fu.unmount,(function(){l.debug("Clearing native ".concat(r," event")),a.removeEventListener(r,p,o)}))}}),[t,p,r,c,l,o,e])}(e,e.current.rootElementRef,"keydown",r),ls(e,{unstable_copySelectedRowsToClipboard:t})},xs=function(e){return e.columnMenu},Gs=function(e){return(0,l.Z)({},e,{columnMenu:{open:!1}})},Rs=function(e){var t=n.useRef(!0);t.current&&(t.current=!1,e())},Ws=function(e,t,r){var a=n.useRef(),o=n.useRef("mui-".concat(Math.round(1e9*Math.random()))),i=n.useCallback((function(){a.current=e.current.unstable_registerPipeProcessor(t,o.current,r)}),[e,r,t]);Rs((function(){i()}));var l=n.useRef(!0);n.useEffect((function(){return l.current?l.current=!1:i(),function(){a.current&&(a.current(),a.current=null)}}),[i])},Vs=function(e,t,r){var a=n.useRef(),o=n.useRef("mui-".concat(Math.round(1e9*Math.random()))),i=n.useCallback((function(){a.current=e.current.unstable_registerPipeApplier(t,o.current,r)}),[e,r,t]);Rs((function(){i()}));var l=n.useRef(!0);n.useEffect((function(){return l.current?l.current=!1:i(),function(){a.current&&(a.current(),a.current=null)}}),[i])},Fs=__webpack_require__(6189),Ns=__webpack_require__(7563),Es=__webpack_require__(7979),Ds=__webpack_require__(3981),Xs=__webpack_require__(5721),Js=["onChange","maxRows","minRows","style","value"];function Hs(e,t){return parseInt(e[t],10)||0}var Ys={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},Ts=n.forwardRef((function(e,t){var r=e.onChange,o=e.maxRows,u=e.minRows,s=void 0===u?1:u,c=e.style,g=e.value,d=(0,ge.Z)(e,Js),p=n.useRef(null!=g).current,h=n.useRef(null),f=(0,Ns.Z)(t,h),C=n.useRef(null),I=n.useRef(0),m=n.useState({}),v=(0,i.Z)(m,2),b=v[0],A=v[1],y=n.useCallback((function(){var t=h.current,n=(0,Es.Z)(t).getComputedStyle(t);if("0px"!==n.width){var r=C.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],i=Hs(n,"padding-bottom")+Hs(n,"padding-top"),l=Hs(n,"border-bottom-width")+Hs(n,"border-top-width"),u=r.scrollHeight;r.value="x";var c=r.scrollHeight,g=u;s&&(g=Math.max(Number(s)*c,g)),o&&(g=Math.min(Number(o)*c,g));var d=(g=Math.max(g,c))+("border-box"===a?i+l:0),p=Math.abs(g-u)<=1;A((function(e){return I.current<20&&(d>0&&Math.abs((e.outerHeightStyle||0)-d)>1||e.overflow!==p)?(I.current+=1,{overflow:p,outerHeightStyle:d}):e}))}}),[o,s,e.placeholder]);n.useEffect((function(){var e,t=(0,Ds.Z)((function(){I.current=0,y()})),n=(0,Es.Z)(h.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(h.current),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}}),[y]),(0,Xs.Z)((function(){y()})),n.useEffect((function(){I.current=0}),[g]);return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)("textarea",(0,l.Z)({value:g,onChange:function(e){I.current=0,p||y(),r&&r(e)},ref:f,rows:s,style:(0,l.Z)({height:b.outerHeightStyle,overflow:b.overflow?"hidden":null},c)},d)),(0,a.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:C,tabIndex:-1,style:(0,l.Z)({},Ys,c,{padding:0})})]})})),Ms=Ts;var Ks=function(e){return"string"===typeof e};function Ps(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var zs=n.createContext();function Ls(){return n.useContext(zs)}function _s(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,o="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,a.jsx)(Fe.Global,{styles:o})}var Os=__webpack_require__(6482);var Us=function(e){return(0,a.jsx)(_s,(0,l.Z)({},e,{defaultTheme:Os.Z}))};function js(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Qs(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(js(e.value)&&""!==e.value||t&&js(e.defaultValue)&&""!==e.defaultValue)}function qs(e){return(0,$e.Z)("MuiInputBase",e)}var $s=(0,Ee.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),ec=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],tc=function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,lt.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},nc=function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},rc=(0,Ce.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:tc})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({},t.typography.body1,(0,le.Z)({color:t.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat($s.disabled),{color:t.palette.text.disabled,cursor:"default"}),n.multiline&&(0,l.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),ac=(0,Ce.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:nc})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode,o={color:"currentColor",opacity:a?.42:.5,transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},i={opacity:"0 !important"},u={opacity:a?.42:.5};return(0,l.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,le.Z)(t,"label[data-shrink=false] + .".concat($s.formControl," &"),{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus:-ms-input-placeholder":u,"&:focus::-ms-input-placeholder":u}),(0,le.Z)(t,"&.".concat($s.disabled),{opacity:1,WebkitTextFillColor:n.palette.text.disabled}),(0,le.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),oc=(0,a.jsx)(Us,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),ic=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiInputBase"}),o=r["aria-describedby"],u=r.autoComplete,s=r.autoFocus,c=r.className,g=r.components,d=void 0===g?{}:g,p=r.componentsProps,h=void 0===p?{}:p,f=r.defaultValue,C=r.disabled,I=r.disableInjectingGlobalStyles,m=r.endAdornment,v=r.fullWidth,b=void 0!==v&&v,A=r.id,y=r.inputComponent,k=void 0===y?"input":y,Z=r.inputProps,S=void 0===Z?{}:Z,w=r.inputRef,B=r.maxRows,x=r.minRows,G=r.multiline,R=void 0!==G&&G,W=r.name,V=r.onBlur,F=r.onChange,N=r.onClick,E=r.onFocus,D=r.onKeyDown,X=r.onKeyUp,J=r.placeholder,H=r.readOnly,Y=r.renderSuffix,T=r.rows,M=r.startAdornment,K=r.type,P=void 0===K?"text":K,z=r.value,L=(0,ge.Z)(r,ec),_=null!=S.value?S.value:z,O=n.useRef(null!=_).current,U=n.useRef(),j=n.useCallback((function(e){0}),[]),Q=(0,me.Z)(S.ref,j),q=(0,me.Z)(w,Q),$=(0,me.Z)(U,q),ee=n.useState(!1),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],ae=Ls();var oe=Ps({props:r,muiFormControl:ae,states:["color","disabled","error","hiddenLabel","size","required","filled"]});oe.focused=ae?ae.focused:ne,n.useEffect((function(){!ae&&C&&ne&&(re(!1),V&&V())}),[ae,C,ne,V]);var ie=ae&&ae.onFilled,le=ae&&ae.onEmpty,ue=n.useCallback((function(e){Qs(e)?ie&&ie():le&&le()}),[ie,le]);(0,Cl.Z)((function(){O&&ue({value:_})}),[_,ue,O]);n.useEffect((function(){ue(U.current)}),[]);var se=k,ce=S;R&&"input"===se&&(ce=T?(0,l.Z)({type:void 0,minRows:T,maxRows:T},ce):(0,l.Z)({type:void 0,maxRows:B,minRows:x},ce),se=Ms);n.useEffect((function(){ae&&ae.setAdornedStart(Boolean(M))}),[ae,M]);var pe=(0,l.Z)({},r,{color:oe.color||"primary",disabled:oe.disabled,endAdornment:m,error:oe.error,focused:oe.focused,formControl:ae,fullWidth:b,hiddenLabel:oe.hiddenLabel,multiline:R,size:oe.size,startAdornment:M,type:P}),fe=function(e){var t=e.classes,n=e.color,r=e.disabled,a=e.error,o=e.endAdornment,i=e.focused,l=e.formControl,u=e.fullWidth,s=e.hiddenLabel,c=e.multiline,g=e.size,d=e.startAdornment,p=e.type,h={root:["root","color".concat((0,lt.Z)(n)),r&&"disabled",a&&"error",u&&"fullWidth",i&&"focused",l&&"formControl","small"===g&&"sizeSmall",c&&"multiline",d&&"adornedStart",o&&"adornedEnd",s&&"hiddenLabel"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",c&&"inputMultiline","small"===g&&"inputSizeSmall",s&&"inputHiddenLabel",d&&"inputAdornedStart",o&&"inputAdornedEnd"]};return(0,he.Z)(h,qs,t)}(pe),Ce=d.Root||rc,ve=h.root||{},be=d.Input||ac;return ce=(0,l.Z)({},ce,h.input),(0,a.jsxs)(n.Fragment,{children:[!I&&oc,(0,a.jsxs)(Ce,(0,l.Z)({},ve,!Ks(Ce)&&{ownerState:(0,l.Z)({},pe,ve.ownerState)},{ref:t,onClick:function(e){U.current&&e.currentTarget===e.target&&U.current.focus(),N&&N(e)}},L,{className:(0,de.Z)(fe.root,ve.className,c),children:[M,(0,a.jsx)(zs.Provider,{value:null,children:(0,a.jsx)(be,(0,l.Z)({ownerState:pe,"aria-invalid":oe.error,"aria-describedby":o,autoComplete:u,autoFocus:s,defaultValue:f,disabled:oe.disabled,id:A,onAnimationStart:function(e){ue("mui-auto-fill-cancel"===e.animationName?U.current:{value:"x"})},name:W,placeholder:J,readOnly:H,required:oe.required,rows:T,value:_,onKeyDown:D,onKeyUp:X,type:P},ce,!Ks(be)&&{as:se,ownerState:(0,l.Z)({},pe,ce.ownerState)},{ref:$,className:(0,de.Z)(fe.input,ce.className),onBlur:function(e){V&&V(e),S.onBlur&&S.onBlur(e),ae&&ae.onBlur?ae.onBlur(e):re(!1)},onChange:function(e){if(!O){var t=e.target||U.current;if(null==t)throw new Error((0,Fs.Z)(1));ue({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];S.onChange&&S.onChange.apply(S,[e].concat(r)),F&&F.apply(void 0,[e].concat(r))},onFocus:function(e){oe.disabled?e.stopPropagation():(E&&E(e),S.onFocus&&S.onFocus(e),ae&&ae.onFocus?ae.onFocus(e):re(!0))}}))}),m,Y?Y((0,l.Z)({},oe,{startAdornment:M})):null]}))]})})),lc=ic,uc=__webpack_require__(9201),sc=(0,uc.Z)((0,a.jsx)("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),cc=(0,uc.Z)((0,a.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),gc=(0,uc.Z)((0,a.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),dc=(0,uc.Z)((0,a.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),pc=(0,uc.Z)((0,a.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),hc=(0,uc.Z)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),fc=((0,uc.Z)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),(0,uc.Z)((0,a.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),(0,uc.Z)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),(0,uc.Z)((0,a.jsx)("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon")),Cc=(0,uc.Z)((0,a.jsx)("path",{d:"M11 19V5h2v14z"}),"Separator"),Ic=(0,uc.Z)((0,a.jsx)("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),mc=(0,uc.Z)((0,a.jsx)("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),vc=(0,uc.Z)((0,a.jsx)("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),bc=(0,uc.Z)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),Ac=(0,uc.Z)((0,a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),yc=(0,uc.Z)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),kc=(0,uc.Z)((0,a.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),Zc=(0,uc.Z)((0,a.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),Sc=(0,uc.Z)((0,a.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),wc=(0,uc.Z)((0,a.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),Bc=(0,uc.Z)((0,a.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),xc=(0,uc.Z)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),Gc=__webpack_require__(7384);var Rc=n.createContext({});function Wc(e){return(0,$e.Z)("MuiDivider",e)}var Vc=(0,Ee.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function Fc(e){return(0,$e.Z)("MuiListItemIcon",e)}var Nc=(0,Ee.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);var Ec=(0,Ee.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Dc(e){return(0,$e.Z)("MuiMenuItem",e)}var Xc=(0,Ee.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Jc=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],Hc=(0,Ce.ZP)(it,{shouldForwardProp:function(e){return(0,Ce.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.divider&&{borderBottom:"1px solid ".concat(n.palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:n.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,le.Z)(t,"&.".concat(Xc.selected),(0,le.Z)({backgroundColor:(0,fe.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(Xc.focusVisible),{backgroundColor:(0,fe.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,le.Z)(t,"&.".concat(Xc.selected,":hover"),{backgroundColor:(0,fe.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,fe.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,le.Z)(t,"&.".concat(Xc.focusVisible),{backgroundColor:n.palette.action.focus}),(0,le.Z)(t,"&.".concat(Xc.disabled),{opacity:n.palette.action.disabledOpacity}),(0,le.Z)(t,"& + .".concat(Vc.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,le.Z)(t,"& + .".concat(Vc.inset),{marginLeft:52}),(0,le.Z)(t,"& .".concat(Ec.root),{marginTop:0,marginBottom:0}),(0,le.Z)(t,"& .".concat(Ec.inset),{paddingLeft:36}),(0,le.Z)(t,"& .".concat(Nc.root),{minWidth:36}),t),!r.dense&&(0,le.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),r.dense&&(0,l.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,le.Z)({},"& .".concat(Nc.root," svg"),{fontSize:"1.25rem"})))})),Yc=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiMenuItem"}),o=r.autoFocus,i=void 0!==o&&o,u=r.component,s=void 0===u?"li":u,c=r.dense,g=void 0!==c&&c,d=r.divider,p=void 0!==d&&d,h=r.disableGutters,f=void 0!==h&&h,C=r.focusVisibleClassName,I=r.role,m=void 0===I?"menuitem":I,v=r.tabIndex,b=(0,ge.Z)(r,Jc),A=n.useContext(Rc),y={dense:g||A.dense||!1,disableGutters:f},k=n.useRef(null);(0,Cl.Z)((function(){i&&k.current&&k.current.focus()}),[i]);var Z,S=(0,l.Z)({},r,{dense:y.dense,divider:p,disableGutters:f}),w=function(e){var t=e.disabled,n=e.dense,r=e.divider,a=e.disableGutters,o=e.selected,i=e.classes,u={root:["root",n&&"dense",t&&"disabled",!a&&"gutters",r&&"divider",o&&"selected"]},s=(0,he.Z)(u,Dc,i);return(0,l.Z)({},i,s)}(r),B=(0,me.Z)(k,t);return r.disabled||(Z=void 0!==v?v:-1),(0,a.jsx)(Rc.Provider,{value:y,children:(0,a.jsx)(Hc,(0,l.Z)({ref:B,role:m,tabIndex:Z,component:s,focusVisibleClassName:(0,de.Z)(w.focusVisible,C)},b,{ownerState:S,classes:w}))})})),Tc=Yc;function Mc(e){return"object"===typeof e&&null!==e?e.value:e}function Kc(e,t){if(void 0!==t){var n=t.find((function(t){var n=Mc(t);return String(n)===String(e)}));return Mc(n)}}var Pc=["item","applyValue","type","apiRef","focusElementRef"];var zc=function(e,t,n){var r=e.valueOptions,o=e.valueFormatter,i=e.field;return[""].concat("function"===typeof r?(0,Ae.Z)(r({field:i})):(0,Ae.Z)(r||[])).map((function(e){var r="object"===typeof e,l=r?e.value:e,u=r?e.value:e,s=o&&""!==e?o({value:e,field:i,api:t}):e,c=r?e.label:s;return(0,a.jsx)(n,{value:u,children:c},l)}))};function Lc(e){var t,r,o,u,s,c=e.item,g=e.applyValue,d=e.type,p=e.apiRef,h=e.focusElementRef,f=(0,ge.Z)(e,Pc);var C=n.useRef(),I=n.useState(null!=(t=c.value)?t:""),m=(0,i.Z)(I,2),v=m[0],b=m[1],A=n.useState(!1),y=(0,i.Z)(A,2),k=y[0],Z=y[1],S=(0,Gc.Z)(),w=zl(),B=null==(o=((null==(r=w.componentsProps)?void 0:r.baseSelect)||{}).native)||o,x="singleSelect"===d?{select:!0,SelectProps:(0,l.Z)({native:B},null==(u=w.componentsProps)?void 0:u.baseSelect),children:zc(p.current.getColumn(c.columnField),p.current,B?"option":Tc)}:{},G=n.useCallback((function(e){var t=e.target.value;if("singleSelect"===d){var n=p.current.getColumn(c.columnField),r="function"===typeof n.valueOptions?n.valueOptions({field:n.field}):n.valueOptions;t=Kc(t,r)}clearTimeout(C.current),b(String(t)),Z(!0),C.current=setTimeout((function(){g((0,l.Z)({},c,{value:t})),Z(!1)}),500)}),[p,g,c,d]);n.useEffect((function(){return function(){clearTimeout(C.current)}}),[]),n.useEffect((function(){var e,t=null!=(e=c.value)?e:"";b(String(t))}),[c.value]);var R=k?{endAdornment:(0,a.jsx)(Zc,{})}:f.InputProps;return(0,a.jsx)(w.components.BaseTextField,(0,l.Z)({id:S,label:p.current.getLocaleText("filterPanelInputLabel"),placeholder:p.current.getLocaleText("filterPanelInputPlaceholder"),value:v,onChange:G,type:d||"text",variant:"standard",InputProps:R,InputLabelProps:{shrink:!0},inputRef:h},x,f,null==(s=w.componentsProps)?void 0:s.baseTextField))}var _c=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","isValidating","debounceMs","isProcessingProps"],Oc=(0,Ce.ZP)(lc,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:function(e,t){return t.editInputCell}})((function(e){var t=e.theme;return(0,l.Z)({},t.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})}));function Uc(e){var t,r=zl(),o=e.id,u=e.value,s=e.api,c=e.field,g=e.colDef,d=e.hasFocus,p=e.debounceMs,h=void 0===p?null!=(t=r.experimentalFeatures)&&t.newEditingApi?200:500:p,f=e.isProcessingProps,C=(0,ge.Z)(e,_c),I=n.useRef(),m=n.useState(u),v=(0,i.Z)(m,2),b=v[0],A=v[1],y=function(e){var t=e.classes;return(0,he.Z)({root:["editInputCell"]},Il,t)}({classes:r.classes}),k=n.useCallback((function(e){var t=e.target.value;A(t),s.setEditCellValue({id:o,field:c,value:t,debounceMs:h},e)}),[s,h,c,o]);return n.useEffect((function(){A(u)}),[u]),(0,Cl.Z)((function(){d&&I.current.focus()}),[d]),(0,a.jsx)(Oc,(0,l.Z)({inputRef:I,className:y.root,fullWidth:!0,type:"number"===g.type?g.type:"text",value:null!=b?b:"",onChange:k,endAdornment:f?(0,a.jsx)(Zc,{}):void 0},C))}var jc=wl(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Qc=function(e,t){return t&&e.length>1?(jc(),[e[0]]):e},qc=function(e,t){return function(n){return(0,l.Z)({},n,{sorting:(0,l.Z)({},n.sorting,{sortModel:Qc(e,t)})})}},$c=function(e,t){var n=e.indexOf(t);return t&&-1!==n&&n+1!==e.length?e[n+1]:e[0]},eg=function(e,t){return null==e&&null!=t?-1:null==t&&null!=e?1:null==e&&null==t?0:null},tg=new Intl.Collator,ng=function(e,t){var n=eg(e,t);return null!==n?n:Number(e)-Number(t)},rg=function(e,t){var n=eg(e,t);return null!==n?n:e>t?1:e<t?-1:0},ag=__webpack_require__(6248),og=__webpack_require__(8959),ig=__webpack_require__(8956),lg=__webpack_require__(2971);function ug(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function sg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreAccents,n=void 0===t||t,r=e.ignoreCase,a=void 0===r||r,o=e.limit,i=e.matchFrom,l=void 0===i?"any":i,u=e.stringify,s=e.trim,c=void 0!==s&&s;return function(e,t){var r=t.inputValue,i=t.getOptionLabel,s=c?r.trim():r;a&&(s=s.toLowerCase()),n&&(s=ug(s));var g=e.filter((function(e){var t=(u||i)(e);return a&&(t=t.toLowerCase()),n&&(t=ug(t)),"start"===l?0===t.indexOf(s):t.indexOf(s)>-1}));return"number"===typeof o?g.slice(0,o):g}}function cg(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}var gg=sg();function dg(e){var t,r=e.autoComplete,a=void 0!==r&&r,o=e.autoHighlight,u=void 0!==o&&o,s=e.autoSelect,c=void 0!==s&&s,g=e.blurOnSelect,d=void 0!==g&&g,p=e.disabled,h=e.clearOnBlur,f=void 0===h?!e.freeSolo:h,C=e.clearOnEscape,I=void 0!==C&&C,m=e.componentName,v=void 0===m?"useAutocomplete":m,b=e.defaultValue,A=void 0===b?e.multiple?[]:null:b,y=e.disableClearable,k=void 0!==y&&y,Z=e.disableCloseOnSelect,S=void 0!==Z&&Z,w=e.disabledItemsFocusable,B=void 0!==w&&w,x=e.disableListWrap,G=void 0!==x&&x,R=e.filterOptions,W=void 0===R?gg:R,V=e.filterSelectedOptions,F=void 0!==V&&V,N=e.freeSolo,E=void 0!==N&&N,D=e.getOptionDisabled,X=e.getOptionLabel,J=void 0===X?function(e){var t;return null!=(t=e.label)?t:e}:X,H=e.isOptionEqualToValue,Y=void 0===H?function(e,t){return e===t}:H,T=e.groupBy,M=e.handleHomeEndKeys,K=void 0===M?!e.freeSolo:M,P=e.id,z=e.includeInputInList,L=void 0!==z&&z,_=e.inputValue,O=e.multiple,U=void 0!==O&&O,j=e.onChange,Q=e.onClose,q=e.onHighlightChange,$=e.onInputChange,ee=e.onOpen,te=e.open,ne=e.openOnFocus,re=void 0!==ne&&ne,ae=e.options,oe=e.readOnly,ie=void 0!==oe&&oe,le=e.selectOnFocus,ue=void 0===le?!e.freeSolo:le,se=e.value,ce=(0,ag.Z)(P);t=function(e){var t=J(e);return"string"!==typeof t?String(t):t};var ge=n.useRef(!1),de=n.useRef(!0),pe=n.useRef(null),he=n.useRef(null),fe=n.useState(null),Ce=(0,i.Z)(fe,2),Ie=Ce[0],me=Ce[1],ve=n.useState(-1),be=(0,i.Z)(ve,2),Ae=be[0],ye=be[1],ke=u?0:-1,Ze=n.useRef(ke),Se=(0,og.Z)({controlled:se,default:A,name:v}),we=(0,i.Z)(Se,2),Be=we[0],xe=we[1],Ge=(0,og.Z)({controlled:_,default:"",name:v,state:"inputValue"}),Re=(0,i.Z)(Ge,2),We=Re[0],Ve=Re[1],Fe=n.useState(!1),Ne=(0,i.Z)(Fe,2),Ee=Ne[0],De=Ne[1],Xe=n.useCallback((function(e,n){if((U?Be.length<n.length:null!==n)||f){var r;if(U)r="";else if(null==n)r="";else{var a=t(n);r="string"===typeof a?a:""}We!==r&&(Ve(r),$&&$(e,r,"reset"))}}),[t,We,U,$,Ve,f,Be]),Je=n.useRef();n.useEffect((function(){var e=Be!==Je.current;Je.current=Be,Ee&&!e||E&&!e||Xe(null,Be)}),[Be,Xe,Ee,Je,E]);var He=(0,og.Z)({controlled:te,default:!1,name:v,state:"open"}),Ye=(0,i.Z)(He,2),Te=Ye[0],Me=Ye[1],Ke=n.useState(!0),Pe=(0,i.Z)(Ke,2),ze=Pe[0],Le=Pe[1],_e=!U&&null!=Be&&We===t(Be),Oe=Te&&!ie,Ue=Oe?W(ae.filter((function(e){return!F||!(U?Be:[Be]).some((function(t){return null!==t&&Y(e,t)}))})),{inputValue:_e&&ze?"":We,getOptionLabel:t}):[],je=Te&&Ue.length>0&&!ie,Qe=(0,ig.Z)((function(e){-1===e?pe.current.focus():Ie.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));n.useEffect((function(){U&&Ae>Be.length-1&&(ye(-1),Qe(-1))}),[Be,U,Ae,Qe]);var qe=(0,ig.Z)((function(e){var t=e.event,n=e.index,r=e.reason,a=void 0===r?"auto":r;if(Ze.current=n,-1===n?pe.current.removeAttribute("aria-activedescendant"):pe.current.setAttribute("aria-activedescendant","".concat(ce,"-option-").concat(n)),q&&q(t,-1===n?null:Ue[n],a),he.current){var o=he.current.querySelector('[role="option"].Mui-focused');o&&(o.classList.remove("Mui-focused"),o.classList.remove("Mui-focusVisible"));var i=he.current.parentElement.querySelector('[role="listbox"]');if(i)if(-1!==n){var l=he.current.querySelector('[data-option-index="'.concat(n,'"]'));if(l&&(l.classList.add("Mui-focused"),"keyboard"===a&&l.classList.add("Mui-focusVisible"),i.scrollHeight>i.clientHeight&&"mouse"!==a)){var u=l,s=i.clientHeight+i.scrollTop,c=u.offsetTop+u.offsetHeight;c>s?i.scrollTop=c-i.clientHeight:u.offsetTop-u.offsetHeight*(T?1.3:0)<i.scrollTop&&(i.scrollTop=u.offsetTop-u.offsetHeight*(T?1.3:0))}}else i.scrollTop=0}})),$e=(0,ig.Z)((function(e){var n=e.event,r=e.diff,o=e.direction,i=void 0===o?"next":o,l=e.reason,u=void 0===l?"auto":l;if(Oe){var s=function(e,t){if(!he.current||-1===e)return-1;for(var n=e;;){if("next"===t&&n===Ue.length||"previous"===t&&-1===n)return-1;var r=he.current.querySelector('[data-option-index="'.concat(n,'"]')),a=!B&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(!(r&&!r.hasAttribute("tabindex")||a))return n;n+="next"===t?1:-1}}(function(){var e=Ue.length-1;if("reset"===r)return ke;if("start"===r)return 0;if("end"===r)return e;var t=Ze.current+r;return t<0?-1===t&&L?-1:G&&-1!==Ze.current||Math.abs(r)>1?0:e:t>e?t===e+1&&L?-1:G||Math.abs(r)>1?e:0:t}(),i);if(qe({index:s,reason:u,event:n}),a&&"reset"!==r)if(-1===s)pe.current.value=We;else{var c=t(Ue[s]);pe.current.value=c,0===c.toLowerCase().indexOf(We.toLowerCase())&&We.length>0&&pe.current.setSelectionRange(We.length,c.length)}}})),et=n.useCallback((function(){if(Oe){var e=U?Be[0]:Be;if(0!==Ue.length&&null!=e){if(he.current)if(null==e)Ze.current>=Ue.length-1?qe({index:Ue.length-1}):qe({index:Ze.current});else{var t=Ue[Ze.current];if(U&&t&&-1!==cg(Be,(function(e){return Y(t,e)})))return;var n=cg(Ue,(function(t){return Y(t,e)}));-1===n?$e({diff:"reset"}):qe({index:n})}}else $e({diff:"reset"})}}),[Ue.length,!U&&Be,F,$e,qe,Oe,We,U]),tt=(0,ig.Z)((function(e){(0,lg.Z)(he,e),e&&et()}));n.useEffect((function(){et()}),[et]);var nt=function(e){Te||(Me(!0),Le(!0),ee&&ee(e))},rt=function(e,t){Te&&(Me(!1),Q&&Q(e,t))},at=function(e,t,n,r){if(Array.isArray(Be)){if(Be.length===t.length&&Be.every((function(e,n){return e===t[n]})))return}else if(Be===t)return;j&&j(e,t,n,r),xe(t)},ot=n.useRef(!1),it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",a=n,o=t;if(U){var i=cg(o=Array.isArray(Be)?Be.slice():[],(function(e){return Y(t,e)}));-1===i?o.push(t):"freeSolo"!==r&&(o.splice(i,1),a="removeOption")}Xe(e,o),at(e,o,a,{option:t}),S||e.ctrlKey||e.metaKey||rt(e,a),(!0===d||"touch"===d&&ot.current||"mouse"===d&&!ot.current)&&pe.current.blur()};var lt=function(e,t){if(U){rt(e,"toggleInput");var n=Ae;-1===Ae?""===We&&"previous"===t&&(n=Be.length-1):((n+="next"===t?1:-1)<0&&(n=0),n===Be.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;for(var n=e;;){if("next"===t&&n===Be.length||"previous"===t&&-1===n)return-1;var r=Ie.querySelector('[data-tag-index="'.concat(n,'"]'));if(r&&r.hasAttribute("tabindex")&&!r.disabled&&"true"!==r.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),ye(n),Qe(n)}},ut=function(e){ge.current=!0,Ve(""),$&&$(e,"","clear"),at(e,U?[]:null,"clear")},st=function(e){return function(t){if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Ae&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(ye(-1),Qe(-1)),229!==t.which))switch(t.key){case"Home":Oe&&K&&(t.preventDefault(),$e({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":Oe&&K&&(t.preventDefault(),$e({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),$e({diff:-5,direction:"previous",reason:"keyboard",event:t}),nt(t);break;case"PageDown":t.preventDefault(),$e({diff:5,direction:"next",reason:"keyboard",event:t}),nt(t);break;case"ArrowDown":t.preventDefault(),$e({diff:1,direction:"next",reason:"keyboard",event:t}),nt(t);break;case"ArrowUp":t.preventDefault(),$e({diff:-1,direction:"previous",reason:"keyboard",event:t}),nt(t);break;case"ArrowLeft":lt(t,"previous");break;case"ArrowRight":lt(t,"next");break;case"Enter":if(-1!==Ze.current&&Oe){var n=Ue[Ze.current],r=!!D&&D(n);if(t.preventDefault(),r)return;it(t,n,"selectOption"),a&&pe.current.setSelectionRange(pe.current.value.length,pe.current.value.length)}else E&&""!==We&&!1===_e&&(U&&t.preventDefault(),it(t,We,"createOption","freeSolo"));break;case"Escape":Oe?(t.preventDefault(),t.stopPropagation(),rt(t,"escape")):I&&(""!==We||U&&Be.length>0)&&(t.preventDefault(),t.stopPropagation(),ut(t));break;case"Backspace":if(U&&!ie&&""===We&&Be.length>0){var o=-1===Ae?Be.length-1:Ae,i=Be.slice();i.splice(o,1),at(t,i,"removeOption",{option:Be[o]})}}}},ct=function(e){De(!0),re&&!ge.current&&nt(e)},gt=function(e){null!==he.current&&he.current.parentElement.contains(document.activeElement)?pe.current.focus():(De(!1),de.current=!0,ge.current=!1,c&&-1!==Ze.current&&Oe?it(e,Ue[Ze.current],"blur"):c&&E&&""!==We?it(e,We,"blur","freeSolo"):f&&Xe(e,Be),rt(e,"blur"))},dt=function(e){var t=e.target.value;We!==t&&(Ve(t),Le(!1),$&&$(e,t,"input")),""===t?k||U||at(e,null,"clear"):nt(e)},pt=function(e){qe({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},ht=function(){ot.current=!0},ft=function(e){var t=Number(e.currentTarget.getAttribute("data-option-index"));it(e,Ue[t],"selectOption"),ot.current=!1},Ct=function(e){return function(t){var n=Be.slice();n.splice(e,1),at(t,n,"removeOption",{option:Be[e]})}},It=function(e){Te?rt(e,"toggleInput"):nt(e)},mt=function(e){e.target.getAttribute("id")!==ce&&e.preventDefault()},vt=function(){pe.current.focus(),ue&&de.current&&pe.current.selectionEnd-pe.current.selectionStart===0&&pe.current.select(),de.current=!1},bt=function(e){""!==We&&Te||It(e)},At=E&&We.length>0;At=At||(U?Be.length>0:null!==Be);var yt=Ue;if(T){new Map;yt=Ue.reduce((function(e,t,n){var r=T(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return p&&Ee&&gt(),{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.Z)({"aria-owns":je?"".concat(ce,"-listbox"):null},e,{onKeyDown:st(e),onMouseDown:mt,onClick:vt})},getInputLabelProps:function(){return{id:"".concat(ce,"-label"),htmlFor:ce}},getInputProps:function(){return{id:ce,value:We,onBlur:gt,onFocus:ct,onChange:dt,onMouseDown:bt,"aria-activedescendant":Oe?"":null,"aria-autocomplete":a?"both":"list","aria-controls":je?"".concat(ce,"-listbox"):void 0,"aria-expanded":je,autoComplete:"off",ref:pe,autoCapitalize:"none",spellCheck:"false",role:"combobox"}},getClearProps:function(){return{tabIndex:-1,onClick:ut}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:It}},getTagProps:function(e){var t=e.index;return(0,l.Z)({key:t,"data-tag-index":t,tabIndex:-1},!ie&&{onDelete:Ct(t)})},getListboxProps:function(){return{role:"listbox",id:"".concat(ce,"-listbox"),"aria-labelledby":"".concat(ce,"-label"),ref:tt,onMouseDown:function(e){e.preventDefault()}}},getOptionProps:function(e){var n=e.index,r=e.option,a=(U?Be:[Be]).some((function(e){return null!=e&&Y(r,e)})),o=!!D&&D(r);return{key:t(r),tabIndex:-1,role:"option",id:"".concat(ce,"-option-").concat(n),onMouseOver:pt,onClick:ft,onTouchStart:ht,"data-option-index":n,"aria-disabled":o,"aria-selected":a}},id:ce,inputValue:We,value:Be,dirty:At,popupOpen:Oe,focused:Ee||-1!==Ae,anchorEl:Ie,setAnchorEl:me,focusedTag:Ae,groupedOptions:yt}}var pg=__webpack_require__(1907);function hg(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function fg(e){return e instanceof hg(e).Element||e instanceof Element}function Cg(e){return e instanceof hg(e).HTMLElement||e instanceof HTMLElement}function Ig(e){return"undefined"!==typeof ShadowRoot&&(e instanceof hg(e).ShadowRoot||e instanceof ShadowRoot)}var mg=Math.max,vg=Math.min,bg=Math.round;function Ag(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,a=1;if(Cg(e)&&t){var o=e.offsetHeight,i=e.offsetWidth;i>0&&(r=bg(n.width)/i||1),o>0&&(a=bg(n.height)/o||1)}return{width:n.width/r,height:n.height/a,top:n.top/a,right:n.right/r,bottom:n.bottom/a,left:n.left/r,x:n.left/r,y:n.top/a}}function yg(e){var t=hg(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function kg(e){return e?(e.nodeName||"").toLowerCase():null}function Zg(e){return((fg(e)?e.ownerDocument:e.document)||window.document).documentElement}function Sg(e){return Ag(Zg(e)).left+yg(e).scrollLeft}function wg(e){return hg(e).getComputedStyle(e)}function Bg(e){var t=wg(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function xg(e,t,n){void 0===n&&(n=!1);var r=Cg(t),a=Cg(t)&&function(e){var t=e.getBoundingClientRect(),n=bg(t.width)/e.offsetWidth||1,r=bg(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=Zg(t),i=Ag(e,a),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==kg(t)||Bg(o))&&(l=function(e){return e!==hg(e)&&Cg(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:yg(e);var t}(t)),Cg(t)?((u=Ag(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=Sg(o))),{x:i.left+l.scrollLeft-u.x,y:i.top+l.scrollTop-u.y,width:i.width,height:i.height}}function Gg(e){var t=Ag(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Rg(e){return"html"===kg(e)?e:e.assignedSlot||e.parentNode||(Ig(e)?e.host:null)||Zg(e)}function Wg(e){return["html","body","#document"].indexOf(kg(e))>=0?e.ownerDocument.body:Cg(e)&&Bg(e)?e:Wg(Rg(e))}function Vg(e,t){var n;void 0===t&&(t=[]);var r=Wg(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),o=hg(r),i=a?[o].concat(o.visualViewport||[],Bg(r)?r:[]):r,l=t.concat(i);return a?l:l.concat(Vg(Rg(i)))}function Fg(e){return["table","td","th"].indexOf(kg(e))>=0}function Ng(e){return Cg(e)&&"fixed"!==wg(e).position?e.offsetParent:null}function Eg(e){for(var t=hg(e),n=Ng(e);n&&Fg(n)&&"static"===wg(n).position;)n=Ng(n);return n&&("html"===kg(n)||"body"===kg(n)&&"static"===wg(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Cg(e)&&"fixed"===wg(e).position)return null;var n=Rg(e);for(Ig(n)&&(n=n.host);Cg(n)&&["html","body"].indexOf(kg(n))<0;){var r=wg(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var Dg="top",Xg="bottom",Jg="right",Hg="left",Yg="auto",Tg=[Dg,Xg,Jg,Hg],Mg="start",Kg="end",Pg="viewport",zg="popper",Lg=Tg.reduce((function(e,t){return e.concat([t+"-"+Mg,t+"-"+Kg])}),[]),_g=[].concat(Tg,[Yg]).reduce((function(e,t){return e.concat([t,t+"-"+Mg,t+"-"+Kg])}),[]),Og=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ug(e){var t=new Map,n=new Set,r=[];function a(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&a(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||a(e)})),r}function jg(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Qg={placement:"bottom",modifiers:[],strategy:"absolute"};function qg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function $g(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,a=t.defaultOptions,o=void 0===a?Qg:a;return function(e,t,n){void 0===n&&(n=o);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qg,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},i=[],l=!1,u={state:a,setOptions:function(n){var l="function"===typeof n?n(a.options):n;s(),a.options=Object.assign({},o,a.options,l),a.scrollParents={reference:fg(e)?Vg(e):e.contextElement?Vg(e.contextElement):[],popper:Vg(t)};var c=function(e){var t=Ug(e);return Og.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=c.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var l=o({state:a,name:t,instance:u,options:r}),s=function(){};i.push(l||s)}})),u.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,n=e.popper;if(qg(t,n)){a.rects={reference:xg(t,Eg(n),"fixed"===a.options.strategy),popper:Gg(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var o=a.orderedModifiers[r],i=o.fn,s=o.options,c=void 0===s?{}:s,g=o.name;"function"===typeof i&&(a=i({state:a,options:c,name:g,instance:u})||a)}else a.reset=!1,r=-1}}},update:jg((function(){return new Promise((function(e){u.forceUpdate(),e(a)}))})),destroy:function(){s(),l=!0}};if(!qg(e,t))return u;function s(){i.forEach((function(e){return e()})),i=[]}return u.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var ed={passive:!0};var td={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,o=void 0===a||a,i=r.resize,l=void 0===i||i,u=hg(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&s.forEach((function(e){e.addEventListener("scroll",n.update,ed)})),l&&u.addEventListener("resize",n.update,ed),function(){o&&s.forEach((function(e){e.removeEventListener("scroll",n.update,ed)})),l&&u.removeEventListener("resize",n.update,ed)}},data:{}};function nd(e){return e.split("-")[0]}function rd(e){return e.split("-")[1]}function ad(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function od(e){var t,n=e.reference,r=e.element,a=e.placement,o=a?nd(a):null,i=a?rd(a):null,l=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(o){case Dg:t={x:l,y:n.y-r.height};break;case Xg:t={x:l,y:n.y+n.height};break;case Jg:t={x:n.x+n.width,y:u};break;case Hg:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var s=o?ad(o):null;if(null!=s){var c="y"===s?"height":"width";switch(i){case Mg:t[s]=t[s]-(n[c]/2-r[c]/2);break;case Kg:t[s]=t[s]+(n[c]/2-r[c]/2)}}return t}var id={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=od({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},ld={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ud(e){var t,n=e.popper,r=e.popperRect,a=e.placement,o=e.variation,i=e.offsets,l=e.position,u=e.gpuAcceleration,s=e.adaptive,c=e.roundOffsets,g=e.isFixed,d=i.x,p=void 0===d?0:d,h=i.y,f=void 0===h?0:h,C="function"===typeof c?c({x:p,y:f}):{x:p,y:f};p=C.x,f=C.y;var I=i.hasOwnProperty("x"),m=i.hasOwnProperty("y"),v=Hg,b=Dg,A=window;if(s){var y=Eg(n),k="clientHeight",Z="clientWidth";if(y===hg(n)&&"static"!==wg(y=Zg(n)).position&&"absolute"===l&&(k="scrollHeight",Z="scrollWidth"),y=y,a===Dg||(a===Hg||a===Jg)&&o===Kg)b=Xg,f-=(g&&y===A&&A.visualViewport?A.visualViewport.height:y[k])-r.height,f*=u?1:-1;if(a===Hg||(a===Dg||a===Xg)&&o===Kg)v=Jg,p-=(g&&y===A&&A.visualViewport?A.visualViewport.width:y[Z])-r.width,p*=u?1:-1}var S,w=Object.assign({position:l},s&&ld),B=!0===c?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:bg(t*r)/r||0,y:bg(n*r)/r||0}}({x:p,y:f}):{x:p,y:f};return p=B.x,f=B.y,u?Object.assign({},w,((S={})[b]=m?"0":"",S[v]=I?"0":"",S.transform=(A.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",S)):Object.assign({},w,((t={})[b]=m?f+"px":"",t[v]=I?p+"px":"",t.transform="",t))}var sd={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},a=t.elements[e];Cg(a)&&kg(a)&&(Object.assign(a.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],a=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Cg(r)&&kg(r)&&(Object.assign(r.style,o),Object.keys(a).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var cd={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.offset,o=void 0===a?[0,0]:a,i=_g.reduce((function(e,n){return e[n]=function(e,t,n){var r=nd(e),a=[Hg,Dg].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,i=o[0],l=o[1];return i=i||0,l=(l||0)*a,[Hg,Jg].indexOf(r)>=0?{x:l,y:i}:{x:i,y:l}}(n,t.rects,o),e}),{}),l=i[t.placement],u=l.x,s=l.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=s),t.modifiersData[r]=i}},gd={left:"right",right:"left",bottom:"top",top:"bottom"};function dd(e){return e.replace(/left|right|bottom|top/g,(function(e){return gd[e]}))}var pd={start:"end",end:"start"};function hd(e){return e.replace(/start|end/g,(function(e){return pd[e]}))}function fd(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Ig(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Cd(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Id(e,t){return t===Pg?Cd(function(e){var t=hg(e),n=Zg(e),r=t.visualViewport,a=n.clientWidth,o=n.clientHeight,i=0,l=0;return r&&(a=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=r.offsetLeft,l=r.offsetTop)),{width:a,height:o,x:i+Sg(e),y:l}}(e)):fg(t)?function(e){var t=Ag(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Cd(function(e){var t,n=Zg(e),r=yg(e),a=null==(t=e.ownerDocument)?void 0:t.body,o=mg(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),i=mg(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-r.scrollLeft+Sg(e),u=-r.scrollTop;return"rtl"===wg(a||n).direction&&(l+=mg(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:i,x:l,y:u}}(Zg(e)))}function md(e,t,n){var r="clippingParents"===t?function(e){var t=Vg(Rg(e)),n=["absolute","fixed"].indexOf(wg(e).position)>=0&&Cg(e)?Eg(e):e;return fg(n)?t.filter((function(e){return fg(e)&&fd(e,n)&&"body"!==kg(e)})):[]}(e):[].concat(t),a=[].concat(r,[n]),o=a[0],i=a.reduce((function(t,n){var r=Id(e,n);return t.top=mg(r.top,t.top),t.right=vg(r.right,t.right),t.bottom=vg(r.bottom,t.bottom),t.left=mg(r.left,t.left),t}),Id(e,o));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function vd(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function bd(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Ad(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,o=n.boundary,i=void 0===o?"clippingParents":o,l=n.rootBoundary,u=void 0===l?Pg:l,s=n.elementContext,c=void 0===s?zg:s,g=n.altBoundary,d=void 0!==g&&g,p=n.padding,h=void 0===p?0:p,f=vd("number"!==typeof h?h:bd(h,Tg)),C=c===zg?"reference":zg,I=e.rects.popper,m=e.elements[d?C:c],v=md(fg(m)?m:m.contextElement||Zg(e.elements.popper),i,u),b=Ag(e.elements.reference),A=od({reference:b,element:I,strategy:"absolute",placement:a}),y=Cd(Object.assign({},I,A)),k=c===zg?y:b,Z={top:v.top-k.top+f.top,bottom:k.bottom-v.bottom+f.bottom,left:v.left-k.left+f.left,right:k.right-v.right+f.right},S=e.modifiersData.offset;if(c===zg&&S){var w=S[a];Object.keys(Z).forEach((function(e){var t=[Jg,Xg].indexOf(e)>=0?1:-1,n=[Dg,Xg].indexOf(e)>=0?"y":"x";Z[e]+=w[n]*t}))}return Z}var yd={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,o=void 0===a||a,i=n.altAxis,l=void 0===i||i,u=n.fallbackPlacements,s=n.padding,c=n.boundary,g=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,h=void 0===p||p,f=n.allowedAutoPlacements,C=t.options.placement,I=nd(C),m=u||(I===C||!h?[dd(C)]:function(e){if(nd(e)===Yg)return[];var t=dd(e);return[hd(e),t,hd(t)]}(C)),v=[C].concat(m).reduce((function(e,n){return e.concat(nd(n)===Yg?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=n.boundary,o=n.rootBoundary,i=n.padding,l=n.flipVariations,u=n.allowedAutoPlacements,s=void 0===u?_g:u,c=rd(r),g=c?l?Lg:Lg.filter((function(e){return rd(e)===c})):Tg,d=g.filter((function(e){return s.indexOf(e)>=0}));0===d.length&&(d=g);var p=d.reduce((function(t,n){return t[n]=Ad(e,{placement:n,boundary:a,rootBoundary:o,padding:i})[nd(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:c,rootBoundary:g,padding:s,flipVariations:h,allowedAutoPlacements:f}):n)}),[]),b=t.rects.reference,A=t.rects.popper,y=new Map,k=!0,Z=v[0],S=0;S<v.length;S++){var w=v[S],B=nd(w),x=rd(w)===Mg,G=[Dg,Xg].indexOf(B)>=0,R=G?"width":"height",W=Ad(t,{placement:w,boundary:c,rootBoundary:g,altBoundary:d,padding:s}),V=G?x?Jg:Hg:x?Xg:Dg;b[R]>A[R]&&(V=dd(V));var F=dd(V),N=[];if(o&&N.push(W[B]<=0),l&&N.push(W[V]<=0,W[F]<=0),N.every((function(e){return e}))){Z=w,k=!1;break}y.set(w,N)}if(k)for(var E=function(e){var t=v.find((function(t){var n=y.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return Z=t,"break"},D=h?3:1;D>0;D--){if("break"===E(D))break}t.placement!==Z&&(t.modifiersData[r]._skip=!0,t.placement=Z,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function kd(e,t,n){return mg(e,vg(t,n))}var Zd={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,o=void 0===a||a,i=n.altAxis,l=void 0!==i&&i,u=n.boundary,s=n.rootBoundary,c=n.altBoundary,g=n.padding,d=n.tether,p=void 0===d||d,h=n.tetherOffset,f=void 0===h?0:h,C=Ad(t,{boundary:u,rootBoundary:s,padding:g,altBoundary:c}),I=nd(t.placement),m=rd(t.placement),v=!m,b=ad(I),A="x"===b?"y":"x",y=t.modifiersData.popperOffsets,k=t.rects.reference,Z=t.rects.popper,S="function"===typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,w="number"===typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),B=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,x={x:0,y:0};if(y){if(o){var G,R="y"===b?Dg:Hg,W="y"===b?Xg:Jg,V="y"===b?"height":"width",F=y[b],N=F+C[R],E=F-C[W],D=p?-Z[V]/2:0,X=m===Mg?k[V]:Z[V],J=m===Mg?-Z[V]:-k[V],H=t.elements.arrow,Y=p&&H?Gg(H):{width:0,height:0},T=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},M=T[R],K=T[W],P=kd(0,k[V],Y[V]),z=v?k[V]/2-D-P-M-w.mainAxis:X-P-M-w.mainAxis,L=v?-k[V]/2+D+P+K+w.mainAxis:J+P+K+w.mainAxis,_=t.elements.arrow&&Eg(t.elements.arrow),O=_?"y"===b?_.clientTop||0:_.clientLeft||0:0,U=null!=(G=null==B?void 0:B[b])?G:0,j=F+L-U,Q=kd(p?vg(N,F+z-U-O):N,F,p?mg(E,j):E);y[b]=Q,x[b]=Q-F}if(l){var q,$="x"===b?Dg:Hg,ee="x"===b?Xg:Jg,te=y[A],ne="y"===A?"height":"width",re=te+C[$],ae=te-C[ee],oe=-1!==[Dg,Hg].indexOf(I),ie=null!=(q=null==B?void 0:B[A])?q:0,le=oe?re:te-k[ne]-Z[ne]-ie+w.altAxis,ue=oe?te+k[ne]+Z[ne]-ie-w.altAxis:ae,se=p&&oe?function(e,t,n){var r=kd(e,t,n);return r>n?n:r}(le,te,ue):kd(p?le:re,te,p?ue:ae);y[A]=se,x[A]=se-te}t.modifiersData[r]=x}},requiresIfExists:["offset"]};var Sd={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,a=e.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,l=nd(n.placement),u=ad(l),s=[Hg,Jg].indexOf(l)>=0?"height":"width";if(o&&i){var c=function(e,t){return vd("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:bd(e,Tg))}(a.padding,n),g=Gg(o),d="y"===u?Dg:Hg,p="y"===u?Xg:Jg,h=n.rects.reference[s]+n.rects.reference[u]-i[u]-n.rects.popper[s],f=i[u]-n.rects.reference[u],C=Eg(o),I=C?"y"===u?C.clientHeight||0:C.clientWidth||0:0,m=h/2-f/2,v=c[d],b=I-g[s]-c[p],A=I/2-g[s]/2+m,y=kd(v,A,b),k=u;n.modifiersData[r]=((t={})[k]=y,t.centerOffset=y-A,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&fd(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wd(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Bd(e){return[Dg,Jg,Xg,Hg].some((function(t){return e[t]>=0}))}var xd={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,i=Ad(t,{elementContext:"reference"}),l=Ad(t,{altBoundary:!0}),u=wd(i,r),s=wd(l,a,o),c=Bd(u),g=Bd(s);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:s,isReferenceHidden:c,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":g})}},Gd=$g({defaultModifiers:[td,id,{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=void 0===r||r,o=n.adaptive,i=void 0===o||o,l=n.roundOffsets,u=void 0===l||l,s={placement:nd(t.placement),variation:rd(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ud(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ud(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},sd,cd,yd,Zd,Sd,xd]});var Rd=n.forwardRef((function(e,t){var a=e.children,o=e.container,l=e.disablePortal,u=void 0!==l&&l,s=n.useState(null),c=(0,i.Z)(s,2),g=c[0],d=c[1],p=(0,Ns.Z)(n.isValidElement(a)?a.ref:null,t);return(0,Xs.Z)((function(){u||d(function(e){return"function"===typeof e?e():e}(o)||document.body)}),[o,u]),(0,Xs.Z)((function(){if(g&&!u)return(0,lg.Z)(t,g),function(){(0,lg.Z)(t,null)}}),[t,g,u]),u?n.isValidElement(a)?n.cloneElement(a,{ref:p}):a:g?r.createPortal(a,g):g})),Wd=["anchorEl","children","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","TransitionProps"],Vd=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function Fd(e){return"function"===typeof e?e():e}var Nd={},Ed=n.forwardRef((function(e,t){var r=e.anchorEl,o=e.children,u=e.direction,s=e.disablePortal,c=e.modifiers,g=e.open,d=e.placement,p=e.popperOptions,h=e.popperRef,f=e.TransitionProps,C=(0,ge.Z)(e,Wd),I=n.useRef(null),m=(0,Ns.Z)(I,t),v=n.useRef(null),b=(0,Ns.Z)(v,h),A=n.useRef(b);(0,Xs.Z)((function(){A.current=b}),[b]),n.useImperativeHandle(h,(function(){return v.current}),[]);var y=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(d,u),k=n.useState(y),Z=(0,i.Z)(k,2),S=Z[0],w=Z[1];n.useEffect((function(){v.current&&v.current.forceUpdate()})),(0,Xs.Z)((function(){if(r&&g){Fd(r);var e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:function(e){!function(e){w(e.placement)}(e.state)}}];null!=c&&(e=e.concat(c)),p&&null!=p.modifiers&&(e=e.concat(p.modifiers));var t=Gd(Fd(r),I.current,(0,l.Z)({placement:y},p,{modifiers:e}));return A.current(t),function(){t.destroy(),A.current(null)}}}),[r,s,c,g,p,y]);var B={placement:S};return null!==f&&(B.TransitionProps=f),(0,a.jsx)("div",(0,l.Z)({ref:m,role:"tooltip"},C,{children:"function"===typeof o?o(B):o}))})),Dd=n.forwardRef((function(e,t){var r=e.anchorEl,o=e.children,u=e.container,s=e.direction,c=void 0===s?"ltr":s,g=e.disablePortal,d=void 0!==g&&g,p=e.keepMounted,h=void 0!==p&&p,f=e.modifiers,C=e.open,I=e.placement,m=void 0===I?"bottom":I,v=e.popperOptions,b=void 0===v?Nd:v,A=e.popperRef,y=e.style,k=e.transition,Z=void 0!==k&&k,S=(0,ge.Z)(e,Vd),w=n.useState(!0),B=(0,i.Z)(w,2),x=B[0],G=B[1];if(!h&&!C&&(!Z||x))return null;var R=u||(r?(0,pg.Z)(Fd(r)).body:void 0);return(0,a.jsx)(Rd,{disablePortal:d,container:R,children:(0,a.jsx)(Ed,(0,l.Z)({anchorEl:r,direction:c,disablePortal:d,modifiers:f,ref:t,open:Z?!x:C,placement:m,popperOptions:b,popperRef:A},S,{style:(0,l.Z)({position:"fixed",top:0,left:0,display:C||!h||Z&&!x?null:"none"},y),TransitionProps:Z?{in:C,onEnter:function(){G(!1)},onExited:function(){G(!0)}}:null,children:o}))})})),Xd=Dd,Jd=__webpack_require__(7301),Hd=(0,Ce.ZP)(Xd,{name:"MuiPopper",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Yd=n.forwardRef((function(e,t){var n=(0,Jd.Z)(),r=(0,Ie.Z)({props:e,name:"MuiPopper"});return(0,a.jsx)(Hd,(0,l.Z)({direction:null==n?void 0:n.direction},r,{ref:t}))}));function Td(e){return(0,$e.Z)("MuiListSubheader",e)}(0,Ee.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var Md=["className","color","component","disableGutters","disableSticky","inset"],Kd=(0,Ce.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,lt.Z)(n.color))],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:t.palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:t.palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:t.palette.background.paper})})),Pd=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiListSubheader"}),r=n.className,o=n.color,i=void 0===o?"default":o,u=n.component,s=void 0===u?"li":u,c=n.disableGutters,g=void 0!==c&&c,d=n.disableSticky,p=void 0!==d&&d,h=n.inset,f=void 0!==h&&h,C=(0,ge.Z)(n,Md),I=(0,l.Z)({},n,{color:i,component:s,disableGutters:g,disableSticky:p,inset:f}),m=function(e){var t=e.classes,n=e.color,r=e.disableGutters,a=e.inset,o=e.disableSticky,i={root:["root","default"!==n&&"color".concat((0,lt.Z)(n)),!r&&"gutters",a&&"inset",!o&&"sticky"]};return(0,he.Z)(i,Td,t)}(I);return(0,a.jsx)(Kd,(0,l.Z)({as:s,className:(0,de.Z)(m.root,r),ref:t,ownerState:I},C))})),zd=Pd;function Ld(e){return(0,$e.Z)("MuiPaper",e)}(0,Ee.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var _d=["className","component","elevation","square","variant"],Od=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},Ud=(0,Ce.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({backgroundColor:t.palette.background.paper,color:t.palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat(t.palette.divider)},"elevation"===n.variant&&(0,l.Z)({boxShadow:t.shadows[n.elevation]},"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,fe.Fq)("#fff",Od(n.elevation)),", ").concat((0,fe.Fq)("#fff",Od(n.elevation)),")")}))})),jd=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiPaper"}),r=n.className,o=n.component,i=void 0===o?"div":o,u=n.elevation,s=void 0===u?1:u,c=n.square,g=void 0!==c&&c,d=n.variant,p=void 0===d?"elevation":d,h=(0,ge.Z)(n,_d),f=(0,l.Z)({},n,{component:i,elevation:s,square:g,variant:p}),C=function(e){var t=e.square,n=e.elevation,r=e.variant,a=e.classes,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,he.Z)(o,Ld,a)}(f);return(0,a.jsx)(Ud,(0,l.Z)({as:i,ownerState:f,className:(0,de.Z)(C.root,r),ref:t},h))})),Qd=jd;function qd(e){return(0,$e.Z)("MuiIconButton",e)}var $d=(0,Ee.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),ep=["edge","children","className","color","disabled","disableFocusRipple","size"],tp=(0,Ce.ZP)(it,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,lt.Z)(n.color))],n.edge&&t["edge".concat((0,lt.Z)(n.edge))],t["size".concat((0,lt.Z)(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:(0,fe.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,l.Z)({color:t.palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:(0,fe.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},(0,le.Z)({},"&.".concat($d.disabled),{backgroundColor:"transparent",color:t.palette.action.disabled}))})),np=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiIconButton"}),r=n.edge,o=void 0!==r&&r,i=n.children,u=n.className,s=n.color,c=void 0===s?"default":s,g=n.disabled,d=void 0!==g&&g,p=n.disableFocusRipple,h=void 0!==p&&p,f=n.size,C=void 0===f?"medium":f,I=(0,ge.Z)(n,ep),m=(0,l.Z)({},n,{edge:o,color:c,disabled:d,disableFocusRipple:h,size:C}),v=function(e){var t=e.classes,n=e.disabled,r=e.color,a=e.edge,o=e.size,i={root:["root",n&&"disabled","default"!==r&&"color".concat((0,lt.Z)(r)),a&&"edge".concat((0,lt.Z)(a)),"size".concat((0,lt.Z)(o))]};return(0,he.Z)(i,qd,t)}(m);return(0,a.jsx)(tp,(0,l.Z)({className:(0,de.Z)(v.root,u),centerRipple:!0,focusRipple:!h,disabled:d,ref:t,ownerState:m},I,{children:i}))})),rp=np,ap=(0,uc.Z)((0,a.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function op(e){return(0,$e.Z)("MuiChip",e)}var ip=(0,Ee.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","focusVisible"]),lp=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],up=(0,Ce.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.color,a=n.clickable,o=n.onDelete,i=n.size,l=n.variant;return[(0,le.Z)({},"& .".concat(ip.avatar),t.avatar),(0,le.Z)({},"& .".concat(ip.avatar),t["avatar".concat((0,lt.Z)(i))]),(0,le.Z)({},"& .".concat(ip.avatar),t["avatarColor".concat((0,lt.Z)(r))]),(0,le.Z)({},"& .".concat(ip.icon),t.icon),(0,le.Z)({},"& .".concat(ip.icon),t["icon".concat((0,lt.Z)(i))]),(0,le.Z)({},"& .".concat(ip.icon),t["iconColor".concat((0,lt.Z)(r))]),(0,le.Z)({},"& .".concat(ip.deleteIcon),t.deleteIcon),(0,le.Z)({},"& .".concat(ip.deleteIcon),t["deleteIcon".concat((0,lt.Z)(i))]),(0,le.Z)({},"& .".concat(ip.deleteIcon),t["deleteIconColor".concat((0,lt.Z)(r))]),(0,le.Z)({},"& .".concat(ip.deleteIcon),t["deleteIconOutlinedColor".concat((0,lt.Z)(r))]),t.root,t["size".concat((0,lt.Z)(i))],t["color".concat((0,lt.Z)(r))],a&&t.clickable,a&&"default"!==r&&t["clickableColor".concat((0,lt.Z)(r),")")],o&&t.deletable,o&&"default"!==r&&t["deletableColor".concat((0,lt.Z)(r))],t[l],"outlined"===l&&t["outlined".concat((0,lt.Z)(r))]]}})((function(e){var t,n=e.theme,r=e.ownerState,a=(0,fe.Fq)(n.palette.text.primary,.26);return(0,l.Z)((t={maxWidth:"100%",fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:n.palette.text.primary,backgroundColor:n.palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},(0,le.Z)(t,"&.".concat(ip.disabled),{opacity:n.palette.action.disabledOpacity,pointerEvents:"none"}),(0,le.Z)(t,"& .".concat(ip.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300],fontSize:n.typography.pxToRem(12)}),(0,le.Z)(t,"& .".concat(ip.avatarColorPrimary),{color:n.palette.primary.contrastText,backgroundColor:n.palette.primary.dark}),(0,le.Z)(t,"& .".concat(ip.avatarColorSecondary),{color:n.palette.secondary.contrastText,backgroundColor:n.palette.secondary.dark}),(0,le.Z)(t,"& .".concat(ip.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)}),(0,le.Z)(t,"& .".concat(ip.icon),(0,l.Z)({color:"light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300],marginLeft:5,marginRight:-6},"small"===r.size&&{fontSize:18,marginLeft:4,marginRight:-4},"default"!==r.color&&{color:"inherit"})),(0,le.Z)(t,"& .".concat(ip.deleteIcon),(0,l.Z)({WebkitTapHighlightColor:"transparent",color:a,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:(0,fe.Fq)(a,.4)}},"small"===r.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==r.color&&{color:(0,fe.Fq)(n.palette[r.color].contrastText,.7),"&:hover, &:active":{color:n.palette[r.color].contrastText}})),t),"small"===r.size&&{height:24},"default"!==r.color&&{backgroundColor:n.palette[r.color].main,color:n.palette[r.color].contrastText},r.onDelete&&(0,le.Z)({},"&.".concat(ip.focusVisible),{backgroundColor:(0,fe.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),r.onDelete&&"default"!==r.color&&(0,le.Z)({},"&.".concat(ip.focusVisible),{backgroundColor:n.palette[r.color].dark}))}),(function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({},r.clickable&&(t={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:(0,fe.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)}},(0,le.Z)(t,"&.".concat(ip.focusVisible),{backgroundColor:(0,fe.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),(0,le.Z)(t,"&:active",{boxShadow:n.shadows[1]}),t),r.clickable&&"default"!==r.color&&(0,le.Z)({},"&:hover, &.".concat(ip.focusVisible),{backgroundColor:n.palette[r.color].dark}))}),(function(e){var t,n,r=e.theme,a=e.ownerState;return(0,l.Z)({},"outlined"===a.variant&&(t={backgroundColor:"transparent",border:"1px solid ".concat("light"===r.palette.mode?r.palette.grey[400]:r.palette.grey[700])},(0,le.Z)(t,"&.".concat(ip.clickable,":hover"),{backgroundColor:r.palette.action.hover}),(0,le.Z)(t,"&.".concat(ip.focusVisible),{backgroundColor:r.palette.action.focus}),(0,le.Z)(t,"& .".concat(ip.avatar),{marginLeft:4}),(0,le.Z)(t,"& .".concat(ip.avatarSmall),{marginLeft:2}),(0,le.Z)(t,"& .".concat(ip.icon),{marginLeft:4}),(0,le.Z)(t,"& .".concat(ip.iconSmall),{marginLeft:2}),(0,le.Z)(t,"& .".concat(ip.deleteIcon),{marginRight:5}),(0,le.Z)(t,"& .".concat(ip.deleteIconSmall),{marginRight:3}),t),"outlined"===a.variant&&"default"!==a.color&&(n={color:r.palette[a.color].main,border:"1px solid ".concat((0,fe.Fq)(r.palette[a.color].main,.7))},(0,le.Z)(n,"&.".concat(ip.clickable,":hover"),{backgroundColor:(0,fe.Fq)(r.palette[a.color].main,r.palette.action.hoverOpacity)}),(0,le.Z)(n,"&.".concat(ip.focusVisible),{backgroundColor:(0,fe.Fq)(r.palette[a.color].main,r.palette.action.focusOpacity)}),(0,le.Z)(n,"& .".concat(ip.deleteIcon),{color:(0,fe.Fq)(r.palette[a.color].main,.7),"&:hover, &:active":{color:r.palette[a.color].main}}),n))})),sp=(0,Ce.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:function(e,t){var n=e.ownerState.size;return[t.label,t["label".concat((0,lt.Z)(n))]]}})((function(e){var t=e.ownerState;return(0,l.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===t.size&&{paddingLeft:8,paddingRight:8})}));function cp(e){return"Backspace"===e.key||"Delete"===e.key}var gp=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiChip"}),o=r.avatar,i=r.className,u=r.clickable,s=r.color,c=void 0===s?"default":s,g=r.component,d=r.deleteIcon,p=r.disabled,h=void 0!==p&&p,f=r.icon,C=r.label,I=r.onClick,m=r.onDelete,v=r.onKeyDown,b=r.onKeyUp,A=r.size,y=void 0===A?"medium":A,k=r.variant,Z=void 0===k?"filled":k,S=(0,ge.Z)(r,lp),w=n.useRef(null),B=(0,me.Z)(w,t),x=function(e){e.stopPropagation(),m&&m(e)},G=!(!1===u||!I)||u,R="small"===y,W=G||m?it:g||"div",V=(0,l.Z)({},r,{component:W,disabled:h,size:y,color:c,onDelete:!!m,clickable:G,variant:Z}),F=function(e){var t=e.classes,n=e.disabled,r=e.size,a=e.color,o=e.onDelete,i=e.clickable,l=e.variant,u={root:["root",l,n&&"disabled","size".concat((0,lt.Z)(r)),"color".concat((0,lt.Z)(a)),i&&"clickable",i&&"clickableColor".concat((0,lt.Z)(a)),o&&"deletable",o&&"deletableColor".concat((0,lt.Z)(a)),"".concat(l).concat((0,lt.Z)(a))],label:["label","label".concat((0,lt.Z)(r))],avatar:["avatar","avatar".concat((0,lt.Z)(r)),"avatarColor".concat((0,lt.Z)(a))],icon:["icon","icon".concat((0,lt.Z)(r)),"iconColor".concat((0,lt.Z)(a))],deleteIcon:["deleteIcon","deleteIcon".concat((0,lt.Z)(r)),"deleteIconColor".concat((0,lt.Z)(a)),"deleteIconOutlinedColor".concat((0,lt.Z)(a))]};return(0,he.Z)(u,op,t)}(V),N=W===it?(0,l.Z)({component:g||"div",focusVisibleClassName:F.focusVisible},m&&{disableRipple:!0}):{},E=null;if(m){var D=(0,de.Z)("default"!==c&&("outlined"===Z?F["deleteIconOutlinedColor".concat((0,lt.Z)(c))]:F["deleteIconColor".concat((0,lt.Z)(c))]),R&&F.deleteIconSmall);E=d&&n.isValidElement(d)?n.cloneElement(d,{className:(0,de.Z)(d.props.className,F.deleteIcon,D),onClick:x}):(0,a.jsx)(ap,{className:(0,de.Z)(F.deleteIcon,D),onClick:x})}var X=null;o&&n.isValidElement(o)&&(X=n.cloneElement(o,{className:(0,de.Z)(F.avatar,o.props.className)}));var J=null;return f&&n.isValidElement(f)&&(J=n.cloneElement(f,{className:(0,de.Z)(F.icon,f.props.className)})),(0,a.jsxs)(up,(0,l.Z)({as:W,className:(0,de.Z)(F.root,i),disabled:!(!G||!h)||void 0,onClick:I,onKeyDown:function(e){e.currentTarget===e.target&&cp(e)&&e.preventDefault(),v&&v(e)},onKeyUp:function(e){e.currentTarget===e.target&&(m&&cp(e)?m(e):"Escape"===e.key&&w.current&&w.current.blur()),b&&b(e)},ref:B,ownerState:V},N,S,{children:[X||J,(0,a.jsx)(sp,{className:(0,de.Z)(F.label),ownerState:V,children:C}),E]}))})),dp=gp;function pp(e){return(0,$e.Z)("MuiInput",e)}var hp=(0,l.Z)({},$s,(0,Ee.Z)("MuiInput",["root","underline","input"]));function fp(e){return(0,$e.Z)("MuiOutlinedInput",e)}var Cp=(0,l.Z)({},$s,(0,Ee.Z)("MuiOutlinedInput",["root","notchedOutline","input"]));function Ip(e){return(0,$e.Z)("MuiFilledInput",e)}var mp=(0,l.Z)({},$s,(0,Ee.Z)("MuiFilledInput",["root","underline","input"])),vp=(0,uc.Z)((0,a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),bp=(0,uc.Z)((0,a.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function Ap(e){return(0,$e.Z)("MuiAutocomplete",e)}var yp,kp,Zp=(0,Ee.Z)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),Sp=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"],wp=(0,Ce.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.fullWidth,a=n.hasClearIcon,o=n.hasPopupIcon,i=n.inputFocused,l=n.size;return[(0,le.Z)({},"& .".concat(Zp.tag),t.tag),(0,le.Z)({},"& .".concat(Zp.tag),t["tagSize".concat((0,lt.Z)(l))]),(0,le.Z)({},"& .".concat(Zp.inputRoot),t.inputRoot),(0,le.Z)({},"& .".concat(Zp.input),t.input),(0,le.Z)({},"& .".concat(Zp.input),i&&t.inputFocused),t.root,r&&t.fullWidth,o&&t.hasPopupIcon,a&&t.hasClearIcon]}})((function(e){var t,n,r,a,o,i=e.ownerState;return(0,l.Z)((t={},(0,le.Z)(t,"&.".concat(Zp.focused," .").concat(Zp.clearIndicator),{visibility:"visible"}),(0,le.Z)(t,"@media (pointer: fine)",(0,le.Z)({},"&:hover .".concat(Zp.clearIndicator),{visibility:"visible"})),t),i.fullWidth&&{width:"100%"},(o={},(0,le.Z)(o,"& .".concat(Zp.tag),(0,l.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===i.size&&{margin:2,maxWidth:"calc(100% - 4px)"})),(0,le.Z)(o,"& .".concat(Zp.inputRoot),(n={flexWrap:"wrap"},(0,le.Z)(n,".".concat(Zp.hasPopupIcon,"&, .").concat(Zp.hasClearIcon,"&"),{paddingRight:30}),(0,le.Z)(n,".".concat(Zp.hasPopupIcon,".").concat(Zp.hasClearIcon,"&"),{paddingRight:56}),(0,le.Z)(n,"& .".concat(Zp.input),{width:0,minWidth:30}),n)),(0,le.Z)(o,"& .".concat(hp.root),{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}}),(0,le.Z)(o,"& .".concat(hp.root,".").concat($s.sizeSmall),(0,le.Z)({},"& .".concat(hp.input),{padding:"2px 4px 3px 0"})),(0,le.Z)(o,"& .".concat(Cp.root),(r={padding:9},(0,le.Z)(r,".".concat(Zp.hasPopupIcon,"&, .").concat(Zp.hasClearIcon,"&"),{paddingRight:39}),(0,le.Z)(r,".".concat(Zp.hasPopupIcon,".").concat(Zp.hasClearIcon,"&"),{paddingRight:65}),(0,le.Z)(r,"& .".concat(Zp.input),{padding:"7.5px 4px 7.5px 6px"}),(0,le.Z)(r,"& .".concat(Zp.endAdornment),{right:9}),r)),(0,le.Z)(o,"& .".concat(Cp.root,".").concat($s.sizeSmall),(0,le.Z)({padding:6},"& .".concat(Zp.input),{padding:"2.5px 4px 2.5px 6px"})),(0,le.Z)(o,"& .".concat(mp.root),(a={paddingTop:19,paddingLeft:8},(0,le.Z)(a,".".concat(Zp.hasPopupIcon,"&, .").concat(Zp.hasClearIcon,"&"),{paddingRight:39}),(0,le.Z)(a,".".concat(Zp.hasPopupIcon,".").concat(Zp.hasClearIcon,"&"),{paddingRight:65}),(0,le.Z)(a,"& .".concat(mp.input),{padding:"7px 4px"}),(0,le.Z)(a,"& .".concat(Zp.endAdornment),{right:9}),a)),(0,le.Z)(o,"& .".concat(mp.root,".").concat($s.sizeSmall),(0,le.Z)({paddingBottom:1},"& .".concat(mp.input),{padding:"2.5px 4px"})),(0,le.Z)(o,"& .".concat($s.hiddenLabel),{paddingTop:8}),(0,le.Z)(o,"& .".concat(Zp.input),(0,l.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},i.inputFocused&&{opacity:1})),o))})),Bp=(0,Ce.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:function(e,t){return t.endAdornment}})({position:"absolute",right:0,top:"calc(50% - 14px)"}),xp=(0,Ce.ZP)(rp,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:function(e,t){return t.clearIndicator}})({marginRight:-2,padding:4,visibility:"hidden"}),Gp=(0,Ce.ZP)(rp,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:function(e,t){var n=e.ownerState;return(0,l.Z)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})((function(e){var t=e.ownerState;return(0,l.Z)({padding:2,marginRight:-2},t.popupOpen&&{transform:"rotate(180deg)"})})),Rp=(0,Ce.ZP)(Yd,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[(0,le.Z)({},"& .".concat(Zp.option),t.option),t.popper,n.disablePortal&&t.popperDisablePortal]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({zIndex:t.zIndex.modal},n.disablePortal&&{position:"absolute"})})),Wp=(0,Ce.ZP)(Qd,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){var t=e.theme;return(0,l.Z)({},t.typography.body1,{overflow:"auto"})})),Vp=(0,Ce.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:function(e,t){return t.loading}})((function(e){return{color:e.theme.palette.text.secondary,padding:"14px 16px"}})),Fp=(0,Ce.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:function(e,t){return t.noOptions}})((function(e){return{color:e.theme.palette.text.secondary,padding:"14px 16px"}})),Np=(0,Ce.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:function(e,t){return t.listbox}})((function(e){var t,n,r=e.theme;return(0,le.Z)({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},"& .".concat(Zp.option),(n={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},(0,le.Z)(n,r.breakpoints.up("sm"),{minHeight:"auto"}),(0,le.Z)(n,"&.".concat(Zp.focused),{backgroundColor:r.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}),(0,le.Z)(n,'&[aria-disabled="true"]',{opacity:r.palette.action.disabledOpacity,pointerEvents:"none"}),(0,le.Z)(n,"&.".concat(Zp.focusVisible),{backgroundColor:r.palette.action.focus}),(0,le.Z)(n,'&[aria-selected="true"]',(t={backgroundColor:(0,fe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},(0,le.Z)(t,"&.".concat(Zp.focused),{backgroundColor:(0,fe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.palette.action.selected}}),(0,le.Z)(t,"&.".concat(Zp.focusVisible),{backgroundColor:(0,fe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}),t)),n))})),Ep=(0,Ce.ZP)(zd,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:function(e,t){return t.groupLabel}})((function(e){return{backgroundColor:e.theme.palette.background.paper,top:-8}})),Dp=(0,Ce.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:function(e,t){return t.groupUl}})((0,le.Z)({padding:0},"& .".concat(Zp.option),{paddingLeft:24})),Xp=n.forwardRef((function(e,t){var r,o,i,u=(0,Ie.Z)({props:e,name:"MuiAutocomplete"}),s=(u.autoComplete,u.autoHighlight,u.autoSelect,u.blurOnSelect,u.ChipProps),c=u.className,g=u.clearIcon,d=void 0===g?yp||(yp=(0,a.jsx)(vp,{fontSize:"small"})):g,p=u.clearOnBlur,h=(void 0===p&&u.freeSolo,u.clearOnEscape,u.clearText),f=void 0===h?"Clear":h,C=u.closeText,I=void 0===C?"Close":C,m=u.componentsProps,v=void 0===m?{}:m,b=u.defaultValue,A=(void 0===b&&u.multiple,u.disableClearable),y=void 0!==A&&A,k=(u.disableCloseOnSelect,u.disabled),Z=void 0!==k&&k,S=(u.disabledItemsFocusable,u.disableListWrap,u.disablePortal),w=void 0!==S&&S,B=(u.filterSelectedOptions,u.forcePopupIcon),x=void 0===B?"auto":B,G=u.freeSolo,R=void 0!==G&&G,W=u.fullWidth,V=void 0!==W&&W,F=u.getLimitTagsText,N=void 0===F?function(e){return"+".concat(e)}:F,E=u.getOptionLabel,D=void 0===E?function(e){var t;return null!=(t=e.label)?t:e}:E,X=u.groupBy,J=u.handleHomeEndKeys,H=(void 0===J&&u.freeSolo,u.includeInputInList,u.limitTags),Y=void 0===H?-1:H,T=u.ListboxComponent,M=void 0===T?"ul":T,K=u.ListboxProps,P=u.loading,z=void 0!==P&&P,L=u.loadingText,_=void 0===L?"Loading\u2026":L,O=u.multiple,U=void 0!==O&&O,j=u.noOptionsText,Q=void 0===j?"No options":j,q=(u.openOnFocus,u.openText),$=void 0===q?"Open":q,ee=u.PaperComponent,te=void 0===ee?Qd:ee,ne=u.PopperComponent,re=void 0===ne?Yd:ne,ae=u.popupIcon,oe=void 0===ae?kp||(kp=(0,a.jsx)(bp,{})):ae,ie=u.readOnly,le=void 0!==ie&&ie,ue=u.renderGroup,se=u.renderInput,ce=u.renderOption,pe=u.renderTags,fe=u.selectOnFocus,Ce=(void 0===fe&&u.freeSolo,u.size),me=void 0===Ce?"medium":Ce,ve=(0,ge.Z)(u,Sp),be=dg((0,l.Z)({},u,{componentName:"Autocomplete"})),Ae=be.getRootProps,ye=be.getInputProps,ke=be.getInputLabelProps,Ze=be.getPopupIndicatorProps,Se=be.getClearProps,we=be.getTagProps,Be=be.getListboxProps,xe=be.getOptionProps,Ge=be.value,Re=be.dirty,We=be.id,Ve=be.popupOpen,Fe=be.focused,Ne=be.focusedTag,Ee=be.anchorEl,De=be.setAnchorEl,Xe=be.inputValue,Je=be.groupedOptions,He=!y&&!Z&&Re&&!le,Ye=(!R||!0===x)&&!1!==x,Te=(0,l.Z)({},u,{disablePortal:w,focused:Fe,fullWidth:V,hasClearIcon:He,hasPopupIcon:Ye,inputFocused:-1===Ne,popupOpen:Ve,size:me}),Me=function(e){var t=e.classes,n=e.disablePortal,r=e.focused,a=e.fullWidth,o=e.hasClearIcon,i=e.hasPopupIcon,l=e.inputFocused,u=e.popupOpen,s=e.size,c={root:["root",r&&"focused",a&&"fullWidth",o&&"hasClearIcon",i&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag","tagSize".concat((0,lt.Z)(s))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",u&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,he.Z)(c,Ap,t)}(Te);if(U&&Ge.length>0){var Ke=function(e){return(0,l.Z)({className:(0,de.Z)(Me.tag),disabled:Z},we(e))};i=pe?pe(Ge,Ke):Ge.map((function(e,t){return(0,a.jsx)(dp,(0,l.Z)({label:D(e),size:me},Ke({index:t}),s))}))}if(Y>-1&&Array.isArray(i)){var Pe=i.length-Y;!Fe&&Pe>0&&(i=i.splice(0,Y)).push((0,a.jsx)("span",{className:Me.tag,children:N(Pe)},i.length))}var ze=ue||function(e){return(0,a.jsxs)("li",{children:[(0,a.jsx)(Ep,{className:Me.groupLabel,ownerState:Te,component:"div",children:e.group}),(0,a.jsx)(Dp,{className:Me.groupUl,ownerState:Te,children:e.children})]},e.key)},Le=ce||function(e,t){return(0,a.jsx)("li",(0,l.Z)({},e,{children:D(t)}))},_e=function(e,t){var n=xe({option:e,index:t});return Le((0,l.Z)({},n,{className:Me.option}),e,{selected:n["aria-selected"],inputValue:Xe})};return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(wp,(0,l.Z)({ref:t,className:(0,de.Z)(Me.root,c),ownerState:Te},Ae(ve),{children:se({id:We,disabled:Z,fullWidth:!0,size:"small"===me?"small":void 0,InputLabelProps:ke(),InputProps:{ref:De,className:Me.inputRoot,startAdornment:i,endAdornment:(0,a.jsxs)(Bp,{className:Me.endAdornment,ownerState:Te,children:[He?(0,a.jsx)(xp,(0,l.Z)({},Se(),{"aria-label":f,title:f,ownerState:Te},v.clearIndicator,{className:(0,de.Z)(Me.clearIndicator,null==(r=v.clearIndicator)?void 0:r.className),children:d})):null,Ye?(0,a.jsx)(Gp,(0,l.Z)({},Ze(),{disabled:Z,"aria-label":Ve?I:$,title:Ve?I:$,className:(0,de.Z)(Me.popupIndicator),ownerState:Te,children:oe})):null]})},inputProps:(0,l.Z)({className:(0,de.Z)(Me.input),disabled:Z,readOnly:le},ye())})})),Ve&&Ee?(0,a.jsx)(Rp,{as:re,className:(0,de.Z)(Me.popper),disablePortal:w,style:{width:Ee?Ee.clientWidth:null},ownerState:Te,role:"presentation",anchorEl:Ee,open:!0,children:(0,a.jsxs)(Wp,(0,l.Z)({ownerState:Te,as:te},v.paper,{className:(0,de.Z)(Me.paper,null==(o=v.paper)?void 0:o.className),children:[z&&0===Je.length?(0,a.jsx)(Vp,{className:Me.loading,ownerState:Te,children:_}):null,0!==Je.length||R||z?null:(0,a.jsx)(Fp,{className:Me.noOptions,ownerState:Te,role:"presentation",onMouseDown:function(e){e.preventDefault()},children:Q}),Je.length>0?(0,a.jsx)(Np,(0,l.Z)({as:M,className:Me.listbox,ownerState:Te},Be(),K,{children:Je.map((function(e,t){return X?ze({key:e.key,group:e.group,children:e.options.map((function(t,n){return _e(t,e.index+n)}))}):_e(e,t)}))})):null]}))}):null]})})),Jp=Xp,Hp=__webpack_require__(2466),Yp=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],Tp=(0,Ce.ZP)(rc,{shouldForwardProp:function(e){return(0,Ce.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,Ae.Z)(tc(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return(0,l.Z)({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat(n.palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,le.Z)(t,"&.".concat(hp.focused,":after"),{transform:"scaleX(1)"}),(0,le.Z)(t,"&.".concat(hp.error,":after"),{borderBottomColor:n.palette.error.main,transform:"scaleX(1)"}),(0,le.Z)(t,"&:before",{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,le.Z)(t,"&:hover:not(.".concat(hp.disabled,"):before"),{borderBottom:"2px solid ".concat(n.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(a)}}),(0,le.Z)(t,"&.".concat(hp.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),Mp=(0,Ce.ZP)(ac,{name:"MuiInput",slot:"Input",overridesResolver:nc})({}),Kp=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiInput"}),r=n.disableUnderline,o=n.components,i=void 0===o?{}:o,u=n.componentsProps,s=n.fullWidth,c=void 0!==s&&s,g=n.inputComponent,d=void 0===g?"input":g,p=n.multiline,h=void 0!==p&&p,f=n.type,C=void 0===f?"text":f,I=(0,ge.Z)(n,Yp),m=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,he.Z)(n,pp,t);return(0,l.Z)({},t,r)}(n),v={root:{ownerState:{disableUnderline:r}}},b=u?(0,Hp.Z)(u,v):v;return(0,a.jsx)(lc,(0,l.Z)({components:(0,l.Z)({Root:Tp,Input:Mp},i),componentsProps:b,fullWidth:c,inputComponent:d,multiline:h,ref:t,type:C},I,{classes:m}))}));Kp.muiName="Input";var Pp=Kp,zp=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],Lp=(0,Ce.ZP)(rc,{shouldForwardProp:function(e){return(0,Ce.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,Ae.Z)(tc(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n,r=e.theme,a=e.ownerState,o="light"===r.palette.mode,i=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return(0,l.Z)((t={position:"relative",backgroundColor:u,borderTopLeftRadius:r.shape.borderRadius,borderTopRightRadius:r.shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:u}}},(0,le.Z)(t,"&.".concat(mp.focused),{backgroundColor:u}),(0,le.Z)(t,"&.".concat(mp.disabled),{backgroundColor:o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}),t),!a.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(r.palette[a.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"}},(0,le.Z)(n,"&.".concat(mp.focused,":after"),{transform:"scaleX(1)"}),(0,le.Z)(n,"&.".concat(mp.error,":after"),{borderBottomColor:r.palette.error.main,transform:"scaleX(1)"}),(0,le.Z)(n,"&:before",{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"}),(0,le.Z)(n,"&:hover:not(.".concat(mp.disabled,"):before"),{borderBottom:"1px solid ".concat(r.palette.text.primary)}),(0,le.Z)(n,"&.".concat(mp.disabled,":before"),{borderBottomStyle:"dotted"}),n),a.startAdornment&&{paddingLeft:12},a.endAdornment&&{paddingRight:12},a.multiline&&(0,l.Z)({padding:"25px 12px 8px"},"small"===a.size&&{paddingTop:21,paddingBottom:4},a.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),_p=(0,Ce.ZP)(ac,{name:"MuiFilledInput",slot:"Input",overridesResolver:nc})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),Op=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiFilledInput"}),r=n.components,o=void 0===r?{}:r,i=n.componentsProps,u=n.fullWidth,s=void 0!==u&&u,c=n.inputComponent,g=void 0===c?"input":c,d=n.multiline,p=void 0!==d&&d,h=n.type,f=void 0===h?"text":h,C=(0,ge.Z)(n,zp),I=(0,l.Z)({},n,{fullWidth:s,inputComponent:g,multiline:p,type:f}),m=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,he.Z)(n,Ip,t);return(0,l.Z)({},t,r)}(n),v={root:{ownerState:I},input:{ownerState:I}},b=i?(0,Hp.Z)(i,v):v;return(0,a.jsx)(lc,(0,l.Z)({components:(0,l.Z)({Root:Lp,Input:_p},o),componentsProps:b,fullWidth:s,inputComponent:g,multiline:p,ref:t,type:f},C,{classes:m}))}));Op.muiName="Input";var Up,jp=Op,Qp=["children","classes","className","label","notched"],qp=(0,Ce.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),$p=(0,Ce.ZP)("legend")((function(e){var t=e.ownerState,n=e.theme;return(0,l.Z)({float:"unset",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,l.Z)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));var eh=["components","fullWidth","inputComponent","label","multiline","notched","type"],th=(0,Ce.ZP)(rc,{shouldForwardProp:function(e){return(0,Ce.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:tc})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,l.Z)((t={position:"relative",borderRadius:n.shape.borderRadius},(0,le.Z)(t,"&:hover .".concat(Cp.notchedOutline),{borderColor:n.palette.text.primary}),(0,le.Z)(t,"@media (hover: none)",(0,le.Z)({},"&:hover .".concat(Cp.notchedOutline),{borderColor:a})),(0,le.Z)(t,"&.".concat(Cp.focused," .").concat(Cp.notchedOutline),{borderColor:n.palette[r.color].main,borderWidth:2}),(0,le.Z)(t,"&.".concat(Cp.error," .").concat(Cp.notchedOutline),{borderColor:n.palette.error.main}),(0,le.Z)(t,"&.".concat(Cp.disabled," .").concat(Cp.notchedOutline),{borderColor:n.palette.action.disabled}),t),r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&(0,l.Z)({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),nh=(0,Ce.ZP)((function(e){var t=e.className,n=e.label,r=e.notched,o=(0,ge.Z)(e,Qp),i=null!=n&&""!==n,u=(0,l.Z)({},e,{notched:r,withLabel:i});return(0,a.jsx)(qp,(0,l.Z)({"aria-hidden":!0,className:t,ownerState:u},o,{children:(0,a.jsx)($p,{ownerState:u,children:i?(0,a.jsx)("span",{children:n}):Up||(Up=(0,a.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){return{borderColor:"light"===e.theme.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}})),rh=(0,Ce.ZP)(ac,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:nc})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),ah=n.forwardRef((function(e,t){var r,o=(0,Ie.Z)({props:e,name:"MuiOutlinedInput"}),i=o.components,u=void 0===i?{}:i,s=o.fullWidth,c=void 0!==s&&s,g=o.inputComponent,d=void 0===g?"input":g,p=o.label,h=o.multiline,f=void 0!==h&&h,C=o.notched,I=o.type,m=void 0===I?"text":I,v=(0,ge.Z)(o,eh),b=function(e){var t=e.classes,n=(0,he.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},fp,t);return(0,l.Z)({},t,n)}(o),A=Ps({props:o,muiFormControl:Ls(),states:["required"]});return(0,a.jsx)(lc,(0,l.Z)({components:(0,l.Z)({Root:th,Input:rh},u),renderSuffix:function(e){return(0,a.jsx)(nh,{className:b.notchedOutline,label:null!=p&&""!==p&&A.required?r||(r=(0,a.jsxs)(n.Fragment,{children:[p,"\xa0","*"]})):p,notched:"undefined"!==typeof C?C:Boolean(e.startAdornment||e.filled||e.focused)})},fullWidth:c,inputComponent:d,multiline:f,ref:t,type:m},v,{classes:(0,l.Z)({},b,{notchedOutline:null})}))}));ah.muiName="Input";var oh=ah;function ih(e){return(0,$e.Z)("MuiFormLabel",e)}var lh=(0,Ee.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),uh=["children","className","color","component","disabled","error","filled","focused","required"],sh=(0,Ce.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,l.Z)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({color:n.palette.text.secondary},n.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},(0,le.Z)(t,"&.".concat(lh.focused),{color:n.palette[r.color].main}),(0,le.Z)(t,"&.".concat(lh.disabled),{color:n.palette.text.disabled}),(0,le.Z)(t,"&.".concat(lh.error),{color:n.palette.error.main}),t))})),ch=(0,Ce.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,le.Z)({},"&.".concat(lh.error),{color:t.palette.error.main})})),gh=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiFormLabel"}),r=n.children,o=n.className,i=n.component,u=void 0===i?"label":i,s=(0,ge.Z)(n,uh),c=Ps({props:n,muiFormControl:Ls(),states:["color","required","focused","disabled","error","filled"]}),g=(0,l.Z)({},n,{color:c.color||"primary",component:u,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=function(e){var t=e.classes,n=e.color,r=e.focused,a=e.disabled,o=e.error,i=e.filled,l=e.required,u={root:["root","color".concat((0,lt.Z)(n)),a&&"disabled",o&&"error",i&&"filled",r&&"focused",l&&"required"],asterisk:["asterisk",o&&"error"]};return(0,he.Z)(u,ih,t)}(g);return(0,a.jsxs)(sh,(0,l.Z)({as:u,ownerState:g,className:(0,de.Z)(d.root,o),ref:t},s,{children:[r,c.required&&(0,a.jsxs)(ch,{ownerState:g,"aria-hidden":!0,className:d.asterisk,children:["\u2009","*"]})]}))})),dh=gh;function ph(e){return(0,$e.Z)("MuiInputLabel",e)}(0,Ee.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var hh=["disableAnimation","margin","shrink","variant"],fh=(0,Ce.ZP)(dh,{shouldForwardProp:function(e){return(0,Ce.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,le.Z)({},"& .".concat(lh.asterisk),t.asterisk),t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,l.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,l.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,l.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Ch=n.forwardRef((function(e,t){var n=(0,Ie.Z)({name:"MuiInputLabel",props:e}),r=n.disableAnimation,o=void 0!==r&&r,i=n.shrink,u=(0,ge.Z)(n,hh),s=Ls(),c=i;"undefined"===typeof c&&s&&(c=s.filled||s.focused||s.adornedStart);var g=Ps({props:n,muiFormControl:s,states:["size","variant","required"]}),d=(0,l.Z)({},n,{disableAnimation:o,formControl:s,shrink:c,size:g.size,variant:g.variant,required:g.required}),p=function(e){var t=e.classes,n=e.formControl,r=e.size,a=e.shrink,o={root:["root",n&&"formControl",!e.disableAnimation&&"animated",a&&"shrink","small"===r&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},i=(0,he.Z)(o,ph,t);return(0,l.Z)({},t,i)}(d);return(0,a.jsx)(fh,(0,l.Z)({"data-shrink":c,ownerState:d,ref:t},u,{classes:p}))})),Ih=__webpack_require__(9103);function mh(e){return(0,$e.Z)("MuiFormControl",e)}(0,Ee.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var vh=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],bh=(0,Ce.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,l.Z)({},t.root,t["margin".concat((0,lt.Z)(n.margin))],n.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return(0,l.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Ah=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiFormControl"}),o=r.children,u=r.className,s=r.color,c=void 0===s?"primary":s,g=r.component,d=void 0===g?"div":g,p=r.disabled,h=void 0!==p&&p,f=r.error,C=void 0!==f&&f,I=r.focused,m=r.fullWidth,v=void 0!==m&&m,b=r.hiddenLabel,A=void 0!==b&&b,y=r.margin,k=void 0===y?"none":y,Z=r.required,S=void 0!==Z&&Z,w=r.size,B=void 0===w?"medium":w,x=r.variant,G=void 0===x?"outlined":x,R=(0,ge.Z)(r,vh),W=(0,l.Z)({},r,{color:c,component:d,disabled:h,error:C,fullWidth:v,hiddenLabel:A,margin:k,required:S,size:B,variant:G}),V=function(e){var t=e.classes,n=e.margin,r=e.fullWidth,a={root:["root","none"!==n&&"margin".concat((0,lt.Z)(n)),r&&"fullWidth"]};return(0,he.Z)(a,mh,t)}(W),F=n.useState((function(){var e=!1;return o&&n.Children.forEach(o,(function(t){if((0,Ih.Z)(t,["Input","Select"])){var n=(0,Ih.Z)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),N=(0,i.Z)(F,2),E=N[0],D=N[1],X=n.useState((function(){var e=!1;return o&&n.Children.forEach(o,(function(t){(0,Ih.Z)(t,["Input","Select"])&&Qs(t.props,!0)&&(e=!0)})),e})),J=(0,i.Z)(X,2),H=J[0],Y=J[1],T=n.useState(!1),M=(0,i.Z)(T,2),K=M[0],P=M[1];h&&K&&P(!1);var z=void 0===I||h?K:I,L=n.useCallback((function(){Y(!0)}),[]),_={adornedStart:E,setAdornedStart:D,color:c,disabled:h,error:C,filled:H,focused:z,fullWidth:v,hiddenLabel:A,size:B,onBlur:function(){P(!1)},onEmpty:n.useCallback((function(){Y(!1)}),[]),onFilled:L,onFocus:function(){P(!0)},registerEffect:undefined,required:S,variant:G};return(0,a.jsx)(zs.Provider,{value:_,children:(0,a.jsx)(bh,(0,l.Z)({as:d,ownerState:W,className:(0,de.Z)(V.root,u),ref:t},R,{children:o}))})})),yh=Ah;function kh(e){return(0,$e.Z)("MuiFormHelperText",e)}var Zh,Sh=(0,Ee.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),wh=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Bh=(0,Ce.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.size&&t["size".concat((0,lt.Z)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({color:n.palette.text.secondary},n.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,le.Z)(t,"&.".concat(Sh.disabled),{color:n.palette.text.disabled}),(0,le.Z)(t,"&.".concat(Sh.error),{color:n.palette.error.main}),t),"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})})),xh=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiFormHelperText"}),r=n.children,o=n.className,i=n.component,u=void 0===i?"p":i,s=(0,ge.Z)(n,wh),c=Ps({props:n,muiFormControl:Ls(),states:["variant","size","disabled","error","filled","focused","required"]}),g=(0,l.Z)({},n,{component:u,contained:"filled"===c.variant||"outlined"===c.variant,variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=function(e){var t=e.classes,n=e.contained,r=e.size,a=e.disabled,o=e.error,i=e.filled,l=e.focused,u=e.required,s={root:["root",a&&"disabled",o&&"error",r&&"size".concat((0,lt.Z)(r)),n&&"contained",l&&"focused",i&&"filled",u&&"required"]};return(0,he.Z)(s,kh,t)}(g);return(0,a.jsx)(Bh,(0,l.Z)({as:u,ownerState:g,className:(0,de.Z)(d.root,o),ref:t},s,{children:" "===r?Zh||(Zh=(0,a.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),Gh=(__webpack_require__(8457),__webpack_require__(8301));function Rh(e){return(0,$e.Z)("MuiList",e)}(0,Ee.Z)("MuiList",["root","padding","dense","subheader"]);var Wh=["children","className","component","dense","disablePadding","subheader"],Vh=(0,Ce.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return(0,l.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),Fh=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiList"}),o=r.children,i=r.className,u=r.component,s=void 0===u?"ul":u,c=r.dense,g=void 0!==c&&c,d=r.disablePadding,p=void 0!==d&&d,h=r.subheader,f=(0,ge.Z)(r,Wh),C=n.useMemo((function(){return{dense:g}}),[g]),I=(0,l.Z)({},r,{component:s,dense:g,disablePadding:p}),m=function(e){var t=e.classes,n={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,he.Z)(n,Rh,t)}(I);return(0,a.jsx)(Rc.Provider,{value:C,children:(0,a.jsxs)(Vh,(0,l.Z)({as:s,className:(0,de.Z)(m.root,i),ref:t,ownerState:I},f,{children:[h,o]}))})})),Nh=Fh;function Eh(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var Dh=Eh,Xh=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Jh(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Hh(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Yh(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function Th(e,t,n,r,a,o){for(var i=!1,l=a(e,t,!!t&&n);l;){if(l===e.firstChild){if(i)return!1;i=!0}var u=!r&&(l.disabled||"true"===l.getAttribute("aria-disabled"));if(l.hasAttribute("tabindex")&&Yh(l,o)&&!u)return l.focus(),!0;l=a(e,l,n)}return!1}var Mh=n.forwardRef((function(e,t){var r=e.actions,o=e.autoFocus,i=void 0!==o&&o,u=e.autoFocusItem,s=void 0!==u&&u,c=e.children,g=e.className,d=e.disabledItemsFocusable,p=void 0!==d&&d,h=e.disableListWrap,f=void 0!==h&&h,C=e.onKeyDown,I=e.variant,m=void 0===I?"selectedMenu":I,v=(0,ge.Z)(e,Xh),b=n.useRef(null),A=n.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Cl.Z)((function(){i&&b.current.focus()}),[i]),n.useImperativeHandle(r,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!b.current.style.width;if(e.clientHeight<b.current.clientHeight&&n){var r="".concat(Dh((0,Gh.Z)(e)),"px");b.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,b.current.style.width="calc(100% + ".concat(r,")")}return b.current}}}),[]);var y=(0,me.Z)(b,t),k=-1;n.Children.forEach(c,(function(e,t){n.isValidElement(e)&&(e.props.disabled||("selectedMenu"===m&&e.props.selected||-1===k)&&(k=t))}));var Z=n.Children.map(c,(function(e,t){if(t===k){var r={};return s&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===m&&(r.tabIndex=0),n.cloneElement(e,r)}return e}));return(0,a.jsx)(Nh,(0,l.Z)({role:"menu",ref:y,className:g,onKeyDown:function(e){var t=b.current,n=e.key,r=(0,Gh.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Th(t,r,f,p,Jh);else if("ArrowUp"===n)e.preventDefault(),Th(t,r,f,p,Hh);else if("Home"===n)e.preventDefault(),Th(t,null,f,p,Jh);else if("End"===n)e.preventDefault(),Th(t,null,f,p,Hh);else if(1===n.length){var a=A.current,o=n.toLowerCase(),i=performance.now();a.keys.length>0&&(i-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&o!==a.keys[0]&&(a.repeating=!1)),a.lastTime=i,a.keys.push(o);var l=r&&!a.repeating&&Yh(r,a);a.previousKeyMatched&&(l||Th(t,r,!1,p,Jh,a))?e.preventDefault():a.previousKeyMatched=!1}C&&C(e)},tabIndex:i?0:-1},v,{children:Z}))})),Kh=Mh,Ph=__webpack_require__(3199),zh=!1,Lh="unmounted",_h="exited",Oh="entering",Uh="entered",jh="exiting",Qh=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(a=_h,r.appearStatus=Oh):a=Uh:a=t.unmountOnExit||t.mountOnEnter?Lh:_h,r.state={status:a},r.nextCallback=null,r}Se(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Lh?{status:_h}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Oh&&n!==Uh&&(t=Oh):n!==Oh&&n!==Uh||(t=jh)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Oh?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===_h&&this.setState({status:Lh})},a.performEnter=function(e){var t=this,n=this.props.enter,a=this.context?this.context.isMounting:e,o=this.props.nodeRef?[a]:[r.findDOMNode(this),a],i=o[0],l=o[1],u=this.getTimeouts(),s=a?u.appear:u.enter;!e&&!n||zh?this.safeSetState({status:Uh},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,l),this.safeSetState({status:Oh},(function(){t.props.onEntering(i,l),t.onTransitionEnd(s,(function(){t.safeSetState({status:Uh},(function(){t.props.onEntered(i,l)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),a=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!zh?(this.props.onExit(a),this.safeSetState({status:jh},(function(){e.props.onExiting(a),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:_h},(function(){e.props.onExited(a)}))}))}))):this.safeSetState({status:_h},(function(){e.props.onExited(a)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),a=null==e&&!this.props.addEndListener;if(n&&!a){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],l=o[1];this.props.addEndListener(i,l)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===Lh)return null;var t=this.props,r=t.children,a=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,ge.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return n.createElement(we.Provider,{value:null},"function"===typeof r?r(e,a):n.cloneElement(n.Children.only(r),a))},t}(n.Component);function qh(){}Qh.contextType=we,Qh.propTypes={},Qh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:qh,onEntering:qh,onEntered:qh,onExit:qh,onExiting:qh,onExited:qh},Qh.UNMOUNTED=Lh,Qh.EXITED=_h,Qh.ENTERING=Oh,Qh.ENTERED=Uh,Qh.EXITING=jh;var $h=Qh,ef=__webpack_require__(418);function tf(){return(0,ef.Z)(Os.Z)}var nf=function(e){return e.scrollTop};function rf(e,t){var n,r,a=e.timeout,o=e.easing,i=e.style,l=void 0===i?{}:i;return{duration:null!=(n=l.transitionDuration)?n:"number"===typeof a?a:a[t.mode]||0,easing:null!=(r=l.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:l.transitionDelay}}var af=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function of(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var lf={entering:{opacity:1,transform:of(1)},entered:{opacity:1,transform:"none"}},uf="undefined"!==typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&/version\/15\.[4-9]/i.test(navigator.userAgent),sf=n.forwardRef((function(e,t){var r=e.addEndListener,o=e.appear,i=void 0===o||o,u=e.children,s=e.easing,c=e.in,g=e.onEnter,d=e.onEntered,p=e.onEntering,h=e.onExit,f=e.onExited,C=e.onExiting,I=e.style,m=e.timeout,v=void 0===m?"auto":m,b=e.TransitionComponent,A=void 0===b?$h:b,y=(0,ge.Z)(e,af),k=n.useRef(),Z=n.useRef(),S=tf(),w=n.useRef(null),B=(0,me.Z)(u.ref,t),x=(0,me.Z)(w,B),G=function(e){return function(t){if(e){var n=w.current;void 0===t?e(n):e(n,t)}}},R=G(p),W=G((function(e,t){nf(e);var n,r=rf({style:I,timeout:v,easing:s},{mode:"enter"}),a=r.duration,o=r.delay,i=r.easing;"auto"===v?(n=S.transitions.getAutoHeightDuration(e.clientHeight),Z.current=n):n=a,e.style.transition=[S.transitions.create("opacity",{duration:n,delay:o}),S.transitions.create("transform",{duration:uf?n:.666*n,delay:o,easing:i})].join(","),g&&g(e,t)})),V=G(d),F=G(C),N=G((function(e){var t,n=rf({style:I,timeout:v,easing:s},{mode:"exit"}),r=n.duration,a=n.delay,o=n.easing;"auto"===v?(t=S.transitions.getAutoHeightDuration(e.clientHeight),Z.current=t):t=r,e.style.transition=[S.transitions.create("opacity",{duration:t,delay:a}),S.transitions.create("transform",{duration:uf?t:.666*t,delay:uf?a:a||.333*t,easing:o})].join(","),e.style.opacity=0,e.style.transform=of(.75),h&&h(e)})),E=G(f);return n.useEffect((function(){return function(){clearTimeout(k.current)}}),[]),(0,a.jsx)(A,(0,l.Z)({appear:i,in:c,nodeRef:w,onEnter:W,onEntered:V,onEntering:R,onExit:N,onExited:E,onExiting:F,addEndListener:function(e){"auto"===v&&(k.current=setTimeout(e,Z.current||0)),r&&r(w.current,e)},timeout:"auto"===v?null:v},y,{children:function(e,t){return n.cloneElement(u,(0,l.Z)({style:(0,l.Z)({opacity:0,transform:of(.75),visibility:"exited"!==e||c?void 0:"hidden"},lf[e],I,u.props.style),ref:x},t))}}))}));sf.muiSupportAuto=!0;var cf=sf,gf=__webpack_require__(8949);function df(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function pf(e){return parseInt((0,Es.Z)(e).getComputedStyle(e).paddingRight,10)||0}function hf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,o=[t,n].concat((0,Ae.Z)(r)),i=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){-1===o.indexOf(e)&&-1===i.indexOf(e.tagName)&&df(e,a)}))}function ff(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Cf(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,pg.Z)(e);return t.body===e?(0,Es.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var a=Eh((0,pg.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(pf(r)+a,"px");var o=(0,pg.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(o,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(pf(e)+a,"px")}))}var i=r.parentElement,l=(0,Es.Z)(r),u="HTML"===(null==i?void 0:i.nodeName)&&"scroll"===l.getComputedStyle(i).overflowY?i:r;n.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var If=function(){function e(){iu(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return uu(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&df(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);hf(t,e.mount,e.modalRef,r,!0);var a=ff(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=ff(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Cf(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=ff(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&df(e.modalRef,!0),hf(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&df(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),mf=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function vf(e){var t=[],n=[];return Array.from(e.querySelectorAll(mf)).forEach((function(e,r){var a=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==a&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===a?t.push(e):n.push({documentOrder:r,tabIndex:a,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function bf(){return!0}var Af=function(e){var t=e.children,r=e.disableAutoFocus,o=void 0!==r&&r,i=e.disableEnforceFocus,l=void 0!==i&&i,u=e.disableRestoreFocus,s=void 0!==u&&u,c=e.getTabbable,g=void 0===c?vf:c,d=e.isEnabled,p=void 0===d?bf:d,h=e.open,f=n.useRef(),C=n.useRef(null),I=n.useRef(null),m=n.useRef(null),v=n.useRef(null),b=n.useRef(!1),A=n.useRef(null),y=(0,Ns.Z)(t.ref,A),k=n.useRef(null);n.useEffect((function(){h&&A.current&&(b.current=!o)}),[o,h]),n.useEffect((function(){if(h&&A.current){var e=(0,pg.Z)(A.current);return A.current.contains(e.activeElement)||(A.current.hasAttribute("tabIndex")||A.current.setAttribute("tabIndex",-1),b.current&&A.current.focus()),function(){s||(m.current&&m.current.focus&&(f.current=!0,m.current.focus()),m.current=null)}}}),[h]),n.useEffect((function(){if(h&&A.current){var e=(0,pg.Z)(A.current),t=function(t){var n=A.current;if(null!==n)if(e.hasFocus()&&!l&&p()&&!f.current){if(!n.contains(e.activeElement)){if(t&&v.current!==t.target||e.activeElement!==v.current)v.current=null;else if(null!==v.current)return;if(!b.current)return;var r=[];if(e.activeElement!==C.current&&e.activeElement!==I.current||(r=g(A.current)),r.length>0){var a,o,i=Boolean((null==(a=k.current)?void 0:a.shiftKey)&&"Tab"===(null==(o=k.current)?void 0:o.key)),u=r[0],s=r[r.length-1];i?s.focus():u.focus()}else n.focus()}}else f.current=!1},n=function(t){k.current=t,!l&&p()&&"Tab"===t.key&&e.activeElement===A.current&&t.shiftKey&&(f.current=!0,I.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){"BODY"===e.activeElement.tagName&&t()}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[o,l,s,p,h,g]);var Z=function(e){null===m.current&&(m.current=e.relatedTarget),b.current=!0};return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)("div",{tabIndex:0,onFocus:Z,ref:C,"data-test":"sentinelStart"}),n.cloneElement(t,{ref:y,onFocus:function(e){null===m.current&&(m.current=e.relatedTarget),b.current=!0,v.current=e.target;var n=t.props.onFocus;n&&n(e)}}),(0,a.jsx)("div",{tabIndex:0,onFocus:Z,ref:I,"data-test":"sentinelEnd"})]})};function yf(e){return(0,$e.Z)("MuiModal",e)}(0,Ee.Z)("MuiModal",["root","hidden"]);var kf=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];var Zf=new If,Sf=n.forwardRef((function(e,t){var r=e.BackdropComponent,o=e.BackdropProps,u=e.children,s=e.classes,c=e.className,g=e.closeAfterTransition,d=void 0!==g&&g,p=e.component,h=void 0===p?"div":p,f=e.components,C=void 0===f?{}:f,I=e.componentsProps,m=void 0===I?{}:I,v=e.container,b=e.disableAutoFocus,A=void 0!==b&&b,y=e.disableEnforceFocus,k=void 0!==y&&y,Z=e.disableEscapeKeyDown,S=void 0!==Z&&Z,w=e.disablePortal,B=void 0!==w&&w,x=e.disableRestoreFocus,G=void 0!==x&&x,R=e.disableScrollLock,W=void 0!==R&&R,V=e.hideBackdrop,F=void 0!==V&&V,N=e.keepMounted,E=void 0!==N&&N,D=e.manager,X=void 0===D?Zf:D,J=e.onBackdropClick,H=e.onClose,Y=e.onKeyDown,T=e.open,M=e.theme,K=e.onTransitionEnter,P=e.onTransitionExited,z=(0,ge.Z)(e,kf),L=n.useState(!0),_=(0,i.Z)(L,2),O=_[0],U=_[1],j=n.useRef({}),Q=n.useRef(null),q=n.useRef(null),$=(0,Ns.Z)(q,t),ee=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(e),te=function(){return j.current.modalRef=q.current,j.current.mountNode=Q.current,j.current},ne=function(){X.mount(te(),{disableScrollLock:W}),q.current.scrollTop=0},re=(0,ig.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(v)||(0,pg.Z)(Q.current).body;X.add(te(),e),q.current&&ne()})),ae=n.useCallback((function(){return X.isTopModal(te())}),[X]),oe=(0,ig.Z)((function(e){Q.current=e,e&&(T&&ae()?ne():df(q.current,!0))})),ie=n.useCallback((function(){X.remove(te())}),[X]);n.useEffect((function(){return function(){ie()}}),[ie]),n.useEffect((function(){T?re():ee&&d||ie()}),[T,ie,ee,d,re]);var le=(0,l.Z)({},e,{classes:s,closeAfterTransition:d,disableAutoFocus:A,disableEnforceFocus:k,disableEscapeKeyDown:S,disablePortal:B,disableRestoreFocus:G,disableScrollLock:W,exited:O,hideBackdrop:F,keepMounted:E}),ue=function(e){var t=e.open,n=e.exited,r=e.classes,a={root:["root",!t&&n&&"hidden"]};return(0,he.Z)(a,yf,r)}(le);if(!E&&!T&&(!ee||O))return null;var se={};void 0===u.props.tabIndex&&(se.tabIndex="-1"),ee&&(se.onEnter=(0,gf.Z)((function(){U(!1),K&&K()}),u.props.onEnter),se.onExited=(0,gf.Z)((function(){U(!0),P&&P(),d&&ie()}),u.props.onExited));var ce=C.Root||h,pe=m.root||{};return(0,a.jsx)(Rd,{ref:oe,container:v,disablePortal:B,children:(0,a.jsxs)(ce,(0,l.Z)({role:"presentation"},pe,!Ks(ce)&&{as:h,ownerState:(0,l.Z)({},le,pe.ownerState),theme:M},z,{ref:$,onKeyDown:function(e){Y&&Y(e),"Escape"===e.key&&ae()&&(S||(e.stopPropagation(),H&&H(e,"escapeKeyDown")))},className:(0,de.Z)(ue.root,pe.className,c),children:[!F&&r?(0,a.jsx)(r,(0,l.Z)({"aria-hidden":!0,open:T,onClick:function(e){e.target===e.currentTarget&&(J&&J(e),H&&H(e,"backdropClick"))}},o)):null,(0,a.jsx)(Af,{disableEnforceFocus:k,disableAutoFocus:A,disableRestoreFocus:G,isEnabled:ae,open:T,children:n.cloneElement(u,se)})]}))})})),wf=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Bf={entering:{opacity:1},entered:{opacity:1}},xf=n.forwardRef((function(e,t){var r=tf(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},i=e.addEndListener,u=e.appear,s=void 0===u||u,c=e.children,g=e.easing,d=e.in,p=e.onEnter,h=e.onEntered,f=e.onEntering,C=e.onExit,I=e.onExited,m=e.onExiting,v=e.style,b=e.timeout,A=void 0===b?o:b,y=e.TransitionComponent,k=void 0===y?$h:y,Z=(0,ge.Z)(e,wf),S=n.useRef(null),w=(0,me.Z)(c.ref,t),B=(0,me.Z)(S,w),x=function(e){return function(t){if(e){var n=S.current;void 0===t?e(n):e(n,t)}}},G=x(f),R=x((function(e,t){nf(e);var n=rf({style:v,timeout:A,easing:g},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),p&&p(e,t)})),W=x(h),V=x(m),F=x((function(e){var t=rf({style:v,timeout:A,easing:g},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),C&&C(e)})),N=x(I);return(0,a.jsx)(k,(0,l.Z)({appear:s,in:d,nodeRef:S,onEnter:R,onEntered:W,onEntering:G,onExit:F,onExited:N,onExiting:V,addEndListener:function(e){i&&i(S.current,e)},timeout:A},Z,{children:function(e,t){return n.cloneElement(c,(0,l.Z)({style:(0,l.Z)({opacity:0,visibility:"exited"!==e||d?void 0:"hidden"},Bf[e],v,c.props.style),ref:B},t))}}))})),Gf=xf;function Rf(e){return(0,$e.Z)("MuiBackdrop",e)}(0,Ee.Z)("MuiBackdrop",["root","invisible"]);var Wf=["children","component","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],Vf=(0,Ce.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,l.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),Ff=n.forwardRef((function(e,t){var n,r,o=(0,Ie.Z)({props:e,name:"MuiBackdrop"}),i=o.children,u=o.component,s=void 0===u?"div":u,c=o.components,g=void 0===c?{}:c,d=o.componentsProps,p=void 0===d?{}:d,h=o.className,f=o.invisible,C=void 0!==f&&f,I=o.open,m=o.transitionDuration,v=o.TransitionComponent,b=void 0===v?Gf:v,A=(0,ge.Z)(o,Wf),y=(0,l.Z)({},o,{component:s,invisible:C}),k=function(e){var t=e.classes,n={root:["root",e.invisible&&"invisible"]};return(0,he.Z)(n,Rf,t)}(y);return(0,a.jsx)(b,(0,l.Z)({in:I,timeout:m},A,{children:(0,a.jsx)(Vf,{"aria-hidden":!0,as:null!=(n=g.Root)?n:s,className:(0,de.Z)(k.root,h),ownerState:(0,l.Z)({},y,null==(r=p.root)?void 0:r.ownerState),classes:k,ref:t,children:i})}))})),Nf=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],Ef=(0,Ce.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Df=(0,Ce.ZP)(Ff,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),Xf=n.forwardRef((function(e,t){var r,o=(0,Ie.Z)({name:"MuiModal",props:e}),u=o.BackdropComponent,s=void 0===u?Df:u,c=o.closeAfterTransition,g=void 0!==c&&c,d=o.children,p=o.components,h=void 0===p?{}:p,f=o.componentsProps,C=void 0===f?{}:f,I=o.disableAutoFocus,m=void 0!==I&&I,v=o.disableEnforceFocus,b=void 0!==v&&v,A=o.disableEscapeKeyDown,y=void 0!==A&&A,k=o.disablePortal,Z=void 0!==k&&k,S=o.disableRestoreFocus,w=void 0!==S&&S,B=o.disableScrollLock,x=void 0!==B&&B,G=o.hideBackdrop,R=void 0!==G&&G,W=o.keepMounted,V=void 0!==W&&W,F=(0,ge.Z)(o,Nf),N=n.useState(!0),E=(0,i.Z)(N,2),D=E[0],X=E[1],J={closeAfterTransition:g,disableAutoFocus:m,disableEnforceFocus:b,disableEscapeKeyDown:y,disablePortal:Z,disableRestoreFocus:w,disableScrollLock:x,hideBackdrop:R,keepMounted:V},H=function(e){return e.classes}((0,l.Z)({},o,J,{exited:D}));return(0,a.jsx)(Sf,(0,l.Z)({components:(0,l.Z)({Root:Ef},h),componentsProps:{root:(0,l.Z)({},C.root,(!h.Root||!Ks(h.Root))&&{ownerState:(0,l.Z)({},null==(r=C.root)?void 0:r.ownerState)})},BackdropComponent:s,onTransitionEnter:function(){return X(!1)},onTransitionExited:function(){return X(!0)},ref:t},F,{classes:H},J,{children:d}))}));function Jf(e){return(0,$e.Z)("MuiPopover",e)}(0,Ee.Z)("MuiPopover",["root","paper"]);var Hf=["onEntering"],Yf=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function Tf(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function Mf(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function Kf(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function Pf(e){return"function"===typeof e?e():e}var zf=(0,Ce.ZP)(Xf,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Lf=(0,Ce.ZP)(Qd,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),_f=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiPopover"}),o=r.action,i=r.anchorEl,u=r.anchorOrigin,s=void 0===u?{vertical:"top",horizontal:"left"}:u,c=r.anchorPosition,g=r.anchorReference,d=void 0===g?"anchorEl":g,p=r.children,h=r.className,f=r.container,C=r.elevation,I=void 0===C?8:C,m=r.marginThreshold,v=void 0===m?16:m,b=r.open,A=r.PaperProps,y=void 0===A?{}:A,k=r.transformOrigin,Z=void 0===k?{vertical:"top",horizontal:"left"}:k,S=r.TransitionComponent,w=void 0===S?cf:S,B=r.transitionDuration,x=void 0===B?"auto":B,G=r.TransitionProps,R=(G=void 0===G?{}:G).onEntering,W=(0,ge.Z)(r.TransitionProps,Hf),V=(0,ge.Z)(r,Yf),F=n.useRef(),N=(0,me.Z)(F,y.ref),E=(0,l.Z)({},r,{anchorOrigin:s,anchorReference:d,elevation:I,marginThreshold:v,PaperProps:y,transformOrigin:Z,TransitionComponent:w,transitionDuration:x,TransitionProps:W}),D=function(e){var t=e.classes;return(0,he.Z)({root:["root"],paper:["paper"]},Jf,t)}(E),X=n.useCallback((function(){if("anchorPosition"===d)return c;var e=Pf(i),t=(e&&1===e.nodeType?e:(0,Gh.Z)(F.current).body).getBoundingClientRect();return{top:t.top+Tf(t,s.vertical),left:t.left+Mf(t,s.horizontal)}}),[i,s.horizontal,s.vertical,c,d]),J=n.useCallback((function(e){return{vertical:Tf(e,Z.vertical),horizontal:Mf(e,Z.horizontal)}}),[Z.horizontal,Z.vertical]),H=n.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=J(t);if("none"===d)return{top:null,left:null,transformOrigin:Kf(n)};var r=X(),a=r.top-n.vertical,o=r.left-n.horizontal,l=a+t.height,u=o+t.width,s=(0,vu.Z)(Pf(i)),c=s.innerHeight-v,g=s.innerWidth-v;if(a<v){var p=a-v;a-=p,n.vertical+=p}else if(l>c){var h=l-c;a-=h,n.vertical+=h}if(o<v){var f=o-v;o-=f,n.horizontal+=f}else if(u>g){var C=u-g;o-=C,n.horizontal+=C}return{top:"".concat(Math.round(a),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:Kf(n)}}),[i,d,X,J,v]),Y=n.useCallback((function(){var e=F.current;if(e){var t=H(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[H]);n.useEffect((function(){b&&Y()})),n.useImperativeHandle(o,(function(){return b?{updatePosition:function(){Y()}}:null}),[b,Y]),n.useEffect((function(){if(b){var e=(0,Ph.Z)((function(){Y()})),t=(0,vu.Z)(i);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[i,b,Y]);var T=x;"auto"!==x||w.muiSupportAuto||(T=void 0);var M=f||(i?(0,Gh.Z)(Pf(i)).body:void 0);return(0,a.jsx)(zf,(0,l.Z)({BackdropProps:{invisible:!0},className:(0,de.Z)(D.root,h),container:M,open:b,ref:t,ownerState:E},V,{children:(0,a.jsx)(w,(0,l.Z)({appear:!0,in:b,onEntering:function(e,t){R&&R(e,t),Y()},timeout:T},W,{children:(0,a.jsx)(Lf,(0,l.Z)({elevation:I},y,{ref:N,className:(0,de.Z)(D.paper,y.className),children:p}))}))}))})),Of=_f;function Uf(e){return(0,$e.Z)("MuiMenu",e)}(0,Ee.Z)("MuiMenu",["root","paper","list"]);var jf=["onEntering"],Qf=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],qf={vertical:"top",horizontal:"right"},$f={vertical:"top",horizontal:"left"},eC=(0,Ce.ZP)(Of,{shouldForwardProp:function(e){return(0,Ce.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),tC=(0,Ce.ZP)(Qd,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),nC=(0,Ce.ZP)(Kh,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),rC=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiMenu"}),o=r.autoFocus,i=void 0===o||o,u=r.children,s=r.disableAutoFocusItem,c=void 0!==s&&s,g=r.MenuListProps,d=void 0===g?{}:g,p=r.onClose,h=r.open,f=r.PaperProps,C=void 0===f?{}:f,I=r.PopoverClasses,m=r.transitionDuration,v=void 0===m?"auto":m,b=r.TransitionProps,A=(b=void 0===b?{}:b).onEntering,y=r.variant,k=void 0===y?"selectedMenu":y,Z=(0,ge.Z)(r.TransitionProps,jf),S=(0,ge.Z)(r,Qf),w=tf(),B="rtl"===w.direction,x=(0,l.Z)({},r,{autoFocus:i,disableAutoFocusItem:c,MenuListProps:d,onEntering:A,PaperProps:C,transitionDuration:v,TransitionProps:Z,variant:k}),G=function(e){var t=e.classes;return(0,he.Z)({root:["root"],paper:["paper"],list:["list"]},Uf,t)}(x),R=i&&!c&&h,W=n.useRef(null),V=-1;return n.Children.map(u,(function(e,t){n.isValidElement(e)&&(e.props.disabled||("selectedMenu"===k&&e.props.selected||-1===V)&&(V=t))})),(0,a.jsx)(eC,(0,l.Z)({classes:I,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:B?"right":"left"},transformOrigin:B?qf:$f,PaperProps:(0,l.Z)({component:tC},C,{classes:(0,l.Z)({},C.classes,{root:G.paper})}),className:G.root,open:h,ref:t,transitionDuration:v,TransitionProps:(0,l.Z)({onEntering:function(e,t){W.current&&W.current.adjustStyleForScrollbar(e,w),A&&A(e,t)}},Z),ownerState:x},S,{children:(0,a.jsx)(nC,(0,l.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),p&&p(e,"tabKeyDown"))},actions:W,autoFocus:i&&(-1===V||c),autoFocusItem:R,variant:k},d,{className:(0,de.Z)(G.list,d.className),children:u}))}))})),aC=rC;function oC(e){return(0,$e.Z)("MuiNativeSelect",e)}var iC=(0,Ee.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),lC=["className","disabled","IconComponent","inputRef","variant"],uC=function(e){var t,n=e.ownerState,r=e.theme;return(0,l.Z)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"}},(0,le.Z)(t,"&.".concat(iC.disabled),{cursor:"default"}),(0,le.Z)(t,"&[multiple]",{height:"auto"}),(0,le.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:r.palette.background.paper}),(0,le.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:r.shape.borderRadius,"&:focus":{borderRadius:r.shape.borderRadius},"&&&":{paddingRight:32}})},sC=(0,Ce.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ce.FO,overridesResolver:function(e,t){var n=e.ownerState;return[t.select,t[n.variant],(0,le.Z)({},"&.".concat(iC.multiple),t.multiple)]}})(uC),cC=function(e){var t=e.ownerState,n=e.theme;return(0,l.Z)((0,le.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:n.palette.action.active},"&.".concat(iC.disabled),{color:n.palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},gC=(0,Ce.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,lt.Z)(n.variant))],n.open&&t.iconOpen]}})(cC),dC=n.forwardRef((function(e,t){var r=e.className,o=e.disabled,i=e.IconComponent,u=e.inputRef,s=e.variant,c=void 0===s?"standard":s,g=(0,ge.Z)(e,lC),d=(0,l.Z)({},e,{disabled:o,variant:c}),p=function(e){var t=e.classes,n=e.variant,r=e.disabled,a=e.multiple,o=e.open,i={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon","icon".concat((0,lt.Z)(n)),o&&"iconOpen",r&&"disabled"]};return(0,he.Z)(i,oC,t)}(d);return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(sC,(0,l.Z)({ownerState:d,className:(0,de.Z)(p.select,r),disabled:o,ref:u||t},g)),e.multiple?null:(0,a.jsx)(gC,{as:i,ownerState:d,className:p.icon})]})})),pC=__webpack_require__(8278);function hC(e){return(0,$e.Z)("MuiSelect",e)}var fC,CC=(0,Ee.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),IC=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],mC=(0,Ce.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var n=e.ownerState;return[(0,le.Z)({},"&.".concat(CC.select),t.select),(0,le.Z)({},"&.".concat(CC.select),t[n.variant]),(0,le.Z)({},"&.".concat(CC.multiple),t.multiple)]}})(uC,(0,le.Z)({},"&.".concat(CC.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),vC=(0,Ce.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,lt.Z)(n.variant))],n.open&&t.iconOpen]}})(cC),bC=(0,Ce.ZP)("input",{shouldForwardProp:function(e){return(0,Ce.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function AC(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function yC(e){return null==e||"string"===typeof e&&!e.trim()}var kC,ZC,SC=n.forwardRef((function(e,t){var r=e["aria-describedby"],o=e["aria-label"],u=e.autoFocus,s=e.autoWidth,c=e.children,g=e.className,d=e.defaultOpen,p=e.defaultValue,h=e.disabled,f=e.displayEmpty,C=e.IconComponent,I=e.inputRef,m=e.labelId,v=e.MenuProps,b=void 0===v?{}:v,A=e.multiple,y=e.name,k=e.onBlur,Z=e.onChange,S=e.onClose,w=e.onFocus,B=e.onOpen,x=e.open,G=e.readOnly,R=e.renderValue,W=e.SelectDisplayProps,V=void 0===W?{}:W,F=e.tabIndex,N=e.value,E=e.variant,D=void 0===E?"standard":E,X=(0,ge.Z)(e,IC),J=(0,pC.Z)({controlled:N,default:p,name:"Select"}),H=(0,i.Z)(J,2),Y=H[0],T=H[1],M=(0,pC.Z)({controlled:x,default:d,name:"Select"}),K=(0,i.Z)(M,2),P=K[0],z=K[1],L=n.useRef(null),_=n.useRef(null),O=n.useState(null),U=(0,i.Z)(O,2),j=U[0],Q=U[1],q=n.useRef(null!=x).current,$=n.useState(),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],re=(0,me.Z)(t,I),ae=n.useCallback((function(e){_.current=e,e&&Q(e)}),[]);n.useImperativeHandle(re,(function(){return{focus:function(){_.current.focus()},node:L.current,value:Y}}),[Y]),n.useEffect((function(){d&&P&&j&&!q&&(ne(s?null:j.clientWidth),_.current.focus())}),[j,s]),n.useEffect((function(){u&&_.current.focus()}),[u]),n.useEffect((function(){if(m){var e=(0,Gh.Z)(_.current).getElementById(m);if(e){var t=function(){getSelection().isCollapsed&&_.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[m]);var oe,ie,le=function(e,t){e?B&&B(t):S&&S(t),q||(ne(s?null:j.clientWidth),z(e))},ue=n.Children.toArray(c),se=function(e){return function(t){var n;if(t.currentTarget.hasAttribute("tabindex")){if(A){n=Array.isArray(Y)?Y.slice():[];var r=Y.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),Y!==n&&(T(n),Z)){var a=t.nativeEvent||t,o=new a.constructor(a.type,a);Object.defineProperty(o,"target",{writable:!0,value:{value:n,name:y}}),Z(o,e)}A||le(!1,t)}}},ce=null!==j&&P;delete X["aria-invalid"];var pe=[],fe=!1;(Qs({value:Y})||f)&&(R?oe=R(Y):fe=!0);var Ce=ue.map((function(e){if(!n.isValidElement(e))return null;var t;if(A){if(!Array.isArray(Y))throw new Error((0,Fs.Z)(2));t=Y.some((function(t){return AC(t,e.props.value)})),t&&fe&&pe.push(e.props.children)}else(t=AC(Y,e.props.value))&&fe&&(ie=e.props.children);return t&&!0,n.cloneElement(e,{"aria-selected":t?"true":"false",onClick:se(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));fe&&(oe=A?0===pe.length?null:pe.reduce((function(e,t,n){return e.push(t),n<pe.length-1&&e.push(", "),e}),[]):ie);var Ie,ve=te;!s&&q&&j&&(ve=j.clientWidth),Ie="undefined"!==typeof F?F:h?null:0;var be=V.id||(y?"mui-component-select-".concat(y):void 0),Ae=(0,l.Z)({},e,{variant:D,value:Y,open:ce}),ye=function(e){var t=e.classes,n=e.variant,r=e.disabled,a=e.multiple,o=e.open,i={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon","icon".concat((0,lt.Z)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,he.Z)(i,hC,t)}(Ae);return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(mC,(0,l.Z)({ref:ae,tabIndex:Ie,role:"button","aria-disabled":h?"true":void 0,"aria-expanded":ce?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[m,be].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:function(e){if(!G){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),le(!0,e))}},onMouseDown:h||G?null:function(e){0===e.button&&(e.preventDefault(),_.current.focus(),le(!0,e))},onBlur:function(e){!ce&&k&&(Object.defineProperty(e,"target",{writable:!0,value:{value:Y,name:y}}),k(e))},onFocus:w},V,{ownerState:Ae,className:(0,de.Z)(ye.select,g,V.className),id:be,children:yC(oe)?fC||(fC=(0,a.jsx)("span",{className:"notranslate",children:"\u200b"})):oe})),(0,a.jsx)(bC,(0,l.Z)({value:Array.isArray(Y)?Y.join(","):Y,name:y,ref:L,"aria-hidden":!0,onChange:function(e){var t=ue.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=ue[t];T(n.props.value),Z&&Z(e,n)}},tabIndex:-1,disabled:h,className:ye.nativeInput,autoFocus:u,ownerState:Ae},X)),(0,a.jsx)(vC,{as:C,className:ye.icon,ownerState:Ae}),(0,a.jsx)(aC,(0,l.Z)({id:"menu-".concat(y||""),anchorEl:j,open:ce,onClose:function(e){le(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},b,{MenuListProps:(0,l.Z)({"aria-labelledby":m,role:"listbox",disableListWrap:!0},b.MenuListProps),PaperProps:(0,l.Z)({},b.PaperProps,{style:(0,l.Z)({minWidth:ve},null!=b.PaperProps?b.PaperProps.style:null)}),children:Ce}))]})})),wC=SC,BC=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],xC={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return(0,Ce.FO)(e)&&"variant"!==e},slot:"Root"},GC=(0,Ce.ZP)(Pp,xC)(""),RC=(0,Ce.ZP)(oh,xC)(""),WC=(0,Ce.ZP)(jp,xC)(""),VC=n.forwardRef((function(e,t){var r=(0,Ie.Z)({name:"MuiSelect",props:e}),o=r.autoWidth,i=void 0!==o&&o,u=r.children,s=r.classes,c=void 0===s?{}:s,g=r.className,d=r.defaultOpen,p=void 0!==d&&d,h=r.displayEmpty,f=void 0!==h&&h,C=r.IconComponent,I=void 0===C?bp:C,m=r.id,v=r.input,b=r.inputProps,A=r.label,y=r.labelId,k=r.MenuProps,Z=r.multiple,S=void 0!==Z&&Z,w=r.native,B=void 0!==w&&w,x=r.onClose,G=r.onOpen,R=r.open,W=r.renderValue,V=r.SelectDisplayProps,F=r.variant,N=void 0===F?"outlined":F,E=(0,ge.Z)(r,BC),D=B?dC:wC,X=Ps({props:r,muiFormControl:Ls(),states:["variant"]}).variant||N,J=v||{standard:kC||(kC=(0,a.jsx)(GC,{})),outlined:(0,a.jsx)(RC,{label:A}),filled:ZC||(ZC=(0,a.jsx)(WC,{}))}[X],H=function(e){return e.classes}((0,l.Z)({},r,{variant:X,classes:c})),Y=(0,me.Z)(t,J.ref);return n.cloneElement(J,(0,l.Z)({inputComponent:D,inputProps:(0,l.Z)({children:u,IconComponent:I,variant:X,type:void 0,multiple:S},B?{id:m}:{autoWidth:i,defaultOpen:p,displayEmpty:f,labelId:y,MenuProps:k,onClose:x,onOpen:G,open:R,renderValue:W,SelectDisplayProps:(0,l.Z)({id:m},V)},b,{classes:b?(0,Hp.Z)(H,b.classes):H},v?v.props.inputProps:{})},S&&B&&"outlined"===X?{notched:!0}:{},{ref:Y,className:(0,de.Z)(J.props.className,g),variant:X},E))}));VC.muiName="Select";var FC=VC;function NC(e){return(0,$e.Z)("MuiTextField",e)}(0,Ee.Z)("MuiTextField",["root"]);var EC=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],DC={standard:Pp,filled:jp,outlined:oh},XC=(0,Ce.ZP)(yh,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),JC=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiTextField"}),r=n.autoComplete,o=n.autoFocus,i=void 0!==o&&o,u=n.children,s=n.className,c=n.color,g=void 0===c?"primary":c,d=n.defaultValue,p=n.disabled,h=void 0!==p&&p,f=n.error,C=void 0!==f&&f,I=n.FormHelperTextProps,m=n.fullWidth,v=void 0!==m&&m,b=n.helperText,A=n.id,y=n.InputLabelProps,k=n.inputProps,Z=n.InputProps,S=n.inputRef,w=n.label,B=n.maxRows,x=n.minRows,G=n.multiline,R=void 0!==G&&G,W=n.name,V=n.onBlur,F=n.onChange,N=n.onFocus,E=n.placeholder,D=n.required,X=void 0!==D&&D,J=n.rows,H=n.select,Y=void 0!==H&&H,T=n.SelectProps,M=n.type,K=n.value,P=n.variant,z=void 0===P?"outlined":P,L=(0,ge.Z)(n,EC),_=(0,l.Z)({},n,{autoFocus:i,color:g,disabled:h,error:C,fullWidth:v,multiline:R,required:X,select:Y,variant:z}),O=function(e){var t=e.classes;return(0,he.Z)({root:["root"]},NC,t)}(_);var U={};"outlined"===z&&(y&&"undefined"!==typeof y.shrink&&(U.notched=y.shrink),U.label=w),Y&&(T&&T.native||(U.id=void 0),U["aria-describedby"]=void 0);var j=(0,ag.Z)(A),Q=b&&j?"".concat(j,"-helper-text"):void 0,q=w&&j?"".concat(j,"-label"):void 0,$=DC[z],ee=(0,a.jsx)($,(0,l.Z)({"aria-describedby":Q,autoComplete:r,autoFocus:i,defaultValue:d,fullWidth:v,multiline:R,name:W,rows:J,maxRows:B,minRows:x,type:M,value:K,id:j,inputRef:S,onBlur:V,onChange:F,onFocus:N,placeholder:E,inputProps:k},U,Z));return(0,a.jsxs)(XC,(0,l.Z)({className:(0,de.Z)(O.root,s),disabled:h,error:C,fullWidth:v,ref:t,required:X,color:g,variant:z,ownerState:_},L,{children:[null!=w&&""!==w&&(0,a.jsx)(Ch,(0,l.Z)({htmlFor:j,id:q},y,{children:w})),Y?(0,a.jsx)(FC,(0,l.Z)({"aria-describedby":Q,id:j,labelId:q,value:K,input:ee},T,{children:u})):ee,b&&(0,a.jsx)(xh,(0,l.Z)({id:Q},I,{children:b}))]}))})),HC=JC,YC=["item","applyValue","type","apiRef","focusElementRef"];function TC(e){var t=e.item,r=e.applyValue,o=e.type,u=e.apiRef,s=e.focusElementRef,c=(0,ge.Z)(e,YC),g=n.useState(t.value||[]),d=(0,i.Z)(g,2),p=d[0],h=d[1],f=(0,Gc.Z)();n.useEffect((function(){var e,n=null!=(e=t.value)?e:[];h(n.map(String))}),[t.value]);var C=n.useCallback((function(e,n){h(n.map(String)),r((0,l.Z)({},t,{value:(0,Ae.Z)(n)}))}),[r,t]);return(0,a.jsx)(Jp,(0,l.Z)({multiple:!0,freeSolo:!0,limitTags:1,options:[],filterOptions:function(e,t){var n=t.inputValue;return null==n||""===n?[]:[n]},id:f,value:p,onChange:C,renderTags:function(e,t){return e.map((function(e,n){return(0,a.jsx)(dp,(0,l.Z)({variant:"outlined",size:"small",label:e},t({index:n})))}))},renderInput:function(e){return(0,a.jsx)(HC,(0,l.Z)({},e,{label:u.current.getLocaleText("filterPanelInputLabel"),placeholder:u.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:(0,l.Z)({},e.InputLabelProps,{shrink:!0}),inputRef:s,type:o||"text",variant:"standard"}))}},c))}var MC={width:100,minWidth:50,maxWidth:1/0,hide:!1,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,editable:!1,sortComparator:function(e,t){var n=eg(e,t);return null!==n?n:"string"===typeof e?tg.compare(e.toString(),t.toString()):e-t},type:"string",align:"left",filterOperators:[{value:"contains",getApplyFilterFn:function(e){if(!e.value)return null;var t=new RegExp($u(e.value),"i");return function(e){var n=e.value;return null!=n&&t.test(n.toString())}},InputComponent:Lc},{value:"equals",getApplyFilterFn:function(e){if(!e.value)return null;var t=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return function(n){var r=n.value;return null!=r&&0===t.compare(e.value,r.toString())}},InputComponent:Lc},{value:"startsWith",getApplyFilterFn:function(e){if(!e.value)return null;var t=new RegExp("^".concat($u(e.value),".*$"),"i");return function(e){var n=e.value;return null!=n&&t.test(n.toString())}},InputComponent:Lc},{value:"endsWith",getApplyFilterFn:function(e){if(!e.value)return null;var t=new RegExp(".*".concat($u(e.value),"$"),"i");return function(e){var n=e.value;return null!=n&&t.test(n.toString())}},InputComponent:Lc},{value:"isEmpty",getApplyFilterFn:function(){return function(e){var t=e.value;return""===t||null==t}}},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){var t=e.value;return""!==t&&null!=t}}},{value:"isAnyOf",getApplyFilterFn:function(e){if(!Array.isArray(e.value)||0===e.value.length)return null;var t=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return function(n){var r=n.value;return null!=r&&e.value.some((function(e){return 0===t.compare(e,r.toString()||"")}))}},InputComponent:TC}],renderEditCell:function(e){return(0,a.jsx)(Uc,(0,l.Z)({},e))}},KC=function(e){return null==e?null:Number(e)},PC=function(){return[{label:"=",value:"=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return KC(n)===e.value}},InputComponent:Lc,InputComponentProps:{type:"number"}},{label:"!=",value:"!=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return KC(n)!==e.value}},InputComponent:Lc,InputComponentProps:{type:"number"}},{label:">",value:">",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&KC(n)>e.value}},InputComponent:Lc,InputComponentProps:{type:"number"}},{label:">=",value:">=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&KC(n)>=e.value}},InputComponent:Lc,InputComponentProps:{type:"number"}},{label:"<",value:"<",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&KC(n)<e.value}},InputComponent:Lc,InputComponentProps:{type:"number"}},{label:"<=",value:"<=",getApplyFilterFn:function(e){return null==e.value||Number.isNaN(e.value)?null:function(t){var n=t.value;return null!=n&&KC(n)<=e.value}},InputComponent:Lc,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:function(){return function(e){return null==e.value}}},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){return null!=e.value}}},{value:"isAnyOf",getApplyFilterFn:function(e){return Array.isArray(e.value)&&0!==e.value.length?function(t){var n=t.value;return null!=n&&e.value.includes(Number(n))}:null},InputComponent:TC,InputComponentProps:{type:"number"}}]},zC=(Bl(PC),(0,l.Z)({},MC,{type:"number",align:"right",headerAlign:"right",sortComparator:ng,valueParser:function(e){return""===e?null:Number(e)},valueFormatter:function(e){var t=e.value;return t&&function(e){return"number"===typeof e}(t)&&t.toLocaleString()||t},filterOperators:PC()})),LC=["item","applyValue","type","apiRef","focusElementRef","InputProps"];function _C(e){var t,r,o=e.item,u=e.applyValue,s=e.type,c=e.apiRef,g=e.focusElementRef,d=e.InputProps,p=(0,ge.Z)(e,LC),h=n.useRef(),f=n.useState(null!=(t=o.value)?t:""),C=(0,i.Z)(f,2),I=C[0],m=C[1],v=n.useState(!1),b=(0,i.Z)(v,2),A=b[0],y=b[1],k=(0,Gc.Z)(),Z=zl(),S=n.useCallback((function(e){var t=e.target.value;clearTimeout(h.current),m(String(t)),y(!0),h.current=setTimeout((function(){u((0,l.Z)({},o,{value:t})),y(!1)}),500)}),[u,o]);return n.useEffect((function(){return function(){clearTimeout(h.current)}}),[]),n.useEffect((function(){var e,t=null!=(e=o.value)?e:"";m(String(t))}),[o.value]),(0,a.jsx)(Z.components.BaseTextField,(0,l.Z)({id:k,label:c.current.getLocaleText("filterPanelInputLabel"),placeholder:c.current.getLocaleText("filterPanelInputPlaceholder"),value:I,onChange:S,type:s||"text",variant:"standard",InputLabelProps:{shrink:!0},inputRef:g,InputProps:(0,l.Z)({},A?{endAdornment:(0,a.jsx)(Zc,{})}:{},d,{inputProps:(0,l.Z)({max:"datetime-local"===s?"9999-12-31T23:59":"9999-12-31"},null==d?void 0:d.inputProps)})},p,null==(r=Z.componentsProps)?void 0:r.baseTextField))}var OC=/(\d+)-(\d+)-(\d+)/,UC=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function jC(e,t,n,r){if(!e.value)return null;var a=e.value.match(n?UC:OC).slice(1).map(Number),o=(0,i.Z)(a,5),l=o[0],u=o[1],s=o[2],c=o[3],g=o[4],d=new Date(l,u-1,s,c||0,g||0).getTime();return function(e){var a=e.value;if(!a)return!1;var o=a instanceof Date?a:new Date(a.toString());if(r)return t(o.getTime(),d);var i=(a instanceof Date?new Date(o):o).setHours(n?o.getHours():0,n?o.getMinutes():0,0,0);return t(i,d)}}var QC=function(e){return[{value:"is",getApplyFilterFn:function(t){return jC(t,(function(e,t){return e===t}),e)},InputComponent:_C,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:function(t){return jC(t,(function(e,t){return e!==t}),e)},InputComponent:_C,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:function(t){return jC(t,(function(e,t){return e>t}),e)},InputComponent:_C,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:function(t){return jC(t,(function(e,t){return e>=t}),e)},InputComponent:_C,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:function(t){return jC(t,(function(e,t){return e<t}),e,!e)},InputComponent:_C,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:function(t){return jC(t,(function(e,t){return e<=t}),e)},InputComponent:_C,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:function(){return function(e){return null==e.value}}},{value:"isNotEmpty",getApplyFilterFn:function(){return function(e){return null!=e.value}}}]},qC=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","getValue","inputProps","isValidating","isProcessingProps"];function $C(e){var t=e.id,r=e.value,o=e.api,u=e.field,s=e.colDef,c=e.hasFocus,g=e.inputProps,d=(0,ge.Z)(e,qC),p="dateTime"===s.type,h=n.useRef(),f=n.useMemo((function(){var e,t;null==(e=null==r?null:r instanceof Date?r:new Date((null!=r?r:"").toString()))||Number.isNaN(e.getTime())?t="":t=new Date(e.getTime()-60*e.getTimezoneOffset()*1e3).toISOString().substr(0,p?16:10);return{parsed:e,formatted:t}}),[r,p]),C=n.useState(f),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=function(e){var t=e.classes;return(0,he.Z)({root:["editInputCell"]},Il,t)}({classes:zl().classes}),A=n.useCallback((function(e){var n,r=e.target.value;if(""===r)n=null;else{var a=r.split("T"),l=(0,i.Z)(a,2),s=l[0],c=l[1],g=s.split("-"),d=(0,i.Z)(g,3),p=d[0],h=d[1],f=d[2];if((n=new Date).setFullYear(p,Number(h)-1,f),n.setHours(0,0,0,0),c){var C=c.split(":"),I=(0,i.Z)(C,2),m=I[0],b=I[1];n.setHours(Number(m),Number(b),0,0)}}v({parsed:n,formatted:r}),o.setEditCellValue({id:t,field:u,value:n},e)}),[o,u,t]);return n.useEffect((function(){v((function(e){var t,n;return f.parsed!==e.parsed&&(null==(t=f.parsed)?void 0:t.getTime())!==(null==(n=e.parsed)?void 0:n.getTime())?f:e}))}),[f]),(0,Cl.Z)((function(){c&&h.current.focus()}),[c]),(0,a.jsx)(lc,(0,l.Z)({inputRef:h,fullWidth:!0,className:b.root,type:p?"datetime-local":"date",inputProps:(0,l.Z)({max:p?"9999-12-31T23:59":"9999-12-31"},g),value:m.formatted,onChange:A},d))}var eI=function(e){return(0,a.jsx)($C,(0,l.Z)({},e))};var tI=(0,l.Z)({},MC,{type:"date",sortComparator:rg,valueFormatter:function(e){var t=e.value;return t instanceof Date?t.toLocaleDateString():null!=t?t:""},filterOperators:QC(),renderEditCell:eI}),nI=(0,l.Z)({},MC,{type:"dateTime",sortComparator:rg,valueFormatter:function(e){var t=e.value;return t instanceof Date?t.toLocaleString():null!=t?t:""},filterOperators:QC(!0),renderEditCell:eI}),rI=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex","getValue"],aI=n.memo((function(e){var t=e.value,r=e.api,o=(0,ge.Z)(e,rI),i=zl(),u=function(e){var t=e.classes;return(0,he.Z)({root:["booleanCell"]},Il,t)}({classes:i.classes}),s=n.useMemo((function(){return t?i.components.BooleanCellTrueIcon:i.components.BooleanCellFalseIcon}),[i.components.BooleanCellFalseIcon,i.components.BooleanCellTrueIcon,t]);return(0,a.jsx)(s,(0,l.Z)({fontSize:"small",className:u.root,titleAccess:r.getLocaleText(t?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":Boolean(t)},o))})),oI=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error"];function iI(e){var t,r=e.id,o=e.value,u=e.api,s=e.field,c=e.className,g=e.hasFocus,d=(0,ge.Z)(e,oI),p=n.useRef(null),h=(0,Gc.Z)(),f=n.useState(o),C=(0,i.Z)(f,2),I=C[0],m=C[1],v=zl(),b=function(e){var t=e.classes;return(0,he.Z)({root:["editBooleanCell"]},Il,t)}({classes:v.classes}),A=n.useCallback((function(e){var t=e.target.checked;m(t),u.setEditCellValue({id:r,field:s,value:t},e)}),[u,s,r]);return n.useEffect((function(){m(o)}),[o]),(0,Cl.Z)((function(){g&&p.current.focus()}),[g]),(0,a.jsx)("label",(0,l.Z)({htmlFor:h,className:(0,de.Z)(b.root,c)},d,{children:(0,a.jsx)(v.components.BaseCheckbox,(0,l.Z)({id:h,inputRef:p,checked:Boolean(I),onChange:A,size:"small"},null==(t=v.componentsProps)?void 0:t.baseCheckbox))}))}var lI=["item","applyValue","apiRef","focusElementRef"];function uI(e){var t,r,o,u,s=e.item,c=e.applyValue,g=e.apiRef,d=e.focusElementRef,p=(0,ge.Z)(e,lI),h=n.useState(s.value||""),f=(0,i.Z)(h,2),C=f[0],I=f[1],m=zl(),v=null==(r=((null==(t=m.componentsProps)?void 0:t.baseSelect)||{}).native)||r,b=v?"option":Tc,A=n.useCallback((function(e){var t=e.target.value;I(t),c((0,l.Z)({},s,{value:t}))}),[c,s]);return n.useEffect((function(){I(s.value||"")}),[s.value]),(0,a.jsxs)(m.components.BaseTextField,(0,l.Z)({label:g.current.getLocaleText("filterPanelInputLabel"),value:C,onChange:A,variant:"standard",select:!0,SelectProps:(0,l.Z)({native:v,displayEmpty:!0},null==(o=m.componentsProps)?void 0:o.baseSelect),InputLabelProps:{shrink:!0},inputRef:d},p,null==(u=m.componentsProps)?void 0:u.baseTextField,{children:[(0,a.jsx)(b,{value:"",children:g.current.getLocaleText("filterValueAny")}),(0,a.jsx)(b,{value:"true",children:g.current.getLocaleText("filterValueTrue")}),(0,a.jsx)(b,{value:"false",children:g.current.getLocaleText("filterValueFalse")})]}))}var sI,cI,gI,dI=(0,l.Z)({},MC,{type:"boolean",align:"center",headerAlign:"center",renderCell:function(e){return e.rowNode.isAutoGenerated?"":(0,a.jsx)(aI,(0,l.Z)({},e))},renderEditCell:function(e){return(0,a.jsx)(iI,(0,l.Z)({},e))},sortComparator:ng,valueFormatter:function(e){var t=e.value,n=e.api;return t?n.getLocaleText("booleanCellTrueLabel"):n.getLocaleText("booleanCellFalseLabel")},filterOperators:[{value:"is",getApplyFilterFn:function(e){if(!e.value)return null;var t="true"===e.value;return function(e){var n=e.value;return Boolean(n)===t}},InputComponent:uI}]}),pI=function(e){return"Escape"===e},hI=function(e){return"Enter"===e},fI=function(e){return"Tab"===e},CI=function(e){return" "===e},II=function(e){return"Delete"===e||"Backspace"===e},mI=/^((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])|(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])|(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])|(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])|[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA])|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]))$/i,vI=function(e){return mI.test(e)},bI=["Enter","Escape","Tab"],AI=["Enter","Tab"],yI=function(e){return hI(e)||II(e)||vI(e)},kI=function(e){return bI.indexOf(e)>-1},ZI=function(e){return AI.indexOf(e)>-1},SI=function(e){return function(e){return"Home"===e||"End"===e}(e)||function(e){return 0===e.indexOf("Arrow")}(e)||function(e){return 0===e.indexOf("Page")}(e)||CI(e)},wI=function(e){return!!e.key},BI=function(e){return fI(e)||pI(e)};!function(e){e.Cell="cell",e.Row="row"}(sI||(sI={})),function(e){e.Edit="edit",e.View="view"}(cI||(cI={})),function(e){e.Edit="edit",e.View="view"}(gI||(gI={}));var xI=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","getValue","hasFocus","isValidating","isProcessingProps","error"];function GI(e){var t,r,o,u,s=e.id,c=e.value,g=e.api,d=e.field,p=e.row,h=e.colDef,f=e.hasFocus,C=e.error,I=(0,ge.Z)(e,xI),m=n.useRef(),v=n.useRef(),b=zl(),A=n.useState("cell"===b.editMode),y=(0,i.Z)(A,2),k=y[0],Z=y[1],S=null!=(r=((null==(t=b.componentsProps)?void 0:t.baseSelect)||{}).native)&&r;u="function"===typeof h.valueOptions?h.valueOptions({id:s,row:p,field:d}):h.valueOptions,h.valueFormatter&&(u=u.map((function(e){if("object"===typeof e)return e;var t={field:d,api:g,value:e};return{value:e,label:String(h.valueFormatter(t))}})));var w=function(){var e=j(q().mark((function e(t){var n,r,a,o,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!1),r=t.target,a=Kc(r.value,u),e.next=5,g.setEditCellValue({id:s,field:d,value:a},t);case 5:if(o=e.sent,null==(n=b.experimentalFeatures)||!n.newEditingApi){e.next=8;break}return e.abrupt("return");case 8:if(b.editMode!==sI.Row&&!1!==o){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Promise.resolve(g.commitCellChange({id:s,field:d},t));case 12:e.sent&&(g.setCellMode(s,d,"view"),t.key&&(i=g.getCellParams(s,d),g.publishEvent(fu.cellNavigationKeyDown,i,t)));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Cl.Z)((function(){f&&v.current.focus()}),[f]),(0,a.jsx)(b.components.BaseSelect,(0,l.Z)({ref:m,inputRef:v,value:c,onChange:w,open:k,onOpen:function(){Z(!0)},MenuProps:{onClose:function(e,t){var n;b.editMode!==sI.Row?("backdropClick"===t||pI(e.key))&&(null!=(n=b.experimentalFeatures)&&n.newEditingApi?g.stopCellEditMode({id:s,field:d,ignoreModifications:!0}):g.setCellMode(s,d,"view")):Z(!1)}},error:C,native:S,fullWidth:!0},I,null==(o=b.componentsProps)?void 0:o.baseSelect,{children:u.map((function(e){return function(e,t){var n="object"===typeof e,r=n?e.value:e,o=n?e.value:e,i=n?e.label:e;return(0,a.jsx)(t,{value:o,children:i},r)}(e,S?"option":Tc)}))}))}var RI=["item","applyValue","type","apiRef","focusElementRef"],WI=function(e,t,n){var r=e.valueOptions,o=e.valueFormatter,i=e.field;return[""].concat("function"===typeof r?(0,Ae.Z)(r({field:i})):(0,Ae.Z)(r||[])).map((function(e){var r="object"===typeof e,l=r?e.value:e,u=r?e.value:e,s=o&&""!==e?o({value:e,field:i,api:t}):e,c=r?e.label:s;return(0,a.jsx)(n,{value:u,children:c},l)}))};function VI(e){var t,r,o,u,s,c=e.item,g=e.applyValue,d=e.type,p=e.apiRef,h=e.focusElementRef,f=(0,ge.Z)(e,RI),C=n.useState(null!=(t=c.value)?t:""),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,Gc.Z)(),A=zl(),y=null==(o=((null==(r=A.componentsProps)?void 0:r.baseSelect)||{}).native)||o,k=c.columnField?p.current.getColumn(c.columnField):null,Z=n.useMemo((function(){return"function"===typeof k.valueOptions?k.valueOptions({field:k.field}):k.valueOptions}),[k]),S=n.useCallback((function(e){var t=e.target.value;t=Kc(t,Z),v(String(t)),g((0,l.Z)({},c,{value:t}))}),[g,c,Z]);return n.useEffect((function(){var e,t;if(void 0!==Z){if((t=Kc(c.value,Z))!==c.value)return void g((0,l.Z)({},c,{value:t}))}else t=c.value;t=null!=(e=t)?e:"",v(String(t))}),[c,Z,g]),(0,a.jsx)(A.components.BaseTextField,(0,l.Z)({id:b,label:p.current.getLocaleText("filterPanelInputLabel"),placeholder:p.current.getLocaleText("filterPanelInputPlaceholder"),value:m,onChange:S,type:d||"text",variant:"standard",InputLabelProps:{shrink:!0},inputRef:h,select:!0,SelectProps:(0,l.Z)({native:y},null==(u=A.componentsProps)?void 0:u.baseSelect)},f,null==(s=A.componentsProps)?void 0:s.baseTextField,{children:WI(p.current.getColumn(c.columnField),p.current,y?"option":Tc)}))}var FI=["item","applyValue","type","apiRef","focusElementRef"],NI=function(e,t){return Mc(e)===Mc(t)},EI=sg();function DI(e){var t=e.item,r=e.applyValue,o=e.apiRef,i=e.focusElementRef,u=(0,ge.Z)(e,FI),s=(0,Gc.Z)(),c=t.columnField?o.current.getColumn(t.columnField):null,g=n.useMemo((function(){return"function"===typeof(null==c?void 0:c.valueOptions)?c.valueOptions({field:c.field}):null==c?void 0:c.valueOptions}),[c]),d=n.useMemo((function(){return null==g?void 0:g.map(Mc)}),[g]),p=o.current.getColumn(t.columnField),h=p.valueFormatter,f=p.field,C=function(e){return"object"===typeof e?e.label:h&&""!==e?h({value:e,field:f,api:o.current}):e},I=n.useMemo((function(){return Array.isArray(t.value)?void 0!==g?t.value.map((function(e){var t=Mc(e);return(null==d?void 0:d.findIndex((function(e){return e===t})))||0})).filter((function(e){return e>=0})).map((function(e){return g[e]})):t.value:[]}),[t.value,g,d]);n.useEffect((function(){Array.isArray(t.value)&&I.length===t.value.length||r((0,l.Z)({},t,{value:I.map(Mc)}))}),[t,I,r]);var m=n.useCallback((function(e,n){r((0,l.Z)({},t,{value:(0,Ae.Z)(n.map(Mc))}))}),[r,t]);return(0,a.jsx)(Jp,(0,l.Z)({multiple:!0,freeSolo:!1,limitTags:1,options:g,isOptionEqualToValue:NI,filterOptions:EI,id:s,value:I,onChange:m,renderTags:function(e,t){return e.map((function(e,n){return(0,a.jsx)(dp,(0,l.Z)({variant:"outlined",size:"small",label:C(e)},t({index:n})))}))},renderInput:function(e){return(0,a.jsx)(HC,(0,l.Z)({},e,{label:o.current.getLocaleText("filterPanelInputLabel"),placeholder:o.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:(0,l.Z)({},e.InputLabelProps,{shrink:!0}),inputRef:i,type:"singleSelect",variant:"standard"}))}},u))}var XI=function(e){return null==e||"object"!==typeof e?e:e.value},JI=(0,l.Z)({},MC,{type:"singleSelect",renderEditCell:function(e){return(0,a.jsx)(GI,(0,l.Z)({},e))},filterOperators:[{value:"is",getApplyFilterFn:function(e){return null==e.value||""===e.value?null:function(t){var n=t.value;return XI(n)===XI(e.value)}},InputComponent:VI},{value:"not",getApplyFilterFn:function(e){return null==e.value||""===e.value?null:function(t){var n=t.value;return XI(n)!==XI(e.value)}},InputComponent:VI},{value:"isAnyOf",getApplyFilterFn:function(e){if(!Array.isArray(e.value)||0===e.value.length)return null;var t=e.value.map(XI);return function(e){var n=e.value;return t.includes(XI(n))}},InputComponent:DI}]});function HI(e){return e.substring(2).toLowerCase()}var YI=function(e){var t=e.children,r=e.disableReactTree,o=void 0!==r&&r,i=e.mouseEvent,l=void 0===i?"onClick":i,u=e.onClickAway,s=e.touchEvent,c=void 0===s?"onTouchEnd":s,g=n.useRef(!1),d=n.useRef(null),p=n.useRef(!1),h=n.useRef(!1);n.useEffect((function(){return setTimeout((function(){p.current=!0}),0),function(){p.current=!1}}),[]);var f=(0,Ns.Z)(t.ref,d),C=(0,ig.Z)((function(e){var t=h.current;h.current=!1;var n=(0,pg.Z)(d.current);!p.current||!d.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n)||(g.current?g.current=!1:(e.composedPath?e.composedPath().indexOf(d.current)>-1:!n.documentElement.contains(e.target)||d.current.contains(e.target))||!o&&t||u(e))})),I=function(e){return function(n){h.current=!0;var r=t.props[e];r&&r(n)}},m={ref:f};return!1!==c&&(m[c]=I(c)),n.useEffect((function(){if(!1!==c){var e=HI(c),t=(0,pg.Z)(d.current),n=function(){g.current=!0};return t.addEventListener(e,C),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,C),t.removeEventListener("touchmove",n)}}}),[C,c]),!1!==l&&(m[l]=I(l)),n.useEffect((function(){if(!1!==l){var e=HI(l),t=(0,pg.Z)(d.current);return t.addEventListener(e,C),function(){t.removeEventListener(e,C)}}}),[C,l]),(0,a.jsx)(n.Fragment,{children:n.cloneElement(t,m)})},TI=["open","target","onClickAway","children","position","className","onExited"],MI=(0,Ce.ZP)(Yd,{name:"MuiDataGrid",slot:"Menu",overridesResolver:function(e,t){return t.menu}})((function(e){var t=e.theme;return(0,le.Z)({zIndex:t.zIndex.modal},"& .".concat(ml.menuList),{outline:0})})),KI={"bottom-start":"top left","bottom-end":"top right"},PI=function(e){var t,r=e.open,o=e.target,i=e.onClickAway,u=e.children,s=e.position,c=e.className,g=e.onExited,d=(0,ge.Z)(e,TI),p=n.useRef(o),h=n.useRef(r),f=zl(),C=function(e){var t=e.classes;return(0,he.Z)({root:["menu"]},Il,t)}({classes:f.classes});n.useEffect((function(){h.current&&p.current&&p.current.focus(),h.current=r,p.current=o}),[r,o]);return(0,a.jsx)(MI,(0,l.Z)({as:f.components.BasePopper,className:(0,de.Z)(c,C.root),open:r,anchorEl:o,transition:!0,placement:s},d,null==(t=f.componentsProps)?void 0:t.basePopper,{children:function(e){var t,n=e.TransitionProps,r=e.placement;return(0,a.jsx)(YI,{onClickAway:i,mouseEvent:"onMouseDown",children:(0,a.jsx)(cf,(0,l.Z)({},n,{style:{transformOrigin:KI[r]},onExited:(t=null==n?void 0:n.onExited,function(e){t&&t(),g&&g(e)}),children:(0,a.jsx)(Qd,{children:u})}))})}}))},zI=["colDef","id","api","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","getValue","tabIndex","position","focusElementRef"],LI=function(e){var t=e.colDef,r=e.id,o=e.hasFocus,u=e.tabIndex,s=e.position,c=void 0===s?"bottom-end":s,g=e.focusElementRef,d=(0,ge.Z)(e,zI),p=n.useState(-1),h=(0,i.Z)(p,2),f=h[0],C=h[1],I=n.useState(!1),m=(0,i.Z)(I,2),v=m[0],b=m[1],A=Kl(),y=n.useRef(null),k=n.useRef(null),Z=n.useRef(!1),S=n.useRef({}),w=(0,Gc.Z)(),B=(0,Gc.Z)(),x=zl();if(n.useLayoutEffect((function(){o||Object.entries(S.current).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];null==r||r.stop({},(function(){delete S.current[n]}))}))}),[o]),n.useEffect((function(){var e;f>=0&&(null==(e=y.current)?void 0:e.children[f]).focus()}),[f]),n.useEffect((function(){o||(C(-1),Z.current=!1)}),[o]),n.useImperativeHandle(g,(function(){return{focus:function(){Z.current||C(0)}}}),[]),!function(e){return"function"===typeof e.getActions}(t))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");var G=t.getActions(A.current.getRowParams(r)),R=G.filter((function(e){return!e.props.showInMenu})),W=G.filter((function(e){return e.props.showInMenu})),V=R.length+(W.length?1:0),F=function(){b(!1)},N=function(e){return function(t){S.current[e]=t}},E=function(e,t){return function(n){C(e),Z.current=!0,t&&t(n)}};return(0,a.jsxs)("div",(0,l.Z)({role:"menu",ref:y,tabIndex:-1,className:ml.actionsCell,onKeyDown:function(e){if(!(V<=1)){var t=f;"ArrowRight"===e.key?t+=1:"ArrowLeft"===e.key&&(t-=1),t<0||t>=V||t!==f&&(e.preventDefault(),e.stopPropagation(),C(t))}}},d,{children:[R.map((function(e,t){return n.cloneElement(e,{key:t,touchRippleRef:N(t),onClick:E(t,e.props.onClick),tabIndex:f===t?u:-1})})),W.length>0&&B&&(0,a.jsx)(rp,{ref:k,id:B,"aria-label":A.current.getLocaleText("actionsCellMore"),"aria-controls":w,"aria-expanded":v?"true":void 0,"aria-haspopup":"true",role:"menuitem",size:"small",onClick:function(){b(!0),C(V-1),Z.current=!0},touchRippleRef:N(B),tabIndex:f===R.length?u:-1,children:(0,a.jsx)(x.components.MoreActionsIcon,{fontSize:"small"})}),W.length>0&&(0,a.jsx)(PI,{onClickAway:F,onClick:F,open:v,target:k.current,position:c,children:(0,a.jsx)(Kh,{id:w,className:ml.menuList,onKeyDown:function(e){"Tab"===e.key&&e.preventDefault(),["Tab","Enter","Escape"].includes(e.key)&&F()},"aria-labelledby":B,variant:"menu",autoFocusItem:!0,children:W.map((function(e,t){return n.cloneElement(e,{key:t})}))})})]}))},_I="actions",OI=(0,l.Z)({},MC,{sortable:!1,filterable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:function(e){return(0,a.jsx)(LI,(0,l.Z)({},e))}}),UI="__default__",jI=function(){var e;return e={string:MC,number:zC,date:tI,dateTime:nI,boolean:dI,singleSelect:JI},(0,le.Z)(e,_I,OI),(0,le.Z)(e,UI,MC),e},QI=["maxWidth","minWidth","width","flex"],qI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.Z)({},jI());return Object.entries(e).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1];t[r]?t[r]=(0,l.Z)({},t[r],a):t[r]=(0,l.Z)({},t[a.extendType||UI],a)})),t};var $I,em=function(e,t){var n={},r=0,a=0,o=[];e.all.forEach((function(t){var i,u=(0,l.Z)({},e.lookup[t]);!1===e.columnVisibilityModel[t]?u.computedWidth=0:(u.flex&&u.flex>0?(r+=u.flex,i=0,o.push(u)):i=es(u.width,u.minWidth,u.maxWidth),a+=i,u.computedWidth=i);n[t]=u}));var i=Math.max(t-a,0);if(r>0&&t>0){var u=function(e){var t=e.initialFreeSpace,n=e.totalFlexUnits,r=e.flexColumns,a={all:{},frozenFields:[],freeze:function(e){var t=a.all[e];t&&!0!==t.frozen&&(a.all[e].frozen=!0,a.frozenFields.push(e))}};return function e(){if(a.frozenFields.length!==r.length){var o={min:{},max:{}},i=t,l=n,u=0;a.frozenFields.forEach((function(e){i-=a.all[e].computedWidth,l-=a.all[e].flex}));for(var s=0;s<r.length;s+=1){var c=r[s];if(!a.all[c.field]||!0!==a.all[c.field].frozen){var g=i/l*c.flex;g<c.minWidth?(u+=c.minWidth-g,g=c.minWidth,o.min[c.field]=!0):g>c.maxWidth&&(u+=c.maxWidth-g,g=c.maxWidth,o.max[c.field]=!0),a.all[c.field]={frozen:!1,computedWidth:g,flex:c.flex}}}u<0?Object.keys(o.max).forEach((function(e){a.freeze(e)})):u>0?Object.keys(o.min).forEach((function(e){a.freeze(e)})):r.forEach((function(e){var t=e.field;a.freeze(t)})),e()}}(),a.all}({initialFreeSpace:i,totalFlexUnits:r,flexColumns:o});Object.keys(u).forEach((function(e){n[e].computedWidth=u[e].computedWidth}))}return(0,l.Z)({},e,{lookup:n})},tm=function(e){var t,n,r,a,o,u=e.apiRef,s=e.columnsToUpsert,c=e.initialState,g=e.columnTypes,d=e.currentColumnVisibilityModel,p=void 0===d?Nl(u):d,h=e.shouldRegenColumnVisibilityModelFromColumns,f=e.keepOnlyColumnsToUpsert,C=void 0!==f&&f,I=!u.current.state.columns;if(I)o={all:[],lookup:{}};else{var m=Rl(u.current.state);o={all:C?[]:(0,Ae.Z)(m.all),lookup:(0,l.Z)({},m.lookup)}}var v={};C&&!I&&(v=Object.keys(o.lookup).reduce((function(e,t){return(0,l.Z)({},e,(0,le.Z)({},t,!1))}),{}));var b={};s.forEach((function(e){var t=e.field;b[t]=!0,v[t]=!0;var n=o.lookup[t];null==n?(n=(0,l.Z)({},function(e,t){return t&&e[t]?e[t]:e.__default__}(g,e.type),{field:t,hasBeenResized:!1}),o.all.push(t)):C&&o.all.push(t);var r=n.hasBeenResized;QI.forEach((function(t){void 0!==e[t]&&(r=!0,-1===e[t]&&(e[t]=1/0))})),o.lookup[t]=(0,l.Z)({},n,{hide:null!=e.hide&&e.hide},e,{hasBeenResized:r})})),C&&!I&&Object.keys(o.lookup).forEach((function(e){v[e]||delete o.lookup[e]}));var A=(0,l.Z)({},o.lookup),y=u.current.unstable_applyPipeProcessors("hydrateColumns",o),k={};if(h){var Z=!1,S=(0,l.Z)({},p);I?y.all.forEach((function(e){S[e]=!o.lookup[e].hide})):C&&Object.keys(S).forEach((function(e){y.lookup[e]||(delete S[e],Z=!0)})),y.all.forEach((function(e){if(b[e]||A[e]!==y.lookup[e]){var t=p[e];if(void 0===t)if(I)t=!0;else t=!!Rl(u.current.state).lookup[e];var n=!y.lookup[e].hide;n!==t&&(Z=!0,S[e]=n)}})),k=Z||I?S:p}else k=p;var w=function(e,t){if(!t)return e;var n=t.orderedFields,r=void 0===n?[]:n,a=t.dimensions,o=void 0===a?{}:a,u=Object.keys(o);if(0===u.length&&0===r.length)return e;for(var s={},c=[],g=0;g<r.length;g+=1){var d=r[g];e.lookup[d]&&(s[d]=!0,c.push(d))}for(var p=0===c.length?e.all:[].concat(c,(0,Ae.Z)(e.all.filter((function(e){return!s[e]})))),h=(0,l.Z)({},e.lookup),f=function(e){var t=u[e],n=(0,l.Z)({},h[t],{hasBeenResized:!0});Object.entries(o[t]).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],a=t[1];n[r]=-1===a?1/0:a})),h[t]=n},C=0;C<u.length;C+=1)f(C);return{all:p,lookup:h}}(y,c),B=(0,l.Z)({},w,{columnVisibilityModel:k});return em(B,null!=(t=null==(n=(r=u.current).getRootDimensions)||null==(a=n.call(r))?void 0:a.viewportInnerSize.width)?t:0)},nm=function(e){return function(t){return(0,l.Z)({},t,{columns:e})}};function rm(e){for(var t=e.firstColumnToRender,n=e.apiRef,r=e.firstRowToRender,a=e.lastRowToRender,o=e.visibleRows,i=t,l=r;l<a;l+=1){if(o[l]){var u=o[l].id,s=n.current.unstable_getCellColSpanInfo(u,t);s&&s.spannedByColSpan&&(i=s.leftVisibleCellIndex)}}return i}function am(e){var t=e.firstColumnIndex,n=e.minColumnIndex,r=e.columnBuffer,a=e.firstRowToRender,o=e.lastRowToRender,i=e.apiRef,l=e.visibleRows;return rm({firstColumnToRender:Math.max(t-r,n),apiRef:i,firstRowToRender:a,lastRowToRender:o,visibleRows:l})}!function(e){e.filters="filters",e.columns="columns"}($I||($I={}));var om,im=function(e,t,n){var r,a,o,i,u,s,c,g=!!t.columnVisibilityModel||!(null==(r=t.initialState)||null==(a=r.columns)||!a.columnVisibilityModel),d=qI(t.columnTypes),p=tm({apiRef:n,columnTypes:d,columnsToUpsert:t.columns,initialState:null==(o=t.initialState)?void 0:o.columns,shouldRegenColumnVisibilityModelFromColumns:!g,currentColumnVisibilityModel:null!=(i=null!=(u=t.columnVisibilityModel)?u:null==(s=t.initialState)||null==(c=s.columns)?void 0:c.columnVisibilityModel)?i:{},keepOnlyColumnsToUpsert:!0});return(0,l.Z)({},e,{columns:p})};!function(e){e.Compact="compact",e.Standard="standard",e.Comfortable="comfortable"}(om||(om={}));var lm=function(e,t,n){switch(e){case om.Compact:return{value:e,headerHeight:Math.floor(.7*t),rowHeight:Math.floor(.7*n),factor:.7};case om.Comfortable:return{value:e,headerHeight:Math.floor(1.3*t),rowHeight:Math.floor(1.3*n),factor:1.3};default:return{value:e,headerHeight:t,rowHeight:n,factor:1}}},um=function(e,t){return(0,l.Z)({},e,{density:lm(t.density,t.headerHeight,t.rowHeight)})};var sm=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","getValue","api"],cm=n.forwardRef((function(e,t){var r,o=e.field,i=e.id,u=e.value,s=e.hasFocus,c=e.tabIndex,g=(0,ge.Z)(e,sm),d=Kl(),p=zl(),h=function(e){var t=e.classes;return(0,he.Z)({root:["checkboxInput"]},Il,t)}({classes:p.classes}),f=n.useRef(null),C=n.useRef(),I=(0,me.Z)(f,t),m=d.current.getCellElement(i,o);n.useLayoutEffect((function(){0===c&&m&&(m.tabIndex=-1)}),[m,c]),n.useLayoutEffect((function(){if(s){var e,t=null==(e=f.current)?void 0:e.querySelector("input");null==t||t.focus()}else C.current&&C.current.stop({})}),[s]);var v=n.useCallback((function(t){CI(t.key)&&t.stopPropagation(),SI(t.key)&&!t.shiftKey&&d.current.publishEvent(fu.cellNavigationKeyDown,e,t)}),[d,e]),b=!p.isRowSelectable||p.isRowSelectable(d.current.getRowParams(i)),A=d.current.getLocaleText(u?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return(0,a.jsx)(p.components.BaseCheckbox,(0,l.Z)({ref:I,tabIndex:c,checked:u,onChange:function(e){var t={value:e.target.checked,id:i};d.current.publishEvent(fu.rowSelectionCheckboxChange,t,e)},className:h.root,color:"primary",inputProps:{"aria-label":A},onKeyDown:v,disabled:!b,touchRippleRef:C},null==(r=p.componentsProps)?void 0:r.baseCheckbox,g))})),gm=n.memo(cm),dm=function(e){return e.focus},pm=Gl(dm,(function(e){return e.cell})),hm=Gl(dm,(function(e){return e.columnHeader})),fm=function(e){return e.tabIndex},Cm=Gl(fm,(function(e){return e.cell})),Im=Gl(fm,(function(e){return e.columnHeader})),mm=function(e){return e.selection},vm=Gl(mm,(function(e){return e.length})),bm=Gl(mm,jl,(function(e,t){return new Map(e.map((function(e){return[e,t[e]]})))})),Am=Gl(mm,(function(e){return e.reduce((function(e,t){return e[t]=t,e}),{})})),ym=function(e){return e.pagination},km=Gl(ym,(function(e){return e.page})),Zm=Gl(ym,(function(e){return e.pageSize})),Sm=(Gl(ym,(function(e){return e.pageCount})),Gl(ym,Ql,$l,Vu,Du,(function(e,t,n,r,a){var o=a.length,i=Math.min(e.pageSize*e.page,o-1),l=Math.min(i+e.pageSize-1,o-1);if(-1===i||-1===l)return null;if(n<2)return{firstRowIndex:i,lastRowIndex:l};for(var u=a[i],s=l-i+1,c=r.findIndex((function(e){return e.id===u.id})),g=c,d=0;g<r.length&&d<=s;){var p=t[r[g].id].depth;(d<s||p>0)&&(g+=1),0===p&&(d+=1)}return{firstRowIndex:c,lastRowIndex:g-1}}))),wm=Gl(Vu,Sm,(function(e,t){return t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]})),Bm=Gl(Fu,Sm,(function(e,t){return t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]})),xm=["field","colDef"],Gm=n.forwardRef((function(e,t){var r,o=(0,ge.Z)(e,xm),u=n.useState(!1),s=(0,i.Z)(u,2)[1],c=Kl(),g=zl(),d=function(e){var t=e.classes;return(0,he.Z)({root:["checkboxInput"]},Il,t)}({classes:g.classes}),p=Tl(c,Im),h=Tl(c,mm),f=Tl(c,Fu),C=Tl(c,Bm),I=n.useMemo((function(){return"function"!==typeof g.isRowSelectable?h:h.filter((function(e){return!!c.current.getRow(e)&&g.isRowSelectable(c.current.getRowParams(e))}))}),[c,g.isRowSelectable,h]),m=n.useMemo((function(){return(g.pagination&&g.checkboxSelectionVisibleOnly?C:f).reduce((function(e,t){return e[t]=!0,e}),{})}),[g.pagination,g.checkboxSelectionVisibleOnly,C,f]),v=n.useMemo((function(){return I.filter((function(e){return m[e]})).length}),[I,m]),b=v>0&&v<Object.keys(m).length,A=v>0,y=null!==p&&p.field===e.field?0:-1;n.useLayoutEffect((function(){var t=c.current.getColumnHeaderElement(e.field);0===y&&t&&(t.tabIndex=-1)}),[y,c,e.field]);var k=n.useCallback((function(t){" "===t.key&&c.current.publishEvent(fu.headerSelectionCheckboxChange,{value:!A}),SI(t.key)&&!t.shiftKey&&c.current.publishEvent(fu.columnHeaderNavigationKeyDown,e,t)}),[c,e,A]),Z=n.useCallback((function(){s((function(e){return!e}))}),[]);n.useEffect((function(){return c.current.subscribeEvent(fu.selectionChange,Z)}),[c,Z]);var S=c.current.getLocaleText(A?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return(0,a.jsx)(g.components.BaseCheckbox,(0,l.Z)({ref:t,indeterminate:b,checked:A,onChange:function(e){var t={value:e.target.checked};c.current.publishEvent(fu.headerSelectionCheckboxChange,t)},className:d.root,color:"primary",inputProps:{"aria-label":S},tabIndex:y,onKeyDown:k},null==(r=g.componentsProps)?void 0:r.baseCheckbox,o))})),Rm=(0,l.Z)({},dI,{field:"__check__",type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,valueGetter:function(e){return void 0!==Am(e.api.state,e.api.instanceId)[e.id]},renderHeader:function(e){return(0,a.jsx)(Gm,(0,l.Z)({},e))},renderCell:function(e){return(0,a.jsx)(gm,(0,l.Z)({},e))}}),Wm=function(e,t){if("string"===typeof e){var n=e.replace(/"/g,'""');return[t,"\n","\r"].some((function(e){return n.includes(e)}))?'"'.concat(n,'"'):n}return e};wl(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);function Vm(e){var t=e.columns,n=e.rowIds,r=e.getCellParams,a=e.delimiterCharacter,o=e.includeHeaders,i=n.reduce((function(e,n){return"".concat(e).concat(function(e,t,n,r){return t.map((function(t){var a=n(e,t.field);return Wm(a.formattedValue,r)}))}(n,t,r,a).join(a),"\r\n")}),"").trim();if(!o)return i;var l="".concat(t.filter((function(e){return e.field!==Rm.field})).map((function(e){return Wm(e.headerName||e.field,a)})).join(a),"\r\n");return"".concat(l).concat(i).trim()}var Fm,Nm=function(e){var t=e.apiRef,n=e.options,r=Fl(t);return n.fields?n.fields.map((function(e){return r.find((function(t){return t.field===e}))})).filter((function(e){return!!e})):(n.allColumns?r:El(t)).filter((function(e){return!e.disableExport}))},Em=function(e){var t=e.apiRef,n=Eu(t),r=t.current.getSelectedRows();return r.size>0?n.filter((function(e){return r.has(e)})):n},Dm=function(e){var t=ru(e,"useGridCsvExport"),r=n.useCallback((function(){var n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.debug("Get data as CSV");var o=Nm({apiRef:e,options:a}),i=null!=(n=a.getRowsToExport)?n:Em,l=i({apiRef:e});return Vm({columns:o,rowIds:l,getCellParams:e.current.getCellParams,delimiterCharacter:a.delimiter||",",includeHeaders:null==(r=a.includeHeaders)||r})}),[t,e]),a=n.useCallback((function(e){t.debug("Export data as CSV");var n=r(e);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.title,r="".concat(n,".").concat(t);if("download"in HTMLAnchorElement.prototype){var a=URL.createObjectURL(e),o=document.createElement("a");return o.href=a,o.download=r,o.click(),void setTimeout((function(){URL.revokeObjectURL(a)}))}throw new Error("MUI: exportAs not supported")}(new Blob([null!=e&&e.utf8WithBom?new Uint8Array([239,187,191]):"",n],{type:"text/csv"}),"csv",null==e?void 0:e.fileName)}),[t,r]);ls(e,{getDataAsCsv:r,exportDataAsCsv:a})},Xm=function(e){return e.rowsMeta},Jm="client",Hm="server";!function(e){e.And="and",e.Or="or"}(Fm||(Fm={}));var Ym=function(){return{items:[],linkOperator:Fm.And}},Tm=function(e,t,r,a){var o=n.useCallback((function(){e.current.unstable_registerStrategyProcessor(t,r,a)}),[e,a,r,t]);Rs((function(){o()}));var i=n.useRef(!0);n.useEffect((function(){i.current?i.current=!1:o()}),[o])},Mm=wl(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Km=wl("MUI: The 'id' field is required on `filterModel.items` when you use multiple filters.","error"),Pm=wl(["MUI: One of your filtering item have no `operatorValue` provided.","This property will become required on `@mui/x-data-grid@6.X`."]),zm=function(e,t,n){var r,a=e.items.length>1;a&&t?(Mm(),r=[e.items[0]]):r=e.items;var o=a&&r.some((function(e){return null==e.id})),i=r.some((function(e){return null==e.operatorValue}));return o&&Km(),i&&Pm(),i||o?(0,l.Z)({},e,{items:r.map((function(e){return function(e,t){var n=(0,l.Z)({},e);if(null==n.id&&(n.id=Math.round(1e5*Math.random())),null==n.operatorValue){var r=t.current.getColumn(n.columnField);n.operatorValue=r&&r.filterOperators[0].value}return n}(e,n)}))}):e.items!==r?(0,l.Z)({},e,{items:r}):e},Lm=function(e,t,n){return function(r){return(0,l.Z)({},r,{filter:(0,l.Z)({},r.filter,{filterModel:zm(e,t,n)})})}},_m=function(e,t,n){var r,a,o,i,u=null!=(r=null!=(a=t.filterModel)?a:null==(o=t.initialState)||null==(i=o.filter)?void 0:i.filterModel)?r:Ym();return(0,l.Z)({},e,{filter:{filterModel:zm(u,t.disableMultipleColumnsFiltering,n),visibleRowsLookup:{},filteredDescendantCountLookup:{}}})},Om=function(e,t){var r,o=ru(e,"useGridFilter");e.current.unstable_updateControlState({stateId:"filter",propModel:t.filterModel,propOnChange:t.onFilterModelChange,stateSelector:Gu,changeEvent:fu.filterModelChange});var i=n.useCallback((function(){e.current.setState((function(n){var r=Gu(n,e.current.instanceId),a=t.filterMode===Jm?function(e,t){var n=e.items,r=e.linkOperator,a=void 0===r?Fm.And:r,o=n.map((function(e){if(!e.columnField||!e.operatorValue)return null;var n,r=t.current.getColumn(e.columnField);if(!r)return null;if(r.valueParser){var a,o=r.valueParser;n=Array.isArray(e.value)?null==(a=e.value)?void 0:a.map((function(e){return o(e)})):o(e.value)}else n=e.value;var i=(0,l.Z)({},e,{value:n}),u=r.filterOperators;if(null==u||!u.length)throw new Error("MUI: No filter operators found for column '".concat(r.field,"'."));var s=u.find((function(e){return e.value===i.operatorValue}));if(!s)throw new Error("MUI: No filter operator found for column '".concat(r.field,"' and operator value '").concat(i.operatorValue,"'."));var c=s.getApplyFilterFn(i,r);return"function"!==typeof c?null:{fn:function(e){var n=t.current.getCellParams(e,i.columnField);return c(n)},item:i}})).filter((function(e){return!!e}));return 0===o.length?null:function(e,t){var n=t?o.filter((function(e){return t(e.item)})):o;return a===Fm.And?n.every((function(t){return t.fn(e)})):n.some((function(t){return t.fn(e)}))}}(r,e):null,o=e.current.unstable_applyStrategyProcessor("filtering",{isRowMatchingFilters:a});return(0,l.Z)({},n,{filter:(0,l.Z)({},n.filter,o)})})),e.current.publishEvent(fu.filteredRowsSet)}),[t.filterMode,e]),u=n.useCallback((function(){i(),e.current.forceUpdate()}),[e,i]),s=n.useCallback((function(t){var n=Gu(e),r=(0,Ae.Z)(n.items),a=r.findIndex((function(e){return e.id===t.id}));-1===a?r.push(t):r[a]=t,e.current.setFilterModel((0,l.Z)({},n,{items:r}))}),[e]),c=n.useCallback((function(t){var n=Gu(e),r=n.items.filter((function(e){return e.id!==t.id}));r.length!==n.items.length&&e.current.setFilterModel((0,l.Z)({},n,{items:r}))}),[e]),g=n.useCallback((function(n){if(o.debug("Displaying filter panel"),n){var r,a=Gu(e),i=a.items.filter((function(e){return void 0!==e.value}));r=i.find((function(e){return e.columnField===n}))?i:t.disableMultipleColumnsFiltering?[{columnField:n}]:[].concat((0,Ae.Z)(i),[{columnField:n}]),e.current.setFilterModel((0,l.Z)({},a,{items:r}))}e.current.showPreferences($I.filters)}),[e,o,t.disableMultipleColumnsFiltering]),d=n.useCallback((function(){o.debug("Hiding filter panel"),e.current.hidePreferences()}),[e,o]),p=n.useCallback((function(t){var n=Gu(e);n.linkOperator!==t&&e.current.setFilterModel((0,l.Z)({},n,{linkOperator:t}))}),[e]),h=n.useCallback((function(n){Gu(e)!==n&&(o.debug("Setting filter model"),e.current.setState(Lm(n,t.disableMultipleColumnsFiltering,e)),e.current.unstable_applyFilters())}),[e,o,t.disableMultipleColumnsFiltering]),f=n.useCallback((function(){var t=Vu(e);return new Map(t.map((function(e){return[e.id,e.model]})))}),[e]);ls(e,{setFilterLinkOperator:p,unstable_applyFilters:u,deleteFilterItem:c,upsertFilterItem:s,setFilterModel:h,showFilterPanel:g,hideFilterPanel:d,getVisibleRowModels:f});var C=n.useCallback((function(t){var n=Gu(e);return 0===n.items.length&&n.linkOperator===Ym().linkOperator?t:(0,l.Z)({},t,{filter:{filterModel:n}})}),[e]),I=n.useCallback((function(n,r){var a,o=null==(a=r.stateToRestore.filter)?void 0:a.filterModel;return null==o?n:(e.current.setState(Lm(o,t.disableMultipleColumnsFiltering,e)),(0,l.Z)({},n,{callbacks:[].concat((0,Ae.Z)(n.callbacks),[e.current.unstable_applyFilters])}))}),[e,t.disableMultipleColumnsFiltering]),m=n.useCallback((function(e,n){if(n===$I.filters){var r,o=t.components.FilterPanel;return(0,a.jsx)(o,(0,l.Z)({},null==(r=t.componentsProps)?void 0:r.filterPanel))}return e}),[t.components.FilterPanel,null==(r=t.componentsProps)?void 0:r.filterPanel]),v=n.useCallback((function(n){if(t.filterMode===Jm&&n.isRowMatchingFilters){for(var r=eu(e),a={},o=0;o<r.length;o+=1){var i=r[o];a[i]=n.isRowMatchingFilters(i)}return{filteredRowsLookup:a,visibleRowsLookup:a,filteredDescendantCountLookup:{}}}return{visibleRowsLookup:{},filteredRowsLookup:{},filteredDescendantCountLookup:{}}}),[e,t.filterMode]);Ws(e,"exportState",C),Ws(e,"restoreState",I),Ws(e,"preferencePanel",m),Tm(e,As,"filtering",v);var b=n.useCallback((function(){o.debug("onColUpdated - GridColumns changed, applying filters");var t=Gu(e),n=Hl(e),r=t.items.filter((function(e){return e.columnField&&n[e.columnField]}));r.length<t.items.length&&e.current.setFilterModel((0,l.Z)({},t,{items:r}))}),[e,o]),A=n.useCallback((function(t){"filtering"===t&&e.current.unstable_applyFilters()}),[e]);hs(e,fu.rowsSet,i),hs(e,fu.rowExpansionChange,e.current.unstable_applyFilters),hs(e,fu.columnsChange,b),hs(e,fu.activeStrategyProcessorChange,A),Rs((function(){e.current.unstable_applyFilters()})),n.useEffect((function(){void 0!==t.filterModel&&e.current.setFilterModel(t.filterModel)}),[e,o,t.filterModel])},Um=function(e,t){var n,r;return t.pagination&&"client"===t.paginationMode?(r=Sm(e),n=wm(e)):r=0===(n=Vu(e)).length?null:{firstRowIndex:0,lastRowIndex:n.length-1},{rows:n,range:r}},jm=function(e,t){var r=Um(e,t);return n.useMemo((function(){return{rows:r.rows,range:r.range}}),[r.rows,r.range])},Qm=function(e){return(0,l.Z)({},e,{focus:{cell:null,columnHeader:null},tabIndex:{cell:null,columnHeader:null}})},qm="__detail_panel_toggle__",$m=function(e){return e?0:100},ev=function(e){return function(t){return(0,l.Z)({},t,{pagination:(0,l.Z)({},t.pagination,{pageSize:e})})}},tv=function(e,t){return t>0&&e>0?Math.ceil(e/t):0},nv=function(e){return e.pageCount?(0,l.Z)({},e,{page:Math.max(Math.min(e.page,e.pageCount-1),0)}):e},rv=function(e){return function(t){return(0,l.Z)({},t,{pagination:nv((0,l.Z)({},t.pagination,{page:e}))})}},av=(wl(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error"),function(e,t){var n,r,a,o,i,u,s,c,g;return g=null!=t.pageSize?t.pageSize:null!=(null==(n=t.initialState)||null==(r=n.pagination)?void 0:r.pageSize)?t.initialState.pagination.pageSize:$m(t.autoPageSize),(0,l.Z)({},e,{pagination:{pageSize:g,page:null!=(a=null!=(o=t.page)?o:null==(i=t.initialState)||null==(u=i.pagination)?void 0:u.page)?a:0,pageCount:tv(null!=(s=t.rowCount)?s:0,g),rowCount:null!=(c=t.rowCount)?c:0}})}),ov=function(e,t){!function(e,t){var r,a,o=ru(e,"useGridPageSize"),i=Tl(e,Ku);e.current.unstable_updateControlState({stateId:"pageSize",propModel:t.pageSize,propOnChange:t.onPageSizeChange,stateSelector:Zm,changeEvent:fu.pageSizeChange});var u=n.useCallback((function(t){t!==Zm(e)&&(o.debug("Setting page size to ".concat(t)),e.current.setState(ev(t)),e.current.forceUpdate())}),[e,o]);ls(e,{setPageSize:u});var s=n.useCallback((function(n){var r,a,o=Zm(e);return null!=t.pageSize||null!=(null==(r=t.initialState)||null==(a=r.pagination)?void 0:a.pageSize)||o!==$m(t.autoPageSize)?(0,l.Z)({},n,{pagination:(0,l.Z)({},n.pagination,{pageSize:o})}):n}),[e,t.pageSize,null==(r=t.initialState)||null==(a=r.pagination)?void 0:a.pageSize,t.autoPageSize]),c=n.useCallback((function(t,n){var r,a=null==(r=n.stateToRestore.pagination)?void 0:r.pageSize;return null!=a&&e.current.setState(ev(a)),t}),[e]);Ws(e,"exportState",s),Ws(e,"restoreState",c);var g=n.useCallback((function(){var n=e.current.getRootDimensions();if(t.autoPageSize&&n){var r=Math.floor(n.viewportInnerSize.height/i);e.current.setPageSize(r)}}),[e,t.autoPageSize,i]);hs(e,fu.viewportInnerSizeChange,g),n.useEffect((function(){null==t.pageSize||t.autoPageSize||e.current.setPageSize(t.pageSize)}),[e,t.autoPageSize,t.pageSize]),n.useEffect((function(){g()}),[g])}(e,t),function(e,t){var r,a,o=ru(e,"useGridPage"),i=Tl(e,Ju);e.current.unstable_updateControlState({stateId:"page",propModel:t.page,propOnChange:t.onPageChange,stateSelector:km,changeEvent:fu.pageChange});var u=n.useCallback((function(t){o.debug("Setting page to ".concat(t)),e.current.setState(rv(t)),e.current.forceUpdate()}),[e,o]);ls(e,{setPage:u});var s=n.useCallback((function(n){var r,a,o=km(e);return null!=t.page||null!=(null==(r=t.initialState)||null==(a=r.pagination)?void 0:a.page)||0!==o?(0,l.Z)({},n,{pagination:(0,l.Z)({},n.pagination,{page:o})}):n}),[e,t.page,null==(r=t.initialState)||null==(a=r.pagination)?void 0:a.page]),c=n.useCallback((function(t,n){var r,a,o=null!=(r=null==(a=n.stateToRestore.pagination)?void 0:a.page)?r:km(e);return e.current.setState(rv(o)),t}),[e]);Ws(e,"exportState",s),Ws(e,"restoreState",c),hs(e,fu.pageSizeChange,(function(t){e.current.setState((function(e){var n=tv(e.pagination.rowCount,t);return(0,l.Z)({},e,{pagination:nv((0,l.Z)({},e.pagination,{pageCount:n,page:e.pagination.page}))})})),e.current.forceUpdate()})),hs(e,fu.pageChange,(function(){return e.current.scrollToIndexes({rowIndex:km(e)*Zm(e)})})),n.useEffect((function(){}),[t.rowCount,t.paginationMode]),n.useEffect((function(){e.current.setState((function(e){var n=void 0!==t.rowCount?t.rowCount:i,r=tv(n,e.pagination.pageSize),a=null==t.page?e.pagination.page:t.page;return(0,l.Z)({},e,{pagination:nv((0,l.Z)({},e.pagination,{page:a,rowCount:n,pageCount:r}))})})),e.current.forceUpdate()}),[i,t.rowCount,t.page,t.paginationMode,e])}(e,t)},iv=function(e){return e.preferencePanel},lv=function(e,t){var n,r;return(0,l.Z)({},e,{preferencePanel:null!=(n=null==(r=t.initialState)?void 0:r.preferencePanel)?n:{open:!1}})},uv=function(e){return e.editRows};function sv(e){return"function"===typeof e.then}var cv,gv,dv=function(e){return(0,l.Z)({},e,{editRows:{}})};function pv(e,t){var r,a=ru(e,"useGridEditRows");!function(e,t){var r,a=ru(e,"useGridEditRows"),o=function(e){return function(){t.editMode===sI.Cell&&e.apply(void 0,arguments)}},i=n.useCallback((function(t,n,r){e.current.getCellMode(t,n)!==r&&(a.debug("Switching cell id: ".concat(t," field: ").concat(n," to mode: ").concat(r)),e.current.setState((function(a){var o=(0,l.Z)({},a.editRows);return o[t]=(0,l.Z)({},o[t]),r===cI.Edit?o[t][n]={value:e.current.getCellValue(t,n)}:(delete o[t][n],Object.keys(o[t]).length||delete o[t]),(0,l.Z)({},a,{editRows:o})})),e.current.forceUpdate(),e.current.publishEvent(fu.cellModeChange,e.current.getCellParams(t,n)))}),[e,a]),u=n.useCallback((function(t,n){var r=uv(e.current.state);return r[t]&&r[t][n]?cI.Edit:cI.View}),[e]),s=n.useCallback((function(n){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.id,i=n.field;e.current.unstable_runPendingEditCellValueMutation(o,i);var u=e.current.getEditRowsModel();if(!u[o]||!u[o][i])throw new Error("MUI: Cell at id: ".concat(o," and field: ").concat(i," is not in edit mode."));var s=u[o][i],c=e.current.getColumn(i),g=e.current.getRow(o);if(null!=(r=t.experimentalFeatures)&&r.preventCommitWhileValidating){var d=u[o][i];if(d.isValidating||d.error)return!1}var p=(0,l.Z)({},n,{value:s.value}),h=!!s.error;if(!h&&"function"===typeof c.preProcessEditCellProps){var f=c.preProcessEditCellProps({id:o,row:g,props:s});if(sv(f))return f.then((function(t){return e.current.unstable_setEditCellProps({id:o,field:i,props:t}),!t.error&&(e.current.publishEvent(fu.cellEditCommit,p,a),!0)}));e.current.unstable_setEditCellProps({id:o,field:i,props:f}),h=!!f.error}return!h&&(e.current.publishEvent(fu.cellEditCommit,p,a),!0)}),[e,null==(r=t.experimentalFeatures)?void 0:r.preventCommitWhileValidating]),c=n.useCallback((function(t){var n=e.current.getColumn(t.field),r=e.current.getRow(t.id);return new Promise((function(a){var o={value:t.value},i=e.current.getEditRowsModel()[t.id][t.field];if("function"!==typeof n.preProcessEditCellProps)return e.current.unstable_setEditCellProps((0,l.Z)({},t,{props:o})),void a(!0);o=e.current.unstable_setEditCellProps((0,l.Z)({},t,{props:(0,l.Z)({},i,{isValidating:!0})})),Promise.resolve(n.preProcessEditCellProps({id:t.id,row:r,props:(0,l.Z)({},o,{value:e.current.unstable_parseValue(t.id,t.field,t.value)})})).then((function(n){e.current.unstable_setEditCellProps((0,l.Z)({},t,{props:(0,l.Z)({},n,{isValidating:!1})})),a(!n.error)}))}))}),[e]);ls(e,{setCellMode:i,getCellMode:u,commitCellChange:s,unstable_setCellEditingEditCellValue:c});var g=n.useCallback(function(){var t=j(q().mark((function t(n,r){var a,o,i,l,u,s;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.id,o=n.field,i=n.cellMode,n.isEditable){t.next=3;break}return t.abrupt("return");case 3:if(l=i===cI.Edit,u=r.ctrlKey||r.metaKey||r.altKey,l||!yI(r.key)||u||" "===r.key&&r.shiftKey||e.current.publishEvent(fu.cellEditStart,n,r),!l&&II(r.key)&&(e.current.setEditCellValue({id:a,field:o,value:""}),e.current.commitCellChange({id:a,field:o},r),e.current.publishEvent(fu.cellEditStop,n,r)),!l||!ZI(r.key)){t.next=14;break}return s={id:a,field:o},t.next=11,e.current.commitCellChange(s,r);case 11:if(t.sent){t.next=14;break}return t.abrupt("return");case 14:l&&kI(r.key)&&e.current.publishEvent(fu.cellEditStop,n,r);case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]),d=n.useCallback((function(t,n){t.isEditable&&e.current.publishEvent(fu.cellEditStart,t,n)}),[e]),p=function(){var t=j(q().mark((function t(n,r){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.cellMode!==cI.View){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.current.commitCellChange(n,r);case 4:e.current.publishEvent(fu.cellEditStop,n,r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=(0,ve.Z)((function(e,t){p(e,t)})),f=(0,ve.Z)((function(){var t=pm(e);if(t){var n=e.current.getCellParams(t.id,t.field);p(n,{})}})),C=n.useCallback((function(t,n){t.isEditable&&(e.current.setCellMode(t.id,t.field,cI.Edit),wI(n)&&vI(n.key)&&e.current.unstable_setEditCellProps({id:t.id,field:t.field,props:{value:""}}))}),[e]),I=n.useCallback((function(t,n){e.current.setCellMode(t.id,t.field,cI.View),wI(n)&&(ZI(n.key)?e.current.publishEvent(fu.cellNavigationKeyDown,t,n):("Escape"===n.key||II(n.key))&&e.current.setCellFocus(t.id,t.field))}),[e]),m=n.useCallback((function(t){var n=t.id,r=t.field,o=e.current.getEditRowsModel()[n][r].value;a.debug("Setting cell id: ".concat(n," field: ").concat(r," to value: ").concat(null==o?void 0:o.toString()));var i=e.current.getRow(n);if(i){var u=e.current.getColumn(t.field),s=(0,l.Z)({},i,(0,le.Z)({},r,o));u.valueSetter&&(s=u.valueSetter({row:i,value:o})),e.current.updateRows([s])}}),[e,a]),v=n.useCallback((function(t){var n=e.current.getRow(t.id),r=e.current.getColumn(t.field),a=r.preProcessEditCellProps?r.preProcessEditCellProps({id:t.id,row:n,props:t.props}):t.props;sv(a)?a.then((function(n){e.current.unstable_setEditCellProps((0,l.Z)({},t,{props:n}))})):e.current.unstable_setEditCellProps((0,l.Z)({},t,{props:a}))}),[e]);hs(e,fu.cellKeyDown,o(g)),hs(e,fu.cellDoubleClick,o(d)),hs(e,fu.cellFocusOut,o(h)),hs(e,fu.columnHeaderDragStart,o(f)),hs(e,fu.cellEditStart,o(C)),hs(e,fu.cellEditStop,o(I)),hs(e,fu.cellEditCommit,o(m)),hs(e,fu.editCellPropsChange,o(v)),Cs(e,fu.cellEditCommit,t.onCellEditCommit),Cs(e,fu.cellEditStart,t.onCellEditStart),Cs(e,fu.cellEditStop,t.onCellEditStop)}(e,t),function(e,t){var r,a,o=n.useRef(null),i=n.useRef(null),u=Tl(e,Fl),s=function(e){return function(){t.editMode===sI.Row&&e.apply(void 0,arguments)}},c=n.useCallback((function(t,n){n!==e.current.getRowMode(t)&&(e.current.setState((function(r){var a=(0,l.Z)({},r.editRows);return n===gI.Edit?(a[t]={},u.forEach((function(n){var r=e.current.getCellParams(t,n.field);r.isEditable&&(a[t][n.field]={value:r.value})}))):delete a[t],(0,l.Z)({},r,{editRows:a})})),e.current.forceUpdate())}),[e,u]),g=n.useCallback((function(n){return t.editMode===sI.Cell?gI.View:uv(e.current.state)[n]?gI.Edit:gI.View}),[e,t.editMode]),d=n.useCallback((function(n){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.editMode===sI.Cell)throw new Error("MUI: You can't commit changes when the edit mode is 'cell'.");e.current.unstable_runPendingEditCellValueMutation(n);var o=e.current.getEditRowsModel()[n];if(!o)throw new Error("MUI: Row at id: ".concat(n," is not being edited."));if(null!=(r=t.experimentalFeatures)&&r.preventCommitWhileValidating&&!Object.keys(o).reduce((function(e,t){return e&&!o[t].isValidating&&!o[t].error}),!0))return!1;var i=Object.values(o).some((function(e){return!!e.error}));if(i)return!1;var l=Object.keys(o).filter((function(t){return"function"===typeof e.current.getColumn(t).preProcessEditCellProps}));if(l.length>0){var u=e.current.getRow(n),s=l.map(function(){var t=j(q().mark((function t(r){var a,i;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.current.getColumn(r),t.next=3,Promise.resolve(a.preProcessEditCellProps({id:n,row:u,props:o[r]}));case 3:return i=t.sent,e.current.unstable_setEditCellProps({id:n,field:r,props:i}),t.abrupt("return",i.error);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return Promise.all(s).then((function(t){return!t.some((function(e){return!!e}))&&(e.current.publishEvent(fu.rowEditCommit,n,a),!0)}))}return e.current.publishEvent(fu.rowEditCommit,n,a),!0}),[e,t.editMode,null==(r=t.experimentalFeatures)?void 0:r.preventCommitWhileValidating]),p=n.useCallback((function(t){var n=e.current.getEditRowsModel()[t.id],r=e.current.getRow(t.id),a=!0;return new Promise((function(o){Object.keys(n).forEach(function(){var o=j(q().mark((function o(i){var u,s;return q().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=e.current.getColumn(i),s=i===t.field?{value:t.value}:n[i],s=e.current.unstable_setEditCellProps({id:t.id,field:i,props:(0,l.Z)({},s,{isValidating:!0})}),!u.preProcessEditCellProps){o.next=7;break}return o.next=6,Promise.resolve(u.preProcessEditCellProps({id:t.id,row:r,props:(0,l.Z)({},s,{value:i===t.field?e.current.unstable_parseValue(t.id,i,t.value):s.value})}));case 6:s=o.sent;case 7:s.error&&(a=!1),e.current.unstable_setEditCellProps({id:t.id,field:i,props:(0,l.Z)({},s,{isValidating:!1})});case 9:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()),o(a)}))}),[e]);ls(e,{setRowMode:c,getRowMode:g,commitRowChange:d,unstable_setRowEditingEditCellValue:p});var h=n.useCallback(function(){var n=j(q().mark((function n(r,a){var o,i,l,u;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.cellMode,r.isEditable){n.next=3;break}return n.abrupt("return");case 3:if(i=o===cI.Edit,l=e.current.getRowParams(r.id),!i){n.next=18;break}if("Enter"!==a.key){n.next=15;break}return n.next=9,e.current.commitRowChange(r.id);case 9:if(n.sent||null==(u=t.experimentalFeatures)||!u.preventCommitWhileValidating){n.next=12;break}return n.abrupt("return");case 12:e.current.publishEvent(fu.rowEditStop,l,a),n.next=16;break;case 15:"Escape"===a.key&&e.current.publishEvent(fu.rowEditStop,l,a);case 16:n.next=19;break;case 18:"Enter"===a.key&&e.current.publishEvent(fu.rowEditStart,l,a);case 19:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e,null==(a=t.experimentalFeatures)?void 0:a.preventCommitWhileValidating]),f=n.useCallback((function(t,n){if(t.isEditable){var r=e.current.getRowParams(t.id);e.current.publishEvent(fu.rowEditStart,r,n)}}),[e]),C=n.useCallback((function(t){var n=e.current.getRow(t.id),r=e.current.getEditRowsModel()[t.id];Object.keys(r).forEach(function(){var a=j(q().mark((function a(o){var i,l,u;return q().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(i=e.current.getColumn(o)).preProcessEditCellProps){a.next=9;break}return l=o===t.field?t.props:r[o],a.next=5,Promise.resolve(i.preProcessEditCellProps({id:t.id,row:n,props:l}));case 5:u=a.sent,e.current.unstable_setEditCellProps({id:t.id,field:o,props:u}),a.next=10;break;case 9:o===t.field&&e.current.unstable_setEditCellProps(t);case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}),[e]),I=n.useCallback((function(t){e.current.setRowMode(t.id,gI.Edit)}),[e]),m=n.useCallback((function(t,n){e.current.setRowMode(t.id,gI.View),"Enter"===n.key&&e.current.publishEvent(fu.cellNavigationKeyDown,t,n)}),[e]),v=n.useCallback((function(t){var n=e.current.getEditRowsModel()[t];if(!n)throw new Error("MUI: Row at id: ".concat(t," is not being edited."));var r=e.current.getRow(t);if(r){var a=(0,l.Z)({},r);Object.keys(n).forEach((function(t){var r=e.current.getColumn(t),o=n[t].value;r.valueSetter?a=r.valueSetter({row:a,value:o}):a[t]=o})),e.current.updateRows([a])}}),[e]),b=n.useCallback((function(e){i.current=e}),[]),A=function(){var t=j(q().mark((function t(n,r){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.cellMode!==cI.View){t.next=2;break}return t.abrupt("return");case 2:i.current=null,o.current=setTimeout(j(q().mark((function t(){var a,o;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null==(a=i.current)?void 0:a.id)===n.id){t.next=5;break}return t.next=3,e.current.commitRowChange(n.id,r);case 3:o=e.current.getRowParams(n.id),e.current.publishEvent(fu.rowEditStop,o,r);case 5:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),y=(0,ve.Z)((function(e,t){A(e,t)})),k=(0,ve.Z)((function(){var t=pm(e);if(t){var n=e.current.getCellParams(t.id,t.field);A(n,{})}}));hs(e,fu.cellKeyDown,s(h)),hs(e,fu.cellDoubleClick,s(f)),hs(e,fu.editCellPropsChange,s(C)),hs(e,fu.rowEditStart,s(I)),hs(e,fu.rowEditStop,s(m)),hs(e,fu.rowEditCommit,s(v)),hs(e,fu.cellFocusIn,s(b)),hs(e,fu.cellFocusOut,s(y)),hs(e,fu.columnHeaderDragStart,s(k)),Cs(e,fu.rowEditCommit,t.onRowEditCommit),Cs(e,fu.rowEditStart,t.onRowEditStart),Cs(e,fu.rowEditStop,t.onRowEditStop)}(e,t);var o=n.useRef({});e.current.unstable_updateControlState({stateId:"editRows",propModel:t.editRowsModel,propOnChange:t.onEditRowsModelChange,stateSelector:uv,changeEvent:fu.editRowsModelChange});var u=n.useCallback((function(e){return!e.rowNode.isAutoGenerated&&!!e.colDef.editable&&!!e.colDef.renderEditCell&&(!t.isCellEditable||t.isCellEditable(e))}),[t.isCellEditable]),s=function(e,t,n,r){if(n){if(o.current[e]||(o.current[e]={}),o.current[e][t]){var a=(0,i.Z)(o.current[e][t],1)[0];clearTimeout(a)}var l=setTimeout((function(){r(),delete o.current[e][t]}),n);o.current[e][t]=[l,function(){r();var n=(0,i.Z)(o.current[e][t],1)[0];clearTimeout(n),delete o.current[e][t]}]}else r()},c=n.useCallback((function(e,t){if(o.current[e])if(t){if(o.current[e][t]){(0,(0,i.Z)(o.current[e][t],2)[1])()}}else Object.keys(o.current[e]).forEach((function(t){(0,(0,i.Z)(o.current[e][t],2)[1])()}))}),[]),g=n.useCallback((function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(n.id,n.field,n.debounceMs,(function(){var a;if(null!=(a=t.experimentalFeatures)&&a.preventCommitWhileValidating)return"row"===t.editMode?e.current.unstable_setRowEditingEditCellValue(n):e.current.unstable_setCellEditingEditCellValue(n);var o={id:n.id,field:n.field,props:{value:n.value}};return e.current.publishEvent(fu.editCellPropsChange,o,r)}))}),[e,t.editMode,null==(r=t.experimentalFeatures)?void 0:r.preventCommitWhileValidating]),d=n.useCallback((function(t,n,r){var a=e.current.getColumn(n);return a.valueParser?a.valueParser(r,e.current.getCellParams(t,n)):r}),[e]),p=n.useCallback((function(t){var n=t.id,r=t.field,o=t.props;return a.debug("Setting cell props on id: ".concat(n," field: ").concat(r)),e.current.setState((function(e){var t=(0,l.Z)({},e.editRows);return t[n]=(0,l.Z)({},e.editRows[n]),t[n][r]=(0,l.Z)({},o,{value:d(n,r,o.value)}),(0,l.Z)({},e,{editRows:t})})),e.current.forceUpdate(),uv(e.current.state)[n][r]}),[e,a,d]),h=n.useCallback((function(t){uv(e.current.state)!==t&&(a.debug("Setting editRows model"),e.current.setState((function(e){return(0,l.Z)({},e,{editRows:t})})),e.current.forceUpdate())}),[e,a]),f=n.useCallback((function(){return uv(e.current.state)}),[e]),C=n.useCallback((function(e,t){var n=t.detail>1;e.isEditable&&e.cellMode===cI.View&&n&&t.preventDefault()}),[]);hs(e,fu.cellMouseDown,C),Cs(e,fu.editCellPropsChange,t.onEditCellPropsChange),ls(e,{isCellEditable:u,setEditRowsModel:h,getEditRowsModel:f,setEditCellValue:g,unstable_setEditCellProps:p,unstable_parseValue:d,unstable_runPendingEditCellValueMutation:c}),n.useEffect((function(){void 0!==t.editRowsModel&&e.current.setEditRowsModel(t.editRowsModel)}),[e,t.editRowsModel])}!function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"}(cv||(cv={})),function(e){e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"}(gv||(gv={}));var hv,fv,Cv=wl(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error");!function(e){e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown"}(hv||(hv={})),function(e){e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown"}(fv||(fv={}));var Iv=wl(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#persistence."],"error"),mv=function(e){return(0,l.Z)({},e,{editRows:{}})},vv=function(e,t){!function(e,t){var r=t.processRowUpdate,a=t.onProcessRowUpdateError,o=function(e){return function(){t.editMode===sI.Cell&&e.apply(void 0,arguments)}},i=n.useCallback((function(t,n){var r=e.current.getCellParams(t,n);if(!e.current.isCellEditable(r))throw new Error("MUI: The cell with id=".concat(t," and field=").concat(n," is not editable."))}),[e]),u=n.useCallback((function(t,n,r){if(e.current.getCellMode(t,n)!==r)throw new Error("MUI: The cell with id=".concat(t," and field=").concat(n," is not in ").concat(r," mode."))}),[e]),s=n.useCallback((function(t,n){if(t.isEditable&&t.cellMode!==cI.Edit){var r=(0,l.Z)({},t,{reason:cv.cellDoubleClick});e.current.publishEvent(fu.cellEditStart,r,n)}}),[e]),c=n.useCallback((function(t,n){if(t.cellMode!==cI.View){var r=(0,l.Z)({},t,{reason:gv.cellFocusOut});e.current.publishEvent(fu.cellEditStop,r,n)}}),[e]),g=n.useCallback((function(t,n){var r;if(t.cellMode===cI.Edit){if("Escape"===n.key?r=gv.escapeKeyDown:"Enter"===n.key?r=gv.enterKeyDown:"Tab"===n.key&&(r=n.shiftKey?gv.shiftTabKeyDown:gv.tabKeyDown,n.preventDefault()),r){var a=(0,l.Z)({},t,{reason:r});e.current.publishEvent(fu.cellEditStop,a,n)}}else if(t.isEditable){var o;if(vI(n.key)){if(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)return;o=cv.printableKeyDown}else"Enter"===n.key?o=cv.enterKeyDown:"Delete"===n.key&&(o=cv.deleteKeyDown);if(o){var i=(0,l.Z)({},t,{reason:o});e.current.publishEvent(fu.cellEditStart,i,n)}}}),[e]),d=n.useCallback((function(t,n){var r=t.id,a=t.field,o=t.reason;e.current.startCellEditMode(t),o!==cv.deleteKeyDown&&o!==cv.printableKeyDown||e.current.setEditCellValue({id:r,field:a,value:""},n)}),[e]),p=n.useCallback((function(t){var n,r=t.id,a=t.field,o=t.reason;o===gv.enterKeyDown?n="below":o===gv.tabKeyDown?n="right":o===gv.shiftTabKeyDown&&(n="left");var i="escapeKeyDown"===o;uv(e.current.state)[r][a].isProcessingProps&&(i=!0),e.current.stopCellEditMode({id:r,field:a,ignoreModifications:i,cellToFocusAfter:n})}),[e]);hs(e,fu.cellDoubleClick,o(s)),hs(e,fu.cellFocusOut,o(c)),hs(e,fu.cellKeyDown,o(g)),hs(e,fu.cellEditStart,o(d)),hs(e,fu.cellEditStop,o(p)),Cs(e,fu.cellEditStart,t.onCellEditStart),Cs(e,fu.cellEditStop,t.onCellEditStop);var h=n.useCallback((function(t,n){var r=uv(e.current.state);return r[t]&&r[t][n]?cI.Edit:cI.View}),[e]),f=n.useCallback((function(t,n,r){e.current.setState((function(e){var a=(0,l.Z)({},e.editRows);return null!==r?a[t]=(0,l.Z)({},a[t],(0,le.Z)({},n,(0,l.Z)({},r))):(delete a[t][n],0===Object.keys(a[t]).length&&delete a[t]),(0,l.Z)({},e,{editRows:a})})),e.current.forceUpdate()}),[e]),C=n.useCallback((function(t){var n=t.id,r=t.field;i(n,r),u(n,r,cI.View);var a={value:e.current.getCellValue(n,r),error:!1,isProcessingProps:!1};f(n,r,a),e.current.setCellFocus(n,r)}),[e,i,u,f]),I=n.useCallback((function(t){var n=t.id,o=t.field,i=t.ignoreModifications,l=t.cellToFocusAfter,s=void 0===l?"none":l;u(n,o,cI.Edit),e.current.unstable_runPendingEditCellValueMutation(n,o);var c=function(){"none"!==s&&e.current.unstable_moveFocusToRelativeCell(n,o,s)};if(i)return c(),void f(n,o,null);var g=uv(e.current.state)[n][o],d=g.error,p=g.isProcessingProps;if(!d&&!p){var h=e.current.unstable_getRowWithUpdatedValuesFromCellEditing(n,o);if(r){var C=function(e){a?a(e):Cv()};try{var I=e.current.getRow(n);Promise.resolve(r(h,I)).then((function(t){e.current.updateRows([t]),c(),f(n,o,null)})).catch(C)}catch(m){C(m)}}else e.current.updateRows([h]),c(),f(n,o,null)}}),[e,a,r,u,f]),m=n.useCallback(function(){var t=j(q().mark((function t(n){var r,a,o,s,c,g,d,p,h;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.id,a=n.field,o=n.value,i(r,a),u(r,a,cI.Edit),s=e.current.getColumn(a),c=e.current.getRow(r),g=o,s.valueParser&&(g=s.valueParser(o,e.current.getCellParams(r,a))),d=uv(e.current.state),p=(0,l.Z)({},d[r][a],{value:g}),!s.preProcessEditCellProps){t.next=16;break}return h=o!==d[r][a].value,p=(0,l.Z)({},p,{isProcessingProps:!0}),f(r,a,p),t.next=15,Promise.resolve(s.preProcessEditCellProps({id:r,row:c,props:p,hasChanged:h}));case 15:p=t.sent;case 16:if(e.current.getCellMode(r,a)!==cI.View){t.next=18;break}return t.abrupt("return",!1);case 18:return d=uv(e.current.state),(p=(0,l.Z)({},p,{isProcessingProps:!1})).value=s.preProcessEditCellProps?d[r][a].value:g,f(r,a,p),d=uv(e.current.state),t.abrupt("return",!d[r][a].error);case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,i,u,f]),v=n.useCallback((function(t,n){var r=e.current.getColumn(n),a=uv(e.current.state)[t][n].value,o=e.current.getRow(t);return r.valueSetter?r.valueSetter({value:a,row:o}):(0,l.Z)({},o,(0,le.Z)({},n,a))}),[e]);ls(e,{getCellMode:h,startCellEditMode:C,stopCellEditMode:I,unstable_setCellEditingEditCellValue:m,unstable_getRowWithUpdatedValuesFromCellEditing:v})}(e,t),function(e,t){var r=n.useRef(null),a=n.useRef(null),o=t.processRowUpdate,u=t.onProcessRowUpdateError,s=function(e){return function(){t.editMode===sI.Row&&e.apply(void 0,arguments)}},c=n.useCallback((function(t,n){var r=e.current.getCellParams(t,n);if(!e.current.isCellEditable(r))throw new Error("MUI: The cell with id=".concat(t," and field=").concat(n," is not editable."))}),[e]),g=n.useCallback((function(t,n){if(e.current.getRowMode(t)!==n)throw new Error("MUI: The row with id=".concat(t," is not in ").concat(n," mode."))}),[e]),d=n.useCallback((function(t,n){if(t.isEditable&&e.current.getRowMode(t.id)!==gI.Edit){var r=e.current.getRowParams(t.id),a=(0,l.Z)({},r,{field:t.field,reason:hv.cellDoubleClick});e.current.publishEvent(fu.rowEditStart,a,n)}}),[e]),p=n.useCallback((function(e){a.current=e}),[]),h=n.useCallback((function(t,n){t.isEditable&&e.current.getRowMode(t.id)!==gI.View&&(a.current=null,r.current=setTimeout((function(){var o;if(r.current=null,(null==(o=a.current)?void 0:o.id)!==t.id){var i=e.current.getRowParams(t.id),u=(0,l.Z)({},i,{field:t.field,reason:fv.rowFocusOut});e.current.publishEvent(fu.rowEditStop,u,n)}})))}),[e]);n.useEffect((function(){return function(){clearTimeout(r.current)}}),[]);var f=n.useCallback((function(t,n){if(t.cellMode===gI.Edit){var r;if("Escape"===n.key)r=fv.escapeKeyDown;else if("Enter"===n.key)r=fv.enterKeyDown;else if("Tab"===n.key){var a=Wl(e).filter((function(n){return e.current.isCellEditable(e.current.getCellParams(t.id,n))}));n.shiftKey?t.field===a[0]&&(r=fv.shiftTabKeyDown):t.field===a[a.length-1]&&(r=fv.tabKeyDown),r&&n.preventDefault()}if(r){var o=e.current.getRowParams(t.id),i=(0,l.Z)({},o,{reason:r,field:t.field});e.current.publishEvent(fu.rowEditStop,i,n)}}else if(t.isEditable){var u;if(vI(n.key)){if(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)return;u=hv.printableKeyDown}else"Enter"===n.key?u=hv.enterKeyDown:"Delete"===n.key&&(u=hv.deleteKeyDown);if(u){var s=e.current.getRowParams(t.id),c=(0,l.Z)({},s,{field:t.field,reason:u});e.current.publishEvent(fu.rowEditStart,c,n)}}}),[e]),C=n.useCallback((function(t,n){var r=t.id,a=t.field,o=t.reason;e.current.startRowEditMode({id:r,fieldToFocus:a}),o!==hv.deleteKeyDown&&o!==hv.printableKeyDown||e.current.setEditCellValue({id:r,field:a,value:""},n)}),[e]),I=n.useCallback((function(t){var n,r=t.id,a=t.reason,o=t.field;e.current.unstable_runPendingEditCellValueMutation(r),a===fv.enterKeyDown?n="below":a===fv.tabKeyDown?n="right":a===fv.shiftTabKeyDown&&(n="left");var i="escapeKeyDown"===a,l=uv(e.current.state);i||(i=Object.values(l[r]).some((function(e){return e.isProcessingProps}))),e.current.stopRowEditMode({id:r,ignoreModifications:i,field:o,cellToFocusAfter:n})}),[e]);hs(e,fu.cellDoubleClick,s(d)),hs(e,fu.cellFocusIn,s(p)),hs(e,fu.cellFocusOut,s(h)),hs(e,fu.cellKeyDown,s(f)),hs(e,fu.rowEditStart,s(C)),hs(e,fu.rowEditStop,s(I)),Cs(e,fu.rowEditStart,t.onRowEditStart),Cs(e,fu.rowEditStop,t.onRowEditStop);var m=n.useCallback((function(n){if(t.editMode===sI.Cell)return gI.View;var r=uv(e.current.state);return r[n]&&Object.keys(r[n]).length>0?gI.Edit:gI.View}),[e,t.editMode]),v=n.useCallback((function(t,n){e.current.setState((function(e){var r=(0,l.Z)({},e.editRows);return null!==n?r[t]=n:delete r[t],(0,l.Z)({},e,{editRows:r})})),e.current.forceUpdate()}),[e]),b=n.useCallback((function(t,n,r){e.current.setState((function(e){var a=(0,l.Z)({},e.editRows);return null!==r?a[t]=(0,l.Z)({},a[t],(0,le.Z)({},n,(0,l.Z)({},r))):(delete a[t][n],0===Object.keys(a[t]).length&&delete a[t]),(0,l.Z)({},e,{editRows:a})})),e.current.forceUpdate()}),[e]),A=n.useCallback((function(t){var n=t.id,r=t.fieldToFocus;if(g(n,gI.View),e.current.getRowMode(n)===gI.Edit)throw new Error("MUI: The cell with id=".concat(n," is already in edit mode."));var a=Wl(e).reduce((function(t,r){return e.current.getCellParams(n,r).isEditable?(t[r]={value:e.current.getCellValue(n,r),error:!1,isProcessingProps:!1},t):t}),{});v(n,a),r&&e.current.setCellFocus(n,r)}),[e,g,v]),y=n.useCallback((function(t){var n=t.id,r=t.ignoreModifications,a=t.field,i=t.cellToFocusAfter,l=void 0===i?"none":i;g(n,gI.Edit),e.current.unstable_runPendingEditCellValueMutation(n);var s=function(){"none"!==l&&a&&e.current.unstable_moveFocusToRelativeCell(n,a,l)};if(r)return s(),void v(n,null);var c=uv(e.current.state),d=e.current.getRow(n);if(!Object.values(c[n]).some((function(e){return e.isProcessingProps}))&&!Object.values(c[n]).some((function(e){return e.error}))){var p=e.current.unstable_getRowWithUpdatedValuesFromRowEditing(n);if(o){var h=function(e){u?u(e):Iv()};try{Promise.resolve(o(p,d)).then((function(t){e.current.updateRows([t]),s(),v(n,null)})).catch(h)}catch(f){h(f)}}else e.current.updateRows([p]),s(),v(n,null)}}),[e,u,o,g,v]),k=n.useCallback((function(t){var n=t.id,r=t.field,a=t.value;c(n,r);var o=e.current.getColumn(r),u=e.current.getRow(n),s=a;o.valueParser&&(s=o.valueParser(a,e.current.getCellParams(n,r)));var g=uv(e.current.state),d=(0,l.Z)({},g[n][r],{value:s});return o.preProcessEditCellProps||b(n,r,d),new Promise((function(t){var a=[];if(o.preProcessEditCellProps){var c=d.value!==g[n][r].value;d=(0,l.Z)({},d,{isProcessingProps:!0}),b(n,r,d);var p=g[n],h=(0,ge.Z)(p,[r].map(bs)),f=Promise.resolve(o.preProcessEditCellProps({id:n,row:u,props:d,hasChanged:c,otherFieldsProps:h})).then((function(a){e.current.getRowMode(n)!==gI.View?(g=uv(e.current.state),(a=(0,l.Z)({},a,{isProcessingProps:!1})).value=o.preProcessEditCellProps?g[n][r].value:s,b(n,r,a)):t(!1)}));a.push(f)}Object.entries(g[n]).forEach((function(o){var s=(0,i.Z)(o,2),c=s[0],d=s[1];if(c!==r){var p=e.current.getColumn(c);if(p.preProcessEditCellProps){d=(0,l.Z)({},d,{isProcessingProps:!0}),b(n,c,d);var h=(g=uv(e.current.state))[n],f=(0,ge.Z)(h,[c].map(bs)),C=Promise.resolve(p.preProcessEditCellProps({id:n,row:u,props:d,hasChanged:!1,otherFieldsProps:f})).then((function(r){e.current.getRowMode(n)!==gI.View?(r=(0,l.Z)({},r,{isProcessingProps:!1}),b(n,c,r)):t(!1)}));a.push(C)}}})),Promise.all(a).then((function(){e.current.getRowMode(n)===gI.Edit?(g=uv(e.current.state),t(!g[n][r].error)):t(!1)}))}))}),[e,c,b]),Z=n.useCallback((function(t){var n=uv(e.current.state),r=e.current.getRow(t),a=(0,l.Z)({},r);return Object.entries(n[t]).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],o=n[1],l=e.current.getColumn(r);l.valueSetter?a=l.valueSetter({value:o.value,row:a}):a[r]=o.value})),a}),[e]);ls(e,{getRowMode:m,startRowEditMode:A,stopRowEditMode:y,unstable_setRowEditingEditCellValue:k,unstable_getRowWithUpdatedValuesFromRowEditing:Z})}(e,t);var r=n.useRef({}),a=t.isCellEditable,o=n.useCallback((function(e){return!e.rowNode.isAutoGenerated&&(!!e.colDef.editable&&(!!e.colDef.renderEditCell&&(!a||a(e))))}),[a]);n.useEffect((function(){var e=r.current;return function(){Object.entries(e).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];Object.keys(a).forEach((function(t){var n=(0,i.Z)(e[r][t],1)[0];clearTimeout(n),delete e[r][t]}))}))}}),[]);var u=n.useCallback((function(e,t){if(r.current[e])if(t){if(r.current[e][t]){(0,(0,i.Z)(r.current[e][t],2)[1])()}}else Object.keys(r.current[e]).forEach((function(t){(0,(0,i.Z)(r.current[e][t],2)[1])()}))}),[]),s=n.useCallback((function(n){var a=n.id,o=n.field,l=n.debounceMs;return new Promise((function(u){!function(e,t,n,a){if(n){if(r.current[e]||(r.current[e]={}),r.current[e][t]){var o=(0,i.Z)(r.current[e][t],1)[0];clearTimeout(o)}var l=setTimeout((function(){a(),delete r.current[e][t]}),n);r.current[e][t]=[l,function(){var n=(0,i.Z)(r.current[e][t],1)[0];clearTimeout(n),a(),delete r.current[e][t]}]}else a()}(a,o,l,j(q().mark((function r(){var i,l;return q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.editMode===sI.Row?e.current.unstable_setRowEditingEditCellValue:e.current.unstable_setCellEditingEditCellValue,e.current.getCellMode(a,o)!==cI.Edit){r.next=6;break}return r.next=4,i(n);case 4:l=r.sent,u(l);case 6:case"end":return r.stop()}}),r)}))))}))}),[e,t.editMode]),c=n.useCallback((function(n,r){return t.editMode===sI.Cell?e.current.unstable_getRowWithUpdatedValuesFromCellEditing(n,r):e.current.unstable_getRowWithUpdatedValuesFromRowEditing(n)}),[e,t.editMode]);ls(e,{isCellEditable:o,setEditCellValue:s,unstable_runPendingEditCellValueMutation:u,unstable_getRowWithUpdatedValues:c})};function bv(e,t,n){var r=t?t(e):e.id;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A row was provided without id in the rows prop:";if(null==e)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",n,JSON.stringify(t)].join("\n"))}(r,e,n),r}var Av=function(e){var t,n=e.prevState,r=e.rows,a=e.getRowId;if(r){t={idRowsLookup:{},ids:[]};for(var o=0;o<r.length;o+=1){var i=r[o],l=bv(i,a);t.idRowsLookup[l]=i,t.ids.push(l)}}else t=n.value;return{value:t,rowsBeforePartialUpdates:null!=r?r:n.rowsBeforePartialUpdates}},yv=function(e,t,n,r,a){var o=e.state.value,i=null!=r?r:0,u=n.current.unstable_applyStrategyProcessor("rowTreeCreation",(0,l.Z)({},o,{previousTree:t})),s=1===u.treeDepth?u.ids.length:Object.values(u.tree).filter((function(e){return null==e.parent})).length;return(0,l.Z)({},u,{loading:a,totalRowCount:Math.max(i,u.ids.length),totalTopLevelRowCount:Math.max(i,s)})},kv=function(e,t,n){var r={state:Av({rows:t.rows,getRowId:t.getRowId,prevState:{value:{idRowsLookup:{},ids:[]},rowsBeforePartialUpdates:[]}}),timeout:null,lastUpdateMs:Date.now()};return(0,l.Z)({},e,{rows:yv(r,null,n,t.rowCount,t.loading),rowsCache:r})},Zv=function(e){for(var t=e.ids,n=e.idRowsLookup,r=e.previousTree,a={},o=0;o<t.length;o+=1){var i=t[o];r&&r[i]?a[i]=r[i]:a[i]={id:i,depth:0,parent:null,groupingKey:"",groupingField:null}}return{groupingName:As,tree:a,treeDepth:1,idRowsLookup:n,ids:t}};function Sv(e,t){return e.closest(".".concat(t))}function wv(e){return e.replace(/["\\]/g,"\\$&")}function Bv(e,t){return e.querySelector(".".concat(ml.row,'[data-id="').concat(wv(String(t)),'"]'))}wl(["MUI: You are calling getValue. This method is deprecated and will be removed in the next major version.","Instead, you can access the data from `params.row`."]);function xv(e){var t=n.useCallback((function(t){return{field:t,colDef:e.current.getColumn(t)}}),[e]),r=n.useCallback((function(){var t;return(t=e.current).getCellValue.apply(t,arguments)}),[e]),a=n.useCallback((function(t){var n=e.current.getRow(t);if(!n)throw new Error("No row with id #".concat(t," found"));return{id:t,columns:e.current.getAllColumns(),row:n,getValue:r}}),[e,r]),o=n.useCallback((function(t,n){var a=e.current.getRow(t),o=e.current.getRowNode(t);if(!a||!o)throw new Error("No row with id #".concat(t," found"));var i=pm(e),l=Cm(e);return{id:t,field:n,row:a,rowNode:o,value:a[n],colDef:e.current.getColumn(n),cellMode:e.current.getCellMode(t,n),getValue:r,api:e.current,hasFocus:null!==i&&i.field===n&&i.id===t,tabIndex:l&&l.field===n&&l.id===t?0:-1}}),[e,r]),i=n.useCallback((function(t,n){var a=e.current.getColumn(n),o=e.current.getCellValue(t,n),i=e.current.getRow(t),l=e.current.getRowNode(t);if(!i||!l)throw new Error("No row with id #".concat(t," found"));var u=pm(e),s=Cm(e),c={id:t,field:n,row:i,rowNode:l,colDef:a,cellMode:e.current.getCellMode(t,n),getValue:r,hasFocus:null!==u&&u.field===n&&u.id===t,tabIndex:s&&s.field===n&&s.id===t?0:-1,value:o,formattedValue:o};return a.valueFormatter&&(c.formattedValue=a.valueFormatter({id:t,field:c.field,value:c.value,api:e.current})),c.isEditable=a&&e.current.isCellEditable(c),c}),[e,r]),l=n.useCallback((function(t,n){var r=e.current.getColumn(n);if(!r||!r.valueGetter){var a=e.current.getRow(t);if(!a)throw new Error("No row with id #".concat(t," found"));return a[n]}return r.valueGetter(o(t,n))}),[e,o]),u=n.useCallback((function(t){return e.current.rootElementRef.current?function(e,t){return e.querySelector('[role="columnheader"][data-field="'.concat(wv(t),'"]'))}(e.current.rootElementRef.current,t):null}),[e]),s=n.useCallback((function(t){return e.current.rootElementRef.current?Bv(e.current.rootElementRef.current,t):null}),[e]),c=n.useCallback((function(t,n){return e.current.rootElementRef.current?function(e,t){var n=t.id,r=t.field,a=Bv(e,n);return a?a.querySelector(".".concat(ml.cell,'[data-field="').concat(wv(r),'"]')):null}(e.current.rootElementRef.current,{id:t,field:n}):null}),[e]);ls(e,{getCellValue:l,getCellParams:i,getCellElement:c,getRowParams:a,getRowElement:s,getColumnHeaderParams:t,getColumnHeaderElement:u})}var Gv=function(e,t){return null==e||Array.isArray(e)?e:t&&t[0]===e?t:[e]},Rv=function(e,t){var n;return(0,l.Z)({},e,{selection:null!=(n=Gv(t.selectionModel))?n:[]})},Wv=function(e,t){var r=function(e){var t=e.classes;return n.useMemo((function(){return(0,he.Z)({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},Il,t)}),[t])}({classes:t.classes}),a=n.useCallback((function(n){var a=(0,l.Z)({},Rm,{cellClassName:r.cellCheckbox,headerClassName:r.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),o=t.checkboxSelection,i=null!=n.lookup[a.field];return o&&!i?(n.lookup[a.field]=a,n.all=[a.field].concat((0,Ae.Z)(n.all))):!o&&i&&(delete n.lookup[a.field],n.all=n.all.filter((function(e){return e!==a.field}))),n}),[e,r,t.checkboxSelection]);Ws(e,"hydrateColumns",a)},Vv=function(e,t){var n,r,a,o,i=null!=(n=null!=(r=t.sortModel)?r:null==(a=t.initialState)||null==(o=a.sorting)?void 0:o.sortModel)?n:[];return(0,l.Z)({},e,{sorting:{sortModel:Qc(i,t.disableMultipleColumnsSorting),sortedRows:[]}})};function Fv(e){var t=e.clientHeight,n=e.scrollTop,r=e.offsetHeight,a=e.offsetTop,o=a+r;return o-t>n?o-t:a<n?a:void 0}var Nv=function(e){return(0,l.Z)({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}})},Ev=function(e){var t,r,o=Zs(void 0,e);return Wv(o,e),function(e){Tm(e,As,"rowTreeCreation",Zv)}(o),Ss(Rv,o,e),Ss(im,o,e),Ss(kv,o,e),Ss(null!=(t=e.experimentalFeatures)&&t.newEditingApi?mv:dv,o,e),Ss(Qm,o,e),Ss(Vv,o,e),Ss(lv,o,e),Ss(_m,o,e),Ss(um,o,e),Ss(av,o,e),Ss(Nv,o,e),Ss(Gs,o,e),function(e,t){var r=ru(e,"useGridKeyboardNavigation"),a=jm(e,t),o=n.useCallback((function(t,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",i=null==(a=Vu(e)[n])?void 0:a.id,l=e.current.unstable_getCellColSpanInfo(i,t);l&&l.spannedByColSpan&&("left"===o?t=l.leftVisibleCellIndex:"right"===o&&(t=l.rightVisibleCellIndex)),r.debug("Navigating to cell row ".concat(n,", col ").concat(t)),e.current.scrollToIndexes({colIndex:t,rowIndex:n});var u=e.current.getVisibleColumns()[t].field;e.current.setCellFocus(i,u)}),[e,r]),i=n.useCallback((function(t,n){r.debug("Navigating to header col ".concat(t)),e.current.scrollToIndexes({colIndex:t});var a=e.current.getVisibleColumns()[t].field;e.current.setColumnHeaderFocus(a,n)}),[e,r]),l=n.useCallback((function(t,n){var r=e.current.getRootDimensions();if(a.range&&r){var l=e.current.unstable_getViewportPageSize(),u=Vu(e),s=t.field?e.current.getColumnIndex(t.field):0,c=u.findIndex((function(e){return e.id===t.id})),g=a.range.firstRowIndex,d=a.range.lastRowIndex,p=El(e).length-1,h=!0;switch(n.key){case"ArrowDown":case"Enter":c<d&&o(s,c+1);break;case"ArrowUp":c>g?o(s,c-1):i(s,n);break;case"ArrowRight":s<p&&o(s+1,c,"right");break;case"ArrowLeft":s>0&&o(s-1,c);break;case"Tab":n.shiftKey&&s>0?o(s-1,c,"left"):!n.shiftKey&&s<p&&o(s+1,c,"right");break;case" ":if(t.field===qm)break;var f=t.colDef;if(f&&"treeDataGroup"===f.type)break;!n.shiftKey&&c<d&&o(s,Math.min(c+l,d));break;case"PageDown":c<d&&o(s,Math.min(c+l,d));break;case"PageUp":var C=Math.max(c-l,g);C!==c&&C>=g?o(s,C):i(s,n);break;case"Home":n.ctrlKey||n.metaKey||n.shiftKey?o(0,g):o(0,c);break;case"End":n.ctrlKey||n.metaKey||n.shiftKey?o(p,d):o(p,c);break;default:h=!1}h&&n.preventDefault()}}),[e,a,o,i]),u=n.useCallback((function(t,n){var r,l,u,s,c=n.currentTarget.querySelector(".".concat(ml.columnHeaderTitleContainerContent));if((!c||!c.contains(n.target)||t.field===Rm.field)&&e.current.getRootDimensions()){var g=e.current.unstable_getViewportPageSize(),d=t.field?e.current.getColumnIndex(t.field):0,p=null!=(r=null==(l=a.range)?void 0:l.firstRowIndex)?r:null,h=null!=(u=null==(s=a.range)?void 0:s.lastRowIndex)?u:null,f=El(e).length-1,C=!0;switch(n.key){case"ArrowDown":null!==p&&o(d,p);break;case"ArrowRight":d<f&&i(d+1,n);break;case"ArrowLeft":d>0&&i(d-1,n);break;case"PageDown":null!==p&&null!==h&&o(d,Math.min(p+g,h));break;case"Home":i(0,n);break;case"End":i(f,n);break;case"Enter":(n.ctrlKey||n.metaKey)&&e.current.toggleColumnMenu(t.field);break;case" ":break;default:C=!1}C&&n.preventDefault()}}),[e,a,o,i]),s=n.useCallback((function(t,n){if(n.currentTarget.contains(n.target)){var r=e.current.getCellParams(t.id,t.field);r.cellMode!==cI.Edit&&SI(n.key)&&e.current.publishEvent(fu.cellNavigationKeyDown,r,n)}}),[e]);hs(e,fu.cellNavigationKeyDown,l),hs(e,fu.columnHeaderKeyDown,u),hs(e,fu.cellKeyDown,s)}(o,e),function(e,t){var r=ru(e,"useGridSelection"),a=n.useMemo((function(){return Gv(t.selectionModel,mm(e.current.state))}),[e,t.selectionModel]),o=n.useRef(null);e.current.unstable_updateControlState({stateId:"selection",propModel:a,propOnChange:t.onSelectionModelChange,stateSelector:mm,changeEvent:fu.selectionChange});var u=t.checkboxSelection,s=t.disableMultipleSelection,c=t.disableSelectionOnClick,g=t.isRowSelectable,d=t.pagination,p=t.paginationMode,h=!s||u,f=jm(e,t),C=n.useCallback((function(t){var n,r=t,a=null!=(n=o.current)?n:t,i=e.current.isRowSelected(t);if(i){var l=Fu(e),u=l.findIndex((function(e){return e===a})),s=l.findIndex((function(e){return e===r}));if(u===s)return;r=u>s?l[s+1]:l[s-1]}o.current=t,e.current.selectRowRange({startId:a,endId:r},!i)}),[e]),I=n.useCallback((function(t){mm(e.current.state)!==t&&(r.debug("Setting selection model"),e.current.setState((function(e){return(0,l.Z)({},e,{selection:t})})),e.current.forceUpdate())}),[e,r]),m=n.useCallback((function(t){return mm(e.current.state).includes(t)}),[e]),v=n.useCallback((function(){return bm(e)}),[e]),b=n.useCallback((function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!g||g(e.current.getRowParams(t)))if(o.current=t,a)r.debug("Setting selection for row ".concat(t)),e.current.setSelectionModel(n?[t]:[]);else{r.debug("Toggling selection for row ".concat(t));var i=mm(e.current.state).filter((function(e){return e!==t}));n&&i.push(t),(i.length<2||h)&&e.current.setSelectionModel(i)}}),[e,g,r,h]),A=n.useCallback((function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.debug("Setting selection for several rows");var o,i=g?t.filter((function(t){return g(e.current.getRowParams(t))})):t;if(a)o=n?i:[];else{var u=(0,l.Z)({},Am(e));i.forEach((function(e){n?u[e]=e:delete u[e]})),o=Object.values(u)}(o.length<2||h)&&e.current.setSelectionModel(o)}),[e,g,r,h]),y=n.useCallback((function(t){var n=t.startId,a=t.endId,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=arguments.length>2?arguments[2]:void 0;if(e.current.getRow(n)&&e.current.getRow(a)){r.debug("Expanding selection from row ".concat(n," to row ").concat(a));var u=Fu(e),s=u.indexOf(n),c=u.indexOf(a),g=s>c?[c,s]:[s,c],d=(0,i.Z)(g,2),p=d[0],h=d[1],f=u.slice(p,h+1);e.current.selectRows(f,o,l)}}),[e,r]);ls(e,{selectRow:b,selectRows:A,selectRowRange:y,setSelectionModel:I,getSelectedRows:v,isRowSelected:m});var k=n.useCallback((function(){var t=mm(e.current.state),n=jl(e),r=(0,l.Z)({},Am(e)),a=!1;t.forEach((function(e){n[e]||(delete r[e],a=!0)})),a&&e.current.setSelectionModel(Object.values(r))}),[e]),Z=n.useCallback((function(t,n){var r=n.metaKey||n.ctrlKey,a=!u&&!r&&!wI(n),o=!h||a,i=e.current.isRowSelected(t);o?e.current.selectRow(t,!!a||!i,!0):e.current.selectRow(t,!i,!1)}),[e,h,u]),S=n.useCallback((function(t,n){if(!c&&t.field!==Rm.field&&t.field!==qm){if(t.field&&e.current.getColumn(t.field).type===_I)return;n.shiftKey&&(h||u)?C(t.id):Z(t.id,n)}}),[c,h,u,e,C,Z]),w=n.useCallback((function(e,t){var n;h&&t.shiftKey&&(null==(n=window.getSelection())||n.removeAllRanges())}),[h]),B=n.useCallback((function(t,n){n.nativeEvent.shiftKey?C(t.id):e.current.selectRow(t.id,t.value)}),[e,C]),x=n.useCallback((function(n){var r=t.checkboxSelectionVisibleOnly&&t.pagination?Bm(e):Fu(e);e.current.selectRows(r,n.value)}),[e,t.checkboxSelectionVisibleOnly,t.pagination]),G=n.useCallback((function(t,n){if(e.current.getCellMode(t.id,t.field)!==cI.Edit&&n.currentTarget.contains(n.target)){if(SI(n.key)&&n.shiftKey){var r=pm(e);if(r&&r.id!==t.id){n.preventDefault();var a=e.current.isRowSelected(r.id);if(!h)return void e.current.selectRow(r.id,!a,!0);var o,i,l=e.current.getRowIndexRelativeToVisibleRows(r.id),u=e.current.getRowIndexRelativeToVisibleRows(t.id);l>u?a?(o=u,i=l-1):(o=u,i=l):a?(o=l+1,i=u):(o=l,i=u);var s=f.rows.slice(o,i+1).map((function(e){return e.id}));return void e.current.selectRows(s,!a)}}if(" "===n.key&&n.shiftKey)return n.preventDefault(),void Z(t.id,n);"a"===n.key.toLowerCase()&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),A(e.current.getAllRowIds(),!0))}}),[e,Z,A,f.rows,h]);hs(e,fu.sortedRowsSet,k),hs(e,fu.cellClick,S),hs(e,fu.rowSelectionCheckboxChange,B),hs(e,fu.headerSelectionCheckboxChange,x),hs(e,fu.cellMouseDown,w),hs(e,fu.cellKeyDown,G),n.useEffect((function(){void 0!==a&&e.current.setSelectionModel(a)}),[e,a]);var R=null!=a;n.useEffect((function(){if(!R){var t=mm(e.current.state);if(g){var n=t.filter((function(t){return g(e.current.getRowParams(t))}));n.length<t.length&&e.current.setSelectionModel(n)}}}),[e,g,R]),n.useEffect((function(){var t=mm(e.current.state);if(!h&&t.length>1){var n=Um(e,{pagination:d,paginationMode:p}).rows.reduce((function(e,t){return e[t.id]=!0,e}),{}),r=t.find((function(t){var r=!0;return g&&(r=g(e.current.getRowParams(t))),r&&n[t]}));e.current.setSelectionModel(void 0!==r?[r]:[])}}),[e,h,u,s,g,d,p])}(o,e),function(e,t){var r,o,i,u=ru(e,"useGridColumns"),s=n.useMemo((function(){return qI(t.columnTypes)}),[t.columnTypes]),c=n.useRef(t.columns),g=n.useRef(s),d=n.useRef(!!t.columnVisibilityModel||!(null==(r=t.initialState)||null==(o=r.columns)||!o.columnVisibilityModel));e.current.unstable_updateControlState({stateId:"visibleColumns",propModel:t.columnVisibilityModel,propOnChange:t.onColumnVisibilityModelChange,stateSelector:Nl,changeEvent:fu.columnVisibilityModelChange});var p=n.useCallback((function(t){u.debug("Updating columns state."),e.current.setState(nm(t)),e.current.forceUpdate(),e.current.publishEvent(fu.columnsChange,t.all)}),[u,e]),h=n.useCallback((function(t){return Vl(e)[t]}),[e]),f=n.useCallback((function(){return Fl(e)}),[e]),C=n.useCallback((function(){return El(e)}),[e]),I=n.useCallback((function(){return Yl(e)}),[e]),m=n.useCallback((function(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?El(e):Fl(e)).findIndex((function(e){return e.field===t}))}),[e]),v=n.useCallback((function(t){var n=m(t);return Dl(e)[n]}),[e,m]),b=n.useCallback((function(t){Nl(e)!==t&&(e.current.setState((function(n){return(0,l.Z)({},n,{columns:tm({apiRef:e,columnTypes:s,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!1,currentColumnVisibilityModel:t,keepOnlyColumnsToUpsert:!1})})})),e.current.forceUpdate())}),[e,s]),A=n.useCallback((function(t){var n=tm({apiRef:e,columnTypes:s,columnsToUpsert:t,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!0,keepOnlyColumnsToUpsert:!1});p(n)}),[e,p,s]),y=n.useCallback((function(t){return e.current.updateColumns([t])}),[e]),k=n.useCallback((function(t,n){if(d.current){var r,a=Nl(e);if(n!==(null==(r=a[t])||r)){var o=(0,l.Z)({},a,(0,le.Z)({},t,n));e.current.setColumnVisibilityModel(o)}}else{var i=e.current.getColumn(t),u=(0,l.Z)({},i,{hide:!n});e.current.updateColumns([u]);var s={field:t,colDef:u,isVisible:n};e.current.publishEvent(fu.columnVisibilityChange,s)}}),[e]),Z=n.useCallback((function(t,n){var r=Wl(e),a=r.findIndex((function(e){return e===t}));if(a!==n){u.debug("Moving column ".concat(t," to index ").concat(n));var o=(0,Ae.Z)(r);o.splice(n,0,o.splice(a,1)[0]),p((0,l.Z)({},Rl(e.current.state),{all:o}));var i={field:t,element:e.current.getColumnHeaderElement(t),colDef:e.current.getColumn(t),targetIndex:n,oldIndex:a};e.current.publishEvent(fu.columnOrderChange,i)}}),[e,u,p]),S=n.useCallback((function(t,n){u.debug("Updating column ".concat(t," width to ").concat(n));var r=e.current.getColumn(t),a=(0,l.Z)({},r,{width:n});e.current.updateColumns([a]),e.current.publishEvent(fu.columnWidthChange,{element:e.current.getColumnHeaderElement(t),colDef:a,width:n})}),[e,u]);ls(e,{getColumn:h,getAllColumns:f,getColumnIndex:m,getColumnPosition:v,getVisibleColumns:C,getColumnsMeta:I,updateColumn:y,updateColumns:A,setColumnVisibilityModel:b,setColumnVisibility:k,setColumnIndex:Z,setColumnWidth:S});var w=n.useCallback((function(t){var n={};if(d.current){var r=Nl(e),a=Object.values(r).some((function(e){return!1===e}));a&&(n.columnVisibilityModel=r)}n.orderedFields=Wl(e);var o=Fl(e),i={};return o.forEach((function(e){if(e.hasBeenResized){var t={};QI.forEach((function(n){var r=e[n];r===1/0&&(r=-1),t[n]=r})),i[e.field]=t}})),Object.keys(i).length>0&&(n.dimensions=i),(0,l.Z)({},t,{columns:n})}),[e]),B=n.useCallback((function(t,n){var r,a=d.current?null==(r=n.stateToRestore.columns)?void 0:r.columnVisibilityModel:void 0,o=n.stateToRestore.columns;if(null==a&&null==o)return t;var i=tm({apiRef:e,columnTypes:s,columnsToUpsert:[],initialState:o,shouldRegenColumnVisibilityModelFromColumns:!d.current,currentColumnVisibilityModel:a,keepOnlyColumnsToUpsert:!1});return e.current.setState(nm(i)),null!=o&&e.current.publishEvent(fu.columnsChange,i.all),t}),[e,s]),x=n.useCallback((function(e,n){if(n===$I.columns){var r,o=t.components.ColumnsPanel;return(0,a.jsx)(o,(0,l.Z)({},null==(r=t.componentsProps)?void 0:r.columnsPanel))}return e}),[t.components.ColumnsPanel,null==(i=t.componentsProps)?void 0:i.columnsPanel]);Ws(e,"exportState",w),Ws(e,"restoreState",B),Ws(e,"preferencePanel",x);var G=n.useRef(null);hs(e,fu.viewportInnerSizeChange,(function(t){G.current!==t.width&&(G.current=t.width,p(em(Rl(e.current.state),t.width)))})),Cs(e,fu.columnVisibilityChange,t.onColumnVisibilityChange);var R=n.useCallback((function(){u.info("Columns pipe processing have changed, regenerating the columns");var t=tm({apiRef:e,columnTypes:s,columnsToUpsert:[],initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!d.current,keepOnlyColumnsToUpsert:!1});p(t)}),[e,u,p,s]);Vs(e,"hydrateColumns",R);var W=n.useRef(!0);n.useEffect((function(){if(W.current)W.current=!1;else if(u.info("GridColumns have changed, new length ".concat(t.columns.length)),c.current!==t.columns||g.current!==s){var n=tm({apiRef:e,columnTypes:s,initialState:void 0,shouldRegenColumnVisibilityModelFromColumns:!d.current,columnsToUpsert:t.columns,keepOnlyColumnsToUpsert:!0});c.current=t.columns,g.current=s,p(n)}}),[u,e,p,t.columns,s]),n.useEffect((function(){void 0!==t.columnVisibilityModel&&e.current.setColumnVisibilityModel(t.columnVisibilityModel)}),[e,u,t.columnVisibilityModel])}(o,e),function(e,t){var r=ru(e,"useGridRows"),a=n.useRef(e.current.state.rowsCache),o=jm(e,t),i=n.useCallback((function(t){var n;return null!=(n=jl(e)[t])?n:null}),[e]),u=n.useMemo((function(){return o.rows.reduce((function(e,t,n){return e[t.id]=n,e}),{})}),[o.rows]),s=n.useCallback((function(n,r){var o=function(){a.current.timeout=null,a.current.lastUpdateMs=Date.now(),e.current.setState((function(n){return(0,l.Z)({},n,{rows:yv(a.current,Ql(e),e,t.rowCount,t.loading)})})),e.current.publishEvent(fu.rowsSet),e.current.forceUpdate()};if(a.current.timeout&&clearTimeout(a.current.timeout),a.current.state=n,a.current.timeout=null,r){var i=t.throttleRowsMs-(Date.now()-a.current.lastUpdateMs);i>0?a.current.timeout=setTimeout(o,i):o()}else o()}),[t.throttleRowsMs,t.rowCount,t.loading,e]),c=n.useCallback((function(e){r.debug("Updating all rows, new length ".concat(e.length)),s(Av({rows:e,prevState:a.current.state,getRowId:t.getRowId}),!0)}),[r,t.getRowId,s]),g=n.useCallback((function(n){if(t.signature===us.DataGrid&&n.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to the DataGridPro component to unlock this feature."].join("\n"));var r=new Map;n.forEach((function(e){var n=bv(e,t.getRowId,"A row was provided without id when calling updateRows():");r.has(n)?r.set(n,(0,l.Z)({},r.get(n),e)):r.set(n,e)}));var o=[],i={idRowsLookup:(0,l.Z)({},a.current.state.value.idRowsLookup),ids:(0,Ae.Z)(a.current.state.value.ids)};r.forEach((function(t,n){return"delete"===t._action?(delete i.idRowsLookup[n],void o.push(n)):e.current.getRow(n)?void(i.idRowsLookup[n]=(0,l.Z)({},e.current.getRow(n),t)):(i.idRowsLookup[n]=t,void i.ids.push(n))})),o.length>0&&(i.ids=i.ids.filter((function(e){return!o.includes(e)})));var u=(0,l.Z)({},a.current.state,{value:i});s(u,!0)}),[e,t.getRowId,s,t.signature]),d=n.useCallback((function(){var t=eu(e),n=jl(e);return new Map(t.map((function(e){return[e,n[e]]})))}),[e]),p=n.useCallback((function(){return _l(e)}),[e]),h=n.useCallback((function(){return eu(e)}),[e]),f=n.useCallback((function(e){return u[e]}),[u]),C=n.useCallback((function(t,n){var r=e.current.getRowNode(t);if(!r)throw new Error("MUI: No row with id #".concat(t," found"));var a=(0,l.Z)({},r,{childrenExpanded:n});e.current.setState((function(e){return(0,l.Z)({},e,{rows:(0,l.Z)({},e.rows,{tree:(0,l.Z)({},e.rows.tree,(0,le.Z)({},t,a))})})})),e.current.forceUpdate(),e.current.publishEvent(fu.rowExpansionChange,a)}),[e]),I=n.useCallback((function(t){var n;return null!=(n=Ql(e)[t])?n:null}),[e]),m={getRow:i,getRowModels:d,getRowsCount:p,getAllRowIds:h,setRows:c,setRowIndex:n.useCallback((function(t,n){var a=eu(e),o=a.findIndex((function(e){return e===t}));if(o!==n){r.debug("Moving row ".concat(t," to index ").concat(n));var i=(0,Ae.Z)(a);i.splice(n,0,i.splice(o,1)[0]),e.current.setState((function(e){return(0,l.Z)({},e,{rows:(0,l.Z)({},e.rows,{ids:i})})})),e.current.applySorting()}}),[e,r]),updateRows:g,setRowChildrenExpansion:C,getRowNode:I,getRowIndexRelativeToVisibleRows:f},v=n.useCallback((function(){var e;r.info("Row grouping pre-processing have changed, regenerating the row tree"),e=a.current.state.rowsBeforePartialUpdates===t.rows?void 0:t.rows,s(Av({rows:e,getRowId:t.getRowId,prevState:a.current.state}),!1)}),[r,s,t.getRowId,t.rows]),b=n.useCallback((function(e){"rowTreeCreation"===e&&v()}),[v]),A=n.useCallback((function(){e.current.unstable_getActiveStrategy("rowTree")!==ql(e)&&v()}),[e,v]);hs(e,fu.activeStrategyProcessorChange,b),hs(e,fu.strategyAvailabilityChange,A),ls(e,m),n.useEffect((function(){return function(){null!==a.current.timeout&&clearTimeout(a.current.timeout)}}),[]);var y=n.useRef(!0);n.useEffect((function(){y.current?y.current=!1:a.current.state.rowsBeforePartialUpdates!==t.rows&&(r.debug("Updating all rows, new length ".concat(t.rows.length)),s(Av({rows:t.rows,getRowId:t.getRowId,prevState:a.current.state}),!1))}),[t.rows,t.rowCount,t.getRowId,r,s])}(o,e),xv(o),function(e){var t=n.useRef({}),r=n.useCallback((function(e,n,r){var a=t.current;a[e]||(a[e]={}),a[e][n]=r}),[]),a=n.useCallback((function(e,n){var r;return null==(r=t.current[e])?void 0:r[n]}),[]),o=n.useCallback((function(t){var n=t.columnIndex,a=t.rowId,o=t.minFirstColumnIndex,i=t.maxLastColumnIndex,l=e.current.getVisibleColumns(),u=l.length,s=l[n],c="function"===typeof s.colSpan?s.colSpan(e.current.getCellParams(a,s.field)):s.colSpan;if(!c||1===c)return r(a,n,{spannedByColSpan:!1,cellProps:{colSpan:1,width:s.computedWidth}}),{colSpan:1};for(var g=s.computedWidth,d=1;d<c;d+=1){var p=n+d;p>=o&&p<i&&(g+=l[p].computedWidth,r(a,n+d,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(n+c,u-1),leftVisibleCellIndex:n})),r(a,n,{spannedByColSpan:!1,cellProps:{colSpan:c,width:g}})}return{colSpan:c}}),[e,r]),i=n.useCallback((function(e){for(var t=e.rowId,n=e.minFirstColumn,r=e.maxLastColumn,a=n;a<r;a+=1){var i=o({columnIndex:a,rowId:t,minFirstColumnIndex:n,maxLastColumnIndex:r});i.colSpan>1&&(a+=i.colSpan-1)}}),[o]);ls(e,{unstable_getCellColSpanInfo:a,unstable_calculateColSpan:i});var l=n.useCallback((function(){t.current={}}),[]);hs(e,fu.columnOrderChange,l)}(o),(null!=(r=e.experimentalFeatures)&&r.newEditingApi?vv:pv)(o,e),function(e,t){var r=ru(e,"useGridFocus"),a=n.useRef(null),o=n.useCallback((function(t,n){if(e.current.getRow(t)){var a=pm(e);(null==a?void 0:a.id)===t&&a.field===n||(e.current.setState((function(e){return r.debug("Focusing on cell with id=".concat(t," and field=").concat(n)),(0,l.Z)({},e,{tabIndex:{cell:{id:t,field:n},columnHeader:null},focus:{cell:{id:t,field:n},columnHeader:null}})})),e.current.forceUpdate(),e.current.publishEvent(fu.cellFocusIn,e.current.getCellParams(t,n)))}}),[e,r]),i=n.useCallback((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=pm(e);a&&e.current.publishEvent(fu.cellFocusOut,e.current.getCellParams(a.id,a.field),n),e.current.setState((function(e){return r.debug("Focusing on column header with colIndex=".concat(t)),(0,l.Z)({},e,{tabIndex:{columnHeader:{field:t},cell:null},focus:{columnHeader:{field:t},cell:null}})})),e.current.forceUpdate()}),[e,r]),u=n.useCallback((function(n,r,a){var o=e.current.getColumnIndex(r),i=e.current.getRowIndexRelativeToVisibleRows(n),l=El(e);"right"===a?o+=1:"left"===a?o-=1:i+=1;var u=Um(e,{pagination:t.pagination,paginationMode:t.paginationMode});o>=l.length?(i+=1)<u.rows.length&&(o=0):o<0&&(i-=1)>=0&&(o=l.length-1),i=es(i,0,u.rows.length-1),o=es(o,0,l.length-1);var s=u.rows[i],c=l[o];e.current.setCellFocus(s.id,c.field)}),[e,t.pagination,t.paginationMode]),s=n.useCallback((function(t){var n=t.id,r=t.field;e.current.setCellFocus(n,r)}),[e]),c=n.useCallback((function(t,n){"Enter"===n.key||"Tab"===n.key||SI(n.key)||e.current.setCellFocus(t.id,t.field)}),[e]),g=n.useCallback((function(t,n){var r=t.field;n.target===n.currentTarget&&e.current.setColumnHeaderFocus(r,n)}),[e]),d=n.useCallback((function(){r.debug("Clearing focus"),e.current.setState((function(e){return(0,l.Z)({},e,{focus:{cell:null,columnHeader:null}})}))}),[r,e]),p=n.useCallback((function(e){a.current=e}),[]),h=n.useCallback((function(t){var n=a.current;a.current=null;var r=pm(e);if(r){if((null==n?void 0:n.id)!==r.id||(null==n?void 0:n.field)!==r.field){var o=e.current.getCellElement(r.id,r.field);null!=o&&o.contains(t.target)||e.current.getRow(r.id)&&(e.current.publishEvent(fu.cellFocusOut,e.current.getCellParams(r.id,r.field),t),n?e.current.setCellFocus(n.id,n.field):(e.current.setState((function(e){return(0,l.Z)({},e,{focus:{cell:null,columnHeader:null}})})),e.current.forceUpdate()))}}else n&&e.current.setCellFocus(n.id,n.field)}),[e]),f=n.useCallback((function(t){if("view"!==t.cellMode){var n=pm(e);(null==n?void 0:n.id)===t.id&&(null==n?void 0:n.field)===t.field||e.current.setCellFocus(t.id,t.field)}}),[e]);ls(e,{setCellFocus:o,setColumnHeaderFocus:i,unstable_moveFocusToRelativeCell:u}),n.useEffect((function(){var t=pm(e);t&&(e.current.getRow(t.id)||e.current.setState((function(e){return(0,l.Z)({},e,{focus:{cell:null,columnHeader:null}})})))}),[e,t.rows]),n.useEffect((function(){var t=(0,Gh.Z)(e.current.rootElementRef.current);return t.addEventListener("click",h),function(){t.removeEventListener("click",h)}}),[e,h]),hs(e,fu.columnHeaderBlur,d),hs(e,fu.cellDoubleClick,s),hs(e,fu.cellMouseUp,p),hs(e,fu.cellKeyDown,c),hs(e,fu.cellModeChange,f),hs(e,fu.columnHeaderFocus,g)}(o,e),function(e){var t=ru(e,"useGridPreferencesPanel"),r=Tl(e,iv),a=n.useRef(),o=n.useRef(),i=n.useCallback((function(){t.debug("Hiding Preferences Panel"),r.openedPanelValue&&e.current.publishEvent(fu.preferencePanelClose,{openedPanelValue:r.openedPanelValue}),e.current.setState((function(e){return(0,l.Z)({},e,{preferencePanel:{open:!1}})})),e.current.forceUpdate()}),[e,t,r.openedPanelValue]),u=n.useCallback((function(){o.current=setTimeout((function(){return clearTimeout(a.current)}),0)}),[]),s=n.useCallback((function(){a.current=setTimeout(i,100)}),[i]),c=n.useCallback((function(n){t.debug("Opening Preferences Panel"),u(),e.current.setState((function(e){return(0,l.Z)({},e,{preferencePanel:(0,l.Z)({},e.preferencePanel,{open:!0,openedPanelValue:n})})})),e.current.publishEvent(fu.preferencePanelOpen,{openedPanelValue:n}),e.current.forceUpdate()}),[t,u,e]);ls(e,{showPreferences:c,hidePreferences:s});var g=n.useCallback((function(t){var n=iv(e.current.state);return n.open||n.openedPanelValue?(0,l.Z)({},t,{preferencePanel:n}):t}),[e]),d=n.useCallback((function(t,n){var r=n.stateToRestore.preferencePanel;return null!=r&&e.current.setState((function(e){return(0,l.Z)({},e,{preferencePanel:r})})),t}),[e]);Ws(e,"exportState",g),Ws(e,"restoreState",d),n.useEffect((function(){return function(){clearTimeout(a.current),clearTimeout(o.current)}}),[])}(o),Om(o,e),function(e,t){var r=ru(e,"useGridSorting");e.current.unstable_updateControlState({stateId:"sortModel",propModel:t.sortModel,propOnChange:t.onSortModelChange,stateSelector:wu,changeEvent:fu.sortModelChange});var a=n.useCallback((function(t,n){var r=wu(e),a=r.findIndex((function(e){return e.field===t})),o=(0,Ae.Z)(r);return a>-1?n?o.splice(a,1,n):o.splice(a,1):o=[].concat((0,Ae.Z)(r),[n]),o}),[e]),o=n.useCallback((function(n,r){var a,o=wu(e).find((function(e){return e.field===n.field}));if(o){var i,u=void 0===r?$c(null!=(i=n.sortingOrder)?i:t.sortingOrder,o.sort):r;return null==u?void 0:(0,l.Z)({},o,{sort:u})}return{field:n.field,sort:void 0===r?$c(null!=(a=n.sortingOrder)?a:t.sortingOrder):r}}),[e,t.sortingOrder]),i=n.useCallback((function(){e.current.setState((function(n){if(t.sortingMode===Hm)return r.debug("Skipping sorting rows as sortingMode = server"),(0,l.Z)({},n,{sorting:(0,l.Z)({},n.sorting,{sortedRows:eu(n,e.current.instanceId)})});var a=function(e,t){var n=e.map((function(e){return function(e,t){var n=t.current.getColumn(e.field);if(!n)return null;var r="desc"===e.sort?function(){return-1*n.sortComparator.apply(n,arguments)}:n.sortComparator;return{getSortCellParams:function(e){return{id:e,field:n.field,rowNode:t.current.getRowNode(e),value:t.current.getCellValue(e,n.field),api:t.current}},comparator:r}}(e,t)})).filter((function(e){return!!e}));return 0===n.length?null:function(e){return e.map((function(e){return{value:e,params:n.map((function(t){return t.getSortCellParams(e.id)}))}})).sort((function(e,t){return r=n,a=e.params,o=t.params,r.reduce((function(e,t,n){if(0!==e)return e;var r=a[n],i=o[n];return t.comparator(r.value,i.value,r,i)}),0);var r,a,o})).map((function(e){return e.value.id}))}}(wu(n,e.current.instanceId),e),o=e.current.unstable_applyStrategyProcessor("sorting",{sortRowList:a});return(0,l.Z)({},n,{sorting:(0,l.Z)({},n.sorting,{sortedRows:o})})})),e.current.publishEvent(fu.sortedRowsSet),e.current.forceUpdate()}),[e,r,t.sortingMode]),u=n.useCallback((function(n){wu(e)!==n&&(r.debug("Setting sort model"),e.current.setState(qc(n,t.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())}),[e,r,t.disableMultipleColumnsSorting]),s=n.useCallback((function(n,r,i){if(n.sortable){var l,u=o(n,r);l=!i||t.disableMultipleColumnsSorting?u?[u]:[]:a(n.field,u),e.current.setSortModel(l)}}),[e,a,o,t.disableMultipleColumnsSorting]),c=n.useCallback((function(){return wu(e)}),[e]),g=n.useCallback((function(){return Su(e).map((function(e){return e.model}))}),[e]),d=n.useCallback((function(){return Zu(e)}),[e]),p=n.useCallback((function(t){return e.current.getSortedRowIds().indexOf(t)}),[e]),h=n.useCallback((function(t){return e.current.getSortedRowIds()[t]}),[e]);ls(e,{getSortModel:c,getSortedRows:g,getSortedRowIds:d,getRowIndex:p,getRowIdFromRowIndex:h,setSortModel:u,sortColumn:s,applySorting:i});var f=n.useCallback((function(t){var n=wu(e);return 0===n.length?t:(0,l.Z)({},t,{sorting:{sortModel:n}})}),[e]),C=n.useCallback((function(n,r){var a,o=null==(a=r.stateToRestore.sorting)?void 0:a.sortModel;return null==o?n:(e.current.setState(qc(o,t.disableMultipleColumnsSorting)),(0,l.Z)({},n,{callbacks:[].concat((0,Ae.Z)(n.callbacks),[e.current.applySorting])}))}),[e,t.disableMultipleColumnsSorting]),I=n.useCallback((function(t){if(!t.sortRowList)return eu(e);var n=Ql(e);return t.sortRowList(Object.values(n))}),[e]);Ws(e,"exportState",f),Ws(e,"restoreState",C),Tm(e,As,"sorting",I);var m=n.useCallback((function(e,t){var n=e.colDef,r=t.shiftKey||t.metaKey||t.ctrlKey;s(n,void 0,r)}),[s]),v=n.useCallback((function(e,t){var n=e.colDef;!hI(t.key)||t.ctrlKey||t.metaKey||s(n,void 0,t.shiftKey)}),[s]),b=n.useCallback((function(){var t=wu(e),n=Vl(e);if(t.length>0){var r=t.filter((function(e){return n[e.field]}));r.length<t.length&&e.current.setSortModel(r)}}),[e]),A=n.useCallback((function(t){"sorting"===t&&e.current.applySorting()}),[e]);hs(e,fu.columnHeaderClick,m),hs(e,fu.columnHeaderKeyDown,v),hs(e,fu.rowsSet,e.current.applySorting),hs(e,fu.columnsChange,b),hs(e,fu.activeStrategyProcessorChange,A),Rs((function(){e.current.applySorting()})),n.useEffect((function(){void 0!==t.sortModel&&e.current.setSortModel(t.sortModel)}),[e,t.sortModel])}(o,e),function(e,t){var r=ru(e,"useDensity"),a=n.useCallback((function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.headerHeight,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.rowHeight;r.debug("Set grid density to ".concat(n)),e.current.setState((function(e){var t=Tu(e),r=lm(n,a,o);return ts(t,r)?e:(0,l.Z)({},e,{density:r})})),e.current.forceUpdate()}),[r,e,t.headerHeight,t.rowHeight]);n.useEffect((function(){e.current.setDensity(t.density,t.headerHeight,t.rowHeight)}),[e,t.density,t.rowHeight,t.headerHeight]),ls(e,{setDensity:a})}(o,e),ov(o,e),function(e,t){var r=t.getRowHeight,a=t.getRowSpacing,o=n.useRef({}),i=Tl(e,Ku),u=Tl(e,xu),s=Tl(e,ym),c=Tl(e,ku),g=jm(e,t),d=n.useCallback((function(){e.current.setState((function(t){var n=[],i=zu(t,e.current.instanceId),u=Ku(t,e.current.instanceId),s=g.rows.reduce((function(t,s){var c;n.push(t);var d,p=o.current[s.id]&&o.current[s.id].isResized||!1;p?c=o.current[s.id].value:(c=u,r&&(c=null!=(d=r((0,l.Z)({},s,{densityFactor:i})))?d:u));var h={base:c};if(a){var f,C,I=e.current.getRowIndexRelativeToVisibleRows(s.id),m=a((0,l.Z)({},s,{isFirstVisible:0===I,isLastVisible:I===g.rows.length-1,indexRelativeToCurrentPage:I}));h.spacingTop=null!=(f=m.top)?f:0,h.spacingBottom=null!=(C=m.bottom)?C:0}var v=e.current.unstable_applyPipeProcessors("rowHeight",h,s),b=Object.values(v).reduce((function(e,t){return e+t}),0);return o.current[s.id]={value:c,sizes:v,isResized:p},t+b}),0);return(0,l.Z)({},t,{rowsMeta:{currentPageTotalHeight:s,positions:n}})})),e.current.forceUpdate()}),[e,g.rows,a,r]),p=n.useCallback((function(e,t){o.current[e]={value:t,isResized:!0,sizes:(0,l.Z)({},o.current[e].sizes,{base:t})},d()}),[d]);n.useEffect((function(){d()}),[i,u,s,c,d]),Vs(e,"rowHeight",d),ls(e,{unstable_getRowHeight:function(e){var t;return(null==(t=o.current[e])?void 0:t.value)||i},unstable_getRowInternalSizes:function(e){var t;return null==(t=o.current[e])?void 0:t.sizes},unstable_setRowHeight:p})}(o,e),function(e,t){var r=ru(e,"useGridScroll"),a=e.current.columnHeadersElementRef,o=e.current.windowRef,i=Tl(e,Vu),l=n.useCallback((function(n){var a=_l(e),l=El(e);if(null!=n.rowIndex&&0===a||0===l.length)return!1;r.debug("Scrolling to cell at row ".concat(n.rowIndex,", col: ").concat(n.colIndex," "));var u={};if(null!=n.colIndex){var s,c=Dl(e);if("undefined"!==typeof n.rowIndex){var g,d=null==(g=i[n.rowIndex])?void 0:g.id,p=e.current.unstable_getCellColSpanInfo(d,n.colIndex);p&&!p.spannedByColSpan&&(s=p.cellProps.width)}"undefined"===typeof s&&(s=l[n.colIndex].computedWidth),u.left=Fv({clientHeight:o.current.clientWidth,scrollTop:o.current.scrollLeft,offsetHeight:s,offsetTop:c[n.colIndex]})}if(null!=n.rowIndex){var h=Xm(e.current.state),f=km(e),C=Zm(e),I=t.pagination?n.rowIndex-f*C:n.rowIndex,m=h.positions[I+1]?h.positions[I+1]-h.positions[I]:h.currentPageTotalHeight-h.positions[I];u.top=Fv({clientHeight:o.current.clientHeight,scrollTop:o.current.scrollTop,offsetHeight:m,offsetTop:h.positions[I]})}return(void 0!==typeof(u=e.current.unstable_applyPipeProcessors("scrollToIndexes",u,n)).left||void 0!==typeof u.top)&&(e.current.scroll(u),!0)}),[r,e,o,t.pagination,i]),u=n.useCallback((function(e){o.current&&null!=e.left&&a.current&&(a.current.scrollLeft=e.left,o.current.scrollLeft=e.left,r.debug("Scrolling left: ".concat(e.left))),o.current&&null!=e.top&&(o.current.scrollTop=e.top,r.debug("Scrolling top: ".concat(e.top))),r.debug("Scrolling, updating container, and viewport")}),[o,a,r]),s=n.useCallback((function(){return null!=o&&o.current?{top:o.current.scrollTop,left:o.current.scrollLeft}:{top:0,left:0}}),[o]);ls(e,{scroll:u,scrollToIndexes:l,getScrollPosition:s})}(o,e),function(e){var t=ru(e,"useGridColumnMenu"),r=n.useCallback((function(n){e.current.setState((function(e){return e.columnMenu.open&&e.columnMenu.field===n?e:(t.debug("Opening Column Menu"),(0,l.Z)({},e,{columnMenu:{open:!0,field:n}}))}))&&(e.current.hidePreferences(),e.current.forceUpdate())}),[e,t]),a=n.useCallback((function(){e.current.setState((function(e){return e.columnMenu.open||void 0!==e.columnMenu.field?(t.debug("Hiding Column Menu"),(0,l.Z)({},e,{columnMenu:(0,l.Z)({},e.columnMenu,{open:!1,field:void 0})})):e}))&&e.current.forceUpdate()}),[e,t]),o=n.useCallback((function(n){t.debug("Toggle Column Menu");var o=xs(e.current.state);o.open&&o.field===n?a():r(n)}),[e,t,r,a]);ls(e,{showColumnMenu:r,hideColumnMenu:a,toggleColumnMenu:o}),hs(e,fu.columnResizeStart,a),hs(e,fu.virtualScrollerWheel,e.current.hideColumnMenu),hs(e,fu.virtualScrollerTouchMove,e.current.hideColumnMenu)}(o),Dm(o),function(e,t){var r=ru(e,"useGridPrintExport"),a=n.useRef(null),o=n.useRef(null),i=n.useRef({});n.useEffect((function(){a.current=(0,Gh.Z)(e.current.rootElementRef.current)}),[e]);var u=n.useCallback((function(t,n){return new Promise((function(r){if(t||n){var a=Nm({apiRef:e,options:{fields:t,allColumns:n}}).map((function(e){return e.field})),o=Fl(e),i={};o.forEach((function(e){i[e.field]=a.includes(e.field)})),e.current.setColumnVisibilityModel(i),r()}else r()}))}),[e]),s=n.useCallback((function(e){var t=document.createElement("iframe");return t.id="grid-print-window",t.src=window.location.href,t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}),[]),c=n.useCallback((function(t,n){var r,o,i,u=(0,l.Z)({copyStyles:!0,hideToolbar:!1,hideFooter:!1},n);t.onload=null;var s=t.contentDocument||(null==(r=t.contentWindow)?void 0:r.document);if(s){var c=Pu(e),g=Xm(e.current.state),d=e.current.rootElementRef.current,p=d.cloneNode(!0),h=p.querySelector(".".concat(ml.virtualScroller));h.style.height="auto",h.style.width="auto",h.parentElement.style.width="auto",h.parentElement.style.height="auto",p.querySelector(".".concat(ml.main)).style.overflow="visible",p.querySelector(".".concat(ml.columnHeaders)).querySelector(".".concat(ml.columnHeadersInner)).style.width="100%";var f,C,I=(null==(o=d.querySelector(".".concat(ml.toolbarContainer)))?void 0:o.clientHeight)||0,m=(null==(i=d.querySelector(".".concat(ml.footerContainer)))?void 0:i.clientHeight)||0;u.hideToolbar&&(null==(f=p.querySelector(".".concat(ml.toolbarContainer)))||f.remove(),I=0),u.hideFooter&&(null==(C=p.querySelector(".".concat(ml.footerContainer)))||C.remove(),m=0),p.style.height="".concat(g.currentPageTotalHeight+c+I+m,"px"),s.body.innerHTML="",s.body.appendChild(p);var v,b="function"===typeof u.pageStyle?u.pageStyle():u.pageStyle;if("string"===typeof b){var A=s.createElement("style");A.appendChild(s.createTextNode(b)),s.head.appendChild(A)}if(u.bodyClassName&&(v=s.body.classList).add.apply(v,(0,Ae.Z)(u.bodyClassName.split(" "))),u.copyStyles)for(var y=a.current.querySelectorAll("style, link[rel='stylesheet']"),k=0;k<y.length;k+=1){var Z=y[k];if("STYLE"===Z.tagName){var S=s.createElement(Z.tagName),w=Z.sheet;if(w){for(var B="",x=0;x<w.cssRules.length;x+=1)"string"===typeof w.cssRules[x].cssText&&(B+="".concat(w.cssRules[x].cssText,"\r\n"));S.appendChild(s.createTextNode(B)),s.head.appendChild(S)}}else if(Z.getAttribute("href")){for(var G=s.createElement(Z.tagName),R=0;R<Z.attributes.length;R+=1){var W=Z.attributes[R];W&&G.setAttribute(W.nodeName,W.nodeValue||"")}s.head.appendChild(G)}}t.contentWindow.print()}}),[e,a]),g=n.useCallback((function(t){var n,r;a.current.body.removeChild(t),e.current.restoreState(o.current||{}),null!=(n=o.current)&&null!=(r=n.columns)&&r.columnVisibilityModel||e.current.setColumnVisibilityModel(i.current),e.current.unstable_enableVirtualization(),o.current=null,i.current={}}),[e]),d=n.useCallback(function(){var n=j(q().mark((function n(l){var d,p;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.debug("Export data as Print"),e.current.rootElementRef.current){n.next=3;break}throw new Error("MUI: No grid root element available.");case 3:return o.current=e.current.exportState(),i.current=Nl(e),t.pagination&&(d=Xu(e),e.current.setPageSize(d)),n.next=8,u(null==l?void 0:l.fields,null==l?void 0:l.allColumns);case 8:e.current.unstable_disableVirtualization(),p=s(null==l?void 0:l.fileName),a.current.body.appendChild(p),p.onload=function(){return c(p,l)},p.contentWindow.onafterprint=function(){return g(p)};case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,r,e,s,c,g,u]);ls(e,{exportDataAsPrint:d})}(o,e),Bs(o),function(e,t){var r=ru(e,"useResizeContainer"),a=n.useRef(!1),o=n.useRef(null),i=n.useRef(null),l=Tl(e,Xm),u=Tl(e,Pu),s=n.useCallback((function(){var n,r=null==(n=e.current.rootElementRef)?void 0:n.current,a=Xl(e);if(o.current){var s;if(null!=t.scrollbarSize)s=t.scrollbarSize;else if(a&&r){var c=(0,Gh.Z)(r).createElement("div");c.style.width="99px",c.style.height="99px",c.style.position="absolute",c.style.overflow="scroll",c.className="scrollDiv",r.appendChild(c),s=c.offsetWidth-c.clientWidth,r.removeChild(c)}else s=0;var g={width:o.current.width,height:t.autoHeight?l.currentPageTotalHeight:o.current.height-u},d=function(e){var t=e.content,n=e.container,r=e.scrollBarSize,a=t.width>n.width,o=t.height>n.height,i=!1,l=!1;return(a||o)&&(i=a,(l=t.height+(i?r:0)>n.height)&&(i=t.width+r>n.width)),{hasScrollX:i,hasScrollY:l}}({content:{width:Math.round(a),height:l.currentPageTotalHeight},container:g,scrollBarSize:s}),p=d.hasScrollX,h=d.hasScrollY,f={viewportOuterSize:g,viewportInnerSize:{width:g.width-(h?s:0),height:g.height-(p?s:0)},hasScrollX:p,hasScrollY:h},C=i.current;i.current=f,f.viewportInnerSize.width===(null==C?void 0:C.viewportInnerSize.width)&&f.viewportInnerSize.height===(null==C?void 0:C.viewportInnerSize.height)||e.current.publishEvent(fu.viewportInnerSizeChange,f.viewportInnerSize)}}),[e,t.scrollbarSize,t.autoHeight,u,l.currentPageTotalHeight]),c=n.useCallback((function(){s(),e.current.publishEvent(fu.debouncedResize,o.current)}),[e,s]),g=n.useCallback((function(){return i.current}),[]),d=n.useCallback((function(){var n=e.current.getRootDimensions();if(!n)return 0;var r=Um(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(t.getRowHeight){var a=e.current.unstable_getRenderContext(),o=a.lastRowIndex-a.firstRowIndex;return Math.min(o-1,r.rows.length)}var i=Math.floor(n.viewportInnerSize.height/Ku(e));return Math.min(i,r.rows.length)}),[e,t.pagination,t.paginationMode,t.getRowHeight]);ls(e,{resize:c,getRootDimensions:g,unstable_getViewportPageSize:d,unstable_updateGridDimensionsRef:s});var p=n.useMemo((function(){return(0,Ph.Z)(c,60)}),[c]),h=n.useRef(!0),f=n.useCallback((function(e){o.current=e;var n=/jsdom/.test(window.navigator.userAgent);if(0!==e.height||a.current||t.autoHeight||n||(r.warn(["The parent of the grid has an empty height.","You need to make sure the container has an intrinsic height.","The grid displays with a height of 0px.","","You can find a solution in the docs:","https://mui.com/x/react-data-grid/layout/"].join("\n")),a.current=!0),0!==e.width||a.current||n||(r.warn(["The parent of the grid has an empty width.","You need to make sure the container has an intrinsic width.","The grid displays with a width of 0px.","","You can find a solution in the docs:","https://mui.com/x/react-data-grid/layout/"].join("\n")),a.current=!0),h.current)return c(),void(h.current=!1);p()}),[t.autoHeight,p,r,c]);(0,Cl.Z)((function(){return s()}),[s]),Cs(e,fu.sortedRowsSet,s),Cs(e,fu.pageChange,s),Cs(e,fu.pageSizeChange,s),Cs(e,fu.columnsChange,s),hs(e,fu.resize,f),Cs(e,fu.debouncedResize,t.onResize)}(o,e),function(e,t){Cs(e,fu.columnHeaderClick,t.onColumnHeaderClick),Cs(e,fu.columnHeaderDoubleClick,t.onColumnHeaderDoubleClick),Cs(e,fu.columnHeaderOver,t.onColumnHeaderOver),Cs(e,fu.columnHeaderOut,t.onColumnHeaderOut),Cs(e,fu.columnHeaderEnter,t.onColumnHeaderEnter),Cs(e,fu.columnHeaderLeave,t.onColumnHeaderLeave),Cs(e,fu.columnOrderChange,t.onColumnOrderChange),Cs(e,fu.cellClick,t.onCellClick),Cs(e,fu.cellDoubleClick,t.onCellDoubleClick),Cs(e,fu.cellKeyDown,t.onCellKeyDown),Cs(e,fu.cellFocusOut,t.onCellFocusOut),Cs(e,fu.preferencePanelClose,t.onPreferencePanelClose),Cs(e,fu.preferencePanelOpen,t.onPreferencePanelOpen),Cs(e,fu.rowDoubleClick,t.onRowDoubleClick),Cs(e,fu.rowClick,t.onRowClick),Cs(e,fu.componentError,t.onError),Cs(e,fu.stateChange,t.onStateChange)}(o,e),function(e){var t=n.useCallback((function(){return e.current.unstable_applyPipeProcessors("exportState",{})}),[e]),r=n.useCallback((function(t){e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:t}).callbacks.forEach((function(e){e()})),e.current.forceUpdate()}),[e]);ls(e,{exportState:t,restoreState:r})}(o),o},Dv={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",errorOverlayDefaultLabel:"An error occurred.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:function(e){return"".concat(e,1!==e?" active filters":" active filter")},toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelDeleteIconLabel:"Delete",filterPanelLinkOperator:"Logic operator",filterPanelOperators:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:function(e){return"".concat(e,1!==e?" active filters":" active filter")},columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:function(e){return"".concat(e.toLocaleString(),1!==e?" rows selected":" row selected")},footerTotalRows:"Total Rows:",footerTotalVisibleRows:function(e,t){return"".concat(e.toLocaleString()," of ").concat(t.toLocaleString())},checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:function(e){return"Group by ".concat(e)},unGroupColumn:function(e){return"Stop grouping by ".concat(e)},expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering"};function Xv(e){return(0,$e.Z)("PrivateSwitchBase",e)}(0,Ee.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var Jv=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Hv=(0,Ce.ZP)(it)((function(e){var t=e.ownerState;return(0,l.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),Yv=(0,Ce.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Tv=n.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,o=e.checkedIcon,u=e.className,s=e.defaultChecked,c=e.disabled,g=e.disableFocusRipple,d=void 0!==g&&g,p=e.edge,h=void 0!==p&&p,f=e.icon,C=e.id,I=e.inputProps,m=e.inputRef,v=e.name,b=e.onBlur,A=e.onChange,y=e.onFocus,k=e.readOnly,Z=e.required,S=e.tabIndex,w=e.type,B=e.value,x=(0,ge.Z)(e,Jv),G=(0,pC.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),R=(0,i.Z)(G,2),W=R[0],V=R[1],F=Ls(),N=c;F&&"undefined"===typeof N&&(N=F.disabled);var E="checkbox"===w||"radio"===w,D=(0,l.Z)({},e,{checked:W,disabled:N,disableFocusRipple:d,edge:h}),X=function(e){var t=e.classes,n=e.checked,r=e.disabled,a=e.edge,o={root:["root",n&&"checked",r&&"disabled",a&&"edge".concat((0,lt.Z)(a))],input:["input"]};return(0,he.Z)(o,Xv,t)}(D);return(0,a.jsxs)(Hv,(0,l.Z)({component:"span",className:(0,de.Z)(X.root,u),centerRipple:!0,focusRipple:!d,disabled:N,tabIndex:null,role:void 0,onFocus:function(e){y&&y(e),F&&F.onFocus&&F.onFocus(e)},onBlur:function(e){b&&b(e),F&&F.onBlur&&F.onBlur(e)},ownerState:D,ref:t},x,{children:[(0,a.jsx)(Yv,(0,l.Z)({autoFocus:n,checked:r,defaultChecked:s,className:X.input,disabled:N,id:E&&C,name:v,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;V(t),A&&A(e,t)}},readOnly:k,ref:m,required:Z,ownerState:D,tabIndex:S,type:w},"checkbox"===w&&void 0===B?{}:{value:B},I)),W?o:f]}))})),Mv=Tv,Kv=(0,uc.Z)((0,a.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Pv=(0,uc.Z)((0,a.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),zv=(0,uc.Z)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Lv(e){return(0,$e.Z)("MuiCheckbox",e)}var _v=(0,Ee.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),Ov=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],Uv=(0,Ce.ZP)(Mv,{shouldForwardProp:function(e){return(0,Ce.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,lt.Z)(n.color))]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({color:n.palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:(0,fe.Fq)("default"===r.color?n.palette.action.active:n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(t={},(0,le.Z)(t,"&.".concat(_v.checked,", &.").concat(_v.indeterminate),{color:n.palette[r.color].main}),(0,le.Z)(t,"&.".concat(_v.disabled),{color:n.palette.action.disabled}),t))})),jv=(0,a.jsx)(Pv,{}),Qv=(0,a.jsx)(Kv,{}),qv=(0,a.jsx)(zv,{}),$v=n.forwardRef((function(e,t){var r,o,i=(0,Ie.Z)({props:e,name:"MuiCheckbox"}),u=i.checkedIcon,s=void 0===u?jv:u,c=i.color,g=void 0===c?"primary":c,d=i.icon,p=void 0===d?Qv:d,h=i.indeterminate,f=void 0!==h&&h,C=i.indeterminateIcon,I=void 0===C?qv:C,m=i.inputProps,v=i.size,b=void 0===v?"medium":v,A=(0,ge.Z)(i,Ov),y=f?I:p,k=f?I:s,Z=(0,l.Z)({},i,{color:g,indeterminate:f,size:b}),S=function(e){var t=e.classes,n=e.indeterminate,r=e.color,a={root:["root",n&&"indeterminate","color".concat((0,lt.Z)(r))]},o=(0,he.Z)(a,Lv,t);return(0,l.Z)({},t,o)}(Z);return(0,a.jsx)(Uv,(0,l.Z)({type:"checkbox",inputProps:(0,l.Z)({"data-indeterminate":f},m),icon:n.cloneElement(y,{fontSize:null!=(r=y.props.fontSize)?r:b}),checkedIcon:n.cloneElement(k,{fontSize:null!=(o=k.props.fontSize)?o:b}),ownerState:Z,ref:t},A,{classes:S}))})),eb=$v;function tb(e){return(0,$e.Z)("MuiSwitch",e)}var nb=(0,Ee.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),rb=["className","color","edge","size","sx"],ab=(0,Ce.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.edge&&t["edge".concat((0,lt.Z)(n.edge))],t["size".concat((0,lt.Z)(n.size))]]}})((function(e){var t,n=e.ownerState;return(0,l.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===n.edge&&{marginLeft:-8},"end"===n.edge&&{marginRight:-8},"small"===n.size&&(t={width:40,height:24,padding:7},(0,le.Z)(t,"& .".concat(nb.thumb),{width:16,height:16}),(0,le.Z)(t,"& .".concat(nb.switchBase),(0,le.Z)({padding:4},"&.".concat(nb.checked),{transform:"translateX(16px)"})),t))})),ob=(0,Ce.ZP)(Mv,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var n=e.ownerState;return[t.switchBase,(0,le.Z)({},"& .".concat(nb.input),t.input),"default"!==n.color&&t["color".concat((0,lt.Z)(n.color))]]}})((function(e){var t,n=e.theme;return t={position:"absolute",top:0,left:0,zIndex:1,color:"light"===n.palette.mode?n.palette.common.white:n.palette.grey[300],transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest})},(0,le.Z)(t,"&.".concat(nb.checked),{transform:"translateX(20px)"}),(0,le.Z)(t,"&.".concat(nb.disabled),{color:"light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[600]}),(0,le.Z)(t,"&.".concat(nb.checked," + .").concat(nb.track),{opacity:.5}),(0,le.Z)(t,"&.".concat(nb.disabled," + .").concat(nb.track),{opacity:"light"===n.palette.mode?.12:.2}),(0,le.Z)(t,"& .".concat(nb.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({"&:hover":{backgroundColor:(0,fe.Fq)(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(t={},(0,le.Z)(t,"&.".concat(nb.checked),(0,le.Z)({color:n.palette[r.color].main,"&:hover":{backgroundColor:(0,fe.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(nb.disabled),{color:"light"===n.palette.mode?(0,fe.$n)(n.palette[r.color].main,.62):(0,fe._j)(n.palette[r.color].main,.55)})),(0,le.Z)(t,"&.".concat(nb.checked," + .").concat(nb.track),{backgroundColor:n.palette[r.color].main}),t))})),ib=(0,Ce.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:"light"===t.palette.mode?t.palette.common.black:t.palette.common.white,opacity:"light"===t.palette.mode?.38:.3}})),lb=(0,Ce.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){return{boxShadow:e.theme.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),ub=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiSwitch"}),r=n.className,o=n.color,i=void 0===o?"primary":o,u=n.edge,s=void 0!==u&&u,c=n.size,g=void 0===c?"medium":c,d=n.sx,p=(0,ge.Z)(n,rb),h=(0,l.Z)({},n,{color:i,edge:s,size:g}),f=function(e){var t=e.classes,n=e.edge,r=e.size,a=e.color,o=e.checked,i=e.disabled,u={root:["root",n&&"edge".concat((0,lt.Z)(n)),"size".concat((0,lt.Z)(r))],switchBase:["switchBase","color".concat((0,lt.Z)(a)),o&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},s=(0,he.Z)(u,tb,t);return(0,l.Z)({},t,s)}(h),C=(0,a.jsx)(lb,{className:f.thumb,ownerState:h});return(0,a.jsxs)(ab,{className:(0,de.Z)(f.root,r),sx:d,ownerState:h,children:[(0,a.jsx)(ob,(0,l.Z)({type:"checkbox",icon:C,checkedIcon:C,ref:t,ownerState:h},p,{classes:(0,l.Z)({},f,{root:f.switchBase})})),(0,a.jsx)(ib,{className:f.track,ownerState:h})]})})),sb=ub;function cb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Ks(e)?t:(0,l.Z)({},t,{ownerState:(0,l.Z)({},t.ownerState,n)})}function gb(e){return(0,$e.Z)("MuiTooltip",e)}var db=(0,Ee.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),pb=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"];function hb(e){return Math.round(1e5*e)/1e5}var fb=(0,Ce.ZP)(Yd,{name:"MuiTooltip",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((function(e){var t,n=e.theme,r=e.ownerState,a=e.open;return(0,l.Z)({zIndex:n.zIndex.tooltip,pointerEvents:"none"},!r.disableInteractive&&{pointerEvents:"auto"},!a&&{pointerEvents:"none"},r.arrow&&(t={},(0,le.Z)(t,'&[data-popper-placement*="bottom"] .'.concat(db.arrow),{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}}),(0,le.Z)(t,'&[data-popper-placement*="top"] .'.concat(db.arrow),{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}}),(0,le.Z)(t,'&[data-popper-placement*="right"] .'.concat(db.arrow),(0,l.Z)({},r.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}})),(0,le.Z)(t,'&[data-popper-placement*="left"] .'.concat(db.arrow),(0,l.Z)({},r.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})),t))})),Cb=(0,Ce.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:function(e,t){var n=e.ownerState;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t["tooltipPlacement".concat((0,lt.Z)(n.placement.split("-")[0]))]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,l.Z)({backgroundColor:(0,fe.Fq)(n.palette.grey[700],.92),borderRadius:n.shape.borderRadius,color:n.palette.common.white,fontFamily:n.typography.fontFamily,padding:"4px 8px",fontSize:n.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:n.typography.fontWeightMedium},r.arrow&&{position:"relative",margin:0},r.touch&&{padding:"8px 16px",fontSize:n.typography.pxToRem(14),lineHeight:"".concat(hb(16/14),"em"),fontWeight:n.typography.fontWeightRegular},(t={},(0,le.Z)(t,".".concat(db.popper,'[data-popper-placement*="left"] &'),(0,l.Z)({transformOrigin:"right center"},r.isRtl?(0,l.Z)({marginLeft:"14px"},r.touch&&{marginLeft:"24px"}):(0,l.Z)({marginRight:"14px"},r.touch&&{marginRight:"24px"}))),(0,le.Z)(t,".".concat(db.popper,'[data-popper-placement*="right"] &'),(0,l.Z)({transformOrigin:"left center"},r.isRtl?(0,l.Z)({marginRight:"14px"},r.touch&&{marginRight:"24px"}):(0,l.Z)({marginLeft:"14px"},r.touch&&{marginLeft:"24px"}))),(0,le.Z)(t,".".concat(db.popper,'[data-popper-placement*="top"] &'),(0,l.Z)({transformOrigin:"center bottom",marginBottom:"14px"},r.touch&&{marginBottom:"24px"})),(0,le.Z)(t,".".concat(db.popper,'[data-popper-placement*="bottom"] &'),(0,l.Z)({transformOrigin:"center top",marginTop:"14px"},r.touch&&{marginTop:"24px"})),t))})),Ib=(0,Ce.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:function(e,t){return t.arrow}})((function(e){var t=e.theme;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,fe.Fq)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}})),mb=!1,vb=null;function bb(e,t){return function(n){t&&t(n),e(n)}}var Ab,yb=n.forwardRef((function(e,t){var r,o,u,s,c,g,d=(0,Ie.Z)({props:e,name:"MuiTooltip"}),p=d.arrow,h=void 0!==p&&p,f=d.children,C=d.components,I=void 0===C?{}:C,m=d.componentsProps,v=void 0===m?{}:m,b=d.describeChild,A=void 0!==b&&b,y=d.disableFocusListener,k=void 0!==y&&y,Z=d.disableHoverListener,S=void 0!==Z&&Z,w=d.disableInteractive,B=void 0!==w&&w,x=d.disableTouchListener,G=void 0!==x&&x,R=d.enterDelay,W=void 0===R?100:R,V=d.enterNextDelay,F=void 0===V?0:V,N=d.enterTouchDelay,E=void 0===N?700:N,D=d.followCursor,X=void 0!==D&&D,J=d.id,H=d.leaveDelay,Y=void 0===H?0:H,T=d.leaveTouchDelay,M=void 0===T?1500:T,K=d.onClose,P=d.onOpen,z=d.open,L=d.placement,_=void 0===L?"bottom":L,O=d.PopperComponent,U=d.PopperProps,j=void 0===U?{}:U,Q=d.title,q=d.TransitionComponent,$=void 0===q?cf:q,ee=d.TransitionProps,te=(0,ge.Z)(d,pb),ne=tf(),re="rtl"===ne.direction,ae=n.useState(),oe=(0,i.Z)(ae,2),ie=oe[0],le=oe[1],ue=n.useState(null),se=(0,i.Z)(ue,2),ce=se[0],pe=se[1],fe=n.useRef(!1),Ce=B||X,Ae=n.useRef(),ye=n.useRef(),ke=n.useRef(),Ze=n.useRef(),Se=(0,pC.Z)({controlled:z,default:!1,name:"Tooltip",state:"open"}),we=(0,i.Z)(Se,2),Be=we[0],xe=we[1],Ge=Be,Re=(0,Gc.Z)(J),We=n.useRef(),Ve=n.useCallback((function(){void 0!==We.current&&(document.body.style.WebkitUserSelect=We.current,We.current=void 0),clearTimeout(Ze.current)}),[]);n.useEffect((function(){return function(){clearTimeout(Ae.current),clearTimeout(ye.current),clearTimeout(ke.current),Ve()}}),[Ve]);var Fe=function(e){clearTimeout(vb),mb=!0,xe(!0),P&&!Ge&&P(e)},Ne=(0,ve.Z)((function(e){clearTimeout(vb),vb=setTimeout((function(){mb=!1}),800+Y),xe(!1),K&&Ge&&K(e),clearTimeout(Ae.current),Ae.current=setTimeout((function(){fe.current=!1}),ne.transitions.duration.shortest)})),Ee=function(e){fe.current&&"touchstart"!==e.type||(ie&&ie.removeAttribute("title"),clearTimeout(ye.current),clearTimeout(ke.current),W||mb&&F?ye.current=setTimeout((function(){Fe(e)}),mb?F:W):Fe(e))},De=function(e){clearTimeout(ye.current),clearTimeout(ke.current),ke.current=setTimeout((function(){Ne(e)}),Y)},Xe=(0,be.Z)(),Je=Xe.isFocusVisibleRef,He=Xe.onBlur,Ye=Xe.onFocus,Te=Xe.ref,Me=n.useState(!1),Ke=(0,i.Z)(Me,2)[1],Pe=function(e){He(e),!1===Je.current&&(Ke(!1),De(e))},ze=function(e){ie||le(e.currentTarget),Ye(e),!0===Je.current&&(Ke(!0),Ee(e))},Le=function(e){fe.current=!0;var t=f.props;t.onTouchStart&&t.onTouchStart(e)},_e=Ee,Oe=De;n.useEffect((function(){if(Ge)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||Ne(e)}}),[Ne,Ge]);var Ue=(0,me.Z)(le,t),je=(0,me.Z)(Te,Ue),Qe=(0,me.Z)(f.ref,je);""===Q&&(Ge=!1);var qe=n.useRef({x:0,y:0}),$e=n.useRef(),et={},tt="string"===typeof Q;A?(et.title=Ge||!tt||S?null:Q,et["aria-describedby"]=Ge?Re:null):(et["aria-label"]=tt?Q:null,et["aria-labelledby"]=Ge&&!tt?Re:null);var nt=(0,l.Z)({},et,te,f.props,{className:(0,de.Z)(te.className,f.props.className),onTouchStart:Le,ref:Qe},X?{onMouseMove:function(e){var t=f.props;t.onMouseMove&&t.onMouseMove(e),qe.current={x:e.clientX,y:e.clientY},$e.current&&$e.current.update()}}:{});var rt={};G||(nt.onTouchStart=function(e){Le(e),clearTimeout(ke.current),clearTimeout(Ae.current),Ve(),We.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ze.current=setTimeout((function(){document.body.style.WebkitUserSelect=We.current,Ee(e)}),E)},nt.onTouchEnd=function(e){f.props.onTouchEnd&&f.props.onTouchEnd(e),Ve(),clearTimeout(ke.current),ke.current=setTimeout((function(){Ne(e)}),M)}),S||(nt.onMouseOver=bb(_e,nt.onMouseOver),nt.onMouseLeave=bb(Oe,nt.onMouseLeave),Ce||(rt.onMouseOver=_e,rt.onMouseLeave=Oe)),k||(nt.onFocus=bb(ze,nt.onFocus),nt.onBlur=bb(Pe,nt.onBlur),Ce||(rt.onFocus=ze,rt.onBlur=Pe));var at=n.useMemo((function(){var e,t=[{name:"arrow",enabled:Boolean(ce),options:{element:ce,padding:4}}];return null!=(e=j.popperOptions)&&e.modifiers&&(t=t.concat(j.popperOptions.modifiers)),(0,l.Z)({},j.popperOptions,{modifiers:t})}),[ce,j]),ot=(0,l.Z)({},d,{isRtl:re,arrow:h,disableInteractive:Ce,placement:_,PopperComponentProp:O,touch:fe.current}),it=function(e){var t=e.classes,n=e.disableInteractive,r=e.arrow,a=e.touch,o=e.placement,i={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",a&&"touch","tooltipPlacement".concat((0,lt.Z)(o.split("-")[0]))],arrow:["arrow"]};return(0,he.Z)(i,gb,t)}(ot),ut=null!=(r=I.Popper)?r:fb,st=null!=(o=null!=(u=I.Transition)?u:$)?o:cf,ct=null!=(s=I.Tooltip)?s:Cb,gt=null!=(c=I.Arrow)?c:Ib,dt=cb(ut,(0,l.Z)({},j,v.popper),ot),pt=cb(st,(0,l.Z)({},ee,v.transition),ot),ht=cb(ct,(0,l.Z)({},v.tooltip),ot),ft=cb(gt,(0,l.Z)({},v.arrow),ot);return(0,a.jsxs)(n.Fragment,{children:[n.cloneElement(f,nt),(0,a.jsx)(ut,(0,l.Z)({as:null!=O?O:Yd,placement:_,anchorEl:X?{getBoundingClientRect:function(){return{top:qe.current.y,left:qe.current.x,right:qe.current.x,bottom:qe.current.y,width:0,height:0}}}:ie,popperRef:$e,open:!!ie&&Ge,id:Re,transition:!0},rt,dt,{className:(0,de.Z)(it.popper,null==j?void 0:j.className,null==(g=v.popper)?void 0:g.className),popperOptions:at,children:function(e){var t,n,r=e.TransitionProps;return(0,a.jsx)(st,(0,l.Z)({timeout:ne.transitions.duration.shorter},r,pt,{children:(0,a.jsxs)(ct,(0,l.Z)({},ht,{className:(0,de.Z)(it.tooltip,null==(t=v.tooltip)?void 0:t.className),children:[Q,h?(0,a.jsx)(gt,(0,l.Z)({},ft,{className:(0,de.Z)(it.arrow,null==(n=v.arrow)?void 0:n.className),ref:pe})):null]}))}))}}))]})})),kb=yb,Zb=["align","children","colIndex","colDef","cellMode","field","formattedValue","hasFocus","height","isEditable","rowId","tabIndex","value","width","className","showRightBorder","extendRowFullWidth","row","colSpan","onClick","onDoubleClick","onMouseDown","onMouseUp","onKeyDown","onDragEnter","onDragOver"];var Sb=function(e){var t=n.useRef({});return n.useEffect((function(){t.current=e})),t.current};function wb(e){return(0,$e.Z)("MuiBadge",e)}var Bb=(0,Ee.Z)("MuiBadge",["root","badge","dot","standard","anchorOriginTopLeft","anchorOriginTopRight","anchorOriginBottomLeft","anchorOriginBottomRight","invisible"]),xb=__webpack_require__(7312);var Gb=["anchorOrigin","classes","badgeContent","component","children","className","components","componentsProps","invisible","max","showZero","variant"],Rb=n.forwardRef((function(e,t){var n=e.anchorOrigin,r=void 0===n?{vertical:"top",horizontal:"right"}:n,o=e.classes,i=e.component,u=e.children,s=e.className,c=e.components,g=void 0===c?{}:c,d=e.componentsProps,p=void 0===d?{}:d,h=e.max,f=void 0===h?99:h,C=e.showZero,I=void 0!==C&&C,m=e.variant,v=void 0===m?"standard":m,b=(0,ge.Z)(e,Gb),A=function(e){var t=e.anchorOrigin,n=void 0===t?{vertical:"top",horizontal:"right"}:t,r=e.badgeContent,a=e.invisible,o=void 0!==a&&a,i=e.max,l=void 0===i?99:i,u=e.showZero,s=void 0!==u&&u,c=e.variant,g=void 0===c?"standard":c,d=Sb({anchorOrigin:n,badgeContent:r,max:l,variant:g}),p=o;!1===o&&(0===r&&!s||null==r&&"dot"!==g)&&(p=!0);var h=p?d:e,f=h.anchorOrigin,C=void 0===f?n:f,I=h.badgeContent,m=h.max,v=void 0===m?l:m,b=h.variant,A=void 0===b?g:b,y="";return"dot"!==A&&(y=I&&Number(I)>v?"".concat(v,"+"):I),{anchorOrigin:C,badgeContent:I,invisible:p,max:v,variant:A,displayValue:y}}((0,l.Z)({},e,{anchorOrigin:r,max:f,variant:v})),y=A.anchorOrigin,k=A.badgeContent,Z=A.max,S=A.variant,w=A.displayValue,B=A.invisible,x=(0,l.Z)({},e,{anchorOrigin:y,badgeContent:k,classes:o,invisible:B,max:Z,variant:S,showZero:I}),G=function(e){var t=e.variant,n=e.anchorOrigin,r=e.invisible,a=e.classes,o={root:["root"],badge:["badge",t,"anchorOrigin".concat((0,xb.Z)(n.vertical)).concat((0,xb.Z)(n.horizontal)),r&&"invisible"]};return(0,he.Z)(o,wb,a)}(x),R=i||g.Root||"span",W=cb(R,(0,l.Z)({},b,p.root),x),V=g.Badge||"span",F=cb(V,p.badge,x);return(0,a.jsxs)(R,(0,l.Z)({},W,{ref:t},b,{className:(0,de.Z)(G.root,W.className,s),children:[u,(0,a.jsx)(V,(0,l.Z)({},F,{className:(0,de.Z)(G.badge,F.className),children:w}))]}))})),Wb=Rb,Vb=function(e){return!e||!Ks(e)},Fb=["anchorOrigin","component","components","componentsProps","overlap","color","invisible","badgeContent","showZero","variant"],Nb=(0,l.Z)({},Bb,(0,Ee.Z)("MuiBadge",["colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"])),Eb=(0,Ce.ZP)("span",{name:"MuiBadge",slot:"Root",overridesResolver:function(e,t){return t.root}})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Db=(0,Ce.ZP)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:function(e,t){var n=e.ownerState;return[t.badge,t[n.variant],t["anchorOrigin".concat((0,lt.Z)(n.anchorOrigin.vertical)).concat((0,lt.Z)(n.anchorOrigin.horizontal)).concat((0,lt.Z)(n.overlap))],"default"!==n.color&&t["color".concat((0,lt.Z)(n.color))],n.invisible&&t.invisible]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},"default"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"dot"===n.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&(0,le.Z)({top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%"},"&.".concat(Nb.invisible),{transform:"scale(0) translate(50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&(0,le.Z)({bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%"},"&.".concat(Nb.invisible),{transform:"scale(0) translate(50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&(0,le.Z)({top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%"},"&.".concat(Nb.invisible),{transform:"scale(0) translate(-50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&(0,le.Z)({bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%"},"&.".concat(Nb.invisible),{transform:"scale(0) translate(-50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&(0,le.Z)({top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%"},"&.".concat(Nb.invisible),{transform:"scale(0) translate(50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&(0,le.Z)({bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%"},"&.".concat(Nb.invisible),{transform:"scale(0) translate(50%, 50%)"}),"top"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&(0,le.Z)({top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%"},"&.".concat(Nb.invisible),{transform:"scale(0) translate(-50%, -50%)"}),"bottom"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&(0,le.Z)({bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%"},"&.".concat(Nb.invisible),{transform:"scale(0) translate(-50%, 50%)"}),n.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})})),Xb=n.forwardRef((function(e,t){var n,r,o=(0,Ie.Z)({props:e,name:"MuiBadge"}),i=o.anchorOrigin,u=void 0===i?{vertical:"top",horizontal:"right"}:i,s=o.component,c=void 0===s?"span":s,g=o.components,d=void 0===g?{}:g,p=o.componentsProps,h=void 0===p?{}:p,f=o.overlap,C=void 0===f?"rectangular":f,I=o.color,m=void 0===I?"default":I,v=o.invisible,b=void 0!==v&&v,A=o.badgeContent,y=o.showZero,k=void 0!==y&&y,Z=o.variant,S=void 0===Z?"standard":Z,w=(0,ge.Z)(o,Fb),B=Sb({anchorOrigin:u,color:m,overlap:C}),x=b;!1===b&&(0===A&&!k||null==A&&"dot"!==S)&&(x=!0);var G=x?B:o,R=G.color,W=void 0===R?m:R,V=G.overlap,F=void 0===V?C:V,N=G.anchorOrigin,E=void 0===N?u:N,D=function(e){var t=e.color,n=e.anchorOrigin,r=e.overlap,a=e.classes,o=void 0===a?{}:a;return(0,l.Z)({},o,{badge:(0,de.Z)(o.badge,wb("anchorOrigin".concat((0,lt.Z)(n.vertical)).concat((0,lt.Z)(n.horizontal)).concat((0,lt.Z)(r))),wb("overlap".concat((0,lt.Z)(r))),"default"!==t&&[wb("color".concat((0,lt.Z)(t))),o["color".concat((0,lt.Z)(t))]])})}((0,l.Z)({},o,{anchorOrigin:E,invisible:x,color:W,overlap:F}));return(0,a.jsx)(Wb,(0,l.Z)({anchorOrigin:E,invisible:b,badgeContent:A,showZero:k,variant:S},w,{components:(0,l.Z)({Root:Eb,Badge:Db},d),componentsProps:{root:(0,l.Z)({},h.root,Vb(d.Root)&&{as:c,ownerState:(0,l.Z)({},null==(n=h.root)?void 0:n.ownerState,{color:W,overlap:F})}),badge:(0,l.Z)({},h.badge,Vb(d.Badge)&&{ownerState:(0,l.Z)({},null==(r=h.badge)?void 0:r.ownerState,{color:W,overlap:F})})},classes:D,ref:t}))})),Jb=Xb,Hb=["className"],Yb=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:function(e,t){return t.iconButtonContainer}})((function(){return{display:"flex",visibility:"hidden",width:0}})),Tb=n.forwardRef((function(e,t){var n=e.className,r=(0,ge.Z)(e,Hb),o=function(e){var t=e.classes;return(0,he.Z)({root:["iconButtonContainer"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(Yb,(0,l.Z)({ref:t,className:(0,de.Z)(o.root,n)},r))}));var Mb=["hideMenu","currentColumn","open","id","labelledby","className","children"],Kb=n.forwardRef((function(e,t){var r=e.hideMenu,o=e.open,i=e.id,u=e.labelledby,s=e.className,c=e.children,g=(0,ge.Z)(e,Mb),d=n.useCallback((function(e){fI(e.key)&&e.preventDefault(),BI(e.key)&&r(e)}),[r]);return(0,a.jsx)(Kh,(0,l.Z)({id:i,ref:t,className:(0,de.Z)(ml.menuList,s),"aria-labelledby":u,onKeyDown:d,autoFocus:o},g,{children:c}))})),Pb=function(e){var t=e.onClick,r=Kl(),o=zl(),i=n.useCallback((function(e){t(e),r.current.showPreferences($I.columns)}),[r,t]);return o.disableColumnSelector?null:(0,a.jsx)(Tc,{onClick:i,children:r.current.getLocaleText("columnMenuShowColumns")})},zb=function(e){var t=e.column,r=e.onClick,o=Kl(),i=zl(),l=n.useCallback((function(e){r(e),o.current.showFilterPanel(null==t?void 0:t.field)}),[o,null==t?void 0:t.field,r]);return i.disableColumnFilter||null==t||!t.filterable?null:(0,a.jsx)(Tc,{onClick:l,children:o.current.getLocaleText("columnMenuFilter")})},Lb=function(e){var t=e.column,r=e.onClick,o=Kl(),i=zl(),l=n.useRef(),u=1===El(o).filter((function(e){return!0!==e.disableColumnMenu})).length,s=n.useCallback((function(e){u||(r(e),l.current=setTimeout((function(){o.current.setColumnVisibility(null==t?void 0:t.field,!1)}),100))}),[o,null==t?void 0:t.field,r,u]);return n.useEffect((function(){return function(){return clearTimeout(l.current)}}),[]),i.disableColumnSelector||!1===t.hideable?null:(0,a.jsx)(Tc,{onClick:s,disabled:u,children:o.current.getLocaleText("columnMenuHideColumn")})},_b=function(e){var t=e.column,r=e.onClick,o=Kl(),i=Tl(o,wu),l=n.useMemo((function(){if(!t)return null;var e=i.find((function(e){return e.field===t.field}));return null==e?void 0:e.sort}),[t,i]),u=n.useCallback((function(e){r(e);var n=e.currentTarget.getAttribute("data-value")||null;o.current.sortColumn(t,n)}),[o,t,r]);return t&&t.sortable?(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(Tc,{onClick:u,disabled:null==l,children:o.current.getLocaleText("columnMenuUnsort")}),(0,a.jsx)(Tc,{onClick:u,"data-value":"asc",disabled:"asc"===l,children:o.current.getLocaleText("columnMenuSortAsc")}),(0,a.jsx)(Tc,{onClick:u,"data-value":"desc",disabled:"desc"===l,children:o.current.getLocaleText("columnMenuSortDesc")})]}):null},Ob=n.forwardRef((function(e,t){var r=e.hideMenu,o=e.currentColumn,i=Kl(),u=[(0,a.jsx)(_b,{onClick:r,column:o}),(0,a.jsx)(zb,{onClick:r,column:o}),(0,a.jsx)(Lb,{onClick:r,column:o}),(0,a.jsx)(Pb,{onClick:r,column:o})],s=i.current.unstable_applyPipeProcessors("columnMenu",u,o);return(0,a.jsx)(Kb,(0,l.Z)({ref:t},e,{children:s.map((function(e,t){return n.cloneElement(e,{key:t,onClick:r,column:o})}))}))})),Ub=["className","rowCount","visibleRowCount"],jb=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:function(e,t){return t.rowCount}})((function(e){return{alignItems:"center",display:"flex",margin:e.theme.spacing(0,2)}})),Qb=n.forwardRef((function(e,t){var n=e.className,r=e.rowCount,o=e.visibleRowCount,i=(0,ge.Z)(e,Ub),u=Kl(),s=function(e){var t=e.classes;return(0,he.Z)({root:["rowCount"]},Il,t)}({classes:zl().classes});if(0===r)return null;var c=o<r?u.current.getLocaleText("footerTotalVisibleRows")(o,r):r.toLocaleString();return(0,a.jsxs)(jb,(0,l.Z)({ref:t,className:(0,de.Z)(s.root,n)},i,{children:[u.current.getLocaleText("footerTotalRows")," ",c]}))})),qb=["className","selectedRowCount"],$b=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:function(e,t){return t.selectedRowCount}})((function(e){var t=e.theme;return(0,le.Z)({alignItems:"center",display:"flex",margin:t.spacing(0,2),visibility:"hidden",width:0,height:0},t.breakpoints.up("sm"),{visibility:"visible",width:"auto",height:"auto"})})),eA=n.forwardRef((function(e,t){var n=e.className,r=e.selectedRowCount,o=(0,ge.Z)(e,qb),i=Kl(),u=function(e){var t=e.classes;return(0,he.Z)({root:["selectedRowCount"]},Il,t)}({classes:zl().classes}),s=i.current.getLocaleText("footerRowSelected")(r);return(0,a.jsx)($b,(0,l.Z)({ref:t,className:(0,de.Z)(u.root,n)},o,{children:s}))})),tA=["className"],nA=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:function(e,t){return t.footerContainer}})((function(e){var t=e.theme,n="light"===t.palette.mode?(0,fe.$n)((0,fe.Fq)(t.palette.divider,1),.88):(0,fe._j)((0,fe.Fq)(t.palette.divider,1),.68);return{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid ".concat(n)}})),rA=n.forwardRef((function(e,t){var n=e.className,r=(0,ge.Z)(e,tA),o=function(e){var t=e.classes;return(0,he.Z)({root:["footerContainer"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(nA,(0,l.Z)({ref:t,className:(0,de.Z)(o.root,n)},r))})),aA=n.forwardRef((function(e,t){var n,r=Kl(),o=zl(),i=Tl(r,Ul),u=Tl(r,vm),s=Tl(r,Ju),c=!o.hideFooterSelectedRowCount&&u>0?(0,a.jsx)(eA,{selectedRowCount:u}):(0,a.jsx)("div",{}),g=o.hideFooterRowCount||o.pagination?null:(0,a.jsx)(Qb,{rowCount:i,visibleRowCount:s}),d=o.pagination&&!o.hideFooterPagination&&o.components.Pagination&&(0,a.jsx)(o.components.Pagination,(0,l.Z)({},null==(n=o.componentsProps)?void 0:n.pagination));return(0,a.jsxs)(rA,(0,l.Z)({ref:t},e,{children:[c,g,d]}))})),oA=n.forwardRef((function(e,t){var n,r,o=zl();return(0,a.jsxs)("div",(0,l.Z)({ref:t},e,{children:[(0,a.jsx)(o.components.PreferencesPanel,(0,l.Z)({},null==(n=o.componentsProps)?void 0:n.preferencesPanel)),o.components.Toolbar&&(0,a.jsx)(o.components.Toolbar,(0,l.Z)({},null==(r=o.componentsProps)?void 0:r.toolbar))]}))})),iA=n.forwardRef((function(e,t){var n,r,o,i=Kl(),u=Tl(i,Fl),s=zl(),c=Tl(i,iv),g=i.current.unstable_applyPipeProcessors("preferencePanel",null,null!=(n=c.openedPanelValue)?n:$I.filters);return(0,a.jsx)(s.components.Panel,(0,l.Z)({ref:t,as:s.components.BasePopper,open:u.length>0&&c.open},null==(r=s.componentsProps)?void 0:r.panel,e,null==(o=s.componentsProps)?void 0:o.basePopper,{children:g}))}));function lA(e){return(0,$e.Z)("MuiCircularProgress",e)}(0,Ee.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var uA,sA,cA,gA,dA,pA,hA,fA,CA=["className","color","disableShrink","size","style","thickness","value","variant"],IA=44,mA=(0,Fe.keyframes)(dA||(dA=uA||(uA=ye(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),vA=(0,Fe.keyframes)(pA||(pA=sA||(sA=ye(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),bA=(0,Ce.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["color".concat((0,lt.Z)(n.color))]]}})((function(e){var t=e.ownerState,n=e.theme;return(0,l.Z)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:n.palette[t.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&(0,Fe.css)(hA||(hA=cA||(cA=ye(["\n      animation: "," 1.4s linear infinite;\n    "]))),mA)})),AA=(0,Ce.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,t){return t.svg}})({display:"block"}),yA=(0,Ce.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,t){var n=e.ownerState;return[t.circle,t["circle".concat((0,lt.Z)(n.variant))],n.disableShrink&&t.circleDisableShrink]}})((function(e){var t=e.ownerState,n=e.theme;return(0,l.Z)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var t=e.ownerState;return"indeterminate"===t.variant&&!t.disableShrink&&(0,Fe.css)(fA||(fA=gA||(gA=ye(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),vA)})),kA=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiCircularProgress"}),r=n.className,o=n.color,i=void 0===o?"primary":o,u=n.disableShrink,s=void 0!==u&&u,c=n.size,g=void 0===c?40:c,d=n.style,p=n.thickness,h=void 0===p?3.6:p,f=n.value,C=void 0===f?0:f,I=n.variant,m=void 0===I?"indeterminate":I,v=(0,ge.Z)(n,CA),b=(0,l.Z)({},n,{color:i,disableShrink:s,size:g,thickness:h,value:C,variant:m}),A=function(e){var t=e.classes,n=e.variant,r=e.color,a=e.disableShrink,o={root:["root",n,"color".concat((0,lt.Z)(r))],svg:["svg"],circle:["circle","circle".concat((0,lt.Z)(n)),a&&"circleDisableShrink"]};return(0,he.Z)(o,lA,t)}(b),y={},k={},Z={};if("determinate"===m){var S=2*Math.PI*((IA-h)/2);y.strokeDasharray=S.toFixed(3),Z["aria-valuenow"]=Math.round(C),y.strokeDashoffset="".concat(((100-C)/100*S).toFixed(3),"px"),k.transform="rotate(-90deg)"}return(0,a.jsx)(bA,(0,l.Z)({className:(0,de.Z)(A.root,r),style:(0,l.Z)({width:g,height:g},k,d),ownerState:b,ref:t,role:"progressbar"},Z,v,{children:(0,a.jsx)(AA,{className:A.svg,ownerState:b,viewBox:"".concat(22," ").concat(22," ").concat(IA," ").concat(IA),children:(0,a.jsx)(yA,{className:A.circle,style:y,ownerState:b,cx:IA,cy:IA,r:(IA-h)/2,fill:"none",strokeWidth:h})})}))})),ZA=kA,SA=["className"],wA=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:function(e,t){return t.overlay}})((function(e){var t=e.theme;return{display:"flex",height:"100%",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:(0,fe.Fq)(t.palette.background.default,t.palette.action.disabledOpacity)}})),BA=n.forwardRef((function(e,t){var n=e.className,r=(0,ge.Z)(e,SA),o=function(e){var t=e.classes;return(0,he.Z)({root:["overlay"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(wA,(0,l.Z)({ref:t,className:(0,de.Z)(o.root,n)},r))})),xA=n.forwardRef((function(e,t){return(0,a.jsx)(BA,(0,l.Z)({ref:t},e,{children:(0,a.jsx)(ZA,{})}))})),GA=n.forwardRef((function(e,t){var n=Kl().current.getLocaleText("noRowsLabel");return(0,a.jsx)(BA,(0,l.Z)({ref:t},e,{children:n}))}));var RA=n.createContext();var WA=n.createContext();function VA(e){return(0,$e.Z)("MuiTableCell",e)}var FA=(0,Ee.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),NA=["align","className","component","padding","scope","size","sortDirection","variant"],EA=(0,Ce.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["size".concat((0,lt.Z)(n.size))],"normal"!==n.padding&&t["padding".concat((0,lt.Z)(n.padding))],"inherit"!==n.align&&t["align".concat((0,lt.Z)(n.align))],n.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===t.palette.mode?(0,fe.$n)((0,fe.Fq)(t.palette.divider,1),.88):(0,fe._j)((0,fe.Fq)(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===n.variant&&{color:t.palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===n.variant&&{color:t.palette.text.primary},"footer"===n.variant&&{color:t.palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===n.size&&(0,le.Z)({padding:"6px 16px"},"&.".concat(FA.paddingCheckbox),{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}),"checkbox"===n.padding&&{width:48,padding:"0 0 0 4px"},"none"===n.padding&&{padding:0},"left"===n.align&&{textAlign:"left"},"center"===n.align&&{textAlign:"center"},"right"===n.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===n.align&&{textAlign:"justify"},n.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:t.palette.background.default})})),DA=n.forwardRef((function(e,t){var r,o=(0,Ie.Z)({props:e,name:"MuiTableCell"}),i=o.align,u=void 0===i?"inherit":i,s=o.className,c=o.component,g=o.padding,d=o.scope,p=o.size,h=o.sortDirection,f=o.variant,C=(0,ge.Z)(o,NA),I=n.useContext(RA),m=n.useContext(WA),v=m&&"head"===m.variant;r=c||(v?"th":"td");var b=d;!b&&v&&(b="col");var A=f||m&&m.variant,y=(0,l.Z)({},o,{align:u,component:r,padding:g||(I&&I.padding?I.padding:"normal"),size:p||(I&&I.size?I.size:"medium"),sortDirection:h,stickyHeader:"head"===A&&I&&I.stickyHeader,variant:A}),k=function(e){var t=e.classes,n=e.variant,r=e.align,a=e.padding,o=e.size,i={root:["root",n,e.stickyHeader&&"stickyHeader","inherit"!==r&&"align".concat((0,lt.Z)(r)),"normal"!==a&&"padding".concat((0,lt.Z)(a)),"size".concat((0,lt.Z)(o))]};return(0,he.Z)(i,VA,t)}(y),Z=null;return h&&(Z="asc"===h?"ascending":"descending"),(0,a.jsx)(EA,(0,l.Z)({as:r,ref:t,className:(0,de.Z)(k.root,s),"aria-sort":Z,scope:b,ownerState:y},C))}));function XA(e){return(0,$e.Z)("MuiToolbar",e)}(0,Ee.Z)("MuiToolbar",["root","gutters","regular","dense"]);var JA,HA,YA,TA,MA,KA,PA,zA,LA=["className","component","disableGutters","variant"],_A=(0,Ce.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&(0,le.Z)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),"dense"===n.variant&&{minHeight:48})}),(function(e){var t=e.theme;return"regular"===e.ownerState.variant&&t.mixins.toolbar})),OA=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiToolbar"}),r=n.className,o=n.component,i=void 0===o?"div":o,u=n.disableGutters,s=void 0!==u&&u,c=n.variant,g=void 0===c?"regular":c,d=(0,ge.Z)(n,LA),p=(0,l.Z)({},n,{component:i,disableGutters:s,variant:g}),h=function(e){var t=e.classes,n={root:["root",!e.disableGutters&&"gutters",e.variant]};return(0,he.Z)(n,XA,t)}(p);return(0,a.jsx)(_A,(0,l.Z)({as:i,className:(0,de.Z)(h.root,r),ref:t,ownerState:p},d))})),UA=(0,uc.Z)((0,a.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),jA=(0,uc.Z)((0,a.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),QA=(0,uc.Z)((0,a.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),qA=(0,uc.Z)((0,a.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),$A=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],ey=n.forwardRef((function(e,t){var n=e.backIconButtonProps,r=e.count,o=e.getItemAriaLabel,i=e.nextIconButtonProps,u=e.onPageChange,s=e.page,c=e.rowsPerPage,g=e.showFirstButton,d=e.showLastButton,p=(0,ge.Z)(e,$A),h=tf();return(0,a.jsxs)("div",(0,l.Z)({ref:t},p,{children:[g&&(0,a.jsx)(rp,{onClick:function(e){u(e,0)},disabled:0===s,"aria-label":o("first",s),title:o("first",s),children:"rtl"===h.direction?JA||(JA=(0,a.jsx)(QA,{})):HA||(HA=(0,a.jsx)(qA,{}))}),(0,a.jsx)(rp,(0,l.Z)({onClick:function(e){u(e,s-1)},disabled:0===s,color:"inherit","aria-label":o("previous",s),title:o("previous",s)},n,{children:"rtl"===h.direction?YA||(YA=(0,a.jsx)(jA,{})):TA||(TA=(0,a.jsx)(UA,{}))})),(0,a.jsx)(rp,(0,l.Z)({onClick:function(e){u(e,s+1)},disabled:-1!==r&&s>=Math.ceil(r/c)-1,color:"inherit","aria-label":o("next",s),title:o("next",s)},i,{children:"rtl"===h.direction?MA||(MA=(0,a.jsx)(UA,{})):KA||(KA=(0,a.jsx)(jA,{}))})),d&&(0,a.jsx)(rp,{onClick:function(e){u(e,Math.max(0,Math.ceil(r/c)-1))},disabled:s>=Math.ceil(r/c)-1,"aria-label":o("last",s),title:o("last",s),children:"rtl"===h.direction?PA||(PA=(0,a.jsx)(qA,{})):zA||(zA=(0,a.jsx)(QA,{}))})]}))})),ty=ey;function ny(e){return(0,$e.Z)("MuiTablePagination",e)}var ry,ay=(0,Ee.Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),oy=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],iy=(0,Ce.ZP)(DA,{name:"MuiTablePagination",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t=e.theme;return{overflow:"auto",color:t.palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}}})),ly=(0,Ce.ZP)(OA,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:function(e,t){return(0,l.Z)((0,le.Z)({},"& .".concat(ay.actions),t.actions),t.toolbar)}})((function(e){var t,n=e.theme;return t={minHeight:52,paddingRight:2},(0,le.Z)(t,"".concat(n.breakpoints.up("xs")," and (orientation: landscape)"),{minHeight:52}),(0,le.Z)(t,n.breakpoints.up("sm"),{minHeight:52,paddingRight:2}),(0,le.Z)(t,"& .".concat(ay.actions),{flexShrink:0,marginLeft:20}),t})),uy=(0,Ce.ZP)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:function(e,t){return t.spacer}})({flex:"1 1 100%"}),sy=(0,Ce.ZP)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:function(e,t){return t.selectLabel}})((function(e){var t=e.theme;return(0,l.Z)({},t.typography.body2,{flexShrink:0})})),cy=(0,Ce.ZP)(FC,{name:"MuiTablePagination",slot:"Select",overridesResolver:function(e,t){var n;return(0,l.Z)((n={},(0,le.Z)(n,"& .".concat(ay.selectIcon),t.selectIcon),(0,le.Z)(n,"& .".concat(ay.select),t.select),n),t.input,t.selectRoot)}})((0,le.Z)({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8},"& .".concat(ay.select),{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"})),gy=(0,Ce.ZP)(Tc,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:function(e,t){return t.menuItem}})({}),dy=(0,Ce.ZP)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:function(e,t){return t.displayedRows}})((function(e){var t=e.theme;return(0,l.Z)({},t.typography.body2,{flexShrink:0})}));function py(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"\u2013").concat(n," of ").concat(-1!==r?r:"more than ".concat(n))}function hy(e){return"Go to ".concat(e," page")}var fy=n.forwardRef((function(e,t){var r,o=(0,Ie.Z)({props:e,name:"MuiTablePagination"}),i=o.ActionsComponent,u=void 0===i?ty:i,s=o.backIconButtonProps,c=o.className,g=o.colSpan,d=o.component,p=void 0===d?DA:d,h=o.count,f=o.getItemAriaLabel,C=void 0===f?hy:f,I=o.labelDisplayedRows,m=void 0===I?py:I,v=o.labelRowsPerPage,b=void 0===v?"Rows per page:":v,A=o.nextIconButtonProps,y=o.onPageChange,k=o.onRowsPerPageChange,Z=o.page,S=o.rowsPerPage,w=o.rowsPerPageOptions,B=void 0===w?[10,25,50,100]:w,x=o.SelectProps,G=void 0===x?{}:x,R=o.showFirstButton,W=void 0!==R&&R,V=o.showLastButton,F=void 0!==V&&V,N=(0,ge.Z)(o,oy),E=o,D=function(e){var t=e.classes;return(0,he.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},ny,t)}(E),X=G.native?"option":gy;p!==DA&&"td"!==p||(r=g||1e3);var J=(0,Gc.Z)(G.id),H=(0,Gc.Z)(G.labelId);return(0,a.jsx)(iy,(0,l.Z)({colSpan:r,ref:t,as:p,ownerState:E,className:(0,de.Z)(D.root,c)},N,{children:(0,a.jsxs)(ly,{className:D.toolbar,children:[(0,a.jsx)(uy,{className:D.spacer}),B.length>1&&(0,a.jsx)(sy,{className:D.selectLabel,id:H,children:b}),B.length>1&&(0,a.jsx)(cy,(0,l.Z)({variant:"standard",input:ry||(ry=(0,a.jsx)(lc,{})),value:S,onChange:k,id:J,labelId:H},G,{classes:(0,l.Z)({},G.classes,{root:(0,de.Z)(D.input,D.selectRoot,(G.classes||{}).root),select:(0,de.Z)(D.select,(G.classes||{}).select),icon:(0,de.Z)(D.selectIcon,(G.classes||{}).icon)}),children:B.map((function(e){return(0,n.createElement)(X,(0,l.Z)({},!Ks(X)&&{ownerState:E},{className:D.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)}))})),(0,a.jsx)(dy,{className:D.displayedRows,children:m({from:0===h?0:Z*S+1,to:-1===h?(Z+1)*S:-1===S?h:Math.min(h,(Z+1)*S),count:-1===h?-1:h,page:Z})}),(0,a.jsx)(u,{className:D.actions,backIconButtonProps:s,count:h,nextIconButtonProps:A,onPageChange:y,page:Z,rowsPerPage:S,showFirstButton:W,showLastButton:F,getItemAriaLabel:C})]})}))})),Cy=fy,Iy=(0,Ce.ZP)(Cy)((function(e){var t,n=e.theme;return t={},(0,le.Z)(t,"& .".concat(ay.selectLabel),(0,le.Z)({display:"none"},n.breakpoints.up("sm"),{display:"block"})),(0,le.Z)(t,"& .".concat(ay.input),(0,le.Z)({display:"none"},n.breakpoints.up("sm"),{display:"inline-flex"})),t})),my=n.forwardRef((function(e,t){var r,o=Kl(),i=zl(),u=Tl(o,ym),s=n.useMemo((function(){return Math.floor(u.rowCount/(u.pageSize||1))}),[u.rowCount,u.pageSize]),c=n.useCallback((function(e){var t=Number(e.target.value);o.current.setPageSize(t)}),[o]),g=n.useCallback((function(e,t){o.current.setPage(t)}),[o]);return(0,a.jsx)(Iy,(0,l.Z)({ref:t,component:"div",count:u.rowCount,page:u.page<=s?u.page:s,rowsPerPageOptions:null!=(r=i.rowsPerPageOptions)&&r.includes(u.pageSize)?i.rowsPerPageOptions:[],rowsPerPage:u.pageSize,onPageChange:g,onRowsPerPageChange:c},o.current.getLocaleText("MuiTablePagination"),e))})),vy=["className"],by=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:function(e,t){return t.panelContent}})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function Ay(e){var t=e.className,n=(0,ge.Z)(e,vy),r=function(e){var t=e.classes;return(0,he.Z)({root:["panelContent"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(by,(0,l.Z)({className:(0,de.Z)(t,r.root)},n))}var yy=["className"],ky=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:function(e,t){return t.panelFooter}})((function(e){return{padding:e.theme.spacing(.5),display:"flex",justifyContent:"space-between"}}));function Zy(e){var t=e.className,n=(0,ge.Z)(e,yy),r=function(e){var t=e.classes;return(0,he.Z)({root:["panelFooter"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(ky,(0,l.Z)({className:(0,de.Z)(t,r.root)},n))}var Sy=["className"],wy=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:function(e,t){return t.panelWrapper}})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),By=function(){return!0};function xy(e){var t=e.className,n=(0,ge.Z)(e,Sy),r=function(e){var t=e.classes;return(0,he.Z)({root:["panelWrapper"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(Af,{open:!0,disableEnforceFocus:!0,isEnabled:By,children:(0,a.jsx)(wy,(0,l.Z)({tabIndex:-1,className:(0,de.Z)(t,r.root)},n))})}var Gy=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:function(e,t){return t.filterForm}})((function(e){return{display:"flex",padding:e.theme.spacing(1)}})),Ry=(0,Ce.ZP)(yh,{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:function(e,t){return t.filterFormDeleteIcon}})((function(e){var t=e.theme;return{flexShrink:0,justifyContent:"flex-end",marginRight:t.spacing(.5),marginBottom:t.spacing(.2)}})),Wy=(0,Ce.ZP)(yh,{name:"MuiDataGrid",slot:"FilterFormLinkOperatorInput",overridesResolver:function(e,t){return t.filterFormLinkOperatorInput}})({minWidth:55,marginRight:5,justifyContent:"end"}),Vy=(0,Ce.ZP)(yh,{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:function(e,t){return t.filterFormColumnInput}})({width:150}),Fy=(0,Ce.ZP)(yh,{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:function(e,t){return t.filterFormOperatorInput}})({width:120}),Ny=(0,Ce.ZP)(yh,{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:function(e,t){return t.filterFormValueInput}})({width:190}),Ey=function(e){switch(e){case Fm.And:return"filterPanelOperatorAnd";case Fm.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `linkOperator` property in the `GridFilterPanel`.")}},Dy=function(e){return e.headerName||e.field},Xy=new Intl.Collator;function Jy(e){var t,r,o,i,u,s,c,g=e.item,d=e.hasMultipleFilters,p=e.deleteFilter,h=e.applyFilterChanges,f=e.multiFilterOperator,C=e.showMultiFilterOperators,I=e.disableMultiFilterOperator,m=e.applyMultiFilterOperatorChanges,v=e.focusElementRef,b=e.linkOperators,A=void 0===b?[Fm.And,Fm.Or]:b,y=e.columnsSort,k=e.deleteIconProps,Z=void 0===k?{}:k,S=e.linkOperatorInputProps,w=void 0===S?{}:S,B=e.operatorInputProps,x=void 0===B?{}:B,G=e.columnInputProps,R=void 0===G?{}:G,W=e.valueInputProps,V=void 0===W?{}:W,F=Kl(),N=Tl(F,Jl),E=(0,Gc.Z)(),D=(0,Gc.Z)(),X=(0,Gc.Z)(),J=(0,Gc.Z)(),H=zl(),Y=function(e){var t=e.classes;return(0,he.Z)({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],linkOperatorInput:["filterFormLinkOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},Il,t)}({classes:H.classes}),T=n.useRef(null),M=n.useRef(null),K=d&&A.length>0,P=(null==(t=H.componentsProps)?void 0:t.baseFormControl)||{},z=null==(o=((null==(r=H.componentsProps)?void 0:r.baseSelect)||{}).native)||o,L=z?"option":Tc,_=n.useMemo((function(){switch(y){case"asc":return N.sort((function(e,t){return Xy.compare(Dy(e),Dy(t))}));case"desc":return N.sort((function(e,t){return-Xy.compare(Dy(e),Dy(t))}));default:return N}}),[N,y]),O=g.columnField?F.current.getColumn(g.columnField):null,U=n.useMemo((function(){var e;return g.operatorValue&&O?null==(e=O.filterOperators)?void 0:e.find((function(e){return e.value===g.operatorValue})):null}),[g,O]),j=n.useCallback((function(e){var t=e.target.value,n=F.current.getColumn(t);if(n.field!==O.field){var r=n.filterOperators.find((function(e){return e.value===g.operatorValue}))||n.filterOperators[0],a=!r.InputComponent||r.InputComponent!==(null==U?void 0:U.InputComponent);h((0,l.Z)({},g,{columnField:t,operatorValue:r.value,value:a?void 0:g.value}))}}),[F,h,g,O,U]),Q=n.useCallback((function(e){var t=e.target.value,n=null==O?void 0:O.filterOperators.find((function(e){return e.value===t})),r=!(null!=n&&n.InputComponent)||(null==n?void 0:n.InputComponent)!==(null==U?void 0:U.InputComponent);h((0,l.Z)({},g,{operatorValue:t,value:r?void 0:g.value}))}),[h,g,O,U]),q=n.useCallback((function(e){var t=e.target.value===Fm.And.toString()?Fm.And:Fm.Or;m(t)}),[m]);return n.useImperativeHandle(v,(function(){return{focus:function(){var e;null!=U&&U.InputComponent?null==T||null==(e=T.current)||e.focus():M.current.focus()}}}),[U]),(0,a.jsxs)(Gy,{className:Y.root,children:[(0,a.jsx)(Ry,(0,l.Z)({variant:"standard",as:H.components.BaseFormControl},P,Z,{className:(0,de.Z)(Y.deleteIcon,P.className,Z.className),children:(0,a.jsx)(rp,{"aria-label":F.current.getLocaleText("filterPanelDeleteIconLabel"),title:F.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:function(){H.disableMultipleColumnsFiltering?void 0===g.value?p(g):h((0,l.Z)({},g,{value:void 0})):p(g)},size:"small",children:(0,a.jsx)(H.components.FilterPanelDeleteIcon,{fontSize:"small"})})})),(0,a.jsx)(Wy,(0,l.Z)({variant:"standard",as:H.components.BaseFormControl},P,w,{sx:(0,l.Z)({display:K?"flex":"none",visibility:C?"visible":"hidden"},P.sx||{},w.sx||{}),className:(0,de.Z)(Y.linkOperatorInput,P.className,w.className),children:(0,a.jsx)(H.components.BaseSelect,(0,l.Z)({inputProps:{"aria-label":F.current.getLocaleText("filterPanelLinkOperator")},value:f,onChange:q,disabled:!!I||1===A.length,native:z},null==(i=H.componentsProps)?void 0:i.baseSelect,{children:A.map((function(e){return(0,a.jsx)(L,{value:e.toString(),children:F.current.getLocaleText(Ey(e))},e.toString())}))}))})),(0,a.jsxs)(Vy,(0,l.Z)({variant:"standard",as:H.components.BaseFormControl},P,R,{className:(0,de.Z)(Y.columnInput,P.className,R.className),children:[(0,a.jsx)(Ch,{htmlFor:E,id:D,children:F.current.getLocaleText("filterPanelColumns")}),(0,a.jsx)(H.components.BaseSelect,(0,l.Z)({labelId:D,id:E,label:F.current.getLocaleText("filterPanelColumns"),value:g.columnField||"",onChange:j,native:z},null==(u=H.componentsProps)?void 0:u.baseSelect,{children:_.map((function(e){return(0,a.jsx)(L,{value:e.field,children:Dy(e)},e.field)}))}))]})),(0,a.jsxs)(Fy,(0,l.Z)({variant:"standard",as:H.components.BaseFormControl},P,x,{className:(0,de.Z)(Y.operatorInput,P.className,x.className),children:[(0,a.jsx)(Ch,{htmlFor:X,id:J,children:F.current.getLocaleText("filterPanelOperators")}),(0,a.jsx)(H.components.BaseSelect,(0,l.Z)({labelId:J,label:F.current.getLocaleText("filterPanelOperators"),id:X,value:g.operatorValue,onChange:Q,native:z,inputRef:M},null==(s=H.componentsProps)?void 0:s.baseSelect,{children:null==O||null==(c=O.filterOperators)?void 0:c.map((function(e){return(0,a.jsx)(L,{value:e.value,children:e.label||F.current.getLocaleText("filterOperator".concat((0,lt.Z)(e.value)))},e.value)}))}))]})),(0,a.jsx)(Ny,(0,l.Z)({variant:"standard",as:H.components.BaseFormControl},P,V,{className:(0,de.Z)(Y.valueInput,P.className,V.className),children:null!=U&&U.InputComponent?(0,a.jsx)(U.InputComponent,(0,l.Z)({apiRef:F,item:g,applyValue:h,focusElementRef:T},U.InputComponentProps)):null}))]})}var Hy=["linkOperators","columnsSort","filterFormProps"];var Yy=__webpack_require__(6001),Ty=["sx"];function My(e){var t,n=e.sx,r=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(n){Yy.Gc[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}((0,ge.Z)(e,Ty)),a=r.systemProps,o=r.otherProps;return t=Array.isArray(n)?[a].concat((0,Ae.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,Hp.P)(e)?(0,l.Z)({},a,e):a}:(0,l.Z)({},a,n),(0,l.Z)({},o,{sx:t})}function Ky(e){return(0,$e.Z)("MuiTypography",e)}(0,Ee.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var Py=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],zy=(0,Ce.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,lt.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Ly={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},_y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Oy=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiTypography"}),r=function(e){return _y[e]||e}(n.color),o=My((0,l.Z)({},n,{color:r})),i=o.align,u=void 0===i?"inherit":i,s=o.className,c=o.component,g=o.gutterBottom,d=void 0!==g&&g,p=o.noWrap,h=void 0!==p&&p,f=o.paragraph,C=void 0!==f&&f,I=o.variant,m=void 0===I?"body1":I,v=o.variantMapping,b=void 0===v?Ly:v,A=(0,ge.Z)(o,Py),y=(0,l.Z)({},o,{align:u,color:r,className:s,component:c,gutterBottom:d,noWrap:h,paragraph:C,variant:m,variantMapping:b}),k=c||(C?"p":b[m]||Ly[m])||"span",Z=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,a=e.paragraph,o=e.variant,i=e.classes,l={root:["root",o,"inherit"!==e.align&&"align".concat((0,lt.Z)(t)),n&&"gutterBottom",r&&"noWrap",a&&"paragraph"]};return(0,he.Z)(l,Ky,i)}(y);return(0,a.jsx)(zy,(0,l.Z)({as:k,ref:t,ownerState:y,className:(0,de.Z)(Z.root,s)},A))})),Uy=Oy;function jy(e){return(0,$e.Z)("MuiFormControlLabel",e)}var Qy=(0,Ee.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),qy=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],$y=(0,Ce.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,le.Z)({},"& .".concat(Qy.label),t.label),t.root,t["labelPlacement".concat((0,lt.Z)(n.labelPlacement))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)((0,le.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(Qy.disabled),{cursor:"default"}),"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},(0,le.Z)({},"& .".concat(Qy.label),(0,le.Z)({},"&.".concat(Qy.disabled),{color:t.palette.text.disabled})))})),ek=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiFormControlLabel"}),o=r.className,i=r.componentsProps,u=void 0===i?{}:i,s=r.control,c=r.disabled,g=r.disableTypography,d=r.label,p=r.labelPlacement,h=void 0===p?"end":p,f=(0,ge.Z)(r,qy),C=Ls(),I=c;"undefined"===typeof I&&"undefined"!==typeof s.props.disabled&&(I=s.props.disabled),"undefined"===typeof I&&C&&(I=C.disabled);var m={disabled:I};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof s.props[e]&&"undefined"!==typeof r[e]&&(m[e]=r[e])}));var v=Ps({props:r,muiFormControl:C,states:["error"]}),b=(0,l.Z)({},r,{disabled:I,labelPlacement:h,error:v.error}),A=function(e){var t=e.classes,n=e.disabled,r=e.labelPlacement,a=e.error,o={root:["root",n&&"disabled","labelPlacement".concat((0,lt.Z)(r)),a&&"error"],label:["label",n&&"disabled"]};return(0,he.Z)(o,jy,t)}(b),y=d;return null==y||y.type===Uy||g||(y=(0,a.jsx)(Uy,(0,l.Z)({component:"span",className:A.label},u.typography,{children:y}))),(0,a.jsxs)($y,(0,l.Z)({className:(0,de.Z)(A.root,o),ownerState:b,ref:t},f,{children:[n.cloneElement(s,m),y]}))})),tk=ek,nk=["className"],rk=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:function(e,t){return t.panelHeader}})((function(e){return{padding:e.theme.spacing(1)}}));function ak(e){var t=e.className,n=(0,ge.Z)(e,nk),r=function(e){var t=e.classes;return(0,he.Z)({root:["panelHeader"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(rk,(0,l.Z)({className:(0,de.Z)(t,r.root)},n))}var ok=!1;"undefined"!==typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.GRID_EXPERIMENTAL_ENABLED&&qu()&&window.localStorage.getItem("GRID_EXPERIMENTAL_ENABLED")?ok="true"===window.localStorage.getItem("GRID_EXPERIMENTAL_ENABLED"):"undefined"!==typeof process&&(ok="true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.GRID_EXPERIMENTAL_ENABLED);var ik=ok,lk=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:function(e,t){return t.columnsPanel}})((function(){return{padding:"8px 0px 8px 8px"}})),uk=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:function(e,t){return t.columnsPanelRow}})((function(e){var t=e.theme;return(0,le.Z)({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px"},"& .".concat(nb.root),{marginRight:t.spacing(.5)})})),sk=(0,Ce.ZP)(rp)({justifyContent:"flex-end"});var ck=["children","className","classes"],gk=(0,Ee.Z)("MuiDataGrid",["panel","paper"]),dk=(0,Ce.ZP)(Yd,{name:"MuiDataGrid",slot:"Panel",overridesResolver:function(e,t){return t.panel}})((function(e){return{zIndex:e.theme.zIndex.modal}})),pk=(0,Ce.ZP)(Qd,{name:"MuiDataGrid",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){return{backgroundColor:e.theme.palette.background.paper,minWidth:300,maxHeight:450,display:"flex"}})),hk=n.forwardRef((function(e,t){var r,o=e.children,u=e.className,s=(0,ge.Z)(e,ck),c=Kl(),g=gk,d=n.useState(!1),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=n.useCallback((function(){c.current.hidePreferences()}),[c]),I=n.useCallback((function(e){pI(e.key)&&c.current.hidePreferences()}),[c]),m=n.useMemo((function(){return[{name:"flip",enabled:!1},{name:"isPlaced",enabled:!0,phase:"main",fn:function(){f(!0)},effect:function(){return function(){f(!1)}}}]}),[]),v=null==(r=c.current.columnHeadersContainerElementRef)?void 0:r.current;return v?(0,a.jsx)(dk,(0,l.Z)({ref:t,placement:"bottom-start",className:(0,de.Z)(u,g.panel),anchorEl:v,modifiers:m},s,{children:(0,a.jsx)(YI,{mouseEvent:"onMouseUp",onClickAway:C,children:(0,a.jsx)(pk,{className:g.paper,elevation:8,onKeyDown:I,children:h&&o})})})):null})),fk=["selected","rowId","row","index","style","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","cellFocus","cellTabIndex","editRowsState","isLastVisible","onClick","onDoubleClick","onMouseEnter","onMouseLeave"],Ck=function(e){var t=e.width,n=e.height;if(!t||!n)return null;var r={width:t,height:n};return(0,a.jsx)("div",{className:"MuiDataGrid-cell",style:r})};var Ik=["sortingOrder"],mk=n.memo((function(e){var t=e.sortingOrder,n=(0,ge.Z)(e,Ik),r=zl(),o="asc"===(0,i.Z)(t,1)[0]?r.components.ColumnSortedAscendingIcon:r.components.ColumnSortedDescendingIcon;return o?(0,a.jsx)(o,(0,l.Z)({},n)):null})),vk=["message","hasError","errorInfo"],bk=n.forwardRef((function(e,t){var n=e.message,r=(0,ge.Z)(e,vk),o=Kl(),i=o.current.getLocaleText("errorOverlayDefaultLabel"),u=Tl(o,Ku);return(0,a.jsx)(BA,(0,l.Z)({ref:t,sx:{width:"100%",minHeight:2*u}},r,{children:n||i}))})),Ak=n.forwardRef((function(e,t){var n=Kl().current.getLocaleText("noResultsOverlayLabel");return(0,a.jsx)(BA,(0,l.Z)({ref:t},e,{children:n}))})),yk={BooleanCellTrueIcon:Bc,BooleanCellFalseIcon:Ac,ColumnMenuIcon:bc,OpenFilterButtonIcon:pc,FilterPanelDeleteIcon:Ac,ColumnFilteredIcon:hc,ColumnSelectorIcon:fc,ColumnUnsortedIcon:mk,ColumnSortedAscendingIcon:sc,ColumnSortedDescendingIcon:cc,ColumnResizeIcon:Cc,DensityCompactIcon:Ic,DensityStandardIcon:mc,DensityComfortableIcon:vc,ExportIcon:wc,MoreActionsIcon:xc,TreeDataCollapseIcon:dc,TreeDataExpandIcon:gc,GroupingCriteriaCollapseIcon:dc,GroupingCriteriaExpandIcon:gc,DetailPanelExpandIcon:yc,DetailPanelCollapseIcon:kc,RowReorderIcon:Sc},kk=(0,l.Z)({},yk,{BaseCheckbox:eb,BaseTextField:HC,BaseFormControl:yh,BaseSelect:FC,BaseSwitch:sb,BaseButton:It,BaseTooltip:kb,BasePopper:Yd,Cell:function(e){var t=e.align,r=e.children,o=e.colIndex,i=e.cellMode,u=e.field,s=e.formattedValue,c=e.hasFocus,g=e.height,d=e.isEditable,p=e.rowId,h=e.tabIndex,f=e.value,C=e.width,I=e.className,m=e.showRightBorder,v=e.colSpan,b=e.onClick,A=e.onDoubleClick,y=e.onMouseDown,k=e.onMouseUp,Z=e.onKeyDown,S=e.onDragEnter,w=e.onDragOver,B=(0,ge.Z)(e,Zb),x=null==s?f:s,G=n.useRef(null),R=n.useRef(null),W=Kl(),V=function(e){var t=e.align,n=e.showRightBorder,r=e.isEditable,a=e.classes,o={root:["cell","cell--text".concat((0,lt.Z)(t)),r&&"cell--editable",n&&"withBorder"],content:["cellContent"]};return(0,he.Z)(o,Il,a)}({align:t,showRightBorder:m,isEditable:d,classes:zl().classes}),F=n.useCallback((function(e){return function(t){var n=W.current.getCellParams(p,u||"");W.current.publishEvent(e,n,t),k&&k(t)}}),[W,u,k,p]),N=n.useCallback((function(e,t){return function(n){if(n.currentTarget.contains(n.target)&&W.current.getRow(p)){var r=W.current.getCellParams(p,u||"");W.current.publishEvent(e,r,n),t&&t(n)}}}),[W,u,p]),E={minWidth:C,maxWidth:C,minHeight:g,maxHeight:g};n.useLayoutEffect((function(){if(c&&i!==cI.Edit){var e=(0,Gh.Z)(W.current.rootElementRef.current);if(G.current&&!G.current.contains(e.activeElement)){var t=G.current.querySelector('[tabindex="0"]'),n=R.current||t||G.current;if(void 0===Ab&&document.createElement("div").focus({get preventScroll(){return Ab=!0,!1}}),Ab)n.focus({preventScroll:!0});else{var r=W.current.getScrollPosition();n.focus(),W.current.scroll(r)}}}}),[c,i,W]);var D=B.onFocus,X="actions"===W.current.getColumn(u).type;return(0,a.jsx)("div",(0,l.Z)({ref:G,className:(0,de.Z)(I,V.root),role:"cell","data-field":u,"data-colindex":o,"aria-colindex":o+1,"aria-colspan":v,style:E,tabIndex:"view"!==i&&d||X?-1:h,onClick:N(fu.cellClick,b),onDoubleClick:N(fu.cellDoubleClick,A),onMouseDown:N(fu.cellMouseDown,y),onMouseUp:F(fu.cellMouseUp),onKeyDown:N(fu.cellKeyDown,Z),onDragEnter:N(fu.cellDragEnter,S),onDragOver:N(fu.cellDragOver,w)},B,{onFocus:D,children:null==r?(0,a.jsx)("div",{className:V.content,children:null==x?void 0:x.toString()}):n.isValidElement(r)&&X?n.cloneElement(r,{focusElementRef:R}):r}))},ColumnHeaderFilterIconButton:function(e){var t,r=e.counter,o=e.field,i=e.onClick,u=Kl(),s=zl(),c=function(e){var t=e.classes;return(0,he.Z)({icon:["filterIcon"]},Il,t)}((0,l.Z)({},e,{classes:s.classes})),g=n.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=iv(u.current.state),n=t.open,r=t.openedPanelValue;n&&r===$I.filters?u.current.hideFilterPanel():u.current.showFilterPanel(),i&&i(u.current.getColumnHeaderParams(o),e)}),[u,o,i]);if(!r)return null;var d=(0,a.jsx)(rp,{onClick:g,color:"default","aria-label":u.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,children:(0,a.jsx)(s.components.ColumnFilteredIcon,{className:c.icon,fontSize:"small"})});return(0,a.jsx)(s.components.BaseTooltip,(0,l.Z)({title:u.current.getLocaleText("columnHeaderFiltersTooltipActive")(r),enterDelay:1e3},null==(t=s.componentsProps)?void 0:t.baseTooltip,{children:(0,a.jsxs)(Tb,{children:[r>1&&(0,a.jsx)(Jb,{badgeContent:r,color:"default",children:d}),1===r&&d]})}))},ColumnMenu:Ob,ErrorOverlay:bk,Footer:aA,Header:oA,Toolbar:null,PreferencesPanel:iA,LoadingOverlay:xA,NoResultsOverlay:Ak,NoRowsOverlay:GA,Pagination:my,FilterPanel:function(e){var t,r=Kl(),o=zl(),i=Tl(r,Gu),u=Tl(r,Jl),s=n.useRef(null),c=e.linkOperators,g=void 0===c?[Fm.And,Fm.Or]:c,d=e.columnsSort,p=e.filterFormProps,h=(0,ge.Z)(e,Hy),f=n.useCallback((function(e){r.current.upsertFilterItem(e)}),[r]),C=n.useCallback((function(e){r.current.setFilterLinkOperator(e)}),[r]),I=n.useCallback((function(){var e=u.find((function(e){var t;return null==(t=e.filterOperators)?void 0:t.length}));return e?{columnField:e.field,operatorValue:e.filterOperators[0].value,id:Math.round(1e5*Math.random())}:null}),[u]),m=n.useMemo((function(){if(i.items.length)return i.items;var e=I();return e?[e]:[]}),[i.items,I]),v=m.length>1,b=n.useCallback((function(e){var t=1===m.length;r.current.deleteFilterItem(e),t&&r.current.hideFilterPanel()}),[r,m.length]);return n.useEffect((function(){g.length>0&&i.linkOperator&&!g.includes(i.linkOperator)&&C(g[0])}),[g,C,i.linkOperator]),n.useEffect((function(){m.length>0&&s.current.focus()}),[m.length]),(0,a.jsxs)(xy,(0,l.Z)({},h,{children:[(0,a.jsx)(Ay,{children:m.map((function(e,t){return(0,a.jsx)(Jy,(0,l.Z)({item:e,applyFilterChanges:f,deleteFilter:b,hasMultipleFilters:v,showMultiFilterOperators:t>0,multiFilterOperator:i.linkOperator,disableMultiFilterOperator:1!==t,applyMultiFilterOperatorChanges:C,focusElementRef:t===m.length-1?s:null,linkOperators:g,columnsSort:d},p),null==e.id?t:e.id)}))}),!o.disableMultipleColumnsFiltering&&(0,a.jsx)(Zy,{children:(0,a.jsx)(o.components.BaseButton,(0,l.Z)({onClick:function(){var e=I();e&&r.current.setFilterModel((0,l.Z)({},i,{items:[].concat((0,Ae.Z)(m),[e])}))},startIcon:(0,a.jsx)(yc,{}),color:"primary"},null==(t=o.componentsProps)?void 0:t.baseButton,{children:r.current.getLocaleText("filterPanelAddFilter")}))})]}))},ColumnsPanel:function(e){var t,r,o,u=Kl(),s=n.useRef(null),c=Tl(u,Fl),g=Tl(u,Nl),d=zl(),p=n.useState(""),h=(0,i.Z)(p,2),f=h[0],C=h[1],I=function(e){var t=e.classes;return(0,he.Z)({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},Il,t)}({classes:d.classes}),m=function(e){var t=e.target.name;u.current.setColumnVisibility(t,!1===g[t])},v=n.useCallback((function(e){u.current.updateColumns(c.map((function(t){return!1!==t.hideable?{field:t.field,hide:!e}:t})))}),[u,c]),b=n.useCallback((function(e){C(e.target.value)}),[]),A=n.useMemo((function(){if(!f)return c;var e=f.toLowerCase();return c.filter((function(t){return(t.headerName||t.field).toLowerCase().indexOf(e)>-1}))}),[c,f]);return n.useEffect((function(){s.current.focus()}),[]),(0,a.jsxs)(xy,(0,l.Z)({},e,{children:[(0,a.jsx)(ak,{children:(0,a.jsx)(d.components.BaseTextField,(0,l.Z)({label:u.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:u.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:s,value:f,onChange:b,variant:"standard",fullWidth:!0},null==(t=d.componentsProps)?void 0:t.baseTextField))}),(0,a.jsx)(Ay,{children:(0,a.jsx)(lk,{className:I.root,children:A.map((function(e){var t;return(0,a.jsxs)(uk,{className:I.columnsPanelRow,children:[(0,a.jsx)(tk,{control:(0,a.jsx)(d.components.BaseSwitch,(0,l.Z)({disabled:!1===e.hideable,checked:!1!==g[e.field],onClick:m,name:e.field,color:"primary",size:"small"},null==(t=d.componentsProps)?void 0:t.baseSwitch)),label:e.headerName||e.field}),!d.disableColumnReorder&&ik&&(0,a.jsx)(sk,{draggable:!0,"aria-label":u.current.getLocaleText("columnsPanelDragIconLabel"),title:u.current.getLocaleText("columnsPanelDragIconLabel"),size:"small",disabled:!0,children:(0,a.jsx)(Sc,{})})]},e.field)}))})}),(0,a.jsxs)(Zy,{children:[(0,a.jsx)(d.components.BaseButton,(0,l.Z)({onClick:function(){return v(!1)},color:"primary"},null==(r=d.componentsProps)?void 0:r.baseButton,{children:u.current.getLocaleText("columnsPanelHideAllButton")})),(0,a.jsx)(d.components.BaseButton,(0,l.Z)({onClick:function(){return v(!0)},color:"primary"},null==(o=d.componentsProps)?void 0:o.baseButton,{children:u.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))},Panel:hk,Row:function(e){var t,r=e.selected,o=e.rowId,i=e.row,u=e.index,s=e.style,c=e.rowHeight,g=e.className,d=e.visibleColumns,p=e.renderedColumns,h=e.containerWidth,f=e.firstColumnToRender,C=e.cellFocus,I=e.cellTabIndex,m=e.editRowsState,v=e.isLastVisible,b=void 0!==v&&v,A=e.onClick,y=e.onDoubleClick,k=e.onMouseEnter,Z=e.onMouseLeave,S=(0,ge.Z)(e,fk),w=u+2,B=Kl(),x=zl(),G=jm(B,x),R=Tl(B,Xl),W=null!=(t=B.current.getRootDimensions())?t:{hasScrollX:!1,hasScrollY:!1},V=W.hasScrollX,F=W.hasScrollY,N=function(e){var t=e.editable,n=e.editing,r=e.selected,a=e.isLastVisible,o=e.classes,i={root:["row",r&&"selected",t&&"row--editable",n&&"row--editing",a&&"row--lastVisible"]};return(0,he.Z)(i,Il,o)}({selected:r,isLastVisible:b,classes:x.classes,editing:B.current.getRowMode(o)===gI.Edit,editable:x.editMode===sI.Row}),E=n.useCallback((function(e,t){return function(n){(1!==n.target.nodeType||n.currentTarget.contains(n.target))&&B.current.getRow(o)&&(B.current.publishEvent(e,B.current.getRowParams(o),n),t&&t(n))}}),[B,o]),D=n.useCallback((function(e){var t=Sv(e.target,ml.cell),n=null==t?void 0:t.getAttribute("data-field");if(n){if(n===Rm.field)return;if(n===qm)return;if("__reorder__"===n)return;if(B.current.getCellMode(o,n)===cI.Edit)return;if(B.current.getColumn(n).type===_I)return}E(fu.rowClick,A)(e)}),[B,A,E,o]),X=(0,l.Z)({},s,{maxHeight:c,minHeight:c}),J=B.current.unstable_getRowInternalSizes(o);null!=J&&J.spacingTop&&(X["border"===x.rowSpacingType?"borderTopWidth":"marginTop"]=J.spacingTop),null!=J&&J.spacingBottom&&(X["border"===x.rowSpacingType?"borderBottomWidth":"marginBottom"]=J.spacingBottom);var H=null;if("function"===typeof x.getRowClassName){var Y=u-G.range.firstRowIndex,T=(0,l.Z)({},B.current.getRowParams(o),{isFirstVisible:0===Y,isLastVisible:Y===G.rows.length-1,indexRelativeToCurrentPage:Y});H=x.getRowClassName(T)}for(var M=[],K=0;K<p.length;K+=1){var P=p[K],z=f+K,L=z===d.length-1,_=L?!(L&&V&&!F)&&x.disableExtendRowFullWidth:x.showCellRightBorder,O=B.current.getCellParams(o,P.field),U=[];P.cellClassName&&U.push((0,de.Z)("function"===typeof P.cellClassName?P.cellClassName(O):P.cellClassName));var j,Q=m[o]?m[o][P.field]:null,q=null;if(null==Q&&P.renderCell)q=P.renderCell((0,l.Z)({},O,{api:B.current})),U.push((0,de.Z)(ml["cell--withRenderer"],null==(j=x.classes)?void 0:j["cell--withRenderer"]));if(null!=Q&&P.renderEditCell){var $,ee=i;B.current.unstable_getRowWithUpdatedValues&&(ee=B.current.unstable_getRowWithUpdatedValues(o,P.field));var te=(0,l.Z)({},O,{row:ee},Q,{api:B.current});q=P.renderEditCell(te),U.push((0,de.Z)(ml["cell--editing"],null==($=x.classes)?void 0:$["cell--editing"]))}x.getCellClassName&&U.push(x.getCellClassName(O));var ne=null!==C&&C.id===o&&C.field===P.field,re=null!==I&&I.id===o&&I.field===P.field&&"view"===O.cellMode?0:-1,ae=B.current.unstable_getCellColSpanInfo(o,z);if(ae&&!ae.spannedByColSpan){var oe,ie=ae.cellProps,le=ie.colSpan,ue=ie.width;M.push((0,a.jsx)(x.components.Cell,(0,l.Z)({value:O.value,field:P.field,width:ue,rowId:o,height:c,showRightBorder:_,formattedValue:O.formattedValue,align:P.align||"left",cellMode:O.cellMode,colIndex:z,isEditable:O.isEditable,hasFocus:ne,tabIndex:re,className:(0,de.Z)(U),colSpan:le},null==(oe=x.componentsProps)?void 0:oe.cell,{children:q}),P.field))}}var se=h-R;return(0,a.jsxs)("div",(0,l.Z)({"data-id":o,"data-rowindex":u,role:"row",className:(0,de.Z)(H,N.root,g),"aria-rowindex":w,"aria-selected":r,style:X,onClick:D,onDoubleClick:E(fu.rowDoubleClick,y),onMouseEnter:E(fu.rowMouseEnter,k),onMouseLeave:E(fu.rowMouseLeave,Z)},S,{children:[M,se>0&&(0,a.jsx)(Ck,{width:se,height:c})]}))}}),Zk={apiRef:void 0,disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,signature:"DataGrid"},Sk={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,density:om.Standard,disableExtendRowFullWidth:!1,disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableMultipleColumnsFiltering:!1,disableMultipleSelection:!1,disableMultipleColumnsSorting:!1,disableSelectionOnClick:!1,disableVirtualization:!1,editMode:sI.Cell,filterMode:Jm,headerHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:Jm,rowHeight:52,rowsPerPageOptions:[25,50,100],rowSpacingType:"margin",showCellRightBorder:!1,showColumnRightBorder:!1,sortingOrder:["asc","desc",null],sortingMode:Jm,throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1},wk=["className"],Bk=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:function(e,t){return t.virtualScroller}})({overflow:"auto",position:"relative","@media print":{overflow:"hidden"}}),xk=n.forwardRef((function(e,t){var n=e.className,r=(0,ge.Z)(e,wk),o=function(e){var t=e.classes;return(0,he.Z)({root:["virtualScroller"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(Bk,(0,l.Z)({ref:t,className:(0,de.Z)(o.root,n)},r))})),Gk=["className","style"],Rk=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:function(e,t){return t.virtualScrollerContent}})({}),Wk=n.forwardRef((function(e,t){var n=e.className,r=e.style,o=(0,ge.Z)(e,Gk),i=zl(),u=function(e){var t=e.classes,n={root:["virtualScrollerContent",e.overflowedContent&&"virtualScrollerContent--overflowed"]};return(0,he.Z)(n,Il,t)}({classes:i.classes,overflowedContent:!i.autoHeight&&"auto"===(null==r?void 0:r.minHeight)});return(0,a.jsx)(Rk,(0,l.Z)({ref:t,className:(0,de.Z)(u.root,n),style:r},o))})),Vk=["className"],Fk=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:function(e,t){return t.virtualScrollerRenderZone}})({position:"absolute",display:"flex",flexDirection:"column"}),Nk=n.forwardRef((function(e,t){var n=e.className,r=(0,ge.Z)(e,Vk),o=function(e){var t=e.classes;return(0,he.Z)({root:["virtualScrollerRenderZone"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(Fk,(0,l.Z)({ref:t,className:(0,de.Z)(o.root,n)},r))})),Ek=["style"];function Dk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(t.length<=0)return-1;if(n>=r)return n;var a=n+Math.floor((r-n)/2),o=t[a];return e<=o?Dk(e,t,n,a):Dk(e,t,a+1,r)}var Xk=function(e){var t=e.firstIndex,n=e.lastIndex,r=e.buffer,a=e.minFirstIndex,o=e.maxLastIndex;return[es(t-r,a,o),es(n+r,a,o)]},Jk=["className","disableVirtualization"],Hk=n.forwardRef((function(e,t){var o=e.className,u=e.disableVirtualization,s=(0,ge.Z)(e,Jk),c=function(e){var t=Kl(),o=zl(),u=Tl(t,El),s=e.ref,c=e.disableVirtualization,g=e.onRenderZonePositioning,d=e.renderZoneMinColumnIndex,p=void 0===d?0:d,h=e.renderZoneMaxColumnIndex,f=void 0===h?u.length:h,C=e.getRowProps,I=Tl(t,Dl),m=Tl(t,Xl),v=Tl(t,Ku),b=Tl(t,pm),A=Tl(t,Cm),y=Tl(t,Xm),k=Tl(t,uv),Z=Tl(t,Am),S=jm(t,o),w=n.useRef(null),B=n.useRef(null),x=(0,me.Z)(s,B),G=n.useState(null),R=(0,i.Z)(G,2),W=R[0],V=R[1],F=n.useRef(W),N=n.useRef({top:0,left:0}),E=n.useState(null),D=(0,i.Z)(E,2),X=D[0],J=D[1],H=n.useRef(m),Y=n.useCallback((function(){if(c)return{firstRowIndex:0,lastRowIndex:S.rows.length,firstColumnIndex:0,lastColumnIndex:u.length};var e=N.current,t=e.top,n=e.left,r=Dk(t,y.positions);return{firstRowIndex:r,lastRowIndex:o.autoHeight?r+S.rows.length:Dk(t+B.current.clientHeight,y.positions),firstColumnIndex:Dk(n,I),lastColumnIndex:Dk(n+X,I)}}),[c,y.positions,o.autoHeight,S.rows.length,I,X,u.length]);n.useEffect((function(){c?w.current.style.transform="translate3d(0px, 0px, 0px)":(B.current.scrollLeft=0,B.current.scrollTop=0)}),[c]),n.useEffect((function(){J(B.current.clientWidth)}),[y.currentPageTotalHeight]);var T=n.useCallback((function(){B.current&&J(B.current.clientWidth)}),[]);hs(t,fu.resize,T);var M=n.useCallback((function(e){var n=Xk({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:S.rows.length,buffer:o.rowBuffer}),r=(0,i.Z)(n,2),a=r[0],l=r[1],u=Xk({firstIndex:e.firstColumnIndex,lastIndex:e.lastColumnIndex,minFirstIndex:p,maxLastIndex:f,buffer:o.columnBuffer}),s=rm({firstColumnToRender:(0,i.Z)(u,1)[0],apiRef:t,firstRowToRender:a,lastRowToRender:l,visibleRows:S.rows}),c=Xm(t.current.state).positions[a],d=Dl(t)[s];w.current.style.transform="translate3d(".concat(d,"px, ").concat(c,"px, 0px)"),"function"===typeof g&&g({top:c,left:d})}),[t,S.rows,g,p,f,o.columnBuffer,o.rowBuffer]);n.useLayoutEffect((function(){W&&M(W)}),[W,M]);var K=n.useCallback((function(e){V(e),F.current=e}),[V,F]);n.useEffect((function(){if(null!=X){var e=Y();K(e);var n=N.current,r={top:n.top,left:n.left,renderContext:e};t.current.publishEvent(fu.rowsScroll,r)}}),[t,Y,X,K]);var P=function(e){var n=e.currentTarget,a=n.scrollTop,i=n.scrollLeft;if(N.current.top=a,N.current.left=i,!(i<0||a<0)&&F.current){var l=c?F.current:Y(),u=Math.abs(l.firstRowIndex-F.current.firstRowIndex),s=Math.abs(l.lastRowIndex-F.current.lastRowIndex),g=Math.abs(l.firstColumnIndex-F.current.firstColumnIndex),d=Math.abs(l.lastColumnIndex-F.current.lastColumnIndex),p=u>=o.rowThreshold||s>=o.rowThreshold||g>=o.columnThreshold||d>=o.columnThreshold||H.current!==m;t.current.publishEvent(fu.rowsScroll,{top:a,left:i,renderContext:p?l:F.current},e),p&&(r.flushSync((function(){K(l)})),H.current=m)}},z=function(e){t.current.publishEvent(fu.virtualScrollerWheel,{},e)},L=function(e){t.current.publishEvent(fu.virtualScrollerTouchMove,{},e)},_=X&&m>X,O=n.useMemo((function(){var e=Math.max(y.currentPageTotalHeight,1),t=!1;null!=B&&B.current&&e<=(null==B?void 0:B.current.clientHeight)&&(t=!0);var n={width:_?m:"auto",height:e,minHeight:t?"100%":"auto"};return o.autoHeight&&0===S.rows.length&&(n.height=2*v),n}),[B,m,y.currentPageTotalHeight,S.rows.length,_,o.autoHeight,v]);n.useEffect((function(){t.current.publishEvent(fu.virtualScrollerContentSizeChange)}),[t,O]),o.autoHeight&&0===S.rows.length&&(O.height=2*v);var U={};_||(U.overflowX="hidden");var j=n.useCallback((function(){return F.current}),[]);return t.current.unstable_getRenderContext=j,{renderContext:W,updateRenderZonePosition:M,getRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{renderContext:W},n=e.renderContext,r=e.minFirstColumn,s=void 0===r?p:r,g=e.maxLastColumn,d=void 0===g?f:g,h=e.availableSpace,I=void 0===h?X:h;if(!S.range||!n||null==I)return null;for(var m=c?0:o.rowBuffer,v=c?0:o.columnBuffer,y=Xk({firstIndex:n.firstRowIndex,lastIndex:n.lastRowIndex,minFirstIndex:0,maxLastIndex:S.rows.length,buffer:m}),w=(0,i.Z)(y,2),B=w[0],x=w[1],G=[],R=B;R<x;R+=1){var V=S.rows[R];G.push(V),t.current.unstable_calculateColSpan({rowId:V.id,minFirstColumn:s,maxLastColumn:d})}for(var F=Xk({firstIndex:n.firstColumnIndex,lastIndex:n.lastColumnIndex,minFirstIndex:s,maxLastIndex:d,buffer:v}),N=(0,i.Z)(F,2),E=N[0],D=N[1],J=rm({firstColumnToRender:E,apiRef:t,firstRowToRender:B,lastRowToRender:x,visibleRows:S.rows}),H=u.slice(J,D),Y=[],T=0;T<G.length;T+=1){var M,K=G[T],P=K.id,z=K.model,L=B+T===S.rows.length-1,_=t.current.unstable_getRowHeight(P),O=void 0;O=null!=Z[P]&&("function"!==typeof o.isRowSelectable||o.isRowSelectable(t.current.getRowParams(P))),Y.push((0,a.jsx)(o.components.Row,(0,l.Z)({row:z,rowId:P,rowHeight:_,cellFocus:b,cellTabIndex:A,editRowsState:k,renderedColumns:H,visibleColumns:u,firstColumnToRender:J,lastColumnToRender:D,selected:O,index:S.range.firstRowIndex+B+T,containerWidth:I,isLastVisible:L},"function"===typeof C?C(P,z):{},null==(M=o.componentsProps)?void 0:M.row),P))}return Y},getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,r=(0,ge.Z)(e,Ek);return(0,l.Z)({ref:x,onScroll:P,onWheel:z,onTouchMove:L,style:(0,l.Z)({},n,U)},r)},getContentProps:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{}:e;return{style:(0,l.Z)({},t,O)}},getRenderZoneProps:function(){return{ref:w}}}}({ref:t,disableVirtualization:u}),g=c.getRootProps,d=c.getContentProps,p=c.getRenderZoneProps,h=c.getRows;return(0,a.jsx)(xk,(0,l.Z)({className:o},g(s),{children:(0,a.jsx)(Wk,(0,l.Z)({},d(),{children:(0,a.jsx)(Nk,(0,l.Z)({},p(),{children:h()}))}))}))}));function Yk(e){var t=e.direction,n=e.index,r=e.sortingOrder,o=Kl(),i=zl(),u=function(e){var t=e.classes;return(0,he.Z)({icon:["sortIcon"]},Il,t)}((0,l.Z)({},e,{classes:i.classes})),s=function(e,t,n,r){var o,i={};return"asc"===t?o=e.ColumnSortedAscendingIcon:"desc"===t?o=e.ColumnSortedDescendingIcon:(o=e.ColumnUnsortedIcon,i.sortingOrder=r),o?(0,a.jsx)(o,(0,l.Z)({fontSize:"small",className:n},i)):null}(i.components,t,u.icon,r);if(!s)return null;var c=(0,a.jsx)(rp,{tabIndex:-1,"aria-label":o.current.getLocaleText("columnHeaderSortIconLabel"),title:o.current.getLocaleText("columnHeaderSortIconLabel"),size:"small",children:s});return(0,a.jsxs)(Tb,{children:[null!=n&&(0,a.jsx)(Jb,{badgeContent:n,color:"default",children:c}),null==n&&c]})}var Tk=n.memo(Yk),Mk=["className"],Kk=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:function(e,t){return t.columnHeaderTitle}})((function(e){return{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:e.theme.typography.fontWeightMedium}})),Pk=n.forwardRef((function(e,t){var n=e.className,r=(0,ge.Z)(e,Mk),o=function(e){var t=e.classes;return(0,he.Z)({root:["columnHeaderTitle"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(Kk,(0,l.Z)({ref:t,className:(0,de.Z)(o.root,n)},r))}));function zk(e){var t,r=e.label,o=e.description,u=e.columnWidth,s=zl(),c=n.useRef(null),g=n.useState(""),d=(0,i.Z)(g,2),p=d[0],h=d[1];return n.useEffect((function(){if(!o&&c&&c.current){var e=(t=c.current).scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth;h(e?r:"")}var t}),[c,u,o,r]),(0,a.jsx)(s.components.BaseTooltip,(0,l.Z)({title:o||p},null==(t=s.componentsProps)?void 0:t.baseTooltip,{children:(0,a.jsx)(Pk,{ref:c,children:r})}))}var Lk,_k=["resizable","resizing","height","side"];!function(e){e.Left="left",e.Right="right"}(Lk||(Lk={}));function Ok(e){var t=e.height,r=e.side,o=void 0===r?Lk.Right:r,i=(0,ge.Z)(e,_k),u=zl(),s=function(e){var t=e.resizable,n=e.resizing,r=e.classes,a=e.side,o={root:["columnSeparator",t&&"columnSeparator--resizable",n&&"columnSeparator--resizing",a&&"columnSeparator--side".concat((0,lt.Z)(a))],icon:["iconSeparator"]};return(0,he.Z)(o,Il,r)}((0,l.Z)({},e,{side:o,classes:u.classes})),c=n.useCallback((function(e){e.preventDefault(),e.stopPropagation()}),[]);return(0,a.jsx)("div",(0,l.Z)({className:s.root,style:{minHeight:t,opacity:u.showColumnRightBorder?0:1}},i,{onClick:c,children:(0,a.jsx)(u.components.ColumnResizeIcon,{className:s.icon})}))}var Uk=n.memo(Ok),jk=n.memo((function(e){var t=e.column,r=e.open,o=e.columnMenuId,i=e.columnMenuButtonId,u=e.iconButtonRef,s=Kl(),c=zl(),g=function(e){var t=e.classes,n={root:["menuIcon",e.open&&"menuOpen"],button:["menuIconButton"]};return(0,he.Z)(n,Il,t)}((0,l.Z)({},e,{classes:c.classes})),d=n.useCallback((function(e){e.preventDefault(),e.stopPropagation(),s.current.toggleColumnMenu(t.field)}),[s,t.field]);return(0,a.jsx)("div",{className:g.root,children:(0,a.jsx)(rp,{ref:u,tabIndex:-1,className:g.button,"aria-label":s.current.getLocaleText("columnMenuLabel"),title:s.current.getLocaleText("columnMenuLabel"),size:"small",onClick:d,"aria-expanded":r?"true":void 0,"aria-haspopup":"true","aria-controls":o,id:i,children:(0,a.jsx)(c.components.ColumnMenuIcon,{fontSize:"small"})})})}));function Qk(e){var t=e.columnMenuId,r=e.columnMenuButtonId,o=e.ContentComponent,i=e.contentComponentProps,u=e.field,s=e.open,c=e.target,g=e.onExited,d=Kl(),p=d.current.getColumn(u),h=n.useCallback((function(e){e.stopPropagation(),d.current.hideColumnMenu()}),[d]);return c?(0,a.jsx)(PI,{placement:"bottom-".concat("right"===p.align?"start":"end"),open:s,target:c,onClickAway:h,onExited:g,children:(0,a.jsx)(o,(0,l.Z)({currentColumn:p,hideMenu:h,open:s,id:t,labelledby:r},i))}):null}function qk(e){var t,r,o,u,s,c=e.column,g=e.columnMenuOpen,d=e.colIndex,p=e.headerHeight,h=e.isResizing,f=e.isLastColumn,C=e.sortDirection,I=e.sortIndex,m=e.filterItemsCounter,v=e.hasFocus,b=e.tabIndex,A=e.extendRowFullWidth,y=e.disableReorder,k=e.separatorSide,Z=Kl(),S=zl(),w=n.useRef(null),B=(0,Gc.Z)(),x=(0,Gc.Z)(),G=n.useRef(null),R=n.useState(g),W=(0,i.Z)(R,2),V=W[0],F=W[1],N=null!=(t=Z.current.getRootDimensions())?t:{hasScrollX:!1,hasScrollY:!1},E=N.hasScrollX,D=N.hasScrollY,X=null;c.renderHeader&&(X=c.renderHeader(Z.current.getColumnHeaderParams(c.field)));var J,H=n.useCallback((function(e){return function(t){t.currentTarget.contains(t.target)&&Z.current.publishEvent(e,Z.current.getColumnHeaderParams(c.field),t)}}),[Z,c.field]),Y={onClick:H(fu.columnHeaderClick),onDoubleClick:H(fu.columnHeaderDoubleClick),onMouseOver:H(fu.columnHeaderOver),onMouseOut:H(fu.columnHeaderOut),onMouseEnter:H(fu.columnHeaderEnter),onMouseLeave:H(fu.columnHeaderLeave),onKeyDown:H(fu.columnHeaderKeyDown),onFocus:H(fu.columnHeaderFocus),onBlur:H(fu.columnHeaderBlur)},T={onDragStart:H(fu.columnHeaderDragStart),onDragEnter:H(fu.columnHeaderDragEnter),onDragOver:H(fu.columnHeaderDragOver),onDragEnd:H(fu.columnHeaderDragEnd)},M=f?!(f&&E&&!D)&&!A:S.showColumnRightBorder,K=function(e){var t=e.column,n=e.classes,r=e.isDragging,a=e.sortDirection,o=e.showRightBorder,i=e.filterItemsCounter,l=null!=a,u=null!=i&&i>0,s="number"===t.type,c={root:["columnHeader","left"===t.headerAlign&&"columnHeader--alignLeft","center"===t.headerAlign&&"columnHeader--alignCenter","right"===t.headerAlign&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",r&&"columnHeader--moving",l&&"columnHeader--sorted",u&&"columnHeader--filtered",s&&"columnHeader--numeric",o&&"withBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return(0,he.Z)(c,Il,n)}((0,l.Z)({},e,{classes:S.classes,showRightBorder:M})),P=c.computedWidth;null!=C&&(J="asc"===C?"ascending":"descending"),n.useEffect((function(){V||F(g)}),[V,g]);var z=n.useCallback((function(){F(!1)}),[]),L=!S.disableColumnMenu&&!c.disableColumnMenu&&(0,a.jsx)(jk,{column:c,columnMenuId:B,columnMenuButtonId:x,open:V,iconButtonRef:G}),_=null!=(r=c.sortingOrder)?r:S.sortingOrder,O=(0,a.jsxs)(n.Fragment,{children:[!S.disableColumnFilter&&(0,a.jsx)(S.components.ColumnHeaderFilterIconButton,(0,l.Z)({field:c.field,counter:m},null==(o=S.componentsProps)?void 0:o.columnHeaderFilterIconButton)),c.sortable&&!c.hideSortIcons&&(0,a.jsx)(Tk,{direction:C,index:I,sortingOrder:_})]});n.useLayoutEffect((function(){var e=Z.current.state.columnMenu;if(v&&!e.open){var t=w.current.querySelector('[tabindex="0"]')||w.current;null==t||t.focus(),Z.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[Z,v]);var U="function"===typeof c.headerClassName?c.headerClassName({field:c.field,colDef:c}):c.headerClassName;return(0,a.jsxs)("div",(0,l.Z)({ref:w,className:(0,de.Z)(K.root,U),"data-field":c.field,style:{width:P,minWidth:P,maxWidth:P},role:"columnheader",tabIndex:b,"aria-colindex":d+1,"aria-sort":J},Y,{children:[(0,a.jsxs)("div",(0,l.Z)({className:K.draggableContainer,draggable:!S.disableColumnReorder&&!y&&!c.disableReorder},T,{children:[(0,a.jsxs)("div",{className:K.titleContainer,children:[(0,a.jsx)("div",{className:K.titleContainerContent,children:X||(0,a.jsx)(zk,{label:null!=(u=c.headerName)?u:c.field,description:c.description,columnWidth:P})}),O]}),L]})),(0,a.jsx)(Uk,{resizable:!S.disableColumnResize&&!!c.resizable,resizing:h,height:p,onMouseDown:H(fu.columnSeparatorMouseDown),side:k}),(0,a.jsx)(Qk,{columnMenuId:B,columnMenuButtonId:x,field:c.field,open:g,target:G.current,ContentComponent:S.components.ColumnMenu,contentComponentProps:null==(s=S.componentsProps)?void 0:s.columnMenu,onExited:z})]}))}var $k=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:function(e,t){return[(0,le.Z)({},"&.".concat(ml["scrollArea--left"]),t["scrollArea--left"]),(0,le.Z)({},"&.".concat(ml["scrollArea--right"]),t["scrollArea--right"]),t.scrollArea]}})((function(){var e;return e={position:"absolute",top:0,zIndex:101,width:20,bottom:0},(0,le.Z)(e,"&.".concat(ml["scrollArea--left"]),{left:0}),(0,le.Z)(e,"&.".concat(ml["scrollArea--right"]),{right:0}),e}));function eZ(e){var t=e.scrollDirection,r=n.useRef(null),o=Kl(),u=n.useRef(),s=n.useState(!1),c=(0,i.Z)(s,2),g=c[0],d=c[1],p=Tl(o,Pu),h=n.useRef({left:0,top:0}),f=zl(),C=function(e){var t=e.scrollDirection,n=e.classes,r={root:["scrollArea","scrollArea--".concat(t)]};return(0,he.Z)(r,Il,n)}((0,l.Z)({},e,{classes:f.classes})),I=n.useCallback((function(e){h.current=e}),[]),m=n.useCallback((function(e){var n;if("left"===t)n=e.clientX-r.current.getBoundingClientRect().right;else{if("right"!==t)throw new Error("MUI: Wrong drag direction");n=Math.max(1,e.clientX-r.current.getBoundingClientRect().left)}n=1.5*(n-1)+1,clearTimeout(u.current),u.current=setTimeout((function(){o.current.scroll({left:h.current.left+n,top:h.current.top})}))}),[t,o]);n.useEffect((function(){return function(){clearTimeout(u.current)}}),[]);var v=n.useCallback((function(){d((function(e){return!e}))}),[]);return hs(o,fu.rowsScroll,I),hs(o,fu.columnHeaderDragStart,v),hs(o,fu.columnHeaderDragEnd,v),g?(0,a.jsx)($k,{ref:r,className:(0,de.Z)(C.root),onDragOver:m,style:{height:p}}):null}var tZ=n.memo(eZ),nZ=["className"],rZ=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:function(e,t){return t.columnHeaders}})((function(e){var t=e.theme,n="light"===t.palette.mode?(0,fe.$n)((0,fe.Fq)(t.palette.divider,1),.88):(0,fe._j)((0,fe.Fq)(t.palette.divider,1),.68);return{position:"absolute",top:0,left:0,right:0,overflow:"hidden",display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(n),borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius}})),aZ=n.forwardRef((function(e,t){var n=e.className,r=(0,ge.Z)(e,nZ),o=function(e){var t=e.classes;return(0,he.Z)({root:["columnHeaders"]},Il,t)}({classes:zl().classes});return(0,a.jsx)(rZ,(0,l.Z)({ref:t,className:(0,de.Z)(n,o.root)},r))})),oZ=["isDragging","className"],iZ=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:function(e,t){return[(0,le.Z)({},"&.".concat(ml.columnHeaderDropZone),t.columnHeaderDropZone),t.columnHeadersInner]}})((function(){var e;return e={display:"flex",alignItems:"center"},(0,le.Z)(e,"&.".concat(ml.columnHeaderDropZone," .").concat(ml.columnHeaderDraggableContainer),{cursor:"move"}),(0,le.Z)(e,"&.".concat(ml["columnHeadersInner--scrollable"]," .").concat(ml.columnHeader,":last-child"),{borderRight:"none"}),e})),lZ=n.forwardRef((function(e,t){var n,r,o=e.isDragging,i=e.className,u=(0,ge.Z)(e,oZ),s=Kl(),c=zl(),g=function(e){var t=e.isDragging,n=e.hasScrollX,r=e.classes,a={root:["columnHeadersInner",t&&"columnHeaderDropZone",n&&"columnHeadersInner--scrollable"]};return(0,he.Z)(a,Il,r)}({isDragging:o,hasScrollX:null!=(n=null==(r=s.current.getRootDimensions())?void 0:r.hasScrollX)&&n,classes:c.classes});return(0,a.jsx)(iZ,(0,l.Z)({ref:t,className:(0,de.Z)(i,g.root)},u))})),uZ=["innerRef","className"],sZ=n.forwardRef((function(e,t){var o=e.innerRef,u=(0,ge.Z)(e,uZ),s=function(e){var t=e.innerRef,o=e.minColumnIndex,u=void 0===o?0:o,s=n.useState(""),c=(0,i.Z)(s,2),g=c[0],d=c[1],p=n.useState(""),h=(0,i.Z)(p,2),f=h[0],C=h[1],I=Kl(),m=Tl(I,El),v=Tl(I,Dl),b=Tl(I,Im),A=Tl(I,Cm),y=Tl(I,hm),k=Tl(I,Pu),Z=Tl(I,Yu),S=Tl(I,Bu),w=Tl(I,xs),B=zl(),x=n.useRef(null),G=(0,me.Z)(t,x),R=n.useState(null),W=(0,i.Z)(R,2),V=W[0],F=W[1],N=n.useRef(V),E=n.useRef(0),D=jm(I,B);n.useEffect((function(){I.current.columnHeadersContainerElementRef.current.scrollLeft=0}),[I]);var X=n.useRef(yl(am,{equalityCheck:function(e,t){return["firstColumnIndex","minColumnIndex","columnBuffer"].every((function(n){return e[n]===t[n]}))}})),J=n.useCallback((function(e){var t=Xk({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:D.rows.length,buffer:B.rowBuffer}),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=X.current({firstColumnIndex:e.firstColumnIndex,minColumnIndex:u,columnBuffer:B.columnBuffer,firstRowToRender:r,lastRowToRender:a,apiRef:I,visibleRows:D.rows}),l=o>0?E.current-v[o]:E.current;x.current.style.transform="translate3d(".concat(-l,"px, 0px, 0px)")}),[v,u,B.columnBuffer,I,D.rows,B.rowBuffer]);n.useLayoutEffect((function(){V&&J(V)}),[V,J]);var H=n.useCallback((function(e,t){var n,a,o=e.left,i=e.renderContext,l=void 0===i?null:i;if(x.current&&(E.current!==o||(null==(n=N.current)?void 0:n.firstColumnIndex)!==(null==l?void 0:l.firstColumnIndex)||(null==(a=N.current)?void 0:a.lastColumnIndex)!==(null==l?void 0:l.lastColumnIndex))){E.current=o;var u=!1;l===N.current&&N.current?u=!0:(function(e){return!!e.target}(t)?(r.flushSync((function(){F(l)})),u=!0):F(l),N.current=l),l&&u&&J(l)}}),[J]),Y=n.useCallback((function(e){return C(e.field)}),[]),T=n.useCallback((function(){return C("")}),[]),M=n.useCallback((function(e){return d(e.field)}),[]),K=n.useCallback((function(){return d("")}),[]);hs(I,fu.columnResizeStart,Y),hs(I,fu.columnResizeStop,T),hs(I,fu.columnHeaderDragStart,M),hs(I,fu.columnHeaderDragEnd,K),hs(I,fu.rowsScroll,H);var P={minHeight:k,maxHeight:k,lineHeight:"".concat(k,"px")};return{renderContext:V,getColumns:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e||{},r=n.renderContext,o=void 0===r?V:r,s=n.minFirstColumn,c=void 0===s?u:s,d=n.maxLastColumn,p=void 0===d?m.length:d;if(!o)return null;for(var h=[],C=Xk({firstIndex:o.firstRowIndex,lastIndex:o.lastRowIndex,minFirstIndex:0,maxLastIndex:D.rows.length,buffer:B.rowBuffer}),v=(0,i.Z)(C,2),x=v[0],G=v[1],R=X.current({firstColumnIndex:o.firstColumnIndex,minColumnIndex:c,columnBuffer:B.columnBuffer,apiRef:I,firstRowToRender:x,lastRowToRender:G,visibleRows:D.rows}),W=Math.min(o.lastColumnIndex+B.columnBuffer,p),F=m.slice(R,W),N=0;N<F.length;N+=1){var E=F[N],J=R+N,H=0===J,Y=!(null===b&&null===A),T=null!==b&&b.field===E.field||H&&!Y?0:-1,M=null!==y&&y.field===E.field,K=w.open&&w.field===E.field;h.push((0,a.jsx)(qk,(0,l.Z)({},S[E.field],{columnMenuOpen:K,filterItemsCounter:Z[E.field]&&Z[E.field].length,headerHeight:k,isDragging:E.field===g,column:E,colIndex:J,isResizing:f===E.field,isLastColumn:J===m.length-1,extendRowFullWidth:!B.disableExtendRowFullWidth,hasFocus:M,tabIndex:T},t),E.field))}return h},isDragging:!!g,getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.Z)({style:P},e)},getInnerProps:function(){return{ref:G,"aria-rowindex":1,role:"row"}}}}({innerRef:o}),c=s.isDragging,g=s.getRootProps,d=s.getInnerProps,p=s.getColumns;return(0,a.jsxs)(aZ,(0,l.Z)({ref:t},g(u),{children:[(0,a.jsx)(tZ,{scrollDirection:"left"}),(0,a.jsx)(lZ,(0,l.Z)({isDragging:c},d(),{children:p()})),(0,a.jsx)(tZ,{scrollDirection:"right"})]}))})),cZ=n.forwardRef((function(e,t){var r=function(e){if(e.pageSize>100)throw new Error("'props.pageSize' cannot exceed 100 in DataGrid.");var t=(0,Ie.Z)({props:e,name:"MuiDataGrid"}),r=n.useMemo((function(){return(0,l.Z)({},Dv,t.localeText)}),[t.localeText]),a=n.useMemo((function(){var e=t.components;if(!e)return(0,l.Z)({},kk);var n={};return Object.entries(kk).forEach((function(t){var r=(0,i.Z)(t,2),a=r[0],o=r[1];n[a]=void 0===e[a]?o:e[a]})),n}),[t.components]);return n.useMemo((function(){return(0,l.Z)({},Sk,t,{localeText:r,components:a},Zk)}),[t,r,a])}(e),o=Ev(r);return(0,a.jsx)(ju,{apiRef:o,props:r,children:(0,a.jsx)(nu,{className:r.className,style:r.style,sx:r.sx,ref:t,children:(0,a.jsxs)(Iu,{children:[(0,a.jsx)(mu,{}),(0,a.jsx)(Ou,{ColumnHeadersComponent:sZ,VirtualScrollerComponent:Hk}),(0,a.jsx)(Uu,{})]})})})})),gZ=n.memo(cZ);cZ.propTypes={"aria-label":At().string,"aria-labelledby":At().string,autoHeight:At().bool,autoPageSize:At().bool,checkboxSelection:At().bool,classes:At().object,columnBuffer:At().number,columns:(At().array.isRequired,function(){return null}),columnThreshold:At().number,columnTypes:At().object,columnVisibilityModel:At().object,components:At().object,componentsProps:At().object,density:At().oneOf(["comfortable","compact","standard"]),disableColumnFilter:At().bool,disableColumnMenu:At().bool,disableColumnSelector:At().bool,disableDensitySelector:At().bool,disableExtendRowFullWidth:At().bool,disableSelectionOnClick:At().bool,disableVirtualization:At().bool,editMode:At().oneOf(["cell","row"]),editRowsModel:At().object,error:At().any,experimentalFeatures:At().shape({newEditingApi:At().bool,preventCommitWhileValidating:At().bool,warnIfFocusStateIsNotSynced:At().bool}),filterMode:At().oneOf(["client","server"]),filterModel:At().shape({items:At().arrayOf(At().shape({columnField:At().string.isRequired,id:At().oneOfType([At().number,At().string]),operatorValue:At().string,value:At().any})).isRequired,linkOperator:At().oneOf(["and","or"])}),getCellClassName:At().func,getDetailPanelContent:At().func,getRowClassName:At().func,getRowHeight:At().func,getRowId:At().func,getRowSpacing:At().func,headerHeight:At().number,hideFooter:At().bool,hideFooterPagination:At().bool,hideFooterSelectedRowCount:At().bool,initialState:At().object,isCellEditable:At().func,isRowSelectable:At().func,loading:At().bool,localeText:At().object,logger:At().shape({debug:At().func.isRequired,error:At().func.isRequired,info:At().func.isRequired,warn:At().func.isRequired}),logLevel:At().oneOf(["debug","error","info","warn",!1]),nonce:At().string,onCellClick:At().func,onCellDoubleClick:At().func,onCellEditCommit:At().func,onCellEditStart:At().func,onCellEditStop:At().func,onCellFocusOut:At().func,onCellKeyDown:At().func,onColumnHeaderClick:At().func,onColumnHeaderDoubleClick:At().func,onColumnHeaderEnter:At().func,onColumnHeaderLeave:At().func,onColumnHeaderOut:At().func,onColumnHeaderOver:At().func,onColumnOrderChange:At().func,onColumnVisibilityChange:At().func,onColumnVisibilityModelChange:At().func,onEditCellPropsChange:At().func,onEditRowsModelChange:At().func,onError:At().func,onFilterModelChange:At().func,onPageChange:At().func,onPageSizeChange:At().func,onPreferencePanelClose:At().func,onPreferencePanelOpen:At().func,onProcessRowUpdateError:At().func,onResize:At().func,onRowClick:At().func,onRowDoubleClick:At().func,onRowEditCommit:At().func,onRowEditStart:At().func,onRowEditStop:At().func,onSelectionModelChange:At().func,onSortModelChange:At().func,onStateChange:At().func,page:At().number,pageSize:(At().number,function(){return null}),pagination:function(e){return!1===e.pagination?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to the DataGridPro component to disable the pagination."].join("\n")):null},paginationMode:At().oneOf(["client","server"]),processRowUpdate:At().func,rowBuffer:At().number,rowCount:At().number,rowHeight:At().number,rows:At().array.isRequired,rowSpacingType:At().oneOf(["border","margin"]),rowsPerPageOptions:At().arrayOf(At().number),rowThreshold:At().number,scrollbarSize:At().number,selectionModel:(At().oneOfType([At().number,At().string,At().array]),function(){return null}),showCellRightBorder:At().bool,showColumnRightBorder:At().bool,sortingMode:At().oneOf(["client","server"]),sortingOrder:At().arrayOf(At().oneOf(["asc","desc"])),sortModel:At().arrayOf(At().shape({field:At().string.isRequired,sort:At().oneOf(["asc","desc"])})),sx:At().oneOfType([At().arrayOf(At().oneOfType([At().func,At().object,At().bool])),At().func,At().object])};var dZ=["className","children"],pZ=(0,Ce.ZP)("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:function(e,t){return t.toolbarContainer}})((function(e){return{display:"flex",alignItems:"center",padding:e.theme.spacing(.5,.5,0)}})),hZ=n.forwardRef((function(e,t){var n=e.className,r=e.children,o=(0,ge.Z)(e,dZ),i=function(e){var t=e.classes;return(0,he.Z)({root:["toolbarContainer"]},Il,t)}({classes:zl().classes});return r?(0,a.jsx)(pZ,(0,l.Z)({ref:t,className:(0,de.Z)(n,i.root)},o,{children:r})):null})),fZ=["onClick"],CZ=n.forwardRef((function(e,t){var n,r=e.onClick,o=(0,ge.Z)(e,fZ),i=Kl(),u=zl(),s=Tl(i,iv),c=s.open,g=s.openedPanelValue;return u.disableColumnSelector?null:(0,a.jsx)(u.components.BaseButton,(0,l.Z)({ref:t,size:"small",color:"primary","aria-label":i.current.getLocaleText("toolbarColumnsLabel"),startIcon:(0,a.jsx)(u.components.ColumnSelectorIcon,{})},o,{onClick:function(e){c&&g===$I.columns?i.current.hidePreferences():i.current.showPreferences($I.columns),null==r||r(e)}},null==(n=u.componentsProps)?void 0:n.baseButton,{children:i.current.getLocaleText("toolbarColumns")}))})),IZ=["className"],mZ=(0,Ce.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({minWidth:56,color:t.palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),vZ=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiListItemIcon"}),o=r.className,i=(0,ge.Z)(r,IZ),u=n.useContext(Rc),s=(0,l.Z)({},r,{alignItems:u.alignItems}),c=function(e){var t=e.alignItems,n=e.classes,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,he.Z)(r,Fc,n)}(s);return(0,a.jsx)(mZ,(0,l.Z)({className:(0,de.Z)(c.root,o),ownerState:s,ref:t},i))})),bZ=["onClick"],AZ=n.forwardRef((function(e,t){var r,o=e.onClick,u=(0,ge.Z)(e,bZ),s=Kl(),c=zl(),g=Tl(s,Mu),d=(0,Gc.Z)(),p=(0,Gc.Z)(),h=n.useState(!1),f=(0,i.Z)(h,2),C=f[0],I=f[1],m=n.useRef(null),v=(0,me.Z)(t,m),b=[{icon:(0,a.jsx)(c.components.DensityCompactIcon,{}),label:s.current.getLocaleText("toolbarDensityCompact"),value:om.Compact},{icon:(0,a.jsx)(c.components.DensityStandardIcon,{}),label:s.current.getLocaleText("toolbarDensityStandard"),value:om.Standard},{icon:(0,a.jsx)(c.components.DensityComfortableIcon,{}),label:s.current.getLocaleText("toolbarDensityComfortable"),value:om.Comfortable}],A=n.useMemo((function(){switch(g){case om.Compact:return(0,a.jsx)(c.components.DensityCompactIcon,{});case om.Comfortable:return(0,a.jsx)(c.components.DensityComfortableIcon,{});default:return(0,a.jsx)(c.components.DensityStandardIcon,{})}}),[g,c]),y=function(){return I(!1)};if(c.disableDensitySelector)return null;var k=b.map((function(e,t){return(0,a.jsxs)(Tc,{onClick:function(){return t=e.value,s.current.setDensity(t),void I(!1);var t},selected:e.value===g,children:[(0,a.jsx)(vZ,{children:e.icon}),e.label]},t)}));return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(c.components.BaseButton,(0,l.Z)({ref:v,color:"primary",size:"small",startIcon:A,"aria-label":s.current.getLocaleText("toolbarDensityLabel"),"aria-expanded":C?"true":void 0,"aria-haspopup":"menu","aria-controls":p,id:d},u,{onClick:function(e){I(!0),null==o||o(e)}},null==(r=c.componentsProps)?void 0:r.baseButton,{children:s.current.getLocaleText("toolbarDensity")})),(0,a.jsx)(PI,{open:C,target:m.current,onClickAway:y,position:"bottom-start",children:(0,a.jsx)(Kh,{id:p,className:ml.menuList,"aria-labelledby":d,onKeyDown:function(e){fI(e.key)&&e.preventDefault(),BI(e.key)&&y()},autoFocusItem:C,children:k})})]})})),yZ=["componentsProps"],kZ=(0,Ce.ZP)("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:function(e,t){return t.toolbarFilterList}})((function(e){var t=e.theme;return{margin:t.spacing(1,1,.5),padding:t.spacing(0,1)}})),ZZ=n.forwardRef((function(e,t){var r,o,i=e.componentsProps,u=void 0===i?{}:i,s=(0,ge.Z)(e,yZ),c=u.button||{},g=Kl(),d=zl(),p=Tl(g,Hu),h=Tl(g,Vl),f=Tl(g,iv),C=function(e){var t=e.classes;return(0,he.Z)({root:["toolbarFilterList"]},Il,t)}({classes:d.classes}),I=n.useMemo((function(){if(f.open)return g.current.getLocaleText("toolbarFiltersTooltipHide");if(0===p.length)return g.current.getLocaleText("toolbarFiltersTooltipShow");var e=function(e){return h[e.columnField].filterOperators.find((function(t){return t.value===e.operatorValue})).label||g.current.getLocaleText("filterOperator".concat((0,lt.Z)(e.operatorValue))).toString()};return(0,a.jsxs)("div",{children:[g.current.getLocaleText("toolbarFiltersTooltipActive")(p.length),(0,a.jsx)(kZ,{className:C.root,children:p.map((function(t,n){return(0,l.Z)({},h[t.columnField]&&(0,a.jsx)("li",{children:"".concat(h[t.columnField].headerName||t.columnField,"\n                  ").concat(e(t),"\n                  ").concat(t.value)},n))}))})]})}),[g,f.open,p,h,C]);return d.disableColumnFilter?null:(0,a.jsx)(d.components.BaseTooltip,(0,l.Z)({title:I,enterDelay:1e3},s,null==(r=d.componentsProps)?void 0:r.baseTooltip,{children:(0,a.jsx)(d.components.BaseButton,(0,l.Z)({ref:t,size:"small",color:"primary","aria-label":g.current.getLocaleText("toolbarFiltersLabel"),startIcon:(0,a.jsx)(Jb,{badgeContent:p.length,color:"primary",children:(0,a.jsx)(d.components.OpenFilterButtonIcon,{})})},c,{onClick:function(e){var t,n=f.open,r=f.openedPanelValue;n&&r===$I.filters?g.current.hideFilterPanel():g.current.showFilterPanel(),null==(t=c.onClick)||t.call(c,e)}},null==(o=d.componentsProps)?void 0:o.baseButton,{children:g.current.getLocaleText("toolbarFilters")}))}))})),SZ=["children","onClick"],wZ=n.forwardRef((function(e,t){var r,o=e.children,u=e.onClick,s=(0,ge.Z)(e,SZ),c=Kl(),g=zl(),d=(0,Gc.Z)(),p=(0,Gc.Z)(),h=n.useState(!1),f=(0,i.Z)(h,2),C=f[0],I=f[1],m=n.useRef(null),v=(0,me.Z)(t,m),b=function(){return I(!1)};return null==o?null:(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(g.components.BaseButton,(0,l.Z)({ref:v,color:"primary",size:"small",startIcon:(0,a.jsx)(g.components.ExportIcon,{}),"aria-expanded":C?"true":void 0,"aria-label":c.current.getLocaleText("toolbarExportLabel"),"aria-haspopup":"menu","aria-labelledby":p,id:d},s,{onClick:function(e){I(!0),null==u||u(e)}},null==(r=g.componentsProps)?void 0:r.baseButton,{children:c.current.getLocaleText("toolbarExport")})),(0,a.jsx)(PI,{open:C,target:m.current,onClickAway:b,position:"bottom-start",children:(0,a.jsx)(Kh,{id:p,className:ml.menuList,"aria-labelledby":d,onKeyDown:function(e){fI(e.key)&&e.preventDefault(),BI(e.key)&&b()},autoFocusItem:C,children:n.Children.map(o,(function(e){return n.isValidElement(e)?n.cloneElement(e,{hideMenu:b}):e}))})})]})})),BZ=["csvOptions","printOptions"],xZ=function(e){var t=Kl(),n=e.hideMenu,r=e.options;return null!=r&&r.disableToolbarButton?null:(0,a.jsx)(Tc,{onClick:function(){t.current.exportDataAsCsv(r),null==n||n()},children:t.current.getLocaleText("toolbarExportCSV")})},GZ=function(e){var t=Kl(),n=e.hideMenu,r=e.options;return null!=r&&r.disableToolbarButton?null:(0,a.jsx)(Tc,{onClick:function(){t.current.exportDataAsPrint(r),null==n||n()},children:t.current.getLocaleText("toolbarExportPrint")})},RZ=n.forwardRef((function(e,t){var n=e.csvOptions,r=void 0===n?{}:n,o=e.printOptions,i=void 0===o?{}:o,u=(0,ge.Z)(e,BZ);return null!=r&&r.disableToolbarButton&&null!=i&&i.disableToolbarButton?null:(0,a.jsxs)(wZ,(0,l.Z)({},u,{ref:t,children:[(0,a.jsx)(xZ,{options:r}),(0,a.jsx)(GZ,{options:i})]}))})),WZ=["className","csvOptions","printOptions"],VZ=n.forwardRef((function(e,t){var n=e.csvOptions,r=e.printOptions,o=(0,ge.Z)(e,WZ),i=zl();return i.disableColumnFilter&&i.disableColumnSelector&&i.disableDensitySelector?null:(0,a.jsxs)(hZ,(0,l.Z)({ref:t},o,{children:[(0,a.jsx)(CZ,{}),(0,a.jsx)(ZZ,{}),(0,a.jsx)(AZ,{}),(0,a.jsx)(RZ,{csvOptions:n,printOptions:r})]}))})),FZ=__webpack_require__(2299),NZ=__webpack_require__.n(FZ),EZ=function(){return(0,a.jsx)("div",{className:"loading",children:(0,a.jsx)(NZ(),{color:"#F37A24",loading:!0,size:50})})},DZ=function(e){var t=e.data,n=e.header,r=e.accessor,o=e.link,i=B();return 0===t.length?(0,a.jsx)("div",{style:{textAlign:"center"},children:"No record"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("table",{className:"table table-striped table-hover",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:n.map((function(e,t){return(0,a.jsx)("th",{scope:"col",children:e},t)}))})}),(0,a.jsx)("tbody",{children:t.map((function(e,t){return(0,a.jsxs)("tr",{onClick:function(){return i("".concat(o[0],"?id=").concat(e[o[1]]))},children:[(0,a.jsx)("th",{scope:"row",children:t}),r.map((function(t,n){return(0,a.jsx)("td",{children:e[t]?e[t]:e[t.split(".")[0]][t.split(".")[1]]},n)}))]},t)}))})]})})},XZ=function(){var e=w().search,t=pl.parse(e),r=t.periodid,o=t.sensortype,l=(0,n.useState)([]),u=(0,i.Z)(l,2),s=(u[0],u[1]),c=(0,n.useState)([]),g=(0,i.Z)(c,2),d=(g[0],g[1]),p=(0,n.useState)(["sensortype.sensortype","value","updatedAt","record.record"]),h=(0,i.Z)(p,2),f=(h[0],h[1],(0,n.useState)(["#","Sensor Type","Value","Updated Date","Record Type"])),C=(0,i.Z)(f,2),I=(C[0],C[1],(0,n.useState)([])),m=(0,i.Z)(I,2),v=m[0],b=m[1],A=(0,n.useState)(!1),y=(0,i.Z)(A,2),k=y[0],Z=y[1],S=(0,n.useState)(!0),B=(0,i.Z)(S,2),x=B[0],G=B[1],R=(0,n.useState)([{id:1,col1:"Hello",col2:"World"},{id:2,col1:"DataGridPro",col2:"is Awesome"},{id:3,col1:"MUI",col2:"is Amazing"}]),W=(0,i.Z)(R,2),V=W[0],F=W[1],N=(0,n.useState)([{field:"col1",headerName:"Sensor Type",flex:1},{field:"col2",headerName:"Value ",flex:1},{field:"col3",headerName:"Date ",flex:2}]),E=(0,i.Z)(N,2),D=E[0];E[1];(0,n.useEffect)((function(){j(q().mark((function e(){var t,n,a,i,l,u,c,g;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(r,"&sensortype=").concat(o));case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t=[];case 13:t.ok?(s(t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0]})}))),d(t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0]})}))),F(t.data.map((function(e,t){return{id:t,col1:e.sensortype.sensortype,col2:e.value,col3:e.updatedAt}})).sort((function(e,t){var n=e.col3.toUpperCase(),r=t.col3.toUpperCase();return n<r?1:n>r?-1:0}))),t=(t=t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0]})}))).sort((function(e,t){var n=e.updatedAt.toUpperCase(),r=t.updatedAt.toUpperCase();return n<r?-1:n>r?1:0})),a=t[0].updatedAt,i=t[0].value,l=t[0].value,u=t[0].value,c=t[0].value,g=[],t.map((function(e,n){console.log(e.updatedAt),n===t.length-1?(u=e.value>u?e.value:u,c=e.value<c?e.value:c,i=e.value,g.push({date:new Date(a),open:i,close:l,high:u,low:c})):e.updatedAt!=a?(g.push({date:new Date(a),open:i,close:l,high:u,low:c}),a=e.updatedAt,u=e.value,c=e.value,i=e.value,l=e.value):(i=e.value,u=e.value>u?e.value:u,c=e.value<c?e.value:c)})),b(g.sort((function(e,t){return e.date>t.date?1:-1}))),G(!1)):Z(!0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);return(0,n.useEffect)((function(){}),[v]),k?(0,a.jsx)(ie,{}):(0,a.jsx)(a.Fragment,{children:x?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[v.length>1?(0,a.jsx)(fl,{allData:v}):null,(0,a.jsx)("div",{style:{height:"80vh",width:"100%"},children:(0,a.jsx)(gZ,{rows:V,columns:D,components:{Toolbar:VZ}})})]})})};function JZ(e,t){if(null==e)return{};var n,r,a=(0,ge.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var HZ=__webpack_require__(2110),YZ=__webpack_require__.n(HZ),TZ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MZ="object"===("undefined"===typeof window?"undefined":TZ(window))&&"object"===("undefined"===typeof document?"undefined":TZ(document))&&9===document.nodeType,KZ={}.constructor;function PZ(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(PZ);if(e.constructor!==KZ)return e;var t={};for(var n in e)t[n]=PZ(e[n]);return t}function zZ(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=PZ(t),o=r.plugins.onCreateRule(e,a,n);return o||(e[0],null)}var LZ=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},_Z=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=LZ(e[r]," ");else n=LZ(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function OZ(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function UZ(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function jZ(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,o=void 0===a?0:a,i=t.fallbacks;!1===n.format&&(o=-1/0);var l=OZ(n),u=l.linebreak,s=l.space;if(e&&o++,i)if(Array.isArray(i))for(var c=0;c<i.length;c++){var g=i[c];for(var d in g){var p=g[d];null!=p&&(r&&(r+=u),r+=UZ(d+":"+s+_Z(p)+";",o))}}else for(var h in i){var f=i[h];null!=f&&(r&&(r+=u),r+=UZ(h+":"+s+_Z(f)+";",o))}for(var C in t){var I=t[C];null!=I&&"fallbacks"!==C&&(r&&(r+=u),r+=UZ(C+":"+s+_Z(I)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),UZ(""+e+s+"{"+r,--o)+UZ("}",o)):r}var QZ=/([[\].#*$><+~=|^:(),"'`\s])/g,qZ="undefined"!==typeof CSS&&CSS.escape,$Z=function(e){return qZ?qZ(e):e.replace(QZ,"\\$1")},eS=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==a||!1===a,i=e in this.style;if(o&&!i&&!r)return this;var l=o&&i;if(l?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return l?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var u=this.options.sheet;return u&&u.attached,this},e}(),tS=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var o=r.selector,i=r.scoped,l=r.sheet,u=r.generateId;return o?a.selectorText=o:!1!==i&&(a.id=u(ke(ke(a)),l),a.selectorText="."+$Z(a.id)),a}Se(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=_Z(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,l.Z)({},e,{allowEmpty:!0}):e;return jZ(this.selectorText,this.style,n)},uu(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(eS),nS={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new tS(e,t,n)}},rS={indent:1,children:!0},aS=/@([\w-]+)/,oS=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(aS);for(var a in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new GS((0,l.Z)({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=rS);var t=OZ(e).linebreak;if(null==e.indent&&(e.indent=rS.indent),null==e.children&&(e.children=rS.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),iS=/@media|@supports\s+/,lS={onCreateRule:function(e,t,n){return iS.test(e)?new oS(e,t,n):null}},uS={indent:1,children:!0},sS=/@keyframes\s+([\w-]+)/,cS=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(sS);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,o=n.sheet,i=n.generateId;for(var u in this.id=!1===a?this.name:$Z(i(this,o)),this.rules=new GS((0,l.Z)({},n,{parent:this})),t)this.rules.add(u,t[u],(0,l.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=uS);var t=OZ(e).linebreak;if(null==e.indent&&(e.indent=uS.indent),null==e.children&&(e.children=uS.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),gS=/@keyframes\s+/,dS=/\$([\w-]+)/g,pS=function(e,t){return"string"===typeof e?e.replace(dS,(function(e,n){return n in t?t[n]:e})):e},hS=function(e,t,n){var r=e[t],a=pS(r,n);a!==r&&(e[t]=a)},fS={onCreateRule:function(e,t,n){return"string"===typeof e&&gS.test(e)?new cS(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&hS(e,"animation-name",n.keyframes),"animation"in e&&hS(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return pS(e,r.keyframes);default:return e}}},CS=function(e){function t(){return e.apply(this,arguments)||this}return Se(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,l.Z)({},e,{allowEmpty:!0}):e;return jZ(this.key,this.style,n)},t}(eS),IS={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new CS(e,t,n):null}},mS=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=OZ(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=jZ(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return jZ(this.at,this.style,e)},e}(),vS=/@font-face/,bS={onCreateRule:function(e,t,n){return vS.test(e)?new mS(e,t,n):null}},AS=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return jZ(this.key,this.style,e)},e}(),yS={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new AS(e,t,n):null}},kS=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),ZS={"@charset":!0,"@import":!0,"@namespace":!0},SS={onCreateRule:function(e,t,n){return e in ZS?new kS(e,t,n):null}},wS=[nS,lS,fS,IS,bS,yS,SS],BS={process:!0},xS={force:!0,process:!0},GS=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,a=r.parent,o=r.sheet,i=r.jss,u=r.Renderer,s=r.generateId,c=r.scoped,g=(0,l.Z)({classes:this.classes,parent:a,sheet:o,jss:i,Renderer:u,generateId:s,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(g.selector="."+$Z(this.classes[d]));var p=zZ(d,t,g);if(!p)return null;this.register(p);var h=void 0===g.index?this.index.length:g.index;return this.index.splice(h,0,p),p},t.replace=function(e,t,n){var r=this.get(e),a=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==a&&(o=(0,l.Z)({},n,{index:a})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof tS?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof cS&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof tS?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof cS&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=BS);var a=this.options,o=a.jss.plugins,i=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var l=t.style;if(o.onUpdate(n,t,i,r),r.process&&l&&l!==t.style){for(var u in o.onProcessStyle(t.style,t,i),t.style){var s=t.style[u];s!==l[u]&&t.prop(u,s,xS)}for(var c in l){var g=t.style[c],d=l[c];null==g&&g!==d&&t.prop(c,null,xS)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=OZ(e).linebreak,o=0;o<this.index.length;o++){var i=this.index[o].toString(e);(i||r)&&(t&&(t+=a),t+=i)}return t},e}(),RS=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,l.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new GS(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var a=this.rules.replace(e,t,n);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(this.renderer&&(a?r.renderable&&this.renderer.replaceRule(r.renderable,a):this.renderer.deleteRule(r)),a):a:(this.deployed=!1,a)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),WS=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),VS=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,ge.Z)(t,["attached"]),a=OZ(r).linebreak,o="",i=0;i<this.registry.length;i++){var l=this.registry[i];null!=n&&l.attached!==n||(o&&(o+=a),o+=l.toString(r))}return o},uu(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),FS=new VS,NS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),ES="2f1acc6c3a606b082e5eef5e54414ffb";null==NS[ES]&&(NS[ES]=0);var DS=NS[ES]++,XS=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(o||"c")+DS+a+t:o+n.key+"-"+DS+(a?"-"+a:"")+"-"+t}},JS=function(e){var t;return function(){return t||(t=e()),t}},HS=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},YS=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=_Z(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(a){return!1}return!0},TS=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},MS=function(e,t){return e.selectorText=t,e.selectorText===t},KS=JS((function(){return document.querySelector("head")}));function PS(e){var t=FS.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=KS(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var zS=JS((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),LS=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},_S=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},OS=function(){function e(e){this.getPropertyValue=HS,this.setProperty=YS,this.removeProperty=TS,this.setSelector=MS,this.hasInsertedRules=!1,this.cssRules=[],e&&FS.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=zS();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=PS(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,o=a.parentNode;o&&o.insertBefore(e,a.nextSibling)}else KS().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var o=_S(n,t);if(!1===(a=LS(n,r.toString({children:!1}),o)))return!1;this.refCssRule(e,o,a)}return this.insertRules(r.rules,a),a}var i=e.toString();if(!i)return!1;var l=_S(n,t),u=LS(n,i,l);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,l,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof RS&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),US=0,jS=function(){function e(e){this.id=US++,this.version="10.9.0",this.plugins=new WS,this.options={id:{minify:!1},createGenerateId:XS,Renderer:MZ?OS:null,plugins:[]},this.generateId=XS({minify:!1});for(var t=0;t<wS.length;t++)this.plugins.use(wS[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,l.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===FS.index?0:FS.index+1);var r=new RS(e,(0,l.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),FS.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=(0,l.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var a=zZ(e,t,r);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),QS=function(e){return new jS(e)},qS="object"===typeof CSS&&null!=CSS&&"number"in CSS;function $S(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var o=$S(r);o&&(t||(t={}),t[n]=o)}}return t}QS();function ew(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=(0,l.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var tw={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},nw=tw;var rw=n.createContext(null);function aw(){return n.useContext(rw)}var ow="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",iw=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var lw=Date.now(),uw="fnValues"+lw,sw="fnStyle"+ ++lw,cw=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=zZ(e,{},n);return r[sw]=t,r},onProcessStyle:function(e,t){if(uw in t||sw in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[uw]=n,e},onUpdate:function(e,t,n,r){var a=t,o=a[sw];o&&(a.style=o(e)||{});var i=a[uw];if(i)for(var l in i)a.prop(l,i[l](e),r)}}},gw="@global",dw="@global ",pw=function(){function e(e,t,n){for(var r in this.type="global",this.at=gw,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new GS((0,l.Z)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),hw=function(){function e(e,t,n){this.type="global",this.at=gw,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(dw.length);this.rule=n.jss.createRule(r,t,(0,l.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),fw=/\s*,\s*/g;function Cw(e,t){for(var n=e.split(fw),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}var Iw=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===gw)return new pw(e,t,n);if("@"===e[0]&&e.substr(0,dw.length)===dw)return new hw(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,a=r?r[gw]:null;if(a){for(var o in a)t.addRule(o,a[o],(0,l.Z)({},n,{selector:Cw(o,e.selector)}));delete r[gw]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var a in r)if("@"===a[0]&&a.substr(0,gw.length)===gw){var o=Cw(a.substr(gw.length),e.selector);t.addRule(o,r[a],(0,l.Z)({},n,{selector:o})),delete r[a]}}(e,t))}}},mw=/\s*,\s*/g,vw=/&/g,bw=/\$([\w-]+)/g;var Aw=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?a.selector:r}}function t(e,t){for(var n=t.split(mw),r=e.split(mw),a="",o=0;o<n.length;o++)for(var i=n[o],l=0;l<r.length;l++){var u=r[l];a&&(a+=", "),a+=-1!==u.indexOf("&")?u.replace(vw,i):i+" "+u}return a}function n(e,t,n){if(n)return(0,l.Z)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var a=(0,l.Z)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(r,a,o){if("style"!==a.type)return r;var i,u,s=a,c=s.options.parent;for(var g in r){var d=-1!==g.indexOf("&"),p="@"===g[0];if(d||p){if(i=n(s,c,i),d){var h=t(g,s.selector);u||(u=e(c,o)),h=h.replace(bw,u);var f=s.key+"-"+g;"replaceRule"in c?c.replaceRule(f,r[g],(0,l.Z)({},i,{selector:h})):c.addRule(f,r[g],(0,l.Z)({},i,{selector:h}))}else p&&c.addRule(g,{},i).addRule(s.key,r[g],{selector:s.selector});delete r[g]}}return r}}},yw=/[A-Z]/g,kw=/^ms-/,Zw={};function Sw(e){return"-"+e.toLowerCase()}var ww=function(e){if(Zw.hasOwnProperty(e))return Zw[e];var t=e.replace(yw,Sw);return Zw[e]=kw.test(t)?"-"+t:t};function Bw(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:ww(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Bw):t.fallbacks=Bw(e.fallbacks)),t}var xw=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Bw(e[t]);return e}return Bw(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=ww(t);return t===r?e:(n.prop(r,e),null)}}},Gw=qS&&CSS?CSS.px:"px",Rw=qS&&CSS?CSS.ms:"ms",Ww=qS&&CSS?CSS.percent:"%";function Vw(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var Fw=Vw({"animation-delay":Rw,"animation-duration":Rw,"background-position":Gw,"background-position-x":Gw,"background-position-y":Gw,"background-size":Gw,border:Gw,"border-bottom":Gw,"border-bottom-left-radius":Gw,"border-bottom-right-radius":Gw,"border-bottom-width":Gw,"border-left":Gw,"border-left-width":Gw,"border-radius":Gw,"border-right":Gw,"border-right-width":Gw,"border-top":Gw,"border-top-left-radius":Gw,"border-top-right-radius":Gw,"border-top-width":Gw,"border-width":Gw,"border-block":Gw,"border-block-end":Gw,"border-block-end-width":Gw,"border-block-start":Gw,"border-block-start-width":Gw,"border-block-width":Gw,"border-inline":Gw,"border-inline-end":Gw,"border-inline-end-width":Gw,"border-inline-start":Gw,"border-inline-start-width":Gw,"border-inline-width":Gw,"border-start-start-radius":Gw,"border-start-end-radius":Gw,"border-end-start-radius":Gw,"border-end-end-radius":Gw,margin:Gw,"margin-bottom":Gw,"margin-left":Gw,"margin-right":Gw,"margin-top":Gw,"margin-block":Gw,"margin-block-end":Gw,"margin-block-start":Gw,"margin-inline":Gw,"margin-inline-end":Gw,"margin-inline-start":Gw,padding:Gw,"padding-bottom":Gw,"padding-left":Gw,"padding-right":Gw,"padding-top":Gw,"padding-block":Gw,"padding-block-end":Gw,"padding-block-start":Gw,"padding-inline":Gw,"padding-inline-end":Gw,"padding-inline-start":Gw,"mask-position-x":Gw,"mask-position-y":Gw,"mask-size":Gw,height:Gw,width:Gw,"min-height":Gw,"max-height":Gw,"min-width":Gw,"max-width":Gw,bottom:Gw,left:Gw,top:Gw,right:Gw,inset:Gw,"inset-block":Gw,"inset-block-end":Gw,"inset-block-start":Gw,"inset-inline":Gw,"inset-inline-end":Gw,"inset-inline-start":Gw,"box-shadow":Gw,"text-shadow":Gw,"column-gap":Gw,"column-rule":Gw,"column-rule-width":Gw,"column-width":Gw,"font-size":Gw,"font-size-delta":Gw,"letter-spacing":Gw,"text-decoration-thickness":Gw,"text-indent":Gw,"text-stroke":Gw,"text-stroke-width":Gw,"word-spacing":Gw,motion:Gw,"motion-offset":Gw,outline:Gw,"outline-offset":Gw,"outline-width":Gw,perspective:Gw,"perspective-origin-x":Ww,"perspective-origin-y":Ww,"transform-origin":Ww,"transform-origin-x":Ww,"transform-origin-y":Ww,"transform-origin-z":Ww,"transition-delay":Rw,"transition-duration":Rw,"vertical-align":Gw,"flex-basis":Gw,"shape-margin":Gw,size:Gw,gap:Gw,grid:Gw,"grid-gap":Gw,"row-gap":Gw,"grid-row-gap":Gw,"grid-column-gap":Gw,"grid-template-rows":Gw,"grid-template-columns":Gw,"grid-auto-rows":Gw,"grid-auto-columns":Gw,"box-shadow-x":Gw,"box-shadow-y":Gw,"box-shadow-blur":Gw,"box-shadow-spread":Gw,"font-line-height":Gw,"text-shadow-x":Gw,"text-shadow-y":Gw,"text-shadow-blur":Gw});function Nw(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Nw(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=Nw(a,t[a],n);else for(var o in t)t[o]=Nw(e+"-"+o,t[o],n);else if("number"===typeof t&&!1===isNaN(t)){var i=n[e]||Fw[e];return!i||0===t&&i===Gw?t.toString():"function"===typeof i?i(t).toString():""+t+i}return t}var Ew=function(e){void 0===e&&(e={});var t=Vw(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Nw(r,e[r],t);return e},onChangeValue:function(e,n){return Nw(n,e,t)}}},Dw="",Xw="",Jw="",Hw="",Yw=MZ&&"ontouchstart"in document.documentElement;if(MZ){var Tw={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Mw=document.createElement("p").style;for(var Kw in Tw)if(Kw+"Transform"in Mw){Dw=Kw,Xw=Tw[Kw];break}"Webkit"===Dw&&"msHyphens"in Mw&&(Dw="ms",Xw=Tw.ms,Hw="edge"),"Webkit"===Dw&&"-apple-trailing-word"in Mw&&(Jw="apple")}var Pw=Dw,zw=Xw,Lw=Jw,_w=Hw,Ow=Yw;var Uw={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Pw?"-webkit-"+e:zw+e)}},jw={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Pw?zw+"print-"+e:e)}},Qw=/[-\s]+(.)?/g;function qw(e,t){return t?t.toUpperCase():""}function $w(e){return e.replace(Qw,qw)}function eB(e){return $w("-"+e)}var tB,nB={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Pw){var n="mask-image";if($w(n)in t)return e;if(Pw+eB(n)in t)return zw+e}return e}},rB={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Lw||Ow?e:zw+e)}},aB={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:zw+e)}},oB={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:zw+e)}},iB={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Pw||"ms"===Pw&&"edge"!==_w?zw+e:e)}},lB={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Pw||"ms"===Pw||"apple"===Lw?zw+e:e)}},uB={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Pw?"WebkitColumn"+eB(e)in t&&zw+"column-"+e:"Moz"===Pw&&("page"+eB(e)in t&&"page-"+e))}},sB={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Pw)return e;var n=e.replace("-inline","");return Pw+eB(n)in t&&zw+n}},cB={supportedProperty:function(e,t){return $w(e)in t&&e}},gB={supportedProperty:function(e,t){var n=eB(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Pw+n in t?zw+e:"Webkit"!==Pw&&"Webkit"+n in t&&"-webkit-"+e}},dB={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Pw?""+zw+e:e)}},pB={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Pw?zw+"scroll-chaining":e)}},hB={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},fB={supportedProperty:function(e,t){var n=hB[e];return!!n&&(Pw+eB(n)in t&&zw+n)}},CB={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},IB=Object.keys(CB),mB=function(e){return zw+e},vB={supportedProperty:function(e,t,n){var r=n.multiple;if(IB.indexOf(e)>-1){var a=CB[e];if(!Array.isArray(a))return Pw+eB(a)in t&&zw+a;if(!r)return!1;for(var o=0;o<a.length;o++)if(!(Pw+eB(a[0])in t))return!1;return a.map(mB)}return!1}},bB=[Uw,jw,nB,rB,aB,oB,iB,lB,uB,sB,cB,gB,dB,pB,fB,vB],AB=bB.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),yB=bB.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,Ae.Z)(t.noPrefill)),e}),[]),kB={};if(MZ){tB=document.createElement("p");var ZB=window.getComputedStyle(document.documentElement,"");for(var SB in ZB)isNaN(SB)||(kB[ZB[SB]]=ZB[SB]);yB.forEach((function(e){return delete kB[e]}))}function wB(e,t){if(void 0===t&&(t={}),!tB)return e;if(null!=kB[e])return kB[e];"transition"!==e&&"transform"!==e||(t[e]=e in tB.style);for(var n=0;n<AB.length&&(kB[e]=AB[n](e,tB.style,t),!kB[e]);n++);try{tB.style[e]=""}catch(r){return!1}return kB[e]}var BB,xB={},GB={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},RB=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function WB(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?wB(t):", "+wB(n);return r||(t||n)}function VB(e,t){var n=t;if(!BB||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=xB[r])return xB[r];try{BB.style[e]=n}catch(a){return xB[r]=!1,!1}if(GB[e])n=n.replace(RB,WB);else if(""===BB.style[e]&&("-ms-flex"===(n=zw+n)&&(BB.style[e]="-ms-flexbox"),BB.style[e]=n,""===BB.style[e]))return xB[r]=!1,!1;return BB.style[e]="",xB[r]=n,xB[r]}MZ&&(BB=document.createElement("p"));var FB=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,o=wB(n);o&&o!==n&&(a=!0);var i=!1,l=VB(o,_Z(r));l&&l!==r&&(i=!0),(a||i)&&(a&&delete t[n],t[o||n]=l||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Pw?e:"@"+zw+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return VB(t,_Z(e))||e}}};var NB=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),o=0;o<a.length;o++)r[a[o]]=t[a[o]];return r}}};var EB=QS({plugins:[cw(),Iw(),Aw(),xw(),Ew(),"undefined"===typeof window?null:FB(),NB()]}),DB=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,o=e.seed,i=void 0===o?"":o,l=""===i?"":"".concat(i,"-"),u=0,s=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==iw.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(l).concat(r,"-").concat(e.key);return t.options.theme[ow]&&""===i?"".concat(o,"-").concat(s()):o}return"".concat(l).concat(a).concat(s())}}(),XB={disableGeneration:!1,generateClassName:DB,jss:EB,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},JB=n.createContext(XB);var HB=-1e9;function YB(){return HB+=1}function TB(e){return e&&"object"===du(e)&&e.constructor===Object}function MB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,l.Z)({},e):e;return TB(e)&&TB(t)&&Object.keys(t).forEach((function(a){"__proto__"!==a&&(TB(t[a])&&a in e?r[a]=MB(e[a],t[a],n):r[a]=t[a])})),r}function KB(e){var t="function"===typeof e;return{create:function(n,r){var a;try{a=t?e(n):e}catch(u){throw u}if(!r||!n.overrides||!n.overrides[r])return a;var o=n.overrides[r],i=(0,l.Z)({},a);return Object.keys(o).forEach((function(e){i[e]=MB(i[e],o[e])})),i},options:{}}}var PB={};function zB(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=ew({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function LB(e,t){var n=e.state,r=e.theme,a=e.stylesOptions,o=e.stylesCreator,i=e.name;if(!a.disableGeneration){var u=nw.get(a.sheetsManager,o,r);u||(u={refs:0,staticSheet:null,dynamicStyles:null},nw.set(a.sheetsManager,o,r,u));var s=(0,l.Z)({},o.options,a,{theme:r,flip:"boolean"===typeof a.flip?a.flip:"rtl"===r.direction});s.generateId=s.serverGenerateClassName||s.generateClassName;var c=a.sheetsRegistry;if(0===u.refs){var g;a.sheetsCache&&(g=nw.get(a.sheetsCache,o,r));var d=o.create(r,i);g||((g=a.jss.createStyleSheet(d,(0,l.Z)({link:!1},s))).attach(),a.sheetsCache&&nw.set(a.sheetsCache,o,r,g)),c&&c.add(g),u.staticSheet=g,u.dynamicStyles=$S(d)}if(u.dynamicStyles){var p=a.jss.createStyleSheet(u.dynamicStyles,(0,l.Z)({link:!0},s));p.update(t),p.attach(),n.dynamicSheet=p,n.classes=ew({baseClasses:u.staticSheet.classes,newClasses:p.classes}),c&&c.add(p)}else n.classes=u.staticSheet.classes;u.refs+=1}}function _B(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function OB(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var o=nw.get(r.sheetsManager,a,n);o.refs-=1;var i=r.sheetsRegistry;0===o.refs&&(nw.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(o.staticSheet),i&&i.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),i&&i.remove(t.dynamicSheet))}}function UB(e,t){var r,a=n.useRef([]),o=n.useMemo((function(){return{}}),t);a.current!==o&&(a.current=o,r=e()),n.useEffect((function(){return function(){r&&r()}}),[o])}function jB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name,a=t.classNamePrefix,o=t.Component,i=t.defaultTheme,u=void 0===i?PB:i,s=JZ(t,["name","classNamePrefix","Component","defaultTheme"]),c=KB(e),g=r||a||"makeStyles";c.options={index:YB(),name:r,meta:g,classNamePrefix:g};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=aw()||u,a=(0,l.Z)({},n.useContext(JB),s),i=n.useRef(),g=n.useRef();UB((function(){var n={name:r,state:{},stylesCreator:c,stylesOptions:a,theme:t};return LB(n,e),g.current=!1,i.current=n,function(){OB(n)}}),[t,c]),n.useEffect((function(){g.current&&_B(i.current,e),g.current=!0}));var d=zB(i.current,e.classes,o);return d};return d}function QB(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,o=t.props[n];for(a in o)void 0===r[a]&&(r[a]=o[a]);return r}var qB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var a=t.defaultTheme,o=t.withTheme,i=void 0!==o&&o,u=t.name,s=JZ(t,["defaultTheme","withTheme","name"]);var c=u,g=jB(e,(0,l.Z)({defaultTheme:a,Component:r,name:u||r.displayName,classNamePrefix:c},s)),d=n.forwardRef((function(e,t){e.classes;var o,s=e.innerRef,c=JZ(e,["classes","innerRef"]),d=g((0,l.Z)({},r.defaultProps,e)),p=c;return("string"===typeof u||i)&&(o=aw()||a,u&&(p=QB({theme:o,name:u,props:c})),i&&!p.theme&&(p.theme=o)),n.createElement(r,(0,l.Z)({ref:s||t,classes:d},p))}));return YZ()(d,r),d}},$B=["xs","sm","md","lg","xl"];function ex(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,a=void 0===r?"px":r,o=e.step,i=void 0===o?5:o,u=JZ(e,["values","unit","step"]);function s(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function c(e,t){var r=$B.indexOf(t);return r===$B.length-1?s(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[$B[r+1]]?n[$B[r+1]]:t)-i/100).concat(a,")")}return(0,l.Z)({keys:$B,values:n,up:s,down:function(e){var t=$B.indexOf(e)+1,r=n[$B[t]];return t===$B.length?s("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-i/100).concat(a,")")},between:c,only:function(e){return c(e,e)},width:function(e){return n[e]}},u)}function tx(e,t,n){var r;return(0,l.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,l.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,le.Z)({},e.up("sm"),(0,l.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,le.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,le.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}function nx(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var rx={black:"#000",white:"#fff"},ax={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},ox={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},ix={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},lx={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ux={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},sx={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},cx={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function gx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function dx(e){if(e.type)return e;if("#"===e.charAt(0))return dx(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(nx(3,e));var r=e.substring(t+1,e.length-1).split(",");return r=r.map((function(e){return parseFloat(e)})),{type:n,values:r}}function px(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function hx(e){var t="hsl"===(e=dx(e)).type?dx(function(e){var t=(e=dx(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,o=r*Math.min(a,1-a),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-o*Math.max(Math.min(t-3,9-t,1),-1)},l="rgb",u=[Math.round(255*i(0)),Math.round(255*i(8)),Math.round(255*i(4))];return"hsla"===e.type&&(l+="a",u.push(t[3])),px({type:l,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function fx(e,t){return e=dx(e),t=gx(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,px(e)}function Cx(e,t){if(e=dx(e),t=gx(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return px(e)}function Ix(e,t){if(e=dx(e),t=gx(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return px(e)}var mx={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:rx.white,default:ax[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},vx={text:{primary:rx.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:ax[800],default:"#303030"},action:{active:rx.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function bx(e,t,n,r){var a=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Ix(e.main,a):"dark"===t&&(e.dark=Cx(e.main,o)))}function Ax(e){var t=e.primary,n=void 0===t?{light:ox[300],main:ox[500],dark:ox[700]}:t,r=e.secondary,a=void 0===r?{light:ix.A200,main:ix.A400,dark:ix.A700}:r,o=e.error,i=void 0===o?{light:lx[300],main:lx[500],dark:lx[700]}:o,u=e.warning,s=void 0===u?{light:ux[300],main:ux[500],dark:ux[700]}:u,c=e.info,g=void 0===c?{light:sx[300],main:sx[500],dark:sx[700]}:c,d=e.success,p=void 0===d?{light:cx[300],main:cx[500],dark:cx[700]}:d,h=e.type,f=void 0===h?"light":h,C=e.contrastThreshold,I=void 0===C?3:C,m=e.tonalOffset,v=void 0===m?.2:m,b=JZ(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function A(e){var t=function(e,t){var n=hx(e),r=hx(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,vx.text.primary)>=I?vx.text.primary:mx.text.primary;return t}var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,l.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(nx(4,t));if("string"!==typeof e.main)throw new Error(nx(5,JSON.stringify(e.main)));return bx(e,"light",n,v),bx(e,"dark",r,v),e.contrastText||(e.contrastText=A(e.main)),e},k={dark:vx,light:mx};return MB((0,l.Z)({common:rx,type:f,primary:y(n),secondary:y(a,"A400","A200","A700"),error:y(i),warning:y(s),info:y(g),success:y(p),grey:ax,contrastThreshold:I,getContrastText:A,augmentColor:y,tonalOffset:v},k[f]),b)}function yx(e){return Math.round(1e5*e)/1e5}function kx(e){return yx(e)}var Zx={textTransform:"uppercase"},Sx='"Roboto", "Helvetica", "Arial", sans-serif';function wx(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?Sx:r,o=n.fontSize,i=void 0===o?14:o,u=n.fontWeightLight,s=void 0===u?300:u,c=n.fontWeightRegular,g=void 0===c?400:c,d=n.fontWeightMedium,p=void 0===d?500:d,h=n.fontWeightBold,f=void 0===h?700:h,C=n.htmlFontSize,I=void 0===C?16:C,m=n.allVariants,v=n.pxToRem,b=JZ(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var A=i/14,y=v||function(e){return"".concat(e/I*A,"rem")},k=function(e,t,n,r,o){return(0,l.Z)({fontFamily:a,fontWeight:e,fontSize:y(t),lineHeight:n},a===Sx?{letterSpacing:"".concat(yx(r/t),"em")}:{},o,m)},Z={h1:k(s,96,1.167,-1.5),h2:k(s,60,1.2,-.5),h3:k(g,48,1.167,0),h4:k(g,34,1.235,.25),h5:k(g,24,1.334,0),h6:k(p,20,1.6,.15),subtitle1:k(g,16,1.75,.15),subtitle2:k(p,14,1.57,.1),body1:k(g,16,1.5,.15),body2:k(g,14,1.43,.15),button:k(p,14,1.75,.4,Zx),caption:k(g,12,1.66,.4),overline:k(g,12,2.66,1,Zx)};return MB((0,l.Z)({htmlFontSize:I,pxToRem:y,round:kx,fontFamily:a,fontSize:i,fontWeightLight:s,fontWeightRegular:g,fontWeightMedium:p,fontWeightBold:f},Z),b,{clone:!1})}function Bx(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var xx=["none",Bx(0,2,1,-1,0,1,1,0,0,1,3,0),Bx(0,3,1,-2,0,2,2,0,0,1,5,0),Bx(0,3,3,-2,0,3,4,0,0,1,8,0),Bx(0,2,4,-1,0,4,5,0,0,1,10,0),Bx(0,3,5,-1,0,5,8,0,0,1,14,0),Bx(0,3,5,-1,0,6,10,0,0,1,18,0),Bx(0,4,5,-2,0,7,10,1,0,2,16,1),Bx(0,5,5,-3,0,8,10,1,0,3,14,2),Bx(0,5,6,-3,0,9,12,1,0,3,16,2),Bx(0,6,6,-3,0,10,14,1,0,4,18,3),Bx(0,6,7,-4,0,11,15,1,0,4,20,3),Bx(0,7,8,-4,0,12,17,2,0,5,22,4),Bx(0,7,8,-4,0,13,19,2,0,5,24,4),Bx(0,7,9,-4,0,14,21,2,0,5,26,4),Bx(0,8,9,-5,0,15,22,2,0,6,28,5),Bx(0,8,10,-5,0,16,24,2,0,6,30,5),Bx(0,8,11,-5,0,17,26,2,0,6,32,5),Bx(0,9,11,-5,0,18,28,2,0,7,34,6),Bx(0,9,12,-6,0,19,29,2,0,7,36,6),Bx(0,10,13,-6,0,20,31,3,0,8,38,7),Bx(0,10,13,-6,0,21,33,3,0,8,40,7),Bx(0,10,14,-6,0,22,35,3,0,8,42,7),Bx(0,11,14,-7,0,23,36,3,0,9,44,8),Bx(0,11,15,-7,0,24,38,3,0,9,46,8)],Gx={borderRadius:4},Rx={xs:0,sm:600,md:960,lg:1280,xl:1920},Wx={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(Rx[e],"px)")}};var Vx=function(e,t){return t?MB(e,t,{clone:!1}):e};var Fx={m:"margin",p:"padding"},Nx={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ex={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Dx=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!Ex[e])return[e];e=Ex[e]}var t=e.split(""),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=Fx[r],l=Nx[a]||"";return Array.isArray(l)?l.map((function(e){return o+e})):[o+l]})),Xx=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function Jx(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function Hx(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function Yx(e){var t=Jx(e.theme);return Object.keys(e).map((function(n){if(-1===Xx.indexOf(n))return null;var r=Hx(Dx(n),t),a=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||Wx;return t.reduce((function(e,a,o){return e[r.up(r.keys[o])]=n(t[o]),e}),{})}if("object"===du(t)){var a=e.theme.breakpoints||Wx;return Object.keys(t).reduce((function(e,r){return e[a.up(r)]=n(t[r]),e}),{})}return n(t)}(e,a,r)})).reduce(Vx,{})}Yx.propTypes={},Yx.filterProps=Xx;function Tx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Jx({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var Mx={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Kx={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Px(e){return"".concat(Math.round(e),"ms")}var zx={easing:Mx,duration:Kx,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?Kx.standard:n,a=t.easing,o=void 0===a?Mx.easeInOut:a,i=t.delay,l=void 0===i?0:i;JZ(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:Px(r)," ").concat(o," ").concat("string"===typeof l?l:Px(l))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Lx={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function _x(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,a=void 0===r?{}:r,o=e.palette,i=void 0===o?{}:o,l=e.spacing,u=e.typography,s=void 0===u?{}:u,c=JZ(e,["breakpoints","mixins","palette","spacing","typography"]),g=Ax(i),d=ex(n),p=Tx(l),h=MB({breakpoints:d,direction:"ltr",mixins:tx(d,p,a),overrides:{},palette:g,props:{},shadows:xx,typography:wx(g,s),spacing:p,shape:Gx,transitions:zx,zIndex:Lx},c),f=arguments.length,C=new Array(f>1?f-1:0),I=1;I<f;I++)C[I-1]=arguments[I];return h=C.reduce((function(e,t){return MB(e,t)}),h)}var Ox=_x();var Ux=function(e,t){return qB(e,(0,l.Z)({defaultTheme:Ox},t))};function jx(e){if("string"!==typeof e)throw new Error(nx(7));return e.charAt(0).toUpperCase()+e.slice(1)}var Qx=n.forwardRef((function(e,t){var r=e.classes,a=e.className,o=e.component,i=void 0===o?"div":o,u=e.disableGutters,s=void 0!==u&&u,c=e.fixed,g=void 0!==c&&c,d=e.maxWidth,p=void 0===d?"lg":d,h=JZ(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return n.createElement(i,(0,l.Z)({className:(0,de.Z)(r.root,a,g&&r.fixed,s&&r.disableGutters,!1!==p&&r["maxWidth".concat(jx(String(p)))]),ref:t},h))})),qx=Ux((function(e){return{root:(0,le.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:r}),t}),{}),maxWidthXs:(0,le.Z)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:(0,le.Z)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:(0,le.Z)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:(0,le.Z)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:(0,le.Z)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(Qx),$x=n.forwardRef((function(e,t){var r=e.classes,a=e.className,o=e.component,i=void 0===o?"div":o,u=e.square,s=void 0!==u&&u,c=e.elevation,g=void 0===c?1:c,d=e.variant,p=void 0===d?"elevation":d,h=JZ(e,["classes","className","component","square","elevation","variant"]);return n.createElement(i,(0,l.Z)({className:(0,de.Z)(r.root,a,"outlined"===p?r.outlined:r["elevation".concat(g)],!s&&r.rounded),ref:t},h))})),eG=Ux((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),(0,l.Z)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})($x),tG=n.forwardRef((function(e,t){var r=e.classes,a=e.className,o=e.raised,i=void 0!==o&&o,u=JZ(e,["classes","className","raised"]);return n.createElement(eG,(0,l.Z)({className:(0,de.Z)(r.root,a),elevation:i?8:1,ref:t},u))})),nG=Ux({root:{overflow:"hidden"}},{name:"MuiCard"})(tG),rG=n.forwardRef((function(e,t){var r=e.classes,a=e.className,o=e.component,i=void 0===o?"div":o,u=JZ(e,["classes","className","component"]);return n.createElement(i,(0,l.Z)({className:(0,de.Z)(r.root,a),ref:t},u))})),aG=Ux({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(rG),oG=[0,1,2,3,4,5,6,7,8,9,10],iG=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function lG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var uG=n.forwardRef((function(e,t){var r=e.alignContent,a=void 0===r?"stretch":r,o=e.alignItems,i=void 0===o?"stretch":o,u=e.classes,s=e.className,c=e.component,g=void 0===c?"div":c,d=e.container,p=void 0!==d&&d,h=e.direction,f=void 0===h?"row":h,C=e.item,I=void 0!==C&&C,m=e.justify,v=e.justifyContent,b=void 0===v?"flex-start":v,A=e.lg,y=void 0!==A&&A,k=e.md,Z=void 0!==k&&k,S=e.sm,w=void 0!==S&&S,B=e.spacing,x=void 0===B?0:B,G=e.wrap,R=void 0===G?"wrap":G,W=e.xl,V=void 0!==W&&W,F=e.xs,N=void 0!==F&&F,E=e.zeroMinWidth,D=void 0!==E&&E,X=JZ(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),J=(0,de.Z)(u.root,s,p&&[u.container,0!==x&&u["spacing-xs-".concat(String(x))]],I&&u.item,D&&u.zeroMinWidth,"row"!==f&&u["direction-xs-".concat(String(f))],"wrap"!==R&&u["wrap-xs-".concat(String(R))],"stretch"!==i&&u["align-items-xs-".concat(String(i))],"stretch"!==a&&u["align-content-xs-".concat(String(a))],"flex-start"!==(m||b)&&u["justify-content-xs-".concat(String(m||b))],!1!==N&&u["grid-xs-".concat(String(N))],!1!==w&&u["grid-sm-".concat(String(w))],!1!==Z&&u["grid-md-".concat(String(Z))],!1!==y&&u["grid-lg-".concat(String(y))],!1!==V&&u["grid-xl-".concat(String(V))]);return n.createElement(g,(0,l.Z)({className:J,ref:t},X))})),sG=Ux((function(e){return(0,l.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return oG.forEach((function(r){var a=e.spacing(r);0!==a&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(lG(a,2)),width:"calc(100% + ".concat(lG(a),")"),"& > $item":{padding:lG(a,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};iG.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,l.Z)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(uG),cG=sG;function gG(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var dG=n.createContext();var pG=dG;function hG(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function fG(e,t){return n.useMemo((function(){return null==e&&null==t?null:function(n){hG(e,n),hG(t,n)}}),[e,t])}function CG(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=this,l=function(){e.apply(i,a)};clearTimeout(t),t=setTimeout(l,n)}return r.clear=function(){clearTimeout(t)},r}function IG(e,t){return parseInt(e[t],10)||0}var mG="undefined"!==typeof window?n.useLayoutEffect:n.useEffect,vG={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},bG=n.forwardRef((function(e,t){var r=e.onChange,a=e.rows,o=e.rowsMax,i=e.rowsMin,u=e.maxRows,s=e.minRows,c=void 0===s?1:s,g=e.style,d=e.value,p=JZ(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),h=u||o,f=a||i||c,C=n.useRef(null!=d).current,I=n.useRef(null),m=fG(t,I),v=n.useRef(null),b=n.useRef(0),A=n.useState({}),y=A[0],k=A[1],Z=n.useCallback((function(){var t=I.current,n=window.getComputedStyle(t),r=v.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],o=IG(n,"padding-bottom")+IG(n,"padding-top"),i=IG(n,"border-bottom-width")+IG(n,"border-top-width"),l=r.scrollHeight-o;r.value="x";var u=r.scrollHeight-o,s=l;f&&(s=Math.max(Number(f)*u,s)),h&&(s=Math.min(Number(h)*u,s));var c=(s=Math.max(s,u))+("border-box"===a?o+i:0),g=Math.abs(s-l)<=1;k((function(e){return b.current<20&&(c>0&&Math.abs((e.outerHeightStyle||0)-c)>1||e.overflow!==g)?(b.current+=1,{overflow:g,outerHeightStyle:c}):e}))}),[h,f,e.placeholder]);n.useEffect((function(){var e=CG((function(){b.current=0,Z()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[Z]),mG((function(){Z()})),n.useEffect((function(){b.current=0}),[d]);return n.createElement(n.Fragment,null,n.createElement("textarea",(0,l.Z)({value:d,onChange:function(e){b.current=0,C||Z(),r&&r(e)},ref:m,rows:f,style:(0,l.Z)({height:y.outerHeightStyle,overflow:y.overflow?"hidden":null},g)},p)),n.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:(0,l.Z)({},vG,g)}))})),AG=bG;function yG(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function kG(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(yG(e.value)&&""!==e.value||t&&yG(e.defaultValue)&&""!==e.defaultValue)}var ZG="undefined"===typeof window?n.useEffect:n.useLayoutEffect,SG=n.forwardRef((function(e,t){var r=e["aria-describedby"],a=e.autoComplete,o=e.autoFocus,i=e.classes,u=e.className,s=(e.color,e.defaultValue),c=e.disabled,g=e.endAdornment,d=(e.error,e.fullWidth),p=void 0!==d&&d,h=e.id,f=e.inputComponent,C=void 0===f?"input":f,I=e.inputProps,m=void 0===I?{}:I,v=e.inputRef,b=(e.margin,e.multiline),A=void 0!==b&&b,y=e.name,k=e.onBlur,Z=e.onChange,S=e.onClick,w=e.onFocus,B=e.onKeyDown,x=e.onKeyUp,G=e.placeholder,R=e.readOnly,W=e.renderSuffix,V=e.rows,F=e.rowsMax,N=e.rowsMin,E=e.maxRows,D=e.minRows,X=e.startAdornment,J=e.type,H=void 0===J?"text":J,Y=e.value,T=JZ(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),M=null!=m.value?m.value:Y,K=n.useRef(null!=M).current,P=n.useRef(),z=n.useCallback((function(e){0}),[]),L=fG(m.ref,z),_=fG(v,L),O=fG(P,_),U=n.useState(!1),j=U[0],Q=U[1],q=n.useContext(dG);var $=gG({props:e,muiFormControl:q,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});$.focused=q?q.focused:j,n.useEffect((function(){!q&&c&&j&&(Q(!1),k&&k())}),[q,c,j,k]);var ee=q&&q.onFilled,te=q&&q.onEmpty,ne=n.useCallback((function(e){kG(e)?ee&&ee():te&&te()}),[ee,te]);ZG((function(){K&&ne({value:M})}),[M,ne,K]);n.useEffect((function(){ne(P.current)}),[]);var re=C,ae=(0,l.Z)({},m,{ref:O});"string"!==typeof re?ae=(0,l.Z)({inputRef:O,type:H},ae,{ref:null}):A?!V||E||D||F||N?(ae=(0,l.Z)({minRows:V||D,rowsMax:F,maxRows:E},ae),re=AG):re="textarea":ae=(0,l.Z)({type:H},ae);return n.useEffect((function(){q&&q.setAdornedStart(Boolean(X))}),[q,X]),n.createElement("div",(0,l.Z)({className:(0,de.Z)(i.root,i["color".concat(jx($.color||"primary"))],u,$.disabled&&i.disabled,$.error&&i.error,p&&i.fullWidth,$.focused&&i.focused,q&&i.formControl,A&&i.multiline,X&&i.adornedStart,g&&i.adornedEnd,"dense"===$.margin&&i.marginDense),onClick:function(e){P.current&&e.currentTarget===e.target&&P.current.focus(),S&&S(e)},ref:t},T),X,n.createElement(pG.Provider,{value:null},n.createElement(re,(0,l.Z)({"aria-invalid":$.error,"aria-describedby":r,autoComplete:a,autoFocus:o,defaultValue:s,disabled:$.disabled,id:h,onAnimationStart:function(e){ne("mui-auto-fill-cancel"===e.animationName?P.current:{value:"x"})},name:y,placeholder:G,readOnly:R,required:$.required,rows:V,value:M,onKeyDown:B,onKeyUp:x},ae,{className:(0,de.Z)(i.input,m.className,$.disabled&&i.disabled,A&&i.inputMultiline,$.hiddenLabel&&i.inputHiddenLabel,X&&i.inputAdornedStart,g&&i.inputAdornedEnd,"search"===H&&i.inputTypeSearch,"dense"===$.margin&&i.inputMarginDense),onBlur:function(e){k&&k(e),m.onBlur&&m.onBlur(e),q&&q.onBlur?q.onBlur(e):Q(!1)},onChange:function(e){if(!K){var t=e.target||P.current;if(null==t)throw new Error(nx(1));ne({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];m.onChange&&m.onChange.apply(m,[e].concat(r)),Z&&Z.apply(void 0,[e].concat(r))},onFocus:function(e){$.disabled?e.stopPropagation():(w&&w(e),m.onFocus&&m.onFocus(e),q&&q.onFocus?q.onFocus(e):Q(!0))}}))),g,W?W((0,l.Z)({},$,{startAdornment:X})):null)})),wG=Ux((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},a={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,l.Z)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(SG),BG=n.forwardRef((function(e,t){var r=e.disableUnderline,a=e.classes,o=e.fullWidth,i=void 0!==o&&o,u=e.inputComponent,s=void 0===u?"input":u,c=e.multiline,g=void 0!==c&&c,d=e.type,p=void 0===d?"text":d,h=JZ(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return n.createElement(wG,(0,l.Z)({classes:(0,l.Z)({},a,{root:(0,de.Z)(a.root,!r&&a.underline),underline:null}),fullWidth:i,inputComponent:s,multiline:g,ref:t,type:p},h))}));BG.muiName="Input";var xG=Ux((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(BG),GG=n.forwardRef((function(e,t){var r=e.disableUnderline,a=e.classes,o=e.fullWidth,i=void 0!==o&&o,u=e.inputComponent,s=void 0===u?"input":u,c=e.multiline,g=void 0!==c&&c,d=e.type,p=void 0===d?"text":d,h=JZ(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return n.createElement(wG,(0,l.Z)({classes:(0,l.Z)({},a,{root:(0,de.Z)(a.root,!r&&a.underline),underline:null}),fullWidth:i,inputComponent:s,multiline:g,ref:t,type:p},h))}));GG.muiName="Input";var RG=Ux((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(GG);function WG(){return aw()||Ox}var VG=n.forwardRef((function(e,t){e.children;var r=e.classes,a=e.className,o=e.label,i=e.labelWidth,u=e.notched,s=e.style,c=JZ(e,["children","classes","className","label","labelWidth","notched","style"]),g="rtl"===WG().direction?"right":"left";if(void 0!==o)return n.createElement("fieldset",(0,l.Z)({"aria-hidden":!0,className:(0,de.Z)(r.root,a),ref:t,style:s},c),n.createElement("legend",{className:(0,de.Z)(r.legendLabelled,u&&r.legendNotched)},o?n.createElement("span",null,o):n.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var d=i>0?.75*i+8:.01;return n.createElement("fieldset",(0,l.Z)({"aria-hidden":!0,style:(0,l.Z)((0,le.Z)({},"padding".concat(jx(g)),8),s),className:(0,de.Z)(r.root,a),ref:t},c),n.createElement("legend",{className:r.legend,style:{width:u?d:.01}},n.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),FG=Ux((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(VG),NG=n.forwardRef((function(e,t){var r=e.classes,a=e.fullWidth,o=void 0!==a&&a,i=e.inputComponent,u=void 0===i?"input":i,s=e.label,c=e.labelWidth,g=void 0===c?0:c,d=e.multiline,p=void 0!==d&&d,h=e.notched,f=e.type,C=void 0===f?"text":f,I=JZ(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return n.createElement(wG,(0,l.Z)({renderSuffix:function(e){return n.createElement(FG,{className:r.notchedOutline,label:s,labelWidth:g,notched:"undefined"!==typeof h?h:Boolean(e.startAdornment||e.filled||e.focused)})},classes:(0,l.Z)({},r,{root:(0,de.Z)(r.root,r.underline),notchedOutline:null}),fullWidth:o,inputComponent:u,multiline:p,ref:t,type:C},I))}));NG.muiName="Input";var EG=Ux((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(NG);function DG(){return n.useContext(pG)}var XG=n.forwardRef((function(e,t){var r=e.children,a=e.classes,o=e.className,i=(e.color,e.component),u=void 0===i?"label":i,s=(e.disabled,e.error,e.filled,e.focused,e.required,JZ(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),c=gG({props:e,muiFormControl:DG(),states:["color","required","focused","disabled","error","filled"]});return n.createElement(u,(0,l.Z)({className:(0,de.Z)(a.root,a["color".concat(jx(c.color||"primary"))],o,c.disabled&&a.disabled,c.error&&a.error,c.filled&&a.filled,c.focused&&a.focused,c.required&&a.required),ref:t},s),r,c.required&&n.createElement("span",{"aria-hidden":!0,className:(0,de.Z)(a.asterisk,c.error&&a.error)},"\u2009","*"))})),JG=Ux((function(e){return{root:(0,l.Z)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(XG),HG=n.forwardRef((function(e,t){var r=e.classes,a=e.className,o=e.disableAnimation,i=void 0!==o&&o,u=(e.margin,e.shrink),s=(e.variant,JZ(e,["classes","className","disableAnimation","margin","shrink","variant"])),c=DG(),g=u;"undefined"===typeof g&&c&&(g=c.filled||c.focused||c.adornedStart);var d=gG({props:e,muiFormControl:c,states:["margin","variant"]});return n.createElement(JG,(0,l.Z)({"data-shrink":g,className:(0,de.Z)(r.root,a,c&&r.formControl,!i&&r.animated,g&&r.shrink,"dense"===d.margin&&r.marginDense,{filled:r.filled,outlined:r.outlined}[d.variant]),classes:{focused:r.focused,disabled:r.disabled,error:r.error,required:r.required,asterisk:r.asterisk},ref:t},s))})),YG=Ux((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(HG);function TG(e,t){return n.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}var MG=n.forwardRef((function(e,t){var r=e.children,a=e.classes,o=e.className,i=e.color,u=void 0===i?"primary":i,s=e.component,c=void 0===s?"div":s,g=e.disabled,d=void 0!==g&&g,p=e.error,h=void 0!==p&&p,f=e.fullWidth,C=void 0!==f&&f,I=e.focused,m=e.hiddenLabel,v=void 0!==m&&m,b=e.margin,A=void 0===b?"none":b,y=e.required,k=void 0!==y&&y,Z=e.size,S=e.variant,w=void 0===S?"standard":S,B=JZ(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),x=n.useState((function(){var e=!1;return r&&n.Children.forEach(r,(function(t){if(TG(t,["Input","Select"])){var n=TG(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),G=x[0],R=x[1],W=n.useState((function(){var e=!1;return r&&n.Children.forEach(r,(function(t){TG(t,["Input","Select"])&&kG(t.props,!0)&&(e=!0)})),e})),V=W[0],F=W[1],N=n.useState(!1),E=N[0],D=N[1],X=void 0!==I?I:E;d&&X&&D(!1);var J=n.useCallback((function(){F(!0)}),[]),H={adornedStart:G,setAdornedStart:R,color:u,disabled:d,error:h,filled:V,focused:X,fullWidth:C,hiddenLabel:v,margin:("small"===Z?"dense":void 0)||A,onBlur:function(){D(!1)},onEmpty:n.useCallback((function(){F(!1)}),[]),onFilled:J,onFocus:function(){D(!0)},registerEffect:undefined,required:k,variant:w};return n.createElement(pG.Provider,{value:H},n.createElement(c,(0,l.Z)({className:(0,de.Z)(a.root,o,"none"!==A&&a["margin".concat(jx(A))],C&&a.fullWidth),ref:t},B),r))})),KG=Ux({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(MG),PG=n.forwardRef((function(e,t){var r=e.children,a=e.classes,o=e.className,i=e.component,u=void 0===i?"p":i,s=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,JZ(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),c=gG({props:e,muiFormControl:DG(),states:["variant","margin","disabled","error","filled","focused","required"]});return n.createElement(u,(0,l.Z)({className:(0,de.Z)(a.root,("filled"===c.variant||"outlined"===c.variant)&&a.contained,o,c.disabled&&a.disabled,c.error&&a.error,c.filled&&a.filled,c.focused&&a.focused,c.required&&a.required,"dense"===c.margin&&a.marginDense),ref:t},s)," "===r?n.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):r)})),zG=Ux((function(e){return{root:(0,l.Z)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(PG),LG=__webpack_require__(7441);function _G(e){return e&&e.ownerDocument||document}function OG(e){return _G(e).defaultView||window}function UG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var jG="undefined"!==typeof window?n.useLayoutEffect:n.useEffect;var QG=n.forwardRef((function(e,t){var a=e.children,o=e.container,i=e.disablePortal,l=void 0!==i&&i,u=e.onRendered,s=n.useState(null),c=s[0],g=s[1],d=fG(n.isValidElement(a)?a.ref:null,t);return jG((function(){l||g(function(e){return e="function"===typeof e?e():e,r.findDOMNode(e)}(o)||document.body)}),[o,l]),jG((function(){if(c&&!l)return hG(t,c),function(){hG(t,null)}}),[t,c,l]),jG((function(){u&&(c||l)&&u()}),[u,c,l]),l?n.isValidElement(a)?n.cloneElement(a,{ref:d}):a:c?r.createPortal(a,c):c})),qG="undefined"!==typeof window?n.useLayoutEffect:n.useEffect;function $G(e){var t=n.useRef(e);return qG((function(){t.current=e})),n.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}function eR(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function tR(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function nR(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function rR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,o=[t,n].concat((0,Ae.Z)(r)),i=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===i.indexOf(e.tagName)&&tR(e,a)}))}function aR(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function oR(e,t){var n,r=[],a=[],o=e.container;if(!t.disableScrollLock){if(function(e){var t=_G(e);return t.body===e?OG(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(o)){var i=eR();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(nR(o)+i,"px"),n=_G(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){a.push(e.style.paddingRight),e.style.paddingRight="".concat(nR(e)+i,"px")}))}var l=o.parentElement,u="HTML"===l.nodeName&&"scroll"===window.getComputedStyle(l)["overflow-y"]?l:o;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){a[t]?e.style.paddingRight=a[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var iR=function(){function e(){iu(this,e),this.modals=[],this.containers=[]}return uu(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&tR(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);rR(t,e.mountNode,e.modalRef,r,!0);var a=aR(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=aR(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=oR(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=aR(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&tR(e.modalRef,!0),rR(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&tR(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var lR=function(e){var t=e.children,a=e.disableAutoFocus,o=void 0!==a&&a,i=e.disableEnforceFocus,l=void 0!==i&&i,u=e.disableRestoreFocus,s=void 0!==u&&u,c=e.getDoc,g=e.isEnabled,d=e.open,p=n.useRef(),h=n.useRef(null),f=n.useRef(null),C=n.useRef(),I=n.useRef(null),m=n.useCallback((function(e){I.current=r.findDOMNode(e)}),[]),v=fG(t.ref,m),b=n.useRef();return n.useEffect((function(){b.current=d}),[d]),!b.current&&d&&"undefined"!==typeof window&&(C.current=c().activeElement),n.useEffect((function(){if(d){var e=_G(I.current);o||!I.current||I.current.contains(e.activeElement)||(I.current.hasAttribute("tabIndex")||I.current.setAttribute("tabIndex",-1),I.current.focus());var t=function(){null!==I.current&&(e.hasFocus()&&!l&&g()&&!p.current?I.current&&!I.current.contains(e.activeElement)&&I.current.focus():p.current=!1)},n=function(t){!l&&g()&&9===t.keyCode&&e.activeElement===I.current&&(p.current=!0,t.shiftKey?f.current.focus():h.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),s||(C.current&&C.current.focus&&C.current.focus(),C.current=null)}}}),[o,l,s,g,d]),n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,ref:h,"data-test":"sentinelStart"}),n.cloneElement(t,{ref:v}),n.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelEnd"}))},uR={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},sR=n.forwardRef((function(e,t){var r=e.invisible,a=void 0!==r&&r,o=e.open,i=JZ(e,["invisible","open"]);return o?n.createElement("div",(0,l.Z)({"aria-hidden":!0,ref:t},i,{style:(0,l.Z)({},uR.root,a?uR.invisible:{},i.style)})):null}));var cR=new iR,gR=n.forwardRef((function(e,t){var a=aw(),o=QB({name:"MuiModal",props:(0,l.Z)({},e),theme:a}),i=o.BackdropComponent,u=void 0===i?sR:i,s=o.BackdropProps,c=o.children,g=o.closeAfterTransition,d=void 0!==g&&g,p=o.container,h=o.disableAutoFocus,f=void 0!==h&&h,C=o.disableBackdropClick,I=void 0!==C&&C,m=o.disableEnforceFocus,v=void 0!==m&&m,b=o.disableEscapeKeyDown,A=void 0!==b&&b,y=o.disablePortal,k=void 0!==y&&y,Z=o.disableRestoreFocus,S=void 0!==Z&&Z,w=o.disableScrollLock,B=void 0!==w&&w,x=o.hideBackdrop,G=void 0!==x&&x,R=o.keepMounted,W=void 0!==R&&R,V=o.manager,F=void 0===V?cR:V,N=o.onBackdropClick,E=o.onClose,D=o.onEscapeKeyDown,X=o.onRendered,J=o.open,H=JZ(o,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),Y=n.useState(!0),T=Y[0],M=Y[1],K=n.useRef({}),P=n.useRef(null),z=n.useRef(null),L=fG(z,t),_=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(o),O=function(){return _G(P.current)},U=function(){return K.current.modalRef=z.current,K.current.mountNode=P.current,K.current},j=function(){F.mount(U(),{disableScrollLock:B}),z.current.scrollTop=0},Q=$G((function(){var e=function(e){return e="function"===typeof e?e():e,r.findDOMNode(e)}(p)||O().body;F.add(U(),e),z.current&&j()})),q=n.useCallback((function(){return F.isTopModal(U())}),[F]),$=$G((function(e){P.current=e,e&&(X&&X(),J&&q()?j():tR(z.current,!0))})),ee=n.useCallback((function(){F.remove(U())}),[F]);if(n.useEffect((function(){return function(){ee()}}),[ee]),n.useEffect((function(){J?Q():_&&d||ee()}),[J,ee,_,d,Q]),!W&&!J&&(!_||T))return null;var te=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(a||{zIndex:Lx}),ne={};return void 0===c.props.tabIndex&&(ne.tabIndex=c.props.tabIndex||"-1"),_&&(ne.onEnter=UG((function(){M(!1)}),c.props.onEnter),ne.onExited=UG((function(){M(!0),d&&ee()}),c.props.onExited)),n.createElement(QG,{ref:$,container:p,disablePortal:k},n.createElement("div",(0,l.Z)({ref:L,onKeyDown:function(e){"Escape"===e.key&&q()&&(D&&D(e),A||(e.stopPropagation(),E&&E(e,"escapeKeyDown")))},role:"presentation"},H,{style:(0,l.Z)({},te.root,!J&&T?te.hidden:{},H.style)}),G?null:n.createElement(u,(0,l.Z)({open:J,onClick:function(e){e.target===e.currentTarget&&(N&&N(e),!I&&E&&E(e,"backdropClick"))}},s)),n.createElement(lR,{disableEnforceFocus:v,disableAutoFocus:f,disableRestoreFocus:S,getDoc:O,isEnabled:q,open:J},n.cloneElement(c,ne))))}));function dR(e,t){var n=e.timeout,r=e.style,a=void 0===r?{}:r;return{duration:a.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:a.transitionDelay}}function pR(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var hR={entering:{opacity:1,transform:pR(1)},entered:{opacity:1,transform:"none"}},fR=n.forwardRef((function(e,t){var r=e.children,a=e.disableStrictModeCompat,o=void 0!==a&&a,u=e.in,s=e.onEnter,c=e.onEntered,g=e.onEntering,d=e.onExit,p=e.onExited,h=e.onExiting,f=e.style,C=e.timeout,I=void 0===C?"auto":C,m=e.TransitionComponent,v=void 0===m?$h:m,b=JZ(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),A=n.useRef(),y=n.useRef(),k=WG(),Z=k.unstable_strictMode&&!o,S=n.useRef(null),w=fG(r.ref,t),B=fG(Z?S:void 0,w),x=function(e){return function(t,n){if(e){var r=Z?[S.current,t]:[t,n],a=(0,i.Z)(r,2),o=a[0],l=a[1];void 0===l?e(o):e(o,l)}}},G=x(g),R=x((function(e,t){!function(e){e.scrollTop}(e);var n,r=dR({style:f,timeout:I},{mode:"enter"}),a=r.duration,o=r.delay;"auto"===I?(n=k.transitions.getAutoHeightDuration(e.clientHeight),y.current=n):n=a,e.style.transition=[k.transitions.create("opacity",{duration:n,delay:o}),k.transitions.create("transform",{duration:.666*n,delay:o})].join(","),s&&s(e,t)})),W=x(c),V=x(h),F=x((function(e){var t,n=dR({style:f,timeout:I},{mode:"exit"}),r=n.duration,a=n.delay;"auto"===I?(t=k.transitions.getAutoHeightDuration(e.clientHeight),y.current=t):t=r,e.style.transition=[k.transitions.create("opacity",{duration:t,delay:a}),k.transitions.create("transform",{duration:.666*t,delay:a||.333*t})].join(","),e.style.opacity="0",e.style.transform=pR(.75),d&&d(e)})),N=x(p);return n.useEffect((function(){return function(){clearTimeout(A.current)}}),[]),n.createElement(v,(0,l.Z)({appear:!0,in:u,nodeRef:Z?S:void 0,onEnter:R,onEntered:W,onEntering:G,onExit:F,onExited:N,onExiting:V,addEndListener:function(e,t){var n=Z?e:t;"auto"===I&&(A.current=setTimeout(n,y.current||0))},timeout:"auto"===I?null:I},b),(function(e,t){return n.cloneElement(r,(0,l.Z)({style:(0,l.Z)({opacity:0,transform:pR(.75),visibility:"exited"!==e||u?void 0:"hidden"},hR[e],f,r.props.style),ref:B},t))}))}));fR.muiSupportAuto=!0;var CR=fR;function IR(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function mR(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function vR(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function bR(e){return"function"===typeof e?e():e}var AR=n.forwardRef((function(e,t){var a=e.action,o=e.anchorEl,i=e.anchorOrigin,u=void 0===i?{vertical:"top",horizontal:"left"}:i,s=e.anchorPosition,c=e.anchorReference,g=void 0===c?"anchorEl":c,d=e.children,p=e.classes,h=e.className,f=e.container,C=e.elevation,I=void 0===C?8:C,m=e.getContentAnchorEl,v=e.marginThreshold,b=void 0===v?16:v,A=e.onEnter,y=e.onEntered,k=e.onEntering,Z=e.onExit,S=e.onExited,w=e.onExiting,B=e.open,x=e.PaperProps,G=void 0===x?{}:x,R=e.transformOrigin,W=void 0===R?{vertical:"top",horizontal:"left"}:R,V=e.TransitionComponent,F=void 0===V?CR:V,N=e.transitionDuration,E=void 0===N?"auto":N,D=e.TransitionProps,X=void 0===D?{}:D,J=JZ(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),H=n.useRef(),Y=n.useCallback((function(e){if("anchorPosition"===g)return s;var t=bR(o),n=(t&&1===t.nodeType?t:_G(H.current).body).getBoundingClientRect(),r=0===e?u.vertical:"center";return{top:n.top+IR(n,r),left:n.left+mR(n,u.horizontal)}}),[o,u.horizontal,u.vertical,s,g]),T=n.useCallback((function(e){var t=0;if(m&&"anchorEl"===g){var n=m(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[u.vertical,g,m]),M=n.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:IR(e,W.vertical)+t,horizontal:mR(e,W.horizontal)}}),[W.horizontal,W.vertical]),K=n.useCallback((function(e){var t=T(e),n={width:e.offsetWidth,height:e.offsetHeight},r=M(n,t);if("none"===g)return{top:null,left:null,transformOrigin:vR(r)};var a=Y(t),i=a.top-r.vertical,l=a.left-r.horizontal,u=i+n.height,s=l+n.width,c=OG(bR(o)),d=c.innerHeight-b,p=c.innerWidth-b;if(i<b){var h=i-b;i-=h,r.vertical+=h}else if(u>d){var f=u-d;i-=f,r.vertical+=f}if(l<b){var C=l-b;l-=C,r.horizontal+=C}else if(s>p){var I=s-p;l-=I,r.horizontal+=I}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(l),"px"),transformOrigin:vR(r)}}),[o,g,Y,T,M,b]),P=n.useCallback((function(){var e=H.current;if(e){var t=K(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[K]),z=n.useCallback((function(e){H.current=r.findDOMNode(e)}),[]);n.useEffect((function(){B&&P()})),n.useImperativeHandle(a,(function(){return B?{updatePosition:function(){P()}}:null}),[B,P]),n.useEffect((function(){if(B){var e=CG((function(){P()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[B,P]);var L=E;"auto"!==E||F.muiSupportAuto||(L=void 0);var _=f||(o?_G(bR(o)).body:void 0);return n.createElement(gR,(0,l.Z)({container:_,open:B,ref:t,BackdropProps:{invisible:!0},className:(0,de.Z)(p.root,h)},J),n.createElement(F,(0,l.Z)({appear:!0,in:B,onEnter:A,onEntered:y,onExit:Z,onExited:S,onExiting:w,timeout:L},X,{onEntering:UG((function(e,t){k&&k(e,t),P()}),X.onEntering)}),n.createElement(eG,(0,l.Z)({elevation:I,ref:z},G,{className:(0,de.Z)(p.paper,G.className)}),d)))})),yR=Ux({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(AR);var kR=n.createContext({}),ZR=n.forwardRef((function(e,t){var r=e.children,a=e.classes,o=e.className,i=e.component,u=void 0===i?"ul":i,s=e.dense,c=void 0!==s&&s,g=e.disablePadding,d=void 0!==g&&g,p=e.subheader,h=JZ(e,["children","classes","className","component","dense","disablePadding","subheader"]),f=n.useMemo((function(){return{dense:c}}),[c]);return n.createElement(kR.Provider,{value:f},n.createElement(u,(0,l.Z)({className:(0,de.Z)(a.root,o,c&&a.dense,!d&&a.padding,p&&a.subheader),ref:t},h),p,r))})),SR=Ux({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(ZR);function wR(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function BR(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function xR(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function GR(e,t,n,r,a,o){for(var i=!1,l=a(e,t,!!t&&n);l;){if(l===e.firstChild){if(i)return;i=!0}var u=!r&&(l.disabled||"true"===l.getAttribute("aria-disabled"));if(l.hasAttribute("tabindex")&&xR(l,o)&&!u)return void l.focus();l=a(e,l,n)}}var RR="undefined"===typeof window?n.useEffect:n.useLayoutEffect,WR=n.forwardRef((function(e,t){var a=e.actions,o=e.autoFocus,i=void 0!==o&&o,u=e.autoFocusItem,s=void 0!==u&&u,c=e.children,g=e.className,d=e.disabledItemsFocusable,p=void 0!==d&&d,h=e.disableListWrap,f=void 0!==h&&h,C=e.onKeyDown,I=e.variant,m=void 0===I?"selectedMenu":I,v=JZ(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),b=n.useRef(null),A=n.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});RR((function(){i&&b.current.focus()}),[i]),n.useImperativeHandle(a,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!b.current.style.width;if(e.clientHeight<b.current.clientHeight&&n){var r="".concat(eR(),"px");b.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,b.current.style.width="calc(100% + ".concat(r,")")}return b.current}}}),[]);var y=fG(n.useCallback((function(e){b.current=r.findDOMNode(e)}),[]),t),k=-1;n.Children.forEach(c,(function(e,t){n.isValidElement(e)&&(e.props.disabled||("selectedMenu"===m&&e.props.selected||-1===k)&&(k=t))}));var Z=n.Children.map(c,(function(e,t){if(t===k){var r={};return s&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===m&&(r.tabIndex=0),n.cloneElement(e,r)}return e}));return n.createElement(SR,(0,l.Z)({role:"menu",ref:y,className:g,onKeyDown:function(e){var t=b.current,n=e.key,r=_G(t).activeElement;if("ArrowDown"===n)e.preventDefault(),GR(t,r,f,p,wR);else if("ArrowUp"===n)e.preventDefault(),GR(t,r,f,p,BR);else if("Home"===n)e.preventDefault(),GR(t,null,f,p,wR);else if("End"===n)e.preventDefault(),GR(t,null,f,p,BR);else if(1===n.length){var a=A.current,o=n.toLowerCase(),i=performance.now();a.keys.length>0&&(i-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&o!==a.keys[0]&&(a.repeating=!1)),a.lastTime=i,a.keys.push(o);var l=r&&!a.repeating&&xR(r,a);a.previousKeyMatched&&(l||GR(t,r,!1,p,wR,a))?e.preventDefault():a.previousKeyMatched=!1}C&&C(e)},tabIndex:i?0:-1},v),Z)})),VR=WR,FR={vertical:"top",horizontal:"right"},NR={vertical:"top",horizontal:"left"},ER=n.forwardRef((function(e,t){var a=e.autoFocus,o=void 0===a||a,i=e.children,u=e.classes,s=e.disableAutoFocusItem,c=void 0!==s&&s,g=e.MenuListProps,d=void 0===g?{}:g,p=e.onClose,h=e.onEntering,f=e.open,C=e.PaperProps,I=void 0===C?{}:C,m=e.PopoverClasses,v=e.transitionDuration,b=void 0===v?"auto":v,A=e.TransitionProps,y=(A=void 0===A?{}:A).onEntering,k=JZ(A,["onEntering"]),Z=e.variant,S=void 0===Z?"selectedMenu":Z,w=JZ(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),B=WG(),x=o&&!c&&f,G=n.useRef(null),R=n.useRef(null),W=-1;n.Children.map(i,(function(e,t){n.isValidElement(e)&&(e.props.disabled||("menu"!==S&&e.props.selected||-1===W)&&(W=t))}));var V=n.Children.map(i,(function(e,t){return t===W?n.cloneElement(e,{ref:function(t){R.current=r.findDOMNode(t),hG(e.ref,t)}}):e}));return n.createElement(yR,(0,l.Z)({getContentAnchorEl:function(){return R.current},classes:m,onClose:p,TransitionProps:(0,l.Z)({onEntering:function(e,t){G.current&&G.current.adjustStyleForScrollbar(e,B),h&&h(e,t),y&&y(e,t)}},k),anchorOrigin:"rtl"===B.direction?FR:NR,transformOrigin:"rtl"===B.direction?FR:NR,PaperProps:(0,l.Z)({},I,{classes:(0,l.Z)({},I.classes,{root:u.paper})}),open:f,ref:t,transitionDuration:b},w),n.createElement(VR,(0,l.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),p&&p(e,"tabKeyDown"))},actions:G,autoFocus:o&&(-1===W||c),autoFocusItem:x,variant:S},d,{className:(0,de.Z)(u.list,d.className)}),V))})),DR=Ux({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(ER);function XR(e,t){return"object"===du(t)&&null!==t?e===t:String(e)===String(t)}var JR=n.forwardRef((function(e,t){var r=e["aria-label"],a=e.autoFocus,o=e.autoWidth,u=e.children,s=e.classes,c=e.className,g=e.defaultValue,d=e.disabled,p=e.displayEmpty,h=e.IconComponent,f=e.inputRef,C=e.labelId,I=e.MenuProps,m=void 0===I?{}:I,v=e.multiple,b=e.name,A=e.onBlur,y=e.onChange,k=e.onClose,Z=e.onFocus,S=e.onOpen,w=e.open,B=e.readOnly,x=e.renderValue,G=e.SelectDisplayProps,R=void 0===G?{}:G,W=e.tabIndex,V=(e.type,e.value),F=e.variant,N=void 0===F?"standard":F,E=JZ(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),D=function(e){var t=e.controlled,r=e.default,a=(e.name,e.state,n.useRef(void 0!==t).current),o=n.useState(r),i=o[0],l=o[1];return[a?t:i,n.useCallback((function(e){a||l(e)}),[])]}({controlled:V,default:g,name:"Select"}),X=(0,i.Z)(D,2),J=X[0],H=X[1],Y=n.useRef(null),T=n.useState(null),M=T[0],K=T[1],P=n.useRef(null!=w).current,z=n.useState(),L=z[0],_=z[1],O=n.useState(!1),U=O[0],j=O[1],Q=fG(t,f);n.useImperativeHandle(Q,(function(){return{focus:function(){M.focus()},node:Y.current,value:J}}),[M,J]),n.useEffect((function(){a&&M&&M.focus()}),[a,M]),n.useEffect((function(){if(M){var e=_G(M).getElementById(C);if(e){var t=function(){getSelection().isCollapsed&&M.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[C,M]);var q,$,ee=function(e,t){e?S&&S(t):k&&k(t),P||(_(o?null:M.clientWidth),j(e))},te=n.Children.toArray(u),ne=function(e){return function(t){var n;if(v||ee(!1,t),v){n=Array.isArray(J)?J.slice():[];var r=J.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),J!==n&&(H(n),y&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:b}}),y(t,e)))}},re=null!==M&&(P?w:U);delete E["aria-invalid"];var ae=[],oe=!1;(kG({value:J})||p)&&(x?q=x(J):oe=!0);var ie=te.map((function(e){if(!n.isValidElement(e))return null;var t;if(v){if(!Array.isArray(J))throw new Error(nx(2));t=J.some((function(t){return XR(t,e.props.value)})),t&&oe&&ae.push(e.props.children)}else(t=XR(J,e.props.value))&&oe&&($=e.props.children);return t&&!0,n.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:ne(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));oe&&(q=v?ae.join(", "):$);var le,ue=L;!o&&P&&M&&(ue=M.clientWidth),le="undefined"!==typeof W?W:d?null:0;var se=R.id||(b?"mui-component-select-".concat(b):void 0);return n.createElement(n.Fragment,null,n.createElement("div",(0,l.Z)({className:(0,de.Z)(s.root,s.select,s.selectMenu,s[N],c,d&&s.disabled),ref:K,tabIndex:le,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":re?"true":void 0,"aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[C,se].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!B){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ee(!0,e))}},onMouseDown:d||B?null:function(e){0===e.button&&(e.preventDefault(),M.focus(),ee(!0,e))},onBlur:function(e){!re&&A&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:J,name:b}}),A(e))},onFocus:Z},R,{id:se}),function(e){return null==e||"string"===typeof e&&!e.trim()}(q)?n.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):q),n.createElement("input",(0,l.Z)({value:Array.isArray(J)?J.join(","):J,name:b,ref:Y,"aria-hidden":!0,onChange:function(e){var t=te.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=te[t];H(n.props.value),y&&y(e,n)}},tabIndex:-1,className:s.nativeInput,autoFocus:a},E)),n.createElement(h,{className:(0,de.Z)(s.icon,s["icon".concat(jx(N))],re&&s.iconOpen,d&&s.disabled)}),n.createElement(DR,(0,l.Z)({id:"menu-".concat(b||""),anchorEl:M,open:re,onClose:function(e){ee(!1,e)}},m,{MenuListProps:(0,l.Z)({"aria-labelledby":C,role:"listbox",disableListWrap:!0},m.MenuListProps),PaperProps:(0,l.Z)({},m.PaperProps,{style:(0,l.Z)({minWidth:ue},null!=m.PaperProps?m.PaperProps.style:null)})}),ie))})),HR=JR,YR=n.forwardRef((function(e,t){var r=e.children,a=e.classes,o=e.className,i=e.color,u=void 0===i?"inherit":i,s=e.component,c=void 0===s?"svg":s,g=e.fontSize,d=void 0===g?"medium":g,p=e.htmlColor,h=e.titleAccess,f=e.viewBox,C=void 0===f?"0 0 24 24":f,I=JZ(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return n.createElement(c,(0,l.Z)({className:(0,de.Z)(a.root,o,"inherit"!==u&&a["color".concat(jx(u))],"default"!==d&&"medium"!==d&&a["fontSize".concat(jx(d))]),focusable:"false",viewBox:C,color:p,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:t},I),r,h?n.createElement("title",null,h):null)}));YR.muiName="SvgIcon";var TR=Ux((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(YR);var MR=function(e,t){var r=function(t,r){return n.createElement(TR,(0,l.Z)({ref:r},t),e)};return r.muiName=TR.muiName,n.memo(n.forwardRef(r))}(n.createElement("path",{d:"M7 10l5 5 5-5z"})),KR=n.forwardRef((function(e,t){var r=e.classes,a=e.className,o=e.disabled,i=e.IconComponent,u=e.inputRef,s=e.variant,c=void 0===s?"standard":s,g=JZ(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return n.createElement(n.Fragment,null,n.createElement("select",(0,l.Z)({className:(0,de.Z)(r.root,r.select,r[c],a,o&&r.disabled),disabled:o,ref:u||t},g)),e.multiple?null:n.createElement(i,{className:(0,de.Z)(r.icon,r["icon".concat(jx(c))],o&&r.disabled)}))})),PR=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},zR=n.createElement(xG,null),LR=n.forwardRef((function(e,t){var r=e.children,a=e.classes,o=e.IconComponent,i=void 0===o?MR:o,u=e.input,s=void 0===u?zR:u,c=e.inputProps,g=(e.variant,JZ(e,["children","classes","IconComponent","input","inputProps","variant"])),d=gG({props:e,muiFormControl:DG(),states:["variant"]});return n.cloneElement(s,(0,l.Z)({inputComponent:KR,inputProps:(0,l.Z)({children:r,classes:a,IconComponent:i,variant:d.variant,type:void 0},c,s?s.props.inputProps:{}),ref:t},g))}));LR.muiName="Select";Ux(PR,{name:"MuiNativeSelect"})(LR);var _R=PR,OR=n.createElement(xG,null),UR=n.createElement(RG,null),jR=n.forwardRef((function e(t,r){var a=t.autoWidth,o=void 0!==a&&a,i=t.children,u=t.classes,s=t.displayEmpty,c=void 0!==s&&s,g=t.IconComponent,d=void 0===g?MR:g,p=t.id,h=t.input,f=t.inputProps,C=t.label,I=t.labelId,m=t.labelWidth,v=void 0===m?0:m,b=t.MenuProps,A=t.multiple,y=void 0!==A&&A,k=t.native,Z=void 0!==k&&k,S=t.onClose,w=t.onOpen,B=t.open,x=t.renderValue,G=t.SelectDisplayProps,R=t.variant,W=void 0===R?"standard":R,V=JZ(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),F=Z?KR:HR,N=gG({props:t,muiFormControl:DG(),states:["variant"]}).variant||W,E=h||{standard:OR,outlined:n.createElement(EG,{label:C,labelWidth:v}),filled:UR}[N];return n.cloneElement(E,(0,l.Z)({inputComponent:F,inputProps:(0,l.Z)({children:i,IconComponent:d,variant:N,type:void 0,multiple:y},Z?{id:p}:{autoWidth:o,displayEmpty:c,labelId:I,MenuProps:b,onClose:S,onOpen:w,open:B,renderValue:x,SelectDisplayProps:(0,l.Z)({id:p},G)},f,{classes:f?ew({baseClasses:u,newClasses:f.classes,Component:e}):u},h?h.props.inputProps:{}),ref:r},V))}));jR.muiName="Select";var QR=Ux(_R,{name:"MuiSelect"})(jR),qR={standard:xG,filled:RG,outlined:EG},$R=n.forwardRef((function(e,t){var r=e.autoComplete,a=e.autoFocus,o=void 0!==a&&a,i=e.children,u=e.classes,s=e.className,c=e.color,g=void 0===c?"primary":c,d=e.defaultValue,p=e.disabled,h=void 0!==p&&p,f=e.error,C=void 0!==f&&f,I=e.FormHelperTextProps,m=e.fullWidth,v=void 0!==m&&m,b=e.helperText,A=e.hiddenLabel,y=e.id,k=e.InputLabelProps,Z=e.inputProps,S=e.InputProps,w=e.inputRef,B=e.label,x=e.multiline,G=void 0!==x&&x,R=e.name,W=e.onBlur,V=e.onChange,F=e.onFocus,N=e.placeholder,E=e.required,D=void 0!==E&&E,X=e.rows,J=e.rowsMax,H=e.maxRows,Y=e.minRows,T=e.select,M=void 0!==T&&T,K=e.SelectProps,P=e.type,z=e.value,L=e.variant,_=void 0===L?"standard":L,O=JZ(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var U={};if("outlined"===_&&(k&&"undefined"!==typeof k.shrink&&(U.notched=k.shrink),B)){var j,Q=null!==(j=null===k||void 0===k?void 0:k.required)&&void 0!==j?j:D;U.label=n.createElement(n.Fragment,null,B,Q&&"\xa0*")}M&&(K&&K.native||(U.id=void 0),U["aria-describedby"]=void 0);var q=b&&y?"".concat(y,"-helper-text"):void 0,$=B&&y?"".concat(y,"-label"):void 0,ee=qR[_],te=n.createElement(ee,(0,l.Z)({"aria-describedby":q,autoComplete:r,autoFocus:o,defaultValue:d,fullWidth:v,multiline:G,name:R,rows:X,rowsMax:J,maxRows:H,minRows:Y,type:P,value:z,id:y,inputRef:w,onBlur:W,onChange:V,onFocus:F,placeholder:N,inputProps:Z},U,S));return n.createElement(KG,(0,l.Z)({className:(0,de.Z)(u.root,s),disabled:h,error:C,fullWidth:v,hiddenLabel:A,ref:t,required:D,color:g,variant:_},O),B&&n.createElement(YG,(0,l.Z)({htmlFor:y,id:$},k),B),M?n.createElement(QR,(0,l.Z)({"aria-describedby":q,id:y,labelId:$,value:z,input:te},K),i):te,b&&n.createElement(zG,(0,l.Z)({id:q},I),b))})),eW=Ux({root:{}},{name:"MuiTextField"})($R),tW=!0,nW=!1,rW=null,aW={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function oW(e){e.metaKey||e.altKey||e.ctrlKey||(tW=!0)}function iW(){tW=!1}function lW(){"hidden"===this.visibilityState&&nW&&(tW=!0)}function uW(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return tW||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!aW[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function sW(){nW=!0,window.clearTimeout(rW),rW=window.setTimeout((function(){nW=!1}),100)}function cW(){return{isFocusVisible:uW,onBlurVisible:sW,ref:n.useCallback((function(e){var t,n=r.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",oW,!0),t.addEventListener("mousedown",iW,!0),t.addEventListener("pointerdown",iW,!0),t.addEventListener("touchstart",iW,!0),t.addEventListener("visibilitychange",lW,!0))}),[])}}var gW="undefined"===typeof window?n.useEffect:n.useLayoutEffect;var dW=function(e){var t=e.classes,r=e.pulsate,a=void 0!==r&&r,o=e.rippleX,i=e.rippleY,l=e.rippleSize,u=e.in,s=e.onExited,c=void 0===s?function(){}:s,g=e.timeout,d=n.useState(!1),p=d[0],h=d[1],f=(0,de.Z)(t.ripple,t.rippleVisible,a&&t.ripplePulsate),C={width:l,height:l,top:-l/2+i,left:-l/2+o},I=(0,de.Z)(t.child,p&&t.childLeaving,a&&t.childPulsate),m=$G(c);return gW((function(){if(!u){h(!0);var e=setTimeout(m,g);return function(){clearTimeout(e)}}}),[m,u,g]),n.createElement("span",{className:f,style:C},n.createElement("span",{className:I}))},pW=n.forwardRef((function(e,t){var r=e.center,a=void 0!==r&&r,o=e.classes,i=e.className,u=JZ(e,["center","classes","className"]),s=n.useState([]),c=s[0],g=s[1],d=n.useRef(0),p=n.useRef(null);n.useEffect((function(){p.current&&(p.current(),p.current=null)}),[c]);var h=n.useRef(!1),f=n.useRef(null),C=n.useRef(null),I=n.useRef(null);n.useEffect((function(){return function(){clearTimeout(f.current)}}),[]);var m=n.useCallback((function(e){var t=e.pulsate,r=e.rippleX,a=e.rippleY,i=e.rippleSize,l=e.cb;g((function(e){return[].concat((0,Ae.Z)(e),[n.createElement(dW,{key:d.current,classes:o,timeout:550,pulsate:t,rippleX:r,rippleY:a,rippleSize:i})])})),d.current+=1,p.current=l}),[o]),v=n.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,o=void 0!==r&&r,i=t.center,l=void 0===i?a||t.pulsate:i,u=t.fakeElement,s=void 0!==u&&u;if("mousedown"===e.type&&h.current)h.current=!1;else{"touchstart"===e.type&&(h.current=!0);var c,g,d,p=s?null:I.current,v=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(l||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(v.width/2),g=Math.round(v.height/2);else{var b=e.touches?e.touches[0]:e,A=b.clientX,y=b.clientY;c=Math.round(A-v.left),g=Math.round(y-v.top)}if(l)(d=Math.sqrt((2*Math.pow(v.width,2)+Math.pow(v.height,2))/3))%2===0&&(d+=1);else{var k=2*Math.max(Math.abs((p?p.clientWidth:0)-c),c)+2,Z=2*Math.max(Math.abs((p?p.clientHeight:0)-g),g)+2;d=Math.sqrt(Math.pow(k,2)+Math.pow(Z,2))}e.touches?null===C.current&&(C.current=function(){m({pulsate:o,rippleX:c,rippleY:g,rippleSize:d,cb:n})},f.current=setTimeout((function(){C.current&&(C.current(),C.current=null)}),80)):m({pulsate:o,rippleX:c,rippleY:g,rippleSize:d,cb:n})}}),[a,m]),b=n.useCallback((function(){v({},{pulsate:!0})}),[v]),A=n.useCallback((function(e,t){if(clearTimeout(f.current),"touchend"===e.type&&C.current)return e.persist(),C.current(),C.current=null,void(f.current=setTimeout((function(){A(e,t)})));C.current=null,g((function(e){return e.length>0?e.slice(1):e})),p.current=t}),[]);return n.useImperativeHandle(t,(function(){return{pulsate:b,start:v,stop:A}}),[b,v,A]),n.createElement("span",(0,l.Z)({className:(0,de.Z)(o.root,i),ref:I},u),n.createElement(Ve,{component:null,exit:!0},c))})),hW=Ux((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(n.memo(pW)),fW=n.forwardRef((function(e,t){var a=e.action,o=e.buttonRef,i=e.centerRipple,u=void 0!==i&&i,s=e.children,c=e.classes,g=e.className,d=e.component,p=void 0===d?"button":d,h=e.disabled,f=void 0!==h&&h,C=e.disableRipple,I=void 0!==C&&C,m=e.disableTouchRipple,v=void 0!==m&&m,b=e.focusRipple,A=void 0!==b&&b,y=e.focusVisibleClassName,k=e.onBlur,Z=e.onClick,S=e.onFocus,w=e.onFocusVisible,B=e.onKeyDown,x=e.onKeyUp,G=e.onMouseDown,R=e.onMouseLeave,W=e.onMouseUp,V=e.onTouchEnd,F=e.onTouchMove,N=e.onTouchStart,E=e.onDragLeave,D=e.tabIndex,X=void 0===D?0:D,J=e.TouchRippleProps,H=e.type,Y=void 0===H?"button":H,T=JZ(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),M=n.useRef(null);var K=n.useRef(null),P=n.useState(!1),z=P[0],L=P[1];f&&z&&L(!1);var _=cW(),O=_.isFocusVisible,U=_.onBlurVisible,j=_.ref;function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return $G((function(r){return t&&t(r),!n&&K.current&&K.current[e](r),!0}))}n.useImperativeHandle(a,(function(){return{focusVisible:function(){L(!0),M.current.focus()}}}),[]),n.useEffect((function(){z&&A&&!I&&K.current.pulsate()}),[I,A,z]);var q=Q("start",G),$=Q("stop",E),ee=Q("stop",W),te=Q("stop",(function(e){z&&e.preventDefault(),R&&R(e)})),ne=Q("start",N),re=Q("stop",V),ae=Q("stop",F),oe=Q("stop",(function(e){z&&(U(e),L(!1)),k&&k(e)}),!1),ie=$G((function(e){M.current||(M.current=e.currentTarget),O(e)&&(L(!0),w&&w(e)),S&&S(e)})),le=function(){var e=r.findDOMNode(M.current);return p&&"button"!==p&&!("A"===e.tagName&&e.href)},ue=n.useRef(!1),se=$G((function(e){A&&!ue.current&&z&&K.current&&" "===e.key&&(ue.current=!0,e.persist(),K.current.stop(e,(function(){K.current.start(e)}))),e.target===e.currentTarget&&le()&&" "===e.key&&e.preventDefault(),B&&B(e),e.target===e.currentTarget&&le()&&"Enter"===e.key&&!f&&(e.preventDefault(),Z&&Z(e))})),ce=$G((function(e){A&&" "===e.key&&K.current&&z&&!e.defaultPrevented&&(ue.current=!1,e.persist(),K.current.stop(e,(function(){K.current.pulsate(e)}))),x&&x(e),Z&&e.target===e.currentTarget&&le()&&" "===e.key&&!e.defaultPrevented&&Z(e)})),ge=p;"button"===ge&&T.href&&(ge="a");var pe={};"button"===ge?(pe.type=Y,pe.disabled=f):("a"===ge&&T.href||(pe.role="button"),pe["aria-disabled"]=f);var he=fG(o,t),fe=fG(j,M),Ce=fG(he,fe),Ie=n.useState(!1),me=Ie[0],ve=Ie[1];n.useEffect((function(){ve(!0)}),[]);var be=me&&!I&&!f;return n.createElement(ge,(0,l.Z)({className:(0,de.Z)(c.root,g,z&&[c.focusVisible,y],f&&c.disabled),onBlur:oe,onClick:Z,onFocus:ie,onKeyDown:se,onKeyUp:ce,onMouseDown:q,onMouseLeave:te,onMouseUp:ee,onDragLeave:$,onTouchEnd:re,onTouchMove:ae,onTouchStart:ne,ref:Ce,tabIndex:f?-1:X},pe,T),s,be?n.createElement(hW,(0,l.Z)({ref:K,center:u},J)):null)})),CW=Ux({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(fW),IW=n.forwardRef((function(e,t){var r=e.children,a=e.classes,o=e.className,i=e.color,u=void 0===i?"default":i,s=e.component,c=void 0===s?"button":s,g=e.disabled,d=void 0!==g&&g,p=e.disableElevation,h=void 0!==p&&p,f=e.disableFocusRipple,C=void 0!==f&&f,I=e.endIcon,m=e.focusVisibleClassName,v=e.fullWidth,b=void 0!==v&&v,A=e.size,y=void 0===A?"medium":A,k=e.startIcon,Z=e.type,S=void 0===Z?"button":Z,w=e.variant,B=void 0===w?"text":w,x=JZ(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),G=k&&n.createElement("span",{className:(0,de.Z)(a.startIcon,a["iconSize".concat(jx(y))])},k),R=I&&n.createElement("span",{className:(0,de.Z)(a.endIcon,a["iconSize".concat(jx(y))])},I);return n.createElement(CW,(0,l.Z)({className:(0,de.Z)(a.root,a[B],o,"inherit"===u?a.colorInherit:"default"!==u&&a["".concat(B).concat(jx(u))],"medium"!==y&&[a["".concat(B,"Size").concat(jx(y))],a["size".concat(jx(y))]],h&&a.disableElevation,d&&a.disabled,b&&a.fullWidth),component:c,disabled:d,focusRipple:!C,focusVisibleClassName:(0,de.Z)(a.focusVisible,m),ref:t,type:S},x),n.createElement("span",{className:a.label},G,r,R))})),mW=Ux((function(e){return{root:(0,l.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:fx(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:fx(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:fx(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(fx(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:fx(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(fx(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:fx(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(IW);var vW=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return jB(e,(0,l.Z)({defaultTheme:Ox},t))},bW=__webpack_require__(741),AW=__webpack_require__(9008),yW=__webpack_require__.n(AW),kW=vW((function(e){return{Container:{marginTop:10},title:{display:"flex",justifyContent:"center",alignItems:"center",background:"#3f51b5",color:"#fff",padding:20},btn:{marginTop:10,marginBottom:20}}})),ZW=function(){var e=kW(),t=(0,n.useState)(""),r=(0,i.Z)(t,2),o=r[0],l=r[1],u=(0,n.useState)(""),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=((0,n.useRef)(null),(0,n.useState)("")),p=(0,i.Z)(d,2),h=(p[0],p[1],(0,n.useState)("")),f=(0,i.Z)(h,2),C=f[0],I=f[1],m=function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bW.toDataURL(o);case 3:t=e.sent,g(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,a.jsx)(qx,{className:e.container,children:(0,a.jsxs)(nG,{children:[(0,a.jsx)("h2",{className:e.title,children:"Generate Download & Scan QR code with react.js"}),(0,a.jsx)(aG,{children:(0,a.jsxs)(cG,{container:!0,spacing:2,children:[(0,a.jsxs)(cG,{item:!0,xl:4,lg:5,md:6,sm:12,xs:12,children:[(0,a.jsx)(eW,{label:"Enter Text Here",onChange:function(e){l(e.target.value)}}),(0,a.jsx)(mW,{className:"btn",variant:"contained",color:"primary",onClick:function(){return m()},children:"Generate"}),c?(0,a.jsx)("a",{href:c,download:!0,children:(0,a.jsx)("img",{src:c,alt:"img"})}):null]}),(0,a.jsxs)(cG,{item:!0,xl:4,lg:5,md:6,sm:12,xs:12,children:[(0,a.jsx)("h3",{children:"Qr Code Scan by Web Cam"}),(0,a.jsx)(yW(),{delay:300,style:{width:"100%"},onError:function(e){console.log(e)},onScan:function(e){console.log(e),e&&I(e.text)}}),(0,a.jsxs)("h3",{children:["Scanned By WebCam :",C]})]})]})})]})})},SW=function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"fish",children:[(0,a.jsx)("div",{className:"fin"}),(0,a.jsx)("div",{className:"mouth"}),(0,a.jsx)("div",{className:"eye",children:(0,a.jsx)("div",{className:"m"})}),(0,a.jsx)("div",{className:"g"}),(0,a.jsx)("div",{className:"tail1"}),(0,a.jsx)("div",{className:"tail2"})]})})},wW=function(){var e=(0,n.useState)(),t=(0,i.Z)(e,2),r=(t[0],t[1]),o="".concat("http://8.218.88.75:5000/","api/fishpond/query");return(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(o);case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r(n),console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.stack);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();j(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}),[]),(0,a.jsx)(a.Fragment,{})},BW=function(e){var t=e.Login,r=e.error,o=(0,n.useState)({email:"",password:""}),l=(0,i.Z)(o,2),u=l[0],s=l[1];return(0,a.jsx)("form",{className:"loginform",onSubmit:function(e){e.preventDefault(),t(u)},children:(0,a.jsxs)("div",{className:"form-inner",children:[(0,a.jsx)("h2",{children:"Login"}),""!=r?(0,a.jsx)("div",{className:"error",children:r}):null,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"email",type:"email",label:"Email",variant:"outlined",onChange:function(e){return s(se(se({},u),{},{email:e.target.value}))},value:u.email})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"password",type:"password",label:"Password",variant:"outlined",onChange:function(e){return s(se(se({},u),{},{password:e.target.value}))},value:u.password})}),(0,a.jsx)("input",{className:"login",type:"submit",value:"LOGIN"})]})})},xW=function(){var e=(0,n.useState)({name:"",email:""}),t=(0,i.Z)(e,2),r=(t[0],t[1],(0,n.useState)("")),o=(0,i.Z)(r,2),l=o[0],u=o[1],s=B(),c=function(e){j(q().mark((function t(){var n;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("http://8.218.88.75:5000/","api/auth/login"),{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify({email:e.email,password:e.password})}).then((function(e){return e.json()}));case 3:(n=t.sent).ok?(ee(n.token),s("/")):u(n.msg),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()};return(0,a.jsx)("div",{className:"loginpage",children:(0,a.jsx)(BW,{Login:c,error:l})})},GW=function(e){return(0,a.jsx)("div",{className:"FuncBox",children:(0,a.jsx)("div",{className:"FuncboxText",children:e.text})})},RW=function(){B();return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"Login Required"}),(0,a.jsx)(O,{to:"/login",replace:!0,children:"Go to Login Page"})]})},WW=function(e){var t=e.admin,r=e.user,o=(B(),(0,n.useState)(!0)),l=(0,i.Z)(o,2),u=l[0],s=l[1];return(0,n.useEffect)((function(){s(!1)}),[]),(0,a.jsx)("div",{className:"FuncBoxContainer",children:t||r?u?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(O,{to:"fishponds",children:(0,a.jsx)(GW,{text:"Fishponds"})}):null,(0,a.jsx)(O,{to:"periods",children:(0,a.jsx)(GW,{text:"Periods"})}),t?(0,a.jsx)(O,{to:"sensors",children:(0,a.jsx)(GW,{text:"Sensors"})}):null,t?(0,a.jsx)(O,{to:"fishs",children:(0,a.jsx)(GW,{text:"Fish Type"})}):null,(0,a.jsx)(O,{to:"sensorrecords",children:(0,a.jsx)(GW,{text:"Sensor Records"})}),t?(0,a.jsx)(O,{to:"records",children:(0,a.jsx)(GW,{text:"Records"})}):null]}):(0,a.jsx)(RW,{})})},VW=__webpack_require__(6048),FW=__webpack_require__.n(VW),NW=__webpack_require__(5403);function EW(e){return(0,$e.Z)("MuiInputAdornment",e)}var DW,XW=(0,Ee.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),JW=["children","className","component","disablePointerEvents","disableTypography","position","variant"],HW=(0,Ce.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,lt.Z)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:t.palette.action.active},"filled"===n.variant&&(0,le.Z)({},"&.".concat(XW.positionStart,"&:not(.").concat(XW.hiddenLabel,")"),{marginTop:16}),"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),YW=n.forwardRef((function(e,t){var r=(0,Ie.Z)({props:e,name:"MuiInputAdornment"}),o=r.children,i=r.className,u=r.component,s=void 0===u?"div":u,c=r.disablePointerEvents,g=void 0!==c&&c,d=r.disableTypography,p=void 0!==d&&d,h=r.position,f=r.variant,C=(0,ge.Z)(r,JW),I=Ls()||{},m=f;f&&I.variant,I&&!m&&(m=I.variant);var v=(0,l.Z)({},r,{hiddenLabel:I.hiddenLabel,size:I.size,disablePointerEvents:g,position:h,variant:m}),b=function(e){var t=e.classes,n=e.disablePointerEvents,r=e.hiddenLabel,a=e.position,o=e.size,i=e.variant,l={root:["root",n&&"disablePointerEvents",a&&"position".concat((0,lt.Z)(a)),i,r&&"hiddenLabel",o&&"size".concat((0,lt.Z)(o))]};return(0,he.Z)(l,EW,t)}(v);return(0,a.jsx)(zs.Provider,{value:null,children:(0,a.jsx)(HW,(0,l.Z)({as:s,ownerState:v,className:(0,de.Z)(b.root,i),ref:t},C,{children:"string"!==typeof o||p?(0,a.jsxs)(n.Fragment,{children:["start"===h?DW||(DW=(0,a.jsx)("span",{className:"notranslate",children:"\u200b"})):null,o]}):(0,a.jsx)(Uy,{color:"text.secondary",children:o})}))})})),TW=function(e){e.user;var t=e.admin,r=w(),o=(0,n.useState)(10),l=(0,i.Z)(o,2),u=l[0],s=l[1],c=(0,n.useState)(["#","ID","Location","Length","Height","Width"]),g=(0,i.Z)(c,2),d=g[0],p=(g[1],(0,n.useState)(["fishpondId","location","length","height","width"])),h=(0,i.Z)(p,2),f=h[0],C=(h[1],(0,n.useState)([])),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,n.useState)([]),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=(0,n.useState)([]),S=(0,i.Z)(Z,2),x=S[0],G=S[1],R=(0,n.useState)(["".concat(r.pathname,"/edit"),"fishpondId"]),W=(0,i.Z)(R,2),V=W[0],F=(W[1],(0,n.useState)(!0)),N=(0,i.Z)(F,2),E=(N[0],N[1]),D=B(),X=(te(),(0,n.useState)(!0)),J=(0,i.Z)(X,2),H=J[0],Y=J[1];(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishpond/query"));case 3:return n=e.sent,e.next=6,n.json();case 6:(t=e.sent).ok&&(v(t.data),k(t.data),E(!1)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t=[];case 14:Y(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),(0,n.useEffect)((function(){s(Math.ceil(y.length/10)),G(y.slice(0,10))}),[y]);return(0,a.jsx)("div",{className:"container",children:t?H?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(FW(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:u,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){G(y.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,a.jsxs)("div",{className:"searchbar-container",children:[(0,a.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){D("".concat(r.pathname,"/add"))},children:"Add"}),(0,a.jsx)(HC,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=m.filter((function(e){return"".concat(e.fishpondId," ").concat(e.location," ").concat(e.length," ").concat(e.height," ").concat(e.width).toLowerCase().includes(t)}));k(n)},InputProps:{startAdornment:(0,a.jsx)(YW,{position:"start",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})}})]}),(0,a.jsx)(DZ,{accessor:f,header:d,data:x,link:V})]}):(0,a.jsx)(RW,{})})},MW=function(e){var t=e.admin,r=(e.user,w()),o=(0,n.useState)(10),l=(0,i.Z)(o,2),u=l[0],s=l[1],c=(0,n.useState)(["#","Fish Type","Last Update"]),g=(0,i.Z)(c,2),d=g[0],p=(g[1],(0,n.useState)(["fishtype","updatedAt"])),h=(0,i.Z)(p,2),f=h[0],C=(h[1],(0,n.useState)([])),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,n.useState)([]),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=(0,n.useState)([]),S=(0,i.Z)(Z,2),x=S[0],G=S[1],R=(0,n.useState)(["".concat(r.pathname,"/edit"),"fishtype"]),W=(0,i.Z)(R,2),V=W[0],F=(W[1],(0,n.useState)(!0)),N=(0,i.Z)(F,2),E=(N[0],N[1]),D=B(),X=(te(),(0,n.useState)(!0)),J=(0,i.Z)(X,2),H=J[0],Y=J[1];(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishtype/query"));case 3:return n=e.sent,e.next=6,n.json();case 6:(t=e.sent).ok&&(t.data=t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})),v(t.data),k(t.data),E(!1)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t=[];case 14:Y(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),(0,n.useEffect)((function(){s(Math.ceil(y.length/10)),G(y.slice(0,10))}),[y]);return(0,a.jsx)("div",{className:"container",children:t?H?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(FW(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:u,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(y.length),console.log(e.selected),G(y.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,a.jsxs)("div",{className:"searchbar-container",children:[(0,a.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){D("".concat(r.pathname,"/add"))},children:"Add"}),"   ",(0,a.jsx)(HC,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=m.filter((function(e){return"".concat(f.map((function(t,n){return e[t]+""}))).toLowerCase().includes(t)}));k(n)},InputProps:{startAdornment:(0,a.jsx)(YW,{position:"start",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})}})]}),(0,a.jsx)(DZ,{accessor:f,header:d,data:x,link:V})]}):(0,a.jsx)(RW,{})})},KW=function(e){var t=e.admin,r=e.user,o=w(),l=(0,n.useState)(10),u=(0,i.Z)(l,2),s=u[0],c=u[1],g=(0,n.useState)(["#","Fishpond ID","Period ID","Fish Type","Last Update"]),d=(0,i.Z)(g,2),p=d[0],h=(d[1],(0,n.useState)(["fishpond.fishpondId","periodId","fishtype.fishtype","updatedAt"])),f=(0,i.Z)(h,2),C=f[0],I=(f[1],(0,n.useState)([])),m=(0,i.Z)(I,2),v=m[0],b=m[1],A=(0,n.useState)([]),y=(0,i.Z)(A,2),k=y[0],Z=y[1],S=(0,n.useState)([]),x=(0,i.Z)(S,2),G=x[0],R=x[1],W=(0,n.useState)(["".concat(o.pathname,"/edit"),"periodId"]),V=(0,i.Z)(W,2),F=V[0],N=(V[1],(0,n.useState)(!0)),E=(0,i.Z)(N,2),D=(E[0],E[1]),X=B(),J=(te(),(0,n.useState)(!0)),H=(0,i.Z)(J,2),Y=H[0],T=H[1];(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period/query"));case 3:return n=e.sent,e.next=6,n.json();case 6:(t=e.sent).ok&&(t.data=t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})),b(t.data),Z(t.data),D(!1)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t=[];case 14:T(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),(0,n.useEffect)((function(){c(Math.ceil(k.length/10)),R(k.slice(0,10))}),[k]);return(0,a.jsx)("div",{className:"container",children:t||r?Y?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(FW(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:s,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(k.length),console.log(e.selected),R(k.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,a.jsxs)("div",{className:"searchbar-container",children:[(0,a.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){X("".concat(o.pathname,"/add"))},children:"Add"}),"  ",(0,a.jsx)(HC,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=v.filter((function(e){return"".concat(e.fishpond.fishpondId," ").concat(e.periodId," ").concat(e.fishtype.fishtype," ").concat(e.updatedAt).toLowerCase().includes(t)}));console.log(n),Z(n)},InputProps:{startAdornment:(0,a.jsx)(YW,{position:"start",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})}})]}),(0,a.jsx)(DZ,{accessor:C,header:p,data:G,link:F})]}):(0,a.jsx)(RW,{})})},PW=function(e){var t=e.admin,r=(e.user,w()),o=(0,n.useState)(10),l=(0,i.Z)(o,2),u=l[0],s=l[1],c=(0,n.useState)(["#","Sensor Type","Symbol"]),g=(0,i.Z)(c,2),d=g[0],p=(g[1],(0,n.useState)(["sensortype","unit"])),h=(0,i.Z)(p,2),f=h[0],C=(h[1],(0,n.useState)([])),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,n.useState)([]),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=(0,n.useState)([]),S=(0,i.Z)(Z,2),x=S[0],G=S[1],R=(0,n.useState)(["".concat(r.pathname,"/edit"),"sensortype"]),W=(0,i.Z)(R,2),V=W[0],F=(W[1],(0,n.useState)(!0)),N=(0,i.Z)(F,2),E=(N[0],N[1]),D=B(),X=(0,n.useState)(!0),J=(0,i.Z)(X,2),H=J[0],Y=J[1];(0,n.useEffect)((function(){j(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:return n=e.sent,e.prev=3,e.next=6,fetch("".concat("http://8.218.88.75:5000/","api/sensortype/query"),{headers:{token:"".concat(n)}});case 6:return r=e.sent,e.next=9,r.json();case 9:(t=e.sent).ok&&(v(t.data),k(t.data),E(!1)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),t=[];case 17:Y(!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})))()}),[]),(0,n.useEffect)((function(){s(Math.ceil(y.length/10)),G(y.slice(0,10))}),[y]);return(0,a.jsx)("div",{className:"container",children:t?H?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(FW(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:u,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(y.length),console.log(e.selected),G(y.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,a.jsxs)("div",{className:"searchbar-container",children:[(0,a.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){D("".concat(r.pathname,"/add"))},children:"Add"}),"  ",(0,a.jsx)(HC,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=m.filter((function(e){return"".concat(e.sensortype," ").concat(e.unit).toLowerCase().includes(t)}));console.log(n),k(n)},InputProps:{startAdornment:(0,a.jsx)(YW,{position:"start",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})}})]}),(0,a.jsx)(DZ,{accessor:f,header:d,data:x,link:V})]}):(0,a.jsx)(RW,{})})},zW=function(e){var t=e.admin,r=(e.user,(0,n.useState)(!0)),o=(0,i.Z)(r,2),l=(o[0],o[1],(0,n.useState)("")),u=(0,i.Z)(l,2),s=u[0],c=u[1],g=(0,n.useState)(""),d=(0,i.Z)(g,2),p=d[0],h=d[1],f=(0,n.useState)(""),C=(0,i.Z)(f,2),I=C[0],m=C[1],v=(0,n.useState)(""),b=(0,i.Z)(v,2),A=b[0],y=b[1],k=(0,n.useState)(""),Z=(0,i.Z)(k,2),S=Z[0],w=Z[1],B=te(),x=(0,n.useState)(!0),G=(0,i.Z)(x,2),R=G[0],W=G[1];return(0,n.useEffect)((function(){W(!1)}),[]),(0,a.jsx)("div",{className:"addpage",children:t?R?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=s&&""!=p&&""!=I&&""!=A?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishpond"),{method:"POST",headers:{token:"".concat(B),"Content-type":"application/json"},body:JSON.stringify({location:s,length:p,height:I,width:A})}).then((function(e){return e.json()}));case 3:t=e.sent,w(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("h2",{children:"Add Fishponds"}),S,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"location",value:s,label:"Location",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"length",value:p,label:"Length",variant:"outlined",onChange:function(e){return h(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"height",value:I,label:"Height",variant:"outlined",onChange:function(e){return m(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"height",value:A,label:"Width",variant:"outlined",onChange:function(e){return y(e.target.value)}})}),(0,a.jsx)("input",{className:"add",type:"submit"})]})}):(0,a.jsx)(RW,{})})},LW=function(e){var t=e.admin,r=(e.user,(0,n.useState)(!0)),o=(0,i.Z)(r,2),l=(o[0],o[1]),u=(0,n.useState)(""),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)(""),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=(0,n.useState)(""),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,n.useState)(""),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=(0,n.useState)(""),S=(0,i.Z)(Z,2),B=S[0],x=S[1],G=(0,n.useState)({}),R=(0,i.Z)(G,2),W=(R[0],R[1]),V=w().search,F=pl.parse(V).id,N=te(),E=(0,n.useState)(!0),D=(0,i.Z)(E,2),X=D[0],J=D[1];(0,n.useEffect)((function(){null!=F&&j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishpond/query?fishpondid=").concat(F)).then((function(e){return e.json()}));case 3:(t=e.sent).ok&&(g(t.data[0].location),f(t.data[0].length),v(t.data[0].height),k(t.data[0].width),W(t.data[0]),l(!1)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:J(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);return(0,a.jsx)("div",{className:"addpage",children:t?X?(0,a.jsx)(EZ,{}):(0,a.jsxs)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=h&&""!=m&&""!=y?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishpond/").concat(F),{method:"PUT",headers:{token:"".concat(N),"Content-type":"application/json"},body:JSON.stringify({location:c,length:h,height:m,width:y})}).then((function(e){return e.json()}));case 3:t=e.sent,x(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:[(0,a.jsx)("div",{}),(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("div",{}),(0,a.jsx)("h2",{children:"Edit Fishponds"}),B,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"id",value:F,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"location",value:c,label:"Location",variant:"outlined",onChange:function(e){return g(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"length",value:h,label:"Length",variant:"outlined",onChange:function(e){return f(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"height",value:m,label:"Height",variant:"outlined",onChange:function(e){return v(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"height",value:y,label:"Width",variant:"outlined",onChange:function(e){return k(e.target.value)}})}),(0,a.jsxs)("div",{className:"addbtn-container",children:[(0,a.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,a.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishpond/").concat(F),{method:"DELETE",headers:{token:"".concat(N),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,x(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})]}):(0,a.jsx)(RW,{})})},_W=function(e){e.user;var t=e.admin,r=(0,n.useState)(!0),o=(0,i.Z)(r,2),l=(o[0],o[1]),u=(0,n.useState)(""),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)(""),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=te(),I=(0,n.useState)(!0),m=(0,i.Z)(I,2),v=m[0],b=m[1];return(0,n.useEffect)((function(){j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/auth/check"),{method:"POST",headers:{token:C}}).then((function(e){return e.json()}));case 3:e.sent.ok&&l(!1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:b(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),(0,a.jsx)("div",{className:"addpage",children:t?v?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishtype"),{method:"POST",headers:{token:"".concat(C),"Content-type":"application/json"},body:JSON.stringify({fishtype:c})}).then((function(e){return e.json()}));case 3:t=e.sent,f(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("h2",{children:"Add Fish Type"}),h,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"fishtype",value:c,label:"Fish Type",variant:"outlined",onChange:function(e){return g(e.target.value)}})}),(0,a.jsx)("input",{className:"add",type:"submit"})]})}):(0,a.jsx)(RW,{})})},OW=function(e){var t=e.admin,r=(e.user,(0,n.useState)(!0)),o=(0,i.Z)(r,2),l=(o[0],o[1]),u=(0,n.useState)(""),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)(""),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=(0,n.useState)({}),I=(0,i.Z)(C,2),m=(I[0],I[1]),v=w().search,b=pl.parse(v).id,A=te(),y=(0,n.useState)(""),k=(0,i.Z)(y,2),Z=k[0],S=k[1],B=(0,n.useState)(!0),x=(0,i.Z)(B,2),G=x[0],R=x[1];(0,n.useEffect)((function(){null!=b&&j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishtype/admin/query?fishtype=").concat(b),{headers:{token:A}}).then((function(e){return e.json()}));case 3:(t=e.sent).ok&&(g(t.data[0].fishtype),S(t.data[0]._id),m(t.data[0]),l(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:R(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);return(0,a.jsx)("div",{className:"addpage",children:t?G?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishtype/").concat(Z),{method:"PUT",headers:{token:"".concat(A),"Content-type":"application/json"},body:JSON.stringify({fishtype:c})}).then((function(e){return e.json()}));case 3:t=e.sent,f(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("div",{}),(0,a.jsx)("h2",{children:"Edit Fishponds"}),h,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"objectid",value:Z,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"fishtype",value:c,label:"Fish Type",variant:"outlined",onChange:function(e){return g(e.target.value)}})}),(0,a.jsxs)("div",{className:"addbtn-container",children:[(0,a.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,a.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishtype/").concat(Z),{method:"DELETE",headers:{token:"".concat(A),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,f(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})}):(0,a.jsx)(RW,{})})},UW=function(e){var t=e.admin,r=e.user,o=(0,n.useState)(!0),l=(0,i.Z)(o,2),u=(l[0],l[1],(0,n.useState)("")),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)(""),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=(0,n.useState)(""),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,n.useState)(""),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=(0,n.useState)(""),S=(0,i.Z)(Z,2),w=S[0],B=S[1],x=te(),G=(0,n.useState)(!0),R=(0,i.Z)(G,2),W=R[0],V=R[1],F=(0,n.useState)([]),N=(0,i.Z)(F,2),E=N[0],D=N[1],X=(0,n.useState)([]),J=(0,i.Z)(X,2),H=J[0],Y=J[1],T={options:E,getOptionLabel:function(e){return e.fishpondId}},M={options:H,getOptionLabel:function(e){return e.fishtype}};return(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/fishpond/query")).then((function(e){return e.json()}));case 3:return(t=e.sent).ok&&D(t.data),e.next=7,fetch("".concat("http://8.218.88.75:5000/","api/fishtype/query")).then((function(e){return e.json()}));case 7:(n=e.sent).ok&&Y(n.data),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:V(!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[]),(0,a.jsx)("div",{className:"addpage",children:t||r?W?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=h&&""!=m?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period"),{method:"POST",headers:{token:"".concat(x),"Content-type":"application/json"},body:JSON.stringify({fishpondId:c,fishtype:h,start_quantity:m,alert_email:y})}).then((function(e){return e.json()}));case 3:t=e.sent,B(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("h2",{children:"Add Periods"}),w,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(Jp,se(se({},T),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:c,onInputChange:function(e,t){g(t)},renderInput:function(e){return(0,a.jsx)(HC,se(se({},e),{},{label:"Fishpond ID",variant:"outlined"}))}}))}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(Jp,se(se({},M),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:h,onInputChange:function(e,t){f(t)},renderInput:function(e){return(0,a.jsx)(HC,se(se({},e),{},{label:"Fish Type",variant:"outlined"}))}}))}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"email",type:"email",value:y,label:"Email",variant:"outlined",onChange:function(e){return k(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"username",value:m,label:"Quantity",variant:"outlined",onChange:function(e){return v(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group"}),(0,a.jsx)("input",{className:"add",type:"submit"})]})}):(0,a.jsx)(RW,{})})},jW=function(e){var t=e.user,r=e.admin,o=(0,n.useState)(!0),l=(0,i.Z)(o,2),u=(l[0],l[1]),s=(0,n.useState)(""),c=(0,i.Z)(s,2),g=c[0],d=c[1],p=(0,n.useState)({}),h=(0,i.Z)(p,2),f=(h[0],h[1]),C=w().search,I=pl.parse(C).id,m=te(),v=(0,n.useState)(""),b=(0,i.Z)(v,2),A=b[0],y=b[1],k=(0,n.useState)(""),Z=(0,i.Z)(k,2),S=Z[0],B=Z[1],x=(0,n.useState)(""),G=(0,i.Z)(x,2),R=G[0],W=G[1],V=(0,n.useState)(""),F=(0,i.Z)(V,2),N=F[0],E=F[1],D=(0,n.useState)(!1),X=(0,i.Z)(D,2),J=X[0],H=X[1],Y=(0,n.useState)(""),T=(0,i.Z)(Y,2),M=T[0],K=T[1],P=(0,n.useState)(""),z=(0,i.Z)(P,2),L=z[0],_=z[1],O=(0,n.useState)(!0),U=(0,i.Z)(O,2),Q=U[0],$=U[1];(0,n.useEffect)((function(){null!=I&&j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period/admin/query?periodid=").concat(I),{headers:{token:m}}).then((function(e){return e.json()}));case 3:return(t=e.sent).ok&&(W(t.data[0].fishtype.fishtype),y(t.data[0]._id),B(t.data[0].periodId),E(t.data[0].start_quantity),H(t.data[0].isEnd),_(t.data[0].alert_email),f(t.data[0]),u(!1)),e.next=7,fetch("".concat("http://8.218.88.75:5000/","api/fishtype/query")).then((function(e){return e.json()}));case 7:(n=e.sent).ok&&ae(n.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:$(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[]);var ee=(0,n.useState)([]),ne=(0,i.Z)(ee,2),re=ne[0],ae=ne[1],oe={options:re,getOptionLabel:function(e){return e.fishtype}};return(0,a.jsx)("div",{className:"addpage",children:r||t?Q?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=S&&""!=R&&""!=N&&(!0===J&&""!=M||!1===J)?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period/").concat(A),{method:"PUT",headers:{token:"".concat(m),"Content-type":"application/json"},body:JSON.stringify({isEnd:J,fishtype:R,start_quantity:N,end_quantity:M})}).then((function(e){return e.json()}));case 3:t=e.sent,d(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("div",{}),(0,a.jsx)("h2",{children:"Edit Period"}),g,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"periodid",label:"periodid",variant:"outlined",value:S,readOnly:!0})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(Jp,se(se({},oe),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:R,onInputChange:function(e,t){W(t)},renderInput:function(e){return(0,a.jsx)(HC,se(se({},e),{},{label:"Fish Type",variant:"outlined"}))}}))}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"startquantity",name:"startquantity",value:N,label:"Start Quantity",variant:"outlined",onChange:function(e){return E(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"email",name:"email",type:"email",value:L,label:"Email",variant:"outlined",onChange:function(e){return _(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(tk,{control:(0,a.jsx)(sb,{checked:J,onChange:function(e){return H(!J)}}),label:"Ended"})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"endquantity",name:"endquantity",value:M,label:"End Quantity",variant:"outlined",onChange:function(e){return K(e.target.value)}})}),(0,a.jsxs)("div",{className:"addbtn-container",children:[(0,a.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,a.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period/").concat(A),{method:"DELETE",headers:{token:"".concat(m),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,d(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})}):(0,a.jsx)(RW,{})})},QW=function(e){var t=e.admin,r=(e.user,(0,n.useState)(!0)),o=(0,i.Z)(r,2),l=(o[0],o[1]),u=(0,n.useState)(""),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)({}),p=(0,i.Z)(d,2),h=(p[0],p[1]),f=w().search,C=pl.parse(f).id,I=te(),m=(0,n.useState)(""),v=(0,i.Z)(m,2),b=v[0],A=v[1],y=(0,n.useState)(""),k=(0,i.Z)(y,2),Z=k[0],S=k[1],B=(0,n.useState)(""),x=(0,i.Z)(B,2),G=x[0],R=x[1],W=(0,n.useState)(""),V=(0,i.Z)(W,2),F=V[0],N=V[1],E=(0,n.useState)(!0),D=(0,i.Z)(E,2),X=D[0],J=D[1];(0,n.useEffect)((function(){null!=C&&j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensortype/admin/query?sensortype=").concat(C),{headers:{token:I}}).then((function(e){return e.json()}));case 3:(t=e.sent).ok&&(A(t.data[0]._id),R(t.data[0].unit),S(t.data[0].sensortype),N(t.data[0].abbreviation),h(t.data[0]),l(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:J(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);return(0,a.jsx)("div",{className:"addpage",children:t?X?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=Z&&""!=G?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(" ".concat("http://8.218.88.75:5000/","api/sensortype/").concat(b),{method:"PUT",headers:{token:"".concat(I),"Content-type":"application/json"},body:JSON.stringify({unit:G,sensortype:Z,abbreviation:F})}).then((function(e){return e.json()}));case 3:t=e.sent,g(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("div",{}),(0,a.jsx)("h2",{children:"Edit Sensors"}),c,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"objectid",value:b,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"sensortype",value:Z,label:"Sensor Type",variant:"outlined",onChange:function(e){return S(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"abbreviation",value:F,label:"Abbreviation",variant:"outlined",onChange:function(e){return N(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"unit",value:G,label:"Unit (Symbol)",variant:"outlined",onChange:function(e){return R(e.target.value)}})}),(0,a.jsxs)("div",{className:"addbtn-container",children:[(0,a.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,a.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensortype/").concat(b),{method:"DELETE",headers:{token:"".concat(I),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,g(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})}):(0,a.jsx)(RW,{})})},qW=function(e){var t=e.admin,r=(e.user,(0,n.useState)(!0)),o=(0,i.Z)(r,2),l=(o[0],o[1],(0,n.useState)("")),u=(0,i.Z)(l,2),s=u[0],c=u[1],g=(0,n.useState)(""),d=(0,i.Z)(g,2),p=d[0],h=d[1],f=(0,n.useState)(""),C=(0,i.Z)(f,2),I=C[0],m=C[1],v=(0,n.useState)(""),b=(0,i.Z)(v,2),A=b[0],y=b[1],k=te(),Z=(0,n.useState)(!0),S=(0,i.Z)(Z,2),w=S[0],B=S[1];return(0,n.useEffect)((function(){B(!1)}),[]),(0,a.jsx)("div",{className:"addpage",children:t?w?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=p&&""!=s&&""!=I?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensortype"),{method:"POST",headers:{token:"".concat(k),"Content-type":"application/json"},body:JSON.stringify({sensortype:s,abbreviation:I,unit:p})}).then((function(e){return e.json()}));case 3:t=e.sent,y(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("h2",{children:"Add Sensors"}),A,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"sensortype",value:s,label:"Sensor Type",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"abbreviation",value:I,label:"Abbreviation",variant:"outlined",onChange:function(e){return m(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"unit",value:p,label:"Unit (Symbol)",variant:"outlined",onChange:function(e){return h(e.target.value)}})}),(0,a.jsx)("input",{className:"add",type:"submit"})]})}):(0,a.jsx)(RW,{})})},$W=__webpack_require__(3518),eV=function(){function e(t,n){iu(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return uu(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),tV=function(){function e(){iu(this,e)}return uu(e,[{key:"refCount",value:function(e){return nV("refCount")}},{key:"incRef",value:function(e){return nV("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return nV("time")}},{key:"read",value:function(e){return nV("read")}},{key:"readSync",value:function(e){return nV("readSync")}},{key:"readToGPU",value:function(e,t){return nV("readToGPU")}},{key:"numDataIds",value:function(){return nV("numDataIds")}},{key:"disposeData",value:function(e,t){return nV("disposeData")}},{key:"write",value:function(e,t,n){return nV("write")}},{key:"move",value:function(e,t,n,r,a){return nV("move")}},{key:"memory",value:function(){return nV("memory")}},{key:"floatPrecision",value:function(){return nV("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return nV("dispose")}}]),e}();function nV(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function rV(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,iV(e,--t,n)}function aV(e,t,n){return Math.max(e,Math.min(t,n))}function oV(e){return e%2===0?e:e+1}function iV(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function lV(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function uV(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function sV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";uV(pV(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function cV(e){uV(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function gV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||ZV(e)&&!n)for(var r=0;r<e.length;++r)gV(e[r],t,n);else t.push(e);return t}function dV(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function pV(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function hV(e){return e%1===0}function fV(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function CV(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function IV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var o=0;!function i(){if(e())r();else{o++;var l=t(o);null!=n&&o>=n?a():setTimeout(i,l)}}()}))}function mV(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function vV(e,t){var n=t.length;return uV((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),uV(e.every((function(e){return hV(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function bV(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:vV(t,e).sort(),i=0,l=0;l<e.length;++l){if(null!=o){if(o[i]===l&&1!==e[l])throw new Error("Can't squeeze axis ".concat(l," since its dim '").concat(e[l],"' is not 1"));(null==o[i]||o[i]>l)&&1===e[l]&&(n.push(e[l]),r.push(l)),o[i]<=l&&i++}1!==e[l]&&(n.push(e[l]),r.push(l))}return{newShape:n,keptDims:r}}function AV(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function yV(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function kV(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function ZV(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function SV(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function wV(e){return"string"===typeof e||e instanceof String}function BV(e){return"number"===typeof e}function xV(e){return Array.isArray(e)?xV(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":BV(e)?"float32":wV(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function GV(e){return!!(e&&e.constructor&&e.call&&e.apply)}function RV(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function WV(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function VV(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var o=t[0]*(r?2:1),i=0;i<o;i++)a[i]=n[e+i];else for(var l=t[0],u=t.slice(1),s=u.reduce((function(e,t){return e*t}))*(r?2:1),c=0;c<l;c++)a[c]=VV(e+c*s,u,n,r);return a}function FV(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return VV(0,e,t,n)}function NV(e,t){for(var n=EV(e,t),r=0;r<n.length;r++)n[r]=1;return n}function EV(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function DV(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return FV(e,new Float32Array(n));if("int32"===t)return FV(e,new Int32Array(n));if("bool"===t)return FV(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function XV(e){e.forEach((function(t){uV(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function JV(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function HV(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function YV(e){return e&&e.then&&"function"===typeof e.then}var TV="tfjsflags",MV=function(){function e(t){iu(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=KV,this.populateURLFlags()}return uu(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(zV().getBool("IS_TEST")||zV().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];zV().getBool("IS_TEST")||zV().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(YV(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(TV in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=(0,i.Z)(n,2),a=r[0],o=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,o)}))}}}]),e}();function KV(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return PV(t,r[0],r[1]),r.join("=")})),t}function PV(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function zV(){return _V}var LV,_V=null;function OV(){if(null==LV){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof __webpack_require__.g)e=__webpack_require__.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}LV=e}return LV}function UV(e,t){var n=function(){var e=OV();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var jV="Abs",QV="Acos",qV="Acosh",$V="Add",eF="AddN",tF="All",nF="Any",rF="ArgMax",aF="ArgMin",oF="Asin",iF="Asinh",lF="Atan",uF="Atanh",sF="Atan2",cF="AvgPool",gF="AvgPoolGrad",dF="AvgPool3D",pF="AvgPool3DGrad",hF="BatchMatMul",fF="BatchToSpaceND",CF="Bincount",IF="BroadcastArgs",mF="Cast",vF="Ceil",bF="ClipByValue",AF="Complex",yF="ComplexAbs",kF="Concat",ZF="Conv2D",SF="Conv2DBackpropFilter",wF="Conv2DBackpropInput",BF="Conv3D",xF="Conv3DBackpropFilterV2",GF="Conv3DBackpropInputV2",RF="Cos",WF="Cosh",VF="Cumprod",FF="Cumsum",NF="CropAndResize",EF="DenseBincount",DF="DepthToSpace",XF="DepthwiseConv2dNative",JF="DepthwiseConv2dNativeBackpropFilter",HF="DepthwiseConv2dNativeBackpropInput",YF="Diag",TF="Dilation2D",MF="Dilation2DBackpropInput",KF="Dilation2DBackpropFilter",PF="RealDiv",zF="Einsum",LF="Elu",_F="EluGrad",OF="Erf",UF="Equal",jF="Exp",QF="ExpandDims",qF="Expm1",$F="FFT",eN="Fill",tN="FlipLeftRight",nN="Floor",rN="FloorDiv",aN="FusedBatchNorm",oN="GatherV2",iN="GatherNd",lN="Greater",uN="GreaterEqual",sN="Identity",cN="IFFT",gN="Imag",dN="IsFinite",pN="IsInf",hN="IsNan",fN="LeakyRelu",CN="Less",IN="LessEqual",mN="LinSpace",vN="Log",bN="Log1p",AN="LogicalAnd",yN="LogicalNot",kN="LogicalOr",ZN="LRN",SN="LRNGrad",wN="Max",BN="Maximum",xN="MaxPool",GN="MaxPoolGrad",RN="MaxPool3D",WN="MaxPool3DGrad",VN="MaxPoolWithArgmax",FN="Mean",NN="Min",EN="Minimum",DN="MirrorPad",XN="Mod",JN="Multinomial",HN="Multiply",YN="Neg",TN="NotEqual",MN="NonMaxSuppressionV3",KN="NonMaxSuppressionV4",PN="NonMaxSuppressionV5",zN="OnesLike",LN="OneHot",_N="Pack",ON="PadV2",UN="Pow",jN="Prelu",QN="Prod",qN="Range",$N="Real",eE="Reciprocal",tE="Relu",nE="Reshape",rE="ResizeNearestNeighbor",aE="ResizeNearestNeighborGrad",oE="ResizeBilinear",iE="ResizeBilinearGrad",lE="Relu6",uE="Reverse",sE="Round",cE="Rsqrt",gE="ScatterNd",dE="Select",pE="Selu",hE="Slice",fE="Sin",CE="Sinh",IE="Sign",mE="Sigmoid",vE="Softplus",bE="Sqrt",AE="Sum",yE="SpaceToBatchND",kE="SplitV",ZE="Softmax",SE="SparseFillEmptyRows",wE="SparseReshape",BE="SparseSegmentMean",xE="SparseSegmentSum",GE="SparseToDense",RE="SquaredDifference",WE="Square",VE="StridedSlice",FE="StringNGrams",NE="StringSplit",EE="StringToHashBucketFast",DE="Sub",XE="Tan",JE="Tanh",HE="Tile",YE="TopK",TE="Transform",ME="Transpose",KE="Unique",PE="Unpack",zE="UnsortedSegmentSum",LE="ZerosLike",_E="Step",OE="RotateWithOffset",UE="_FusedMatMul",jE="FusedConv2D",QE="FusedDepthwiseConv2D";function qE(){var e;zV().getBool("IS_TEST")||zV().getBool("PROD")||(e=console).warn.apply(e,arguments)}var $E=UV("kernelRegistry",(function(){return new Map})),eD=UV("gradRegistry",(function(){return new Map}));function tD(e,t){var n=iD(e,t);return $E.get(n)}function nD(e){return eD.get(e)}function rD(e){for(var t=$E.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var l=(0,i.Z)(o,2),u=l[0],s=l[1],c=u.split("_");(0,i.Z)(c,1)[0]===e&&n.push(s)}return n}function aD(e){var t=e.kernelName,n=e.backendName,r=iD(t,n);$E.has(r)&&qE("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),$E.set(r,e)}function oD(e){var t=e.kernelName;eD.has(t)&&zV().getBool("DEBUG")&&qE("Overriding the gradient for '".concat(t,"'")),eD.set(t,e)}function iD(e,t){return"".concat(t,"_").concat(e)}var lD=__webpack_require__(8987),uD=__webpack_require__.n(lD)()||lD;function sD(e){return uD.fromString(e,!0,16)}var cD=sD("c3a5c85c97cb3127"),gD=sD("b492b66fbe98f273"),dD=sD("9ae16a3b2f90404f");function pD(e){return e.xor(e.shru(47))}function hD(e,t,n){var r=e.slice(t,t+n);return uD.fromBytes(Array.from(r),!0,!0)}function fD(e,t){return hD(e,t,8)}function CD(e,t){return hD(e,t,4)}function ID(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function mD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sD("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function vD(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=ID(o.add(a).add(r),21);var i=a;return a=(a=a.add(t)).add(n),o=o.add(ID(a,44)),[a.add(r),o.add(i)]}(fD(e,t),fD(e,t+8),fD(e,t+16),fD(e,t+24),n,r)}function bD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=dD.add(2*t),r=fD(e,0).add(dD),a=fD(e,t-8),o=ID(a,37).mul(n).add(r),i=ID(r,25).add(a).mul(n);return mD(o,i,n)}if(t>=4){var l=dD.add(2*t),u=CD(e,0);return mD(u.shl(3).add(t),CD(e,t-4),l)}if(t>0){var s=e[0],c=e[t>>1],g=e[t-1],d=s+(c<<8),p=t+(g<<2);return pD(dD.mul(d).xor(cD.mul(p))).mul(dD)}return dD}function AD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=dD.add(2*t),r=fD(e,0).mul(gD),a=fD(e,8),o=fD(e,t-8).mul(n),i=fD(e,t-16).mul(dD);return mD(ID(r.add(a),43).add(ID(o,30)).add(i),r.add(ID(a.add(dD),18)).add(o),n)}function yD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=dD.add(2*t),r=fD(e,0).mul(dD),a=fD(e,8),o=fD(e,t-8).mul(n),i=fD(e,t-16).mul(dD),l=ID(r.add(a),43).add(ID(o,30)).add(i),u=mD(l,r.add(ID(a.add(dD),18)).add(o),n),s=fD(e,16).mul(n),c=fD(e,24),g=l.add(fD(e,t-32)).mul(n),d=u.add(fD(e,t-24)).mul(n);return mD(ID(s.add(c),43).add(ID(g,30)).add(d),s.add(ID(c.add(r),18)).add(g),n)}function kD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=uD.fromNumber(81,!0);if(t<=32)return t<=16?bD(e,t):AD(e,t);if(t<=64)return yD(e,t);var r=n,a=n.mul(gD).add(113),o=pD(a.mul(dD).add(113)).mul(dD),i=[uD.UZERO,uD.UZERO],l=[uD.UZERO,uD.UZERO];r=r.mul(dD).add(fD(e,0));var u=0,s=64*(t-1>>6),c=s+(t-1&63)-63;do{r=ID(r.add(a).add(i[0]).add(fD(e,u+8)),37).mul(gD),a=ID(a.add(i[1]).add(fD(e,u+48)),42).mul(gD),r=r.xor(l[1]),a=a.add(i[0]).add(fD(e,u+40)),o=ID(o.add(l[0]),33).mul(gD),i=vD(e,u,i[1].mul(gD),r.add(l[0])),l=vD(e,u+32,o.add(l[1]),a.add(fD(e,u+16)));var g=[r,o];o=g[0],r=g[1],u+=64}while(u!==s);var d=gD.add(o.and(255).shl(1));u=c,l[0]=l[0].add(t-1&63),i[0]=i[0].add(l[0]),l[0]=l[0].add(i[0]),r=ID(r.add(a).add(i[0]).add(fD(e,u+8)),37).mul(d),a=ID(a.add(i[1]).add(fD(e,u+48)),42).mul(d),r=r.xor(l[1].mul(9)),a=a.add(i[0].mul(9).add(fD(e,u+40))),o=ID(o.add(l[0]),33).mul(d),i=vD(e,u,i[1].mul(d),r.add(l[0])),l=vD(e,u+32,o.add(l[1]),a.add(fD(e,u+16)));var p=[r,o];return o=p[0],r=p[1],mD(mD(i[0],l[0],d).add(pD(a).mul(cD)).add(o),mD(i[1],l[1],d).add(r),d)}function ZD(e,t){return"string"===t?BD(e):SD([e],t)}function SD(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=gV(e)),zV().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function wD(){return zV().platform.now()}function BD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",zV().platform.encode(e,t)}function xD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",zV().platform.decode(e,t)}var GD=function(){function e(t,n){iu(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new RD)}return uu(e,[{key:"profileKernel",value:function(e,t,n){var r,a,o=function(){r=n()},i=wD();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();var l,u=ta(r);try{for(u.s();!(l=u.n()).done;){l.value.dataSync()}}catch(g){u.e(g)}finally{u.f()}a=Promise.resolve({kernelMs:wD()-i})}if(zV().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var s=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},c=0;c<r.length;c++)s(c);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();var RD=function(){function e(){iu(this,e)}return uu(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"===typeof r?CV("".concat(r,"ms"),9):r.error,l=CV(e,25),u=t.rank,s=t.size,c=CV(t.shape.toString(),14),g="";for(var d in a){var p=a[d];if(null!=p){var h=p.shape||t.shape,f=h.length;g+="".concat(d,": ").concat(f,"D ").concat(f>0?h:""," ")}}console.log("%c".concat(l,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(c,"\t%c").concat(s,"\t%c").concat(g,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function WD(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var l=e[i],u=l.inputs;for(var s in u){for(var c=u[s],g=!1,d=0;d<t.length;d++)if(r[c.id]){l.outputs.forEach((function(e){return r[e.id]=!0})),g=!0,a[l.id]=!0;break}if(g)break}}var p={};p[n.id]=!0;for(var h={},f=e.length-1;f>=0;f--)for(var C=e[f],I=C.inputs,m=0;m<C.outputs.length;m++)if(p[C.outputs[m].id]){for(var v in I)p[I[v].id]=!0,h[C.id]=!0;break}for(var b=[],A=0;A<e.length;A++){var y=e[A];if(a[y.id]&&h[y.id]){var k={};for(var Z in y.inputs){var S=y.inputs[Z];r[S.id]&&(k[Z]=S)}var w=Object.assign({},y);w.inputs=k,w.outputs=y.outputs,b.push(w)}}return b}function VD(e,t,n,r){for(var a=function(a){var o=t[a],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));var l=o.gradient(i),u=function(t){if(!(t in l))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(l),"."));var a=n((function(){return l[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var i=o.inputs[t];if(!pV(a.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=a;else{var u=e[i.id];e[i.id]=r(u,a),u.dispose()}};for(var s in o.inputs)u(s)},o=t.length-1;o>=0;o--)a(o)}function FD(e,t,n,r){var a=WV(t),o=function(e,t,n,r){var a=dV(t),o=r[r.length-1],i=new Array(o).fill(0),l=t.length,u="complex64"===n?XD(e):e;if(l>1)for(var s=0;s<a/o;s++)for(var c=s*o,g=0;g<o;g++)i[g]=Math.max(i[g],ND(u[c+g],0,n).length);return i}(e,t,n,a),i=t.length,l=DD(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(l.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function ND(e,t,n){return CV(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):wV(e)?"'".concat(e,"'"):"bool"===n?ED(e):parseFloat(e.toFixed(7)).toString(),t)}function ED(e){return 0===e?"false":"true"}function DD(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,l=t[0],u=t.length;if(0===u){if("complex64"===n){var s=XD(e);return[ND(s[0],0,n)]}return"bool"===n?[ED(e[0])]:[e[0].toString()]}if(1===u){if(l>20){var c=3*i,g=Array.from(e.slice(0,c)),d=Array.from(e.slice((l-3)*i,l*i));return"complex64"===n&&(g=XD(g),d=XD(d)),["["+g.map((function(e,t){return ND(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return ND(e,a[l-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?XD(e):Array.from(e);return["["+p.map((function(e,t){return ND(e,a[t],n)})).join(", ")+"]"]}var h=t.slice(1),f=r.slice(1),C=r[0]*i,I=[];if(l>20){for(var m=0;m<3;m++){var v=m*C,b=v+C;I.push.apply(I,(0,Ae.Z)(DD(e.slice(v,b),h,n,f,a,!1)))}I.push("...");for(var A=l-3;A<l;A++){var y=A*C,k=y+C;I.push.apply(I,(0,Ae.Z)(DD(e.slice(y,k),h,n,f,a,A===l-1)))}}else for(var Z=0;Z<l;Z++){var S=Z*C,w=S+C;I.push.apply(I,(0,Ae.Z)(DD(e.slice(S,w),h,n,f,a,Z===l-1)))}var B=2===u?",":"";I[0]="["+I[0]+B;for(var x=1;x<I.length-1;x++)I[x]=" "+I[x]+B;for(var G=",\n",R=2;R<u;R++)G+="\n";return I[I.length-1]=" "+I[I.length-1]+"]"+(o?"":G),I}function XD(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var JD=function(){function e(t,n,r){var a=this;if(iu(this,e),this.dtype=n,this.shape=t.slice(),this.size=dV(t),null!=r){var o=r.length;uV(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||yV(n,this.size),this.strides=WV(t)}return uu(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),uV(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var l="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(l)}r++}for(var u=t[t.length-1],s=0;s<t.length-1;++s)u+=this.strides[s]*t[s];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return HD().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),HD=null,YD=null;var TD=function(){function e(t,n,r,a){iu(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=dV(t),this.strides=WV(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return uu(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",YD.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return YD.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",FV(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return FV(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=HD().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return xD(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),HD().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=HD().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return xD(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,HD().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(HD().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return YD.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),YD.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return FD(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),YD.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),HD().makeVariable(this,e,t,n)}}]),e}();function MD(){return UV("Tensor",(function(){return TD}))}Object.defineProperty(TD,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),MD();var KD,PD,zD,LD,_D,OD=function(e){su(n,e);var t=hu(n);function n(e,r,a,o){var i;return iu(this,n),(i=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,i.name=a,i}return uu(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!pV(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));HD().disposeTensor(this),this.dataId=e.dataId,HD().incRef(this,null)}},{key:"dispose",value:function(){HD().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(TD);Object.defineProperty(OD,Symbol.hasInstance,{value:function(e){return e instanceof TD&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(KD||(KD={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(PD||(PD={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(zD||(zD={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(LD||(LD={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(_D||(_D={}));var UD={float32:LD,int32:PD,bool:zD,complex64:_D};function jD(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return UD[e][t]}function QD(e){return jD(e,"int32")}function qD(e,t){if(e.dtype===t.dtype)return[e,t];var n=jD(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function $D(e,t){return t.some((function(t){return t.id===e.id}))}function eX(e){var t=[];return tX(e,t,new Set),t}function tX(e,t,n){if(null!=e)if(e instanceof TD)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var o in a){var i=a[o];n.has(i)||(n.add(i),tX(i,t,n))}}}function nX(e){return null!=e.kernelName}var rX=function(){function e(){iu(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return uu(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),aX=function(){function e(t){iu(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new rX}return uu(e,[{key:"ready",value:function(){var e=j(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(qE("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=j(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new GD(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;rD(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;rD(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof tV||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,qE("Initialization of backend ".concat(e," failed")),qE(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(i){return qE("Initialization of backend ".concat(e," failed")),qE(i.stack||i.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=uX.runKernel(sN,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return uX.runKernel(mF,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=tD(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),l=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var s=nX(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(nX(e)){var c=e.kernelName,g=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var p=tD(c,this.backendName);uV(null!=p,(function(){return"Cannot find registered kernel '".concat(c,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:g,attrs:d,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(i){var l=a.getTensorsForGradient(c,g,n);o=a.saveTensorsForBackwardMode(l)}return n}}else{var h=e.forwardFunc,f=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,f)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(s,e,t),t}}var C,I=e.inputs,m=e.attrs,v=nX(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(C=a.profiler.profileKernel(s,I,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(C),t=C.outputs):t=n()})),i&&this.addTapeNode(s,I,t,v,o,m),this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-l,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(I).map((function(e){return null!=I[e]?I[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:C.timeMs,extraInfo:C.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=nD(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(uV(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var l=n.filter((function(e,t){return i[t]}));return a.concat(l)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&wV(e[0])&&(a=e.map((function(e){return BD(e)})));var o=r.write(a,t,n),i=new TD(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var l=this.state.tensorInfo.get(o),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-l.bytes,l.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new TD(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new OD(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*SV(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof OD||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*SV(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=j(q().mark((function e(t){var n,r,a,o,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,Ae.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=ta(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((o=a.n()).done){e.next=24;break}return i=o.value,e.next=18,i.kernelTimeMs;case 18:return i.kernelTimeMs=e.sent,e.next=21,i.extraInfo;case 21:i.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=nD(e);null!=u&&(r=u.gradFunc),null!=r&&(l.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=EV(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(l)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=eX(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(uV(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));uV(o instanceof TD,(function(){return"The result y returned by f() must be a tensor."}));var i=WD(this.state.activeTape,t,o);if(!a&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?oX(o.shape):n,VD(e,i,(function(e){return r.tidy(e)}),sX);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=ta(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:o,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return uV(GV(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;uV(r.every((function(e){return e instanceof TD})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};r.forEach((function(e,t){i[t]=e}));var l=function(t,n){return uV((o=e.apply(void 0,[].concat(r,[n]))).value instanceof TD,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),uV(GV(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},u=function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];uV(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),uV(a.every((function(e){return e instanceof TD})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i};return t.runKernelFunc({forwardFunc:l,backwardsFunc:u,inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=j(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wD(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=wD()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new rX,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function oX(e){var t=NV(dV(e),"float32");return uX.makeTensor(t,e,"float32")}function iX(){var e=OV();if(null==e._tfengine){var t=new MV(e);e._tfengine=new aX(t)}return function(e){_V=e}(e._tfengine.ENV),HD=function(){return e._tfengine},e._tfengine}aX.nextTensorId=0,aX.nextVariableId=0;var lX,uX=iX();function sX(e,t){var n={a:e,b:t};return uX.runKernel($V,n)}function cX(e){if(void 0!==lX)return lX;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function gX(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var dX=zV();function pX(e,t){var n=e;if(ZV(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||ZV(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&zV().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&hX(e,r,[]),r}function hX(e,t,n){if(n=n||[],Array.isArray(e)||ZV(e)){uV(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),uV(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)hX(e[a],r,n.concat(a))}else uV(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function fX(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function CX(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof TD)return fX(r,e.dtype,t,n),e;var a=xV(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),fX(r,a,t,n),null==e||!ZV(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(o,"'"))}var i=pX(e,a);ZV(e)||Array.isArray(e)||(e=[e]);var l=!0,u="string"!==a?SD(e,a):gV(e,[],l);return uX.makeTensor(u,i,a)}function IX(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return CX(e,"".concat(t,"[").concat(a,"]"),n,r)}))}dX.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),dX.registerFlag("IS_BROWSER",(function(){return gX()})),dX.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),dX.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),dX.registerFlag("PROD",(function(){return!1})),dX.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return dX.getBool("DEBUG")})),dX.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),dX.registerFlag("IS_TEST",(function(){return!1})),dX.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),dX.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),dX.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));function mX(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){uX.startScope(n);try{var e=r.apply(void 0,arguments);return YV(e)&&console.error("Cannot return a Promise inside of tidy."),uX.endScope(e),e}catch(t){throw uX.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var vX=mX({complex_:function(e,t){var n=CX(e,"real","complex"),r=CX(t,"imag","complex");sV(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return uX.runKernel(AF,a)}});function bX(e,t,n,r){if(null==r&&(r=xV(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ZV(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){XV(t);var a=dV(t),o=dV(n);uV(a===o,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(o)}));for(var i=0;i<n.length;++i){var l=n[i],u=i!==n.length-1||l!==dV(t.slice(i));uV(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return ZV(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?SD(e,r):gV(e,[],!0),uX.makeTensor(e,t,r)}function AX(e,t,n){return bX(e,t,pX(e,n),n)}var yX={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function kX(e,t){return ZX.apply(this,arguments)}function ZX(){return ZX=j(q().mark((function e(t,n){var r,a,o,i,l,u;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],o=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),i=function(e){var i=o[e],l=Array.isArray(t)?t[e].tensor:t[i];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype&&"complex64"!==l.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(l.dtype));var u={name:i,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var s=new Promise(function(){var e=j(q().mark((function e(t){var n,r,a,o,i,u,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),o=0,i=0;i<n.length;i++)u=n[i],s=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(s,o),o+=4,a.set(u,o),o+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(s)}else a.push(l.data());null!=n&&(u.group=n),r.push(u)},l=0;l<o.length;++l)i(l);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:wX(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),ZX.apply(this,arguments)}function SX(e,t){var n,r,a={},o=0,i=ta(t);try{for(i.s();!(r=i.n()).done;){var l=r.value,u=l.name,s=l.dtype,c=l.shape,g=dV(c),d=void 0;if("quantization"in l){var p=l.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(l.name," with quantization ").concat(p.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(l.name," has unknown ")+"quantization dtype ".concat(p.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==s)throw new Error("Weight ".concat(l.name," is quantized with ").concat(p.dtype," ")+"which only supports weights of type float32 not ".concat(s,"."))}var h=yX[p.dtype],f=e.slice(o,o+g*h),C="uint8"===p.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===s)if("uint8"===p.dtype||"uint16"===p.dtype){d=new Float32Array(C.length);for(var I=0;I<C.length;I++){var m=C[I];d[I]=m*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type float32.");void 0===n&&(n=XX()),d=n(C)}else{if("int32"!==s)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(s));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type int32.");d=new Int32Array(C.length);for(var v=0;v<C.length;v++){var b=C[v];d[v]=Math.round(b*p.scale+p.min)}}o+=g*h}else if("string"===s){var A=dV(l.shape);d=[];for(var y=0;y<A;y++){var k=new Uint32Array(e.slice(o,o+4))[0];o+=4;var Z=new Uint8Array(e.slice(o,o+k));d.push(Z),o+=k}}else{var S=yX[s],w=e.slice(o,o+g*S);if("float32"===s)d=new Float32Array(w);else if("int32"===s)d=new Int32Array(w);else if("bool"===s)d=new Uint8Array(w);else{if("complex64"!==s)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(s));d=new Float32Array(w);for(var B=new Float32Array(d.length/2),x=new Float32Array(d.length/2),G=0;G<B.length;G++)B[G]=d[2*G],x[G]=d[2*G+1];var R=AX(B,c,"float32"),W=AX(x,c,"float32");a[u]=vX(R,W),R.dispose(),W.dispose()}o+=g*S}"complex64"!==s&&(a[u]=AX(d,c,s))}}catch(V){i.e(V)}finally{i.f()}return a}function wX(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var BX="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function xX(e){return BX?Buffer.byteLength(e):new Blob([e]).size}function GX(e){if(BX)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function RX(e){if(BX){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function WX(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function VX(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function FX(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function NX(e,t){return EX.apply(this,arguments)}function EX(){return EX=j(q().mark((function e(t,n){var r,a,o,l,u;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,o=(0,i.Z)(a,2),l=o[0],u=o[1],r.weightSpecs=l,r.weightData=u;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),EX.apply(this,arguments)}function DX(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:xX(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:xX(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function XX(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),o=new Uint32Array(a),i=0;i<r.length;i++){var l=r[i],u=e[n[l>>10]+(1023&l)]+t[l>>10];o[i]=u}return new Float32Array(a)}}var JX=function(){function e(){iu(this,e),this.saveRouters=[],this.loadRouters=[]}return uu(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),HX=function(e){return JX.registerSaveRouter(e)},YX=function(e){return JX.registerLoadRouter(e)},TX=function(e){return JX.getSaveHandlers(e)},MX=function(e,t){return JX.getLoadHandlers(e,t)},KX="tensorflowjs",PX="models_store",zX="model_info_store";function LX(){if(!zV().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function _X(e){var t=e.result;t.createObjectStore(PX,{keyPath:"modelPath"}),t.createObjectStore(zX,{keyPath:"modelPath"})}var OX=function(){function e(t){if(iu(this,e),this.indexedDB=LX(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return uu(e,[{key:"save",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(KX,1);a.onupgradeneeded=function(){return _X(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(PX,"readonly"),l=i.objectStore(PX).get(n.modelPath);l.onsuccess=function(){if(null==l.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(l.result.modelArtifacts)},l.onerror=function(e){return o.close(),r(l.error)},i.oncomplete=function(){return o.close()}}else{var u,s=DX(t),c=o.transaction(zX,"readwrite"),g=c.objectStore(zX),d=g.put({modelPath:n.modelPath,modelArtifactsInfo:s});d.onsuccess=function(){var a=(u=o.transaction(PX,"readwrite")).objectStore(PX).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:s});a.onsuccess=function(){return e({modelArtifactsInfo:s})},a.onerror=function(e){var t=(g=c.objectStore(zX)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},d.onerror=function(e){return o.close(),r(d.error)},c.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();OX.URL_SCHEME="indexeddb://";var UX=function(e){return zV().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(OX.URL_SCHEME)?(t=e.slice(OX.URL_SCHEME.length),new OX(t)):null;var t};function jX(e){return e.startsWith(OX.URL_SCHEME)?e.slice(OX.URL_SCHEME.length):e}JX.registerSaveRouter(UX),JX.registerLoadRouter(UX);var QX=function(){function e(){iu(this,e),this.indexedDB=LX()}return uu(e,[{key:"listModels",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(KX,1);r.onupgradeneeded=function(){return _X(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(zX,"readonly"),o=a.objectStore(zX).getAll();o.onsuccess=function(){var t,n={},r=ta(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(i){r.e(i)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=j(q().mark((function e(t){var n=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=jX(t),e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(KX,1);a.onupgradeneeded=function(){return _X(a)},a.onsuccess=function(){var n,o=a.result,i=o.transaction(zX,"readwrite"),l=i.objectStore(zX),u=l.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=l.delete(t),i=function(){var a=(n=o.transaction(PX,"readwrite")).objectStore(PX).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){null==n?o.close():n.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qX="/",$X="tensorflowjs_models",eJ="info",tJ="model_topology",nJ="weight_specs",rJ="weight_data",aJ="model_metadata";function oJ(e){return{info:[$X,e,eJ].join(qX),topology:[$X,e,tJ].join(qX),weightSpecs:[$X,e,nJ].join(qX),weightData:[$X,e,rJ].join(qX),modelMetadata:[$X,e,aJ].join(qX)}}function iJ(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function lJ(e){var t=e.split(qX);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(qX)}function uJ(e){return e.startsWith(sJ.URL_SCHEME)?e.slice(sJ.URL_SCHEME.length):e}var sJ=function(){function e(t){if(iu(this,e),!zV().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=oJ(this.modelPath)}return uu(e,[{key:"save",value:function(){var e=j(q().mark((function e(t){var n,r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=DX(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,GX(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),iJ(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=j(q().mark((function e(){var t,n,r,a,o,i,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer),null!=i.trainingConfig&&(n.trainingConfig=i.trainingConfig)),null!=(l=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=RX(l),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();sJ.URL_SCHEME="localstorage://";var cJ=function(e){return zV().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(sJ.URL_SCHEME)?(t=e.slice(sJ.URL_SCHEME.length),new sJ(t)):null;var t};JX.registerSaveRouter(cJ),JX.registerLoadRouter(cJ);var gJ=function(){function e(){iu(this,e),uV(zV().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),uV("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return uu(e,[{key:"listModels",value:function(){var e=j(q().mark((function e(){var t,n,r,a,o,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=$X+qX,r=qX+eJ,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(i=lJ(o),t[i]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=j(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=uJ(t),n=oJ(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),iJ(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),dJ="://",pJ=function(){function e(){iu(this,e),this.managers={}}return uu(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){uV(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(dJ)&&(t=t.slice(0,t.indexOf(dJ))),uV(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();uV(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function hJ(e){if(-1===e.indexOf(dJ))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(pJ.getSchemes().join(",")));return{scheme:e.split(dJ)[0],path:e.split(dJ)[1]}}function fJ(e,t){return CJ.apply(this,arguments)}function CJ(){return CJ=j(q().mark((function e(t,n){var r,a,o,i,l,u,s,c,g,d,p=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],uV(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),uV((a=JX.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),uV(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),o=a[0],uV((i=JX.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),uV(i.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),l=i[0],u=hJ(t).scheme,s=hJ(t).path,c=u===hJ(t).scheme,e.next=15,o.load();case 15:if(g=e.sent,!r||!c){e.next=19;break}return e.next=19,pJ.getManager(u).removeModel(s);case 19:return e.next=21,l.save(g);case 21:if(d=e.sent,!r||c){e.next=25;break}return e.next=25,pJ.getManager(u).removeModel(s);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),CJ.apply(this,arguments)}function IJ(){return mJ.apply(this,arguments)}function mJ(){return(mJ=j(q().mark((function e(){var t,n,r,a,o,i,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=pJ.getSchemes(),n={},r=ta(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return o=a.value,e.next=9,pJ.getManager(o).listModels();case 9:for(l in i=e.sent)n[o+dJ+l]=i[l];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function vJ(e){return bJ.apply(this,arguments)}function bJ(){return(bJ=j(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hJ(t),r=pJ.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AJ(e,t){return yJ.apply(this,arguments)}function yJ(){return(yJ=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",fJ(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kJ(e,t){return ZJ.apply(this,arguments)}function ZJ(){return(ZJ=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",fJ(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SJ=function(){function e(){iu(this,e)}return uu(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(zV().get("IS_BROWSER")){zV().setPlatform("browser",new SJ);try{pJ.registerManager(sJ.URL_SCHEME,new gJ)}catch(Kle){}try{pJ.registerManager(OX.URL_SCHEME,new QX)}catch(Kle){}}var wJ,BJ=function(){return __webpack_require__(5410)};var xJ=function(){function e(){iu(this,e),this.util=__webpack_require__(8628),this.textEncoder=new this.util.TextEncoder}return uu(e,[{key:"fetch",value:function(e,t){return null!=zV().global.fetch?zV().global.fetch(e,t):(null==wJ&&(wJ=BJ()),wJ(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function GJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",XV(e),new JD(e,t,n)}zV().get("IS_NODE")&&!zV().get("IS_BROWSER")&&zV().setPlatform("node",new xJ);var RJ=mX({cast_:function(e,t){var n=CX(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return uX.runKernel(mF,r,a)}});var WJ=mX({clone_:function(e){var t={x:CX(e,"x","clone","string_or_numeric")};return uX.runKernel(sN,t)}});iX();var VJ={buffer:GJ,cast:RJ,clone:WJ,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};YD=VJ;function FJ(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var NJ=function(){function e(t){if(iu(this,e),!zV().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return uu(e,[{key:"save",value:function(){var e=j(q().mark((function e(t){var n,r,a,o,i,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=FX(t,r),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,i.href=o,e.next=15,FJ((function(){return i.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(l=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=n,e.next=21,FJ((function(){return l.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:DX(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();NJ.URL_SCHEME="downloads://";var EJ=function(){function e(t){if(iu(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return uu(e,[{key:"load",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),o=a.modelTopology;if(null!=o)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var i=NX(a,(function(e){return t.loadWeights(e)}));e(i)}else e({modelTopology:o});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],o=ta(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push.apply(r,(0,Ae.Z)(i.weights)),a.push.apply(a,(0,Ae.Z)(i.paths))}}catch(Kle){o.e(Kle)}finally{o.f()}var l=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,l[e])}));return Promise.all(u).then((function(e){return[r,WX(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return VX(e.name)})),o={},i=ta(e);try{for(i.s();!(t=i.n()).done;){t.value.paths.forEach((function(e){var t=VX(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));o[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(Kle){i.e(Kle)}finally{i.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return o}}]),e}();function DJ(e){return new EJ(e)}function XJ(e,t,n,r){!function(e){uV(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){uV(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),uV(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),uV(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}function JJ(e,t){return HJ.apply(this,arguments)}function HJ(){return(HJ=j(q().mark((function e(t,n){var r,a,o,i,l,u,s,c,g;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?zV().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),o=0,i=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,XJ(a,n.onProgress,o,i);case 13:e.t0=e.sent;case 14:if(l=e.t0,u=l.map((function(e){return e.arrayBuffer()})),s=.5,c=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,XJ(u,n.onProgress,s,c);case 26:e.t1=e.sent;case 27:return g=e.t1,e.abrupt("return",g);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YJ(e){return TJ.apply(this,arguments)}function TJ(){return TJ=j(q().mark((function e(t){var n,r,a,o,i=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,o=MJ((function(e){return JJ(e,{requestInit:a})})),e.abrupt("return",o(t,n,r));case 6:case"end":return e.stop()}}),e)}))),TJ.apply(this,arguments)}function MJ(e){return function(){var t=j(q().mark((function t(n){var r,a,o,i,l,u,s,c,g,d,p,h,f=arguments;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:"",a=f.length>2?f[2]:void 0,o=n.map((function(){return!1})),i={},l=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,s=yX[r]*dV(e.shape),c=function(){o[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:s})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),l[n]=!0)})):c(),u.push(e.name),n+=s}))})),l.every((function(e){return e}))){t.next=10;break}throw s=a.filter((function(e,t){return!l[t]})),new Error("Could not find weights in manifest with names: "+"".concat(s.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return c=o.reduce((function(e,t,n){return t&&e.push(n),e}),[]),g=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;g.push(t)}))})),t.next=15,e(g);case 15:return d=t.sent,p={},h=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[h+a].byteLength;for(var o=new ArrayBuffer(r),l=new Uint8Array(o),u=0,s=0;s<t;s++){var c=new Uint8Array(d[h+s]);l.set(c,u),u+=c.byteLength}i[e].forEach((function(e){var t=SX(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),h+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}JX.registerSaveRouter((function(e){return zV().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(NJ.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new NJ(e)}(e.slice(NJ.URL_SCHEME.length)):null}));var KJ=function(){function e(t,n){if(iu(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(uV("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=zV().platform.fetch,uV(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&uV(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return uu(e,[{key:"save",value:function(){var e=j(q().mark((function e(t){var n,r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=FX(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(o=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:DX(t),responses:[o]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=j(q().mark((function e(){var t,n,r,a,o,i=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,o=n.weightsManifest,null!=a||null!=o){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",NX(n,(function(e){return i.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=j(q().mark((function e(t){var n,r,a,o,l,u,s,c,g,d,p,h,f,C,I,m,v,b,A;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=PJ(n),a=(0,i.Z)(r,2),o=a[0],l=a[1],u=this.weightPathPrefix||o,s=[],c=ta(t);try{for(c.s();!(g=c.n()).done;)d=g.value,s.push.apply(s,(0,Ae.Z)(d.weights))}catch(Kle){c.e(Kle)}finally{c.f()}p=[],h=[],f=ta(t);try{for(f.s();!(C=f.n()).done;){I=C.value,m=ta(I.paths);try{for(m.s();!(v=m.n()).done;)b=v.value,null!=this.weightUrlConverter?h.push(this.weightUrlConverter(b)):p.push(u+b+l)}catch(Kle){m.e(Kle)}finally{m.f()}}}catch(Kle){f.e(Kle)}finally{f.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=p.push,e.t1=p,e.t2=Ae.Z,e.next=16,Promise.all(h);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,JJ(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return A=e.sent,e.abrupt("return",[s,WX(A)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function PJ(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function zJ(e){return null!=e.match(KJ.URL_SCHEME_REGEX)}KJ.URL_SCHEME_REGEX=/^https?:\/\//;var LJ=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return zJ(e)})):zJ(e))?_J(e,t):null};function _J(e,t){return new KJ(e,t)}function OJ(e,t){return _J(e,t)}JX.registerSaveRouter(LJ),JX.registerLoadRouter(LJ);var UJ=function(){function e(t){iu(this,e),this.modelArtifacts=t}return uu(e,[{key:"load",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jJ=function(){function e(t){iu(this,e),this.saveHandler=t}return uu(e,[{key:"save",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function QJ(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new UJ(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new UJ({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new UJ({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function qJ(e){return new jJ(e)}function $J(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function eH(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function tH(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i){var l="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(l)}n.unshift(o)}}return n}function nH(e,t,n){var r=e.shape.length;uV(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),uV(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){uV(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function rH(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function aH(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function oH(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function iH(e,t,n){var r,a,o=e.shape.length;return(r="number"===typeof t?[t].concat((0,Ae.Z)(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){uV(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"===typeof n?[n].concat((0,Ae.Z)(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(uV(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function lH(e,t,n,r,a,o,i,l,u){var s;if(null==r?(s=new Array(t.length)).fill(1):s=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var c=!1,g={dims:s.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:s.slice(),beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:l,shrinkAxisMask:u},d=0;d<g.dims;d++)c&&0!==(1<<d&l)&&g.numAddAxisAfterEllipsis++,1<<d&i&&(c=!0);c||(g.ellipsisMask|=1<<g.dims,g.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(g,p);for(var h=!0,f=!0,C=!0,I=[],m=[],v=0;v<e.length;++v){if(0===p.strides[v])throw Error("strides[".concat(v,"] must be non-zero"));var b=!!(p.shrinkAxisMask&1<<v),A=e[v];if(-1!==A){var y=[p.beginMask&1<<v,p.endMask&1<<v],k=[p.strides[v]>0?0:-1,p.strides[v]>0?A:A-1];if(b&&p.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");C=C&&1===p.strides[v];var Z=!!(p.beginMask&1<<v&&p.endMask&1<<v);if(p.beginValid&&p.endValid){if(b){var S=p.begin[v]<0?A+p.begin[v]:p.begin[v];if(p.begin[v]=S,p.end[v]=p.begin[v]+1,S<0||S>=A)throw Error("slice index ".concat(p.begin[v]," of dimension ").concat(v," out of bounds."))}else p.begin[v]=uH(p.begin[v],0,p.strides[v],A,y,k),p.end[v]=uH(p.end[v],1,p.strides[v],A,y,k);var w=1===p.strides[v]&&0===p.begin[v]&&p.end[v]===A;h=h&&w,f=f&&(0===v&&1===p.strides[v]||w)}else h=h&&1===p.strides[v]&&Z,f=f&&(0===v&&1===p.strides[v]||Z);var B=void 0,x=!1;if(p.beginValid&&p.endValid?(B=p.end[v]-p.begin[v],x=!0):b?(B=1,x=!0):Z&&A>=0&&(B=p.strides[v]<0?-A:A,x=!0),x){var G=void 0;G=0===B||B<0!==p.strides[v]<0?0:Math.trunc(B/p.strides[v])+(B%p.strides[v]!==0?1:0),I.push(G)}else I.push(-1)}else I.push(b?1:-1)}for(var R=0;R<p.finalShapeGatherIndices.length;++R){var W=p.finalShapeGatherIndices[R];W>=0?m.push(I[W]):-2===W&&m.push(1)}var V=m.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]}));return{finalShapeSparse:V,finalShape:m,isIdentity:h,sliceDim0:f,isSimpleSlice:C,begin:p.begin,end:p.end,strides:p.strides}}function uH(e,t,n,r,a,o){if(a[t])return n>0?o[t]:o[t+1&1];var i=e<0?r+e:e;return i<o[0]?o[0]:i>o[1]?o[1]:i}var sH=function(){function e(){iu(this,e)}return uu(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),cH=function(){function e(){iu(this,e),this.classNameMap={}}return uu(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function gH(e){uV(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),uV("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),uV(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),cH.register(e)}function dH(){return uX}function pH(){return uX.memory()}function hH(e,t){return uX.tidy(e,t)}function fH(e){eX(e).forEach((function(e){return e.dispose()}))}function CH(e){return uX.keep(e)}function IH(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return uX.registerBackend(e,t,n)}function mH(e){return uX.customGrad(e)}function vH(e,t){if((ZV(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&ZV(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return bX(e,[],[],t)}var bH=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,o=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(i)}else this.applyGradients(o);return fH(o),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){uV(GV(e),(function(){return"The f passed in variableGrads(f) must be a function"})),uV(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof OD})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],uX.registeredVariables)t.push(uX.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,o=t.length;t=t.filter((function(e){return e.trainable})),uV(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(o," variables is ")+"trainable."}));var i=uX.gradients(e,t,null,!0),l=i.value,u=i.grads;uV(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),uV(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var s={};return t.forEach((function(e,t){null!=u[t]&&(s[e.name]=u[t])})),null!=a&&a.forEach((function(e){return s[e.name]=null})),{value:l,grads:s}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&fH(this.iterations_)}},{key:"saveIterations",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:vH(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(sH);Object.defineProperty(bH,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var AH=mX({abs_:function(e){var t=CX(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return uX.runKernel(yF,n)}var r={x:t};return uX.runKernel(jV,r)}});var yH=mX({add_:function(e,t){var n=CX(e,"a","add"),r=CX(t,"b","add"),a=qD(n,r),o=(0,i.Z)(a,2),l={a:n=o[0],b:r=o[1]};return uX.runKernel($V,l)}});var kH=mX({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=CX(e,"x","all","bool"),a={x:r},o={axis:t,keepDims:n};return uX.runKernel(tF,a,o)}});var ZH=mX({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=CX(e,"x","any","bool"),a={x:r},o={axis:t,keepDims:n};return uX.runKernel(nF,a,o)}});var SH=mX({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=CX(e,"x","argMax"),r={x:n},a={axis:t};return uX.runKernel(rF,r,a)}});function wH(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,i=e[3],l=[].concat((0,Ae.Z)(t),[i]),u=YH(a);return GH(e,l,n,o,r,null,null,u)}function BH(e,t,n,r,a,o){var l,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=VH(t),c=(0,i.Z)(s,2),g=c[0],d=c[1];if("channelsLast"===u)l=[g,d,e[3],e[3]];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));l=[g,d,e[1],e[1]]}return GH(e,l,n,r,a,o,!1,u)}function xH(e,t,n,r,a,o){var l,u,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=FH(t),g=(0,i.Z)(c,3),d=g[0],p=g[1],h=g[2];if("NDHWC"===s)u="channelsLast",l=[d,p,h,e[4],e[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat ".concat(s));u="channelsFirst",l=[d,p,h,e[1],e[1]]}return RH(e,l,n,r,a,!1,u,o)}function GH(e,t,n,r,a,o){var l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",s=-1,c=-1,g=-1,d=-1;if("channelsLast"===u){var p=(0,i.Z)(e,4);s=p[0],c=p[1],g=p[2],d=p[3]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var h=(0,i.Z)(e,4);s=h[0],d=h[1],c=h[2],g=h[3]}var f,C=(0,i.Z)(t,4),I=C[0],m=C[1],v=C[3],b=VH(n),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=VH(r),S=(0,i.Z)(Z,2),w=S[0],B=S[1],x=NH(I,w),G=NH(m,B),R=EH(a,c,g,y,k,x,G,o,u),W=R.padInfo,V=R.outHeight,F=R.outWidth,N=l?v*d:v;return"channelsFirst"===u?f=[s,N,V,F]:"channelsLast"===u&&(f=[s,V,F,N]),{batchSize:s,dataFormat:u,inHeight:c,inWidth:g,inChannels:d,outHeight:V,outWidth:F,outChannels:N,padInfo:W,strideHeight:y,strideWidth:k,filterHeight:I,filterWidth:m,effectiveFilterHeight:x,effectiveFilterWidth:G,dilationHeight:w,dilationWidth:B,inShape:e,outShape:f,filterShape:t}}function RH(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=arguments.length>7?arguments[7]:void 0,s=-1,c=-1,g=-1,d=-1,p=-1;if("channelsLast"===l){var h=(0,i.Z)(e,5);s=h[0],c=h[1],g=h[2],d=h[3],p=h[4]}else{if("channelsFirst"!==l)throw new Error("Unknown dataFormat ".concat(l));var f=(0,i.Z)(e,5);s=f[0],p=f[1],c=f[2],g=f[3],d=f[4]}var C,I=(0,i.Z)(t,5),m=I[0],v=I[1],b=I[2],A=I[4],y=FH(n),k=(0,i.Z)(y,3),Z=k[0],S=k[1],w=k[2],B=FH(r),x=(0,i.Z)(B,3),G=x[0],R=x[1],W=x[2],V=NH(m,G),F=NH(v,R),N=NH(b,W),E=DH(a,c,g,d,Z,S,w,V,F,N,u),D=E.padInfo,X=E.outDepth,J=E.outHeight,H=E.outWidth,Y=o?A*p:A;return"channelsFirst"===l?C=[s,Y,X,J,H]:"channelsLast"===l&&(C=[s,X,J,H,Y]),{batchSize:s,dataFormat:l,inDepth:c,inHeight:g,inWidth:d,inChannels:p,outDepth:X,outHeight:J,outWidth:H,outChannels:Y,padInfo:D,strideDepth:Z,strideHeight:S,strideWidth:w,filterDepth:m,filterHeight:v,filterWidth:b,effectiveFilterDepth:V,effectiveFilterHeight:F,effectiveFilterWidth:N,dilationDepth:G,dilationHeight:R,dilationWidth:W,inShape:e,outShape:C,filterShape:t}}function WH(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=NH(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function VH(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function FH(e){return"number"===typeof e?[e,e,e]:e}function NH(e,t){return t<=1?e:e+(e-1)*(t-1)}function EH(e,t,n,r,a,o,i,l,u){var s,c,g;if("number"===typeof e){s={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=WH(e,t,n));var o=e[0],i=e[1];return[XH((o-t+2*r)/n+1,a),XH((i-t+2*r)/n+1,a)]}([t,n],o,r,e,l);c=d[0],g=d[1]}else if("same"===e){c=Math.ceil(t/r),g=Math.ceil(n/a);var p=Math.max(0,(c-1)*r+o-t),h=Math.max(0,(g-1)*a+i-n),f=Math.floor(p/2),C=p-f,I=Math.floor(h/2);s={top:f,bottom:C,left:I,right:h-I,type:"SAME"}}else if("valid"===e)s={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),g=Math.ceil((n-i+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var m="channelsLast"===u?e[1][0]:e[2][0],v="channelsLast"===u?e[1][1]:e[2][1],b="channelsLast"===u?e[2][0]:e[3][0],A="channelsLast"===u?e[2][1]:e[3][1];s={top:m,bottom:v,left:b,right:A,type:0===m&&0===v&&0===b&&0===A?"VALID":"EXPLICIT"},c=XH((t-o+m+v)/r+1,l),g=XH((n-i+b+A)/a+1,l)}return{padInfo:s,outHeight:c,outWidth:g}}function DH(e,t,n,r,a,o,i,l,u,s,c){var g,d,p,h;if("number"===typeof e){g={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a,o){null==a&&(a=WH(e,t,r));var i=e[0],l=e[1],u=e[2];return[XH((i-t+2*a)/r+1,o),XH((l-t+2*a)/r+1,o),XH((u-t+2*a)/r+1,o),n]}([t,n,r,1],l,1,a,e,c);d=f[0],p=f[1],h=f[2]}else if("same"===e){var C=((d=Math.ceil(t/a))-1)*a+l-t,I=((p=Math.ceil(n/o))-1)*o+u-n,m=((h=Math.ceil(r/i))-1)*i+s-r,v=Math.floor(C/2),b=C-v,A=Math.floor(I/2),y=I-A,k=Math.floor(m/2);g={top:A,bottom:y,left:k,right:m-k,front:v,back:b,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));g={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-l+1)/a),p=Math.ceil((n-u+1)/o),h=Math.ceil((r-s+1)/i)}return{padInfo:g,outDepth:d,outHeight:p,outWidth:h}}function XH(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function JH(e){var t=VH(e),n=(0,i.Z)(t,3),r=n[0],a=n[1],o=n[2];return 1===r&&1===a&&1===o}function HH(e,t){return JH(e)||JH(t)}function YH(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function TH(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)uV(hV(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){uV(hV(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var MH=mX({reshape_:function(e,t){var n={x:CX(e,"x","reshape","string_or_numeric")},r={shape:t};return uX.runKernel(nE,n,r)}});var KH=mX({avgPool_:function(e,t,n,r,a){var o=CX(e,"x","avgPool","float32");uV(HH(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var i=o,l=!1;3===o.rank&&(l=!0,i=MH(o,[1,o.shape[0],o.shape[1],o.shape[2]])),uV(4===i.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,".")})),TH("avgPool",r,a);var u={x:i},s={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=uX.runKernel(cF,u,s);return c=RJ(c,o.dtype),l?MH(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var PH=mX({avgPool3d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=CX(e,"x","avgPool3d","float32"),l=i,u=!1;4===i.rank&&(u=!0,l=MH(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),uV(5===l.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(l.rank,".")})),uV("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)})),TH("avgPool3d",r,a);var s={x:l},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},g=uX.runKernel(dF,s,c);return g=RJ(g,l.dtype),u?MH(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}});var zH=mX({batchNorm_:function(e,t,n,r,a,o){null==o&&(o=.001);var i,l,u=CX(e,"x","batchNorm"),s=CX(t,"mean","batchNorm"),c=CX(n,"variance","batchNorm");null!=a&&(i=CX(a,"scale","batchNorm")),null!=r&&(l=CX(r,"offset","batchNorm")),uV(s.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),uV(null==l||s.rank===l.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),uV(null==i||s.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var g=function(e){return 0===e.rank||1===e.rank?MH(e,[1,1,1,e.size]):2===e.rank?MH(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?MH(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),d={x:g,scale:i,offset:l,mean:s,variance:c},p={varianceEpsilon:o},h=uX.runKernel(aN,d,p);return MH(h,u.shape)}});var LH=mX({batchNorm2d_:function(e,t,n,r,a,o){var i,l,u=CX(e,"x","batchNorm"),s=CX(t,"mean","batchNorm"),c=CX(n,"variance","batchNorm");return null!=a&&(i=CX(a,"scale","batchNorm")),null!=r&&(l=CX(r,"offset","batchNorm")),uV(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),uV(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,".")})),uV(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=i&&uV(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=l&&uV(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),zH(u,s,c,l,i,o)}});var _H=mX({batchNorm3d_:function(e,t,n,r,a,o){var i,l,u=CX(e,"x","batchNorm"),s=CX(t,"mean","batchNorm"),c=CX(n,"variance","batchNorm");return null!=a&&(i=CX(a,"scale","batchNorm")),null!=r&&(l=CX(r,"offset","batchNorm")),uV(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),uV(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,".")})),uV(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=i&&uV(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=l&&uV(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),zH(u,s,c,l,i,o)}});var OH=mX({batchNorm4d_:function(e,t,n,r,a,o){var i,l,u=CX(e,"x","batchNorm"),s=CX(t,"mean","batchNorm"),c=CX(n,"variance","batchNorm");return null!=a&&(i=CX(a,"scale","batchNorm")),null!=r&&(l=CX(r,"offset","batchNorm")),uV(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),uV(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,".")})),uV(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=i&&uV(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=l&&uV(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),zH(u,s,c,l,i,o)}});var UH=mX({clipByValue_:function(e,t,n){var r=CX(e,"x","clipByValue");uV(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},o={clipValueMin:t,clipValueMax:n};return uX.runKernel(bF,a,o)}});var jH=mX({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;uV(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=IX(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return WJ(n[0]);var r=n,a={axis:t};return uX.runKernel(kF,r,a)}});var QH=mX({concat1d_:function(e){return jH(e,0)}});var qH=mX({concat2d_:function(e,t){return jH(e,t)}});var $H=mX({concat3d_:function(e,t){return jH(e,t)}});var eY=mX({concat4d_:function(e,t){return jH(e,t)}});var tY=mX({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,l=CX(e,"x","conv2d","float32"),u=CX(t,"filter","conv2d","float32"),s=l,c=!1;3===l.rank&&(c=!0,s=MH(l,[1,l.shape[0],l.shape[1],l.shape[2]])),uV(4===s.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(s.rank,".")})),uV(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),TH("conv2d",r,i);var g="NHWC"===a?s.shape[3]:s.shape[1];uV(g===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),uV(HH(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")}));var d={x:s,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},h=uX.runKernel(ZF,d,p);return c?MH(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var nY=mX({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0,l=CX(e,"x","conv1d"),u=CX(t,"filter","conv1d"),s=l,c=!1;2===l.rank&&(c=!0,s=MH(l,[1,l.shape[0],l.shape[1]])),uV(3===s.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(s.rank,".")})),uV(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),TH("conv1d",r,i),uV(s.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(s.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),uV(HH(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'")})),uV("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var g=MH(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=MH(s,[s.shape[0],1,s.shape[1],s.shape[2]]),p=[1,n],h=[1,o],f="NHWC",C=tY(d,g,p,r,f,h,i);return MH(C,c?[C.shape[2],C.shape[3]]:[C.shape[0],C.shape[2],C.shape[3]])}});var rY=mX({conv2DBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;uV(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var l=e,u=t,s=!1;3===t.rank&&(s=!0,u=MH(t,[1,t.shape[0],t.shape[1],t.shape[2]]),l=[1,e[0],e[1],e[2]]),uV(4===l.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(l.length,".")})),uV(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),uV(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var c="NHWC"===o?l[3]:l[1],g="NHWC"===o?u.shape[3]:u.shape[1];uV(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),uV(g===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(g,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),TH("conv2dDerInput",a,i);var d={dy:u,filter:n},p={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,inputShape:l},h=uX.runKernel(wF,d,p);return s?MH(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var aY=mX({conv2dTranspose_:function(e,t,n,r,a,o){var i=CX(e,"x","conv2dTranspose"),l=CX(t,"filter","conv2dTranspose");return rY(n,i,l,r,a,"NHWC",o)}});var oY=mX({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],i=CX(e,"x","conv3d"),l=CX(t,"filter","conv3d"),u=i,s=!1;4===i.rank&&(s=!0,u=MH(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),uV(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),uV(5===l.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(l.rank,".")})),uV(u.shape[4]===l.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(l.shape[3],".")})),uV(HH(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")})),uV("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var c={x:u,filter:l},g={strides:n,pad:r,dataFormat:a,dilations:o},d=uX.runKernel(BF,c,g);return s?MH(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var iY=mX({conv3DBackpropInput_:function(e,t,n,r,a){uV(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var o=e,i=t,l=!1;4===t.rank&&(l=!0,i=MH(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);var u=o[4],s=i.shape[4];uV(5===o.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,".")})),uV(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank)})),uV(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),uV(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),uV(s===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(s,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var c={dy:i,filter:n},g={pad:a,strides:r,inputShape:o},d=uX.runKernel(GF,c,g);return l?MH(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var lY=mX({conv3dTranspose_:function(e,t,n,r,a){var o=CX(e,"x","conv3dTranspose"),i=CX(t,"filter","conv3dTranspose");return iY(n,o,i,r,a)}});var uY=mX({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,l=CX(e,"x","depthwiseConv2d","float32"),u=CX(t,"filter","depthwiseConv2d","float32"),s=l,c=!1;3===l.rank&&(c=!0,s=MH(l,[1,l.shape[0],l.shape[1],l.shape[2]])),uV(4===s.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(s.rank,".")})),uV(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),uV(s.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(s.shape[3],") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),TH("depthwiseConv2d",r,i);var g={x:s,filter:u},d={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},p=uX.runKernel(XF,g,d);return c?MH(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var sY=mX({floorDiv_:function(e,t){var n=CX(e,"a","floorDiv"),r=CX(t,"b","floorDiv"),a=qD(n,r),o=(0,i.Z)(a,2),l={a:n=o[0],b:r=o[1]};return uX.runKernel(rN,l)}});var cY=mX({div_:function(e,t){var n=CX(e,"a","div"),r=CX(t,"b","div"),a=qD(n,r),o=(0,i.Z)(a,2);if(n=o[0],r=o[1],"int32"===n.dtype&&"int32"===r.dtype)return sY(n,r);var l={a:n,b:r};return uX.runKernel(PF,l,{})}});var gY=mX({elu_:function(e){var t={x:CX(e,"x","elu","float32")};return uX.runKernel(LF,t)}});var dY=mX({equal_:function(e,t){var n=CX(e,"a","equal","string_or_numeric"),r=CX(t,"b","equal","string_or_numeric"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(UF,l)}});var pY=mX({exp_:function(e){var t={x:CX(e,"x","exp")};return uX.runKernel(jF,t)}});var hY=mX({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=CX(e,"x","expandDims","string_or_numeric");uV(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return uX.runKernel(QF,r,a)}});var fY=mX({tile_:function(e,t){var n=CX(e,"x","tile","string_or_numeric");uV(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return uX.runKernel(HE,r,a)}});var CY=mX({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=GJ([e,t],r),o=e<=t?e:t,i=0;i<o;++i)a.set(1,i,i);var l=MH(a.toTensor(),[e,t]);if(null==n)return l;if(1===n.length)return fY(hY(l,0),[n[0],1,1]);if(2===n.length)return fY(hY(hY(l,0),0),[n[0],n[1],1,1]);if(3===n.length)return fY(hY(hY(hY(l,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});function IY(e,t,n){var r={shape:e,value:t,dtype:n};return uX.runKernel(eN,{},r)}var mY=mX({floor_:function(e){var t={x:CX(e,"x","floor","float32")};return uX.runKernel(nN,t)}});var vY=mX({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=CX(e,"x","gather"),o=CX(t,"indices","gather","int32"),i={x:a,indices:o},l={axis:n,batchDims:r};return uX.runKernel(oN,i,l)}});var bY=mX({greater_:function(e,t){var n=CX(e,"a","greater","string_or_numeric"),r=CX(t,"b","greater","string_or_numeric"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(lN,l)}});var AY=mX({greaterEqual_:function(e,t){var n=CX(e,"a","greaterEqual","string_or_numeric"),r=CX(t,"b","greaterEqual","string_or_numeric"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(uN,l)}});var yY=mX({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=CX(e,"x","leakyRelu"),r={x:n},a={alpha:t};return uX.runKernel(fN,r,a)}});var kY=mX({log_:function(e){var t={x:CX(e,"x","log","float32")};return uX.runKernel(vN,t)}});var ZY=mX({log1p_:function(e){var t={x:CX(e,"x","log1p")};return uX.runKernel(bN,t)}});var SY=mX({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=CX(e,"x","max"),a={x:r},o={reductionIndices:t,keepDims:n};return uX.runKernel(wN,a,o)}});var wY=mX({mul_:function(e,t){var n=CX(e,"a","mul"),r=CX(t,"b","mul"),a=qD(n,r),o=(0,i.Z)(a,2),l={a:n=o[0],b:r=o[1]};return uX.runKernel(HN,l)}});var BY=mX({sub_:function(e,t){var n=CX(e,"a","sub"),r=CX(t,"b","sub"),a=qD(n,r),o=(0,i.Z)(a,2),l={a:n=o[0],b:r=o[1]};return uX.runKernel(DE,l)}});var xY=mX({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=CX(e,"x","sum");"bool"===r.dtype&&(r=RJ(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return uX.runKernel(AE,a,o)}});var GY=mX({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=CX(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=mH((function(e,n){var r=SY(e,t,!0),a=BY(e,r),o=BY(RJ(a,"float32"),kY(xY(pY(a),t,!0)));n([o]);return{value:o,gradFunc:function(e,n){var r=(0,i.Z)(n,1)[0],a=pY(r);return BY(e,wY(xY(e,t,!0),a))}}}));return r(n)}});var RY=mX({logicalAnd_:function(e,t){var n=CX(e,"a","logicalAnd","bool"),r=CX(t,"b","logicalAnd","bool");tH(n.shape,r.shape);var a={a:n,b:r};return uX.runKernel(AN,a)}});var WY=mX({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=CX(e,"a","matMul"),o=CX(t,"b","matMul"),l=qD(a,o),u=(0,i.Z)(l,2),s={a:a=u[0],b:o=u[1]},c={transposeA:n,transposeB:r};return uX.runKernel(hF,s,c)}});var VY=mX({maxPool_:function(e,t,n,r,a){var o=CX(e,"x","maxPool"),i=o,l=!1;3===o.rank&&(l=!0,i=MH(o,[1,o.shape[0],o.shape[1],o.shape[2]])),uV(4===i.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,".")})),uV(HH(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),TH("maxPool",r,a);var u={x:i},s={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=uX.runKernel(xN,u,s);return l?MH(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var FY=mX({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=CX(e,"x","maxPool3d"),l=i,u=!1;4===i.rank&&(u=!0,l=MH(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),uV(5===l.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(l.rank,".")})),uV("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)})),TH("maxPool3d",r,a);var s={x:l},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},g=uX.runKernel(RN,s,c);return u?MH(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}});var NY=mX({maximum_:function(e,t){var n=CX(e,"a","maximum"),r=CX(t,"b","maximum"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],"bool"===n.dtype&&(n=RJ(n,"int32"),r=RJ(r,"int32")),tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(BN,l)}});var EY=mX({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=CX(e,"x","mean"),a={x:r},o={axis:t,keepDims:n};return uX.runKernel(FN,a,o)}});var DY=mX({minimum_:function(e,t){var n=CX(e,"a","minimum"),r=CX(t,"b","minimum"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],"bool"===n.dtype&&(n=RJ(n,"int32"),r=RJ(r,"int32")),tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(EN,l)}});function XY(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function JY(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var o=t.map((function(t){return e[t]}));return[n,o]}function HY(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,l=0;l<r;l++)-1===n.indexOf(l)?a.push(e[o++]):a.push(t[i++]);return a}(e,t.map((function(e){return 1})),t)}function YY(e,t,n){uV(XY(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function TY(e,t){if(XY(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function MY(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function KY(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var PY=mX({square_:function(e){var t=CX(e,"x","square");return uX.runKernel("Square",{x:t},{})}});var zY=mX({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=vV(t,(e=CX(e,"x","moments")).shape),a=EY(e,r,n),o=a.shape;n||(o=HY(a.shape,r));var i=PY(BY(RJ(e,"float32"),MH(a,o))),l=EY(i,r,n);return{mean:a,variance:l}}});var LY=mX({neg_:function(e){var t={x:CX(e,"x","neg")};return uX.runKernel(YN,t)}});var _Y=mX({notEqual_:function(e,t){var n=CX(e,"a","notEqual","string_or_numeric"),r=CX(t,"b","notEqual","string_or_numeric"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(TN,l)}});var OY=mX({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a=CX(e,"indices","oneHot","int32"),o={indices:a},i={depth:t,onValue:n,offValue:r};return uX.runKernel(LN,o,i)}});function UY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=UY(e,"float32"),r=UY(e,"float32");return vX(n,r)}var a=EV(dV(e),t);return uX.makeTensor(a,e,t)}function jY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=jY(e,"float32"),r=UY(e,"float32");return vX(n,r)}var a=NV(dV(e),t);return uX.makeTensor(a,e,t)}var QY=mX({onesLike_:function(e){var t={x:CX(e,"x","onesLike")};return uX.runKernel(zN,t)}});var qY=mX({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=CX(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},o={x:r};return uX.runKernel(ON,o,a)}});var $Y=mX({prelu_:function(e,t){var n={x:CX(e,"x","prelu"),alpha:CX(t,"alpha","prelu")};return uX.runKernel(jN,n)}}),eT=__webpack_require__(6699),tT=function(){function e(t,n,r,a,o){iu(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=eT.alea(i.toString())}return uu(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var l=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*l,n=this.mean+this.stdDev*o*l,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),nT=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(iu(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==o&&(o=Math.random()),"number"===typeof o&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=eT.alea(o)}return uu(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var rT=mX({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var o=new tT(t,n,r,!1,a),i=GJ(e,r),l=0;l<i.values.length;l++)i.values[l]=o.nextValue();return i.toTensor()}});var aT=mX({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,o=GJ(e,r),i=new nT(t,n,null,a),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}});var oT=mX({relu_:function(e){var t={x:CX(e,"x","relu")};return uX.runKernel(tE,t)}});var iT=mX({reverse_:function(e,t){var n={x:CX(e,"x","reverse")},r={dims:t};return uX.runKernel(uE,n,r)}});var lT=mX({selu_:function(e){var t={x:CX(e,"x","selu")};return uX.runKernel(pE,t)}});var uT=mX({separableConv2d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",l=CX(e,"x","separableConv2d"),u=CX(t,"depthwiseFilter","separableConv2d"),s=CX(n,"pointwiseFilter","separableConv2d"),c=l,g=!1;if(3===l.rank&&(g=!0,c=MH(l,[1,l.shape[0],l.shape[1],l.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");uV(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),uV(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),uV(4===s.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),uV(1===s.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(s.shape[0],".")})),uV(1===s.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(s.shape[1],".")}));var d=u.shape[2],p=u.shape[3];uV(s.shape[2]===d*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*p,", ")+"but got ".concat(s.shape[2],".")}));var h=uY(c,u,r,a,i,o),f=1,C=tY(h,s,f,"valid",i);return g?MH(C,[C.shape[1],C.shape[2],C.shape[3]]):C}});var sT=mX({sigmoid_:function(e){var t={x:CX(e,"x","sigmoid","float32")};return uX.runKernel(mE,t)}});var cT=mX({slice_:function(e,t,n){var r=CX(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},o={begin:t,size:n};return uX.runKernel(hE,a,o)}});var gT=mX({slice1d_:function(e,t,n){var r=CX(e,"x","slice1d");return uV(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),cT(r,[t],[n])}});var dT=mX({slice2d_:function(e,t,n){var r=CX(e,"x","slice2d");return uV(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),cT(r,t,n)}});var pT=mX({slice3d_:function(e,t,n){var r=CX(e,"x","slice3d");return uV(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),cT(r,t,n)}});var hT=mX({slice4d_:function(e,t,n){var r=CX(e,"x","slice4d");return uV(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),cT(r,t,n)}});var fT=mX({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=CX(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return uX.runKernel(ZE,r,a)}});var CT=mX({softplus_:function(e){var t={x:CX(e,"x","softplus")};return uX.runKernel(vE,t)}});var IT=mX({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=CX(e,"x","split"),a={x:r},o={numOrSizeSplits:t,axis:n};return uX.runKernel(kE,a,o)}});var mT=mX({sqrt_:function(e){var t={x:CX(e,"x","sqrt","float32")};return uX.runKernel(bE,t)}});var vT=mX({squeeze_:function(e,t){var n=CX(e,"x","squeeze");return MH(n,bV(n.shape,t).newShape)}});var bT=mX({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=IX(e,"tensors","stack","string_or_numeric");uV(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&uV(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return uX.runKernel(_N,r,a)}});var AT=mX({tanh_:function(e){var t={x:CX(e,"x","tanh","float32")};return uX.runKernel(JE,t)}});function yT(e,t){cV(e);var n=pX(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return bX(e,null,n,t)}var kT=mX({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var o=new tT(t,n,r,!0,a),i=GJ(e,r),l=0;l<i.values.length;l++)i.values[l]=o.nextValue();return i.toTensor()}});var ZT=mX({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=CX(e,"x","unstack","string_or_numeric");uV(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return uX.runKernel(PE,r,a)}});function ST(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return uX.makeVariable(e,t,n,r)}var wT=mX({broadcastTo_:function(e,t){var n=CX(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=MH(n,a)}for(var o=n.shape,i=Array.from(t),l=t.length-1;l>=0;l--)if(o[l]===t[l])i[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return WJ(n);var s={x:n},c={reps:i};return uX.runKernel(HE,s,c)}});var BT=mX({where_:function(e,t,n){var r=CX(t,"a","where"),a=CX(n,"b","where"),o=CX(e,"condition","where","bool"),i=tH(tH(o.shape,r.shape),a.shape),l={condition:wT(o,i),t:wT(r,i),e:wT(a,i)};return uX.runKernel(dE,l)}});var xT=mX({zerosLike_:function(e){var t={x:CX(e,"x","zerosLike")};return uX.runKernel(LE,t)}});var GT=mX({transpose_:function(e,t){var n=CX(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),uV(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){uV(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return uX.runKernel(ME,r,a)}});var RT=mX({dropout_:function(e,t,n,r){var a=CX(e,"x","dropout");if(uV("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),uV(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof TD?a.clone():a;var o=function(e,t){if(null==t)return e.shape.slice();if(pV(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,l=cY(mY(yH(aT(o,0,1,"float32",r),i)),i);return wY(a,l)}});var WT=mX({imag_:function(e){var t={input:CX(e,"input","imag")};return uX.runKernel(gN,t)}});var VT=mX({real_:function(e){var t={input:CX(e,"input","real")};return uX.runKernel($N,t)}});var FT=mX({fft_:function(e){uV("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return uX.runKernel($F,t)}});var NT=mX({rfft_:function(e,t){uV("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=cT(e,o,i),r=t}else if(null!=t&&t>r){var l=e.shape.map((function(e){return e}));l[e.shape.length-1]=t-r,n=jH([e,UY(l)],e.shape.length-1),r=t}else n=e;var u=xT(n),s=MH(vX(n,u),[a,r]),c=FT(s),g=Math.floor(r/2)+1,d=VT(c),p=WT(c),h=IT(d,[g,r-g],d.shape.length-1),f=IT(p,[g,r-g],p.shape.length-1),C=n.shape.slice();return C[n.shape.length-1]=g,MH(vX(h[0],f[0]),C)}});var ET=mX({ifft_:function(e){uV("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return uX.runKernel(cN,t)}});var DT=mX({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=MH(e,[r,n]);t=ET(a)}else{var o=[r,2*(n-1)],i=MH(VT(e),[r,n]),l=MH(WT(e),[r,n]),u=iT(cT(i,[0,1],[r,n-2]),1),s=wY(iT(cT(l,[0,1],[r,n-2]),1),vH(-1)),c=jH([i,u],1),g=jH([l,s],1),d=MH(vX(c,g),[o[0],o[1]]);t=ET(d)}if(t=VT(t),3===e.rank&&0!==e.shape[0]){var p=t,h=e.shape[0];t=MH(t,[h,t.shape[0]/h,t.shape[1]]),p.dispose()}return t}});var XT=mX({conv2DBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=MH(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=MH(t,[1,t.shape[0],t.shape[1],t.shape[2]])),uV(4===l.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(l.shape,".")})),uV(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),uV(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var s="NHWC"===o?l.shape[3]:l.shape[1],c="NHWC"===o?u.shape[3]:u.shape[1];uV(s===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(s,") must ")+"match input depth in filter (".concat(n[2],".")})),uV(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")})),TH("conv2dDerFilter",a,i);var g={x:l,dy:u},d={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,filterShape:n};return uX.runKernel(SF,g,d)}});var JT=mX({relu6_:function(e){var t={x:CX(e,"x","relu6")};return uX.runKernel(lE,t)}});var HT=mX({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=CX(e,"x","step"),r={x:n},a={alpha:t};return uX.runKernel(_E,r,a)}});function YT(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return wY(e,HT(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function TT(e,t){var n=t,r=eH(e.shape,t.shape);return r.length>0&&(n=xY(n,r)),MH(n,e.shape)}function MT(e,t,n,r){if("linear"===t)return e;if("relu"===t)return oT(e);if("elu"===t)return gY(e);if("relu6"===t)return JT(e);if("prelu"===t)return $Y(e,n);if("leakyrelu"===t)return yY(e,r);if("sigmoid"===t)return sT(e);throw new Error("Unknown fused activation ".concat(t,"."))}var KT=function(e,t){return!(e>0)||"linear"===t};var PT=mX({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,l=void 0===o?"NHWC":o,u=e.dilations,s=void 0===u?[1,1]:u,c=e.dimRoundingMode,g=e.bias,d=e.activation,p=void 0===d?"linear":d,h=e.preluActivationWeights,f=e.leakyreluAlpha;if(p=p||"linear",!1===KT(uX.state.gradientDepth,p)){var C=tY(t,n,r,a,l,s,c);return null!=g&&(C=yH(C,g)),MT(C,p,h,f)}var I=CX(t,"x","conv2d","float32"),m=CX(n,"filter","conv2d","float32"),v=I,b=!1;3===I.rank&&(b=!0,v=MH(I,[1,I.shape[0],I.shape[1],I.shape[2]])),uV(4===v.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(v.rank,".")})),uV(4===m.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(m.rank,".")})),TH("fused conv2d",a,c),uV(v.shape[3]===m.shape[2],(function(){return"Error in conv2d: depth of input (".concat(v.shape[3],") must match ")+"input depth for filter ".concat(m.shape[2],".")})),uV(HH(r,s),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(s,"'")})),uV("NHWC"===l,(function(){return"Error in conv2d: got dataFormat of ".concat(l," but only NHWC is currently supported.")}));var A,y,k=GH(v.shape,m.shape,r,s,a,c);if(null!=g){var Z=qD(A=CX(g,"bias","fused conv2d"),I);A=(0,i.Z)(Z,1)[0],tH(k.outShape,A.shape)}null!=h&&(y=CX(h,"prelu weights","fused conv2d"));var S=function(e,t){var n=(0,i.Z)(t,4),o=n[0],l=n[1],u=n[2],c=n[3],g=YT(e,u,p);uV(JH(s),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(s,"'")}));var d=[rY(l.shape,g,o,r,a),XT(l,g,o.shape,r,a)];if(null!=c){var h=TT(c,g);d.push(h)}return d},w={x:v,filter:m,bias:A,preluActivationWeights:y},B={strides:r,pad:a,dataFormat:l,dilations:s,dimRoundingMode:c,activation:p,leakyreluAlpha:f};if(null==g){var x=mH((function(e,t,n){var r=uX.runKernel(jE,w,B);return n([t,e,r]),b&&(r=MH(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}}));return x(v,m)}var G=mH((function(e,t,n,r){var a=uX.runKernel(jE,w,B);return r([t,e,a,n]),b&&(a=MH(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:S}}));return G(v,m,A)}});var zT=mX({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=MH(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=MH(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var s={x:l,dy:u},c={strides:r,pad:a,dimRoundingMode:i,dilations:o,filterShape:n};return uX.runKernel(JF,s,c)}});var LT=mX({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,l=t,u=!1;3===t.rank&&(u=!0,l=MH(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var s={dy:l,filter:n},c={strides:r,pad:a,dimRoundingMode:i,dilations:o,inputShape:e},g=uX.runKernel(HF,s,c);return u?MH(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});mX({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,l=void 0===o?"NHWC":o,u=e.dilations,s=void 0===u?[1,1]:u,c=e.dimRoundingMode,g=e.bias,d=e.activation,p=void 0===d?"linear":d,h=e.preluActivationWeights,f=e.leakyreluAlpha;if(!1===KT(uX.state.gradientDepth,p)){var C=uY(t,n,r,a,l,s,c);return null!=g&&(C=yH(C,g)),MT(C,p,h,f)}var I=CX(t,"x","depthwiseConv2d","float32"),m=CX(n,"filter","depthwiseConv2d","float32"),v=I,b=!1;3===I.rank&&(b=!0,v=MH(I,[1,I.shape[0],I.shape[1],I.shape[2]])),uV(4===v.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),uV(4===m.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(m.rank,".")})),uV(v.shape[3]===m.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(v.shape[3],") must match the inChannels dimension in ")+"filter ".concat(m.shape[2],".")})),null==s&&(s=[1,1]),uV(HH(r,s),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(s,"'")})),TH("fused depthwiseConv2d",a,c);var A,y,k=GH(v.shape,m.shape,r,s,a,c,!0);if(null!=g){var Z=qD(A=CX(g,"bias","fused conv2d"),I),S=(0,i.Z)(Z,1);A=S[0],tH(k.outShape,A.shape)}null!=h&&(y=CX(h,"prelu weights","fused depthwiseConv2d"));var w=function(e,t){uV(JH(s),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var n=(0,i.Z)(t,4),o=n[0],l=n[1],u=n[2],g=n[3],d=YT(e,u,p),h=LT(l.shape,d,o,r,a,s,c),f=zT(l,d,o.shape,r,a,s,c);return null!=g?[h,f,TT(A,d)]:[h,f]},B={x:v,filter:m,bias:A,preluActivationWeights:y},x={strides:r,pad:a,dataFormat:l,dilations:s,dimRoundingMode:c,activation:p,leakyreluAlpha:f};if(null==g){var G=mH((function(e,t,n){var r=uX.runKernel(QE,B,x);return n([t,e,r]),b&&(r=MH(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:w}}));return G(v,m)}var R=mH((function(e,t,n,r){var a=uX.runKernel(QE,B,x);return r([t,e,a,n]),b&&(a=MH(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:w}}));return R(v,m,A)}});var _T=mX({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,o=e.transposeB,l=void 0!==o&&o,u=e.bias,s=e.activation,c=void 0===s?"linear":s,g=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===KT(uX.state.gradientDepth,c)){var p=WY(t,n,a,l);return null!=u&&(p=yH(p,u)),MT(p,c,g,d)}var h=CX(t,"a","fused matMul"),f=CX(n,"b","fused matMul"),C=qD(h,f),I=(0,i.Z)(C,2);h=I[0],f=I[1];var m=a?h.shape[h.rank-2]:h.shape[h.rank-1],v=l?f.shape[f.rank-1]:f.shape[f.rank-2],b=a?h.shape[h.rank-1]:h.shape[h.rank-2],A=l?f.shape[f.rank-2]:f.shape[f.rank-1],y=h.shape.slice(0,-2),k=f.shape.slice(0,-2),Z=dV(y),S=dV(k);uV(m===v,(function(){return"Error in fused matMul: inner shapes (".concat(m,") and (")+"".concat(v,") of Tensors with shapes ").concat(h.shape," and ")+"".concat(f.shape," and transposeA=").concat(a)+" and transposeB=".concat(l," must match.")}));var w,B,x=tH(h.shape.slice(0,-2),f.shape.slice(0,-2)).concat([b,A]),G=MH(h,a?[Z,m,b]:[Z,b,m]),R=MH(f,l?[S,A,v]:[S,v,A]);if(null!=u){var W=qD(w=CX(u,"bias","fused matMul"),h);w=(0,i.Z)(W,1)[0],tH(x,w.shape)}null!=g&&(B=CX(g,"prelu weights","fused matMul"));var V=function(e,t){var n,r,o=(0,i.Z)(t,4),s=o[0],g=o[1],d=o[2],p=o[3],h=YT(MH(e,d.shape),d,c);return a||l?!a&&l?(n=WY(h,g,!1,!1),r=WY(h,s,!0,!1)):a&&!l?(n=WY(g,h,!1,!0),r=WY(s,h,!1,!1)):(n=WY(g,h,!0,!0),r=WY(h,s,!0,!0)):(n=WY(h,g,!1,!0),r=WY(s,h,!0,!1)),null!=u?[n,r,TT(p,h)]:[n,r]},F={a:G,b:R,bias:w,preluActivationWeights:B},N={transposeA:a,transposeB:l,activation:c,leakyreluAlpha:d};if(null==u){var E=mH((function(e,t,n){var r=uX.runKernel(UE,F,N);return n([e,t,r]),{value:MH(r,x),gradFunc:V}}));return E(G,R)}var D=mH((function(e,t,n,r){var a=uX.runKernel(UE,F,N);return r([e,t,a,n]),{value:MH(a,x),gradFunc:V}}));return D(G,R,w)}});function OT(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function UT(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(i)}return yT(a,"float32")}mX({hammingWindow_:function(e){return UT(e,.54,.46)}});var jT=mX({hannWindow_:function(e){return UT(e,.5,.5)}});function QT(e,t,n){if(cV(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=pX(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return bX(e,t,r,n)}var qT=mX({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0,i=[];o+t<=e.size;)i.push(cT(e,o,t)),o+=n;if(r)for(;o<e.size;){var l=o+t-e.size,u=jH([cT(e,o,t-l),IY([l],a)]);i.push(u),o+=n}return 0===i.length?QT([],[0,t]):MH(jH(i),[i.length,t])}});mX({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jT;null==r&&(r=OT(t));var o=qT(e,t,n),i=wY(o,a(t));return NT(i,r)}});var $T=mX({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=CX(e,"image","cropAndResize"),l=CX(t,"boxes","cropAndResize","float32"),u=CX(n,"boxInd","cropAndResize","int32"),s=l.shape[0];uV(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),uV(2===l.rank&&4===l.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(s,",4] ")+"but had shape ".concat(l.shape,".")})),uV(1===u.rank&&u.shape[0]===s,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(s,"] ")+"but had shape ".concat(l.shape,".")})),uV(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),uV(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),uV("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var c={image:i,boxes:l,boxInd:u},g={method:a,extrapolationValue:o,cropSize:r},d=uX.runKernel(NF,c,g);return d}});var eM=mX({flipLeftRight_:function(e){var t=CX(e,"image","flipLeftRight","float32");uV(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return uX.runKernel(tN,n,{})}});var tM=mX({grayscaleToRGB_:function(e){var t=CX(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];uV(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),uV(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,fY(t,a)}});var nM=mX({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=CX(e,"image","rotateWithOffset","float32");uV(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var o={image:a},i={radians:t,fillValue:n,center:r},l=uX.runKernel(OE,o,i);return l}});function rM(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),uV(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),uV(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),uV(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),uV(1===t.rank,(function(){return"scores must be a 1D tensor"})),uV(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0])})),uV(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var aM=mX({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=CX(e,"boxes","nonMaxSuppression","float32"),i=CX(t,"scores","nonMaxSuppression","float32"),l=rM(o,i,n,r,a),u={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold};return uX.runKernel(MN,{boxes:o,scores:i},u)}});function oM(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,o=0,i=!1;for(;r<a;){var l=n(t,e[o=r+(a-r>>>1)]);l>0?r=o+1:(a=o,i=!l)}return i?r:-r-1}(e,t,n||iM)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function iM(e,t){return e>t?1:e<t?-1:0}function lM(e,t,n,r,a){return cM(e,t,n,r,a,0)}function uM(e,t,n,r,a,o){return cM(e,t,n,r,a,0,!1,o,!0)}function sM(e,t,n,r,a,o){return cM(e,t,n,r,a,o,!0)}function cM(e,t,n,r,a,o){for(var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],s=[],c=0;c<t.length;c++)t[c]>a&&s.push({score:t[c],boxIndex:c,suppressBeginIndex:0});s.sort(pM);for(var g=o>0?-.5/o:0,d=[],p=[];d.length<n&&s.length>0;){var h=s.pop(),f=h.score,C=h.boxIndex,I=h.suppressBeginIndex;if(f<a)break;for(var m=!1,v=d.length-1;v>=I;--v){var b=gM(e,C,d[v]);if(b>=r){m=!0;break}if(h.score=h.score*dM(r,g,b),h.score<=a)break}h.suppressBeginIndex=d.length,m||(h.score===f?(d.push(C),p.push(h.score)):h.score>a&&oM(s,h,pM))}var A=d.length,y=n-A;l&&y>0&&(d.push.apply(d,(0,Ae.Z)(new Array(y).fill(0))),p.push.apply(p,(0,Ae.Z)(new Array(y).fill(0))));var k={selectedIndices:d};return i&&(k.selectedScores=p),u&&(k.validOutputs=A),k}function gM(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),l=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),s=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),g=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),p=(l-o)*(u-i),h=(g-s)*(d-c);if(p<=0||h<=0)return 0;var f=Math.max(o,s),C=Math.max(i,c),I=Math.min(l,g),m=Math.min(u,d),v=Math.max(I-f,0)*Math.max(m-C,0);return v/(p+h-v)}function dM(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function pM(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function hM(){return hM=j(q().mark((function e(t,n,r){var a,o,i,l,u,s,c,g,d,p,h=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,o=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,i=CX(t,"boxes","nonMaxSuppressionAsync"),l=CX(n,"scores","nonMaxSuppressionAsync"),u=rM(i,l,r,a,o),r=u.maxOutputSize,a=u.iouThreshold,o=u.scoreThreshold,e.next=10,Promise.all([i.data(),l.data()]);case 10:return s=e.sent,c=s[0],g=s[1],d=lM(c,g,r,a,o),p=d.selectedIndices,i!==t&&i.dispose(),l!==n&&l.dispose(),e.abrupt("return",yT(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),hM.apply(this,arguments)}var fM=function(e,t,n){return hM.apply(this,arguments)};var CM=mX({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=CX(e,"boxes","nonMaxSuppression"),l=CX(t,"scores","nonMaxSuppression"),u=rM(i,l,n,r,a,o),s={boxes:i,scores:l},c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},g=uX.runKernel(PN,s,c);return{selectedIndices:g[0],selectedScores:g[1]}}});function IM(){return IM=j(q().mark((function e(t,n,r){var a,o,i,l,u,s,c,g,d,p,h,f,C=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.length>3&&void 0!==C[3]?C[3]:.5,o=C.length>4&&void 0!==C[4]?C[4]:Number.NEGATIVE_INFINITY,i=C.length>5&&void 0!==C[5]?C[5]:0,l=CX(t,"boxes","nonMaxSuppressionAsync"),u=CX(n,"scores","nonMaxSuppressionAsync"),s=rM(l,u,r,a,o,i),r=s.maxOutputSize,a=s.iouThreshold,o=s.scoreThreshold,i=s.softNmsSigma,e.next=12,Promise.all([l.data(),u.data()]);case 12:return c=e.sent,g=c[0],d=c[1],p=sM(g,d,r,a,o,i),h=p.selectedIndices,f=p.selectedScores,l!==t&&l.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:yT(h,"int32"),selectedScores:yT(f)});case 19:case"end":return e.stop()}}),e)}))),IM.apply(this,arguments)}var mM=function(e,t,n){return IM.apply(this,arguments)};var vM=mX({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=CX(e,"boxes","nonMaxSuppression"),l=CX(t,"scores","nonMaxSuppression"),u=rM(i,l,n,r,a,null),s=u.maxOutputSize,c=u.iouThreshold,g=u.scoreThreshold,d={boxes:i,scores:l},p={maxOutputSize:s,iouThreshold:c,scoreThreshold:g,padToMaxOutputSize:o},h=uX.runKernel(KN,d,p);return{selectedIndices:h[0],validOutputs:h[1]}}});function bM(){return bM=j(q().mark((function e(t,n,r){var a,o,l,u,s,c,g,d,p,h,f,C,I,m,v,b,A=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A.length>3&&void 0!==A[3]?A[3]:.5,o=A.length>4&&void 0!==A[4]?A[4]:Number.NEGATIVE_INFINITY,l=A.length>5&&void 0!==A[5]&&A[5],u=CX(t,"boxes","nonMaxSuppressionAsync"),s=CX(n,"scores","nonMaxSuppressionAsync"),c=rM(u,s,r,a,o,null),g=c.maxOutputSize,d=c.iouThreshold,p=c.scoreThreshold,e.next=11,Promise.all([u.data(),s.data()]);case 11:return h=e.sent,f=(0,i.Z)(h,2),C=f[0],I=f[1],m=uM(C,I,g,d,p,l),v=m.selectedIndices,b=m.validOutputs,u!==t&&u.dispose(),s!==n&&s.dispose(),e.abrupt("return",{selectedIndices:yT(v,"int32"),validOutputs:vH(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),bM.apply(this,arguments)}var AM=function(e,t,n){return bM.apply(this,arguments)},yM=__webpack_require__(3878),kM=__webpack_require__(9199),ZM=__webpack_require__(5267);function SM(e){return(0,yM.Z)(e)||(0,kM.Z)(e)||(0,ea.Z)(e)||(0,ZM.Z)()}var wM=mX({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=CX(e,"images","resizeBilinear");uV(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),uV(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),uV(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=MH(a,[1,a.shape[0],a.shape[1],a.shape[2]])),SM(t);var l={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},s=uX.runKernel(oE,l,u);return i?MH(s,[s.shape[1],s.shape[2],s.shape[3]]):s}});var BM=mX({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=CX(e,"images","resizeNearestNeighbor");uV(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),uV(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),uV("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),uV(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=MH(a,[1,a.shape[0],a.shape[1],a.shape[2]])),SM(t);var l={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},s=uX.runKernel(rE,l,u);return i?MH(s,[s.shape[1],s.shape[2],s.shape[3]]):s}});var xM=mX({bincount_:function(e,t,n){var r=CX(e,"x","bincount"),a=CX(t,"weights","bincount");uV("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),uV(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),uV(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var o={x:r,weights:a},i={size:n};return uX.runKernel(CF,o,i)}});var GM=mX({lessEqual_:function(e,t){var n=CX(e,"a","lessEqual","string_or_numeric"),r=CX(t,"b","lessEqual","string_or_numeric"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(IN,l)}});var RM=mX({round_:function(e){var t={x:CX(e,"x","round")};return uX.runKernel(sE,t)}});function WM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return uX.runKernel(qN,{},a)}function VM(e,t){for(var n,r,a,o,i,l,u=yT([-1]),s=yT([0]),c=yT([0]),g=0;g<e.size-1;g++){n=cT(e,0,g+1),r=cT(e,g+1),i=cY(xY(n),t),l=cY(xY(r),t);var d=xY(wY(n,WM(0,n.size)));a=cY(d,xY(n));var p=IY(r.shape,n.size),h=yH(WM(0,r.size),p),f=wY(r,h);o=cY(xY(f),xY(r));var C=BY(a,o),I=BY(a,o),m=wY(i,l);c=wY(wY(m,C),I);var v=bY(c,s);s=BT(v,c,s),u=BT(v,yT([g]),u)}return u}var FM=mX({threshold_:function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=CX(e,"image","threshold"),c=.2989,g=.587,d=.114,p=s.shape[0]*s.shape[1],h=wY(yT([u]),255);if(uV(3===s.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(s.rank,".")})),uV(3===s.shape[2]||1===s.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(s.shape[2],".")})),uV("int32"===s.dtype||"float32"===s.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(s.dtype,".")})),uV("otsu"===o||"binary"===o,(function(){return"Method must be binary or otsu, but was ".concat(o)})),3===s.shape[2]){var f=IT(s,[1,1,1],-1),C=(0,i.Z)(f,3);t=C[0],n=C[1],r=C[2];var I=wY(t,c),m=wY(n,g),v=wY(r,d);a=yH(yH(I,m),v)}else a=e;if("otsu"===o){var b=xM(RJ(RM(a),"int32"),AX([]),256);h=VM(b,p)}var A=l?GM(a,h):bY(a,h),y=RJ(wY(A,255),"int32");return y}});var NM=mX({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,i=CX(e,"image","transform","float32"),l=CX(t,"transforms","transform","float32");uV(4===i.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),uV(2===l.rank&&(l.shape[0]===i.shape[0]||1===l.shape[0])&&8===l.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),uV(null==o||2===o.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,".")}));var u={image:i,transforms:l},s={interpolation:n,fillMode:r,fillValue:a,outputShape:o};return uX.runKernel(TE,u,s)}});var EM=mX({bandPart_:function(e,t,n){uV(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),uV(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=CX(e,"a","bandPart");uV(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,o=r.shape.slice(-2),l=(0,i.Z)(o,2),u=l[0],s=l[1];if(!(t<=u))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(u,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=u),n<0&&(n=s);var c=MH(WM(0,u,1,"int32"),[-1,1]),g=WM(0,s,1,"int32"),d=BY(c,g),p=RY(GM(d,vH(+t,"int32")),AY(d,vH(-n,"int32"))),h=UY([u,s],r.dtype);return MH(bT(ZT(MH(r,[-1,u,s])).map((function(e){return BT(p,e,h)}))),a)}});var DM=mX({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=CX(e,"x","min"),a={x:r},o={axis:t,keepDims:n};return uX.runKernel(NN,a,o)}});var XM=mX({pow_:function(e,t){var n=CX(e,"base","pow"),r=CX(t,"exp","pow"),a=qD(n,r),o=(0,i.Z)(a,2),l={a:n=o[0],b:r=o[1]};return uX.runKernel(UN,l)}});function JM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return AH(e);if(1!==e.rank&&null===n)return JM(MH(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return xY(AH(e),n);if(t===1/0)return SY(AH(e),n);if(t===-1/0)return DM(AH(e),n);if("euclidean"===t||2===t)return mT(xY(XM(AH(e),vH(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return SY(xY(AH(e),n[0]),n[1]-1);if(t===1/0)return SY(xY(AH(e),n[1]),n[0]);if(t===-1/0)return DM(xY(AH(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return mT(xY(PY(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var HM=mX({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=JM(e=CX(e,"x","norm"),t,n),o=a.shape;if(r){var i=vV(n,e.shape);o=HY(a.shape,i)}return MH(a,o)}});var YM=mX({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,uV(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){uV(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=IT(e,e.shape[0],0).map((function(e){return vT(e,[0])}))),uV(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(uX.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var o=wY(xY(wY(n[a],t)),n[a]);t=BY(t,o)}return cY(t,HM(t,"euclidean"))})))},o=0;o<e.length;++o)a(o);return t?bT(n,0):n}});function TM(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return uX.tidy((function(){uV(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=CY(n),o=WJ(e),l=QT([[1]],[1,1]),u=WJ(l),s=n>=r?r:n,c=function(e){var t=o,s=u,c=a,g=uX.tidy((function(){var t=cT(o,[e,e],[n-e,1]),i=HM(t),s=cT(o,[e,e],[1,1]),c=BT(bY(s,0),QT([[-1]]),QT([[1]])),g=BY(s,wY(c,i)),d=cY(t,g);u=1===d.shape[0]?WJ(l):jH([l,cT(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var p=LY(cY(WY(c,g),i)),h=cT(o,[e,0],[n-e,r]),f=wY(p,u),C=GT(u);if(0===e)o=BY(h,WY(f,WY(C,h)));else{var I=BY(h,WY(f,WY(C,h)));o=jH([cT(o,[0,0],[e,r]),I],0)}var m=GT(f),v=cT(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=BY(v,WY(WY(v,u),m));else{var b=BY(v,WY(WY(v,u),m));a=jH([cT(a,[0,0],[n,e]),b],1)}return[u,o,a]})),d=(0,i.Z)(g,3);u=d[0],o=d[1],a=d[2],fH([t,s,c])},g=0;g<s;++g)c(g);return!t&&n>r&&(a=cT(a,[0,0],[n,r]),o=cT(o,[0,0],[r,r])),[a,o]}))}var MM,KM=mX({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(uV(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return TM(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=ZT(MH(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];r.forEach((function(e){var n=TM(e,t),r=(0,i.Z)(n,2),l=r[0],u=r[1];a.push(l),o.push(u)}));var l=MH(bT(a,0),e.shape),u=MH(bT(o,0),e.shape);return[l,u]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(MM||(MM={}));var PM=mX({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MM.SUM_BY_NONZERO_WEIGHTS,r=CX(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=CX(t,"weights","computeWeightedLoss"));var o=null==a?r:wY(r,a);if(n===MM.NONE)return o;if(n===MM.SUM)return xY(o);if(n===MM.MEAN){if(null==a)return EY(o);var i=r.size/a.size,l=cY(xY(o),xY(a));return i>1?cY(l,vH(i)):l}if(n===MM.SUM_BY_NONZERO_WEIGHTS){if(null==a)return cY(xY(o),vH(r.size));var u=wY(a,jY(r.shape)),s=RJ(xY(_Y(u,vH(0))),"float32");return cY(xY(o),s)}throw Error("Unknown reduction: ".concat(n))}});mX({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:MM.SUM_BY_NONZERO_WEIGHTS,a=CX(e,"labels","absoluteDifference"),o=CX(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=CX(n,"weights","absoluteDifference")),sV(a.shape,o.shape,"Error in absoluteDifference: ");var l=AH(BY(a,o));return PM(l,i,r)}});mX({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:MM.SUM_BY_NONZERO_WEIGHTS,o=CX(e,"labels","cosineDistance"),i=CX(t,"predictions","cosineDistance"),l=null;null!=r&&(l=CX(r,"weights","cosineDistance")),sV(o.shape,i.shape,"Error in cosineDistance: ");var u=vH(1),s=BY(u,xY(wY(o,i),n,!0));return PM(s,l,a)}});mX({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:MM.SUM_BY_NONZERO_WEIGHTS,a=CX(e,"labels","hingeLoss"),o=CX(t,"predictions","hingeLoss"),i=null;null!=n&&(i=CX(n,"weights","hingeLoss")),sV(a.shape,o.shape,"Error in hingeLoss: ");var l=vH(1);a=BY(wY(vH(2),a),l);var u=oT(BY(l,wY(a,o)));return PM(u,i,r)}});mX({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:MM.SUM_BY_NONZERO_WEIGHTS,o=CX(e,"labels","huberLoss"),i=CX(t,"predictions","huberLoss"),l=null;null!=n&&(l=CX(n,"weights","huberLoss")),sV(o.shape,i.shape,"Error in huberLoss: ");var u=vH(r),s=AH(BY(i,o)),c=DY(s,u),g=BY(s,c),d=yH(wY(vH(.5),PY(c)),wY(u,g));return PM(d,l,a)}});mX({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:MM.SUM_BY_NONZERO_WEIGHTS,o=CX(e,"labels","logLoss"),i=CX(t,"predictions","logLoss"),l=null;null!=n&&(l=CX(n,"weights","logLoss")),sV(o.shape,i.shape,"Error in logLoss: ");var u=vH(1),s=vH(r),c=LY(wY(o,kY(yH(i,s)))),g=wY(BY(u,o),kY(yH(BY(u,i),s))),d=BY(c,g);return PM(d,l,a)}});var zM=mX({squaredDifference_:function(e,t){var n=CX(e,"a","squaredDifference"),r=CX(t,"b","squaredDifference"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(RE,l,{})}});mX({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:MM.SUM_BY_NONZERO_WEIGHTS,a=CX(e,"labels","meanSquaredError"),o=CX(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=CX(n,"weights","meanSquaredError")),sV(a.shape,o.shape,"Error in meanSquaredError: ");var l=zM(a,o);return PM(l,i,r)}});function LM(e,t){var n=CX(e,"labels","sigmoidCrossEntropyWithLogits"),r=CX(t,"logits","sigmoidCrossEntropyWithLogits");sV(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=oT(r),o=wY(r,n),i=ZY(pY(LY(AH(r))));return yH(BY(a,o),i)}mX({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:MM.SUM_BY_NONZERO_WEIGHTS,o=CX(e,"multiClassLabels","sigmoidCrossEntropy"),i=CX(t,"logits","sigmoidCrossEntropy"),l=null;if(null!=n&&(l=CX(n,"weights","sigmoidCrossEntropy")),sV(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=vH(r),s=vH(1),c=vH(.5);o=yH(wY(o,BY(s,u)),wY(c,u))}var g=LM(o,i);return PM(g,l,a)}});var _M=mX({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=CX(e,"x","logSumExp"),a=vV(t,r.shape),o=SY(r,a,!0),i=BY(r,o),l=pY(i),u=xY(l,a),s=kY(u),c=yH(MH(o,s.shape),s);if(n){var g=HY(c.shape,a);return MH(c,g)}return c}});function OM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=mH((function(e,t,r){var a=_M(t,[n],!0),o=BY(RJ(t,"float32"),a);r([e,o]);var l=LY(wY(o,e));return{value:xY(l,[n]),gradFunc:function(e,t){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l=HY(e.shape,[n]);return[wY(MH(e,l),BY(RJ(a,"float32"),pY(o))),wY(MH(e,l),BY(pY(o),RJ(a,"float32")))]}}}));return r(e,t)}mX({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:MM.SUM_BY_NONZERO_WEIGHTS,o=CX(e,"onehotLabels","softmaxCrossEntropy"),i=CX(t,"logits","softmaxCrossEntropy"),l=null;if(null!=n&&(l=CX(n,"weights","softmaxCrossEntropy")),sV(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=vH(r),s=vH(1),c=vH(o.shape[1]);o=yH(wY(o,BY(s,u)),cY(u,c))}var g=OM(o,i);return PM(g,l,a)}});mX({sparseFillEmptyRows_:function(e,t,n,r){var a=CX(e,"indices","sparseFillEmptyRows","int32"),o=CX(t,"values","sparseFillEmptyRows"),i=CX(n,"denseShape","sparseFillEmptyRows","int32"),l=CX(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape ".concat(o.shape));if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(i.shape));if(0!==l.rank)throw new Error("Default value should be a scalar but received shape ".concat(l.shape));var u={indices:a,values:o,denseShape:i,defaultValue:l},s=uX.runKernel(SE,u);return{outputIndices:s[0],outputValues:s[1],emptyRowIndicator:s[2],reverseIndexMap:s[3]}}});mX({sparseReshape_:function(e,t,n){var r=CX(e,"inputIndices","sparseReshape","int32"),a=CX(t,"inputShape","sparseReshape","int32"),o=CX(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(o.shape));var i={inputIndices:r,inputShape:a,newShape:o},l=uX.runKernel(wE,i);return{outputIndices:l[0],outputShape:l[1]}}});mX({sparseSegmentMean_:function(e,t,n){var r=CX(e,"data","sparseSegmentMean"),a=CX(t,"indices","sparseSegmentMean","int32"),o=CX(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return uX.runKernel(BE,i)}});mX({sparseSegmentSum_:function(e,t,n){var r=CX(e,"data","sparseSegmentSum"),a=CX(t,"indices","sparseSegmentSum","int32"),o=CX(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return uX.runKernel(xE,i)}});mX({stringNGrams_:function(e,t,n,r,a,o,i,l){var u=CX(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var s=CX(t,"dataSplits","stringNGrams");if("int32"!==s.dtype)throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:o,padWidth:i,preserveShortSequences:l},g={data:u,dataSplits:s},d=uX.runKernel(FE,g,c);return{nGrams:d[0],nGramsSplits:d[1]}}});mX({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=CX(e,"input","stringSplit","string"),a=CX(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var o={skipEmpty:n},i={input:r,delimiter:a},l=uX.runKernel(NE,i,o);return{indices:l[0],values:l[1],shape:l[2]}}});mX({stringToHashBucketFast_:function(e,t){var n=CX(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return uX.runKernel(EE,a,r)}});var UM={flipLeftRight:eM,grayscaleToRGB:tM,resizeNearestNeighbor:BM,resizeBilinear:wM,rotateWithOffset:nM,cropAndResize:$T,nonMaxSuppression:aM,nonMaxSuppressionAsync:fM,nonMaxSuppressionWithScore:CM,nonMaxSuppressionWithScoreAsync:mM,nonMaxSuppressionPadded:vM,nonMaxSuppressionPaddedAsync:AM,threshold:FM,transform:NM},jM={bandPart:EM,gramSchmidt:YM,qr:KM},QM=function(e){su(n,e);var t=hu(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return iu(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==o&&(a.epsilon=uX.backend.epsilon()),a}return uu(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=uX.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:hH((function(){return xT(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:hH((function(){return xT(a).variable(false)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable,l=t.accumulatedUpdates[r].variable;hH((function(){var e=yH(wY(i,t.rho),wY(PY(o),1-t.rho)),n=wY(cY(mT(yH(l,t.epsilon)),mT(yH(i,t.epsilon))),o),r=yH(wY(l,t.rho),wY(PY(n),1-t.rho));i.assign(e),l.assign(r);var u=yH(wY(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(fH(this.accumulatedGrads.map((function(e){return e.variable}))),fH(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ae.Z)(this.accumulatedGrads),(0,Ae.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=j(q().mark((function e(t){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(bH);QM.className="Adadelta",gH(QM);var qM=function(e){su(n,e);var t=hu(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return iu(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return uu(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=uX.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:hH((function(){return IY(a.shape,t.initialAccumulatorValue).variable(false)}))}}var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable;hH((function(){var e=yH(i,PY(o));i.assign(e);var n=yH(wY(cY(o,mT(yH(e,uX.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&fH(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(bH);qM.className="Adagrad",gH(qM);var $M=function(e){su(n,e);var t=hu(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return iu(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],hH((function(){o.accBeta1=vH(r).variable(),o.accBeta2=vH(a).variable()})),null==i&&(o.epsilon=uX.backend.epsilon()),o}return uu(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);hH((function(){var r=BY(1,t.accBeta1),a=BY(1,t.accBeta2);n.forEach((function(n,o){var i=uX.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:hH((function(){return xT(i).variable(false)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:"".concat(n,"/v"),variable:hH((function(){return xT(i).variable(false)}))});var l=Array.isArray(e)?e[o].tensor:e[n];if(null!=l){var u=t.accumulatedFirstMoment[o].variable,s=t.accumulatedSecondMoment[o].variable,c=yH(wY(u,t.beta1),wY(l,1-t.beta1)),g=yH(wY(s,t.beta2),wY(PY(l),1-t.beta2)),d=cY(c,r),p=cY(g,a);u.assign(c),s.assign(g);var h=yH(wY(cY(d,yH(mT(p),t.epsilon)),-t.learningRate),i);i.assign(h)}})),t.accBeta1.assign(wY(t.accBeta1,t.beta1)),t.accBeta2.assign(wY(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&fH(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&fH(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ae.Z)(this.accumulatedFirstMoment),(0,Ae.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=j(q().mark((function e(t){var n,r=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,hH((function(){r.accBeta1.assign(XM(r.beta1,r.iterations_+1)),r.accBeta2.assign(XM(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(bH);$M.className="Adam",gH($M);var eK=function(e){su(n,e);var t=hu(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return iu(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.decay=l,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],hH((function(){o.iteration=vH(0).variable(),o.accBeta1=vH(r).variable()})),null==i&&(o.epsilon=uX.backend.epsilon()),o}return uu(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);hH((function(){var r=BY(1,t.accBeta1),a=cY(-t.learningRate,yH(wY(t.iteration,t.decay),1));n.forEach((function(n,o){var i=uX.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:xT(i).variable(false)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:"".concat(n,"/v"),variable:xT(i).variable(false)});var l=Array.isArray(e)?e[o].tensor:e[n];if(null!=l){var u=t.accumulatedFirstMoment[o].variable,s=t.accumulatedWeightedInfNorm[o].variable,c=yH(wY(u,t.beta1),wY(l,1-t.beta1)),g=wY(s,t.beta2),d=AH(l),p=NY(g,d);u.assign(c),s.assign(p);var h=yH(wY(cY(a,r),cY(c,yH(p,t.epsilon))),i);i.assign(h)}})),t.iteration.assign(yH(t.iteration,1)),t.accBeta1.assign(wY(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&fH(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&fH(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(bH);eK.className="Adamax",gH(eK);var tK=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return uu(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);n.forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=uX.registeredVariables[n];hH((function(){var e=yH(wY(t.c,a),o);o.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=CH(vH(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(bH);tK.className="SGD",gH(tK);var nK=function(e){su(n,e);var t=hu(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return iu(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=vH(a.momentum),a}return uu(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=uX.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:hH((function(){return xT(a).variable(false)}))}}var o=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&hH((function(){var e,n=yH(wY(t.m,o),i);e=t.useNesterov?yH(wY(t.c,yH(i,wY(n,t.m))),a):yH(wY(t.c,n),a),o.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&fH(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(tK);nK.className="Momentum",gH(nK);var rK=function(e){su(n,e);var t=hu(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(iu(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=o,r.epsilon=i,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=l,null==i&&(r.epsilon=uX.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return uu(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=uX.registeredVariables[n],o=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:hH((function(){return xT(a).variable(o)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:hH((function(){return xT(a).variable(o)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:hH((function(){return xT(a).variable(o)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var l=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;hH((function(){var e=yH(wY(l,t.decay),wY(PY(i),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,o=yH(wY(n,t.decay),wY(i,1-t.decay)),s=cY(wY(i,t.learningRate),mT(BY(e,yH(PY(o),t.epsilon)))),c=yH(wY(u,t.momentum),s);l.assign(e),n.assign(o),u.assign(c);var g=BY(a,c);a.assign(g)}else{var d=yH(wY(l,t.decay),wY(PY(i),1-t.decay)),p=yH(wY(u,t.momentum),cY(wY(i,t.learningRate),mT(yH(d,t.epsilon))));l.assign(d),u.assign(p);var h=BY(a,p);a.assign(h)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&fH(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&fH(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&fH(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ae.Z)(this.accumulatedMeanSquares),(0,Ae.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,Ae.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=j(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(bH);rK.className="RMSProp",gH(rK);var aK=function(){function e(){iu(this,e)}return uu(e,null,[{key:"sgd",value:function(e){return new tK(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new nK(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new rK(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new $M(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new QM(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new eK(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new qM(e,t)}}]),e}(),oK={sgd:aK.sgd,momentum:aK.momentum,adadelta:aK.adadelta,adagrad:aK.adagrad,rmsprop:aK.rmsprop,adamax:aK.adamax,adam:aK.adam},iK="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function lK(){return new Promise((function(e){return iK((function(){return e()}))}))}function uK(e,t){var n=e[0].length;e.forEach((function(e,t){uV(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),uV(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)uV(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function sK(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function cK(e){return e<=30?e:RV(e,Math.floor(Math.sqrt(e)))}function gK(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function dK(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function pK(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],l=1;l<e;++l)l>=2*t+1||l%2===1?i.push(l):o.push(l);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function hK(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function fK(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function CK(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function IK(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===dV(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,l=0;l<a.length-1;++l)i*=a[l];var u=e.shape,s=a.slice();s.pop();for(var c=1,g=o;g<n;++g)c*=u[g],s.push(u[g]);var d=[].concat((0,Ae.Z)(WV(e.shape).map((function(e){return e/c}))),[1]).slice(0,o);return[s,i,c,d]}function mK(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,l=a;l<o;++l)i*=n[l];var u=a<1?1:a;return{sliceRank:a,numUpdates:dV(t.shape)/u,sliceSize:i,strides:[].concat((0,Ae.Z)(WV(n.slice(0,a))),[1]),outputSize:dV(n)}}var vK=1.7580993408473768,bK=1.0507009873554805,AK=.3275911,yK=.254829592,kK=-.284496736,ZK=1.421413741,SK=-1.453152027,wK=1.061405429;function BK(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function xK(e,t){return{real:e[2*t],imag:e[2*t+1]}}function GK(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function RK(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var WK="->",VK=/->/g;function FK(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(VK,"").length)/WK.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(WK,'").'));var r=e.split(WK),a=(0,i.Z)(r,2),o=a[0],l=a[1];uV(-1===o.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var u=o.split(","),s=u.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],g=function(e){var t=l[e];if(!u.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},d=0;d<l.length;++d)g(d);for(var p=0;p<o.length;++p){var h=o[p];-1===c.indexOf(h)&&","!==h&&c.push(h)}for(var f=new Array(u.length),C=0;C<s;++C){if(new Set(u[C].split("")).size!==u[C].length)throw new Error("Found duplicate axes in input component ".concat(u[C],". ")+"Support for duplicate axes in input is not implemented yet.");f[C]=[];for(var I=0;I<u[C].length;++I)f[C].push(c.indexOf(u[C][I]))}for(var m=c.length,v=[],b=l.length;b<m;++b)v.push(b);return{allDims:c,summedDims:v,idDims:f}}function NK(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],o=0;o<e;++o)-1===n[o]&&a.push(o);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function EK(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,o=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:uV(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},i=0;i<t[e].length;++i)o(i)},o=0;o<n.length;++o)a(o)}function DK(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var o=0;o<n;++o)a.push([]);for(var i=[],l=0;l<r.length;++l){var u,s=ta(JK(t,r[l]));try{for(s.s();!(u=s.n()).done;){var c=u.value;-1===i.indexOf(c)&&(a[l].push(c),i.push(c))}}catch(Kle){s.e(Kle)}finally{s.f()}}return{path:r,steps:a}}function XK(e){return e.every((function(e,t){return e===t}))}function JK(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function HK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)uV(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);uV(a<=1,(function(){return"There should be only one negative value in split array."}));var o=t.indexOf(-1);if(-1!==o){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[o]=e.shape[n]-i}uV(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function YK(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function TK(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function MK(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function KK(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function PK(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function zK(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var l=e.shape[n],u=[],s=1,c=1,g=1,d=0;d<r;++d)u.push(e.shape[d]),s*=e.shape[d];for(var p=r;p<n;p++)u.push(e.shape[p]),c*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var f=n+1;f<o;f++)u.push(e.shape[f]),g*=e.shape[f];return{batchSize:s,sliceSize:g,outerSize:c,dimSize:l,outputShape:u}}function LK(e){try{return e.map((function(e){return xD(e)}))}catch(Kle){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Kle))}}function _K(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=GJ(e,"int32"),o=GJ([n.length,e.length],"int32"),i=0;i<n.length;i++){var l=a.indexToLoc(n[i]),u=i*e.length;o.values.set(l,u)}return o.toTensor()}var OK={kernelName:jV,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(e,HT(RJ(n,"float32"),-1))}}}},UK={kernelName:QV,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){var t=PY(RJ(n,"float32")),r=mT(BY(vH(1),t));return LY(cY(e,r))}}}},jK={kernelName:qV,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){var t=mT(BY(PY(RJ(n,"float32")),1));return cY(e,t)}}}},QK={kernelName:$V,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=tH(r.shape,a.shape);return{a:function(){var t=e,n=eH(r.shape,o);return n.length>0&&(t=xY(t,n)),MH(t,r.shape)},b:function(){var t=e,n=eH(a.shape,o);return n.length>0&&(t=xY(t,n)),MH(t,a.shape)}}}},qK={kernelName:eF,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},$K={kernelName:rF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return xT(n)}}}},eP={kernelName:aF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return xT(n)}}}},tP={kernelName:oF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return cY(e,mT(BY(vH(1),PY(RJ(n,"float32")))))}}}},nP={kernelName:iF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){var t=mT(yH(vH(1),PY(RJ(n,"float32"))));return cY(e,t)}}}},rP={kernelName:sF,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=tH(r.shape,a.shape);return{a:function(){var t=yH(PY(r),PY(a)),n=wY(e,cY(a,t)),i=eH(r.shape,o);return i.length>0&&(n=xY(n,i)),MH(n,r.shape)},b:function(){var t=yH(PY(r),PY(a)),n=LY(wY(e,cY(r,t))),i=eH(a.shape,o);return i.length>0&&(n=xY(n,i)),MH(n,a.shape)}}}},aP={kernelName:lF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return cY(e,yH(PY(RJ(n,"float32")),1))}}}},oP={kernelName:uF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return cY(e,BY(vH(1),PY(RJ(n,"float32"))))}}}};var iP=mX({avgPool3dGrad_:function(e,t,n,r,a,o){var i=CX(e,"dy","avgPool3dGrad"),l=CX(t,"input","avgPool3dGrad"),u=i,s=l,c=!1;4===l.rank&&(c=!0,u=MH(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),s=MH(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),uV(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),uV(5===s.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(s.rank,".")})),TH("avgPool3dGrad",a,o);var g={dy:u,input:s},d={filterSize:n,strides:r,pad:a,dimRoundingMode:o},p=uX.runKernel(pF,g,d);return c?MH(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),lP={kernelName:dF,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=n.filterSize,o=n.strides,l=n.pad,u=n.dimRoundingMode;return{x:function(){return iP(e,r,a,o,l,u)}}}};var uP=mX({avgPoolGrad_:function(e,t,n,r,a){var o=CX(e,"dy","avgPoolGrad"),i=CX(t,"input","avgPoolGrad");uV(i.rank===o.rank,(function(){return"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(o.rank,")")}));var l=i,u=o,s=!1;3===i.rank&&(s=!0,l=MH(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=MH(o,[1,o.shape[0],o.shape[1],o.shape[2]])),uV(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),uV(4===l.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,".")}));var c={dy:u,input:l},g={filterSize:n,strides:r,pad:a},d=uX.runKernel(gF,c,g);return s?MH(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),sP={kernelName:cF,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=n.filterSize,o=n.strides,l=n.pad;return{x:function(){return uP(e,r,a,o,l)}}}},cP={kernelName:hF,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l=n.transposeA,u=n.transposeB;return l||u?!l&&u?{a:function(){return WY(e,o,!1,!1)},b:function(){return WY(e,a,!0,!1)}}:l&&!u?{a:function(){return WY(o,e,!1,!0)},b:function(){return WY(a,e,!1,!1)}}:{a:function(){return WY(o,e,!0,!0)},b:function(){return WY(e,a,!0,!0)}}:{a:function(){return WY(e,o,!1,!0)},b:function(){return WY(a,e,!0,!1)}}}};var gP=mX({spaceToBatchND_:function(e,t,n){var r=CX(e,"x","spaceToBatchND");uV(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),uV(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),uV(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},o={blockShape:t,paddings:n};return uX.runKernel(yE,a,o)}}),dP={kernelName:fF,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return gP(e,r,a)}}}},pP={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,o=r.shape,i=Array.from(o),l=a.length-1;l>=0;l--)if(a[l]===o[l])i[l]=1;else if(1!==a[l])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(o,"]."));for(var u=[],s=0;s<i.length;s++)i[s]>1&&u.push(s);return{x:function(){return xY(e,u,!0)}}}},hP={kernelName:mF,gradFunc:function(e){return{x:function(){return e.clone()}}}},fP={kernelName:vF,gradFunc:function(e){return{x:function(){return xT(e)}}}},CP={kernelName:bF,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=n.clipValueMin,o=n.clipValueMax;return{x:function(){return BT(RY(AY(r,a),GM(r,o)),e,xT(e))}}}},IP={kernelName:yF,inputsToSave:["x"],gradFunc:OK.gradFunc},mP={kernelName:kF,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=vV(n.axis,t[0].shape)[0],o=r.map((function(e){return e[a]}));return IT(e,o,a).map((function(e){return function(){return e}}))}},vP={kernelName:ZF,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l=n.dilations,u=n.strides,s=n.pad,c=n.dataFormat;return uV(JH(l),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(l,"'")})),{x:function(){return rY(a.shape,e,o,u,s,c)},filter:function(){return XT(a,e,o.shape,u,s,c)}}}},bP={kernelName:wF,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l=n.strides,u=n.pad,s=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return tY(e,o,l,u,s,1,c)},filter:function(){return XT(e,a,o.shape,l,u,s,c)}}}};var AP=mX({conv3DBackpropFilter_:function(e,t,n,r,a){var o=e;4===e.rank&&(o=MH(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var i=t;4===i.rank&&(i=MH(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),uV(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(o.shape,".")})),uV(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,".")})),uV(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),uV(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(o.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),uV(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var l={x:o,dy:i},u={strides:r,pad:a,filterShape:n};return uX.runKernel(xF,l,u)}}),yP={kernelName:BF,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad;uV(JH(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var l=(0,i.Z)(t,2),u=l[0],s=l[1];return{x:function(){return iY(u.shape,e,s,a,o)},filter:function(){return AP(u,e,s.shape,a,o)}}}};var kP=mX({sin_:function(e){var t={x:CX(e,"x","sin","float32")};return uX.runKernel(fE,t)}}),ZP={kernelName:RF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(LY(kP(RJ(n,"float32"))),e)}}}};var SP=mX({sinh_:function(e){var t={x:CX(e,"x","sinh")};return uX.runKernel(CE,t)}}),wP={kernelName:WF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(SP(RJ(n,"float32")),e)}}}};var BP=mX({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=CX(e,"x","cumsum"),o={x:a},i={axis:t,exclusive:n,reverse:r};return uX.runKernel(FF,o,i)}}),xP={kernelName:FF,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=n.axis,o=n.exclusive,l=n.reverse;return{x:function(){var t=TY([a],r.rank),n=BP(e,a,o,!l);return null!=t&&(n=GT(n,t)),n}}}},GP={kernelName:XF,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad,l=n.dimRoundingMode,u=null==r?[1,1]:r;uV(JH(u),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var s=(0,i.Z)(t,2),c=s[0],g=s[1];return uV(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),uV(4===g.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(g.rank,".")})),uV(c.shape[3]===g.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(g.shape[2],".")})),uV(HH(a,u),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(u,"'.")})),TH("depthwiseConv2d",o,l),{x:function(){return LT(c.shape,e,g,a,o,u,l)},filter:function(){return zT(c,e,g.shape,a,o,u,l)}}}},RP={kernelName:TF,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l={x:a,filter:o,dy:e},u={x:a,filter:o,dy:e};return{x:function(){return uX.runKernel(MF,l,n)},filter:function(){return uX.runKernel(KF,u,n)}}}},WP={kernelName:LF,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,i.Z)(t,1)[0]};return{x:function(){return uX.runKernel(_F,n)}}}},VP={kernelName:OF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0],r=wY(pY(LY(PY(n))),2/Math.sqrt(Math.PI));return{x:function(){return wY(e,r)}}}},FP={kernelName:jF,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(e,n)}}}},NP={kernelName:QF,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{input:function(){return MH(e,n.shape)}}}},EP={kernelName:qF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(e,pY(n))}}}},DP={kernelName:nN,gradFunc:function(e){return{x:function(){return xT(e)}}}},XP={kernelName:rN,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=tH(r.shape,a.shape);return{a:function(){var t=cY(e,RJ(a,"float32")),n=eH(r.shape,o);return n.length>0?MH(xY(t,n),r.shape):t},b:function(){var t=wY(e,RJ(r,"float32")),n=eH(a.shape,o);n.length>0&&(t=MH(xY(t,n),a.shape));var i=PY(a);return LY(cY(t,RJ(i,"float32")))}}}};var JP=mX({rsqrt_:function(e){var t={x:CX(e,"x","rsqrt","float32")};return uX.runKernel(cE,t)}}),HP={kernelName:aN,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,i.Z)(t,4),o=a[0],l=a[1],u=a[2],s=a[3],c=null==s?vH(1):s,g=eH(l.shape,o.shape),d=[];if(1===l.rank){for(var p=0;p<o.shape.length-1;++p)d.push(o.shape[p]);d.push(1)}var h=BY(o,l),f=wY(e,c),C=JP(yH(u,vH(r))),I=wY(wY(wY(C,C),C),vH(-.5));return{x:function(){return 1===l.rank?MH(wY(wY(e,fY(MH(C,[1,1,1,l.shape[0]]),d)),c),o.shape):MH(wY(wY(e,C),c),o.shape)},mean:function(){var e=wY(wY(C,vH(-1)),f);return 1===l.rank&&(e=xY(e,g)),MH(e,l.shape)},variance:function(){var e=wY(wY(I,h),f);return 1===l.rank&&(e=xY(e,g)),MH(e,l.shape)},scale:function(){var t=wY(h,C),n=wY(e,t);return 1===l.rank&&(n=xY(n,g)),MH(n,l.shape)},offset:function(){var t=e;return 1===l.rank&&(t=xY(t,g)),MH(t,l.shape)}}}};var YP=mX({unsortedSegmentSum_:function(e,t,n){var r=CX(e,"x","unsortedSegmentSum"),a=CX(t,"segmentIds","unsortedSegmentSum","int32");uV(hV(n),(function(){return"numSegments must be of dtype int"}));var o={x:r,segmentIds:a},i={numSegments:n};return uX.runKernel(zE,o,i)}}),TP={kernelName:oN,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l=n.axis,u=vV(l,a.shape)[0];return{x:function(){var t=a.shape,n=o.size,r=t.slice(0,u),i=r.length,s=t.slice(l,t.length).slice(1),c=s.length,g=MP(0,i),d=MP(i+1,i+1+c),p=KP([r,[n],s]),h=MH(e,p),f=MH(o,[n]),C=KP([[i],g,d]),I=GT(h,C),m=YP(I,f,a.shape[u]),v=MY(C);return m=GT(m,v)},indices:function(){return o}}}};function MP(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function KP(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var PP={kernelName:uN,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];return{a:function(){return xT(r)},b:function(){return xT(a)}}}},zP={kernelName:sN,gradFunc:function(e){return{x:function(){return RJ(e,"float32")}}}},LP={kernelName:dN,gradFunc:function(e){return{x:function(){return xT(e)}}}},_P={kernelName:pN,gradFunc:function(e){return{x:function(){return xT(e)}}}},OP={kernelName:hN,gradFunc:function(e){return{x:function(){return xT(e)}}}},UP={kernelName:fN,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=n.alpha,o=bY(r,0);return{x:function(){return BT(o,e,wY(e,a))}}}},jP={kernelName:bN,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return cY(e,yH(n,1))}}}},QP={kernelName:vN,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return cY(e,RJ(n,"float32"))}}}},qP={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=pY(r);return BY(e,wY(xY(e,a,!0),t))}}}};var $P=mX({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,l={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:o,beta:i};return uX.runKernel(SN,l,u)}}),ez={kernelName:ZN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l=n.depthRadius,u=n.bias,s=n.alpha,c=n.beta;return{x:function(){return $P(a,o,e,l,u,s,c)}}}};function tz(e,t,n,r){return t.rank<n.rank&&(t=MH(t,HY(t.shape,r))),e.rank<n.rank&&(e=MH(e,HY(e.shape,r))),{x:function(){return wY(e,RJ(dY(n,t),e.dtype))}}}var nz={kernelName:wN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],o=tz(e,t[1],a,vV(r,a.shape));return{x:function(){return o.x()}}}};var rz=mX({less_:function(e,t){var n=CX(e,"a","less","string_or_numeric"),r=CX(t,"b","less","string_or_numeric"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1],tH(n.shape,r.shape);var l={a:n,b:r};return uX.runKernel(CN,l)}}),az={kernelName:BN,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];return{a:function(){return wY(e,RJ(AY(r,a),"float32"))},b:function(){return wY(e,RJ(rz(r,a),"float32"))}}}};var oz=mX({maxPool3dGrad_:function(e,t,n,r,a,o,i){var l=CX(e,"dy","maxPool3dGrad"),u=CX(t,"input","maxPool3dGrad"),s=CX(n,"output","maxPool3dGrad"),c=l,g=u,d=s,p=!1;4===u.rank&&(p=!0,c=MH(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),g=MH(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=MH(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),uV(5===c.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")})),uV(5===g.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(g.rank,".")})),uV(5===d.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")})),TH("maxPool3dGrad",o,i);var h={dy:c,input:g,output:d},f={filterSize:r,strides:a,pad:o,dimRoundingMode:i},C=uX.runKernel(WN,h,f);return p?MH(C,[C.shape[1],C.shape[2],C.shape[3],C.shape[4]]):C}}),iz={kernelName:RN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l=n.filterSize,u=n.strides,s=n.pad,c=n.dimRoundingMode;return{x:function(){return oz(e,a,o,l,u,s,c)}}}};var lz=mX({maxPoolGrad_:function(e,t,n,r,a,o,i){var l=CX(e,"dy","maxPoolGrad"),u=CX(t,"input","maxPoolGrad"),s=CX(n,"output","maxPoolGrad");uV(u.rank===l.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(l.rank,")")})),uV(4===l.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,".")})),uV(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),TH("maxPoolGrad",o,i);var c={dy:l,input:u,output:s},g={filterSize:r,strides:a,pad:o,dimRoundingMode:i};return uX.runKernel(GN,c,g)}}),uz={kernelName:xN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],l=n.filterSize,u=n.strides,s=n.pad;return{x:function(){return lz(e,a,o,l,u,s)}}}},sz={kernelName:FN,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=vV(n.axis,r.shape),o=dV(JY(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=MH(e,t);return cY(wY(n,jY(r.shape,"float32")),o)}}}},cz={kernelName:NN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,i.Z)(t,2),o=a[0],l=tz(e,a[1],o,vV(r,o.shape));return{x:function(){return l.x()}}}},gz={kernelName:EN,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];return{a:function(){return wY(e,RJ(GM(r,a),"float32"))},b:function(){return wY(e,RJ(bY(r,a),"float32"))}}}},dz={kernelName:DN,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return cT(e,a,r.shape)}}}},pz={kernelName:XN,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=tH(r.shape,a.shape);return{a:function(){var t=eH(r.shape,o);return t.length>0?MH(xY(e,t),r.shape):e},b:function(){var t=wY(e,LY(mY(cY(r,a)))),n=eH(a.shape,o);return n.length>0?MH(xY(t,n),a.shape):t}}}},hz={kernelName:HN,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=tH(r.shape,a.shape);return{a:function(){var t=wY(e,RJ(a,"float32")),n=eH(r.shape,o);return n.length>0?MH(xY(t,n),r.shape):t},b:function(){var t=wY(e,RJ(r,"float32")),n=eH(a.shape,o);return n.length>0?MH(xY(t,n),a.shape):t}}}},fz={kernelName:YN,gradFunc:function(e){return{x:function(){return LY(e)}}}},Cz={kernelName:LN,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return UY(n.shape,"float32")}}}},Iz={kernelName:zN,gradFunc:function(e){return{x:function(){return xT(e)}}}},mz={kernelName:_N,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return ZT(e,r).map((function(e){return function(){return e}}))}},vz={kernelName:ON,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return cT(e,a,r.shape)}}}},bz={kernelName:UN,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,i.Z)(t,3),r=n[0],a=n[1],o=n[2],l=r,u=a,s=tH(l.shape,u.shape);return{a:function(){var t=RJ(u,"float32"),n=wY(e,wY(t,XM(l,BY(t,vH(1))))),r=eH(l.shape,s);return r.length>0&&(n=xY(n,r)),MH(n,l.shape)},b:function(){var t=bY(l,0),n=BT(t,kY(l),xT(l)),r=wY(e,wY(o,n)),a=eH(u.shape,s);return a.length>0&&(r=xY(r,a)),MH(r,u.shape)}}}},Az={kernelName:jN,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=bY(r,0);return{x:function(){return BT(o,e,wY(e,a))},alpha:function(){var t=BT(o,xT(e),wY(e,r)),n=eH(a.shape,e.shape);return n.length>0&&(t=xY(t,n)),MH(t,a.shape)}}}},yz={kernelName:PF,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=tH(r.shape,a.shape);return{a:function(){var t=cY(e,RJ(a,"float32")),n=eH(r.shape,o);return n.length>0?MH(xY(t,n),r.shape):t},b:function(){var t=wY(e,RJ(r,"float32")),n=eH(a.shape,o);n.length>0&&(t=MH(xY(t,n),a.shape));var i=PY(a);return LY(cY(t,RJ(i,"float32")))}}}},kz={kernelName:eE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return cY(e,LY(PY(n)))}}}},Zz={kernelName:lE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0],r=wY(GM(n,6),HT(n));return{x:function(){return wY(e,RJ(r,"float32"))}}}},Sz={kernelName:tE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(e,RJ(HT(n),"float32"))}}}},wz={kernelName:nE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return MH(e,n.shape)}}}},Bz={kernelName:oE,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,i.Z)(t,1)[0]};return{images:function(){return uX.runKernel(iE,r,n)}}}},xz={kernelName:rE,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,i.Z)(t,1)[0]};return{images:function(){return uX.runKernel(aE,r,n)}}}},Gz={kernelName:uE,gradFunc:function(e,t,n){var r=vV(n.dims,e.shape);return{x:function(){return iT(e,r)}}}},Rz={kernelName:sE,gradFunc:function(e){return{x:function(){return xT(e)}}}},Wz={kernelName:cE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return LY(cY(e,wY(XM(n,1.5),2)))}}}};var Vz=mX({logicalNot_:function(e){var t={x:CX(e,"x","logicalNot","bool")};return uX.runKernel(yN,t)}}),Fz={kernelName:dE,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{condition:function(){return RJ(xT(n),"float32")},t:function(){return wY(e,RJ(n,e.dtype))},e:function(){return wY(e,RJ(Vz(n),e.dtype))}}}},Nz={kernelName:pE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){var t=bY(n,vH(0)),r=vH(vK),a=vH(bK),o=wY(e,a),i=wY(wY(e,r),pY(RJ(n,"float32")));return BT(t,o,i)}}}},Ez={kernelName:mE,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(e,wY(n,BY(vH(1),n)))}}}},Dz={kernelName:IE,gradFunc:function(e){return{x:function(){return xT(e)}}}};var Xz=mX({cos_:function(e){var t={x:CX(e,"x","cos","float32")};return uX.runKernel(RF,t)}}),Jz={kernelName:fE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(Xz(RJ(n,"float32")),e)}}}};var Hz=mX({cosh_:function(e){var t={x:CX(e,"x","cosh","float32")};return uX.runKernel(WF,t)}}),Yz={kernelName:CE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(Hz(RJ(n,"float32")),e)}}}},Tz={kernelName:hE,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,i.Z)(t,1)[0],a=n.begin,o=n.size,l=r.shape,u=iH(r,a,o),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=[],p=0;p<e.rank;p++)d.push([c[p],l[p]-c[p]-g[p]]);return{x:function(){return qY(e,d)}}}},Mz={kernelName:ZE,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=n.dim,o=wY(e,r);return{logits:function(){return BY(o,wY(xY(o,[a],true),r))}}}},Kz={kernelName:vE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(e,sT(n))}}}};var Pz=mX({batchToSpaceND_:function(e,t,n){var r=CX(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));uV(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),uV(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),uV(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var o={x:r},i={blockShape:t,crops:n};return uX.runKernel(fF,o,i)}}),zz={kernelName:yE,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Pz(e,r,a)}}}},Lz={kernelName:kE,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return jH(e,r)}}}},_z={kernelName:RE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=vH(2);return{a:function(){return wY(e,wY(o,BY(r,a)))},b:function(){return wY(e,wY(o,BY(a,r)))}}}},Oz={kernelName:DE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=tH(r.shape,a.shape);return{a:function(){var t=e,n=eH(r.shape,o);return n.length>0&&(t=xY(t,n)),MH(t,r.shape)},b:function(){var t=e,n=eH(a.shape,o);return n.length>0&&(t=xY(t,n)),MH(LY(t),a.shape)}}}},Uz={kernelName:AE,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=r.shape.slice();vV(n.axis,r.shape).forEach((function(e){a[e]=1}));var o=MH(e,a),l=wY(o,jY(r.shape,"float32"));return{x:function(){return l}}}},jz={kernelName:HE,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,i.Z)(t,1)[0],a=n.reps;return{x:function(){var t=xT(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=yH(t,cT(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var o=0;o<a[0];++o)for(var i=0;i<a[1];++i)t=yH(t,cT(e,[o*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var l=0;l<a[0];++l)for(var u=0;u<a[1];++u)for(var s=0;s<a[2];++s)t=yH(t,cT(e,[l*r.shape[0],u*r.shape[1],s*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var c=0;c<a[0];++c)for(var g=0;g<a[1];++g)for(var d=0;d<a[2];++d)for(var p=0;p<a[3];++p)t=yH(t,cT(e,[c*r.shape[0],g*r.shape[1],d*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},Qz={kernelName:zE,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=NY(t,xT(t)),r=vY(e,n),a=AY(t,vH(0,"int32")),o=r.rank-a.rank,i=0;i<o;++i)a=hY(a,i+1);a=RY(a,jY(r.shape,"bool"));var l=xT(r);return BT(a,r,l)}(e,n)}}}};for(var qz=0,$z=[OK,UK,jK,QK,qK,$K,eP,tP,nP,rP,aP,oP,lP,sP,cP,dP,pP,hP,fP,CP,IP,mP,bP,vP,yP,ZP,wP,xP,GP,RP,yz,WP,VP,FP,NP,EP,XP,DP,HP,TP,PP,zP,LP,_P,OP,UP,jP,QP,qP,ez,nz,nz,az,iz,uz,sz,cz,gz,dz,pz,hz,fz,Cz,Iz,mz,vz,vz,bz,Az,kz,Zz,Sz,wz,Bz,xz,Gz,Rz,Wz,Fz,Nz,Ez,Dz,Jz,Yz,Tz,Mz,Kz,zz,zz,Lz,Lz,{kernelName:bE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return cY(e,wY(mT(RJ(n,"float32")),2))}}}},_z,{kernelName:WE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(e,wY(RJ(n,"float32"),2))}}}},{kernelName:_E,gradFunc:function(e){return{x:function(){return xT(e)}}}},Oz,Uz,{kernelName:XE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return cY(e,PY(Xz(n)))}}}},{kernelName:JE,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,i.Z)(t,1)[0];return{x:function(){return wY(BY(vH(1),PY(n)),e)}}}},jz,{kernelName:ME,gradFunc:function(e,t,n){var r=MY(n.perm);return{x:function(){return GT(e,r)}}}},{kernelName:PE,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return bT(e,r)}}}},Qz,{kernelName:LE,gradFunc:function(e){return{x:function(){return xT(e)}}}}];qz<$z.length;qz++){oD($z[qz])}MD().prototype.abs=function(){return this.throwIfDisposed(),AH(this)};var eL=mX({acos_:function(e){var t={x:CX(e,"x","acos")};return uX.runKernel(QV,t)}});MD().prototype.acos=function(){return this.throwIfDisposed(),eL(this)};var tL=mX({acosh_:function(e){var t={x:CX(e,"x","acosh")};return uX.runKernel(qV,t)}});MD().prototype.acosh=function(){return this.throwIfDisposed(),tL(this)},MD().prototype.add=function(e){return this.throwIfDisposed(),yH(this,e)},MD().prototype.all=function(e,t){return this.throwIfDisposed(),kH(this,e,t)},MD().prototype.any=function(e,t){return this.throwIfDisposed(),ZH(this,e,t)},MD().prototype.argMax=function(e){return this.throwIfDisposed(),SH(this,e)};var nL=mX({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=CX(e,"x","argMin"),r={x:n},a={axis:t};return uX.runKernel(aF,r,a)}});MD().prototype.argMin=function(e){return this.throwIfDisposed(),nL(this,e)},MD().prototype.asScalar=function(){return this.throwIfDisposed(),uV(1===this.size,(function(){return"The array must have only 1 element."})),MH(this,[])},MD().prototype.asType=function(e){return this.throwIfDisposed(),RJ(this,e)},MD().prototype.as1D=function(){return this.throwIfDisposed(),MH(this,[this.size])},MD().prototype.as2D=function(e,t){return this.throwIfDisposed(),MH(this,[e,t])},MD().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),MH(this,[e,t,n])},MD().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),MH(this,[e,t,n,r])},MD().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),MH(this,[e,t,n,r,a])};var rL=mX({asin_:function(e){var t={x:CX(e,"x","asin")};return uX.runKernel(oF,t)}});MD().prototype.asin=function(){return this.throwIfDisposed(),rL(this)};var aL=mX({asinh_:function(e){var t={x:CX(e,"x","asinh")};return uX.runKernel(iF,t)}});MD().prototype.asinh=function(){return this.throwIfDisposed(),aL(this)};var oL=mX({atan_:function(e){var t={x:CX(e,"x","atan")};return uX.runKernel(lF,t)}});MD().prototype.atan=function(){return this.throwIfDisposed(),oL(this)};var iL=mX({atan2_:function(e,t){var n=CX(e,"a","atan2"),r=CX(t,"b","atan2"),a=qD(n,r),o=(0,i.Z)(a,2),l={a:n=o[0],b:r=o[1]};return uX.runKernel(sF,l)}});MD().prototype.atan2=function(e){return this.throwIfDisposed(),iL(this,e)};var lL=mX({atanh_:function(e){var t={x:CX(e,"x","atanh")};return uX.runKernel(uF,t)}});MD().prototype.atanh=function(){return this.throwIfDisposed(),lL(this)},MD().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),KH(this,e,t,n,r)},MD().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Pz(this,e,t)},MD().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),zH(this,e,t,n,r,a)},MD().prototype.broadcastTo=function(e){return this.throwIfDisposed(),wT(this,e)},MD().prototype.cast=function(e){return this.throwIfDisposed(),RJ(this,e)};var uL=mX({ceil_:function(e){var t={x:CX(e,"x","ceil","float32")};return uX.runKernel(vF,t)}});MD().prototype.ceil=function(){return this.throwIfDisposed(),uL(this)},MD().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),UH(this,e,t)},MD().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof TD&&(e=[e]),jH([this].concat((0,Ae.Z)(e)),t)},MD().prototype.conv1d=function(e,t,n,r,a,o){return this.throwIfDisposed(),nY(this,e,t,n,r,a,o)},MD().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),aY(this,e,t,n,r,a)},MD().prototype.conv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),tY(this,e,t,n,r,a,o)},MD().prototype.cos=function(){return this.throwIfDisposed(),Xz(this)},MD().prototype.cosh=function(){return this.throwIfDisposed(),Hz(this)};var sL=mX({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=CX(e,"x","cumprod"),o={x:a},i={axis:t,exclusive:n,reverse:r};return uX.runKernel(VF,o,i)}});MD().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),sL(this,e,t,n)},MD().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),BP(this,e,t,n)};var cL=mX({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=CX(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];uV(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),uV(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),uV(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),uV(i%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape)}));var l={x:r},u={blockSize:t,dataFormat:n};return uX.runKernel(DF,l,u)}});MD().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),cL(this,e,t)},MD().prototype.depthwiseConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),uY(this,e,t,n,r,a,o)};var gL=mX({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=CX(e,"x","dilation2d"),l=CX(t,"filter","dilation2d");uV(3===i.rank||4===i.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,".")})),uV(3===l.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(l.rank,".")})),uV("NHWC"===o,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o)}));var u=i,s=!1;3===i.rank&&(u=MH(i,[1,i.shape[0],i.shape[1],i.shape[2]]),s=!0);var c={x:u,filter:l},g={strides:n,pad:r,dilations:a},d=uX.runKernel(TF,c,g);return s?MH(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});MD().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),gL(this,e,t,n,r,a)};var dL=mX({divNoNan_:function(e,t){var n=CX(e,"a","div"),r=CX(t,"b","div"),a=qD(n,r),o=(0,i.Z)(a,2);n=o[0],r=o[1];var l=cY(n,r),u=xT(l),s=dY(r,u);return BT(s,u,l)}});MD().prototype.divNoNan=function(e){return this.throwIfDisposed(),dL(this,e)},MD().prototype.div=function(e){return this.throwIfDisposed(),cY(this,e)};var pL=mX({dot_:function(e,t){var n=CX(e,"t1","dot"),r=CX(t,"t2","dot");uV((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(uV(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(o,".")})),1===n.rank&&1===r.rank){var i=MH(n,[1,-1]),l=MH(r,[-1,1]),u=WY(i,l);return MH(u,[])}if(1===n.rank&&2===r.rank){var s=MH(n,[1,-1]),c=MH(r,[r.shape[0],r.shape[1]]),g=WY(s,c);return MH(g,[g.size])}if(2===n.rank&&1===r.rank){var d=MH(r,[-1,1]),p=WY(n,d);return MH(p,[p.size])}var h=MH(r,[r.shape[0],r.shape[1]]);return WY(n,h)}});MD().prototype.dot=function(e){return this.throwIfDisposed(),pL(this,e)},MD().prototype.elu=function(){return this.throwIfDisposed(),gY(this)},MD().prototype.equal=function(e){return this.throwIfDisposed(),dY(this,e)};var hL=mX({erf_:function(e){var t=CX(e,"x","erf");uV("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=RJ(t,"float32"));var n={x:t};return uX.runKernel(OF,n)}});MD().prototype.erf=function(){return this.throwIfDisposed(),hL(this)},MD().prototype.exp=function(){return this.throwIfDisposed(),pY(this)},MD().prototype.expandDims=function(e){return this.throwIfDisposed(),hY(this,e)};var fL=mX({expm1_:function(e){var t={x:CX(e,"x","expm1")};return uX.runKernel(qF,t)}});MD().prototype.expm1=function(){return this.throwIfDisposed(),fL(this)},MD().prototype.fft=function(){return this.throwIfDisposed(),FT(this)},MD().prototype.flatten=function(){return this.throwIfDisposed(),MH(this,[this.size])},MD().prototype.floor=function(){return this.throwIfDisposed(),mY(this)},MD().prototype.floorDiv=function(e){return this.throwIfDisposed(),sY(this,e)},MD().prototype.gather=function(e,t){return this.throwIfDisposed(),vY(this,e,t)},MD().prototype.greaterEqual=function(e){return this.throwIfDisposed(),AY(this,e)},MD().prototype.greater=function(e){return this.throwIfDisposed(),bY(this,e)},MD().prototype.ifft=function(){return this.throwIfDisposed(),ET(this)},MD().prototype.irfft=function(){return this.throwIfDisposed(),DT(this)};var CL=mX({isFinite_:function(e){var t={x:CX(e,"x","isFinite")};return uX.runKernel(dN,t)}});MD().prototype.isFinite=function(){return this.throwIfDisposed(),CL(this)};var IL=mX({isInf_:function(e){var t={x:CX(e,"x","isInf")};return uX.runKernel(pN,t)}});MD().prototype.isInf=function(){return this.throwIfDisposed(),IL(this)};var mL=mX({isNaN_:function(e){var t={x:CX(e,"x","isNaN")};return uX.runKernel(hN,t)}});MD().prototype.isNaN=function(){return this.throwIfDisposed(),mL(this)},MD().prototype.leakyRelu=function(e){return this.throwIfDisposed(),yY(this,e)},MD().prototype.lessEqual=function(e){return this.throwIfDisposed(),GM(this,e)},MD().prototype.less=function(e){return this.throwIfDisposed(),rz(this,e)};var vL=mX({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=CX(e,"x","localResponseNormalization");uV(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,".")})),uV(hV(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var i=o,l=!1;3===o.rank&&(l=!0,i=MH(o,[1,o.shape[0],o.shape[1],o.shape[2]]));var u={x:i},s={depthRadius:t,bias:n,alpha:r,beta:a},c=uX.runKernel(ZN,u,s);return l?MH(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});MD().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),vL(this,e,t,n,r)};var bL=mX({logSigmoid_:function(e){var t=CX(e,"x","logSigmoid"),n=mH((function(e){return{value:LY(CT(LY(e))),gradFunc:function(t){return wY(t,sT(LY(e)))}}}));return n(t)}});MD().prototype.logSigmoid=function(){return this.throwIfDisposed(),bL(this)},MD().prototype.logSoftmax=function(e){return this.throwIfDisposed(),GY(this,e)},MD().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),_M(this,e,t)},MD().prototype.log=function(){return this.throwIfDisposed(),kY(this)},MD().prototype.log1p=function(){return this.throwIfDisposed(),ZY(this)},MD().prototype.logicalAnd=function(e){return this.throwIfDisposed(),RY(this,e)},MD().prototype.logicalNot=function(){return this.throwIfDisposed(),Vz(this)};var AL=mX({logicalOr_:function(e,t){var n=CX(e,"a","logicalOr","bool"),r=CX(t,"b","logicalOr","bool");tH(n.shape,r.shape);var a={a:n,b:r};return uX.runKernel(kN,a)}});MD().prototype.logicalOr=function(e){return this.throwIfDisposed(),AL(this,e)};var yL=mX({logicalXor_:function(e,t){var n=CX(e,"a","logicalXor","bool"),r=CX(t,"b","logicalXor","bool");return tH(n.shape,r.shape),RY(AL(e,t),Vz(RY(e,t)))}});MD().prototype.logicalXor=function(e){return this.throwIfDisposed(),yL(this,e)},MD().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),WY(this,e,t,n)},MD().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),VY(this,e,t,n,r)},MD().prototype.max=function(e,t){return this.throwIfDisposed(),SY(this,e,t)},MD().prototype.maximum=function(e){return this.throwIfDisposed(),NY(this,e)},MD().prototype.mean=function(e,t){return this.throwIfDisposed(),EY(this,e,t)},MD().prototype.min=function(e,t){return this.throwIfDisposed(),DM(this,e,t)},MD().prototype.minimum=function(e){return this.throwIfDisposed(),DY(this,e)};var kL=mX({mirrorPad_:function(e,t,n){uV("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=CX(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");uV(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,o=function(e){uV(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),uV(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},i=0;i<r.rank;i++)o(i);var l={paddings:t,mode:n},u={x:r};return uX.runKernel(DN,u,l)}});MD().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),kL(this,e,t)};var ZL=mX({mod_:function(e,t){var n=CX(e,"a","mod"),r=CX(t,"b","mod"),a=qD(n,r),o=(0,i.Z)(a,2),l={a:n=o[0],b:r=o[1]};return uX.runKernel(XN,l)}});MD().prototype.mod=function(e){return this.throwIfDisposed(),ZL(this,e)},MD().prototype.mul=function(e){return this.throwIfDisposed(),wY(this,e)},MD().prototype.neg=function(){return this.throwIfDisposed(),LY(this)},MD().prototype.norm=function(e,t,n){return this.throwIfDisposed(),HM(this,e,t,n)},MD().prototype.notEqual=function(e){return this.throwIfDisposed(),_Y(this,e)},MD().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),OY(this,e,t,n)},MD().prototype.onesLike=function(){return this.throwIfDisposed(),QY(this)},MD().prototype.pad=function(e,t){return this.throwIfDisposed(),qY(this,e,t)};var SL=mX({pool_:function(e,t,n,r,a,o,l){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r="valid");var u=CX(e,"x","maxPool"),s=u,c=!1;3===u.rank&&(c=!0,s=MH(u,[1,u.shape[0],u.shape[1],u.shape[2]])),uV(HH(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(a,"'")}));var g,d=BH(s.shape,t,o,a,r),p=[d.dilationHeight,d.dilationWidth];g="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([d.filterHeight,d.filterWidth],p):[[0,0],[0,0]];var h=1===p[0]&&1===p[1],f=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),i=t.map((function(e,t){return(e-o[t]%e)%e})),l=a.map((function(e,t){return e+i[t]})),u=t.map((function(e,t){return[r[t],l[t]]})),s=t.map((function(e,t){return[0,i[t]]}));return[u,s]}([d.inHeight,d.inWidth],p,g),C=(0,i.Z)(f,2),I=C[0],m=C[1],v=h?r:"valid",b=h?s:gP(s,p,I),A=("avg"===n?function(){return KH(b,t,o,v,l)}:function(){return VY(b,t,o,v,l)})(),y=h?A:Pz(A,p,m);return c?MH(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});MD().prototype.pool=function(e,t,n,r,a,o){return this.throwIfDisposed(),SL(this,e,t,n,r,a,o)},MD().prototype.pow=function(e){return this.throwIfDisposed(),XM(this,e)},MD().prototype.prelu=function(e){return this.throwIfDisposed(),$Y(this,e)};var wL=mX({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=CX(e,"x","prod");"bool"===r.dtype&&(r=RJ(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return uX.runKernel(QN,a,o)}});MD().prototype.prod=function(e,t){return this.throwIfDisposed(),wL(this,e,t)};var BL=mX({reciprocal_:function(e){var t={x:CX(e,"x","reciprocal")};return uX.runKernel(eE,t)}});MD().prototype.reciprocal=function(){return this.throwIfDisposed(),BL(this)},MD().prototype.relu=function(){return this.throwIfDisposed(),oT(this)},MD().prototype.relu6=function(){return this.throwIfDisposed(),JT(this)},MD().prototype.reshapeAs=function(e){return this.throwIfDisposed(),MH(this,e.shape)},MD().prototype.reshape=function(e){return this.throwIfDisposed(),MH(this,e)},MD().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),wM(this,e,t,n)},MD().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),BM(this,e,t,n)},MD().prototype.reverse=function(e){return this.throwIfDisposed(),iT(this,e)},MD().prototype.rfft=function(){return this.throwIfDisposed(),NT(this)},MD().prototype.round=function(){return this.throwIfDisposed(),RM(this)},MD().prototype.rsqrt=function(){return this.throwIfDisposed(),JP(this)},MD().prototype.selu=function(){return this.throwIfDisposed(),lT(this)},MD().prototype.separableConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),uT(this,e,t,n,r,a,o)},MD().prototype.sigmoid=function(){return this.throwIfDisposed(),sT(this)};var xL=mX({sign_:function(e){var t={x:CX(e,"x","sign")};return uX.runKernel(IE,t)}});MD().prototype.sign=function(){return this.throwIfDisposed(),xL(this)},MD().prototype.sin=function(){return this.throwIfDisposed(),kP(this)},MD().prototype.sinh=function(){return this.throwIfDisposed(),SP(this)},MD().prototype.slice=function(e,t){return this.throwIfDisposed(),cT(this,e,t)},MD().prototype.softmax=function(e){return this.throwIfDisposed(),fT(this,e)},MD().prototype.softplus=function(){return this.throwIfDisposed(),CT(this)},MD().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),gP(this,e,t)},MD().prototype.split=function(e,t){return this.throwIfDisposed(),IT(this,e,t)},MD().prototype.sqrt=function(){return this.throwIfDisposed(),mT(this)},MD().prototype.square=function(){return this.throwIfDisposed(),PY(this)},MD().prototype.squaredDifference=function(e){return this.throwIfDisposed(),zM(this,e)},MD().prototype.squeeze=function(e){return this.throwIfDisposed(),vT(this,e)},MD().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof TD?[this,e]:[this].concat((0,Ae.Z)(e));return bT(n,t)},MD().prototype.step=function(e){return this.throwIfDisposed(),HT(this,e)};var GL=mX({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,s=CX(e,"x","stridedSlice","string_or_numeric"),c={x:s},g={begin:t,end:n,strides:r,beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:l,shrinkAxisMask:u};return uX.runKernel(VE,c,g)}});MD().prototype.stridedSlice=function(e,t,n,r,a,o,i,l){return this.throwIfDisposed(),GL(this,e,t,n,r,a,o,i,l)},MD().prototype.sub=function(e){return this.throwIfDisposed(),BY(this,e)},MD().prototype.sum=function(e,t){return this.throwIfDisposed(),xY(this,e,t)};var RL=mX({tan_:function(e){var t={x:CX(e,"x","tan","float32")};return uX.runKernel(XE,t)}});MD().prototype.tan=function(){return this.throwIfDisposed(),RL(this)},MD().prototype.tanh=function(){return this.throwIfDisposed(),AT(this)},MD().prototype.tile=function(e){return this.throwIfDisposed(),fY(this,e)},MD().prototype.toBool=function(){return this.throwIfDisposed(),RJ(this,"bool")},MD().prototype.toFloat=function(){return this.throwIfDisposed(),RJ(this,"float32")},MD().prototype.toInt=function(){return this.throwIfDisposed(),RJ(this,"int32")};var WL=mX({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=CX(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var o={x:r},l={k:t,sorted:n},u=uX.runKernel(YE,o,l),s=(0,i.Z)(u,2),c=s[0],g=s[1];return{values:c,indices:g}}});MD().prototype.topk=function(e,t){return this.throwIfDisposed(),WL(this,e,t)},MD().prototype.transpose=function(e){return this.throwIfDisposed(),GT(this,e)};var VL,FL=mX({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=CX(e,"x","unique","string_or_numeric");uV(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},o=uX.runKernel(KE,r,a),l=(0,i.Z)(o,2),u=l[0],s=l[1];return{values:u,indices:s}}});function NL(){return null==VL&&(VL=uX.backend.epsilon()),VL}function EL(e,t,n){return EL=gu()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Ze(a,n.prototype),a},EL.apply(null,arguments)}function DL(e){var t="function"===typeof Map?new Map:void 0;return DL=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return EL(e,arguments,cu(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ze(n,e)},DL(e)}MD().prototype.unique=function(e){return this.throwIfDisposed(),FL(this,e)},MD().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),YP(this,e,t)},MD().prototype.unstack=function(e){return this.throwIfDisposed(),ZT(this,e)},MD().prototype.where=function(e,t){return this.throwIfDisposed(),BT(e,this,t)},MD().prototype.zerosLike=function(){return this.throwIfDisposed(),xT(this)};var XL=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,e),Object.setPrototypeOf(ke(r),n.prototype),r}return uu(n)}(DL(Error)),JL=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,e),Object.setPrototypeOf(ke(r),n.prototype),r}return uu(n)}(DL(Error)),HL=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,e),Object.setPrototypeOf(ke(r),n.prototype),r}return uu(n)}(DL(Error)),YL=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,e),Object.setPrototypeOf(ke(r),n.prototype),r}return uu(n)}(DL(Error)),TL=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,e),Object.setPrototypeOf(ke(r),n.prototype),r}return uu(n)}(DL(Error));Error;function ML(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function KL(e,t){if(!e)throw new TL(t)}function PL(e,t){var n,r=0,a=ta(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(Kle){a.e(Kle)}finally{a.f()}return r}function zL(e){return 1===e.length?e[0]:e}function LL(e){return Array.isArray(e)?e:[e]}function _L(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function OL(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var UL={};function jL(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function QL(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return QL(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?QL(a):e[r]=a.value)}}function qL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var o,l=e;if(l in n)o=n[l];else if(l in UL)o=UL[l];else if(null==(o=t[l]))throw new HL("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}var u=e;if(null==u.className||null==u.config)throw new HL("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(u),".\n")+"'className' and 'config' must set.");var s,c,g=u.className;if(g in n){var d=(0,i.Z)(n[g],2);s=d[0],c=d[1]}else if(g in UL){var p=(0,i.Z)(UL.className,2);s=p[0],c=p[1]}else if(g in t){var h=(0,i.Z)(t[g],2);s=h[0],c=h[1]}if(null==s)throw new HL("Unknown ".concat(r,": ").concat(g,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){for(var f={},C=0,I=Object.keys(UL);C<I.length;C++){var m=I[C];f[m]=UL[m]}for(var v=0,b=Object.keys(n);v<b.length;v++){var A=b[v];f[A]=n[A]}var y=u.config;y.customObjects=f;for(var k=Object.assign({},UL),Z=0,S=Object.keys(n);Z<S.length;Z++){var w=S[Z];UL[w]=n[w]}QL(u.config);var B=c(s,u.config,n,a);return UL=Object.assign({},k),B}for(var x=Object.assign({},UL),G=0,R=Object.keys(n);G<R.length;G++){var W=R[G];UL[W]=n[W]}var V=new s(u.config);return UL=Object.assign({},x),V}function $L(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function e_(e){if(null==e)return e;var t,n=[],r=ta(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(Kle){r.e(Kle)}finally{r.f()}return n}function t_(e){if(null==e)throw new HL("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function n_(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new HL("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function r_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return KL(n>=0),KL(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function a_(e,t){Array.isArray(e)?(uV(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return a_(e,"element ".concat(n+1," of ").concat(t))}))):uV(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(o_(e),".")}))}function o_(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return o_(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function i_(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function l_(e,t){return hH((function(){return mT(xY(wY(e,e),t,!0))}))}var u_=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"getConfig",value:function(){return{}}}]),n}(sH),s_=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return uu(n,[{key:"apply",value:function(e){var t=this;return hH((function(){var n=l_(e,t.axis),r=UH(n,0,t.maxValue);return wY(e,cY(r,yH(NL(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(u_);s_.className="MaxNorm",gH(s_);var c_=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return uu(n,[{key:"apply",value:function(e){var t=this;return hH((function(){return cY(e,yH(NL(),l_(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(u_);c_.className="UnitNorm",gH(c_);var g_=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return oT(e)}}]),n}(u_);g_.className="NonNeg",gH(g_);var d_=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return uu(n,[{key:"apply",value:function(e){var t=this;return hH((function(){var n=l_(e,t.axis),r=yH(wY(t.rate,UH(n,t.minValue,t.maxValue)),wY(1-t.rate,n));return wY(e,cY(r,yH(NL(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(u_);d_.className="MinMaxNorm",gH(d_);var p_={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function h_(e){return jL(e)}function f_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qL(e,cH.getMap().classNameMap,t,"constraint")}function C_(e){return null==e?null:"string"===typeof e?f_({className:e in p_?p_[e]:e,config:{}}):e instanceof u_?e:f_(e)}var I_=["channelsFirst","channelsLast"],m_=["nearest","bilinear"],v_=["valid","same","causal"],b_=["max","avg"],A_=["sum","mul","concat","ave"],y_=new Map;function k_(e){n_(I_,"DataFormat",e)}function Z_(e){n_(v_,"PaddingMode",e)}function S_(e){n_(b_,"PoolMode",e)}var w_=[];function B_(e,t){w_.push(e);try{var n=t();return w_.pop(),n}catch(r){throw w_.pop(),r}}function x_(e){if(!W_(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===w_.length?"":w_.join("/")+"/")+e}function G_(e){if(!W_(e))throw new Error("Not a valid tensor name: '"+e+"'");y_.has(e)||y_.set(e,0);var t=y_.get(e);if(y_.set(e,y_.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return y_.set(n,1),n}return e}var R_=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function W_(e){return!!e.match(R_)}function V_(e){return e===parseInt(e.toString(),10)}function F_(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function N_(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function E_(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function D_(e,t){if(t<e)throw new HL("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function X_(e,t){return RJ(e,t)}function J_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),MH(e,n)}function H_(e){var t=[F_(e.shape)];return MH(e,t)}function Y_(e,t,n){return hH((function(){switch(e.rank){case 1:return gT(e,t,n);case 2:return dT(e,[t,0],[n,e.shape[1]]);case 3:return pT(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return hT(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return cT(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return cT(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new HL("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function T_(e,t,n){return hH((function(){switch(e.rank){case 1:return gT(e,t,n);case 2:return dT(e,[0,t],[e.shape[0],n]);case 3:return pT(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return hT(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new HL("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function M_(e,t,n,r){return hH((function(){switch(e.rank){case 1:return gT(e,t,n);case 2:switch(r){case 1:return Y_(e,t,n);case 2:return T_(e,t,n);default:throw new HL("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return Y_(e,t,n);case 2:return pT(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return T_(e,t,n);default:throw new HL("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return Y_(e,t,n);case 2:return hT(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return hT(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return T_(e,t,n);default:throw new HL("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new HL("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function K_(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),jH(e,n)}function P_(e,t){switch(e.rank){case 1:return QH([e,t]);case 2:return qH([e,t],0);case 3:return $H([e,t],0);case 4:return eY([e,t],0);default:throw new HL("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function z_(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new HL("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return fY(e,t)}function L_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return rT(e,t,n,r,a)}function __(e,t,n,r){if(e.rank<2||t.rank<2)throw new YL("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new YL("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return _T({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?j_(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),o=a.pop();e=MH(e,[-1,o]);var i=t.shape.slice(),l=i.pop(),u=i.pop(),s=[].concat((0,Ae.Z)(i),[l]),c=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=MH(GT(t,c),[u,-1]);var g=[].concat((0,Ae.Z)(a),(0,Ae.Z)(s));return MH(_T({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?j_(e.rank,r,"channelsLast"):null,activation:n}),g)}function O_(e,t,n){return hH((function(){return t=Array.isArray(t)?yT(t,"int32"):RJ(t,"int32"),vY(e,t,n)}))}function U_(e){return wY(e,e)}function j_(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new HL("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?MH(t,[1,r[0],1,1,1]):MH(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?MH(t,[1,1,1,1,r[0]]):MH(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?MH(t,[1,r[0],1,1]):MH(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?MH(t,[1,1,1,r[0]]):MH(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?MH(t,[1,r[0],1]):MH(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?MH(t,[1,1,r[0]]):MH(t,[1].concat(r))}else if(e<3)return t;throw new HL("Unsupported input rank by biasAdd: ".concat(t.rank))}function Q_(e,t,n){return hH((function(){return null==n&&(n="channelsLast"),k_(n),yH(e,j_(e.rank,t,n))}))}function q_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new YL("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return gY(e)}function $_(e,t,n,r){return hH((function(){return RT(e,t,n,r)}))}function eO(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var tO=["fanIn","fanOut","fanAvg"],nO=["normal","uniform","truncatedNormal"];var rO=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(sH),aO=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e,t){return UY(e,t)}}]),n}(rO);aO.className="Zeros",gH(aO);var oO=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e,t){return jY(e,t)}}]),n}(rO);oO.className="Ones",gH(oO);var iO=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),r=t.call(this),"object"!==typeof e)throw new HL("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new HL("config must have value set but got ".concat(e));return r.value=e.value,r}return uu(n,[{key:"apply",value:function(e,t){var n=this;return hH((function(){return wY(vH(n.value),jY(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(rO);iO.className="Constant",gH(iO);var lO=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return uu(n,[{key:"apply",value:function(e,t){return aT(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(rO);lO.className="RandomUniform",gH(lO);var uO=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return uu(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new YL("randomNormal does not support dType ".concat(t,"."));return L_(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(rO);uO.className="RandomNormal",gH(uO);var sO=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return uu(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new YL("truncatedNormal does not support dType ".concat(t,"."));return kT(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(rO);sO.className="TruncatedNormal",gH(sO);var cO=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return uu(n,[{key:"apply",value:function(e,t){var n=this;return hH((function(){if(2!==e.length||e[0]!==e[1])throw new HL("Identity matrix initializer can only be used for 2D square matrices.");return wY(n.gain,CY(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(rO);cO.className="Identity",gH(cO);var gO=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),r=t.call(this),e.scale<0)throw new HL("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,function(e){n_(tO,"FanMode",e)}(r.mode),r.distribution=null==e.distribution?"normal":e.distribution,function(e){n_(nO,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return uu(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(k_(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=F_(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var o=F_(e,0,e.length-2);t=e[e.length-2]*o,n=e[e.length-1]*o}}else{var i=F_(e);t=Math.sqrt(i),n=Math.sqrt(i)}return[t,n]}(e),r=n[0],a=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,a):o/=Math.max(1,(r+a)/2),"normal"===this.distribution){var i=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new YL("".concat(this.getClassName()," does not support dType ").concat(t,"."));return kT(e,0,i,t,this.seed)}var l=Math.sqrt(3*o);return aT(e,-l,l,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(rO);gO.className="VarianceScaling",gH(gO);var dO=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return uu(n,[{key:"getClassName",value:function(){return gO.className}}]),n}(gO);dO.className="GlorotUniform",gH(dO);var pO=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return uu(n,[{key:"getClassName",value:function(){return gO.className}}]),n}(gO);pO.className="GlorotNormal",gH(pO);var hO=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return uu(n,[{key:"getClassName",value:function(){return gO.className}}]),n}(gO);hO.className="HeNormal",gH(hO);var fO=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return uu(n,[{key:"getClassName",value:function(){return gO.className}}]),n}(gO);fO.className="HeUniform",gH(fO);var CO=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return uu(n,[{key:"getClassName",value:function(){return gO.className}}]),n}(gO);CO.className="LeCunNormal",gH(CO);var IO=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return uu(n,[{key:"getClassName",value:function(){return gO.className}}]),n}(gO);IO.className="LeCunNormal",gH(IO);var mO=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new YL("Random seed is not implemented for Orthogonal Initializer yet.");return r}return uu(n,[{key:"apply",value:function(e,t){var n=this;return hH((function(){if(e.length<2)throw new YL("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=L_(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=jM.gramSchmidt(t);return e[0]>e[1]&&(r=GT(r)),wY(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(rO);mO.className="Orthogonal",gH(mO);var vO={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function bO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qL(e,cH.getMap().classNameMap,t,"initializer")}function AO(e){return jL(e)}function yO(e){if("string"===typeof e){var t=e in vO?vO[e]:e;if("GlorotNormal"===t)return new pO;if("GlorotUniform"===t)return new dO;if("HeNormal"===t)return new hO;if("HeUniform"===t)return new fO;if("LeCunNormal"===t)return new CO;if("LeCunUniform"===t)return new IO;var n={};return n.className=t,n.config={},bO(n)}return e instanceof rO?e:bO(e)}var kO=0;function ZO(){return kO++}var SO={};function wO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in SO||(SO[e]=0),SO[e]+=1,e+SO[e].toString()}function BO(e){return Array.isArray(e)&&Array.isArray(e[0])}function xO(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function GO(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new HL("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function RO(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new HL("Expected exactly 1 Shape; got ".concat(e.length))}return e}function WO(e){var t,n=0,r=ta(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(Kle){r.e(Kle)}finally{r.f()}return n}var VO="Variable",FO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:VO,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;iu(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=ZO(),r=null==r?VO:r,this.originalName=x_(r),this.name=G_(this.originalName),this.trainable_=a,this.constraint=o,this.val=ST(t,this.trainable_,this.name,this.dtype)}return uu(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function NO(e){return e.map((function(e){return e.read()}))}function EO(e){e.forEach((function(e){e[0].write(e[1])}))}var DO=uu((function e(t){iu(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),XO=uu((function e(t,n,r,a,o,i,l){iu(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=o,this.outputTensorIndex=l,this.id=ZO(),null!=i&&(this.originalName=x_(i),this.name=G_(this.originalName)),this.rank=n.length})),JO=0,HO=function(){function e(t,n){iu(this,e),this.callArgs=n,this.id=JO++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=ta(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var o=r.value;null!=o&&o.outboundNodes.push(this)}}catch(Kle){a.e(Kle)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return uu(e,[{key:"getConfig",value:function(){var e,t=[],n=ta(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(Kle){n.e(Kle)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),YO=0,TO=function(e){su(n,e);var t=hu(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};iu(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=YO++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var o=e.getClassName();a=_L(o)+"_"+wO(o)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var i;if(null!=r.batchInputShape)i=r.batchInputShape;else if(null!=r.inputShape){var l=null;null!=r.batchSize&&(l=r.batchSize),i=[l].concat(r.inputShape)}e.batchInputShape=i;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return uu(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new JL("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new HL("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return zL(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return zL(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new XL("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new XL("Layer ".concat(this.name)+" is not connected, no input to return.");return zL(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new XL("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new XL("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return zL(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=LL(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=LL(this.inputSpec);if(e.length!==t.length)throw new HL("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var o=r.rank;if(null!=a.ndim&&o!==a.ndim)throw new HL("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(o));if(null!=a.maxNDim&&o>a.maxNDim)throw new HL("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(o));if(null!=a.minNDim&&o<a.minNDim)throw new HL("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(o,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new HL("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var i=r.shape;for(var l in a.axes){var u=Number(l),s=a.axes[l],c=u>=0?i[u]:i[i.length+u];if(null!=s&&-1===[s,null].indexOf(c))throw new HL("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(s," but got shape ").concat(i,"."))}}if(null!=a.shape)for(var g=0;g<a.shape.length;++g){var d=a.shape[g],p=r.shape[g];if(null!=d&&null!=p&&d!==p)throw new HL("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=LL(e),o=!0,i=ta(a);try{for(i.s();!(r=i.n()).done;){if(!(r.value instanceof XO)){o=!1;break}}}catch(Kle){i.e(Kle)}finally{i.f()}var l,u=!0,s=ta(a);try{for(s.s();!(l=s.n()).done;){if(l.value instanceof XO){u=!1;break}}}catch(Kle){s.e(Kle)}finally{s.f()}if(o===u)throw new HL("Arguments to apply() must be all SymbolicTensors or all Tensors");return B_(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,o=[],i=ta(LL(e));try{for(i.s();!(r=i.n()).done;){var l=r.value;o.push(l.shape)}}catch(Kle){i.e(Kle)}finally{i.f()}n.build(zL(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var s,c=n.call(e,t),g=[],d=ta(LL(c));try{for(d.s();!(s=d.n()).done;){var p=s.value;-1!==a.indexOf(p)&&(p=p.clone()),g.push(p)}}catch(Kle){d.e(Kle)}finally{d.f()}if(c=zL(g),null!=n.activityRegularizer)throw new YL("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var h,f=function(e){e=LL(e);var t,n=[],r=ta(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(Kle){r.e(Kle)}finally{r.f()}return zL(n)}(e),C=n.computeOutputShape(f),I="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?f[0]:f),h=null!=C&&C.length>0&&Array.isArray(C[0])?C.map((function(r,a){return new XO(I,r,n,LL(e),t,n.name,a)})):new XO(I,C,n,LL(e),t,n.name),n.addInboundNode(e,h,null,null,f,C,t),n._refCount++,null!=n.activityRegularizer)throw new YL("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return h}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new XL("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=ta(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(Kle){n.e(Kle)}finally{n.f()}if(1===t.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new XL("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new JL("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return WO(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return NO(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;hH((function(){var n=t.weights;if(n.length!==e.length)throw new HL('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=NO(n),o=0;o<a.length;++o){var i=a[o],l=n[o],u=e[o];if(!pV(i.shape,u.shape))throw new HL("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([l,u])}EO(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,o,i,l){if(-1!==this._addedWeightNames.indexOf(e))throw new HL("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=l?l():yO("zeros"));var u=r.apply(t,n),s=new FO(u,n,e,o,i);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(s.read())})),null==o&&(o=!0),o?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=LL(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,Ae.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=LL(e);t=LL(t),n=LL(n),r=LL(r),a=xO(a),o=xO(o);var u,s=[],c=[],g=[],d=ta(l);try{for(d.s();!(u=d.n()).done;){var p=u.value;s.push(p.sourceLayer),c.push(p.nodeIndex),g.push(p.tensorIndex)}}catch(Kle){d.e(Kle)}finally{d.f()}new HO({outboundLayer:this,inboundLayers:s,nodeIndices:c,tensorIndices:g,inputTensors:l,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:o},i);for(var h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(sH);function MO(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],o=0;o<r.inboundLayers.length;o++){var i,l=ta(MO(r.inputTensors[o],r.inboundLayers[o],r.nodeIndices[o]));try{for(l.s();!(i=l.n()).done;){var u=i.value;-1===a.indexOf(u)&&a.push(u)}}catch(Kle){l.e(Kle)}finally{l.f()}}return a}var KO,PO=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:wO("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new HL("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new HL("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new HL("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var o=e.dtype||"float32";r.batchInputShape=a,r.dtype=o,r.inputSpec=[{shape:a}];var i=new XO(r.dtype,r.batchInputShape,ke(r),[],{},r.name);return i.nodeIndex=0,i.tensorIndex=0,new HO({outboundLayer:ke(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return uu(n,[{key:"apply",value:function(e,t){throw new HL("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(TO);function zO(e){return LO.apply(this,arguments)}function LO(){return LO=j(q().mark((function e(t){var n,r,a,o,i,l,u,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(o in n=[],r=[],a=[],t)"number"!==typeof(i=t[o])&&(l=i,n.push(l.data()),r.push(o),a.push(l));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,s=0;s<u.length;++s)t[r[s]]=u[s][0];fH(a);case 12:case"end":return e.stop()}}),e)}))),LO.apply(this,arguments)}function _O(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}PO.className="InputLayer",gH(PO),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(KO||(KO={}));var OO=function(){function e(){iu(this,e),this.validationData=null}return uu(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),UO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;iu(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return uu(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=ta(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(Kle){n.e(Kle)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=ta(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(Kle){n.e(Kle)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=j(q().mark((function e(t,n){var r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=ta(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=j(q().mark((function e(t,n){var r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=ta(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=j(q().mark((function e(t,n){var r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=ta(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=j(q().mark((function e(t,n){var r,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=ta(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=j(q().mark((function e(t){var n,r,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=ta(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=j(q().mark((function e(t){var n,r,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=ta(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),jO=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.call(this)}return uu(n,[{key:"onEpochBegin",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=j(q().mark((function e(t,n){var r,a,o,i=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)i.totals.hasOwnProperty(e)||(i.totals[e]=0),i.totals[e]=i.totals[e]+t*r;else{var a;e in i.totals?a=i.totals[e]:i.totals[e]=0;var o=hH((function(){return yH(i.totals[e],wY(t,r))}));i.totals[e]=o,null!=a&&a.dispose()}},n)a(o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=j(q().mark((function e(t,n){var r,a,o,i=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=ta(this.params.metrics),e.prev=2,o=function(){var e=a.value;if(null==i.totals[e])return"continue";"number"===typeof i.totals[e]?n[e]=i.totals[e]/i.seen:hH((function(){var t=wY(cY(1,i.seen),i.totals[e]);n[e]=t,i.totals[e].dispose(),CH(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==o()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(OO),QO=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"onTrainBegin",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=j(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=j(q().mark((function e(){var t,n,r,a,o,i,l,u,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(o=this.history[a],i=0;i<o.length;++i)"number"!==typeof o[i]&&(l=o[i],t.push(l.data()),n.push(a),r.push(i));return e.next=6,Promise.all(t);case 6:for(u=e.sent,s=0;s<u.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=u[s][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OO),qO=function(e){su(n,e);var t=hu(n);function n(e,r){var a;if(iu(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||lK,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return BV(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():wD();return function(){var o=null!=n?n():wD();return o-a<t?r:(a=o,r=e.apply(void 0,arguments))}}(a.maybeWait.bind(ke(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return uu(n,[{key:"maybeWait",value:function(){var e=j(q().mark((function e(t,n,r){var a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,zO(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,zO(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=j(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,zO(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,zO(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=j(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,zO(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):BV(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,zO(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,zO(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(OO);function $O(e,t){return null==e&&(e={}),e instanceof OO?[e]:Array.isArray(e)&&e[0]instanceof OO?e:LL(e).map((function(e){return new qO(e,t)}))}var eU=function(){function e(){iu(this,e)}return uu(e,null,[{key:"registerCallbackConstructor",value:function(t,n){uV(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new HL("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,Ae.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function tU(e,t,n,r,a,o,i,l,u){var s=new QO,c=[new jO].concat((0,Ae.Z)(eU.createCallbacks(t)));null!=e&&c.push.apply(c,(0,Ae.Z)(e)),c.push(s);var g=new UO(c);return g.setParams({epochs:n,initialEpoch:r,samples:a,steps:o,batchSize:i,verbose:t,doValidation:l,metrics:u}),{callbackList:g,history:s}}function nU(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cu(e)););return e}function rU(){return rU="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=nU(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},rU.apply(this,arguments)}function aU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qL(e,cH.getMap().classNameMap,t,"layer",n)}function oU(e,t){return hH((function(){"float32"!==e.dtype&&(e=RJ(e,"float32"));var n=xY(U_(e),t,!0),r=IY(n.shape,NL()),a=mT(NY(n,r));return cY(e,a)}))}function iU(e,t){return hH((function(){return EY(U_(BY(t,e)),-1)}))}function lU(e,t){return hH((function(){return EY(AH(BY(t,e)),-1)}))}function uU(e,t){return hH((function(){var n=BY(e,t),r=UH(AH(e),NL(),Number.MAX_VALUE),a=AH(cY(n,r));return wY(100,EY(a,-1))}))}function sU(e,t){return hH((function(){var n=UH(t,NL(),Number.MAX_VALUE),r=kY(yH(1,n)),a=UH(e,NL(),Number.MAX_VALUE),o=kY(yH(1,a));return EY(U_(BY(r,o)),-1)}))}function cU(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return hH((function(){if(n)t=fT(t);else{var r=xY(t,t.shape.length-1,!0);t=cY(t,r)}return t=UH(t,NL(),1-NL()),LY(xY(wY(RJ(e,"float32"),kY(t)),t.shape.length-1))}))}function gU(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return hH((function(){var r=RJ(mY(H_(e)),"int32"),a=(t=UH(t,NL(),1-NL())).shape;return cU(MH(OY(r,a[a.length-1]),a),t,n)}))}function dU(e,t){return hH((function(){var n;return n=UH(t,NL(),1-NL()),n=kY(cY(n,BY(1,n))),EY(function(e,t){if(!pV(e.shape,t.shape))throw new HL("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return hH((function(){var n=oT(t),r=LY(AH(t));return yH(BY(n,wY(t,e)),ZY(pY(r)))}))}(e,n),-1)}))}function pU(e,t){return hH((function(){var n=UH(e,NL(),1),r=UH(t,NL(),1);return xY(wY(e,kY(cY(n,r))),-1)}))}function hU(e,t){return hH((function(){var n=oU(e,-1),r=oU(t,-1),a=wY(n,r);return LY(xY(a,-1))}))}eU.constructors={};var fU={meanSquaredError:iU,meanAbsoluteError:lU,meanAbsolutePercentageError:uU,meanSquaredLogarithmicError:sU,squaredHinge:function(e,t){return hH((function(){var n=NY(0,BY(1,wY(e,t)));return EY(U_(n),-1)}))},hinge:function(e,t){return hH((function(){var n=NY(0,BY(1,wY(e,t)));return EY(n,-1)}))},categoricalHinge:function(e,t){return hH((function(){var n=xY(wY(e,t),-1),r=SY(wY(BY(1,e),t),-1);return NY(0,yH(1,BY(r,n)))}))},logcosh:function(e,t){return hH((function(){var n=Math.log(2),r=BY(t,e),a=BY(yH(r,CT(wY(-2,r))),n);return EY(a,-1)}))},categoricalCrossentropy:cU,sparseCategoricalCrossentropy:gU,binaryCrossentropy:dU,kullbackLeiblerDivergence:pU,poisson:function(e,t){return hH((function(){var n=kY(yH(NL(),t));return EY(BY(t,wY(e,n)),-1)}))},cosineProximity:hU};function CU(e){if("string"===typeof e){if(e in fU)return fU[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new HL(t)}return e}function IU(e,t){return hH((function(){var n=wY(.5,QY(t)),r=X_(bY(t,n),e.dtype);return EY(dY(e,r),-1)}))}function mU(e,t){return hH((function(){return X_(dY(SH(e,-1),SH(t,-1)),"float32")}))}function vU(e,t){return hH((function(){return RJ(xY(RY(dY(e,1),dY(t,1))),"float32")}))}function bU(e,t){return dU(e,t)}function AU(e,t){return e.rank===t.rank&&(e=vT(e,[e.rank-1])),(t=SH(t,-1)).dtype!==e.dtype&&(t=RJ(t,e.dtype)),RJ(dY(e,t),"float32")}var yU=cU,kU=gU,ZU={binaryAccuracy:IU,categoricalAccuracy:mU,precision:function(e,t){return hH((function(){var n=vU(e,t),r=function(e,t){return hH((function(){return RJ(xY(RY(dY(e,0),dY(t,1))),"float32")}))}(e,t),a=yH(n,r);return RJ(BT(bY(a,0),cY(n,a),0),"float32")}))},categoricalCrossentropy:yU,sparseCategoricalCrossentropy:kU,mse:iU,MSE:iU,mae:lU,MAE:lU,mape:uU,MAPE:uU,cosine:hU};function SU(e){if("string"===typeof e&&e in ZU)return ZU[e];if("string"!==typeof e&&null!=e)return e;throw new HL("Unknown metric ".concat(e))}function wU(e){if(KL(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(fU);n<r.length;n++){var a=r[n];if(fU[a]===e){t=a;break}}if(void 0!==t)return t;for(var o=0,i=Object.keys(ZU);o<i.length;o++){var l=i[o];if(ZU[l]===e){t=l;break}}return void 0!==t?t:e.name}var BU=1048576;function xU(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!GU(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>BU&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(BU,"."))}}function GU(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!GU(e[r]))return!1}return!0}if(Array.isArray(e)){var a,o=ta(e);try{for(o.s();!(a=o.n()).done;){if(!GU(a.value))return!1}}catch(Kle){o.e(Kle)}finally{o.f()}return!0}return!1}var i=typeof e;return"string"===i||"number"===i||"boolean"===i}function RU(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,o=VU(e),i=["Layer (type)","Input Shape","Output shape","Param #"];if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!o)for(var l in i.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,(0,Ae.Z)(e.nodesByDepth[l]))}a("_".repeat(t)),FU(i,n,a),a("=".repeat(t));for(var s=e.layers,c=0;c<s.length;++c)o?NU(s[c],n,a):EU(s[c],n,r,a),a((c===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var g=WU(e),d=WO(e.nonTrainableWeights);a("Total params: ".concat(g+d)),a("Trainable params: ".concat(g)),a("Non-trainable params: ".concat(d)),a("_".repeat(t))}function WU(e){return null!=e.collectedTrainableWeights?WO(e.collectedTrainableWeights):WO(e.trainableWeights)}function VU(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var o=0,i=n;o<i.length;o++){var l=i[o];if(l.length>1||1===l.length&&l[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,Ae.Z)(l))}if(t){var u,s=ta(e.layers);try{for(s.s();!(u=s.n()).done;){var c,g=u.value,d=!1,p=ta(g.inboundNodes);try{for(p.s();!(c=p.n()).done;){var h=c.value;if(-1!==r.indexOf(h)){if(d){t=!1;break}d=!0}}}catch(Kle){p.e(Kle)}finally{p.f()}if(!t)break}}catch(Kle){s.e(Kle)}finally{s.f()}}return t}function FU(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function NU(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(Kle){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(Kle){r="multiple"}var o=e.name,i=e.getClassName();FU(["".concat(o," (").concat(i,")"),a,r,e.countParams().toString()],t,n)}function EU(e,t,n,r){var a,o;try{o=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(Kle){o="multiple"}try{a=JSON.stringify(e.outputShape)}catch(Kle){a="multiple"}var i,l=[],u=ta(e.inboundNodes);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(s)))for(var c=0;c<s.inboundLayers.length;++c){var g=s.inboundLayers[c].name,d=s.nodeIndices[c],p=s.tensorIndices[c];l.push("".concat(g,"[").concat(d,"][").concat(p,"]"))}}}catch(Kle){u.e(Kle)}finally{u.f()}var h=e.name,f=e.getClassName(),C=0===l.length?"":l[0];FU(["".concat(h," (").concat(f,")"),o,a,e.countParams().toString(),C],t,r);for(var I=1;I<l.length;++I)FU(["","","","",l[I]],t,r)}function DU(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function XU(e,t){if(null===e)return null;if("string"===typeof e)return OL(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];DU(t,a,o)?n.push(o):n.push(XU(o,t))}return n}for(var i={},l=0,u=Object.keys(e);l<u.length;l++){var s=u[l],c=e[s];if("name"===s&&"string"===typeof c)i[s]=c;else{var g=OL(s);i[g]=XU(c,g)}}return i}function JU(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return _L(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];DU(t,a,o)?n.push(o):n.push(JU(o,t))}return n}for(var i={},l=0,u=Object.keys(e);l<u.length;l++){var s=u[l],c=e[s],g=_L(s);i[g]="name"!==s&&"className"!==s||"string"!==typeof c?JU(c,s):c}return i}var HU="3.15.0";var YU=function(){function e(t){if(iu(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=ta(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.add(o.key,o.value)}}catch(Kle){a.e(Kle)}finally{a.f()}}}return uu(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new HL("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return RJ(t,e.dtype)}catch(Kle){throw new HL("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof XO){if(null==this.id2Value[e.id])throw new HL("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new HL("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof XO){if(null==this.id2Value[e.id])throw new HL("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new HL("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&fH(this.id2Mask)}}]),e}(),TU={},MU={};function KU(e,t,n,r){var a,o=null!=n&&n.training,i=Array.isArray(e),l=i?e:[e],u=l.map((function(e){return e.name})),s=[],c=t.names(),g=ta(u);try{for(g.s();!(a=g.n()).done;){var d=a.value;-1!==c.indexOf(d)?s.push(t.getValue(d)):s.push(null)}}catch(Kle){g.e(Kle)}finally{g.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,h,f=u.join(",")+"|"+t.names().join(",");if(null==TU[f]){var C=function(e,t){uV(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=zU(e[0],t);n=a.sorted,r=a.recipientMap}else{var o,i=new Set,l=ta(e);try{for(l.s();!(o=l.n()).done;){var u,s=zU(o.value,t),c=s.sorted,g=s.recipientMap,d=ta(c);try{for(d.s();!(u=d.n()).done;){var p=u.value;i.has(p.name)||(n.push(p),i.add(p.name))}}catch(Kle){d.e(Kle)}finally{d.f()}var h=function(e){null==r[e]&&(r[e]=new Set),g[e].forEach((function(t){return r[e].add(t)}))};for(var f in g)h(f)}}catch(Kle){l.e(Kle)}finally{l.f()}}return{sorted:n,recipientCounts:PU(r)}}(l,t);p=C.sorted,h=C.recipientCounts,TU[f]=p,MU[f]=h}p=TU[f],h={},o||Object.assign(h,MU[f]);for(var I=new YU(t),m=0;m<p.length;++m){if(null!=r){var v=pH().numTensors;v>r.maxNumTensors&&(r.maxNumTensors=v),v<r.minNumTensors&&(r.minNumTensors=v)}var b=p[m],A=b.sourceLayer;if(!(A instanceof PO)){var y,k=[],Z=[],S=[],w=!1,B=ta(b.inputs);try{for(B.s();!(y=B.n()).done;){var x=y.value,G=I.getValue(x),R=I.getMask(x);k.push(G),Z.push(R),null!=R&&(w=!0),o||(h[x.name]--,0!==h[x.name]||t.hasKey(x)||-1!==u.indexOf(x.name)||G.isDisposed||!0===x.sourceLayer.stateful||S.push(G))}}catch(Kle){B.e(Kle)}finally{B.f()}w&&((n=n||{}).mask=Z[0]);var W=LL(A.apply(k,n)),V=null;A.supportsMasking&&(V=A.computeMask(k,Z));for(var F=LU(b),N=Array.isArray(F)?F:[F],E=0;E<N.length;++E){I.hasKey(N[E])||I.add(N[E],W[E],Array.isArray(V)?V[0]:V);var D=u.indexOf(N[E].name);-1!==D&&(s[D]=W[E])}o||fH(S)}}return I.disposeMasks(),i?s:s[0]}function PU(e){var t={};for(var n in e)t[n]=e[n].size;return t}function zU(e,t){var n,r=new Set,a=[],o={},i=ta(t.names());try{for(i.s();!(n=i.n()).done;){var l=n.value;r.add(l)}}catch(Kle){i.e(Kle)}finally{i.f()}var u=[],s=[];for(u.push(e);u.length>0;){var c=u[u.length-1];if(r.has(c.name))u.pop();else{var g=s[s.length-1]===u.length-1;if(0===c.inputs.length||g)u.pop(),a.push(c),r.add(c.name),g&&s.pop();else{s.push(u.length-1);var d,p=ta(c.inputs);try{for(p.s();!(d=p.n()).done;){var h=d.value;null==o[h.name]&&(o[h.name]=new Set),o[h.name].add(c.name),r.has(h.name)||u.push(h)}}catch(Kle){p.e(Kle)}finally{p.f()}}}}return{sorted:a,recipientMap:o}}function LU(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,o=ta(e.sourceLayer.inboundNodes[r].outputTensors);try{for(o.s();!(a=o.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(Kle){o.e(Kle)}finally{o.f()}}t=e.sourceLayer.getOutputAt(n)}return t}var _U=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=wO(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],e_(r.inputs).length!==r.inputs.length)throw new HL("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));e_(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var o,i=ta(r.outputs);try{for(i.s();!(o=i.n()).done;){var l=o.value,u=l.sourceLayer,s=l.nodeIndex,c=l.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(s),r.outputLayersTensorIndices.push(c)}}catch(Kle){i.e(Kle)}finally{i.f()}var g,d=ta(r.inputs);try{for(d.s();!(g=d.n()).done;){var p=g.value,h=p.sourceLayer,f=p.nodeIndex,C=p.tensorIndex;KL(0===f,"input layer has >1 nodes"),KL(0===C,"input layer has >1 tensors"),r.inputLayers.push(h),r.inputLayersNodeIndices.push(f),r.inputLayersTensorIndices.push(C)}}catch(Kle){d.e(Kle)}finally{d.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var I=0;I<r.inputLayers.length;I++){var m=r.inputLayers[I];if(!(m instanceof PO))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(I," (0-based) originates ")+"from layer type ".concat(m.getClassName(),"."));r.inputNames.push(m.name),r.feedInputShapes.push(m.batchInputShape),r.feedInputNames.push(m.name)}var v,b=ta(r.outputLayers);try{for(b.s();!(v=b.n()).done;){var A=v.value;r.outputNames.push(A.name)}}catch(Kle){b.e(Kle)}finally{b.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var y,k={},Z={},S={},w={},B={},x=[],G=function e(t,a,o,i,l,u){null!=i&&null!=l&&null!=u||(i=t.sourceLayer,l=t.nodeIndex,u=t.tensorIndex);var s=i.inboundNodes[l];if(-1!==o.indexOf(s))throw new JL("The tensor ".concat(t.name,' at layer "').concat(i.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(s)){r.containerNodes.add(n.nodeKey(i,l)),i.id in B||(B[i.id]=Object.keys(B).length),-1===o.indexOf(s)&&o.push(s);for(var c=s.inboundLayers.length,g=0;g<c;g++){e(s.inputTensors[g],a,o,s.inboundLayers[g],s.nodeIndices[g],s.tensorIndices[g])}for(a.push(s);o.indexOf(s)>=0;)o.splice(o.indexOf(s),1);x.push(s)}},R=[],W=[],V=ta(r.outputs);try{for(V.s();!(y=V.n()).done;){G(y.value,R,W)}}catch(Kle){V.e(Kle)}finally{V.f()}var F,N=ta(x.slice().reverse());try{for(N.s();!(F=N.n()).done;){var E=F.value;Z[E.id]=E,E.id in k||(k[E.id]=0);var D=k[E.id],X=null==S[E.outboundLayer.id]?0:S[E.outboundLayer.id];D=Math.max(D,X),S[E.outboundLayer.id]=D,w[E.outboundLayer.id]=E.outboundLayer,k[E.id]=D;for(var J=0;J<E.inboundLayers.length;J++){var H=E.inboundLayers[J],Y=E.nodeIndices[J],T=H.inboundNodes[Y],M=null==k[T.id]?0:k[T.id];k[T.id]=Math.max(D+1,M),Z[T.id]=T}}}catch(Kle){N.e(Kle)}finally{N.f()}var K={};for(var P in k){var z=k[P];z in K||(K[z]=[]),K[z].push(Z[P])}var L={};for(var _ in S){var O=S[_];O in L||(L[O]=[]),L[O].push(w[_])}var U=Object.keys(L).map((function(e){return parseInt(e,10)})).sort($L);r.layers=[];var j,Q=ta(U);try{for(Q.s();!(j=Q.n()).done;){var q=L[j.value];q.sort((function(e,t){var n=B[e.id],r=B[t.id];return n<r?-1:n>r?1:0}));var $,ee=ta(q);try{for(ee.s();!($=ee.n()).done;){var te=$.value;te instanceof n&&r.internalContainerRefs.push(te),r.layers.push(te)}}catch(Kle){ee.e(Kle)}finally{ee.f()}}}catch(Kle){Q.e(Kle)}finally{Q.f()}r.layersByDepth=L,U=Object.keys(K).map((function(e){return parseInt(e,10)})).sort($L);var ne,re=r.inputs.slice(),ae=[],oe=ta(U);try{for(oe.s();!(ne=oe.n()).done;){var ie,le=ta(K[ne.value]);try{for(le.s();!(ie=le.n()).done;){var ue=ie.value,se=ue.outboundLayer;if(null!=se){var ce,ge=ta(ue.inputTensors);try{for(ge.s();!(ce=ge.n()).done;){var de=ce.value;if(-1===re.indexOf(de))throw new JL("Graph disconnected: cannot obtain value for tensor ".concat(de)+' at layer "'.concat(se.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ae))}}catch(Kle){ge.e(Kle)}finally{ge.f()}var pe,he=ta(ue.outputTensors);try{for(he.s();!(pe=he.n()).done;){var fe=pe.value;re.push(fe)}}catch(Kle){he.e(Kle)}finally{he.f()}ae.push(se.name)}}}catch(Kle){le.e(Kle)}finally{le.f()}}}catch(Kle){oe.e(Kle)}finally{oe.f()}r.nodesByDepth=K;var Ce,Ie=r.layers.map((function(e){return e.name})),me=ta(Ie);try{var ve=function(){var e=Ce.value,t=Ie.filter((function(t){return t===e})).length;if(1!==t)throw new JL('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(Ie))};for(me.s();!(Ce=me.n()).done;)ve()}catch(Kle){me.e(Kle)}finally{me.f()}return r.outboundNodes=[],r.inboundNodes=[],new HO({outboundLayer:ke(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return uu(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=ta(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(Kle){n.e(Kle)}finally{n.f()}var a,o=ta(this.internalContainerRefs);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.numDisposedVariables+=i.dispose().numDisposedVariables}}catch(Kle){o.e(Kle)}finally{o.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new HL("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=ta(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(Kle){n.e(Kle)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=ta(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,Ae.Z)(r.nonTrainableWeights))}}catch(Kle){n.e(Kle)}finally{n.f()}if(!this.trainable){var a,o=[],i=ta(this.layers);try{for(i.s();!(a=i.n()).done;){var l=a.value;o.push.apply(o,(0,Ae.Z)(l.trainableWeights))}}catch(Kle){i.e(Kle)}finally{i.f()}return o.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,o=ta(this.layers);try{for(o.s();!(t=o.n()).done;){var i,l=t.value,u=ta(l.weights);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(null!=r[s.originalName])throw new HL("Duplicate weight name: ".concat(s.originalName));r[s.originalName]=s,a++}}catch(Kle){u.e(Kle)}finally{u.f()}}}catch(Kle){o.e(Kle)}finally{o.f()}var c=[];for(var g in e){var d=g;if(null==r[g]){var p=g.split("/"),h=p.slice(0,-2).concat([p[p.length-1]]);d=h.join("/")}if(null!=r[d])c.push([r[d],e[g]]);else if(n)throw new HL("Provided weight data has no target variable: ".concat(g));delete r[d]}if(n){var f=[];for(var C in r)f.push(C);if(f.length>0)throw new HL("".concat(f.length," of ").concat(a," weights are not set: ")+"".concat(f))}EO(c)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(HU),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JU(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return hH((function(){e=LL(e);for(var r=new YU,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return KU(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return hH((function(){var r;return e=LL(e),r=null==t?ML(null,e.length):LL(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=xO(e);if(t.length!==this.inputLayers.length)throw new HL("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],o=t[r];n[a.name+"_0_0"]=o}var i=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort($L);if(i.length>1){var l,u=ta(i);try{for(u.s();!(l=u.n()).done;){var s,c=l.value,g=ta(this.nodesByDepth[c]);try{for(g.s();!(s=g.n()).done;){var d=s.value,p=d.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var h=[],f=0;f<d.inboundLayers.length;f++){var C=d.inboundLayers[f],I=d.nodeIndices[f],m=d.tensorIndices[f],v=n["".concat(C.name,"_").concat(I,"_").concat(m)];h.push(v)}for(var b=xO(p.computeOutputShape(zL(h))),A=p.inboundNodes.indexOf(d),y=0;y<b.length;y++){n["".concat(p.name,"_").concat(A,"_").concat(y)]=b[y]}}}}catch(Kle){g.e(Kle)}finally{g.f()}}}catch(Kle){u.e(Kle)}finally{u.f()}}for(var k=[],Z=[],S=0;S<this.outputLayers.length;S++){var w=this.outputLayers[S],B=this.outputLayersNodeIndices[S],x=this.outputLayersTensorIndices[S],G="".concat(w.name,"_").concat(B,"_").concat(x);Z.push(G)}for(var R=0;R<Z.length;R++){var W=Z[R];KL(W in n),k.push(n[W])}return zL(k)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=ML(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],o=e[r],l=t[r];n[a.id]=[o,l]}var u,s=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort($L),c=ta(s);try{for(c.s();!(u=c.n()).done;){var g,d=u.value,p=ta(this.nodesByDepth[d]);try{for(p.s();!(g=p.n()).done;){var h,f=g.value,C=f.outboundLayer,I=f.inputTensors,m=f.outputTensors,v=new Array,b=ta(I);try{for(b.s();!(h=b.n()).done;){var A=h.value;A.id in n&&v.push(n[A.id])}}catch(Kle){b.e(Kle)}finally{b.f()}if(v.length===I.length){var y={},k=void 0,Z=void 0,S=void 0,w=void 0;if(null!=f.callArgs&&(y=f.callArgs),1===v.length){var B=(0,i.Z)(v[0],2),x=B[0],G=B[1];null==y.mask&&(y.mask=G),S=LL(C.call(x,y)),w=LL(C.computeMask(x,G)),k=[x],Z=[G]}else k=v.map((function(e){return e[0]})),Z=v.map((function(e){return e[1]})),null==y.mask&&(y.mask=Z),S=LL(C.call(k,y)),w=LL(C.computeMask(k,Z));if(C.activityRegularizer)throw new YL("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var R=0;R<m.length;++R){var W=m[R],V=S[R],F=w[R];n[W.id]=[V,F]}}}}catch(Kle){p.e(Kle)}finally{p.f()}}}catch(Kle){c.e(Kle)}finally{c.f()}var N,E=[],D=[],X=[],J=ta(this.outputs);try{for(J.s();!(N=J.n()).done;){var H=N.value;KL(H.id in n,"Could not compute output ".concat(H.name," : ").concat(H.id));var Y=(0,i.Z)(n[H.id],2),T=Y[0],M=Y[1];X.push(T.shape),E.push(T),D.push(M)}}catch(Kle){J.e(Kle)}finally{J.f()}return[E,D,X]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},o=ta(this.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;t=i instanceof n?1:0;for(var l=0;l<i.inboundNodes.length;l++){var u=n.nodeKey(i,l);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(Kle){o.e(Kle)}finally{o.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new HL("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new HL("Provide either a layer name or layer index");var n,r=ta(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(Kle){r.e(Kle)}finally{r.f()}throw new HL("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return hH((function(){var t,r=[],a=ta(e.layers);try{for(a.s();!(t=a.n()).done;)for(var o=t.value,i=0;i<o.inboundNodes.length;++i){var l=n.nodeKey(o,i);e.containerNodes.has(l)&&r.push.apply(r,(0,Ae.Z)(o.calculateLosses()))}}catch(Kle){a.e(Kle)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],o=ta(this.layers);try{for(o.s();!(e=o.n()).done;){for(var i=e.value,l=i.getClassName(),u=i.getConfig(),s=[],c=0;c<i.inboundNodes.length;c++){var g=i.inboundNodes[c],d=n.nodeKey(i,c),p={};if(this.containerNodes.has(d)){if(g.callArgs)try{JSON.stringify(g.callArgs),p=g.callArgs}catch(Kle){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(g.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),p={}}if(g.inboundLayers.length>0){for(var h=[],f=0;f<g.inboundLayers.length;f++){var C=g.inboundLayers[f],I=g.nodeIndices[f],m=g.tensorIndices[f],v=r[n.nodeKey(C,I)];null==v&&(v=0),h.push([C.name,v,m,p])}s.push(h)}}}var b={};b.name=i.name,b.className=l,b.config=u,b.inboundNodes=s,a.push(b)}}catch(Kle){o.e(Kle)}finally{o.f()}t.layers=a;for(var A=[],y=0;y<this.inputLayers.length;y++){var k=this.inputLayers[y],Z=this.inputLayersNodeIndices[y],S=n.nodeKey(k,Z);if(this.containerNodes.has(S)){var w=r[S];null!==w&&void 0!==w||(w=0);var B=this.inputLayersTensorIndices[y];A.push([k.name,w,B])}}t.inputLayers=A;for(var x=[],G=0;G<this.outputLayers.length;G++){var R=this.outputLayers[G],W=this.outputLayersNodeIndices[G],V=n.nodeKey(R,W);if(this.containerNodes.has(V)){var F=r[V];null!==F&&void 0!==F||(F=0);var N=this.outputLayersTensorIndices[G];x.push([R.name,F,N])}}return t.outputLayers=x,t}},{key:"stateful",get:function(){if(this._stateful)throw new HL("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=ta(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(Kle){t.e(Kle)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;hH((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function o(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function i(e,t){var n,a,i=[],l=ta(t);try{for(l.s();!(a=l.n()).done;){var u=a.value,s=u[0],c=u[1],g=u[2];if(n=null==u[3]?{}:u[3],!(s in r))return void o(e,t);var d=r[s];if(d.inboundNodes.length<=c)return void o(e,t);var p=d.inboundNodes[c];i.push(p.outputTensors[g])}}catch(Kle){l.e(Kle)}finally{l.f()}i.length>0&&e.apply(zL(i),n)}function l(e){var a=e.name,i=aU(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[a]=i,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new HL("Corrupted configuration, expected array for nodeData: ".concat(e));o(i,e)}))}var u,s=t.name,c=t.layers,g=ta(c);try{for(g.s();!(u=g.n()).done;){var d=u.value;l(d)}}catch(Kle){g.e(Kle)}finally{g.f()}for(;!t_(a);){var p,h=ta(c);try{for(h.s();!(p=h.n()).done;){var f=p.value,C=r[f.name];if(C.name in a){var I=a[C.name];delete a[C.name];var m,v=ta(I);try{for(v.s();!(m=v.n()).done;){var b=m.value;i(C,b)}}catch(Kle){v.e(Kle)}finally{v.f()}}}}catch(Kle){h.e(Kle)}finally{h.f()}}var A,y=[],k=[],Z=t.inputLayers,S=ta(Z);try{for(S.s();!(A=S.n()).done;){var w=A.value,B=w[0],x=w[1],G=w[2];KL(B in r);var R=r[B],W=R.inboundNodes[x].outputTensors;y.push(W[G])}}catch(Kle){S.e(Kle)}finally{S.f()}var V,F=t.outputLayers,N=ta(F);try{for(N.s();!(V=N.n()).done;){var E=V.value,D=E[0],X=E[1],J=E[2];KL(D in r);var H=r[D],Y=H.inboundNodes[X].outputTensors;k.push(Y[J])}}catch(Kle){N.e(Kle)}finally{N.f()}return new e({inputs:y,outputs:k,name:s})}}]),n}(TO);function OU(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function UU(e,t){return OU(e,t,"classWeight")}function jU(e,t,n,r){return QU.apply(this,arguments)}function QU(){return(QU=j(q().mark((function e(t,n,r,a){var o,i,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return o=hH((function(){if(1===t.shape.length)return WJ(t);if(2===t.shape.length){if(t.shape[1]>1){return SH(t,1)}if(1===t.shape[1])return MH(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,o.data();case 7:return e.t1=e.sent,i=e.t0.from.call(e.t0,e.t1),fH(o),l=[],i.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");l.push(r[e])})),e.abrupt("return",yT(l,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qU(e,t){return wY(e,t)}function $U(e,t){var n,r,a=t;n=a.xs,r=a.ys,uV(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var o=ej("input",e.inputNames,n),i=ej("output",e.outputNames,r),l=o[0].shape[0];uV(o.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),uV(i.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){uV(o[t].shape[0]===l,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(l," based on input ").concat(e.inputNames[0],".")}))},s=0;s<o.length;s++)u(s);for(var c=function(t){uV(i[t].shape[0]===l,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(l," based on input ").concat(e.inputNames[0],".")}))},g=0;g<i.length;g++)c(g);return{xs:o,ys:i}}function ej(e,t,n){if(n instanceof TD)return[n];if(Array.isArray(n))return uV(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],o=ta(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(null==n[i])throw new HL("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(i,"'."));a.push(n[i])}}catch(Kle){o.e(Kle)}finally{o.f()}return a}function tj(e){if(3===e.length)throw new YL("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function nj(e,t,n){return rj.apply(this,arguments)}function rj(){return rj=j(q().mark((function e(t,n,r){var a,o,i,l,u,s,c,g,d,p,h,f,C,I,m,v,b,A,y,k,Z,S,w,B,x,G,R,W,V,F,N,E,D;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,uV(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),uV(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),uV(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),uV(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),uV(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(o=null!=r.validationData)&&(oj(r.validationData)?uV(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=tj(r.validationData),i=u.xs,l=u.ys)),s=t.makeTrainFunction(),c=t.getDedupedMetricsNames(),g=o?c.slice().concat(c.map((function(e){return"val_"+e}))):c.slice(),d=$O(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,h=tU(d,p,r.epochs,null,null,aj(n,r),null,o,g),f=h.callbackList,C=h.history,f.setModel(t),t.history=C,e.next=22,f.onTrainBegin();case 22:return t.stopTraining_=!1,I=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:m=e.sent;case 27:if(!(I<r.epochs)){e.next=98;break}return v={},e.next=31,f.onEpochBegin(I);case 31:if(b=0,A=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:m=e.sent;case 37:if(a&&!(b<r.batchesPerEpoch)){e.next=91;break}return e.next=40,m.next();case 40:if(y=e.sent,!a||!y.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(b," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==y.value){e.next=73;break}return k=$U(t,y.value),Z=k.xs,S=k.ys,(w={}).batch=A,w.size=Z[0].shape[0],e.next=51,f.onBatchBegin(A,w);case 51:if(B=[],null==r.classWeight){e.next=64;break}x=UU(r.classWeight,t.outputNames),G=0;case 55:if(!(G<x.length)){e.next=64;break}return e.t0=B,e.next=59,jU(S[G],null,x[G]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++G,e.next=55;break;case 64:for(R=Z.concat(S).concat(B),W=s(R),fH(R),V=0;V<c.length;++V)F=c[V],N=W[V],w[F]=N,CH(N);return e.next=70,f.onBatchEnd(A,w);case 70:_O(w),A++,b++;case 73:if(!(a?b>=r.batchesPerEpoch:y.done)){e.next=87;break}if(!o){e.next=86;break}if(E=void 0,!oj(r.validationData)){e.next=84;break}return e.t2=LL,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,E=(0,e.t2)(e.t3),e.next=85;break;case 84:E=LL(t.evaluate(i,l,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(D=0;D<t.metricsNames.length;++D)v["val_".concat(t.metricsNames[D])]=E[D];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,f.onEpochEnd(I,v);case 93:if(I++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,f.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),rj.apply(this,arguments)}function aj(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function oj(e){return"function"===typeof e.iterator}function ij(e){return"function"===typeof e.next}function lj(e,t,n){return uj.apply(this,arguments)}function uj(){return uj=j(q().mark((function e(t,n,r){var a,o,i,l,u,s,c,g,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,o=t.testFunction,i=[],!(r.verbose>0)){e.next=6;break}throw new YL("Verbose mode is not implemented yet.");case 6:if(uV(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!ij(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:l=e.t0,u=0,s=0,c=q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.next();case 2:if(n=e.sent,i=hH((function(){return n.value&&function(){var e=$U(t,n.value),r=e.xs,a=e.ys,l=r.concat(a),c=hH((function(){return o(l)}));if(fH(l),0===s)for(var g=0;g<c.length;++g)i.push(vH(0));for(var d=l[0].shape[0],p=function(e){var t=c[e],n=i[e];i[e]=hH((function(){return yH(i[e],wY(d,t))})),s>0&&fH(n)},h=0;h<c.length;++h)p(h);fH(c),u+=d,++s}(),i})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(s<r.batches)){e.next=25;break}return e.delegateYield(c(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(g=0;g<i.length;++g)d=i[g],i[g]=cY(i[g],u),fH(d);return e.abrupt("return",zL(i));case 27:case"end":return e.stop()}}),e)}))),uj.apply(this,arguments)}function sj(e){uV(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function cj(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return Y_(e,t,n-t)})):Y_(e,t,n-t)}function gj(e,t){return hH((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return gj(e,t)})):O_(e,"int32"===t.dtype?t:RJ(t,"int32"))}))}function dj(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function pj(e,t,n,r,a,o,i,l,u,s,c,g,d,p,h){return hj.apply(this,arguments)}function hj(){return hj=j(q().mark((function e(t,n,r,a,o,i,l,u,s,c,g,d,p,h,f){var C,I,m,v,b,A,y,k;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==o&&(o=32),null==i&&(i=1),null==g&&(g=!0),null==p&&(p=0),C=!1,null!=s&&null!=c&&(C=!0),null==f){e.next=10;break}if(C=!0,null!=h){e.next=10;break}throw new HL("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(I=t.checkNumSamples(r,o,h,"steps_per_epoch"))&&(m=D_(0,I)),null==l&&(l=1),v=tU(u,l,i,p,I,h,o,C,d),b=v.callbackList,A=v.history,b.setModel(t),t.history=A,e.next=18,b.onTrainBegin();case 18:t.stopTraining_=!1,y=q().mark((function e(i){var l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onEpochBegin(i);case 2:if(l={},null==h){e.next=7;break}throw new YL("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(q().mark((function e(){var i,u,d,p;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==g){e.next=4;break}throw new YL("batch shuffling is not implemneted yet");case 4:g&&rV(m);case 5:i=yT(m),u=dj(I,o),d=q().mark((function e(g){var d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,b.onBatchBegin(g,d);case 3:return hH((function(){var e=u[g][0],p=u[g][1],h=Y_(i,e,p-e);d.batch=g,d.size=p-e;for(var f=gj(r,h),I=n(f),m=0;m<a.length;++m){var v=a[m],b=I[m];d[v]=b,CH(b)}if(g===u.length-1&&C)for(var A=t.testLoop(s,c,o),y=0;y<a.length;++y){var k=a[y],Z=A[y];CH(Z),l["val_"+k]=Z}})),e.next=6,b.onBatchEnd(g,d);case 6:if(_O(d),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 9:if(!(p<u.length)){e.next=17;break}return e.delegateYield(d(p),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++p,e.next=9;break;case 17:i.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,b.onEpochEnd(i,l);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),k=p;case 21:if(!(k<i)){e.next=29;break}return e.delegateYield(y(k),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++k,e.next=21;break;case 29:return e.next=31,b.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),hj.apply(this,arguments)}function fj(e,t,n){return Cj.apply(this,arguments)}function Cj(){return Cj=j(q().mark((function e(t,n,r){var a,o,i,l,u,s,c,g,d,p,h,f,C,I,m,v,b,A,y,k,Z,S,w,B,x,G,R=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R.length>3&&void 0!==R[3]?R[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,sj(h=null==a.batchSize?32:a.batchSize),f=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,f,h);case 10:if(C=e.sent,o=C[0],i=C[1],p=C[2],I=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(I=!0,2!==a.validationData.length){e.next=22;break}s=a.validationData[0],c=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new YL("validationData including sample weights is not supported yet.");case 26:throw new HL("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return v=!0,e.next=30,t.standardizeUserData(s,c,null,null,v,h);case 30:b=e.sent,g=b[0],d=b[1],m=g.concat(d),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(I=!0,A=Math.floor(o[0].shape[0]*(1-a.validationSplit)),y=o[0].shape[0],g=cj(o,A,y),l=o,o=cj(o,0,A),d=cj(i,A,y),u=i,i=cj(i,0,A),m=g.concat(d)):null!=a.validationSteps&&(I=!0);case 37:return k=o.concat(i).concat(p),t.checkTrainableWeightsConsistency(),Z=t.makeTrainFunction(),S=t.getDedupedMetricsNames(),I?(t.makeTestFunction(),w=t.testFunction,B=S.slice().concat(S.map((function(e){return"val_"+e})))):(w=null,m=[],B=S.slice()),x=$O(a.callbacks,a.yieldEvery),e.next=45,pj(t,Z,k,S,h,a.epochs,a.verbose,x,w,m,a.shuffle,B,a.initialEpoch,null,null);case 45:return G=e.sent,e.abrupt("return",G);case 47:return e.prev=47,t.isTraining=!1,mj(o,n),mj(i,r),mj(l,n),mj(u,r),mj(g,s),mj(d,c),null!=p&&fH(p),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),Cj.apply(this,arguments)}function Ij(e){var t=[];e instanceof TD&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(J_(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function mj(e,t){if(null!=e){var n=[];if(t instanceof TD)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var o=[];if(e instanceof TD)-1===n.indexOf(e.id)&&o.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&o.push(e)}));else if(null!=e)for(var i in e){var l=e[i];-1===n.indexOf(l.id)&&o.push(l)}o.forEach((function(e){e.isDisposed||e.dispose()}))}}function vj(e){return Array.isArray(e)}function bj(e){return!function(e){return e instanceof TD}(e)&&!vj(e)}function Aj(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var i=!1;if(vj(e)&&e.length>0)i=!0;else if(bj(e)){for(var l in e)if(e.hasOwnProperty(l)){i=!0;break}}else i=!0;if(i)throw new HL("Error when checking model ".concat(o," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(bj(e)){e=e,r=[];var u,s=ta(t);try{for(s.s();!(u=s.n()).done;){var c=u.value;if(null==e[c])throw new HL('No data provided for "'.concat(c,'". Need data for each key in: ')+"".concat(t));r.push(e[c])}}catch(Kle){s.e(Kle)}finally{s.f()}}else if(vj(e)){if((e=e).length!==t.length)throw new HL("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new HL("The model ".concat(o," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=Ij(r),null!=n)for(var g=0;g<t.length;++g)if(null!=n[g]){var d=r[g];if(d.shape.length!==n[g].length)throw new HL("Error when checking ".concat(o,": expected ").concat(t[g]," ")+"to have ".concat(n[g].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var p=0;p<n[g].length;++p)if(0!==p||a){var h=d.shape[p],f=n[g][p];if(null!=f&&f>=0&&h!==f)throw new HL("".concat(o," expected a batch of elements where each ")+"example has shape [".concat(n[g].slice(1,n[g].length),"] ")+"(i.e.,tensor shape [*,".concat(n[g].slice(1,n[g].length),"])")+" but the ".concat(o," received an input with ").concat(d.shape[0])+" examples, each with shape [".concat(d.shape.slice(1,d.shape.length),"]")+" (tensor shape [".concat(d.shape,"])"))}}return r}function yj(e,t,n){var r=e_(e.map((function(e){return e.shape[0]})));r.sort();var a=e_(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new HL("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new HL("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!pV(r,a))throw new HL("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function kj(e,t,n){for(var r=[iU,dU,cU],a=0;a<e.length;++a){var o=e[a],i=t[a],l=n[a];if(null!=i){if(i===cU&&1===o.shape[o.shape.length-1])throw new HL("You are passing a target array of shape ".concat(o.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(i))for(var u=o.shape.slice(1),s=l.slice(1),c=0;c<u.length;++c){var g=u[c],d=s[c];if(null!=d&&g!==d)throw new HL("A target Tensor with shape ".concat(o.shape," was passed for an ")+"output of shape ".concat(l,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function Zj(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new HL("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new HL("The model expects ".concat(t.length," ").concat(o," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var i=0;i<t.length;++i)if(null!=n[i]){var l=r[i];if(l.shape.length!==n[i].length)throw new HL("Error when checking ".concat(o,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(l.shape)));for(var u=0;u<n[i].length;++u)if(0!==u||a){var s=l.shape[u],c=n[i][u];if(null!=c&&c!==s)throw new HL("Error when checking ".concat(o,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(l.shape),"."))}}}var Sj=function(t){su(r,t);var n=hu(r);function r(e){var t;return iu(this,r),(t=n.call(this,e)).isTraining=!1,t}return uu(r,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new HL("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");RU(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return oK.adagrad(.01)},Adadelta:function(){return oK.adadelta(1,.95,NL())},Adam:function(){return oK.adam(.001,.9,.999,NL())},Adamax:function(){return oK.adamax(.002,.9,.999,NL(),0)},RMSProp:function(){return oK.rmsprop(.001,.9,0,NL())},SGD:function(){return oK.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new HL("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof bH))throw new HL("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new HL("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return CU(e)}))}else{var a=CU(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new HL('Unknown entry in loss dictionary: "'.concat(o,'". ')+"Only expected the following keys: ".concat(this.outputNames));var i,l=ta(this.outputNames);try{for(l.s();!(i=l.n()).done;){var u=i.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(CU(e.loss[u]))}}catch(Kle){l.e(Kle)}finally{l.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var s=0;s<this.outputs.length;++s){var c=this.internalOutputShapes[s],g=this.outputNames[s];this.feedOutputNames.push(g),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[s])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],B_("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var p=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],o=ta(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,l=n.hasOwnProperty(i)?n[i]:[];Array.isArray(l)||(l=[l]),a.push(l)}}catch(Kle){o.e(Kle)}finally{o.f()}return a}(e.metrics,this.outputNames),h=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};B_("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,o,i,l=ta(n);try{for(l.s();!(i=l.n()).done;){var u=i.value;if("string"===typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var s=t.internalOutputShapes[e];1===s[s.length-1]||t.lossFunctions[e]===dU?-1!==["accuracy","acc"].indexOf(u)?a=IU:-1!==["crossentropy","ce"].indexOf(u)&&(a=bU):t.lossFunctions[e]===gU?-1!==["accuracy","acc"].indexOf(u)?a=AU:-1!==["crossentropy","ce"].indexOf(u)&&(a=kU):-1!==["accuracy","acc"].indexOf(u)?a=mU:-1!==["crossentropy","ce"].indexOf(u)&&(a=yU);var c=void 0;-1!==["accuracy","acc"].indexOf(u)?c="acc":-1!==["crossentropy","ce"].indexOf(u)&&(c="ce"),o=a,r=""+c}else{var g=SU(u);o=g,r=""+wU(u)}var d=void 0;B_(r,(function(){d=o})),h(e,r,d)}}catch(Kle){l.e(Kle)}finally{l.f()}}(p[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;sj(r);var a=!0,o=this.standardizeUserDataXY(e,t,a,r);try{var i=o[0].concat(o[1]);this.makeTestFunction();var l=this.testFunction,u=this.testLoop(l,i,r,n.verbose,n.steps);return zL(u)}finally{mj(o[0],e),mj(o[1],t)}}},{key:"evaluateDataset",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",lj(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new HL("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new HL("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new HL("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),o=new YU;if(e instanceof TD&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new HL("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],e[i])}else{var l,u=ta(this.inputs);try{for(u.s();!(l=u.n()).done;){var s=l.value,c=e[s.name];if(null==c)throw new HL("No value is provided for the model's input ".concat(s.name));o.add(s,c)}}catch(Kle){u.e(Kle)}finally{u.f()}}var g=KU(a,o);return n?g:g[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=ML(null,e.length),r=e.length,a=ta(this.layers);try{for(a.s();!(t=a.n()).done;){for(var o=t.value,i=Array.isArray(o.output)?o.output:[o.output],l=i.map((function(e){return e.name})),u=0;u<e.length;++u){var s=l.indexOf(e[u]);if(-1!==s&&(n[u]=i[s],r--),0===r)break}if(0===r)break}}catch(Kle){a.e(Kle)}finally{a.f()}if(r>0){var c=[];throw n.forEach((function(t,n){null==t&&c.push(e[n])})),new HL("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(c)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return hH((function(){var a=t.checkNumSamples(e);if(r)throw new YL("Verbose predictLoop() is not implemented yet.");for(var o=dj(a,n),i=t.outputs.map((function(e){return[]})),l=function(n){hH((function(){var r=o[n][0],a=o[n][1],i=cj(e,r,a),l=[];if(Array.isArray(i))for(var u=0;u<i.length;++u)l.push({key:t.inputs[u],value:i[u]});else l.push({key:t.inputs[0],value:i});var s=new YU(l);return KU(t.outputs,s)})).forEach((function(e,t){return i[t].push(e)}))},u=0;u<o.length;++u)l(u);return zL(i.map((function(e){return jH(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ij(e);Zj(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return sj(r),this.predictLoop(n,r)}finally{mj(n,e)}}},{key:"predictOnBatch",value:function(e){Zj(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new JL("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var o=this.feedOutputShapes[a],i=this.feedLossFns[a];i===gU?r.push(o.slice(0,o.length-1).concat([1])):r.push(o)}if(yj(e=Aj(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Aj(t,this.feedOutputNames,r,!1,"target")),kj(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new HL("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=j(q().mark((function e(t,n,r,a){var o,l,u,s,c,g,d,p,h,f=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(f.length>4&&void 0!==f[4])||f[4],l=f.length>5?f[5]:void 0,u=this.standardizeUserDataXY(t,n,o,l),s=(0,i.Z)(u,2),c=s[0],g=s[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==a){e.next=19;break}p=UU(a,this.outputNames),d=[],h=0;case 10:if(!(h<p.length)){e.next=19;break}return e.t0=d,e.next=14,jU(g[h],null,p[h]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++h,e.next=10;break;case 19:return e.abrupt("return",[c,g,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return hH((function(){var i=r.checkNumSamples(t,n,o,"steps"),l=[];if(a>0)throw new YL("Verbose mode is not implemented yet.");if(null!=o)throw new YL("steps mode in testLoop() is not implemented yet");for(var u=dj(i,n),s=yT(D_(0,i)),c=0;c<u.length;++c){var g=u[c][0],d=u[c][1],p=Y_(s,g,d-g),h=gj(t,p),f=e(h);if(0===c)for(var C=0;C<f.length;++C)l.push(vH(0));for(var I=0;I<f.length;++I){var m=f[I];l[I]=yH(l[I],wY(d-g,m))}}for(var v=0;v<l.length;++v)l[v]=cY(l[v],i);return l}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(PL(e,r)>1){var o=PL(e.slice(0,n),r);a+="_".concat(o)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),i=[],l=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],l=0;l<e.inputs.length;++l)t.push({key:e.inputs[l],value:r[l]});for(var u,s=new YU(t),c=KU(e.outputs,s,{training:!0}),g=0;g<e.lossFunctions.length;++g){var d=(0,e.lossFunctions[g])(a[g],c[g]);null!=o[g]&&(d=qU(d,o[g]));var p=EY(d);n.push(p),u=0===g?d:yH(u,d)}for(var h=0;h<e.metricsTensors.length;++h){var f=void 0;if(e.outputs.length>1&&h<e.outputs.length)f=n[h];else{var C=e.metricsTensors[h][0],I=e.metricsTensors[h][1];f=EY(C(a[I],c[I]))}CH(f),i.push(f)}return u=EY(u),e.calculateLosses().forEach((function(e){u=yH(u,e)})),u}),!0,l)].concat(i)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return hH((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=[],l=0;l<e.inputs.length;++l)i.push({key:e.inputs[l],value:a[l]});for(var u=new YU(i),s=KU(e.outputs,u),c=0;c<e.lossFunctions.length;++c){var g=e.lossFunctions[c],d=EY(g(o[c],s[c]));n=0===c?d:yH(n,d),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var h=e.metricsTensors[p][0],f=e.metricsTensors[p][1],C=EY(h(o[f],s[f]));r.push(C)}return r}))}}},{key:"fit",value:function(){var e=j(q().mark((function e(t,n){var r,a=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",fj(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nj(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=j(q().mark((function e(t,n){var r,a,o,i,l,u,s,c,g,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],o=r[1],i=this.makeTrainFunction(),l=i(a.concat(o)),u=[],s=ta(l),e.prev=9,s.s();case 11:if((c=s.n()).done){e.next=19;break}return g=c.value,e.next=15,g.data();case 15:d=e.sent,u.push(d[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:return fH(l),mj(r[0],t),mj(r[1],n),e.abrupt("return",zL(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:a[o]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=rU(cu(r.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=pH().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-pH().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=_L(this.loss);else if(Array.isArray(this.loss)){var t,n=ta(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(Kle){n.e(Kle)}finally{n.f()}e=this.loss.map((function(e){return _L(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,o=0,i=r;o<i.length;o++){var l=i[o];if("string"!==typeof a[l])throw new Error("Serialization of non-string loss is not supported.");e[l]=_L(a[l])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[_L(wU(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return _L(wU(e))}));var e={};for(var t in this.metrics)e[t]=_L(wU(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=aU(XU(e.optimizer_config));if("string"===typeof e.loss)t=OL(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return OL(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=OL(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return OL(e)}));else if(null!=e.metrics)for(var o in n={},e.metrics)n[o]=OL(e.metrics[o]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var t=j(q().mark((function t(n,r){var a,o,i,l,u,s,c,g,d;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=9;break}if(0!==(a=TX(n)).length){t.next=6;break}throw new HL("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(a.length>1)){t.next=8;break}throw new HL("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=a[0];case 9:if(null!=n.save){t.next=11;break}throw new HL("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.next=13,kX(this.getNamedWeights(r));case 13:if(o=t.sent,!1,null,i=this.toJSON(null,false),l={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(HU),convertedBy:null},!(null!=r&&r.includeOptimizer)||null==this.optimizer){t.next=34;break}return l.trainingConfig=this.getTrainingConfig(),s="optimizer",t.t0=e,t.next=25,this.optimizer.getWeights();case 25:return t.t1=t.sent,t.t2=s,t.next=29,t.t0.encodeWeights.call(t.t0,t.t1,t.t2);case 29:c=t.sent,g=c.data,d=c.specs,(u=o.specs).push.apply(u,(0,Ae.Z)(d)),o.data=WX([o.data,g]);case 34:return null!=this.userDefinedMetadata&&(!0,xU(this.userDefinedMetadata,this.name,true),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=o.data,l.weightSpecs=o.specs,t.abrupt("return",n.save(l));case 38:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){xU(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),r}(_U);Sj.className="Model",gH(Sj);var wj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n)}(Sj);wj.className="Functional",gH(wj);var Bj=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:wO("sequential_"),null!=e.layers){var a,o=ta(e.layers);try{for(o.s();!(a=o.n()).done;){var i=a.value;r.add(i)}}catch(Kle){o.e(Kle)}finally{o.f()}}return r}return uu(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new HL("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof Sj;if(r){if(1!==(t=e).outputs.length)throw new HL("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new HL("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new HL("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new HL("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new PO({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new HL("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new HL("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=MO(this.outputs[0])}this.inboundNodes=[],new HO({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:ML(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(RO(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Sj({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),rU(cu(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),rU(cu(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new JL("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new JL("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=j(q().mark((function e(t,n){var r,a=arguments;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new JL("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new JL("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=j(q().mark((function e(t,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new HL("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new HL("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=ta(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(Kle){n.e(Kle)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new HL("Legacy serialization format not supported yet.");r=t}else uV(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,o=t;var i=new e(o);if(!(i instanceof n))throw new YL("Sequential.fromConfig called on non-Sequential input: ".concat(i));var l,u=ta(r);try{for(u.s();!(l=u.n()).done;){var s=l.value,c=void 0,g=aU(s,c,a);a&&g.setFastWeightInitDuringBuild(!0),i.add(g)}}catch(Kle){u.e(Kle)}finally{u.f()}return i}}]),n}(Sj);Bj.className="Sequential",gH(Bj);var xj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"getConfig",value:function(){return{}}}]),n}(sH),Gj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return q_(e,t)}}]),n}(xj);Gj.className="elu",gH(Gj);var Rj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return lT(e)}}]),n}(xj);Rj.className="selu",gH(Rj);var Wj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return oT(e)}}]),n}(xj);Wj.className="relu",gH(Wj);var Vj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return hH((function(){return DY(6,oT(e))}))}}]),n}(xj);Vj.className="relu6",gH(Vj);var Fj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return e}}]),n}(xj);Fj.className="linear",gH(Fj);var Nj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return sT(e)}}]),n}(xj);Nj.className="sigmoid",gH(Nj);var Ej=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return function(e){return hH((function(){var t=yH(.5,wY(.2,e));return UH(t,0,1)}))}(e)}}]),n}(xj);Ej.className="hardSigmoid",gH(Ej);var Dj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return CT(e)}}]),n}(xj);Dj.className="softplus",gH(Dj);var Xj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return function(e){return hH((function(){return cY(e,yH(AH(e),1))}))}(e)}}]),n}(xj);Xj.className="softsign",gH(Xj);var Jj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return AT(e)}}]),n}(xj);Jj.className="tanh",gH(Jj);var Hj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return fT(e,t)}}]),n}(xj);Hj.className="softmax",gH(Hj);var Yj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return GY(e,t)}}]),n}(xj);Yj.className="logSoftmax",gH(Yj);var Tj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return hH((function(){return wY(sT(wY(e,t)),e)}))}}]),n}(xj);Tj.className="swish",gH(Tj);var Mj=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e){return hH((function(){return wY(e,AT(CT(e)))}))}}]),n}(xj);function Kj(e){return e.getClassName()}function Pj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qL(e,cH.getMap().classNameMap,t,"activation")}function zj(e){if(null==e){var t={className:"linear",config:{}};return Pj(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},Pj(n)}return e instanceof xj?e:Pj(e)}function Lj(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}Mj.className="mish",gH(Mj);var _j=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n)}(sH),Oj=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this),Lj(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return uu(n,[{key:"apply",value:function(e){var t=this;return hH((function(){var n=UY([1]);return t.hasL1&&(n=yH(n,xY(wY(t.l1,AH(e))))),t.hasL2&&(n=yH(n,xY(wY(t.l2,U_(e))))),MH(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(_j);Oj.className="L1L2",gH(Oj);var Uj={l1l2:"L1L2"};function jj(e){return jL(e)}function Qj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qL(e,cH.getMap().classNameMap,t,"regularizer")}function qj(e){return null==e?null:"string"===typeof e?Qj({className:e in Uj?Uj[e]:e,config:{}}):e instanceof _j?e:Qj(e)}var $j=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return uu(n,[{key:"call",value:function(e,t){e=GO(e);var n=oT(e);return null!=this.maxValue&&(n=UH(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);$j.className="ReLU",gH($j);var eQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return uu(n,[{key:"call",value:function(e,t){var n=GO(e);return yY(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);eQ.className="LeakyReLU",gH(eQ);var tQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=yO(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=qj(e.alphaRegularizer),r.alphaConstraint=C_(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new HL("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return uu(n,[{key:"build",value:function(e){var t=(e=RO(e)).slice(1);if(null!=this.sharedAxes){var n,r=ta(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(Kle){r.e(Kle)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var o=1;o<e.length;++o)a[o]=e[o];this.inputSpec=[new DO({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=GO(e),$Y(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:AO(this.alphaInitializer),alphaRegularizer:jj(this.alphaRegularizer),alphaConstraint:h_(this.alphaConstraint),sharedAxes:this.sharedAxes},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);tQ.className="PReLU",gH(tQ);var nQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new YL("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return uu(n,[{key:"call",value:function(e,t){var n=GO(e);return gY(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);nQ.className="ELU",gH(nQ);var rQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return uu(n,[{key:"call",value:function(e,t){var n=GO(e);return wY(n,RJ(bY(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);rQ.className="ThresholdedReLU",gH(rQ);var aQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new Hj).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return uu(n,[{key:"call",value:function(e,t){var n=GO(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);function oQ(e,t,n){if("number"===typeof e)return ML(e,t);if(e.length!==t)throw new HL("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!V_(a))throw new HL("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function iQ(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var o,i=t+(t-1)*(a-1);return o="same"===n?e:e-i+1,Math.floor((o+r-1)/r)}function lQ(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+E_([n-t,0]);else{if("same"!==r)throw new HL("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function uQ(e,t){return hH((function(){return k_(t),"channelsFirst"===t?GT(e,[0,2,3,1]):e}))}function sQ(e,t){return hH((function(){return k_(t),"channelsFirst"===t?GT(e,[0,2,3,4,1]):e}))}function cQ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return hH((function(){if(null==o&&(o="channelsLast"),k_(o),3!==e.shape.length)throw new HL("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new HL("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new HL("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===o&&(e=GT(e,[0,2,1])),"causal"===a)throw new YL("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var l=nY(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(l=Q_(l,n)),l}))}function gQ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return hH((function(){if(null==o&&(o="channelsLast"),k_(o),3!==e.rank&&4!==e.rank)throw new HL("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new HL("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=uQ(e,o);if("causal"===a)throw new YL("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=PT({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:l}),"channelsFirst"===o&&(u=GT(u,[0,3,1,2])),u}))}function dQ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return hH((function(){if(null==o&&(o="channelsLast"),k_(o),4!==e.rank&&5!==e.rank)throw new HL("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new HL("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var l=sQ(e,o);if("causal"===a)throw new YL("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=oY(l,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(l=Q_(l,n)),"channelsFirst"===o&&(l=GT(l,[0,4,1,2,3])),l}))}aQ.className="Softmax",gH(aQ);var pQ=function(e){su(n,e);var t=hu(n);function n(e,r){var a;if(iu(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,a_(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new YL("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=oQ(r.kernelSize,e,"kernelSize"),a.strides=oQ(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,Z_(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,k_(a.dataFormat),a.activation=zj(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=yO(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=C_(r.biasConstraint),a.biasRegularizer=qj(r.biasRegularizer),a.activityRegularizer=qj(r.activityRegularizer),a.dilationRate=oQ(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new HL("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new HL("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new HL("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return uu(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Kj(this.activation),useBias:this.useBias,biasInitializer:AO(this.biasInitializer),biasRegularizer:jj(this.biasRegularizer),activityRegularizer:jj(this.activityRegularizer),biasConstraint:h_(this.biasConstraint)},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(KL("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!r_(e.kernelSize,"number",1,3))throw new HL("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(TO),hQ=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,a_(a.filters,"filters"),a.kernelInitializer=yO(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=C_(r.kernelConstraint),a.kernelRegularizer=qj(r.kernelRegularizer),a}return uu(n,[{key:"build",value:function(e){e=RO(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new HL("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,le.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){var t;e=GO(e);var r=null==n.bias?null:n.bias.read(),a=i_(n.activation.getClassName());if(null!=a&&2===n.rank)t=gQ(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=cQ(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=gQ(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new YL("convolutions greater than 3D are not implemented yet.");t=dQ(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=RO(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=iQ(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var o=[e[0]];return"channelsLast"===this.dataFormat?(o=o.concat(t)).push(this.filters):(o.push(this.filters),o=o.concat(t)),o}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:AO(this.kernelInitializer),kernelRegularizer:jj(this.kernelRegularizer),kernelConstraint:h_(this.kernelConstraint)},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new HL("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(pQ),fQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return uu(n,[{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!r_(e.kernelSize,"number",1,2))throw new HL("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(hQ);fQ.className="Conv2D",gH(fQ);var CQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return uu(n,[{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new HL("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(hQ);CQ.className="Conv3D",gH(CQ);var IQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this,e)).inputSpec=[new DO({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new HL("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return uu(n,[{key:"build",value:function(e){if(4!==(e=RO(e)).length)throw new HL("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new HL("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new DO({ndim:4,axes:(0,le.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){var t=GO(e);if(4!==t.shape.length)throw new HL("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o=t.shape,i=o[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var l=o[r],u=o[a],s=n.kernelSize[0],c=n.kernelSize[1],g=n.strides[0],d=n.strides[1],p=[i,lQ(l,g,s,n.padding),lQ(u,d,c,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=GT(t,[0,2,3,1]));var h=aY(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(h=GT(h,[0,3,1,2])),null!=n.bias&&(h=Q_(h,n.bias.read(),n.dataFormat)),null!=n.activation&&(h=n.activation.apply(h)),h}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=RO(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var o=this.kernelSize[0],i=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=lQ(a[n],l,o,this.padding),a[r]=lQ(a[r],u,i,this.padding),a}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(fQ);IQ.className="Conv2DTranspose",gH(IQ);var mQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this,e)).inputSpec=[new DO({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new HL("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return uu(n,[{key:"build",value:function(e){if(5!==(e=RO(e)).length)throw new HL("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new HL("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new DO({ndim:5,axes:(0,le.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){var t=GO(e);if(5!==t.shape.length)throw new HL("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o,i=t.shape,l=i[0];"channelsFirst"===n.dataFormat?(o=2,r=3,a=4):(o=1,r=2,a=3);var u=i[o],s=i[r],c=i[a],g=n.kernelSize[0],d=n.kernelSize[1],p=n.kernelSize[2],h=n.strides[0],f=n.strides[1],C=n.strides[2],I=[l,lQ(u,h,g,n.padding),lQ(s,f,d,n.padding),lQ(c,C,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=GT(t,[0,2,3,4,1]));var m=lY(t,n.kernel.read(),I,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(m=GT(m,[0,4,1,2,3])),null!==n.bias&&(m=Q_(m,n.bias.read(),n.dataFormat)),null!==n.activation&&(m=n.activation.apply(m)),m}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,o=(e=RO(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var i=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],s=this.strides[0],c=this.strides[1],g=this.strides[2];return o[t]=this.filters,o[n]=lQ(o[n],s,i,this.padding),o[r]=lQ(o[r],c,l,this.padding),o[a]=lQ(o[a],g,u,this.padding),o}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(CQ);mQ.className="Conv3DTranspose",gH(mQ);var vQ=function(e){su(n,e);var t=hu(n);function n(e,r){var a;if(iu(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new HL("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new HL("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new HL("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=yO(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=qj(r.depthwiseRegularizer),a.depthwiseConstraint=C_(r.depthwiseConstraint),a.pointwiseInitializer=yO(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=qj(r.pointwiseRegularizer),a.pointwiseConstraint=C_(r.pointwiseConstraint),a}return uu(n,[{key:"build",value:function(e){if((e=RO(e)).length<this.rank+2)throw new HL("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new HL("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(n*this.depthMultiplier,this.filters);var i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new DO({ndim:this.rank+2,axes:(0,le.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){var t;if(e=GO(e),1===n.rank)throw new YL("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=GT(e,[0,2,3,1])),t=uT(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=Q_(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=GT(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=AO(this.depthwiseInitializer),e.pointwiseInitializer=AO(this.pointwiseInitializer),e.depthwiseRegularizer=jj(this.depthwiseRegularizer),e.pointwiseRegularizer=jj(this.pointwiseRegularizer),e.depthwiseConstraint=h_(this.depthwiseConstraint),e.pointwiseConstraint=h_(this.pointwiseConstraint),e}}]),n}(hQ);vQ.className="SeparableConv";var bQ=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,2,e)}return uu(n)}(vQ);bQ.className="SeparableConv2D",gH(bQ);var AQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return uu(n,[{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!r_(e.kernelSize,"number",1,1))throw new HL("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(hQ);AQ.className="Conv1D",gH(AQ);var yQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return uu(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return hH((function(){if(e=GO(e),"channelsLast"===n.dataFormat){var t=M_(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return M_(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=M_(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return M_(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);yQ.className="Cropping2D",gH(yQ);var kQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,k_(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){n_(m_,"InterpolationFormat",e)}(r.interpolation),r}return uu(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return hH((function(){var t=GO(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=GT(t,[0,2,3,1]);var a=n.size[0]*r[2],o=n.size[1]*r[3],i="nearest"===n.interpolation?UM.resizeNearestNeighbor(t,[a,o]):UM.resizeBilinear(t,[a,o]);return GT(i,[0,3,1,2])}var l=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?UM.resizeNearestNeighbor(t,[l,u]):UM.resizeBilinear(t,[l,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);kQ.className="UpSampling2D",gH(kQ);var ZQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=yO(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=C_(e.depthwiseConstraint),r.depthwiseRegularizer=qj(e.depthwiseRegularizer),r}return uu(n,[{key:"build",value:function(e){if((e=RO(e)).length<4)throw new HL("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new HL("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return hH((function(){null==a&&(a="channelsLast"),k_(a);var i=uQ(e,a);if(4!==e.rank)throw new HL("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new HL("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=uY(i,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===a&&(i=GT(i,[0,3,1,2])),i}))}(e=GO(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=Q_(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=RO(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=iQ(t,this.kernelSize[0],this.padding,this.strides[0]),o=iQ(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,o]:[e[0],a,o,r]}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=AO(this.depthwiseInitializer),e.depthwiseRegularizer=jj(this.depthwiseRegularizer),e.depthwiseConstraint=h_(this.depthwiseRegularizer),e}}]),n}(pQ);function SQ(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new HL("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function wQ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return hH((function(){var u=t.shape.length;if(u<3)throw new HL("Input should be at least 3D, but is ".concat(u,"D."));var s=[1,0].concat(D_(2,u));if(t=GT(t,s),null!=o)throw new YL("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=RJ(RJ(a,"bool"),"float32")).rank===u-1&&(a=hY(a,-1)),a=GT(a,s)),r&&(t=iT(t,0),null!=a&&(a=iT(a,0)));var c,g,d=[],p=n,h=t.shape[0],f=ZT(t);null!=a&&(g=ZT(a));for(var C,I=function(t){var n=f[t],r=hH((function(){return e(n,p)}));if(null==a)c=r[0],p=r[1];else{var o=hH((function(){var e=g[t],n=BY(QY(e),e);return{output:yH(wY(r[0],e),wY(p[0],n)),newStates:p.map((function(t,a){return yH(wY(r[1][a],e),wY(t,n))}))}}));c=o.output,p=o.newStates}l&&d.push(c)},m=0;m<h;++m)I(m);if(l){C=bT(d,1)}return[c,C,p]}))}ZQ.className="DepthwiseConv2D",gH(ZQ);var BQ=function(e){su(n,e);var t=hu(n);function n(e){var r,a;if(iu(this,n),r=t.call(this,e),null==e.cell)throw new HL("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new EQ({cells:e.cell}):e.cell).stateSize)throw new HL("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new DO({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return uu(n,[{key:"getStates",value:function(){return null==this.states_?D_(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){BO(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,o=[],i=ta(t);try{for(i.s();!(a=i.n()).done;){var l=a.value;o.push([e[0],l])}}catch(Kle){i.e(Kle)}finally{i.f()}return[n].concat(o)}return n}},{key:"computeMask",value:function(e,t){var n=this;return hH((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new YL("Constants support is not implemented in RNN yet.");BO(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new DO({shape:[t,null].concat((0,Ae.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!pV(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new HL("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new DO({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];hH((function(){if(!t.stateful)throw new XL("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new HL("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return UY([r,e])})):t.states_=[UY([r,t.cell.stateSize])];else if(null==e)fH(t.states_),null!=t.keptStates&&(fH(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return UY([r,e])})):t.states_[0]=UY([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new HL("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):fH(t.states_);for(var a=0;a<t.states_.length;++a){var o=e[a],i=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,l=[r,i];if(!pV(o.shape,l))throw new HL("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(l,", received shape=").concat(o.shape));t.states_[a]=o}}t.states_=t.states_.map((function(e){return CH(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=SQ(e,r,a,this.numConstants);e=o.inputs,r=o.initialState,a=o.constants;var i=[],l=[];if(null!=r){t.initialState=r,i=i.concat(r),this.stateSpec=[];var u,s=ta(r);try{for(s.s();!(u=s.n()).done;){var c=u.value;this.stateSpec.push(new DO({shape:c.shape}))}}catch(Kle){s.e(Kle)}finally{s.f()}l=l.concat(this.stateSpec)}if(null!=a&&(t.constants=a,i=i.concat(a),this.numConstants=a.length),i[0]instanceof XO){var g=[e].concat(i),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;var h=rU(cu(n.prototype),"apply",this).call(this,g,t);return this.inputSpec=p,h}return rU(cu(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return hH((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,o=null==t?null:t.initialState;e=GO(e),null==o&&(o=n.stateful?n.states_:n.getInitialState(e));var i=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(o.length!==i)throw new HL("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(o.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var l={training:a},u=wQ((function(e,t){var r=n.cell.call([e].concat(t),l);return[r[0],r.slice(1)]}),e,o,n.goBackwards,r,null,n.unroll,n.returnSequences),s=u[0],c=u[1],g=u[2];n.stateful&&n.resetStates(g,a);var d=n.returnSequences?c:s;return n.returnState?[d].concat(g):d}))}},{key:"getInitialState",value:function(e){var t=this;return hH((function(){var n=UY(e.shape);return n=J_(n=xY(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?z_(n,[1,e]):n})):t.cell.stateSize>1?[z_(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){rU(cu(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=aU(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(TO);BQ.className="RNN",gH(BQ);var xQ=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n)}(TO),GQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,a_(r.units,"units"),r.activation=zj(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=yO(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=yO(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=yO(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=qj(e.kernelRegularizer),r.recurrentRegularizer=qj(e.recurrentRegularizer),r.biasRegularizer=qj(e.biasRegularizer),r.kernelConstraint=C_(e.kernelConstraint),r.recurrentConstraint=C_(e.recurrentConstraint),r.biasConstraint=C_(e.biasConstraint),r.dropout=N_([1,E_([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=N_([1,E_([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return uu(n,[{key:"build",value:function(e){e=RO(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){if(2!==(e=e).length)throw new HL("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,o=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=DQ({ones:function(){return QY(e)},rate:n.dropout,training:o,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=DQ({ones:function(){return QY(r)},rate:n.recurrentDropout,training:o,dropoutFunc:n.dropoutFunc}));var i=n.dropoutMask,l=n.recurrentDropoutMask;a=__(null!=i?wY(e,i):e,n.kernel.read()),null!=n.bias&&(a=Q_(a,n.bias.read())),null!=l&&(r=wY(r,l));var u=yH(a,__(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Kj(this.activation),useBias:this.useBias,kernelInitializer:AO(this.kernelInitializer),recurrentInitializer:AO(this.recurrentInitializer),biasInitializer:AO(this.biasInitializer),kernelRegularizer:jj(this.kernelRegularizer),recurrentRegularizer:jj(this.recurrentRegularizer),biasRegularizer:jj(this.biasRegularizer),activityRegularizer:jj(this.activityRegularizer),kernelConstraint:h_(this.kernelConstraint),recurrentConstraint:h_(this.recurrentConstraint),biasConstraint:h_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(xQ);GQ.className="SimpleRNNCell",gH(GQ);var RQ=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),e.cell=new GQ(e),t.call(this,e)}return uu(n,[{key:"call",value:function(e,t){var r=this;return hH((function(){null!=r.cell.dropoutMask&&(fH(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(fH(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return rU(cu(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(BQ);RQ.className="SimpleRNN",gH(RQ);var WQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new HL("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,a_(r.units,"units"),r.activation=zj(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=zj(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=yO(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=yO(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=yO(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=qj(e.kernelRegularizer),r.recurrentRegularizer=qj(e.recurrentRegularizer),r.biasRegularizer=qj(e.biasRegularizer),r.kernelConstraint=C_(e.kernelConstraint),r.recurrentConstraint=C_(e.recurrentConstraint),r.biasConstraint=C_(e.biasConstraint),r.dropout=N_([1,E_([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=N_([1,E_([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return uu(n,[{key:"build",value:function(e){var t=(e=RO(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){if(2!==(e=e).length)throw new HL("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=DQ({ones:function(){return QY(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=DQ({ones:function(){return QY(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var o,l,u,s=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=wY(e,s[0]));var g=__(e,n.kernel.read());n.useBias&&(g=Q_(g,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=wY(a,c[0]));var d=n.recurrentKernel.read(),p=IT(d,[2*n.units,n.units],d.rank-1),h=(0,i.Z)(p,2),f=h[0],C=h[1],I=__(a,f),m=IT(g,3,g.rank-1),v=(0,i.Z)(m,3),b=v[0],A=v[1],y=v[2],k=IT(I,2,I.rank-1),Z=(0,i.Z)(k,2),S=Z[0],w=Z[1];o=n.recurrentActivation.apply(yH(b,S)),l=n.recurrentActivation.apply(yH(A,w));var B=__(wY(l,a),C);u=n.activation.apply(yH(y,B));var x=yH(wY(o,a),wY(yH(1,LY(o)),u));return[x,x]}))}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Kj(this.activation),recurrentActivation:Kj(this.recurrentActivation),useBias:this.useBias,kernelInitializer:AO(this.kernelInitializer),recurrentInitializer:AO(this.recurrentInitializer),biasInitializer:AO(this.biasInitializer),kernelRegularizer:jj(this.kernelRegularizer),recurrentRegularizer:jj(this.recurrentRegularizer),biasRegularizer:jj(this.biasRegularizer),activityRegularizer:jj(this.activityRegularizer),kernelConstraint:h_(this.kernelConstraint),recurrentConstraint:h_(this.recurrentConstraint),biasConstraint:h_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(xQ);WQ.className="GRUCell",gH(WQ);var VQ=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new WQ(e),t.call(this,e)}return uu(n,[{key:"call",value:function(e,t){var r=this;return hH((function(){null!=r.cell.dropoutMask&&(fH(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(fH(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return rU(cu(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(BQ);VQ.className="GRU",gH(VQ);var FQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,a_(r.units,"units"),r.activation=zj(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=zj(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=yO(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=yO(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=yO(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=qj(e.kernelRegularizer),r.recurrentRegularizer=qj(e.recurrentRegularizer),r.biasRegularizer=qj(e.biasRegularizer),r.kernelConstraint=C_(e.kernelConstraint),r.recurrentConstraint=C_(e.recurrentConstraint),r.biasConstraint=C_(e.biasConstraint),r.dropout=N_([1,E_([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=N_([1,E_([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return uu(n,[{key:"build",value:function(e){var t,n,r=(e=RO(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,o=this.units;n=new(t=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e,t){var n=a.apply([o]),r=(new oO).apply([o]),i=a.apply([2*o]);return P_(P_(n,r),i)}}]),n}(rO),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new HL("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],o=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=DQ({ones:function(){return QY(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=DQ({ones:function(){return QY(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var l,u,s,c,g=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=wY(e,g[0]));var p=__(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=wY(a,d[0])),p=yH(p,__(a,n.recurrentKernel.read())),n.useBias&&(p=Q_(p,n.bias.read()));var h=IT(p,4,p.rank-1),f=(0,i.Z)(h,4),C=f[0],I=f[1],m=f[2],v=f[3];l=n.recurrentActivation.apply(C),u=n.recurrentActivation.apply(I),s=yH(wY(u,o),wY(l,n.activation.apply(m))),c=n.recurrentActivation.apply(v);var b=wY(c,n.activation.apply(s));return[b,b,s]}))}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Kj(this.activation),recurrentActivation:Kj(this.recurrentActivation),useBias:this.useBias,kernelInitializer:AO(this.kernelInitializer),recurrentInitializer:AO(this.recurrentInitializer),biasInitializer:AO(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jj(this.kernelRegularizer),recurrentRegularizer:jj(this.recurrentRegularizer),biasRegularizer:jj(this.biasRegularizer),activityRegularizer:jj(this.activityRegularizer),kernelConstraint:h_(this.kernelConstraint),recurrentConstraint:h_(this.recurrentConstraint),biasConstraint:h_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(xQ);FQ.className="LSTMCell",gH(FQ);var NQ=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new FQ(e),t.call(this,e)}return uu(n,[{key:"call",value:function(e,t){var r=this;return hH((function(){null!=r.cell.dropoutMask&&(fH(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(fH(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return rU(cu(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(BQ);NQ.className="LSTM",gH(NQ);var EQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).cells=e.cells,r}return uu(n,[{key:"stateSize",get:function(){var e,t=[],n=ta(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,Ae.Z)(r.stateSize)):t.push(r.stateSize)}}catch(Kle){n.e(Kle)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return hH((function(){var r,a=(e=e).slice(1),o=[],i=ta(n.cells.slice().reverse());try{for(i.s();!(r=i.n()).done;){var l=r.value;Array.isArray(l.stateSize)?o.push(a.splice(0,l.stateSize.length)):o.push(a.splice(0,1))}}catch(Kle){i.e(Kle)}finally{i.f()}o.reverse();for(var u,s=[],c=0;c<n.cells.length;++c){var g=n.cells[c];a=o[c],u=0===c?[e[0]].concat(a):[u[0]].concat(a),u=g.call(u,t),s.push(u.slice(1))}a=[];var d,p=ta(s.slice().reverse());try{for(p.s();!(d=p.n()).done;){var h,f=d.value;(h=a).push.apply(h,(0,Ae.Z)(f))}}catch(Kle){p.e(Kle)}finally{p.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;BO(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){B_("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=ta(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,Ae.Z)(r.trainableWeights))}}catch(Kle){n.e(Kle)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=ta(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,Ae.Z)(r.nonTrainableWeights))}}catch(Kle){n.e(Kle)}finally{n.f()}if(!this.trainable){var a,o=[],i=ta(this.cells);try{for(i.s();!(a=i.n()).done;){var l=a.value;o.push.apply(o,(0,Ae.Z)(l.trainableWeights))}}catch(Kle){i.e(Kle)}finally{i.f()}return o.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=ta(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,Ae.Z)(r.weights))}}catch(Kle){n.e(Kle)}finally{n.f()}return NO(t)}},{key:"setWeights",value:function(e){var t,n=[],r=ta(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,o=a.weights.length,i=e.splice(o),l=0;l<a.weights.length;++l)n.push([a.weights[l],i[l]])}catch(Kle){r.e(Kle)}finally{r.f()}EO(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=ta(t.cells);try{for(o.s();!(n=o.n()).done;){var i=n.value;a.push(aU(i,r))}}catch(Kle){o.e(Kle)}finally{o.f()}return new e({cells:a})}}]),n}(xQ);function DQ(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,o=e.count,i=void 0===o?1:o,l=e.dropoutFunc,u=function(){return null!=l?l(t(),n):$_(t(),n)},s=function(){return eO(u,t,a)};return!i||i<=1?CH(s().clone()):Array(i).fill(void 0).map(s).map((function(e){return CH(e.clone())}))}EQ.className="StackedRNNCells",gH(EQ);var XQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},JQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),e.unroll)throw new YL("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new YL("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new DO({ndim:5})],r}return uu(n,[{key:"call",value:function(e,t){var r=this;return hH((function(){if(null!=r.cell.dropoutMask&&(fH(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(fH(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new HL("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return rU(cu(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,Ae.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,Ae.Z)(Array(2).fill([e[0]].concat((0,Ae.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return hH((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),o=UY([a[0]].concat((0,Ae.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(o):[o]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];hH((function(){if(!t.stateful)throw new XL("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),o=[a[0]].concat((0,Ae.Z)(a.slice(2)));if(null==r[0])throw new HL("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return UY(o)})):t.states_=[UY(o)];else if(null==e)fH(t.states_),null!=t.keptStates&&(fH(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return UY(o)})):t.states_[0]=UY(o);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new HL("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):fH(t.states_);for(var i=0;i<t.states_.length;++i){var l=e[i],u=o;if(!pV(l.shape,u))throw new HL("State ".concat(i," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(l.shape));t.states_[i]=l}}t.states_=t.states_.map((function(e){return CH(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,o=t.padding,i=t.strides,l=t.dilationRate,u="channelsFirst"===n,s=e[u?3:2],c=e[u?4:3],g=iQ(s,a[0],o,i[0],l[0]),d=iQ(c,a[1],o,i[1],l[1]);return[].concat((0,Ae.Z)(e.slice(0,2)),(0,Ae.Z)(u?[r,g,d]:[g,d,r]))}}]),n}(BQ);JQ.className="ConvRNN2D";var HQ=function(e){su(n,e);var t=hu(n);function n(e){var r;iu(this,n);var a=e.filters,o=e.kernelSize,i=e.strides,l=e.padding,u=e.dataFormat,s=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,a_(r.filters,"filters"),r.kernelSize=oQ(o,2,"kernelSize"),r.kernelSize.forEach((function(e){return a_(e,"kernelSize")})),r.strides=oQ(i||1,2,"strides"),r.strides.forEach((function(e){return a_(e,"strides")})),r.padding=l||"valid",Z_(r.padding),r.dataFormat=u||"channelsLast",k_(r.dataFormat),r.dilationRate=oQ(s||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return a_(e,"dilationRate")})),r}return uu(n,[{key:"build",value:function(e){var t;e=RO(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new HL("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var i;if(this.unitForgetBias){var l=this.biasInitializer,u=this.filters;i=new(t=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"apply",value:function(e,t){return K_([l.apply([u]),jY([u]),l.apply([2*u])])}}]),n}(rO),t.className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,i,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){if(3!==e.length)throw new HL("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],o=e[1],l=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=DQ({ones:function(){return QY(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var u=n.dropoutMask,s=function(e,t,n){return t&&t[n]?wY(t[n],e):e},c=s(a,u,0),g=s(a,u,1),d=s(a,u,2),p=s(a,u,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=DQ({ones:function(){return QY(o)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var h=n.recurrentDropoutMask,f=s(o,h,0),C=s(o,h,1),I=s(o,h,2),m=s(o,h,3),v=IT(n.kernel.read(),4,3),b=(0,i.Z)(v,4),A=b[0],y=b[1],k=b[2],Z=b[3],S=n.useBias?IT(n.bias.read(),4):[null,null,null,null],w=(0,i.Z)(S,4),B=w[0],x=w[1],G=w[2],R=w[3];c=n.inputConv(c,A,B,n.padding),g=n.inputConv(g,y,x,n.padding),d=n.inputConv(d,k,G,n.padding),p=n.inputConv(p,Z,R,n.padding);var W=IT(n.recurrentKernel.read(),4,3),V=(0,i.Z)(W,4),F=V[0],N=V[1],E=V[2],D=V[3];f=n.recurrentConv(f,F),C=n.recurrentConv(C,N),I=n.recurrentConv(I,E),m=n.recurrentConv(m,D);var X=n.recurrentActivation.apply(yH(c,f)),J=n.recurrentActivation.apply(yH(g,C)),H=yH(wY(J,l),wY(X,n.activation.apply(yH(d,I)))),Y=wY(n.recurrentActivation.apply(yH(p,m)),n.activation.apply(H));return[Y,Y,H]}))}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t=(e.units,XQ(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=tY(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Q_(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return tY(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(FQ);HQ.className="ConvLSTM2DCell",gH(HQ);var YQ=function(e){su(n,e);var t=hu(n);function n(e){iu(this,n);var r=new HQ(e);return t.call(this,Object.assign({},e,{cell:r}))}return uu(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(JQ);YQ.className="ConvLSTM2D",gH(YQ);var TQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return uu(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r=GO(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,o=n.getNoiseShape(r);return eO((function(){return $_(r,n.rate,o,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return rU(cu(n.prototype),"dispose",this).call(this)}}]),n}(TO);TQ.className="Dropout",gH(TQ);var MQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return uu(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(TQ);MQ.className="SpatialDropout1D",gH(MQ);var KQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,a_(r.units,"units"),r.activation=zj(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=yO(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=yO(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=C_(e.kernelConstraint),r.biasConstraint=C_(e.biasConstraint),r.kernelRegularizer=qj(e.kernelRegularizer),r.biasRegularizer=qj(e.biasRegularizer),r.activityRegularizer=qj(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return uu(n,[{key:"build",value:function(e){var t=(e=RO(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,le.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=RO(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r,a=GO(e),o=i_(n.activation.getClassName());return null!=o?r=__(a,n.kernel.read(),o,n.bias?n.bias.read():null):(r=__(a,n.kernel.read()),null!=n.bias&&(r=Q_(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:Kj(this.activation),useBias:this.useBias,kernelInitializer:AO(this.kernelInitializer),biasInitializer:AO(this.biasInitializer),kernelRegularizer:jj(this.kernelRegularizer),biasRegularizer:jj(this.biasRegularizer),activityRegularizer:jj(this.activityRegularizer),kernelConstraint:h_(this.kernelConstraint),biasConstraint:h_(this.biasConstraint)},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);KQ.className="Dense",gH(KQ);var PQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return uu(n,[{key:"computeOutputShape",value:function(e){var t,n=ta((e=RO(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new HL('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(Kle){n.e(Kle)}finally{n.f()}return[e[0],F_(e,1)]}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r=GO(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],o=2;o<r.rank;++o)a.push(o);a.push(1),r=GT(r,a)}return function(e){if(e.rank<=1)throw new HL("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],F_(e.shape,1)];return MH(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);PQ.className="Flatten",gH(PQ);var zQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=zj(e.activation),r}return uu(n,[{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r=GO(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:Kj(this.activation)},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);zQ.className="Activation",gH(zQ);var LQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return uu(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return hH((function(){return function(e,t){return hH((function(){if(2!==e.shape.length)throw new HL("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return z_(J_(e,1),[1,t,1])}))}(e=GO(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);LQ.className="RepeatVector",gH(LQ);var _Q=function(e){su(n,e);var t=hu(n);function n(e){var r;iu(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return uu(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,o=null,i=0;i<r.length;++i){var l=r[i];if(this.isUnknown(l)){if(null!==o)throw new HL("Can only specifiy one unknown dimension.");o=i}else a*=l}var u=F_(e);if(null!==o){if(0===a||u%a!==0)throw new HL(n);r[o]=u/a}else if(u!==a)throw new HL(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r=GO(e),a=r.shape,o=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return MH(r,o)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);_Q.className="Reshape",gH(_Q);var OQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=D_(1,e.dims.length+1);if(!pV(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new DO({ndim:r.dims.length+1})],r}return uu(n,[{key:"computeOutputShape",value:function(e){var t=(e=RO(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return GT(GO(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);OQ.className="Permute",gH(OQ);var UQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return uu(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=GO(e);return ZH(_Y(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r=GO(e),a=ZH(_Y(r,n.maskValue),-1,!0);return wY(r,RJ(a,r.dtype))}))}}]),n}(TO);UQ.className="Masking",gH(UQ);var jQ=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(LL(e.inputLength))}return r.inputDim=e.inputDim,a_(r.inputDim,"inputDim"),r.outputDim=e.outputDim,a_(r.outputDim,"outputDim"),r.embeddingsInitializer=yO(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=qj(e.embeddingsRegularizer),r.activityRegularizer=qj(e.activityRegularizer),r.embeddingsConstraint=C_(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return uu(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return hH((function(){return n.maskZero?(e=GO(e),_Y(e,xT(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=RO(e),null==this.inputLength)return[].concat((0,Ae.Z)(e),[this.outputDim]);var t=LL(this.inputLength);if(t.length!==e.length-1)throw new HL('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],o=e[r+1];if(null!=a&&null!=o&&a!==o)throw new HL('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=o),n++}return[e[0]].concat((0,Ae.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r=GO(e);"int32"!==r.dtype&&(r=X_(r,"int32"));var a=O_(n.embeddings.read(),MH(r,[r.size]));return MH(a,RO(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:AO(this.embeddingsInitializer),embeddingsRegularizer:jj(this.embeddingsRegularizer),activityRegularizer:jj(this.activityRegularizer),embeddingsConstraint:h_(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);jQ.className="Embedding",gH(jQ);var QQ=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return uu(n,[{key:"mergeFunction",value:function(e){throw new YL}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],o=t[r];if(null==a||null==o||a<0||o<0)n.push(null);else if(1===a)n.push(o);else if(1===o)n.push(a);else{if(a!==o)throw new HL("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[RO(e)]),(e=e).length<2)throw new HL("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=ta(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(Kle){r.e(Kle)}finally{r.f()}if((n=e_(n)).length>1)throw new HL("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var o=null==e[0]?null:e[0].slice(1),i=1;i<e.length;++i){var l=null==e[i]?null:e[i].slice(1);o=this.computeElementwiseOpOutputShape(o,l)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===e_(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,o=E_(r),i=ta(e);try{for(i.s();!(a=i.n()).done;){for(var l=a.value,u=l.rank,s=0;s<o-u;++s)l=J_(l,1);t.push(l)}}catch(Kle){i.e(Kle)}finally{i.f()}return n.mergeFunction(t)}var c,g=!1,d=ta(e);try{for(d.s();!(c=d.n()).done;){var p=c.value,h=p.rank;if(null==h){var f=p.shape,C=f[0],I=f.slice(1).concat([C]),m=MH(p,[C].concat(F_(f.slice(1))));m=GT(m,[1,0]),m=MH(m,I),t.push(m),g=!0}else if(h>1){var v=D_(1,h).concat([0]);t.push(GT(p,v)),g=!0}else t.push(p)}}catch(Kle){d.e(Kle)}finally{d.f()}var b=n.mergeFunction(t),A=b.rank;if(g)if(null==A){var y=b.shape,k=y[y.length-1],Z=[k].concat(y.slice(0,y.length-1));b=MH(GT(MH(b,[-1,k]),[1,0]),Z)}else if(A>1){var S=[A-1].concat(D_(0,A-1));b=GT(b,S)}return b}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,o=[],i=ta(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;null!=l&&null!==l[0]&&o.push(l[0])}}catch(Kle){i.e(Kle)}finally{i.f()}return t=1===(o=e_(o)).length?o.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return hH((function(){if(null==t)return null;if(!Array.isArray(t))throw new HL("`mask` should be an Array");if(!Array.isArray(e))throw new HL("`inputs` should be an Array");if(t.length!==e.length)throw new HL("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:hY(e,0)})))[0],r=1;r<t.length-1;++r)n=RY(n,t[r]);return n}))}}]),n}(TO),qQ=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"mergeFunction",value:function(e){return hH((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=yH(t,e[n]);return t}))}}]),n}(QQ);qQ.className="Add",gH(qQ);var $Q=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"mergeFunction",value:function(e){return hH((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=wY(t,e[n]);return t}))}}]),n}(QQ);$Q.className="Multiply",gH($Q);var eq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"mergeFunction",value:function(e){return hH((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=yH(t,e[n]);return wY(1/e.length,t)}))}}]),n}(QQ);eq.className="Average",gH(eq);var tq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"mergeFunction",value:function(e){return hH((function(){for(var t=e[0],n=1;n<e.length;++n)t=NY(t,e[n]);return t}))}}]),n}(QQ);tq.className="Maximum",gH(tq);var nq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"mergeFunction",value:function(e){return hH((function(){for(var t=e[0],n=1;n<e.length;++n)t=DY(t,e[n]);return t}))}}]),n}(QQ);nq.className="Minimum",gH(nq);var rq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return uu(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new HL("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=ta(e=e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(Kle){r.e(Kle)}finally{r.f()}if(!n){for(var a=[],o=0;o<e.length;++o){var i=e[o].slice();i.splice(this.axis,1);var l,u=!1,s=ta(a);try{for(s.s();!(l=s.n()).done;){if(pV(l.value,i)){u=!0;break}}}catch(Kle){s.e(Kle)}finally{s.f()}u||a.push(i)}if(a.length>1)throw new HL("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return hH((function(){return K_(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new HL("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,o=ta(n.slice(1));try{for(o.s();!(t=o.n()).done;){var i=t.value;if(null==r[a]||null==i[a]){r[a]=null;break}r[a]+=i[a]}}catch(Kle){o.e(Kle)}finally{o.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new HL("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new HL("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new HL("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return hH((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],o=0;o<e.length;++o)null==t[o]?a.push(RJ(QY(e[o]),"bool")):t[o].rank<e[o].rank?a.push(hY(t[o],-1)):a.push(t[o]);var i=jH(a,n.axis);return kH(i,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(QQ);function aq(e,t){for(;e<0;)e+=t;return e}rq.className="Concatenate",gH(rq);var oq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return uu(n,[{key:"build",value:function(e){uV(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new YL("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new HL("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new HL("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return aq(t,e[n].shape.length)})):[aq(this.axes,n.shape.length),aq(this.axes,r.shape.length)],this.normalize&&(n=oU(n,t[0]),r=oU(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new YL("batchDot is not implemented for tensors of 4D or higher rank yet");if(uV(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),uV(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new YL("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var o=n;return hH((function(){var n,i;if(r>a){n=r-a;for(var l=[],u=0;u<n;++u)l.push(1);t=MH(t,t.shape.concat(l))}else if(a>r){n=a-r;for(var s=[],c=0;c<n;++c)s.push(1);e=MH(e,e.shape.concat(s))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=o[0]===o[1]?xY(wY(e,t),o[0]):xY(wY(GT(e,[1,0]),t),o[1]);else{var g=o[0]!==e.shape.length-1,d=o[1]===t.shape.length-1;i=WY(e,t,g,d)}if(n>0){for(var p,h=[],f=p=r>a?r+a-3:r-1;f<p+n;++f)h.push(f);i=vT(i,h)}return 1===i.shape.length&&(i=hY(i,1)),i}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[aq(this.axes,e.length),aq(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){uV(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new YL("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(QQ);oq.className="Dot",gH(oq);var iq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return uu(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r=GO(e);return eO((function(){return yH(L_(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(TO);iq.className="GaussianNoise",gH(iq);var lq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return uu(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t);var r=GO(e);if(n.rate>0&&n.rate<1){return eO((function(){var e=Math.sqrt(n.rate/(1-n.rate));return wY(r,L_(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(TO);lq.className="GaussianDropout",gH(lq);var uq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return uu(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||GO(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=rU(cu(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return hH((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return eO((function(){var t=GO(e),a=-1.7580993408473766,o=AY(aT(r),n.rate);o=X_(o,"float32");var i=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),l=-i*a*n.rate,u=yH(wY(t,o),wY(yH(o,-1),a));return yH(wY(u,i),l)}),(function(){return GO(e)}),t.training||!1)}return e}))}}]),n}(TO);function sq(e,t,n,r,a){var o,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=LH(e,t,n,r,a,i);else if(3===e.rank)o=_H(e,t,n,r,a,i);else{if(4!==e.rank)throw new YL("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=OH(e,t,n,r,a,i)}return o}function cq(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return hH((function(){var o=zY(e,r),i=o.mean,l=o.variance;return[sq(e,i,l,n,t,a),i,l]}))}function gq(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return hH((function(){var o,i=zY(e,r),l=i.mean,u=i.variance,s=[],c=ta(D_(0,e.rank));try{for(c.s();!(o=c.n()).done;){var g=o.value;-1!==r.indexOf(g)?s.push(1):s.push(e.shape[g])}}catch(Kle){c.e(Kle)}finally{c.f()}var d=MH(l,s),p=MH(u,s),h=null==t?null:MH(t,s),f=null==n?null:MH(n,s);return[sq(e,d,p,f,h,a),l,u]}))}uq.className="AlphaDropout",gH(uq);var dq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=yO(e.betaInitializer||"zeros"),r.gammaInitializer=yO(e.gammaInitializer||"ones"),r.movingMeanInitializer=yO(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=yO(e.movingVarianceInitializer||"ones"),r.betaConstraint=C_(e.betaConstraint),r.gammaConstraint=C_(e.gammaConstraint),r.betaRegularizer=qj(e.betaRegularizer),r.gammaRegularizer=qj(e.gammaRegularizer),r}return uu(n,[{key:"build",value:function(e){e=RO(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new HL("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new DO({ndim:e.length,axes:(0,le.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return hH((function(){var r=null!=t.training&&t.training,a=GO(e),o=a.shape,l=o.length,u=D_(0,l),s=n.axis>=0?n.axis:n.axis+l;u.splice(s,1);var c=ML(1,l);c[s]=o[s];var g=u.slice();g.sort();var d=!pV(g,D_(0,l).slice(0,l-1));if(!r)return function(){if(d){var e=MH(n.movingMean.read(),c),t=MH(n.movingVariance.read(),c),r=n.center?MH(n.beta.read(),c):null,o=n.scale?MH(n.gamma.read(),c):null;return sq(a,e,t,r,o,n.epsilon)}return sq(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return pV(r.slice().sort(),D_(0,e.rank-1))?cq(e,t,n,r,a):gq(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),u,n.epsilon),h=(0,i.Z)(p,3),f=h[0],C=h[1],I=h[2],m=function(e,t,n){hH((function(){var r=1-n,a=e.read(),o=wY(BY(a,t),r);e.write(BY(a,o))}))};return m(n.movingMean,C,n.momentum),m(n.movingVariance,I,n.momentum),f}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:AO(this.betaInitializer),gammaInitializer:AO(this.gammaInitializer),movingMeanInitializer:AO(this.movingMeanInitializer),movingVarianceInitializer:AO(this.movingVarianceInitializer),betaRegularizer:jj(this.betaRegularizer),gammaRegularizer:jj(this.gammaRegularizer),betaConstraint:h_(this.betaConstraint),gammaConstraint:h_(this.gammaConstraint)},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);dq.className="BatchNormalization",gH(dq);var pq=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,o=ta(r.axis);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(Kle){o.e(Kle)}finally{o.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=yO(e.betaInitializer||"zeros"),r.gammaInitializer=yO(e.gammaInitializer||"ones"),r.betaRegularizer=qj(e.betaRegularizer),r.gammaRegularizer=qj(e.gammaRegularizer),r.supportsMasking=!0,r}return uu(n,[{key:"build",value:function(e){var t=(e=RO(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=ta(this.axis);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o<0||o>=t)throw new Error("Invalid axis: ".concat(o))}}catch(Kle){a.e(Kle)}finally{a.f()}if(this.axis.length!==e_(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var i=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=GO(e),a=r.shape,o=a.length;return hH((function(){var e,t=zY(r,n.axis,!0),i=t.mean,l=t.variance,u=ML(1,o),s=ta(n.axis);try{for(s.s();!(e=s.n()).done;){var c=e.value;u[c]=a[c]}}catch(Kle){s.e(Kle)}finally{s.f()}for(var g=function(e){return null!=e&&e.shape.length!==o?MH(e,u):e},d=g(n.gamma.read()),p=g(n.beta.read()),h=[],f=[],C=0;C<o;++C)-1!==n.axis.indexOf(C)?(h.push(a[C]),f.push(1)):(h.push(1),f.push(a[C]));return i=fY(i,h),l=fY(l,h),d=fY(d,f),p=fY(p,f),sq(r,i,l,p,d,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:AO(this.betaInitializer),gammaInitializer:AO(this.gammaInitializer),betaRegularizer:jj(this.betaRegularizer),gammaRegularizer:jj(this.gammaRegularizer)},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);pq.className="LayerNormalization",gH(pq);var hq=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new HL("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,o;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new HL("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new HL("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));o=e.padding[1]}r.padding=[a,o]}return r.inputSpec=[new DO({ndim:4})],r}return uu(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=RO(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return hH((function(){return function(e,t,n){return hH((function(){if(4!==e.rank)throw new HL("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new HL("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new HL("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],qY(e,r)}))}(GO(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO);function fq(e,t,n,r,a,o){return hH((function(){var i;k_(a),S_(o),Z_(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=uQ(e,a);var l="same"===r?"same":"valid";return i="max"===o?VY(e,t,n,l):KH(e,t,n,l),"channelsFirst"===a&&(i=GT(i,[0,3,1,2])),i}))}function Cq(e,t,n,r,a,o){return hH((function(){var i;k_(a),S_(o),Z_(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=sQ(e,a);var l="same"===r?"same":"valid";return i="max"===o?FY(e,t,n,l):PH(e,t,n,l),"channelsFirst"===a&&(i=GT(i,[0,4,1,2,3])),i}))}hq.className="ZeroPadding2D",gH(hq);var Iq=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new HL("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(a_(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new HL("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return a_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,Z_(r.padding),r.inputSpec=[new DO({ndim:3})],r}return uu(n,[{key:"computeOutputShape",value:function(e){var t=iQ((e=RO(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return hH((function(){n.invokeCallHook(e,t),e=J_(GO(e),2);var r=n.poolingFunction(GO(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return vT(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO),mq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return k_(a),Z_(r),fq(e,t,n,r,a,"max")}}]),n}(Iq);mq.className="MaxPooling1D",gH(mq);var vq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return k_(a),Z_(r),fq(e,t,n,r,a,"avg")}}]),n}(Iq);vq.className="AveragePooling1D",gH(vq);var bq=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new HL("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return a_(r.poolSize,"poolSize"),a_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,k_(r.dataFormat),Z_(r.padding),r.inputSpec=[new DO({ndim:4})],r}return uu(n,[{key:"computeOutputShape",value:function(e){e=RO(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=iQ(t,this.poolSize[0],this.padding,this.strides[0]),n=iQ(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return hH((function(){return n.invokeCallHook(e,t),n.poolingFunction(GO(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO),Aq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return k_(a),Z_(r),fq(e,t,n,r,a,"max")}}]),n}(bq);Aq.className="MaxPooling2D",gH(Aq);var yq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return k_(a),Z_(r),fq(e,t,n,r,a,"avg")}}]),n}(bq);yq.className="AveragePooling2D",gH(yq);var kq=function(e){su(n,e);var t=hu(n);function n(e){var r;if(iu(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new HL("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return a_(r.poolSize,"poolSize"),a_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,k_(r.dataFormat),Z_(r.padding),r.inputSpec=[new DO({ndim:5})],r}return uu(n,[{key:"computeOutputShape",value:function(e){e=RO(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=iQ(t,this.poolSize[0],this.padding,this.strides[0]),n=iQ(n,this.poolSize[1],this.padding,this.strides[1]),r=iQ(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return hH((function(){return n.invokeCallHook(e,t),n.poolingFunction(GO(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO),Zq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return k_(a),Z_(r),Cq(e,t,n,r,a,"max")}}]),n}(kq);Zq.className="MaxPooling3D",gH(Zq);var Sq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e)}return uu(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return k_(a),Z_(r),Cq(e,t,n,r,a,"avg")}}]),n}(kq);Sq.className="AveragePooling3D",gH(Sq);var wq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).inputSpec=[new DO({ndim:3})],r}return uu(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new YL}}]),n}(TO),Bq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e||{})}return uu(n,[{key:"call",value:function(e,t){return hH((function(){var t=GO(e);return EY(t,1)}))}}]),n}(wq);Bq.className="GlobalAveragePooling1D",gH(Bq);var xq=function(e){su(n,e);var t=hu(n);function n(e){return iu(this,n),t.call(this,e||{})}return uu(n,[{key:"call",value:function(e,t){return hH((function(){var t=GO(e);return SY(t,1)}))}}]),n}(wq);xq.className="GlobalMaxPooling1D",gH(xq);var Gq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,k_(r.dataFormat),r.inputSpec=[new DO({ndim:4})],r}return uu(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new YL}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(TO),Rq=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"call",value:function(e,t){var n=this;return hH((function(){var t=GO(e);return"channelsLast"===n.dataFormat?EY(t,[1,2]):EY(t,[2,3])}))}}]),n}(Gq);Rq.className="GlobalAveragePooling2D",gH(Rq);var Wq=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.apply(this,arguments)}return uu(n,[{key:"call",value:function(e,t){var n=this;return hH((function(){var t=GO(e);return"channelsLast"===n.dataFormat?SY(t,[1,2]):SY(t,[2,3])}))}}]),n}(Gq);Wq.className="GlobalMaxPooling2D",gH(Wq);var Vq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).layer=e.layer,r}return uu(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){rU(cu(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=aU(r,n);delete t.layer;var o={layer:a};return Object.assign(o,t),new e(o)}}]),n}(TO),Fq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return uu(n,[{key:"build",value:function(e){if((e=RO(e)).length<3)throw new HL("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),rU(cu(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=RO(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return hH((function(){return wQ((function(e,r){return[GO(n.layer.call(e,t)),[]]}),e=GO(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(Vq);Fq.className="TimeDistributed",gH(Fq);var Nq=function(e){su(n,e);var t=hu(n);function n(e){var r;iu(this,n),r=t.call(this,e);var a=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=a,r.forwardLayer=aU(o),a.goBackwards=!0!==a.goBackwards;var i={};if(i.className=e.layer.getClassName(),i.config=a,r.backwardLayer=aU(i),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){n_(A_,"BidirectionalMergeMode",e)}(r.mergeMode),e.weights)throw new YL("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return uu(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):zL(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=SQ(e,r,a,this.numConstants);if(e=o.inputs,r=o.initialState,a=o.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return rU(cu(n.prototype),"apply",this).call(this,e,t);var i=[],l=[];if(null!=r){var u=r.length;if(u%2>0)throw new HL("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,i.push.apply(i,(0,Ae.Z)(r));var s=r.map((function(e){return new DO({shape:e.shape})}));this.forwardLayer.stateSpec=s.slice(0,u/2),this.backwardLayer.stateSpec=s.slice(u/2),l.push.apply(l,(0,Ae.Z)(s))}if(null!=a)throw new YL("Support for constants in Bidirectional layers is not implemented yet.");for(var c=i[0]instanceof XO,g=0,d=i;g<d.length;g++){if(d[g]instanceof XO!==c)throw new HL("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(c){var p=[e].concat(i),h=this.inputSpec.concat(l),f=this.inputSpec;this.inputSpec=h;var C=rU(cu(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=f,C}return rU(cu(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return hH((function(){var r,a,o,i,l=t.initialState;if(null==l)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=l.slice(0,l.length/2),s=l.slice(l.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:s}))}return n.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=iT(a,1)),"concat"===n.mergeMode?i=K_([r,a]):"sum"===n.mergeMode?i=yH(r,a):"ave"===n.mergeMode?i=wY(.5,yH(r,a)):"mul"===n.mergeMode?i=wY(r,a):null==n.mergeMode&&(i=[r,a]),n.returnState?null==n.mergeMode?i.concat(o):[i].concat(o):i}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;B_(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),B_(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){rU(cu(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=rU(cu(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=aU(t.layer);if(delete t.layer,null!=t.numConstants)throw new YL("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(Vq);Nq.className="Bidirectional",gH(Nq);var Eq,Dq;zV().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(Eq||(Eq={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(Dq||(Dq={}));function Xq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(Tq(e)){var o=Array.isArray(e)?[]:{};for(var i in r.add(e),e){var l=e[i],u=Xq(l,t,n,r);o[i]=u}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function Jq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yq;return Hq(e,t)}function Hq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(Tq(r)){var o=Array.isArray(r)?[]:{};n.add(r);var i=function(r){var a=e.map((function(e){return e[r]})),i=Hq(a,t,n);o[r]=i};for(var l in r)i(l);return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function Yq(e){return null===e?null:Tq(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function Tq(e){var t=!1;zV().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof __webpack_require__(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof TD)&&!(e instanceof Promise)&&!t)}function Mq(e){return function(e,t){return Xq(e,t)}(e,Kq)}function Kq(e){return e instanceof TD?{value:e.clone(),recurse:!1}:Tq(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var Pq=function(){function e(t){if(iu(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return uu(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=ta(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(Kle){n.e(Kle)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),zq=function(e){su(n,e);var t=hu(n);function n(){return iu(this,n),t.call(this,n.INITIAL_CAPACITY)}return uu(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){rU(cu(n.prototype),"isFull",this).call(this)&&this.expand(),rU(cu(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){rU(cu(n.prototype),"isFull",this).call(this)&&this.expand(),rU(cu(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(Pq);function Lq(e){return new Qq(e)}function _q(e,t){return new u$(e,t)}zq.INITIAL_CAPACITY=32;var Oq,Uq=function(){function e(){iu(this,e)}return uu(e,[{key:"toArray",value:function(){var e=j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=j(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=j(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new a$(this,e)}},{key:"filter",value:function(e){return new n$(this,e)}},{key:"map",value:function(e){return new r$(this,e)}},{key:"mapAsync",value:function(e){return new o$(this,e)}},{key:"serialMapAsync",value:function(e){return new o$(this,e).serial()}},{key:"flatmap",value:function(e){return new l$(this,e)}},{key:"forEachAsync",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new t$(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yq,r=this.rowMajorBatch(e,t);return r.map((function(e){return Jq(e,n)}))}},{key:"concatenate",value:function(e,t){return new u$(new jq([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new e$(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new $q(this,e)}},{key:"prefetch",value:function(e){return new s$(this,e)}},{key:"shuffle",value:function(e,t){return new c$(this,e,t)}},{key:"serial",value:function(){return new qq(this)}}]),e}(),jq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).items=e,r.trav=0,r}return uu(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:Mq(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),Qq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).nextFn=e,r}return uu(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),qq=function(e){su(n,e);var t=hu(n);function n(e){var r;return iu(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),$q=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:fH(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),e$=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),t$=function(e){su(n,e);var t=hu(n);function n(e,r){var a,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return iu(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=o,a.lastRead=Promise.resolve({value:null,done:!1}),a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),n$=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:fH(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),r$=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=j(q().mark((function e(){var t,n,r,a,o,i,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=eX(t.value),r=this.transform(t.value),a=eX(r),o=ta(n);try{for(o.s();!(i=o.n()).done;)$D(l=i.value,a)||l.dispose()}catch(Kle){o.e(Kle)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),a$=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),o$=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=j(q().mark((function e(){var t,n,r,a,o,i,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=eX(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=eX(r),o=ta(n);try{for(o.s();!(i=o.n()).done;)$D(l=i.value,a)||l.dispose()}catch(Kle){o.e(Kle)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),i$=function(e){su(n,e);var t=hu(n);function n(){var e;return iu(this,n),(e=t.call(this)).outputQueue=new zq,e.lastRead=Promise.resolve({value:null,done:!1}),e}return uu(n,[{key:"next",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Uq),l$=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=j(q().mark((function e(){var t,n,r,a,o,i,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=eX(t.value),r=this.transform(t.value),a=eX(r),this.outputQueue.pushAll(r),o=ta(n);try{for(o.s();!(i=o.n()).done;)$D(l=i.value,a)||l.dispose()}catch(Kle){o.e(Kle)}finally{o.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(i$),u$=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return uu(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=j(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Uq);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(Oq||(Oq={}));var s$=function(e){su(n,e);var t=hu(n);function n(e,r){var a;return iu(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new Pq(r),a}return uu(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(Uq),c$=function(e){su(n,e);var t=hu(n);function n(e,r,a){var o;return iu(this,n),(o=t.call(this,e,r)).upstream=e,o.windowSize=r,o.upstreamExhausted=!1,o.random=eT.alea(a||wD().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return uu(n,[{key:"next",value:function(){var e=j(q().mark((function e(){var t=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(s$),g$=function(){function e(){iu(this,e),this.size=null}return uu(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return uV(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),d$(j(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,p$));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,d$(j(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,d$(j(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return hH((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return d$(j(q().mark((function n(){return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return hH((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return d$(j(q().mark((function n(){return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return d$(j(q().mark((function n(){return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,d$(j(q().mark((function t(){var r;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Lq(j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",_q(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,d$(j(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=eT.alea(t||wD().toString());return d$(j(q().mark((function t(){var o;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.int32(),n&&(o+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,o.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,d$(j(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function d$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){su(a,n);var r=hu(a);function a(){var e;return iu(this,a),(e=r.apply(this,arguments)).size=t,e}return uu(a,[{key:"iterator",value:function(){var t=j(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(g$))}function p$(e){if(null===e)return null;var t,n=e[0];return null==(t=n)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(t)||Array.isArray(t)||"object"===typeof t&&t instanceof TD||ZV(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof TD?bT(e):AX(e)}(e),recurse:!1}:{value:null,recurse:!0}}g$.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function h$(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&uV("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var f$=_K,C$=function(e){su(n,e);var t=hu(n);function n(){var e;return iu(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new eV(ke(e),dH()),e}return uu(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,zV().get("IS_NODE")&&qE("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&wV(n[0])){var a=n.map((function(e){return BD(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?BK(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return xD(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return GJ(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return dH().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=j(q().mark((function e(t){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wD(),t(),r=wD()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){h$([e],"where");var t=this.readSync(e.dataId);return f$(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return rU(cu(n.prototype),"epsilon",this).call(this)}}]),n}(tV);C$.nextDataId=0;function I$(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,l=a.x;if(h$(l,e),"string"===l.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=i,s=u.data.get(l.dataId).values,c=dV(l.shape),g=n||l.dtype,d=yV(g,c),p=0;p<c;++p)d[p]=t(s[p],o);return u.makeTensorInfo(l.shape,g,d)}}function m$(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,l=a.x;if(h$(l,e),"string"===l.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=i,s=u.data.get(l.dataId).values,c=n||l.dtype,g=t(s,c,o);return u.makeTensorInfo(l.shape,c,g)}}IH("cpu",(function(){return new C$}),1);var v$=I$(LF,(function(e){return e>=0?e:Math.exp(e)-1})),b$={kernelName:LF,backendName:"cpu",kernelFunc:v$};function A$(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var y$={kernelName:sN,backendName:"cpu",kernelFunc:A$};function k$(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;h$([a],"leakyRelu");for(var i=dV(a.shape),l=n.data.get(a.dataId).values,u=AV("float32",i),s=0;s<l.length;s++)u[s]=l[s]<0?o*l[s]:l[s];return n.makeTensorInfo(a.shape,"float32",u)}var Z$={kernelName:fN,backendName:"cpu",kernelFunc:k$};function S$(e){return function(t,n,r,a,o){var i=tH(t,n),l=i.length,u=WV(i),s=AV(o,dV(i)),c=t.length,g=n.length,d=WV(t),p=WV(n),h=$J(t,i),f=$J(n,i);if(h.length+f.length===0)for(var C=0;C<s.length;++C)s[C]=e(r[C%r.length],a[C%a.length]);else for(var I=function(t){var n=HV(t,l,u),o=n.slice(-c);h.forEach((function(e){return o[e]=0}));var i=JV(o,c,d),C=n.slice(-g);f.forEach((function(e){return C[e]=0}));var I=JV(C,g,p);s[t]=e(r[i],a[I])},m=0;m<s.length;++m)I(m);return[s,i]}}var w$=S$((function(e,t){return e<0?t*e:e}));function B$(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;h$([r,a],"prelu");var o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=w$(r.shape,a.shape,o,l,"float32"),s=(0,i.Z)(u,2),c=s[0],g=s[1];return n.makeTensorInfo(g,"float32",c)}var x$={kernelName:jN,backendName:"cpu",kernelFunc:B$},G$=I$(tE,(function(e){return Math.max(0,e)})),R$={kernelName:tE,backendName:"cpu",kernelFunc:G$},W$=I$(lE,(function(e){return Math.min(Math.max(0,e),6)})),V$={kernelName:lE,backendName:"cpu",kernelFunc:W$};function F$(e){return function(t,n,r){for(var a=AV(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}var N$=F$((function(e){return 1/(1+Math.exp(-e))})),E$=I$(mE,(function(e){return 1/(1+Math.exp(-e))})),D$={kernelName:mE,backendName:"cpu",kernelFunc:E$};function X$(e,t,n,r,a){if("linear"===n)return A$({inputs:{x:t},backend:e});if("relu"===n)return G$({inputs:{x:t},backend:e});if("elu"===n)return v$({inputs:{x:t},backend:e});if("relu6"===n)return W$({inputs:{x:t},backend:e});if("prelu"===n)return B$({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return k$({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return E$({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function J$(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,l=n.makeTensorInfo(r.shape,"complex64");return n.data.get(l.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},l}var H$={kernelName:AF,backendName:"cpu",kernelFunc:J$};function Y$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=Y$(e,t,"float32"),a=Y$(e,t,"float32");return J$({inputs:{real:r,imag:a},backend:e})}var o=EV(dV(t),n);return e.makeTensorInfo(t,n,o)}function T$(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var M$={kernelName:$N,backendName:"cpu",kernelFunc:T$};function K$(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dtype;if("complex64"===o){if("complex64"===a.dtype)return A$({inputs:{x:a},backend:n});var l=Y$(n,a.shape,a.dtype),u=K$({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),s=J$({inputs:{real:u,imag:l},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),s}if("complex64"===a.dtype){var c=T$({inputs:{input:a},backend:n}),g=K$({inputs:{x:c},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(c),g}if(!kV(a.dtype,o)){var d=A$({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:o}}if("int32"===o){var p=n.data.get(a.dataId).values,h=Int32Array.from(p);return n.makeTensorInfo(a.shape,"int32",h)}if("bool"===o){var f=n.data.get(a.dataId).values,C=SD([0],a.dtype),I=S$((function(e,t){return e!==t?1:0}))(a.shape,[],f,C,"bool"),m=(0,i.Z)(I,2),v=m[0],b=m[1];return n.makeTensorInfo(b,"bool",v)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(o))}var P$={kernelName:mF,backendName:"cpu",kernelFunc:K$};function z$(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,l=a.a,u=a.b,s=o;h$([l,u],e);var c=s.data.get(l.dataId).values,g=s.data.get(u.dataId).values,d="string"===l.dtype?LK(c):c,p="string"===l.dtype?LK(g):g,h=r||l.dtype,f=t(l.shape,u.shape,d,p,h),C=(0,i.Z)(f,2),I=C[0],m=C[1];return s.makeTensorInfo(m,h,I)}:function(e){var a=e.inputs,o=e.backend,l=a.a,u=a.b,s=o;if("complex64"===l.dtype||"complex64"===u.dtype){var c=K$({inputs:{x:l},backend:s,attrs:{dtype:"complex64"}}),g=s.data.get(c.dataId),d=g.complexTensorInfos.real,p=g.complexTensorInfos.imag,h=s.data.get(d.dataId).values,f=s.data.get(p.dataId).values,C=K$({inputs:{x:u},backend:s,attrs:{dtype:"complex64"}}),I=s.data.get(C.dataId),m=I.complexTensorInfos.real,v=I.complexTensorInfos.imag,b=s.data.get(m.dataId).values,A=s.data.get(v.dataId).values,y=n(l.shape,u.shape,h,f,b,A),k=(0,i.Z)(y,3),Z=k[0],S=k[1],w=k[2],B=s.makeTensorInfo(w,"float32",Z),x=s.makeTensorInfo(w,"float32",S),G=J$({inputs:{real:B,imag:x},backend:s});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(C),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(x),G}var R=s.data.get(l.dataId).values,W=s.data.get(u.dataId).values,V=r||l.dtype,F=t(l.shape,u.shape,R,W,V),N=(0,i.Z)(F,2),E=N[0],D=N[1];return s.makeTensorInfo(D,V,E)}}function L$(e){return function(t,n,r,a,o,i){var l=tH(t,n),u=dV(l),s=l.length,c=WV(l),g=AV("float32",u),d=AV("float32",u),p=$J(t,l),h=$J(n,l),f=BK(r,a),C=BK(o,i),I=t.length,m=WV(t),v=n.length,b=WV(n);if(p.length+h.length===0)for(var A=0;A<g.length;A++){var y=A%f.length,k=A%C.length,Z=e(f[2*y],f[2*y+1],C[2*k],C[2*k+1]);g[A]=Z.real,d[A]=Z.imag}else for(var S=function(t){var n=HV(t,s,c),r=n.slice(-I);p.forEach((function(e){return r[e]=0}));var a=JV(r,I,m),o=n.slice(-v);h.forEach((function(e){return o[e]=0}));var i=JV(o,v,b),l=e(f[2*a],f[2*a+1],C[2*i],C[2*i+1]);g[t]=l.real,d[t]=l.imag},w=0;w<g.length;w++)S(w);return[g,d,l]}}var _$=S$((function(e,t){return e+t})),O$=L$((function(e,t,n,r){return{real:e+n,imag:t+r}})),U$=z$($V,_$,O$),j$={kernelName:$V,backendName:"cpu",kernelFunc:U$};function Q$(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=dV(a.shape),l=mV(o,i),u=dV(l);uV(i===u,(function(){return"The new shape (".concat(l,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var s=n.data.get(a.dataId);if(null!=s.complexTensorInfos){var c=s.complexTensorInfos.real,g=s.complexTensorInfos.imag;c.shape=l,g.shape=l}return{dataId:a.dataId,shape:l,dtype:a.dtype}}var q$={kernelName:nE,backendName:"cpu",kernelFunc:Q$};function $$(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,l=r.transposeA,u=r.transposeB;h$([a,o],"matMul");var s=a.shape.length,c=o.shape.length,g=l?a.shape[s-2]:a.shape[s-1],d=u?o.shape[c-1]:o.shape[c-2],p=l?a.shape[s-1]:a.shape[s-2],h=u?o.shape[c-2]:o.shape[c-1],f=a.shape.slice(0,-2),C=o.shape.slice(0,-2),I=dV(f),m=dV(C),v=tH(a.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,h]);uV(g===d,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(o.shape," and transposeA=").concat(l)+" and transposeB=".concat(u," must match.")}));for(var b=u?[m,h,d]:[m,d,h],A=Q$({inputs:{x:a},backend:n,attrs:{shape:l?[I,g,p]:[I,p,g]}}),y=Q$({inputs:{x:o},backend:n,attrs:{shape:b}}),k=l?A.shape[1]:A.shape[2],Z=l?A.shape[2]:A.shape[1],S=u?y.shape[1]:y.shape[2],w=Math.max(I,m),B=n.data.get(A.dataId).values,x=n.data.get(y.dataId).values,G=WV(A.shape),R=WV(y.shape),W=l?[G[0],1,G[1]]:[G[0],G[1],1],V=(0,i.Z)(W,3),F=V[0],N=V[1],E=V[2],D=u?[1,R[1],R[0]]:[R[1],1,R[0]],X=(0,i.Z)(D,3),J=X[0],H=X[1],Y=X[2],T=Z*S,M=GJ([w,Z,S],A.dtype),K=M.values,P=n.blockSize,z=0;z<w;z++)for(var L=0;L<Z;L+=P)for(var _=0;_<S;_+=P)for(var O=0;O<k;O+=P)for(var U=Math.min(L+P,Z),j=Math.min(_+P,S),Q=Math.min(O+P,k),q=L;q<U;q++)for(var $=_;$<j;$++){for(var ee=0,te=O;te<Q;te++){var ne=Math.min(z,I-1)*F,re=Math.min(z,m-1)*Y;ee+=B[ne+q*N+te*E]*x[te*J+$*H+re]}K[z*T+(q*S+$)]+=ee}return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(v,M.dtype,M.values)}var e0={kernelName:hF,backendName:"cpu",kernelFunc:$$};var t0={kernelName:UE,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,l=a.a,u=a.b,s=a.bias,c=a.preluActivationWeights,g=i.transposeA,d=i.transposeB,p=i.activation,h=i.leakyreluAlpha,f=[];t=$$({inputs:{a:l,b:u},attrs:{transposeA:g,transposeB:d},backend:o}),s&&(n=U$({inputs:{a:t,b:s},backend:o}),f.push(t),t=n),p&&(r=X$(o,t,p,c,h),f.push(t),t=r);for(var C=0,I=f;C<I.length;C++){var m=I[C];o.disposeIntermediateTensorInfo(m)}return t}};function n0(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var r0={kernelName:jV,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;h$(t,"abs");var r=new Float32Array(dV(t.shape));return r=n0(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},a0=I$(QV,(function(e){return Math.acos(e)})),o0={kernelName:QV,backendName:"cpu",kernelFunc:a0},i0=I$(qV,(function(e){return Math.acosh(e)})),l0={kernelName:qV,backendName:"cpu",kernelFunc:i0};var u0={kernelName:eF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;h$(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=GJ(r[0].shape,r[0].dtype),i=o.values,l=0;l<r.length;l++)for(var u=a[l],s=0;s<i.length;s++)i[s]+=u[s];return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function s0(e,t,n,r,a){for(var o=t.length,i=dV(t),l=WV(t),u=WV(a),s=AV(n,dV(a)),c=0;c<i;++c){for(var g=HV(c,o,l),d=new Array(g.length),p=0;p<d.length;p++)d[p]=g[r[p]];s[JV(d,o,u)]=e[c]}return s}function c0(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;h$(a,"transpose");for(var i=a.shape.length,l=new Array(i),u=0;u<l.length;u++)l[u]=a.shape[o[u]];var s=s0(r.data.get(a.dataId).values,a.shape,a.dtype,o,l);return{dataId:r.write(s,l,a.dtype),shape:l,dtype:a.dtype}}var g0={kernelName:ME,backendName:"cpu",kernelFunc:c0};var d0={kernelName:tF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,l=r.keepDims;h$(a,"all");var u=vV(o,a.shape),s=u,c=TY(s,a.shape.length),g=a;null!=c&&(g=c0({inputs:{x:a},backend:n,attrs:{perm:c}}),s=KY(s.length,a.shape.length)),YY("all",s,g.shape.length);for(var d=JY(g.shape,s),p=(0,i.Z)(d,2),h=p[0],f=dV(p[1]),C=EV(dV(h),g.dtype),I=n.data.get(g.dataId).values,m=0;m<C.length;++m){for(var v=m*f,b=I[v],A=0;A<f;++A){var y=I[v+A];b=b&&y}C[m]=b}null!=c&&n.disposeIntermediateTensorInfo(g);var k=n.makeTensorInfo(h,g.dtype,C);if(l){var Z=Q$({inputs:{x:k},backend:n,attrs:{shape:HY(h,u)}});return n.disposeIntermediateTensorInfo(k),Z}return k}};var p0={kernelName:nF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,l=r.keepDims;h$(a,"any");var u=vV(o,a.shape),s=u,c=TY(s,a.shape.length),g=a;null!=c&&(g=c0({inputs:{x:a},backend:n,attrs:{perm:c}}),s=KY(s.length,a.shape.length)),YY("any",s,g.shape.length);for(var d=JY(g.shape,s),p=(0,i.Z)(d,2),h=p[0],f=dV(p[1]),C=EV(dV(h),g.dtype),I=n.data.get(g.dataId).values,m=0;m<C.length;++m){for(var v=m*f,b=I[v],A=0;A<f;++A){var y=I[v+A];b=b||y}C[m]=b}null!=c&&n.disposeIntermediateTensorInfo(g);var k=n.makeTensorInfo(h,g.dtype,C);if(l){var Z=Q$({inputs:{x:k},backend:n,attrs:{shape:HY(h,u)}});return n.disposeIntermediateTensorInfo(k),Z}return k}};var h0={kernelName:rF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;h$(a,"argMax");var l=vV(o,a.shape),u=TY(l,a.shape.length),s=a,c=[];null!=u&&(s=c0({inputs:{x:a},backend:n,attrs:{perm:u}}),c.push(s),l=KY(l.length,s.shape.length)),YY("argMax",l=[l[0]],s.shape.length);for(var g=JY(s.shape,l),d=(0,i.Z)(g,2),p=d[0],h=d[1],f=EV(dV(p),"int32"),C=dV(h),I=n.data.get(s.dataId).values,m=0;m<f.length;++m){for(var v=m*C,b=I[v],A=0,y=0;y<C;++y){var k=I[v+y];k>b&&(b=k,A=y)}f[m]=A}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",f)}};var f0={kernelName:aF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;h$(a,"argMin");var l=vV(o,a.shape),u=TY(l,a.shape.length),s=a,c=[];null!=u&&(s=c0({inputs:{x:a},backend:n,attrs:{perm:u}}),c.push(s),l=KY(l.length,s.shape.length)),YY("argMin",l=[l[0]],s.shape.length);for(var g=JY(s.shape,l),d=(0,i.Z)(g,2),p=d[0],h=d[1],f=EV(dV(p),"int32"),C=dV(h),I=n.data.get(s.dataId).values,m=0;m<f.length;++m){for(var v=m*C,b=I[v],A=0,y=0;y<C;++y){var k=I[v+y];k<b&&(b=k,A=y)}f[m]=A}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",f)}},C0=I$(oF,(function(e){return Math.asin(e)})),I0={kernelName:oF,backendName:"cpu",kernelFunc:C0},m0=I$(iF,(function(e){return Math.asinh(e)})),v0={kernelName:iF,backendName:"cpu",kernelFunc:m0},b0=I$(lF,(function(e){return Math.atan(e)})),A0={kernelName:lF,backendName:"cpu",kernelFunc:b0},y0=S$((function(e,t){return Math.atan2(e,t)})),k0=z$(sF,y0),Z0={kernelName:sF,backendName:"cpu",kernelFunc:k0},S0=I$(uF,(function(e){return Math.atanh(e)})),w0={kernelName:uF,backendName:"cpu",kernelFunc:S0};function B0(e,t,n,r,a,o){for(var i=a.strideHeight,l=a.strideWidth,u=a.dilationHeight,s=a.dilationWidth,c=a.effectiveFilterHeight,g=a.effectiveFilterWidth,d=a.padInfo.top,p=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=GJ(a.outShape,n),C=f.values,I=a.outShape[1]*a.outShape[2]*a.outShape[3],m=a.outShape[2]*a.outShape[3],v=a.outShape[3],b=0;b<a.batchSize;++b)for(var A=b*I,y=b*r[0],k=0;k<a.inChannels;++k)for(var Z=0;Z<a.outHeight;++Z)for(var S=Z*i-d,w=Math.max(0,S),B=Math.min(a.inHeight,c+S),x=A+Z*m,G=0;G<a.outWidth;++G){for(var R=G*l-p,W=Math.max(0,R),V=Math.min(a.inWidth,g+R),F=h,N=0,E=0,D=w;D<B;D+=u){for(var X=y+D*r[1],J=W;J<V;J+=s){var H=e[X+J*r[2]+k];"max"===o&&H>F?F=H:"avg"===o&&(N+=H,E++)}if(isNaN(F))break}C[x+G*v+k]="avg"===o?N/E:F}return f}function x0(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=GJ(r.outShape,"int32"),l=r.strideHeight,u=r.strideWidth,s=r.dilationHeight,c=r.dilationWidth,g=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,f=GJ(t,n,e),C=0;C<r.batchSize;++C)for(var I=0;I<r.inChannels;++I)for(var m=0;m<r.outHeight;++m){for(var v=m*l-p,b=v;b<0;)b+=s;for(var A=Math.min(r.inHeight,g+v),y=0;y<r.outWidth;++y){for(var k=y*u-h,Z=k;Z<0;)Z+=c;for(var S=Math.min(r.inWidth,d+k),w=Number.NEGATIVE_INFINITY,B=-1,x=b;x<A;x+=s)for(var G=x-v,R=Z;R<S;R+=c){var W=R-k,V=f.get(C,x,R,I);V>w&&(w=V,B=a?o?((C*r.inHeight+x)*r.inWidth+R)*r.inChannels+I:(x*r.inWidth+R)*r.inChannels+I:G*d+W)}i.set(B,C,m,y,I)}}return i}function G0(e,t,n,r,a,o){for(var i=a.strideDepth,l=a.strideHeight,u=a.strideWidth,s=a.dilationDepth,c=a.dilationHeight,g=a.dilationWidth,d=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,f=a.padInfo.front,C=a.padInfo.top,I=a.padInfo.left,m="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=GJ(a.outShape,n),b=v.values,A=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],y=a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[3]*a.outShape[4],Z=a.outShape[4],S=0;S<a.batchSize;++S)for(var w=S*A,B=S*r[0],x=0;x<a.inChannels;++x)for(var G=0;G<a.outDepth;++G){for(var R=G*i-f,W=R;W<0;)W+=s;for(var V=Math.min(a.inDepth,d+R),F=w+G*y,N=0;N<a.outHeight;++N){for(var E=N*l-C,D=E;D<0;)D+=c;for(var X=Math.min(a.inHeight,p+E),J=F+N*k,H=0;H<a.outWidth;++H){for(var Y=H*u-I,T=Y;T<0;)T+=g;for(var M=Math.min(a.inWidth,h+Y),K=J+H*Z,P=m,z=0,L=0,_=W;_<V;_+=s){for(var O=B+_*r[1],U=D;U<X;U+=c){for(var j=O+U*r[2],Q=T;Q<M;Q+=g){var q=e[j+Q*r[3]+x];if("max"===o&&q>P?P=q:"avg"===o&&(z+=q,L++),isNaN(P))break}if(isNaN(P))break}if(isNaN(P))break}b[K+x]="avg"===o?z/L:P}}}return v}var R0={kernelName:cF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;h$(a,"avgPool");var o=r.filterSize,i=r.strides,l=r.pad,u=r.dimRoundingMode;uV(HH(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var s,c=BH(a.shape,o,i,1,l,u);if(1===c.filterWidth&&1===c.filterHeight&&pV(c.inShape,c.outShape))s=A$({inputs:{x:a},backend:n});else{var g=n.data.get(a.dataId).values,d=WV(a.shape),p=B0(g,a.shape,a.dtype,d,c,"avg");s=n.makeTensorInfo(c.outShape,a.dtype,p.values)}return s}};var W0={kernelName:dF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,l=r.pad,u=r.dimRoundingMode,s=r.dataFormat;h$(a,"avgPool3d");var c=xH(a.shape,o,i,1,l,u,s),g=G0(n.data.get(a.dataId).values,a.shape,a.dtype,WV(a.shape),c,"avg");return n.makeTensorInfo(g.shape,"float32",g.values)}};var V0={kernelName:pF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,l=r.strides,u=r.pad,s=r.dimRoundingMode;h$([a,o],"avgPool3DGrad");for(var c=xH(o.shape,i,l,1,u,s),g=c.strideDepth,d=c.strideHeight,p=c.strideWidth,h=c.filterDepth,f=c.filterHeight,C=c.filterWidth,I=c.dilationDepth,m=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,A=c.effectiveFilterHeight,y=c.effectiveFilterWidth,k=b-1-c.padInfo.front,Z=y-1-c.padInfo.left,S=A-1-c.padInfo.top,w=GJ(o.shape,"float32"),B=1/(h*f*C),x=n.bufferSync(a),G=0;G<c.batchSize;++G)for(var R=0;R<c.inChannels;++R)for(var W=0;W<c.inDepth;++W)for(var V=0;V<c.inHeight;++V)for(var F=0;F<c.inWidth;++F){for(var N=W-k,E=V-S,D=F-Z,X=0,J=0;J<b;J+=I){var H=(N+J)/g;if(!(H<0||H>=c.outDepth||Math.floor(H)!==H))for(var Y=0;Y<A;Y+=m){var T=(E+Y)/d;if(!(T<0||T>=c.outHeight||Math.floor(T)!==T))for(var M=0;M<y;M+=v){var K=(D+M)/p;if(!(K<0||K>=c.outWidth||Math.floor(K)!==K))X+=x.get(G,H,T,K,R)}}}w.set(X*B,G,W,V,F,R)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var F0={kernelName:gF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;h$([a,o],"avgPoolGrad");for(var l=r.filterSize,u=r.strides,s=r.pad,c=BH(i.shape,l,u,1,s),g=c.strideHeight,d=c.strideWidth,p=c.filterHeight,h=c.filterWidth,f=c.dilationHeight,C=c.dilationWidth,I=c.effectiveFilterHeight,m=c.effectiveFilterWidth,v=m-1-c.padInfo.left,b=I-1-c.padInfo.top,A=GJ(i.shape,"float32"),y=1/(p*h),k=n.data.get(a.dataId).values,Z=GJ(a.shape,"float32",k),S=0;S<c.batchSize;++S)for(var w=0;w<c.inChannels;++w)for(var B=0;B<c.inHeight;++B)for(var x=0;x<c.inWidth;++x){for(var G=B-b,R=x-v,W=0,V=0;V<I;V+=f){var F=(G+V)/g;if(!(F<0||F>=c.outHeight||Math.floor(F)!==F))for(var N=0;N<m;N+=C){var E=(R+N)/d;if(!(E<0||E>=c.outWidth||Math.floor(E)!==E))W+=Z.get(S,F,E,w)}}A.set(W*y,S,B,x,w)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};var N0={kernelName:aN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,l=t.mean,u=t.variance;uV(l.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),uV(null==i||l.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),uV(null==o||l.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),h$([a,l,u,o,i],"batchNorm");var s=r.varianceEpsilon;null==s&&(s=.001);for(var c=n.data.get(a.dataId).values,g=n.data.get(l.dataId).values,d=n.data.get(u.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),f=new Float32Array(c.length),C=h.length,I=p.length,m=d.length,v=g.length,b=0,A=0,y=0,k=0,Z=0;Z<c.length;++Z)f[Z]=h[b++]+(c[Z]-g[A++])*p[y++]/Math.sqrt(d[k++]+s),b>=C&&(b=0),A>=v&&(A=0),y>=I&&(y=0),k>=m&&(k=0);return n.makeTensorInfo(a.shape,a.dtype,f)}};function E0(e,t,n,r,a){var o=aH(r,t,n),i=dV(n),l=WV(r);if(o){var u=oH(t,l);return"string"===a?e.slice(u,u+i):e.subarray(u,u+i)}for(var s=GJ(r,a,"string"===a?LK(e):e),c=GJ(n,a),g=0;g<c.size;++g){var d=c.indexToLoc(g),p=d.map((function(e,n){return e+t[n]}));c.set.apply(c,[s.get.apply(s,(0,Ae.Z)(p))].concat((0,Ae.Z)(d)))}return"string"===a?c.values.map((function(e){return BD(e)})):c.values}function D0(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,l=r.size;h$(a,"slice");var u=iH(a,o,l),s=(0,i.Z)(u,2),c=s[0],g=s[1];nH(a,c,g);var d=E0(n.data.get(a.dataId).values,c,g,a.shape,a.dtype);return n.makeTensorInfo(g,a.dtype,d)}var X0={kernelName:hE,backendName:"cpu",kernelFunc:D0};var J0={kernelName:fF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;h$([a],"batchToSpaceND");var l=o.reduce((function(e,t){return e*t})),u=dK(a.shape,o,l),s=pK(u.length,o.length),c=hK(a.shape,o,l),g=fK(i,o.length),d=CK(c,i,o.length),p=Q$({inputs:{x:a},backend:n,attrs:{shape:u}}),h=c0({inputs:{x:p},backend:n,attrs:{perm:s}}),f=Q$({inputs:{x:h},backend:n,attrs:{shape:c}}),C=D0({inputs:{x:f},backend:n,attrs:{begin:g,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),C}};function H0(e,t,n,r,a){for(var o=dV(r),i=EV(a,n),l=0;l<e.length;l++){var u=e[l];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[l]:1)}return i}function Y0(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=GJ([a,n],t.dtype),l=0;l<a;l++)for(var u=0;u<o;u++){var s=e.get(l,u);if(s<0)throw new Error("Input x must be non-negative!");s>=n||(r?i.set(1,l,s):t.size>0?i.set(i.get(l,s)+t.get(l,u),l,s):i.set(i.get(l,s)+1,l,s))}return i}var T0={kernelName:CF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,l=H0(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}};var M0={kernelName:IF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,l=tH(Array.from(o),Array.from(i));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}},K0=F$((function(e){return Math.ceil(e)})),P0=m$(vF,K0),z0={kernelName:vF,backendName:"cpu",kernelFunc:P0},L0=I$(bF,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),_0={kernelName:bF,backendName:"cpu",kernelFunc:L0},O0={kernelName:yF,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(dV(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,s=0;s<l.length;s++){var c=l[s],g=u[s];r[s]=Math.hypot(c,g)}return n.makeOutput(r,t.shape,"float32")}};function U0(e,t,n,r){var a=yV(n,dV(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=dV(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?LK(e.vals):e.vals,o=0,l=0;l<e.shape[0];++l)for(var u=l*t[1]+i,s=0;s<e.shape[1];++s)a[u+s]=r[o++];i+=e.shape[1]}))}return a}function j0(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var Q0={kernelName:gN,backendName:"cpu",kernelFunc:j0};function q0(e){var t=e.inputs,n=e.backend,r=vV(e.attrs.axis,t[0].shape)[0],a=sK(t.map((function(e){return e.shape})),r);if(0===dV(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return dV(e.shape)>0}));if(1===o.length)return A$({inputs:{x:o[0]},backend:n});if(uK(o.map((function(e){return e.shape})),r),"complex64"===o[0].dtype){var i=o.map((function(e){return T$({inputs:{input:e},backend:n})})),l=o.map((function(e){return j0({inputs:{input:e},backend:n})})),u=q0({inputs:i,backend:n,attrs:{axis:r}}),s=q0({inputs:l,backend:n,attrs:{axis:r}}),c=J$({inputs:{real:u,imag:s},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(s),c}var g=o.map((function(e){var t=dV(e.shape.slice(r));return Q$({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),d=g.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=sK(g.map((function(e){return e.shape})),1);var p=1===g[0].shape[0],h=U0(d,a,t[0].dtype,p),f=sK(o.map((function(e){return e.shape})),r),C=n.makeTensorInfo(f,t[0].dtype,h);return g.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),C}var $0={kernelName:kF,backendName:"cpu",kernelFunc:q0};function e2(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,l=r.pad,u=r.dataFormat,s=r.dilations,c=r.dimRoundingMode;h$([a,o],"conv2d");for(var g=YH(u),d=GH(a.shape,o.shape,i,s,l,c,!1,g),p=d.filterHeight,h=d.filterWidth,f=d.dilationHeight,C=d.dilationWidth,I=d.padInfo.left,m=d.padInfo.top,v="channelsLast"===d.dataFormat,b=new JD(d.outShape,a.dtype),A=WV(a.shape),y=WV(o.shape),k=A[0],Z=v?A[1]:A[2],S=v?A[2]:1,w=v?1:A[1],B=b.strides[0],x=v?b.strides[1]:b.strides[2],G=v?b.strides[2]:1,R=v?1:b.strides[1],W=n.data.get(a.dataId).values,V=n.data.get(o.dataId).values,F=b.values,N=0;N<d.batchSize;++N)for(var E=N*k,D=N*B,X=0;X<d.outHeight;++X)for(var J=D+X*x,H=X*d.strideHeight-m,Y=0;Y<p;++Y){var T=H+Y*f;if(!(T<0||T>=d.inHeight))for(var M=Y*y[0],K=E+T*Z,P=0;P<d.outWidth;++P)for(var z=J+P*G,L=P*d.strideWidth-I,_=0;_<h;++_){var O=L+_*C;if(!(O<0||O>=d.inWidth))for(var U=K+O*S,j=M+_*y[1],Q=0;Q<d.inChannels;++Q){for(var q=W[U+Q*w],$=0;$<d.outChannels;++$)F[z+$*R]+=q*V[j+$];j+=d.outChannels}}}return n.makeTensorInfo(b.shape,b.dtype,F)}var t2={kernelName:ZF,backendName:"cpu",kernelFunc:e2};var n2={kernelName:SF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,l=r.pad,u=r.dataFormat,s=r.dimRoundingMode,c=r.filterShape;h$([a,o],"conv2dBackpropFilter");for(var g=YH(u),d=GH(a.shape,c,i,1,l,s,!1,g),p=d.strideHeight,h=d.strideWidth,f=d.filterHeight,C=d.filterWidth,I="channelsLast"===d.dataFormat,m=new JD(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,A=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,k=new JD(a.shape,a.dtype,A),Z=new JD(o.shape,o.dtype,y),S=0;S<f;++S)for(var w=Math.max(0,Math.ceil((b-S)/p)),B=Math.min(d.outHeight,(d.inHeight+b-S)/p),x=0;x<C;++x)for(var G=Math.max(0,Math.ceil((v-x)/h)),R=Math.min(d.outWidth,(d.inWidth+v-x)/h),W=0;W<d.inChannels;++W)for(var V=0;V<d.outChannels;++V){for(var F=0,N=0;N<d.batchSize;++N)for(var E=w;E<B;++E)for(var D=S+E*p-b,X=G;X<R;++X){var J=x+X*h-v;F+=I?k.get(N,D,J,W)*Z.get(N,E,X,V):k.get(N,W,D,J)*Z.get(N,V,E,X)}m.set(F,S,x,W,V)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var r2={kernelName:wF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,l=r.inputShape,u=r.strides,s=r.pad,c=r.dataFormat,g=r.dimRoundingMode;h$([a,o],"conv2dBackpropInput");var d=WV(o.shape),p=WV(a.shape),h=YH(c),f=GH(l,o.shape,u,1,s,g,!1,h),C=new JD(f.inShape,"float32"),I=C.values,m=n.data.get(a.dataId).values,v=n.data.get(o.dataId).values,b=(0,i.Z)(d,3),A=b[0],y=b[1],k=b[2],Z=f.batchSize,S=f.filterHeight,w=f.filterWidth,B=f.inChannels,x=f.inHeight,G=f.inWidth,R=f.outChannels,W=f.outHeight,V=f.outWidth,F=f.strideHeight,N=f.strideWidth;h=f.dataFormat;for(var E=S-1-f.padInfo.top,D=w-1-f.padInfo.left,X="channelsLast"===h,J=C.strides[0],H=X?C.strides[1]:C.strides[2],Y=X?C.strides[2]:1,T=X?1:C.strides[1],M=p[0],K=X?p[1]:p[2],P=X?p[2]:1,z=X?1:p[1],L=0;L<Z;++L)for(var _=0;_<B;++_)for(var O=0;O<x;++O)for(var U=O-E,j=Math.max(0,Math.ceil(U/F)),Q=Math.min(W,(S+U)/F),q=0;q<G;++q){for(var $=q-D,ee=Math.max(0,Math.ceil($/N)),te=Math.min(V,(w+$)/N),ne=0,re=j;re<Q;++re)for(var ae=re*F-U,oe=ee;oe<te;++oe)for(var ie=M*L+K*re+P*oe,le=A*(S-1-ae)+y*(w-1-(oe*N-$))+k*_,ue=0;ue<R;++ue){ne+=m[ie+z*ue]*v[le+ue]}I[J*L+H*O+Y*q+T*_]=ne}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var a2={kernelName:BF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,l=r.pad,u=r.dilations;h$([a,o],"conv3d");for(var s=RH(a.shape,o.shape,i,u,l),c=s.filterDepth,g=s.filterHeight,d=s.filterWidth,p=s.dilationDepth,h=s.dilationHeight,f=s.dilationWidth,C=s.padInfo,I=C.front,m=C.left,v=C.top,b=new JD(s.outShape,a.dtype),A=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,k=b.values,Z=WV(a.shape),S=WV(o.shape),w=0;w<s.batchSize;++w)for(var B=w*Z[0],x=w*b.strides[0],G=0;G<s.outDepth;++G)for(var R=x+G*b.strides[1],W=G*s.strideDepth-I,V=0;V<c;++V){var F=W+V*p;if(!(F<0||F>=s.inDepth))for(var N=V*S[0],E=B+F*Z[1],D=0;D<s.outHeight;++D)for(var X=R+D*b.strides[2],J=D*s.strideHeight-v,H=0;H<g;++H){var Y=J+H*h;if(!(Y<0||Y>=s.inHeight))for(var T=N+H*S[1],M=E+Y*Z[2],K=0;K<s.outWidth;++K)for(var P=X+K*s.outChannels,z=K*s.strideWidth-m,L=0;L<d;++L){var _=z+L*f;if(!(_<0||_>=s.inWidth))for(var O=T+L*S[2],U=M+_*s.inChannels,j=O,Q=0;Q<s.inChannels;++Q){for(var q=A[U+Q],$=0;$<s.outChannels;++$)k[P+$]+=q*y[j+$];j+=s.outChannels}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var o2={kernelName:xF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,l=r.strides,u=r.pad,s=r.filterShape;h$([a,o],"conv3dBackpropFilterV2");for(var c=WV(a.shape),g=WV(o.shape),d=RH(a.shape,s,l,1,u),p=d.strideDepth,h=d.strideHeight,f=d.strideWidth,C=d.filterDepth,I=d.filterHeight,m=d.filterWidth,v=new JD(d.filterShape,"float32"),b=v.values,A=(0,i.Z)(v.strides,4),y=A[0],k=A[1],Z=A[2],S=A[3],w=n.data.get(o.dataId).values,B=(0,i.Z)(g,4),x=B[0],G=B[1],R=B[2],W=B[3],V=n.data.get(a.dataId).values,F=(0,i.Z)(c,4),N=F[0],E=F[1],D=F[2],X=F[3],J=d.padInfo.front,H=d.padInfo.left,Y=d.padInfo.top,T=0;T<C;++T)for(var M=Math.max(0,Math.ceil((J-T)/p)),K=Math.min(d.outDepth,(d.inDepth+J-T)/p),P=T*y,z=0;z<I;++z)for(var L=Math.max(0,Math.ceil((Y-z)/h)),_=Math.min(d.outHeight,(d.inHeight+Y-z)/h),O=z*k+P,U=0;U<m;++U)for(var j=Math.max(0,Math.ceil((H-U)/f)),Q=Math.min(d.outWidth,(d.inWidth+H-U)/f),q=U*Z+O,$=0;$<d.inChannels;++$)for(var ee=$*S+q,te=0;te<d.outChannels;++te){for(var ne=0,re=0;re<d.batchSize;++re)for(var ae=re*N,oe=re*x,ie=M;ie<K;++ie)for(var le=(T+ie*p-J)*E+ae,ue=ie*G+oe,se=L;se<_;++se)for(var ce=(z+se*h-Y)*D+le,ge=se*R+ue,de=j;de<Q;++de){var pe=de*W+ge;ne+=V[(U+de*f-H)*X+ce+$]*w[pe+te]}b[ee+te]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var i2={kernelName:GF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,l=r.pad,u=r.strides,s=r.inputShape;h$([a],"conv3dBackpropInputV2");for(var c=WV(a.shape),g=WV(o.shape),d=RH(s,o.shape,u,1,l),p=new JD(d.inShape,"float32"),h=p.values,f=(0,i.Z)(p.strides,4),C=f[0],I=f[1],m=f[2],v=f[3],b=n.data.get(a.dataId).values,A=(0,i.Z)(c,4),y=A[0],k=A[1],Z=A[2],S=A[3],w=n.data.get(o.dataId).values,B=(0,i.Z)(g,4),x=B[0],G=B[1],R=B[2],W=B[3],V=d.batchSize,F=d.filterDepth,N=d.filterHeight,E=d.filterWidth,D=d.inChannels,X=d.inDepth,J=d.inHeight,H=d.inWidth,Y=d.outChannels,T=d.outDepth,M=d.outHeight,K=d.outWidth,P=d.strideDepth,z=d.strideHeight,L=d.strideWidth,_=F-1-d.padInfo.front,O=N-1-d.padInfo.top,U=E-1-d.padInfo.left,j=0;j<V;++j)for(var Q=0;Q<D;++Q)for(var q=0;q<X;++q)for(var $=q-_,ee=Math.max(0,Math.ceil($/P)),te=Math.min(T,(F+$)/P),ne=0;ne<J;++ne)for(var re=ne-O,ae=Math.max(0,Math.ceil(re/z)),oe=Math.min(M,(N+re)/z),ie=0;ie<H;++ie){for(var le=ie-U,ue=Math.max(0,Math.ceil(le/L)),se=Math.min(K,(E+le)/L),ce=0,ge=ee;ge<te;++ge)for(var de=ge*P-$,pe=ae;pe<oe;++pe)for(var he=pe*z-re,fe=ue;fe<se;++fe)for(var Ce=y*j+k*ge+Z*pe+S*fe,Ie=x*(F-1-de)+G*(N-1-he)+R*(E-1-(fe*L-le))+W*Q,me=0;me<Y;++me){ce+=b[Ce+me]*w[Ie+me]}h[C*j+I*q+m*ne+v*ie+Q]=ce}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},l2=I$(RF,(function(e){return Math.cos(e)})),u2={kernelName:RF,backendName:"cpu",kernelFunc:l2},s2=I$(WF,(function(e){return Math.cosh(e)})),c2={kernelName:WF,backendName:"cpu",kernelFunc:s2};var g2={kernelName:NF,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,l=t.boxInd,u=r.cropSize,s=r.method,c=r.extrapolationValue,g=(0,i.Z)(a.shape,4),d=g[0],p=g[1],h=g[2],f=g[3],C=o.shape[0],I=(0,i.Z)(u,2),m=I[0],v=I[1],b=GJ([C,m,v,f],"float32"),A=n.data.get(o.dataId).values,y=n.data.get(l.dataId).values,k=n.data.get(a.dataId).values,Z=WV(a.shape),S=WV(b.shape),w=0;w<C;w++){var B=4*w,x=A[B],G=A[B+1],R=A[B+2],W=A[B+3],V=y[w];if(!(V>=d))for(var F=m>1?(R-x)*(p-1)/(m-1):0,N=v>1?(W-G)*(h-1)/(v-1):0,E=0;E<m;E++){var D=m>1?x*(p-1)+E*F:.5*(x+R)*(p-1);if(D<0||D>p-1)for(var X=0;X<v;X++)for(var J=0;J<f;J++){var H=J+X*S[2]+E*S[1]+w*S[0];b.values[H]=c}else if("bilinear"===s)for(var Y=Math.floor(D),T=Math.ceil(D),M=D-Y,K=0;K<v;K++){var P=v>1?G*(h-1)+K*N:.5*(G+W)*(h-1);if(P<0||P>h-1)for(var z=0;z<f;z++){var L=z+K*S[2]+E*S[1]+w*S[0];b.values[L]=c}else for(var _=Math.floor(P),O=Math.ceil(P),U=P-_,j=0;j<f;j++){var Q=j+_*Z[2]+Y*Z[1]+V*Z[0],q=k[Q],$=k[Q=j+O*Z[2]+Y*Z[1]+V*Z[0]],ee=k[Q=j+_*Z[2]+T*Z[1]+V*Z[0]],te=q+($-q)*U,ne=ee+(k[Q=j+O*Z[2]+T*Z[1]+V*Z[0]]-ee)*U;Q=j+K*S[2]+E*S[1]+w*S[0],b.values[Q]=te+(ne-te)*M}}else for(var re=0;re<v;++re){var ae=v>1?G*(h-1)+re*N:.5*(G+W)*(h-1);if(ae<0||ae>h-1)for(var oe=0;oe<f;oe++){var ie=oe+re*S[2]+E*S[1]+w*S[0];b.values[ie]=c}else for(var le=Math.round(ae),ue=Math.round(D),se=0;se<f;se++){var ce=se+le*Z[2]+ue*Z[1]+V*Z[0],ge=se+re*S[2]+E*S[1]+w*S[0];b.values[ge]=k[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var d2={kernelName:VF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,l=r.reverse;h$(a,"cumprod");var u=TY([o],a.shape.length),s=a;null!=u&&(s=c0({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=KY(1,a.shape.length)[0];if(c!==s.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(s.shape.length-1," but got axis=").concat(c));for(var g=jD(s.dtype,"int32"),d=NV(dV(s.shape),g),p=n.data.get(s.dataId).values,h=s.shape[s.shape.length-1],f=l?function(e,t){return e+h-t-1}:function(e,t){return e+t},C=0;C<p.length;C+=h)for(var I=0;I<h;I++){var m=f(C,I);if(0===I)d[m]=i?1:p[m];else{var v=f(C,I-1);d[m]=i?p[v]*d[v]:p[m]*d[v]}}var b=n.makeTensorInfo(s.shape,g,d);if(null!=u){var A=c0({inputs:{x:b},backend:n,attrs:{perm:MY(u)}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(s),A}return b}};var p2={kernelName:FF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,l=r.reverse;h$(a,"cumsum");var u=TY([o],a.shape.length),s=a;null!=u&&(s=c0({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=KY(1,a.shape.length)[0];if(c!==s.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(s.shape.length-1," but got axis=").concat(c));for(var g=jD(s.dtype,"int32"),d=EV(dV(s.shape),g),p=n.data.get(s.dataId).values,h=s.shape[s.shape.length-1],f=l?function(e,t){return e+h-t-1}:function(e,t){return e+t},C=0;C<p.length;C+=h)for(var I=0;I<h;I++){var m=f(C,I);if(0===I)d[m]=i?0:p[m];else{var v=f(C,I-1);d[m]=i?p[v]+d[v]:p[m]+d[v]}}var b=n.makeTensorInfo(s.shape,g,d);if(null!=u){var A=c0({inputs:{x:b},backend:n,attrs:{perm:MY(u)}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(s),A}return b}};var h2={kernelName:EF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,l=r.binaryOutput;if(1===a.shape.length){var u=H0(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var s=Y0(n.bufferSync(a),n.bufferSync(o),i,l);return n.makeTensorInfo(s.shape,o.dtype,s.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var f2={kernelName:DF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;uV("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)}));for(var l=a.shape[0],u=a.shape[1],s=a.shape[2],c=a.shape[3],g=u*o,d=s*o,p=c/(o*o),h=n.data.get(a.dataId).values,f=new Float32Array(l*g*d*p),C=0,I=0;I<l;++I)for(var m=0;m<g;++m)for(var v=Math.floor(m/o),b=m%o,A=0;A<d;++A)for(var y=Math.floor(A/o),k=(b*o+A%o)*p,Z=0;Z<p;++Z){var S=Z+k+c*(y+s*(v+u*I));f[C++]=h[S]}return n.makeTensorInfo([l,g,d,p],a.dtype,f)}};function C2(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,l=r.pad,u=r.dilations,s=r.dimRoundingMode;h$([a,o],"depthwiseConv2DNative");var c=WV(a.shape),g=WV(o.shape),d=u;null==d&&(d=[1,1]),uV(HH(i,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(d,"'")}));for(var p=GH(a.shape,o.shape,i,d,l,s,!0),h=p.filterHeight,f=p.filterWidth,C=p.dilationHeight,I=p.dilationWidth,m=p.padInfo,v=m.left,b=m.top,A=p.outChannels/p.inChannels,y=new JD(p.outShape,a.dtype),k=n.data.get(a.dataId).values,Z=n.data.get(o.dataId).values,S=y.values,w=0;w<p.batchSize;++w)for(var B=w*c[0],x=w*y.strides[0],G=0;G<p.outHeight;++G)for(var R=x+G*y.strides[1],W=G*p.strideHeight-b,V=0;V<h;++V){var F=W+V*C;if(!(F<0||F>=p.inHeight))for(var N=V*g[0],E=B+F*c[1],D=0;D<p.outWidth;++D)for(var X=R+D*y.strides[2],J=D*p.strideWidth-v,H=0;H<f;++H){var Y=J+H*I;if(!(Y<0||Y>=p.inWidth))for(var T=N+H*g[1],M=E+Y*p.inChannels,K=X,P=T,z=0;z<p.inChannels;++z){for(var L=k[M+z],_=0;_<A;++_)S[K+_]+=L*Z[P+_];K+=A,P+=A}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var I2={kernelName:XF,backendName:"cpu",kernelFunc:C2};var m2={kernelName:JF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,l=r.dilations,u=r.pad,s=r.dimRoundingMode,c=r.filterShape;h$([a,o],"depthwiseConv2dNativeBackpropFilter");for(var g=GH(a.shape,c,i,l,u,s,!0),d=g.strideHeight,p=g.strideWidth,h=g.filterHeight,f=g.filterWidth,C=new JD(g.filterShape,"float32"),I=g.padInfo.left,m=g.padInfo.top,v=g.outChannels/g.inChannels,b=n.data.get(a.dataId).values,A=new JD(a.shape,a.dtype,b),y=n.data.get(o.dataId).values,k=new JD(o.shape,o.dtype,y),Z=0;Z<h;++Z)for(var S=Math.max(0,Math.ceil((m-Z)/d)),w=Math.min(g.outHeight,(g.inHeight+m-Z)/d),B=0;B<f;++B)for(var x=Math.max(0,Math.ceil((I-B)/p)),G=Math.min(g.outWidth,(g.inWidth+I-B)/p),R=0;R<g.outChannels;++R){for(var W=Math.trunc(R/v),V=R%v,F=0,N=0;N<g.batchSize;++N)for(var E=S;E<w;++E)for(var D=Z+E*d-m,X=x;X<G;++X){var J=B+X*p-I;F+=A.get(N,D,J,W)*k.get(N,E,X,R)}C.set(F,Z,B,W,V)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var v2={kernelName:HF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,l=r.strides,u=r.dilations,s=r.pad,c=r.dimRoundingMode,g=r.inputShape;h$([a,o],"depthwiseConv2DNativeBackpropInput");for(var d=WV(a.shape),p=WV(o.shape),h=GH(g,o.shape,l,u,s,c,!0),f=new JD(h.inShape,"float32"),C=f.values,I=(0,i.Z)(f.strides,3),m=I[0],v=I[1],b=I[2],A=n.data.get(a.dataId).values,y=(0,i.Z)(d,3),k=y[0],Z=y[1],S=y[2],w=n.data.get(o.dataId).values,B=(0,i.Z)(p,3),x=B[0],G=B[1],R=B[2],W=h.batchSize,V=h.filterHeight,F=h.filterWidth,N=h.inChannels,E=h.inHeight,D=h.inWidth,X=h.outChannels,J=h.outHeight,H=h.outWidth,Y=h.strideHeight,T=h.strideWidth,M=V-1-h.padInfo.top,K=F-1-h.padInfo.left,P=X/N,z=0;z<W;++z)for(var L=0;L<N;++L)for(var _=0;_<E;++_)for(var O=_-M,U=Math.max(0,Math.ceil(O/Y)),j=Math.min(J,(V+O)/Y),Q=0;Q<D;++Q){for(var q=Q-K,$=Math.max(0,Math.ceil(q/T)),ee=Math.min(H,(F+q)/T),te=0,ne=U;ne<j;++ne)for(var re=ne*Y-O,ae=$;ae<ee;++ae)for(var oe=k*z+Z*ne+S*ae,ie=x*(V-1-re)+G*(F-1-(ae*T-q))+R*L,le=0;le<P;++le){te+=A[oe+(L*P+le)]*w[ie+le]}C[m*z+v*_+b*Q+L]=te}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};var b2={kernelName:YF,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=dV(r.shape),o=n.data.get(r.dataId).values,i=GJ([a,a],r.dtype),l=i.values,u=0;u<o.length;u++)l[u*a+u]=o[u];var s=[].concat((0,Ae.Z)(r.shape),(0,Ae.Z)(r.shape));return n.makeTensorInfo(s,i.dtype,i.values)}},A2={kernelName:TF,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,l=r.pad,u=r.dilations,s=n,c=s.data.get(a.dataId).values,g=a.shape.length,d=s.data.get(o.dataId).values,p=o.shape.length,h=wH(a.shape,o.shape,i,l,"NHWC",u),f=h.batchSize,C=h.inHeight,I=h.inWidth,m=h.inChannels,v=h.outHeight,b=h.outWidth,A=h.padInfo,y=h.strideHeight,k=h.strideWidth,Z=h.filterHeight,S=h.filterWidth,w=h.dilationHeight,B=h.dilationWidth,x=h.outShape,G=dV(x),R=x.length,W=yV(a.dtype,G),V=0;V<f;++V)for(var F=0;F<v;++F)for(var N=F*y-A.top,E=0;E<b;++E)for(var D=E*k-A.left,X=0;X<m;++X){for(var J=Number.MIN_SAFE_INTEGER,H=0;H<Z;++H){var Y=N+H*w;if(Y>=0&&Y<C)for(var T=0;T<S;++T){var M=D+T*B;if(M>=0&&M<I){var K=JV([V,Y,M,X],g,WV(a.shape)),P=JV([H,T,X],p,WV(o.shape)),z=c[K]+d[P];z>J&&(J=z)}}}W[JV([V,F,E,X],R,WV(x))]=J}return{dataId:s.write(SD(W,a.dtype),x,a.dtype),shape:x,dtype:a.dtype}}},y2={kernelName:KF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,l=r.strides,u=r.pad,s=r.dilations,c=n,g=FV(a.shape,c.data.get(a.dataId).values),d=FV(o.shape,c.data.get(o.dataId).values),p=wH(a.shape,o.shape,l,u,"NHWC",s),h=p.batchSize,f=p.inHeight,C=p.inWidth,I=p.inChannels,m=p.outHeight,v=p.outWidth,b=p.padInfo,A=p.strideHeight,y=p.strideWidth,k=p.filterHeight,Z=p.filterWidth,S=p.dilationHeight,w=p.dilationWidth,B=p.outShape;uV(i.rank===B.length,(function(){return"Error in ".concat(KF,", dy ")+"must have the same rank as output ".concat(B.length,", but got ")+"".concat(i.rank)}));for(var x=FV(B,c.data.get(i.dataId).values),G=DV(o.shape,o.dtype),R=0;R<h;++R)for(var W=0;W<m;++W)for(var V=W*A-b.top,F=0;F<v;++F)for(var N=F*y-b.left,E=0;E<I;++E){for(var D=Number.MIN_SAFE_INTEGER,X=0,J=0,H=0;H<k;++H){var Y=V+H*S;if(Y>=0&&Y<f)for(var T=0;T<Z;++T){var M=N+T*w;if(M>=0&&M<C){var K=g[R][Y][M][E]+d[H][T][E];K>D&&(D=K,X=H,J=T)}}}G[X][J][E]+=x[R][W][F][E]}return{dataId:c.write(SD(G,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},k2={kernelName:MF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,l=r.strides,u=r.pad,s=r.dilations,c=n,g=FV(a.shape,c.data.get(a.dataId).values),d=FV(o.shape,c.data.get(o.dataId).values),p=wH(a.shape,o.shape,l,u,"NHWC",s),h=p.batchSize,f=p.inHeight,C=p.inWidth,I=p.inChannels,m=p.outHeight,v=p.outWidth,b=p.padInfo,A=p.strideHeight,y=p.strideWidth,k=p.filterHeight,Z=p.filterWidth,S=p.dilationHeight,w=p.dilationWidth,B=p.outShape;uV(i.rank===B.length,(function(){return"Error in ".concat(MF,", dy ")+"must have the same rank as output ".concat(B.length,", but got ")+"".concat(i.rank)}));for(var x=FV(B,c.data.get(i.dataId).values),G=DV(a.shape,a.dtype),R=0;R<h;++R)for(var W=0;W<m;++W)for(var V=W*A-b.top,F=0;F<v;++F)for(var N=F*y-b.left,E=0;E<I;++E){for(var D=Number.MIN_SAFE_INTEGER,X=V<0?0:V,J=N<0?0:N,H=0;H<k;++H){var Y=V+H*S;if(Y>=0&&Y<f)for(var T=0;T<Z;++T){var M=N+T*w;if(M>=0&&M<C){var K=g[R][Y][M][E]+d[H][T][E];K>D&&(D=K,X=Y,J=M)}}}G[R][X][J][E]+=x[R][W][F][E]}return{dataId:c.write(SD(G,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Z2=S$((function(e,t){return e*t})),S2=L$((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),w2=z$(HN,Z2,S2),B2={kernelName:HN,backendName:"cpu",kernelFunc:w2};function x2(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,l=a.axis,u=a.keepDims;h$(o,"sum");var s=(t="bool"===o.dtype?K$({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):A$({inputs:{x:o},backend:r})).shape.length,c=vV(l,t.shape),g=TY(c,s),d=c,p=t;null!=g&&(p=c0({inputs:{x:t},backend:r,attrs:{perm:g}}),d=KY(d.length,s)),YY("sum",d,p.shape.length);for(var h=JY(p.shape,d),f=(0,i.Z)(h,2),C=f[0],I=f[1],m=Y$(r,C,jD(p.dtype,"int32")),v=dV(I),b=r.data.get(m.dataId).values,A=r.data.get(p.dataId).values,y=0;y<b.length;++y){for(var k=y*v,Z=0,S=0;S<v;++S)Z+=A[k+S];b[y]=Z}if(u){var w=m;m=Q$({inputs:{x:m},backend:r,attrs:{shape:HY(m.shape,c)}}),r.disposeIntermediateTensorInfo(w)}return r.disposeIntermediateTensorInfo(t),null!=g&&r.disposeIntermediateTensorInfo(p),m}var G2={kernelName:AE,backendName:"cpu",kernelFunc:x2};var R2={kernelName:zF,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=FK(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,l=a.idDims;EK(o.length,l,r);for(var u=DK(i,l),s=u.path,c=u.steps,g=c.length,d=null,p=o.length,h=[],f=0;f<g;++f){var C,I=ta(c[f]);try{for(I.s();!(C=I.n()).done;){var m=C.value,v=NK(p,l[m]),b=v.permutationIndices,A=v.expandDims,y=void 0;XK(b)?y=r[m]:(y=c0({inputs:{x:r[m]},backend:n,attrs:{perm:b}}),h.push(y));for(var k=y.shape.slice(),Z=0;Z<A.length;++Z)k.splice(A[Z],0,1);pV(y.shape,k)||(y=Q$({inputs:{x:y},backend:n,attrs:{shape:k}}),h.push(y)),null===d?d=y:(d=w2({inputs:{a:y,b:d},backend:n}),h.push(d))}}catch(Kle){I.e(Kle)}finally{I.f()}f<g-1&&(s[f]>=0&&(d=x2({inputs:{x:d},backend:n,attrs:{axis:s[f]-(o.length-p),keepDims:!1}}),h.push(d)),p--)}for(var S=0,w=h;S<w.length;S++){var B=w[S];B!==d&&n.disposeIntermediateTensorInfo(B)}return d}};var W2={kernelName:_F,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;h$([r,a],"eluGrad");for(var o=new Float32Array(dV(a.shape)),i=n.data.get(a.dataId).values,l=n.data.get(r.dataId).values,u=0;u<i.length;++u){var s=i[u];o[u]=s>=1?l[u]:l[u]*(s+1)}return n.makeTensorInfo(a.shape,"float32",o)}},V2=S$((function(e,t){return e===t?1:0})),F2=z$(UF,V2,null,"bool"),N2={kernelName:UF,backendName:"cpu",kernelFunc:F2},E2=I$(OF,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),D2={kernelName:OF,backendName:"cpu",kernelFunc:E2},X2=F$((function(e){return Math.exp(e)})),J2=m$(jF,X2,"float32"),H2={kernelName:jF,backendName:"cpu",kernelFunc:J2};function Y2(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,l=a.shape.slice(),u=o;return o<0&&(uV(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),l.splice(u,0,1),Q$({inputs:{x:a},backend:n,attrs:{shape:l}})}var T2={kernelName:QF,backendName:"cpu",kernelFunc:Y2},M2=F$((function(e){return Math.expm1(e)})),K2=m$(qF,M2),P2={kernelName:qF,backendName:"cpu",kernelFunc:K2},z2=S$((function(e,t){return e/t})),L2=z$(PF,z2),_2={kernelName:PF,backendName:"cpu",kernelFunc:L2},O2=S$((function(e,t){return e-t})),U2=L$((function(e,t,n,r){return{real:e-n,imag:t-r}})),j2=z$(DE,O2,U2),Q2={kernelName:DE,backendName:"cpu",kernelFunc:j2};function q2(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),l=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,s=[a,o],c=dV(s),g=AV("float32",c),d=AV("float32",c),p=0;p<a;p++){for(var h=D0({inputs:{x:l},backend:n,attrs:{begin:[p,0],size:[1,o]}}),f=D0({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,o]}}),C=J$({inputs:{real:h,imag:f},backend:n}),I=$2(C,t,n),m=BK(I.real,I.imag),v=0;v<o;v++){var b=xK(m,v);g[p*o+v]=b.real,d[p*o+v]=b.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C)}var A=n.makeTensorInfo(s,"float32",g),y=n.makeTensorInfo(s,"float32",d),k=J$({inputs:{real:A,imag:y},backend:n});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(y),k}function $2(e,t,n){var r=dV(e.shape),a=n.data.get(e.dataId),o=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((I=r)&I-1)){var l=e1(o,i,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var s=n.makeTensorInfo(u,"float32",l.real),c=n.makeTensorInfo(u,"float32",l.imag),g=n.makeTensorInfo([],"float32",ZD(r,"float32")),d=A$({inputs:{x:g},backend:n}),p=_2.kernelFunc({inputs:{a:s,b:g},backend:n}),h=_2.kernelFunc({inputs:{a:c,b:d},backend:n}),f=n.data.get(p.dataId).values,C=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:f,imag:C}}return l}var I,m=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,l=0;l<t;l++){var u=RK(a*l,t,n),s=xK(e,l);o+=s.real*u.real-s.imag*u.imag,i+=s.real*u.imag+s.imag*u.real}n&&(o/=t,i/=t),GK(r,o,i,a)}return r}(BK(o,i),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(m)}function e1(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=BK(e,t),i=n/2,l=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(o),u=l.real,s=l.imag,c=[u.length],g=a.makeTensorInfo(c,"float32",u),d=a.makeTensorInfo(c,"float32",s),p=J$({inputs:{real:g,imag:d},backend:a}),h=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(o),f=h.real,C=h.imag,I=[f.length],m=a.makeTensorInfo(I,"float32",f),v=a.makeTensorInfo(I,"float32",C),b=J$({inputs:{real:m,imag:v},backend:a}),A=e1(u,s,i,r,a),y=A.real,k=A.imag,Z=[y.length],S=a.makeTensorInfo(Z,"float32",y),w=a.makeTensorInfo(Z,"float32",k),B=J$({inputs:{real:S,imag:w},backend:a}),x=e1(f,C,i,r,a),G=x.real,R=x.imag,W=[G.length],V=a.makeTensorInfo(W,"float32",G),F=a.makeTensorInfo(W,"float32",R),N=J$({inputs:{real:V,imag:F},backend:a}),E=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}(n,r),D=[E.real.length],X=a.makeTensorInfo(D,"float32",E.real),J=a.makeTensorInfo(D,"float32",E.imag),H=J$({inputs:{real:X,imag:J},backend:a}),Y=w2({inputs:{a:H,b:N},backend:a}),T=U$({inputs:{a:B,b:Y},backend:a}),M=j2({inputs:{a:B,b:Y},backend:a}),K=T$({inputs:{input:T},backend:a}),P=T$({inputs:{input:M},backend:a}),z=j0({inputs:{input:T},backend:a}),L=j0({inputs:{input:M},backend:a}),_=q0({inputs:[K,P],backend:a,attrs:{axis:0}}),O=q0({inputs:[z,L],backend:a,attrs:{axis:0}}),U=a.data.get(_.dataId).values,j=a.data.get(O.dataId).values;return a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(J),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(Y),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(O),{real:U,imag:j}}var t1={kernelName:$F,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=dV(r.shape),o=r.shape[r.shape.length-1],i=Q$({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),l=q2(i,!1,n),u=Q$({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}};function n1(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||xV(a),i=yV(o,dV(r));return function(e,t,n){e.fill(t)}(i,a),t.makeTensorInfo(r,o,i)}var r1={kernelName:eN,backendName:"cpu",kernelFunc:n1};var a1={kernelName:tN,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,o=AV(r.dtype,dV(r.shape)),l=(0,i.Z)(r.shape,4),u=l[0],s=l[1],c=l[2],g=l[3],d=a.data.get(r.dataId).values,p=0;p<u;p++)for(var h=p*c*s*g,f=0;f<s;f++)for(var C=f*(c*g),I=0;I<c;I++)for(var m=I*g,v=0;v<g;v++){var b=Math.round(c-I-1),A=h+C+m+v,y=d[A];if(b>=0&&b<c)y=d[h+C+b*g+v];o[A]=y}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},o1=F$((function(e){return Math.floor(e)})),i1=m$(nN,o1),l1={kernelName:nN,backendName:"cpu",kernelFunc:i1},u1=S$((function(e,t){return Math.floor(e/t)})),s1=z$(rN,u1,null,"int32"),c1={kernelName:rN,backendName:"cpu",kernelFunc:s1};var g1={kernelName:jE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,l=t.preluActivationWeights,u=r.strides,s=r.pad,c=r.dataFormat,g=r.dilations,d=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,f=e2({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:s,dataFormat:c,dilations:g,dimRoundingMode:d}});if(i){var C=f;f=U$({inputs:{a:f,b:i},backend:n}),n.disposeIntermediateTensorInfo(C)}if(p){var I=f;f=X$(n,f,p,l,h),n.disposeIntermediateTensorInfo(I)}return f}};var d1={kernelName:QE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,l=t.preluActivationWeights,u=r.strides,s=r.pad,c=r.dataFormat,g=r.dilations,d=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,f=C2({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:s,dataFormat:c,dilations:g,dimRoundingMode:d}});if(i){var C=f;f=U$({inputs:{a:f,b:i},backend:n}),n.disposeIntermediateTensorInfo(C)}if(p){var I=f;f=X$(n,f,p,l,h),n.disposeIntermediateTensorInfo(I)}return f}};function p1(e,t,n,r,a,o,i,l,u){for(var s=GJ([r,o],n),c=0;c<r;c++){for(var g=[],d=0,p=0;p<a;p++){var h=e[c*a+p];d+=h*i[p],g.push(h)}if(d<0||d>=u/o)throw new Error("Invalid indices: ".concat(g," does not index into ").concat(l));for(var f=0;f<o;f++)s.values[c*o+f]=t.get.apply(t,(0,Ae.Z)(t.indexToLoc(d*o+f)))}return s}var h1={kernelName:iN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=dV(r.shape),l=a.shape,u=l[l.length-1],s=IK(r,a),c=(0,i.Z)(s,4),g=c[0],d=c[1],p=c[2],h=c[3];if(0===d)return n.makeTensorInfo(g,r.dtype,[]);var f=p1(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,d,u,p,h,r.shape,o);return n.makeTensorInfo(g,r.dtype,f.values)}};function f1(e,t,n){for(var r=GJ(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],l=o[2],u=t.locToIndex([i,l]);o[2]=t.values[u];var s=e.locToIndex(o);0<=s&&s<e.values.length&&(r.values[a]=e.values[s])}return r}var C1={kernelName:oN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,l=r.batchDims;h$([a,o],"gatherV2");for(var u=vV(i,a.shape)[0],s=n.data.get(o.dataId).values,c=a.shape[u],g=function(e){var t=s[e];uV(t<=c-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(c-1,"]")}))},d=0;d<s.length;++d)g(d);var p=l;null==l&&(p=0);var h=dV(o.shape),f=zK(a,o,u,p),C=Q$({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),I=Q$({inputs:{x:o},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),m=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],v=n.bufferSync(I),b=f1(n.bufferSync(C),v,m);return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(I),n.makeTensorInfo(f.outputShape,b.dtype,b.values)}},I1=S$((function(e,t){return e>t?1:0})),m1=z$(lN,I1,null,"bool"),v1={kernelName:lN,backendName:"cpu",kernelFunc:m1},b1=S$((function(e,t){return e>=t?1:0})),A1=z$(uN,b1,null,"bool"),y1={kernelName:uN,backendName:"cpu",kernelFunc:A1};var k1={kernelName:cN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=dV(r.shape),o=r.shape[r.shape.length-1],i=Q$({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),l=q2(i,!0,n),u=Q$({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}},Z1=I$(dN,(function(e){return Number.isFinite(e)?1:0}),"bool"),S1={kernelName:dN,backendName:"cpu",kernelFunc:Z1},w1=I$(pN,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),B1={kernelName:pN,backendName:"cpu",kernelFunc:w1},x1=I$(hN,(function(e){return Number.isNaN(e)?1:0}),"bool"),G1={kernelName:hN,backendName:"cpu",kernelFunc:x1},R1=S$((function(e,t){return e<t?1:0})),W1=z$(CN,R1,null,"bool"),V1={kernelName:CN,backendName:"cpu",kernelFunc:W1},F1=S$((function(e,t){return e<=t?1:0})),N1=z$(IN,F1,null,"bool"),E1={kernelName:IN,backendName:"cpu",kernelFunc:N1};function D1(e,t,n){var r=(t-e)/(n-1),a=EV(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}var X1={kernelName:mN,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=D1(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},J1=F$((function(e){return Math.log(e)})),H1=m$(vN,J1),Y1={kernelName:vN,backendName:"cpu",kernelFunc:H1},T1=I$(bN,(function(e){return Math.log1p(e)})),M1={kernelName:bN,backendName:"cpu",kernelFunc:T1},K1=S$((function(e,t){return e&&t})),P1=z$(AN,K1,null,"bool"),z1={kernelName:AN,backendName:"cpu",kernelFunc:P1},L1=I$(yN,(function(e){return e?0:1}),"bool"),_1={kernelName:yN,backendName:"cpu",kernelFunc:L1},O1=S$((function(e,t){return e||t})),U1=z$(kN,O1,null,"bool"),j1={kernelName:kN,backendName:"cpu",kernelFunc:U1};var Q1={kernelName:ZN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,l=r.alpha,u=r.beta;h$(a,"LRN");var s=a.shape[3],c=s-1,g=n.data.get(a.dataId).values,d=dV(a.shape),p=new Float32Array(d);function h(e){for(var t=e%s,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,c),a=0;n<=r;n++){var i=g[n];a+=i*i}return a}for(var f=0;f<d;f++){var C=h(f),I=g[f]*Math.pow(i+l*C,-u);p[f]=I}return n.makeTensorInfo(a.shape,a.dtype,p)}};var q1={kernelName:SN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,l=r.depthRadius,u=r.bias,s=r.alpha,c=r.beta;h$(i,"LRNGrad");for(var g=dV(i.shape),d=i.shape[3],p=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,C=new Float32Array(g),I=g,m=0;m<I;m++){for(var v=m%d,b=m-v+Math.max(0,v-l),A=m-v+Math.min(d,v+l+1),y=0,k=b;k<A;k++)y+=Math.pow(h[k],2);y=s*y+u;for(var Z=b;Z<A;Z++){var S=-2*s*c*h[Z]*f[m]/y;m===Z&&(S+=Math.pow(y,-c)),S*=p[m],C[Z]+=S}}return n.makeTensorInfo(i.shape,a.dtype,C)}};function $1(e,t,n,r){for(var a=AV(r,dV(n)),o=0;o<a.length;++o){for(var i=o*t,l=e[i],u=0;u<t;++u){var s=e[i+u];(Number.isNaN(s)||s>l)&&(l=s)}a[o]=l}return a}function e3(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,l=r.keepDims,u=n,s=a.shape,c=s.length,g=vV(o,s),d=g,p=TY(d,c),h=u.data.get(a.dataId).values;if(null!=p){for(var f=new Array(c),C=0;C<f.length;C++)f[C]=s[p[C]];h=s0(h,s,a.dtype,p,f),d=KY(d.length,c),s=f}h$(a,"max"),YY("max",d,c);var I=JY(s,d),m=(0,i.Z)(I,2),v=m[0],b=$1(h,dV(m[1]),v,a.dtype),A=u.write(b,v,a.dtype),y=v;l&&(y=HY(v,g));return{dataId:A,shape:y,dtype:a.dtype}}var t3={kernelName:wN,backendName:"cpu",kernelFunc:e3},n3=S$((function(e,t){return Math.max(e,t)})),r3=z$(BN,n3),a3={kernelName:BN,backendName:"cpu",kernelFunc:r3};var o3={kernelName:xN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;h$(a,"maxPool");var o=r.filterSize,i=r.strides,l=r.pad,u=r.dimRoundingMode;uV(HH(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var s,c=BH(a.shape,o,i,1,l,u);if(1===c.filterWidth&&1===c.filterHeight&&pV(c.inShape,c.outShape))s=A$({inputs:{x:a},backend:n});else{var g=n.data.get(a.dataId).values,d=WV(a.shape),p=B0(g,a.shape,a.dtype,d,c,"max");s=n.makeTensorInfo(c.outShape,a.dtype,p.values)}return s}};var i3={kernelName:RN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,l=r.pad,u=r.dimRoundingMode,s=r.dataFormat;h$(a,"maxPool3d");var c=xH(a.shape,o,i,1,l,u,s),g=G0(n.data.get(a.dataId).values,a.shape,a.dtype,WV(a.shape),c,"max");return n.makeTensorInfo(g.shape,"float32",g.values)}};var l3={kernelName:WN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,l=r.strides,u=r.pad,s=r.dimRoundingMode;h$([a,o],"maxPool3DGrad");for(var c=xH(o.shape,i,l,1,u,s),g=function(e,t){for(var n=GJ(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,l=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,g=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,f=0;f<t.batchSize;++f)for(var C=0;C<t.inChannels;++C)for(var I=0;I<t.outDepth;++I){for(var m=I*r-d,v=m;v<0;)v+=i;for(var b=Math.min(t.inDepth,s+m),A=0;A<t.outHeight;++A){for(var y=A*a-p,k=y;k<0;)k+=l;for(var Z=Math.min(t.inHeight,c+y),S=0;S<t.outWidth;++S){for(var w=S*o-h,B=w;B<0;)B+=u;for(var x=Math.min(t.inWidth,g+w),G=Number.NEGATIVE_INFINITY,R=-1,W=v;W<b;W+=i)for(var V=W-m,F=k;F<Z;F+=l)for(var N=F-y,E=B;E<x;E+=u){var D=E-w,X=e.get(f,W,F,E,C);X>=G&&(G=X,R=V*c*g+N*c+D)}n.set(R,f,I,A,S,C)}}}return n}(n.bufferSync(o),c),d=c.strideDepth,p=c.strideHeight,h=c.strideWidth,f=c.dilationDepth,C=c.dilationHeight,I=c.dilationWidth,m=c.effectiveFilterDepth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,A=m-1-c.padInfo.front,y=b-1-c.padInfo.left,k=v-1-c.padInfo.top,Z=GJ(o.shape,"float32"),S=n.bufferSync(a),w=0;w<c.batchSize;++w)for(var B=0;B<c.inChannels;++B)for(var x=0;x<c.inDepth;++x)for(var G=0;G<c.inHeight;++G)for(var R=0;R<c.inWidth;++R){for(var W=x-A,V=G-k,F=R-y,N=0,E=0;E<m;E+=f){var D=(W+E)/d;if(!(D<0||D>=c.outDepth||Math.floor(D)!==D))for(var X=0;X<v;X+=C){var J=(V+X)/p;if(!(J<0||J>=c.outHeight||Math.floor(J)!==J))for(var H=0;H<b;H+=I){var Y=(F+H)/h;if(!(Y<0||Y>=c.outWidth||Math.floor(Y)!==Y)){var T=m*v*b-1-g.get(w,D,J,Y,B)===E*v*b+X*b+H?1:0;if(0!==T)N+=S.get(w,D,J,Y,B)*T}}}}Z.set(N,w,x,G,R,B)}return n.makeTensorInfo(Z.shape,Z.dtype,Z.values)}};var u3={kernelName:GN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;h$([o,t.output],"maxPoolGrad");for(var l=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,g=BH(i.shape,l,u,1,s,c),d=n.data.get(i.dataId).values,p=GJ(g.outShape,i.dtype,x0(d,i.shape,i.dtype,g).values),h=g.strideHeight,f=g.strideWidth,C=g.dilationHeight,I=g.dilationWidth,m=g.effectiveFilterHeight,v=g.effectiveFilterWidth,b=v-1-g.padInfo.left,A=m-1-g.padInfo.top,y=GJ(i.shape,"float32"),k=n.data.get(a.dataId).values,Z=GJ(a.shape,"float32",k),S=0;S<g.batchSize;++S)for(var w=0;w<g.inChannels;++w)for(var B=0;B<g.inHeight;++B)for(var x=0;x<g.inWidth;++x){for(var G=B-A,R=x-b,W=0,V=0;V<m;V+=C){var F=(G+V)/h;if(!(F<0||F>=g.outHeight||Math.floor(F)!==F))for(var N=0;N<v;N+=I){var E=(R+N)/f;if(!(E<0||E>=g.outWidth||Math.floor(E)!==E)){var D=m*v-1-p.get(S,F,E,w)===V*v+N?1:0;if(0!==D)W+=Z.get(S,F,E,w)*D}}}y.set(W,S,B,x,w)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var s3={kernelName:VN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,l=n.strides,u=n.pad,s=n.includeBatchInIndex,c=r;h$(a,"MaxPoolWithArgmax");var g=c.data.get(a.dataId).values,d=BH(a.shape,o,l,[1,1],u),p=function(e,t,n,r,a){var o=B0(e,0,n,WV(t),a,"max"),i=x0(e,t,n,a,!0,r);return[o.values,i.values]}(g,a.shape,a.dtype,s,d),h=(0,i.Z)(p,2),f=h[0],C=h[1],I=c.write(f,d.outShape,a.dtype),m=c.write(C,d.outShape,a.dtype);return[{dataId:I,shape:d.outShape,dtype:a.dtype},{dataId:m,shape:d.outShape,dtype:"int32"}]}};var c3={kernelName:FN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,l=vV(o,a.shape),u=dV(JY(a.shape,l)[1]),s=[],c=n.makeTensorInfo([],"float32",new Float32Array([u]));s.push(c);var g=K$({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});s.push(g);var d=L2({inputs:{a:g,b:c},backend:n});s.push(d);var p=x2({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:i}});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),p}};var g3={kernelName:NN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,l=r.keepDims;h$(a,"min");var u=vV(o,a.shape),s=u,c=TY(s,a.shape.length),g=a;null!=c&&(g=c0({inputs:{x:a},backend:n,attrs:{perm:c}}),s=KY(s.length,a.shape.length)),YY("min",s,g.shape.length);for(var d=JY(g.shape,s),p=(0,i.Z)(d,2),h=p[0],f=dV(p[1]),C=EV(dV(h),g.dtype),I=n.data.get(g.dataId).values,m=0;m<C.length;++m){for(var v=m*f,b=I[v],A=0;A<f;++A){var y=I[v+A];(Number.isNaN(y)||y<b)&&(b=y)}C[m]=b}null!=c&&n.disposeIntermediateTensorInfo(g);var k=n.makeTensorInfo(h,g.dtype,C);if(l){var Z=Q$({inputs:{x:k},backend:n,attrs:{shape:HY(h,u)}});return n.disposeIntermediateTensorInfo(k),Z}return k}},d3=S$((function(e,t){return Math.min(e,t)})),p3=z$(EN,d3),h3={kernelName:EN,backendName:"cpu",kernelFunc:p3};var f3={kernelName:DN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;h$(a,"mirrorPad");for(var l=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),s=o.map((function(e,t){return e[0]+a.shape[t]})),c="reflect"===i?0:1,g=n.data.get(a.dataId).values,d=a.shape.length,p=WV(a.shape),h=dV(l),f=l.length,C=WV(l),I=AV(a.dtype,h),m=0;m<h;m++){for(var v=HV(m,f,C),b=0;b<f;b++)v[b]<u[b]?v[b]=2*u[b]-v[b]-c:v[b]>=s[b]&&(v[b]=2*(s[b]-1)-v[b]+c);v=v.map((function(e,t){return e-u[t]}));var A=JV(v,d,p);I[m]=g[A]}return{dataId:n.write(I,l,a.dtype),shape:l,dtype:a.dtype}}},C3=S$((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),I3=z$(XN,C3),m3={kernelName:XN,backendName:"cpu",kernelFunc:I3};function v3(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,l=o;if(-1===l&&(l=i-1),l!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(l));var u=vV([l],a.shape),s=e3({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=HY(s.shape,u),g=Q$({inputs:{x:s},backend:n,attrs:{shape:c}}),d=j2({inputs:{a:a,b:g},backend:n}),p=J2({inputs:{x:d},backend:n}),h=x2({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),f=Q$({inputs:{x:h},backend:n,attrs:{shape:c}}),C=L2({inputs:{a:p,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),C}var b3={kernelName:ZE,backendName:"cpu",kernelFunc:v3};var A3={kernelName:JN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,l=r.normalized;h$(a,"multinomial");for(var u=l?a:v3({inputs:{logits:a},backend:n,attrs:{dim:-1}}),s=u.shape[0],c=u.shape[1],g=n.data.get(u.dataId).values,d=[s,o],p=EV(dV(d),"int32"),h=0;h<s;++h){var f=h*c,C=new Float32Array(c-1);C[0]=g[f];for(var I=1;I<C.length;++I)C[I]=C[I-1]+g[f+I];for(var m=eT.alea(i.toString()),v=h*o,b=0;b<o;++b){var A=m();p[v+b]=C.length;for(var y=0;y<C.length;y++)if(A<C[y]){p[v+b]=y;break}}}return l||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",p)}};function y3(e,t,n){var r=ZD(-1,n);return Z2([],t,r,e,n)}var k3={kernelName:YN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;h$(r,"neg");var a=y3(n.data.get(r.dataId).values,r.shape,r.dtype),o=(0,i.Z)(a,2),l=o[0],u=o[1];return n.makeTensorInfo(u,r.dtype,l)}},Z3=lM;var S3={kernelName:MN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,l=r.iouThreshold,u=r.scoreThreshold;h$(a,"NonMaxSuppression");var s=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,g=Z3(s,c,i,l,u).selectedIndices;return n.makeTensorInfo([g.length],"int32",new Int32Array(g))}},w3=uM;var B3={kernelName:KN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,l=r.iouThreshold,u=r.scoreThreshold,s=r.padToMaxOutputSize;h$(a,"NonMaxSuppressionPadded");var c=n.data.get(a.dataId).values,g=n.data.get(o.dataId).values,d=w3(c,g,i,l,u,s),p=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},x3=sM;var G3={kernelName:PN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,l=r.iouThreshold,u=r.scoreThreshold,s=r.softNmsSigma;h$(a,"NonMaxSuppressionWithScore");var c=n.data.get(a.dataId).values,g=n.data.get(o.dataId).values,d=x3(c,g,i,l,u,s),p=d.selectedIndices,h=d.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},R3=S$((function(e,t){return e!==t?1:0})),W3=z$(TN,R3,null,"bool"),V3={kernelName:TN,backendName:"cpu",kernelFunc:W3};var F3={kernelName:LN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,l=r.offValue;h$(a,"oneHot");var u=dV(a.shape),s=new Float32Array(u*o);s.fill(l);for(var c=n.data.get(a.dataId).values,g=0;g<u;++g)c[g]>=0&&c[g]<o&&(s[g*o+c[g]]=i);return n.makeTensorInfo([].concat((0,Ae.Z)(a.shape),[o]),"int32",s)}};function N3(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=T$({inputs:{input:r},backend:n}),o=N3({inputs:{x:a},backend:n}),i=j0({inputs:{input:r},backend:n}),l=N3({inputs:{x:i},backend:n}),u=J$({inputs:{real:o,imag:l},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}return n1({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var E3={kernelName:LE,backendName:"cpu",kernelFunc:N3};var D3={kernelName:zN,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=T$({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),l=j0({inputs:{input:a},backend:r}),u=N3({inputs:{x:l},backend:r}),s=J$({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(u),s}return n1({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function X3(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Y2({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){sV(a,e.shape,"All tensors passed to stack must have matching shapes"),uV(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],l=q0({inputs:t.map((function(e){var t=Y2({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}var J3={kernelName:_N,backendName:"cpu",kernelFunc:X3};var H3={kernelName:ON,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;h$(a,"pad");var l=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),s=n.data.get(a.dataId).values,c=dV(a.shape),g=a.shape.length,d=WV(a.shape),p=dV(l),h=l.length,f=WV(l),C=AV(a.dtype,p);0!==i&&C.fill(i);for(var I=0;I<c;I++){C[JV(HV(I,g,d).map((function(e,t){return e+u[t]})),h,f)]=s[I]}return{dataId:n.write(C,l,a.dtype),shape:l,dtype:a.dtype}}},Y3=S$((function(e,t){return Math.pow(e,t)})),T3=z$(UN,Y3),M3={kernelName:UN,backendName:"cpu",kernelFunc:T3};function K3(e,t,n,r){for(var a=JY(e,r),o=(0,i.Z)(a,2),l=o[0],u=o[1],s=jD(t,"int32"),c=EV(dV(l),s),g=dV(u),d=0;d<c.length;++d){for(var p=d*g,h=1,f=0;f<g;++f)h*=n[p+f];c[d]=h}return{outVals:c,outShape:l,outDtype:s}}var P3={kernelName:QN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;h$(a,"prod");var l=a.shape.length,u=vV(o,a.shape),s=TY(u,l),c=u,g=a,d=[];null!=s&&(g=c0({inputs:{x:a},backend:n,attrs:{perm:s}}),d.push(g),c=KY(c.length,l));var p=n.data.get(g.dataId).values,h=K3(g.shape,g.dtype,p,c),f=h.outVals,C=h.outShape,I=h.outDtype,m=C;return i&&(m=HY(C,u)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(m,I,f)}};function z3(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return EV(0,r);var a=EV(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}var L3={kernelName:qN,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=z3(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},_3=I$(eE,(function(e){return 1/e})),O3={kernelName:eE,backendName:"cpu",kernelFunc:_3};var U3={kernelName:oE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,l=r.halfPixelCenters,u=r.size;h$(a,"resizeBilinear");for(var s=WV(a.shape),c=(0,i.Z)(u,2),g=c[0],d=c[1],p=(0,i.Z)(a.shape,4),h=p[0],f=p[1],C=p[2],I=p[3],m=n.data.get(a.dataId).values,v=new Float32Array(dV([h,g,d,I])),b=[o&&g>1?f-1:f,o&&d>1?C-1:C],A=[o&&g>1?g-1:g,o&&d>1?d-1:d],y=0,k=b[0]/A[0],Z=b[1]/A[1],S=0;S<h;S++)for(var w=0;w<g;w++){var B=void 0;B=l?k*(w+.5)-.5:k*w;for(var x=Math.max(0,Math.floor(B)),G=B-x,R=Math.min(f-1,Math.ceil(B)),W=S*s[0]+x*s[1],V=S*s[0]+R*s[1],F=0;F<d;F++){var N=void 0;N=l?Z*(F+.5)-.5:Z*F;for(var E=Math.max(0,Math.floor(N)),D=N-E,X=Math.min(C-1,Math.ceil(N)),J=W+E*s[2],H=V+E*s[2],Y=W+X*s[2],T=V+X*s[2],M=0;M<I;M++){var K=m[J+M],P=m[H+M],z=K+(m[Y+M]-K)*D,L=z+(P+(m[T+M]-P)*D-z)*G;v[y++]=L}}}return n.makeTensorInfo([h,g,d,I],"float32",v)}};var j3={kernelName:iE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,l=r.alignCorners;h$([o,a],"resizeBilinearGrad");for(var u=WV(a.shape),s=(0,i.Z)(a.shape,4),c=s[0],g=s[1],d=s[2],p=s[3],h=(0,i.Z)(o.shape,3),f=h[1],C=h[2],I=new Float32Array(c*g*d*p),m=[l&&f>1?g-1:g,l&&C>1?d-1:d],v=[l&&f>1?f-1:f,l&&C>1?C-1:C],b=m[0]/v[0],A=m[1]/v[1],y=n.data.get(o.dataId).values,k=0,Z=0;Z<c;Z++)for(var S=Z*u[0],w=0;w<f;w++)for(var B=w*b,x=Math.floor(B),G=Math.min(Math.ceil(B),g-1),R=S+x*u[1],W=S+G*u[1],V=B-x,F=1-V,N=0;N<C;N++)for(var E=N*A,D=Math.floor(E),X=Math.min(Math.ceil(E),d-1),J=E-D,H=1-J,Y=R+D*u[2],T=R+X*u[2],M=W+D*u[2],K=W+X*u[2],P=F*H,z=F*J,L=V*H,_=V*J,O=0;O<p;O++){var U=y[k++];I[Y+O]+=U*P,I[T+O]+=U*z,I[M+O]+=U*L,I[K+O]+=U*_}return n.makeTensorInfo([c,d,g,p],"float32",I)}};var Q3={kernelName:rE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,l=r.halfPixelCenters,u=r.size;h$(a,"resizeNearestNeighbor");for(var s=WV(a.shape),c=(0,i.Z)(u,2),g=c[0],d=c[1],p=(0,i.Z)(a.shape,4),h=p[0],f=p[1],C=p[2],I=p[3],m=n.data.get(a.dataId).values,v=new Float32Array(h*g*d*I),b=[o&&g>1?f-1:f,o&&d>1?C-1:C],A=[o&&g>1?g-1:g,o&&d>1?d-1:d],y=b[0]/A[0],k=b[1]/A[1],Z=0,S=0;S<h;S++)for(var w=S*s[0],B=0;B<g;B++){var x=l?y*(B+.5):y*B,G=Math.min(f-1,o?Math.round(x):Math.floor(x));l&&(G=Math.max(0,G));for(var R=w+G*s[1],W=0;W<d;W++){var V=l?k*(W+.5):k*W,F=Math.min(C-1,o?Math.round(V):Math.floor(V));l&&(F=Math.max(0,F));for(var N=R+F*s[2],E=0;E<I;E++){var D=m[N+E];v[Z++]=D}}}return n.makeTensorInfo([h,g,d,I],a.dtype,v)}};var q3={kernelName:aE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,l=r.alignCorners;h$([o,a],"resizeNearestNeighborGrad");for(var u=WV(a.shape),s=WV(o.shape),c=(0,i.Z)(a.shape,4),g=c[0],d=c[1],p=c[2],h=c[3],f=(0,i.Z)(o.shape,3),C=f[1],I=f[2],m=new Float32Array(g*d*p*h),v=n.data.get(o.dataId).values,b=[l&&C>1?d-1:d,l&&I>1?p-1:p],A=[l&&C>1?C-1:C,l&&I>1?I-1:I],y=b[0]/A[0],k=b[1]/A[1],Z=1/y,S=1/k,w=2*Math.ceil(Z)+2,B=2*Math.ceil(S)+2,x=0;x<g;x++)for(var G=x*u[0],R=0;R<d;R++)for(var W=G+R*u[1],V=Math.floor(R*Z),F=Math.floor(V-w/2),N=0;N<p;N++)for(var E=W+N*u[2],D=Math.floor(N*S),X=Math.floor(D-B/2),J=0;J<h;J++){for(var H=0,Y=0;Y<w;Y++){var T=Y+F;if(!(T<0||T>=C)){var M=G+T*s[1],K=T*y;if(R===Math.min(d-1,l?Math.round(K):Math.floor(K)))for(var P=0;P<B;P++){var z=P+X;if(!(z<0||z>=I)){var L=M+z*s[2],_=z*k;N===Math.min(p-1,l?Math.round(_):Math.floor(_))&&(H+=v[L+J])}}}}m[E+J]=H}return n.makeTensorInfo(a.shape,a.dtype,m)}};var $3={kernelName:uE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;h$(a,"reverse");var i=a.shape.length,l=vV(o,a.shape);if(0===i)return A$({inputs:{x:a},backend:n});for(var u=new JD(a.shape,a.dtype),s=n.bufferSync(a),c=function(e){var t=u.indexToLoc(e),n=t.slice();l.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[s.get.apply(s,(0,Ae.Z)(n))].concat((0,Ae.Z)(t)))},g=0;g<u.size;g++)c(g);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},e5={kernelName:OE,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,l=n.fillValue,u=n.center,s=r,c=AV(a.dtype,dV(a.shape)),g=(0,i.Z)(a.shape,4),d=g[0],p=g[1],h=g[2],f=g[3],C=gK(u,p,h),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=Math.sin(o),A=Math.cos(o),y=s.data.get(a.dataId).values,k=0;k<d;k++)for(var Z=k*h*p*f,S=0;S<p;S++)for(var w=S*(h*f),B=0;B<h;B++)for(var x=B*f,G=0;G<f;G++){var R=[d,S,B,G],W=R[2],V=R[1],F=(W-m)*A-(V-v)*b,N=(W-m)*b+(V-v)*A;F=Math.round(F+m),N=Math.round(N+v);var E=l;if("number"!==typeof l&&(E=3===G?255:l[G]),F>=0&&F<h&&N>=0&&N<p)E=y[Z+N*(h*f)+F*f+G];c[Z+w+x+G]=E}return{dataId:s.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},t5=I$(sE,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),n5={kernelName:sE,backendName:"cpu",kernelFunc:t5},r5=F$((function(e){return 1/Math.sqrt(e)})),a5=m$(cE,r5),o5={kernelName:cE,backendName:"cpu",kernelFunc:a5};function i5(e,t,n,r,a,o,i,l,u,s){var c=[r/a,a],g=e.values,d=t.values;if(0===r)return GJ(n,t.dtype);var p=GJ(c,t.dtype);p.values.fill(u);for(var h=0;h<o;h++){for(var f=[],C=0,I=0;I<i;I++){var m=g[h*i+I];f.push(m),C+=m*l[I]}if(C<0||C>=r/a)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(n));for(var v=0;v<a;v++)s?p.values[C*a+v]+=d[h*a+v]:p.values[C*a+v]=0===t.rank?d[0]:d[h*a+v]}return p}var l5={kernelName:gE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,l=mK(0,a,i),u=l.sliceRank,s=l.numUpdates,c=l.sliceSize,g=l.strides,d=l.outputSize,p=i5(n.bufferSync(a),n.bufferSync(o),i,d,c,s,u,g,0,!0);return n.makeTensorInfo(i,p.dtype,p.values)}};var u5={kernelName:dE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;h$([r,a,o],"select");for(var i=r.shape.length,l=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,s=n.data.get(o.dataId).values,c=jD(a.dtype,o.dtype),g=EV(dV(a.shape),c),d=0,p=0===i||i>1||1===a.shape.length?1:dV(a.shape.slice(1)),h=0;h<l.length;h++)for(var f=0;f<p;f++)1===l[h]?g[d++]=u[h]:g[d++]=s[h];return n.makeTensorInfo(a.shape,c,g)}},s5=I$(pE,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),c5={kernelName:pE,backendName:"cpu",kernelFunc:s5},g5=I$(IE,(function(e){return e<0?-1:e>0?1:0})),d5={kernelName:IE,backendName:"cpu",kernelFunc:g5},p5=I$(fE,(function(e){return Math.sin(e)})),h5={kernelName:fE,backendName:"cpu",kernelFunc:p5},f5=I$(CE,(function(e){return Math.sinh(e)})),C5={kernelName:CE,backendName:"cpu",kernelFunc:f5},I5=Math.log(1.1920928955078125e-7)+2,m5=I$(vE,(function(e){var t=e>-I5,n=e<I5,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),v5={kernelName:vE,backendName:"cpu",kernelFunc:m5};var b5={kernelName:yE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;h$([a],"spaceToBatchND");var l=dV(o),u=[[0,0]];u.push.apply(u,(0,Ae.Z)(i));for(var s=1+o.length;s<a.shape.length;++s)u.push([0,0]);var c=H3.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),g=dK(c.shape,o,l,!1),d=pK(g.length,o.length,!1),p=hK(c.shape,o,l,!1),h=Q$({inputs:{x:c},backend:n,attrs:{shape:g}}),f=c0({inputs:{x:h},backend:n,attrs:{perm:d}}),C=Q$({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),C}};function A5(e,t,n,r,a,o,i){var l=t[0],u=o[0],s=new Array(u),c=new Array(l),g=t[1];if(0===u){if(0!==l)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(l));return[yV(n,0),[0,g],yV(a,0),s,c]}for(var d=!0,p=0,h=new Array(u).fill(0),f=0;f<l;++f){var C=e[f*g];if(C<0)throw new Error(YK(f,C));if(C>=u)throw new Error(TK(f,C,u));++h[C],d=d&&C>=p,p=C}for(var I=!0,m=0;m<u;++m){var v=0===h[m];s[m]=v,I=I&&!v,h[m]=Math.max(h[m],1),m>0&&(h[m]+=h[m-1])}if(I&&d){for(var b=e,A=r,y=0;y<l;++y)c[y]=y;return[b,[l,g],A,s,c]}for(var k=h[u-1],Z=yV(n,k*g),S=yV(a,k),w=new Array(u).fill(0),B=0;B<l;++B){var x=e[B*g],G=w[x],R=(0===x?0:h[x-1])+G;w[x]++;for(var W=0;W<g;++W)Z[R*g+W]=e[B*g+W];S[R]=r[B],c[B]=R}for(var V=0;V<u;++V){if(0===w[V]){var F=0===V?0:h[V-1];Z[F*g+0]=V;for(var N=1;N<g;++N)Z[F*g+N]=0;S[F]=i}}return[Z,[k,g],S,s,c]}var y5={kernelName:SE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,l=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==l.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(l.shape));var u=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,g=n.data.get(l.dataId).values[0],d=A5(u,r.shape,r.dtype,s,a.dtype,c,g),p=(0,i.Z)(d,5),h=p[0],f=p[1],C=p[2],I=p[3],m=p[4];return[n.makeTensorInfo(f,r.dtype,h),n.makeTensorInfo([f[0]],a.dtype,C),n.makeTensorInfo([I.length],"bool",new Uint8Array(I.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function k5(e,t,n,r,a){for(var o,i=dV(r),l=t[0],u=a.length,s=[],c=1,g=-1,d=0;d<u;++d){var p=a[d];if(-1===p){if(-1!==g)throw new Error((o=d,"only one output dimension may be -1, not both ".concat(g," and ").concat(o)));g=d,s.push(1)}else{if(p<0)throw new Error(MK(d,p));c*=p,s.push(p)}}if(-1!==g){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var h=Math.trunc(i/c);if(c*h!==i)throw new Error(function(e,t){var n=dV(e),r=dV(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,s));s[g]=h}if(dV(s)!==i)throw new Error(function(e,t){var n=dV(e),r=dV(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,s));var f=r.length,C=[];if(f>0){C[f-1]=1;for(var I=f-2;I>=0;--I)C[I]=C[I+1]*r[I+1]}var m=[];if(u>0){m[u-1]=1;for(var v=u-2;v>=0;--v)m[v]=m[v+1]*s[v+1]}for(var b=yV(n,l*u),A=0;A<l;++A){for(var y=0,k=0;k<f;++k)y+=e[A*f+k]*C[k];for(var Z=0;Z<u;++Z)b[A*u+Z]=Math.trunc(y/m[Z]),y%=m[Z]}return[b,[l,u],s]}var Z5={kernelName:wE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var l=Array.from(n.data.get(a.dataId).values),u=n.data.get(r.dataId).values,s=Array.from(n.data.get(o.dataId).values),c=k5(u,r.shape,r.dtype,l,s),g=(0,i.Z)(c,3),d=g[0],p=g[1],h=g[2];return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};function S5(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=r.length,u=[t[0],e.length/t[0]],s=u[1],c=l>0?a[l-1]+1:0,g=c;if(g<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=g;var p=d.reduce((function(e,t){return e*t}),1),h=yV(n,p);if(0===l)return g>0&&h.fill(i),[h,d];if(g<=0)throw new Error("segment ids must be >= 0");for(var f=0,C=1,I=0,m=a[f];;){var v=0;if(C<l){if(m===(v=a[C])){++C;continue}if(m>=v)throw new Error("segment ids are not increasing")}if(m<0||m>=g)throw new Error(KK(m,g));m>I&&h.fill(i,I*s,m*s);for(var b=f;b<C;++b){var A=r[b];if(A<0||A>=u[0])throw new Error(PK(b,r[b],u[0]));for(var y=0;y<s;y++)h[m*s+y]+=e[A*s+y]}if(o)for(var k=0;k<s;k++)h[m*s+k]/=C-f;if(f=C,I=m+1,m=v,++C>l)break}return I<g&&h.fill(i,I*s,g*s),[h,d]}var w5={kernelName:BE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");var l=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,s=n.data.get(o.dataId).values,c=S5(l,r.shape,r.dtype,u,s,!0),g=(0,i.Z)(c,2),d=g[0],p=g[1];return n.makeTensorInfo(p,r.dtype,d)}};var B5={kernelName:xE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");var l=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,s=n.data.get(o.dataId).values,c=S5(l,r.shape,r.dtype,u,s),g=(0,i.Z)(c,2),d=g[0],p=g[1];return n.makeTensorInfo(p,r.dtype,d)}};var x5={kernelName:GE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,l=r.outputShape,u=mK(0,a,l),s=u.sliceRank,c=u.numUpdates,g=u.sliceSize,d=u.strides,p=u.outputSize,h=i5(n.bufferSync(a),n.bufferSync(o),l,p,g,c,s,d,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(l,h.dtype,h.values)}};var G5={kernelName:kE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=vV(r.axis,a.shape)[0],l=HK(a,o,i),u=new Array(a.shape.length).fill(0),s=a.shape.slice();return l.map((function(e){var t=(0,Ae.Z)(s);t[i]=e;var r=D0({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},R5=F$((function(e){return Math.sqrt(e)})),W5=I$(bE,(function(e){return Math.sqrt(e)})),V5={kernelName:bE,backendName:"cpu",kernelFunc:W5},F5={kernelName:WE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;h$(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),l=0;l<o.length;++l){var u=o[l];i[l]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},N5=S$((function(e,t){var n=e-t;return n*n})),E5=z$(RE,N5),D5={kernelName:RE,backendName:"cpu",kernelFunc:E5},X5=I$(_E,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),J5={kernelName:_E,backendName:"cpu",kernelFunc:X5};function H5(e,t,n,r){for(var a=GJ(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),l=new Array(i.length),u=0;u<l.length;u++)l[u]=i[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,l)].concat((0,Ae.Z)(i)))}return a}var Y5={kernelName:VE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,l=r.strides,u=r.beginMask,s=r.endMask,c=r.ellipsisMask,g=r.newAxisMask,d=r.shrinkAxisMask;h$(a,"stridedSlice");var p,h=lH(a.shape,o,i,l,u,s,c,g,d),f=h.finalShapeSparse,C=h.finalShape,I=h.isIdentity,m=h.sliceDim0,v=h.isSimpleSlice,b=h.begin,A=h.end,y=h.strides;if(I)p=Q$({inputs:{x:a},backend:n,attrs:{shape:C}});else if(m||v){uV(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var k=rH(b,A,y),Z=D0({inputs:{x:a},backend:n,attrs:{begin:b,size:k}});p=Q$({inputs:{x:Z},backend:n,attrs:{shape:C}}),n.disposeIntermediateTensorInfo(Z)}else{var S=H5(f,n.bufferSync(a),y,b);p=n.makeTensorInfo(C,S.dtype,S.values)}return p}},T5=function(){function e(t,n,r,a,o,i){iu(this,e),this.separator=BD(t),this.nGramWidths=n,this.leftPad=BD(r),this.rightPad=BD(a),this.padWidth=o,this.preserveShort=i}return uu(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,o){for(var i=this,l=function(l){var u=i.getPadWidth(o),s=Math.max(0,u-l),c=Math.max(0,u-(a-(l+1))),g=o-(s+c),d=t+(s>0?0:l-u),p=0;p+=s*i.leftPad.length;for(var h=0;h<g;++h)p+=e[d+h].length;p+=c*i.rightPad.length,p+=(s+c+g-1)*i.separator.length,n[r+l]=new Uint8Array(p);for(var f=n[r+l],C=0,I=function(e){return e.forEach((function(e){return f[C++]=e}))},m=0;m<s;++m)I(i.leftPad),I(i.separator);for(var v=0;v<g-1;++v)I(e[d+v]),I(i.separator);if(g>0){I(e[d+g-1]);for(var b=0;b<c;++b)I(i.separator),I(i.rightPad)}else{for(var A=0;A<c-1;++A)I(i.rightPad),I(i.separator);I(i.rightPad)}},u=0;u<a;++u)l(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var i=1;i<a;++i){var l=t[i]>=o;if(!(l=l&&t[i]<=r))throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(o,", ").concat(r,"]"));o=t[i]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var u=a-1,s=yV("int32",a);if(0===r||0===a){for(var c=new Array(r),g=0;g<=u;++g)s[g]=0;return[c,s]}s[0]=0;for(var d=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),s[e]=s[e-1]+a},p=1;p<=u;++p)d(p);for(var h=new Array(s[u]),f=function(r){var a=t[r],o=s[r];if(n.nGramWidths.forEach((function(i){var l=t[r+1]-t[r],u=n.getNumNGrams(l,i);n.createNGrams(e,a,h,o,u,i),o+=u})),n.preserveShort&&o===s[r]){var i=t[r+1]-t[r];if(0===i)return"continue";var l=i+2*n.padWidth;n.createNGrams(e,a,h,o,1,l)}},C=0;C<u;++C)f(C);return[h,s]}}]),e}();function M5(e,t,n,r,a,o,i,l){return new T5(n,r,a,o,i,l).compute(e,t)}var K5={kernelName:FE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,l=r.leftPad,u=r.rightPad,s=r.padWidth,c=r.preserveShortSequences,g=t.data,d=t.dataSplits,p=M5(n.data.get(g.dataId).values,n.data.get(d.dataId).values,a,o,l,u,s,c),h=(0,i.Z)(p,2),f=h[0],C=h[1];return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",C)]}};function P5(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){var i=e.subarray(a,o);n&&0===i.length||r.push(i),a=o+1}}else{for(var l=t[0],u=e.indexOf(l);-1!==u;){var s=e.subarray(0,u);n&&0===s.length||r.push(s),u=(e=e.subarray(u+1)).indexOf(l)}n&&0===e.length||r.push(e)}else for(var c=0;c<e.length;++c)r.push(e.subarray(c,c+1))}function z5(e,t,n){for(var r=e.length,a=[],o=0,i=0,l=new Array(r),u=0;u<r;++u){var s=a.length;P5(e[u],t,n,a);var c=a.length-s;l[u]=c,o+=c,i=Math.max(i,c)}for(var g=yV("int32",2*o),d=new Array(o),p=[r,i],h=0,f=0;f<r;++f)for(var C=0;C<l[f];++C)g[2*h]=f,g[2*h+1]=C,d[h]=a[h],++h;return[g,d,p]}var L5={kernelName:NE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var l=z5(n.data.get(a.dataId).values,n.data.get(o.dataId).values[0],r),u=(0,i.Z)(l,3),s=u[0],c=u[1],g=u[2],d=c.length;return[n.makeTensorInfo([d,2],"int32",s),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(g))]}};function _5(e,t){for(var n=yV("int32",e.length),r=0;r<e.length;++r)n[r]=kD(e[r]).modulo(t).getLowBitsUnsigned();return n}var O5={kernelName:EE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=_5(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",o)}},U5=I$(XE,(function(e){return Math.tan(e)})),j5={kernelName:XE,backendName:"cpu",kernelFunc:U5},Q5=I$(JE,(function(e){return Math.tanh(e)}));function q5(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=GJ(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),l=new Array(e.rank),u=0;u<l.length;u++)l[u]=i[u]%e.shape[u];var s=e.locToIndex(l);a.values[o]=e.values[s]}return a}var $5={kernelName:HE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;h$(a,"tile");var i=q5(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},e9=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function t9(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,i=Math.log(a),l=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*l*(a-l)/a)*Math.sign(o-a/2),s=Math.max(n,Math.floor(t-o*l/a+u)),c=Math.min(r,Math.floor(t+(a-o)*l/a+u));t9(e,t,s,c)}var g=e[t],d=n,p=r;for(iV(e,n,t),e9(e[r],g)>0&&iV(e,n,r);d<p;){for(iV(e,d,p),d++,p--;e9(e[d],g)<0;)d+=1;for(;e9(e[p],g)>0;)p-=1}0===e9(e[n],g)?iV(e,n,p):iV(e,p+=1,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function n9(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,l=o,u=AV(n,i*r),s=AV("int32",i*r),c=function(t){var n=t*l,o=e.subarray(n,n+l),i=new Array(o.length);o.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(t9(i,r),i=i.slice(0,r)),a&&i.sort(e9);for(var c=t*r,g=u.subarray(c,c+r),d=s.subarray(c,c+r),p=0;p<r;p++)g[p]=i[p].value,d[p]=i[p].index},g=0;g<i;g++)c(g);var d=t.slice();return d[d.length-1]=r,[GJ(d,n,u),GJ(d,"int32",s)]}var r9={kernelName:YE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,l=r.sorted;h$(a,"topk");var u=n9(n.data.get(a.dataId).values,a.shape,a.dtype,o,l),s=(0,i.Z)(u,2),c=s[0],g=s[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(g.shape,g.dtype,g.values)]}};var a9={kernelName:TE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=t.transforms,l=n.interpolation,u=n.fillMode,s=n.fillValue,c=n.outputShape,g=(0,i.Z)(a.shape,4),d=g[0],p=g[1],h=g[2],f=g[3],C=null!=c?c:[p,h],I=(0,i.Z)(C,2),m=I[0],v=I[1],b=[d,m,v,f],A=WV(a.shape),y=A[0],k=A[1],Z=A[2],S=AV(a.dtype,dV(b));S.fill(s);for(var w=r.data.get(a.dataId).values,B=r.data.get(o.dataId).values,x=0;x<d;++x){for(var G=1===o.shape[0]?B:B.subarray(8*x,8*x+8),R=0;R<m;++R)for(var W=0;W<v;++W)for(var V=0;V<f;++V){var F=void 0,N=G[6]*W+G[7]*R+1;if(0!==N){var E=(G[0]*W+G[1]*R+G[2])/N,D=(G[3]*W+G[4]*R+G[5])/N,X=o9(E,h,u),J=o9(D,p,u);switch(l){case"nearest":F=l9(w,p,h,y,k,Z,x,J,X,V,s);break;case"bilinear":F=u9(w,p,h,y,k,Z,x,J,X,V,s);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(l))}S[x*y+R*k+W*Z+V]=F}}return r.makeTensorInfo(b,a.dtype,S)}return{dataId:r.write(S,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function o9(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return aV(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return aV(0,n,t-1)}(e,t);case"nearest":return function(e,t){return aV(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function i9(e,t,n,r,a,o,i,l,u,s,c){return 0<=l&&l<t&&0<=u&&u<n?e[i*r+l*a+u*o+s]:c}function l9(e,t,n,r,a,o,i,l,u,s,c){return i9(e,t,n,r,a,o,i,Math.round(l),Math.round(u),s,c)}function u9(e,t,n,r,a,o,i,l,u,s,c){var g=Math.floor(l),d=Math.floor(u),p=g+1,h=d+1;return(p-l)*((h-u)*i9(e,t,n,r,a,o,i,g,d,s,c)+(u-d)*i9(e,t,n,r,a,o,i,g,h,s,c))+(l-g)*((h-u)*i9(e,t,n,r,a,o,i,p,d,s,c)+(u-d)*i9(e,t,n,r,a,o,i,p,h,s,c))}function s9(e,t,n,r){for(var a=vV(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var l=a+1;l<n.length;l++)o[2]*=n[l];for(var u={},s=new Int32Array(n[a]),c=new JD(o,r,e),g=[],d=1===o[0]&&1===o[2],p=0;p<n[a];p++){var h=void 0;if(d)h=e[p].toString();else{for(var f=[],C=0;C<o[0];C++)for(var I=0;I<o[2];I++)f.push(c.get(C,p,I));h=f.join(",")}if(void 0!==u[h])s[p]=u[h];else{var m=Object.keys(u).length;u[h]=m,s[p]=m,g.push(p)}}var v=o.slice();v[1]=Object.keys(u).length;var b=new JD(v,r);g.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)b.set(c.get(n,e,r),n,t,r)}));var A=n.slice();return A[a]=v[1],{outputValues:b.values,outputShape:A,indices:s}}var c9={kernelName:KE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;h$(o,"unique");var i=s9(r.data.get(o.dataId).values,a,o.shape,o.dtype),l=i.outputValues,u=i.outputShape,s=i.indices;return[r.makeTensorInfo(u,o.dtype,l),r.makeTensorInfo([s.length],"int32",s)]}};var g9={kernelName:PE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,l=a.shape[o],u=new Array(i-1),s=0,c=0;c<i;c++)c!==o&&(u[s++]=a.shape[c]);var g=new Array(i).fill(0),d=a.shape.slice();d[o]=1;for(var p=new Array(l),h=0;h<p.length;h++){g[o]=h;var f=D0({inputs:{x:a},backend:n,attrs:{begin:g,size:d}});p[h]=Q$({inputs:{x:f},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(f)}return p}};for(var d9={kernelName:zE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;h$(a,"unsortedSegmentSum");for(var l=[],u=[],s=a.shape.length-o.shape.length,c=o,g=0;g<s;++g){var d=Y2({inputs:{input:c},backend:n,attrs:{dim:g+1}});c=d,u.push(d)}for(var p=0;p<i;++p){var h=ZD(p,"int32"),f=n.makeTensorInfo([],"int32",h),C=F2({inputs:{a:f,b:c},backend:n}),I=K$({inputs:{x:C},backend:n,attrs:{dtype:"float32"}}),m=w2({inputs:{a:I,b:a},backend:n}),v=x2({inputs:{x:m},backend:n,attrs:{axis:0,keepDims:!1}});l.push(v),u.push(f),u.push(C),u.push(I),u.push(m),u.push(v)}var b=X3({inputs:l,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}},p9=0,h9=[t0,r0,o0,l0,j$,u0,d0,p0,h0,f0,I0,v0,A0,Z0,w0,R0,W0,V0,F0,e0,N0,J0,T0,M0,P$,z0,_0,H$,O0,$0,t2,n2,r2,a2,o2,i2,u2,c2,g2,d2,p2,h2,f2,I2,m2,v2,b2,A2,y2,k2,R2,b$,W2,N2,D2,H2,T2,P2,t1,r1,a1,l1,c1,g1,d1,h1,C1,v1,y1,y$,k1,Q0,S1,B1,G1,Z$,V1,E1,X1,Y1,M1,z1,_1,j1,Q1,q1,t3,a3,o3,i3,l3,u3,s3,c3,g3,h3,f3,m3,A3,B2,k3,S3,B3,G3,V3,F3,D3,J3,H3,M3,x$,P3,L3,M$,_2,O3,R$,V$,q$,U3,j3,Q3,q3,$3,e5,n5,o5,l5,u5,c5,D$,d5,h5,C5,X0,b3,v5,b5,y5,Z5,w5,B5,x5,G5,V5,F5,D5,J5,Y5,K5,L5,O5,Q2,G2,j5,{kernelName:JE,backendName:"cpu",kernelFunc:Q5},$5,r9,a9,g0,c9,g9,d9,E3];p9<h9.length;p9++){aD(h9[p9])}var f9,C9,I9,m9={},v9={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function b9(e,t){if(!(e in m9)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete m9[e]}),!1),1===e)return n.getContext("webgl",v9)||n.getContext("experimental-webgl",v9);return n.getContext("webgl2",v9)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;m9[e]=n}var r=m9[e];return null==r||r.isContextLost()?(delete m9[e],b9(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),m9[e])}function A9(e,t){return[t,e]}function y9(e){var t=dV(e);return fV(Math.ceil(t/4))}function k9(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Z9(e,t){var n,r,a,o,i,l,u,s,c,g,d=e;return 2===zV().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,u=4,s=1,c=d.HALF_FLOAT,g=d.FLOAT,l=d.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,u=4,s=4,c=null!=t?t.HALF_FLOAT_OES:null,g=e.FLOAT,l=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:s,textureTypeHalfFloat:c,textureTypeFloat:g}}function S9(e,t){var n=t();return zV().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(f9||(f9={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(C9||(C9={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(I9||(I9={}));function w9(e){return!!(zV().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function B9(e,t){return Y9(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var x9,G9,R9=/ERROR: [0-9]+:([0-9]+):/g;function W9(e,t){var n=R9.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return CV((t+1).toString(),o)+e})),l=0,u=0;u<i.length;u++)l=Math.max(i[u].length,l);var s=i.slice(0,r-1),c=i.slice(r-1,r),g=i.slice(r);console.log(s.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(CV(c[0],l)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(g.join("\n"))}function V9(e,t){if(S9(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function F9(e,t,n,r,a,o,i){var l=e.getAttribLocation(t,n);return-1!==l&&(S9(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),S9(e,(function(){return e.vertexAttribPointer(l,a,e.FLOAT,!1,o,i)})),S9(e,(function(){return e.enableVertexAttribArray(l)})),!0)}function N9(e,t,n){return Y9(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function E9(e,t,n){return e.getUniformLocation(t,n)}function D9(e,t,n,r){S9(e,(function(){return function(e,t,n){T9(e,n),S9(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),S9(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),S9(e,(function(){return e.uniform1i(n,r)}))}function X9(e,t,n){S9(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),S9(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function J9(e,t){S9(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),S9(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function H9(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function Y9(e,t,n){var r=S9(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function T9(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function M9(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return dV(e.slice(0,e.length-t))}function K9(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function P9(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[M9(e)].concat((0,Ae.Z)(K9(e)))),t}function z9(e){return e%2===0}function L9(e,t){if(pV(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(z9(n)&&z9(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&z9(e[0])&&z9(t[0])}function _9(e,t){return null!=e.getExtension(t)}function O9(e){try{if(null!=b9(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function U9(e){if(0===e)return!1;var t=b9(e);if(1!==e){if(_9(t,"EXT_color_buffer_float"))return j9(t);var n="EXT_color_buffer_half_float";if(_9(t,n)){var r=t.getExtension(n);return function(e,t){var n=Z9(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var l=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),l}(t,r)}return!1}return!!_9(t,"OES_texture_float")&&(!!_9(t,"WEBGL_color_buffer_float")&&j9(t))}function j9(e){var t=Z9(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Q9(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&uV("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var q9=zV();function $9(){var e,t,n,r,a,o,i,l,u,s;return 2===zV().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",l="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",s="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",l="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",s="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:l,defineSpecialInf:u,defineRound:s}}function e4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=WV(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / ").concat(t),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(o,"; ").concat(i,";")})).join("")}function t4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=WV(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(o,"; ").concat(i,";")})).join("")}function n4(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var o=n-3;o>=0;--o)a[o]="(".concat(a[o+1]," * ").concat(r[o+1],")");return a}function r4(e){var t=WV(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}q9.registerFlag("HAS_WEBGL",(function(){return q9.getNumber("WEBGL_VERSION")>0})),q9.registerFlag("WEBGL_VERSION",(function(){return O9(2)?2:O9(1)?1:0})),q9.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),q9.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===q9.get("WEBGL_VERSION")})),q9.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),q9.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),q9.registerFlag("WEBGL_PACK",(function(){return q9.getBool("HAS_WEBGL")})),q9.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_PACK_CLIP",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_PACK_REDUCE",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_CONV_IM2COL",(function(){return q9.getBool("WEBGL_PACK")})),q9.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==x9){var t=b9(e);x9=t.getParameter(t.MAX_TEXTURE_SIZE)}return x9}(q9.getNumber("WEBGL_VERSION"))})),q9.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==G9){var t=b9(e);G9=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,G9)}(q9.getNumber("WEBGL_VERSION"))})),q9.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=q9.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=b9(e);return _9(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:_9(t,"EXT_disjoint_timer_query")?1:0}(e)})),q9.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return q9.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!cX()})),q9.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=b9(e);if(1===e){if(!_9(t,"OES_texture_float"))return!1}else if(!_9(t,"EXT_color_buffer_float"))return!1;return j9(t)}(q9.getNumber("WEBGL_VERSION"))})),q9.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!q9.getBool("WEBGL_FORCE_F16_TEXTURES")&&q9.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),q9.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return U9(q9.getNumber("WEBGL_VERSION"))})),q9.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=q9.getNumber("WEBGL_VERSION"))&&null!=b9(e).fenceSync;var e})),q9.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return q9.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),q9.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),q9.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return cX()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),q9.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),q9.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),q9.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),q9.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var a4="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",o4=$J;function i4(e,t,n){var r=[];if(e.forEach((function(e){var t=dV(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(S4(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,o,i=r.join("\n"),l=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?u4(e,r):l4(e,r);var o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(a+=n?y4(e,t):k4(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,s=$9(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(s),g=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(s4,"\n    ").concat(c4,"\n    ").concat(g4,"\n  ")}(s);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(pV(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2),i=o,l="",u="b, r, c",s=2;s<e.length-1;s++)i*=e[e.length-s-1],l="\n      int b".concat(s," = index / ").concat(i,";\n      index -= b").concat(s," * ").concat(i,";\n    ")+l,u="b".concat(s,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(l,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(s)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(pV(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=t4(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=e4(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=t4(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=e4(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=e4(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=e4(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(s)),n.packedInputs&&(g+=d4),[g,c,o,i,a,l,n.userCode].join("\n")}function l4(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return h4(e,t);case 1:return f4(e,t);case 2:return C4(e,t);case 3:return I4(e,t);case 4:return m4(e,t);case 5:return v4(e);case 6:return b4(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function u4(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=$9();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=$9();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],l=o[1],u=$9();if(null!=o&&pV(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(l,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(s[0],", ").concat(s[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){var l=[1,2],u=w4(e,n.slice(1)),s=["b","row","col"];return"\n        ".concat(u4(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(B4(s,l),");\n        }\n      ")}var c=$9();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var g=i[0],d=i[1],p=Math.ceil(n[2]/2),h=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(g,", ").concat(d,", ").concat(h,", ").concat(p,", b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=$9();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,l=e.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],s=u[0],c=u[1],g=Math.ceil(o[i-1]/2),d=g*Math.ceil(o[i-2]/2),p="int b, int row, int col",h="b * ".concat(d," + (row / 2) * ").concat(g," + (col / 2)"),f=2;f<i-1;f++)p="int b".concat(f,", ")+p,d*=o[i-f-1],h="b".concat(f," * ").concat(d," + ")+h;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(c,";\n      int texC = index - texR * ").concat(c,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(c,", ").concat(s,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var s4="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",c4="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",g4="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",d4="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function p4(e){return"offset".concat(e)}function h4(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,i.Z)(e.shapeInfo.texShape,2),o=a[0],l=a[1];if(1===o&&1===l)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=p4(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var s=(0,i.Z)(e.shapeInfo.texShape,2),c=s[0],g=s[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(g,", ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function f4(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(A4(e),"\n      }\n    ");var a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var l=p4(n);return 1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(l,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(l,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(l,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(l,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(l,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(l,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function C4(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&pV(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var i=o[0],l=o[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(l,".0, ").concat(i,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=bV(n),s=u.newShape,c=u.keptDims,g=s;if(g.length<n.length){var d=w4(e,g);return"\n      ".concat(l4(d,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(B4(["row","col"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(A4(e),"\n      }\n    ");var p=o[0],h=o[1],f=p4(r);return 1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(h,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(f,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function I4(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],l=bV(n),u=l.newShape,s=l.keptDims,c=u;if(c.length<n.length){var g=w4(e,c);return"\n        ".concat(l4(g,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(B4(["row","col","depth"],s),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(A4(e),"\n      }\n    ");var d=e.shapeInfo.texShape,p=d[0],h=d[1],f=e.shapeInfo.flatOffset;if(h===o&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===i&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var C=p4(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(C,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(C,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function m4(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,l=n[1]*i,u=bV(n),s=u.newShape,c=u.keptDims;if(s.length<n.length){var g=w4(e,s);return"\n      ".concat(l4(g,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(B4(["row","col","depth","depth2"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(l,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(A4(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1],C="int stride2 = ".concat(r,"Shape[3];"),I="int stride1 = ".concat(r,"Shape[2] * stride2;"),m="int stride0 = ".concat(r,"Shape[1] * stride1;");if(f===l&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(C,"\n        ").concat(I,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(f===o&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var v=p4(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(C,"\n      ").concat(I,"\n      ").concat(m,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(v,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(l," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index + ").concat(v,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function v4(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,l=t[1]*i,u=bV(t),s=u.newShape,c=u.keptDims;if(s.length<t.length){var g=w4(e,s);return"\n      ".concat(l4(g),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(B4(["row","col","depth","depth2","depth3"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(l,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(A4(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],f=p[1];if(f===l&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var C=p4(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(l," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(C,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function b4(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=bV(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){var l=w4(e,o);return"\n      ".concat(l4(l),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(B4(["row","col","depth","depth2","depth3","depth4"],i),");\n      }\n    ")}var u=t[5],s=t[4]*u,c=t[3]*s,g=t[2]*c,d=t[1]*g;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(g,", ").concat(c,", ").concat(s,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(A4(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],C=h[1];if(C===d&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(g,", ").concat(c,", ").concat(s,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(C,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(C===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(C,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var I=p4(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(g," + depth * ").concat(c," +\n          depth2 * ").concat(s," + depth3 * ").concat(u," + depth4 + ").concat(I,";\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(C,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function A4(e){var t=e.name,n=dV(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function y4(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,l=t.logicalShape.length,u=o4(e.shapeInfo.logicalShape,t.logicalShape),s=Z4(l),c=l-i,g=["x","y","z","w","u","v"];n=0===i?"":l<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(g[e+c]," = 0;")})).join("\n");var d="";d=l<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(g[t+c])})).join(", ");var p="return outputValue;",h=1===dV(e.shapeInfo.logicalShape),f=1===dV(t.logicalShape);if(1!==i||h||f){if(h&&!f)p=1===l?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var C=i-2,I=i-1;u.indexOf(C)>-1&&u.indexOf(I)>-1?p="return vec4(outputValue.x);":u.indexOf(C)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(I)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(s," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}function k4(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,l=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&l===u&&null==e.shapeInfo.flatOffset&&pV(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var s,c=Z4(u),g=o4(e.shapeInfo.logicalShape,t.logicalShape),d=u-l,p=["x","y","z","w","u","v"];s=0===l?"":u<2&&g.length>=1?"coords = 0;":g.map((function(e){return"coords.".concat(p[e+d]," = 0;")})).join("\n");var h="";return h=u<2&&l>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+d])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(s,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}function Z4(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function S4(e,t,n){var r=bV(t),a=r.newShape,o=r.keptDims,i=t.length,l=e&&3===i&&1===t[0],u=l?t.slice(1):a,s=!e&&i>1&&!pV(t,n)&&a.length<i||l;return{useSqueezeShape:s,uniformShape:s?u:t,keptDims:o}}function w4(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function B4(e,t){return t.map((function(t){return e[t]})).join(", ")}function x4(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=i4(a,i,t),u=function(e,t){var n=Y9(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(S9(e,(function(){return e.shaderSource(n,t)})),S9(e,(function(){return e.compileShader(n)})),zV().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw W9(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,l),s=e.createProgram(u);return zV().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:l,webGLProgram:s,inShapeInfos:o,outShapeInfo:i,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:l,webGLProgram:s,inShapeInfos:o,outShapeInfo:i},G4(e,t,s))}function G4(e,t,n){var r,a,o,i,l={},u={},s={},c=[],g=null;i=e.getUniformLocation(n,"NAN",!1),1===zV().getNumber("WEBGL_VERSION")&&(g=e.getUniformLocation(n,"INFINITY",!1));for(var d=!1,p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];l[h]=e.getUniformLocation(n,h,d),l["offset".concat(h)]=e.getUniformLocation(n,"offset".concat(h),d),t.enableShapeUniforms&&(u["".concat(h,"Shape")]=e.getUniformLocation(n,"".concat(h,"Shape"),d),s["".concat(h,"TexShape")]=e.getUniformLocation(n,"".concat(h,"TexShape"),d))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",d),o=e.getUniformLocation(n,"outShapeStrides",d),a=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms&&t.customUniforms.forEach((function(t,r){c[r]=e.getUniformLocation(n,t.name,d)})),{uniformLocations:l,customUniformLocations:c,infLoc:g,nanLoc:i,inShapesLocations:u,inTexShapesLocations:s,outShapeLocation:r,outShapeStridesLocation:o,outTexShapeLocation:a}}function R4(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!pV(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,l=a.isUniform?null:a.texData.texShape;if(!pV(i,l))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(l," must match"))}}))}function W4(e,t,n,r,a){t.program.enableShapeUniforms||(R4(t.inShapeInfos,n),R4([t.outShapeInfo],[r]));var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):e.setOutputMatrixTexture(o.texture,i[0],i[1]),e.setProgram(t.webGLProgram),1===zV().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)],l=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(l){var s=S4(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(s.length){case 1:e.gl.uniform1iv(l,new Int32Array(s));break;case 2:e.gl.uniform2iv(l,new Int32Array(s));break;case 3:e.gl.uniform3iv(l,new Int32Array(s));break;case 4:e.gl.uniform4iv(l,new Int32Array(s))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(dV(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var c=n.uniformValues;c instanceof Float32Array||(c=new Float32Array(c)),e.gl.uniform1fv(o,c)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,o,r)}));var l=t.outShapeLocation;if(l)switch(r.shape.length){case 1:e.gl.uniform1iv(l,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(l,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(l,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(l,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=WV(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var o=t.customUniformLocations[r],i=a[r];if("float"===n.type)e.gl.uniform1fv(o,i);else if("vec2"===n.type)e.gl.uniform2fv(o,i);else if("vec3"===n.type)e.gl.uniform3fv(o,i);else if("vec4"===n.type)e.gl.uniform4fv(o,i);else if("int"===n.type)e.gl.uniform1iv(o,i);else if("ivec2"===n.type)e.gl.uniform2iv(o,i);else if("ivec3"===n.type)e.gl.uniform3iv(o,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(o,i)}})),e.executeProgram()}function V4(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,i=S4(e.packedInputs,t.shape,o),l=i.useSqueezeShape,u=i.uniformShape,s=i.keptDims,c="",g="",d="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];c="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var h=WV(u);d="".concat(h[0]===o[1],"_").concat(h[h.length-1]===o[1])}}else g="".concat(u[0]>1,"_").concat(u[1]>1);var f=t.shape.length,C=2===u.length&&pV(t.shape,o),I=1===dV(t.shape),m=$J(t.shape,n.shape),v=!e.packedInputs&&f===n.shape.length&&pV(o,n.texData.texShape),b=e.packedInputs||u.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(f,"_").concat(v,"_").concat(l?s:"","_").concat(u.length,"_").concat(I,"_").concat(m,"_").concat(C,"_").concat(c,"_").concat(g,"_").concat(d,"_").concat(b,"_").concat(a)}else{var A=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(A,"_").concat(a)}}));var a=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+a+"".concat(zV().getNumber("WEBGL_VERSION"))}function F4(e){return zV().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var N4=uu((function e(t){iu(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=f9.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=$9();this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?t4(["r","c","d"],t):e4(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),E4=uu((function e(t){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=f9.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=$9();this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?t4(["r","c","d"],t):e4(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),D4=uu((function e(t){iu(this,e),this.variableNames=["A"],this.outTexUsage=C9.DOWNLOAD;var n=$9();this.outputShape=t,this.userCode="\n      ".concat(a4,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),X4=uu((function e(t){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=C9.DOWNLOAD;var n=$9();this.outputShape=t,this.userCode="\n      ".concat(a4,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),J4=uu((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];iu(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=$9();this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":r4(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),H4=uu((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];iu(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=$9();this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length);var a="",o="result";n&&(o="floor(result * 255. + 0.5)");for(var i=0;i<=1;i++)for(var l=0;l<=1;l++){var u=2*i+l;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(l," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(l,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":r4(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(o,";\n        }\n    ")}));function Y4(e){var t=$9();return function(e,t){var n=Y9(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(S9(e,(function(){return e.shaderSource(n,t)})),S9(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function T4(e){return function(e,t){var n=Y9(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return S9(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),S9(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function M4(e){return function(e,t){var n=Y9(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return S9(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),S9(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function K4(e,t,n,r,a,o){!function(e,t){var n=zV().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);var i=function(e){return Y9(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),l=e.TEXTURE_2D;return S9(e,(function(){return e.bindTexture(l,i)})),S9(e,(function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),S9(e,(function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),S9(e,(function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)})),S9(e,(function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===zV().getNumber("WEBGL_VERSION")?S9(e,(function(){return e.texImage2D(l,0,r,t,n,0,a,o,null)})):S9(e,(function(){return e.texStorage2D(l,1,r,t,n)})),S9(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:i,texShape:[n,t]}}function P4(e){return e.internalFormatFloat}function z4(e){return e.internalFormatHalfFloat}function L4(e){return e.downloadTextureFormat}function _4(e){return e.internalFormatPackedFloat}function O4(e){return e.internalFormatPackedHalfFloat}function U4(e,t,n,r,a,o,l,u){var s=e,c=new Float32Array(function(e,t){var n=k9(e,t),r=(0,i.Z)(n,2);return r[0]*r[1]*4}(o,l));return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,c),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),c}var j4=function(){function e(t){iu(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=zV().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){m9[e]=t}(n,t)):this.gl=b9(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===zV().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=B9(this.gl,"OES_texture_float"),_9(this.gl,o))this.textureHalfFloatExtension=B9(this.gl,o);else if(zV().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),_9(this.gl,a))this.colorBufferHalfFloatExtension=B9(this.gl,a);else if(zV().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",_9(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!_9(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=T4(this.gl),this.indexBuffer=M4(this.gl),this.framebuffer=function(e){return Y9(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=Z9(this.gl,this.textureHalfFloatExtension)}return uu(e,[{key:"debug",get:function(){return zV().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;S9(t,(function(){return t.finish()})),S9(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),S9(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),S9(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),S9(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),S9(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=A9(t,n),o=(0,i.Z)(a,2);return K4(e,o[0],o[1],P4(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=A9(t,n),o=(0,i.Z)(a,2);return K4(e,o[0],o[1],z4(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=A9(t,n),o=(0,i.Z)(a,2);return K4(e,o[0],o[1],L4(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){S9(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===zV().getNumber("WEBGL_VERSION")?S9(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):S9(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===zV().getNumber("WEBGL_VERSION")?S9(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):S9(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),S9(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,l,u;S9(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),l=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),l=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),2===zV().getNumber("WEBGL_VERSION")?S9(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,l,i)})):S9(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,l,i)})),S9(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=k9(t,n),o=(0,i.Z)(a,2);return K4(e,o[0],o[1],O4(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=k9(t,n),o=(0,i.Z)(a,2);return K4(e,o[0],o[1],_4(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(J9(this.gl,this.framebuffer),this.outputTexture=null),S9(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=A9(t,n),o=(0,i.Z)(a,2),l=o[0],u=o[1],s=new Uint8Array(t*n*4);return S9(e,(function(){return e.readPixels(0,0,l,u,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return U4(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();S9(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return S9(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),S9(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),S9(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(zV().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return S9(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=Y4(n));var r=function(e){return Y9(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return S9(n,(function(){return n.attachShader(r,t.vertexShader)})),S9(n,(function(){return n.attachShader(r,e)})),function(e,t){if(S9(e,(function(){return e.linkProgram(t)})),!zV().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&V9(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return S9(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),F9(e,t,"clipSpacePos",n,3,20,0)&&F9(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&S9(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&V9(this.gl,this.program),S9(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?N9(this.gl,e,t):E9(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),S9(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),D9(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=k9(t,n),a=(0,i.Z)(r,2),o=a[0],l=a[1];this.setOutputMatrixTextureDriver(e,o,l)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&V9(this.gl,this.program),H9(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),S9(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),S9(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=B9(this.gl,2===zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=j(q().mark((function e(t){var n=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,IV((function(){return n.disposed||n.isQueryAvailable(t,zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||IV((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),X9(this.gl,e,this.framebuffer),this.debug&&H9(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(X9(this.gl,this.outputTexture,this.framebuffer),this.debug&&H9(this.gl)):J9(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;X9(r,e,this.framebuffer),this.debug&&H9(r),this.outputTexture=e,S9(r,(function(){return r.viewport(0,0,t,n)})),S9(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),S9(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var Q4=_$,q4=H0,$4=Y0,e8=K0,t8=U0,n8=V2,r8=X2,a8=M2,o8=o1,i8=p1,l8=f1,u8=I1,s8=b1,c8=R1,g8=F1,d8=D1,p8=J1,h8=$1,f8=n3,C8=d3,I8=Z2,m8=y3,v8=R3,b8=K3,A8=z3,y8=r5,k8=N$,Z8=n0,S8=E0,w8=A5,B8=k5,x8=S5,G8=R5,R8=H5,W8=M5,V8=z5,F8=_5,N8=O2,E8=q5,D8=n9,X8=s0,J8=s9;function H8(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function Y8(e,t){return 1===t?[e]:H8(e,t)}var T8=function(){function e(t){if(iu(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=F4(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Y8("rc",this.rank),r=Z4(this.rank),a=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}return uu(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),o=2;o<this.rank;o++)a="".concat(e[e.length-1-o],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),M8=uu((function e(t,n){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length);for(var r="",a=0;a<4;a++){var o="thisRC = rc;";a%2===1&&(o+="thisRC.z += 1;"),a>1&&(o+="thisRC.y += 1;"),r+="\n        ".concat(o,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=n4(r,t);return a.map((function(t,r){var o="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(o,"; ").concat(i,";")})).join("")}(["r","c","d"],"inputShape"):e4(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":r4(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var K8=function(){function e(t){iu(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return uu(e,[{key:"acquireTexture",value:function(e,t,n){var r=z8(t,n),a=L8(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=P8(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var l=this.freeTextures[a].shift();return this.usedTextures[a].push(l),l}return r===I9.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===I9.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===I9.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===I9.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===I9.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=z8(n,r),o=L8(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=P8(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),l=zV().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==l&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],s=u.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(s,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function P8(e,t,n,r,a){var o,l=function(e,t){switch(e){case I9.PACKED_2X2_FLOAT32:return _4(t);case I9.PACKED_2X2_FLOAT16:return O4(t);case I9.UNPACKED_FLOAT32:return P4(t);case I9.UNPACKED_FLOAT16:return z4(t);case I9.PACKED_4X1_UNSIGNED_BYTE:return L4(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var u=k9(e[0],e[1]),s=(0,i.Z)(u,2);o=s[0]*s[1]}else{var c=A9(e[0],e[1]),g=(0,i.Z)(c,2);o=g[0]*g[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,l);return o*d}function z8(e,t){if(e===C9.UPLOAD)return I9.PACKED_2X2_FLOAT32;if(e===C9.RENDER||null==e)return function(e){return zV().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?I9.PACKED_2X2_FLOAT32:I9.UNPACKED_FLOAT32:e?I9.PACKED_2X2_FLOAT16:I9.UNPACKED_FLOAT16}(t);if(e===C9.DOWNLOAD||e===C9.PIXELS)return I9.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function L8(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var _8=uu((function e(t,n){iu(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),O8="if (isnan(x)) return x;",U8="return x;",j8="return abs(x);";var Q8="return (x >= 0.0) ? x : (exp(x) - 1.0);",q8=O8+"\n  return (x < 0.0) ? 0.0 : x;\n",$8=O8+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",e7="return x;",t7="return 1.0 / (1.0 + exp(-1.0 * x));",n7="return x;",r7="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",a7="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",o7="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",i7="return 1.0 / (1.0 + exp(-1.0 * x));",l7=uu((function e(t,n){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),u7=uu((function e(t){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length);var n=t.length,r=Y8("rc",n),a=Z4(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),l=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(l,"));\n      }\n    ")})),s7=_K,c7={};var g7=zV().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var d7=function(e){su(n,e);var t=hu(n);function n(e){var r,a,o;if(iu(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!zV().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof j4)a=e;else{var i=b9(zV().getNumber("WEBGL_VERSION"),e);a=new j4(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var l=b9(zV().getNumber("WEBGL_VERSION"));a=new j4(l),r.binaryCache=((o=zV().getNumber("WEBGL_VERSION"))in c7||(c7[o]={}),c7[o]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new K8(r.gpgpu),r.numMBBeforeWarning=null==zV().global.screen?1024:zV().global.screen.height*zV().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new eV(ke(r),dH()),r}return uu(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((zV().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||zV().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:C9.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(zV().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:C9.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,l=t.isPacked;if(null!=o){var u;u=l?new l7(i,e7):new _8(i,e7);var s=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),c=this.readSync(s.dataId);return this.disposeIntermediateTensorInfo(s),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var g,d,p=null!=this.activeTimers;(p&&(g=wD()),"complex64"===r)?d=BK(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):d=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=wD()-g),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:function(){var e=j(q().mark((function e(t){var n,r,a,o,i,l,u,s,c,g,d,p,h,f,C,I,m,v,b,A,y,k,Z;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,l=r.dtype,u=r.complexTensorInfos,s=r.isPacked,null==i){e.next=11;break}return c=s?new l7(o,e7):new _8(o,e7),g=this.runWebGLProgram(c,[{dataId:t,shape:o,dtype:l}],l),d=this.read(g.dataId),this.disposeIntermediateTensorInfo(g),e.abrupt("return",d);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!zV().getBool("DEBUG")){e.next=16;break}if(zV().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==zV().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==l&&zV().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(t),C=this.texData.get(h.dataId),p=(f=this.gpgpu).createBufferFromTexture.apply(f,[C.texture.texture].concat((0,Ae.Z)(y9(o))))),this.pendingRead.set(t,[]),"complex64"===l){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==l){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:m=e.sent,v=m[0],b=m[1],I=BK(v,b),e.next=32;break;case 31:null==p?I=this.getValuesFromTexture(t):(A=dV(o),I=this.gpgpu.downloadFloat32MatrixFromBuffer(p,A));case 32:return null!=h&&this.disposeIntermediateTensorInfo(h),null!=p&&S9(y=this.gpgpu.gl,(function(){return y.deleteBuffer(p)})),k=this.convertAndCacheOnCPU(t,I),Z=this.pendingRead.get(t),this.pendingRead.delete(t),Z.forEach((function(e){return e(k)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&dH().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",k);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,o=n.slice,i=n.dtype,l=n.isPacked,u=n.texture;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){var s;s=l?new l7(a,e7):new _8(a,e7);var c=this.runWebGLProgram(s,[{dataId:e,shape:a,dtype:i}],i),g=this.readToGPU(c,t);return this.disposeIntermediateTensorInfo(c),g}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var d=this.decode(e,t.customTexShape),p=dH().makeTensorFromDataId(d.dataId,d.shape,d.dtype),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return xD(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return GJ(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!w9(n)){if(zV().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=dV(n);if(zV().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,l=this.decode(e),u=this.texData.get(l.dataId),s=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[u.texture.texture].concat((0,Ae.Z)(y9(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(l),s}var c=zV().getBool("WEBGL_PACK")&&!0===a,g=c?P9(n):n,d=c?new X4(g):new D4(g),p=this.runWebGLProgram(d,[{shape:g,dtype:r,dataId:e}],"float32"),h=this.texData.get(p.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),f}},{key:"timerAvailable",value:function(){return zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var o=gV(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=gV(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(o);case 3:n=e.sent,l.kernelMs=lV(n),l.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:l.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:wD(),endMs:null}}},{key:"endTimer",value:function(e){return zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=wD(),e)}},{key:"getQueryTime",value:function(){var e=j(q().mark((function e(t){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(zV().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,l=t.slice,u=l&&l.origDataId||e,s=this.dataRefCount.get(u);s>1?this.dataRefCount.set(u,s-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g7;return zV().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&dV(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){qE("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return s7(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new l7(e.shape,t),a=this.compileAndRun(r,[e],n);return dH().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=Z8(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(zV().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,j8,e.dtype);var n=new _8(e.shape,j8),r=this.compileAndRun(n,[e]);return dH().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&wV(n[0])){var a=n.map((function(e){return BD(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return dH().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new u7(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new T8(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[M9(e.shape)].concat((0,Ae.Z)(K9(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[M9(t)].concat((0,Ae.Z)(K9(t))),o=new M8(a,n),i=[n],l=this.runWebGLProgram(o,[r],e.dtype,i,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype;null!=t&&uV(dV(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var i,l=P9(a);i=r?new E4(l):new N4(l);var u=[null!=t?t:y9(l)];return{dtype:o,shape:a,dataId:this.runWebGLProgram(i,[{shape:l,dtype:o,dataId:e}],o,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,l=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(l.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===f9.DENSE){var s=null!=i?i:y9(e.outputShape);u.texShape=s.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===dV(l.shape))return u.values=AV(l.dtype,0),l;var c=[],g=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&dV(t.shape)<=zV().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!L9(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),c.push(t),n=a.texData.get(t.dataId),r.shape=o}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(l.dataId);var d,p={shape:l.shape,texData:u,isUniform:!1},h=V4(e,g,p),f=this.getAndSaveBinary(h,(function(){return x4(a.gpgpu,e,g,p)})),C=null!=this.activeTimers;C&&(d=this.startTimer()),zV().get("ENGINE_COMPILE_ONLY")||W4(this.gpgpu,f,g,p,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),C&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var I=zV().get("WEBGL_FLUSH_THRESHOLD");if(I>0){var m=wD();m-this.lastGlFlushTime>I&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=m)}if(!zV().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var v=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),v}return l}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var o=this.runWebGLProgram(e,t,n,r,a);return o}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!zV().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=hH((function(){if(!zV().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=zV().getBool("DEBUG");zV().set("DEBUG",!1);var n=e.abs(vH(1e-8)).dataSync()[0];if(zV().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,o=t.texture,l=t.usage,u=t.isPacked;if(null==o){var s,c=null!=this.activeTimers;c&&(s=wD());var g=t.texShape;if(null==g&&(g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=zV().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?oV(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=bV(e);e=r.newShape}var a=dV(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o=M9(e),l=2,u=2;if(e.length){var s=K9(e),c=(0,i.Z)(s,2);l=c[0],u=c[1]}return fV(a=o*(l/2)*(u/2)).map((function(e){return 2*e}))}return fV(a)}(n,u),t.texShape=g),null!=a){var d,p=P9(n),h=g[1],f=g[0],C=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(u||!C){var I=k9(g[0],g[1]),m=(0,i.Z)(I,2);h=m[0],f=m[1]}d=u?new H4(p,C):new J4(p,C);var v=C?[f,h]:g,b=this.makeTensorInfo(v,r),A=this.texData.get(b.dataId);A.usage=C?C9.PIXELS:C9.UPLOAD,A.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),h,f,a);var y=[[f,h]],k=this.runWebGLProgram(d,[b],r,y,!0),Z=this.texData.get(k.dataId);t.texShape=Z.texShape,t.isPacked=Z.isPacked,t.usage=Z.usage,zV().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=Z.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=wD()-s)}else{var S=this.acquireTexture(g,l,r,u);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*SV(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,i.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=j(q().mark((function e(){var t,n,r,a,o,l,u,s,c=this;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,i.Z)(r[n],2),o=a[1],t.push(this.checkCompletionAsync_(o));return e.abrupt("return",Promise.all(t));case 6:for(l=function(){var e=(0,i.Z)(s[u],2)[1],n=new Promise((function(t){try{c.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},u=0,s=Object.entries(this.binaryCache);u<s.length;u++)l();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=j(q().mark((function e(t){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,lK();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw W9(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,i.Z)(t[e],2)[1],r=G4(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,o=r.customUniformLocations,l=r.infLoc,u=r.nanLoc,s=r.inShapesLocations,c=r.inTexShapesLocations,g=r.outShapeLocation,d=r.outShapeStridesLocation,p=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=o,n.infLoc=l,n.nanLoc=u,n.inShapesLocations=s,n.inTexShapesLocations=c,n.outShapeLocation=g,n.outShapeStridesLocation=d,n.outTexShapeLocation=p}}}]),n}(tV);d7.nextDataId=0;gX()&&IH("webgl",(function(){return new d7}),2);var p7=uu((function e(t,n,r){iu(this,e),this.variableNames=["A","B"],this.outputShape=tH(n,r),this.enableShapeUniforms=F4(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),h7=uu((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];iu(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=tH(n,r);var o=this.outputShape.length;this.enableShapeUniforms=F4(o);var i="";if(a)if(0===o||1===dV(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var l=Z4(o);if(i="\n          ".concat(l," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=Y8("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}));function f7(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var C7={kernelName:sN,backendName:"webgl",kernelFunc:f7};function I7(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),l=f7({inputs:{x:r},backend:n}),u=f7({inputs:{x:a},backend:n});return i.complexTensorInfos={real:l,imag:u},o}var m7={kernelName:AF,backendName:"webgl",kernelFunc:I7},v7="return (a < 0.) ? b * a : a;",b7="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var A7={kernelName:fN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",ZD(o,"float32")),l=zV().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new h7(b7,a.shape,i.shape):new p7(v7,a.shape,i.shape),u=n.runWebGLProgram(l,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),u}},y7="return (a < 0.) ? b * a : a;",k7="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var Z7={kernelName:jN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=zV().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new h7(k7,r.shape,a.shape):new p7(y7,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],"float32")}};function S7(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,l=e.backend,u=i.x,s=l,c=a||u.dtype;if(s.shouldExecuteOnCPU([u])&&null!=r){var g=s.texData.get(u.dataId),d=r(g.values,c);return s.makeTensorInfo(u.shape,c,d)}return o=zV().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new l7(u.shape,n):new _8(u.shape,t),s.runWebGLProgram(o,[u],c)}}function w7(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,o=e.supportsComplex,l=void 0!==o&&o,u=e.cpuKernelImpl,s=e.dtype;return function(e){var r=e.inputs,o=e.backend,c=r.a,g=r.b,d=o;if(l&&"complex64"===c.dtype){var p=d.texData.get(c.dataId),h=d.texData.get(g.dataId),f=[[p.complexTensorInfos.real,h.complexTensorInfos.real],[p.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1],o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},l={dataId:a.dataId,dtype:a.dtype,shape:g.shape},u=new p7(t,c.shape,g.shape);return d.runWebGLProgram(u,[o,l],jD(r.dtype,a.dtype))})),C=(0,i.Z)(f,2),I=C[0],m=C[1],v=I7({inputs:{real:I,imag:m},backend:d});return d.disposeIntermediateTensorInfo(I),d.disposeIntermediateTensorInfo(m),v}var b,A=s||jD(c.dtype,g.dtype);if(("string"===c.dtype||"string"===g.dtype||d.shouldExecuteOnCPU([c,g]))&&null!=u){var y=d.texData.get(c.dataId).values,k=d.texData.get(g.dataId).values,Z="string"===c.dtype?LK(y):y,S="string"===c.dtype?LK(k):k,w=u(c.shape,g.shape,Z,S,A),B=(0,i.Z)(w,2),x=B[0],G=B[1],R=d.makeTensorInfo(G,A);return d.texData.get(R.dataId).values=x,R}return b=zV().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new h7(n,c.shape,g.shape,a):new p7(t,c.shape,g.shape),d.runWebGLProgram(b,[c,g],A)}}function B7(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?n7:U8;if("relu"===e)return t?a7:q8;if("elu"===e)return t?r7:Q8;if("relu6"===e)return t?o7:$8;if("prelu"===e)return t?k7:y7;if("leakyrelu"===e)return t?b7:v7;if("sigmoid"===e)return t?i7:t7;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var x7=uu((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],s=arguments.length>8&&void 0!==arguments[8]&&arguments[8];iu(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=F4(this.outputShape.length);var c=a?t[1]:t[2],g=Math.ceil(c/2),d=a?"i * 2, rc.y":"rc.y, i * 2",p=o?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],C="",I="";l&&(C=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(l,"\n        }"):s?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(l,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(l,"\n        }"),I="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha");var v="rc.x",b="rc.x";t[0]<n[0]?v="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(b="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(C,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(g,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(g,"; i++) {\n          int batchA = ").concat(v,";\n          int batchB = ").concat(b,";\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(f[0],");\n          result += (").concat(h[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(m,"\n\n        ").concat(I,"\n\n        setOutput(result);\n      }\n    ")})),G7="return areal * breal - aimag * bimag;",R7="return areal * bimag + aimag * breal;",W7=uu((function e(t,n,r){iu(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=tH(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),V7="return a * b;";function F7(e){var t,n=e.inputs,r=e.backend,a=n.a,o=n.b,l=jD(a.dtype,o.dtype);if("complex64"===a.dtype){var u=r.texData.get(a.dataId),s=r.texData.get(o.dataId),c=new W7(G7,a.shape,o.shape),g=new W7(R7,a.shape,o.shape),d=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:a.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:o.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:o.shape}],p=r.runWebGLProgram(c,d,"float32"),h=r.runWebGLProgram(g,d,"float32"),f=I7({inputs:{real:p,imag:h},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(h),f}if(r.shouldExecuteOnCPU([a,o])){var C=r.texData.get(a.dataId),I=r.texData.get(o.dataId),m=I8(a.shape,o.shape,C.values,I.values,l),v=(0,i.Z)(m,2),b=v[0],A=v[1],y=r.makeTensorInfo(A,l);return r.texData.get(y.dataId).values=b,y}return t=zV().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new h7(V7,a.shape,o.shape):new p7(V7,a.shape,o.shape),r.runWebGLProgram(t,[a,o],l)}var N7={kernelName:HN,backendName:"webgl",kernelFunc:F7};function E7(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,l=dV(a.shape),u=mV(o,l),s=dV(u);uV(l===s,(function(){return"The new shape (".concat(u,") has ").concat(s," elements and the old ")+"shape (".concat(a.shape,") has ").concat(l," elements. The new shape and old ")+"shape must have the same number of elements."}));var c=i.texData.get(a.dataId);return!c.isPacked||L9(a.shape,u)||null!==c.texture&&L9(c.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[M9(e.shape)].concat((0,Ae.Z)(K9(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[M9(t)].concat((0,Ae.Z)(K9(t))),i=new M8(o,r),l=[r],u=n.runWebGLProgram(i,[a],e.dtype,l,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,i)}var D7={kernelName:nE,backendName:"webgl",kernelFunc:E7},X7=uu((function e(t,n){iu(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var l=4*Math.floor(r/4),u=r%4,s="sumValue += dot(values, ones);";if(null!=n){var c=1/n;s="sumValue += dot(values * ".concat(hV(c)?c.toPrecision(2):c,", ones);")}var g="";o%r>0&&(g="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(g,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(s,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(s,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(s,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(s,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),J7=uu((function e(t,n){iu(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var l="0.0",u="";"prod"===n?l="1.0":"min"===n?(l="1.0 / 1e-20",u="min"):"max"===n&&(l="-1.0 / 1e-20",u="max");var s="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?s="sumValue":"prod"===n?s="prodValue":"all"===n?s="allValue":"any"===n&&(s="anyValue");var c=4*Math.floor(r/4),g=r%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(l="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(l="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";o%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(l,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(l,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===g,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===g,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===g,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(s,");\n      }\n    ")}));function H7(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=cK(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var l,u=a[i],s=u.inSize,c=u.windowSize,g=u.outSize,d=void 0;d="mean"===n?0===i?new X7({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:g},s):new X7({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:g}):new J7({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:g},n),l=o,o=r.runWebGLProgram(d,[o],t),l.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(l)}return o}var Y7=uu((function e(t,n){iu(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=Z4(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")}));var T7=uu((function e(t,n){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=Z4(this.rank),i=H8("rc",this.rank),l=new Array(this.rank),u=0;u<n.length;u++)l[n[u]]=i[u];var s="vec2(".concat(l.slice(-2).join(),")"),c="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),g="getChannel(getA(".concat(l.join(),"), ").concat(s,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(g,";\n      if(").concat(c,") {\n        result[1] = ").concat(g,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(g,";\n        if(").concat(c,") {\n          result[3] = ").concat(g,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function M7(e,t,n){var r=zV().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new T7(e.shape,t):new Y7(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function K7(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,o=e.shape.length,l=vV(a,e.shape),u=l,s=TY(u,o),c=null!=s,g=e;c&&(g=M7(e,s,r),u=KY(u.length,o)),YY("sum",u,o);var d=JY(g.shape,u),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=h;n&&(C=HY(h,l));var I=dV(f),m=E7({inputs:{x:g},attrs:{shape:[dV(e.shape)/I,I]},backend:r}),v=H7(m,QD(e.dtype),"sum",r),b=E7({inputs:{x:v},attrs:{shape:C},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(v),c&&r.disposeIntermediateTensorInfo(g),b}(t.x,r.axis,r.keepDims,n)}var P7={kernelName:AE,backendName:"webgl",kernelFunc:K7};function z7(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,l=r,u=o.shape.length,s=new Array(u),c=0;c<s.length;c++)s[c]=o.shape[i[c]];if(l.shouldExecuteOnCPU([o])){var g=l.texData.get(o.dataId).values,d=X8(g,o.shape,o.dtype,i,s);t=l.makeTensorInfo(s,o.dtype),l.texData.get(t.dataId).values=d}else t=M7(o,i,l);return t}var L7={kernelName:ME,backendName:"webgl",kernelFunc:z7};function _7(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,l=void 0===i?null:i,u=e.preluActivationWeights,s=void 0===u?null:u,c=e.leakyreluAlpha,g=void 0===c?0:c,d=e.activation,p=void 0===d?null:d,h=t.shape.length,f=n.shape.length,C=r?t.shape[h-2]:t.shape[h-1],I=a?n.shape[f-1]:n.shape[f-2],m=r?t.shape[h-1]:t.shape[h-2],v=a?n.shape[f-2]:n.shape[f-1],b=t.shape.slice(0,-2),A=n.shape.slice(0,-2),y=dV(b),k=dV(A),Z=tH(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([m,v]);uV(C===I,(function(){return"Error in matMul: inner shapes (".concat(C,") and (")+"".concat(I,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var S,w=r?[y,C,m]:[y,m,C],B=a?[k,v,I]:[k,I,v],x=E7({inputs:{x:t},backend:o,attrs:{shape:w}}),G=E7({inputs:{x:n},backend:o,attrs:{shape:B}}),R=[x,G],W=Math.max(y,k),V=r?x.shape[1]:x.shape[2],F=null!=l,N=null!=s,E="leakyrelu"===p,D=null!=p?B7(p,!0):null;if((1===m||1===v)&&V>1e3&&!1===(F||N||E||null!=D)){var X=x,J=G;r&&(X=z7({inputs:{x:x},backend:o,attrs:{perm:[0,2,1]}}),R.push(X)),a&&(J=z7({inputs:{x:G},backend:o,attrs:{perm:[0,2,1]}}),R.push(J));var H=1===v,Y=X;1!==v&&(Y=E7({inputs:{x:X},backend:o,attrs:{shape:[W,V,1]}}),R.push(Y));var T=1===v?2:1,M=J;H&&(M=E7({inputs:{x:J},backend:o,attrs:{shape:[W,1,V]}}),R.push(M));var K=F7({inputs:{a:Y,b:M},backend:o});S=K7({inputs:{x:K},backend:o,attrs:{axis:T,keepDims:!0}}),R.push(K)}else{var P=jD(t.dtype,n.dtype),z=new x7(w,B,[W,m,v],r,a,F,D,N,E),L=[x,G];if(null!=l&&L.push(l),N&&L.push(s),E){var _=o.makeTensorInfo([],"float32",ZD(g,"float32"));L.push(_),R.push(_)}S=o.runWebGLProgram(z,L,P)}var O=E7({inputs:{x:S},backend:o,attrs:{shape:Z}});R.push(S);for(var U=0,j=R;U<j.length;U++){var Q=j[U];o.disposeIntermediateTensorInfo(Q)}return O}var O7={kernelName:UE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,l=t.preluActivationWeights,u=r.transposeA,s=r.transposeB,c=r.activation;return _7({a:a,b:o,transposeA:u,transposeB:s,backend:n,bias:i,preluActivationWeights:l,leakyreluAlpha:r.leakyreluAlpha,activation:c})}},U7="return abs(x);";var j7={kernelName:jV,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=Z8(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=zV().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new l7(a.shape,U7):new _8(a.shape,U7),r.runWebGLProgram(t,[a],a.dtype)}},Q7=S7({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),q7={kernelName:QV,backendName:"webgl",kernelFunc:Q7},$7=S7({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),e6={kernelName:qV,backendName:"webgl",kernelFunc:$7},t6="return a + b;",n6=w7({opSnippet:t6,packedOpSnippet:t6,supportsComplex:!0,cpuKernelImpl:Q4}),r6={kernelName:$V,backendName:"webgl",kernelFunc:n6},a6=uu((function e(t,n){iu(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),o6=uu((function e(t,n){iu(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var i6={kernelName:eF,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return f7({inputs:{x:a[0]},backend:r});if(a.length>zV().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),l=e({inputs:a.slice(o),backend:r});return e({inputs:[i,l],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return jD(e,t)})),s=a.map((function(e){return e.shape})),c=zV().getBool("WEBGL_PACK")?new o6(a[0].shape,s):new a6(a[0].shape,s);return r.runWebGLProgram(c,a,u)}};var l6={kernelName:tF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,l=r.keepDims,u=a.shape.length,s=vV(o,a.shape),c=s,g=TY(c,u),d=a;null!=g&&(d=z7({inputs:{x:a},backend:n,attrs:{perm:g}}),c=KY(c.length,u)),YY("all",c,u);var p,h=JY(d.shape,c),f=(0,i.Z)(h,2),C=f[0],I=E7({inputs:{x:d},backend:n,attrs:{shape:[-1,dV(f[1])]}}),m=H7(I,I.dtype,"all",n);return p=E7(l?{inputs:{x:m},backend:n,attrs:{shape:HY(C,s)}}:{inputs:{x:m},backend:n,attrs:{shape:C}}),n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(m),null!=g&&n.disposeIntermediateTensorInfo(d),p}};var u6={kernelName:nF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,l=r.keepDims,u=a.shape.length,s=vV(o,a.shape),c=s,g=TY(c,u),d=a;null!=g&&(d=z7({inputs:{x:a},backend:n,attrs:{perm:g}}),c=KY(c.length,u)),YY("any",c,u);var p,h=JY(d.shape,c),f=(0,i.Z)(h,2),C=f[0],I=E7({inputs:{x:d},backend:n,attrs:{shape:[-1,dV(f[1])]}}),m=H7(I,I.dtype,"any",n);return p=E7(l?{inputs:{x:m},backend:n,attrs:{shape:HY(C,s)}}:{inputs:{x:m},backend:n,attrs:{shape:C}}),n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(m),null!=g&&n.disposeIntermediateTensorInfo(d),p}},s6=uu((function e(t,n,r){iu(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var l="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(l," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),c6=uu((function e(t,n,r,a){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,uV(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var l,u,s=this.outputShape,c=s.length,g=Z4(c),d=Y8("coords",c);if(1===i){var p=Z4(u=c+1);l="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(d.join(),", 0);\n        ++").concat(d[c-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(d.join(),", 0);\n        ++").concat(d[c-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(d.join(),", 0);\n        --").concat(d[c-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(d.join(),", 0);\n        --").concat(d[c-2],";")}else u=c,l="\n        ".concat(g," sourceLocR = coords;\n        ++").concat(d[c-1],";\n        ").concat(g," sourceLocG = coords;\n        ++").concat(d[c-2],";\n        ").concat(g," sourceLocA = coords;\n        --").concat(d[c-1],";\n        ").concat(g," sourceLocB = coords;\n        --").concat(d[c-2],";");var h=["x","y","z","w","u","v"].slice(0,u),f="."+h[u-1],C=h.map((function(e){return"int "+e})),I=Y8("sourceLocR",u-1).concat("inIdx.r"),m=Y8("sourceLocG",u-1).concat("inIdx.g"),v=Y8("sourceLocB",u-1).concat("inIdx.b"),b=Y8("sourceLocA",u-1).concat("inIdx.a"),A="max"===r?"greaterThan":"lessThan",y=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(I.join(),"),\n                             getBestIndicesAChannel(").concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),")));"),k="vec4(\n            getAChannel(".concat(I.join(),"),\n            hasNextCol ? getAChannel(").concat(m.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(v.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(b.join(),") : 0.)"),Z=a?"":"\n      float getBestIndicesAChannel(".concat(C.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(C.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(Z,"\n      void main() {\n        ").concat(g," coords = getOutputCoords();\n        bool hasNextCol = ").concat(d[c-1]," < ").concat(s[c-1]-1,";\n        bool hasNextRow = ").concat(d[c-2]," < ").concat(s[c-2]-1,";\n        ").concat(l,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(f,", sourceLocG").concat(f,",\n          sourceLocB").concat(f,", sourceLocA").concat(f,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(k,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(y,"\n          vec4 candidate = ").concat(k,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(A,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function g6(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=cK(o),l={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new s6(l,n,null==r),s=[t];null!=r&&s.push(r);var c=e.runWebGLProgram(u,s,"int32");if(1===c.shape[1])return c;var g=g6(e,t,n,c);return e.disposeIntermediateTensorInfo(c),g}function d6(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=a[a.length-1],i=cK(o),l=new c6(a,i,n,null==r),u=null==r?[t]:[t,r],s=e.runWebGLProgram(l,u,"int32");if(s.shape.length===t.shape.length){var c=d6(e,t,n,s);return e.disposeIntermediateTensorInfo(s),c}return s}function p6(e,t,n,r){var a=[n];if(YY("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!zV().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],l=e.texData.get(t.dataId),u=t;null!==l&&l.isPacked&&(u=e.unpackTensor(t),o.push(u));var s=JY(u.shape,a),c=(0,i.Z)(s,2),g=c[0],d=dV(c[1]),p=E7({inputs:{x:u},backend:e,attrs:{shape:[-1,d]}});o.push(p);var h=g6(e,p,r);o.push(h);var f=E7({inputs:{x:h},backend:e,attrs:{shape:g}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),f}return d6(e,t,r)}var h6={kernelName:rF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=vV(r.axis,a.shape),i=TY(o,a.shape.length),l=a,u=[];null!=i&&(l=z7({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(l),o=KY(o.length,l.shape.length)),YY("argMax",[o[0]],l.shape.length);var s=p6(n,l,o[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}};var f6={kernelName:aF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=vV(r.axis,a.shape),i=TY(o,a.shape.length),l=a,u=[];null!=i&&(l=z7({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(l),o=KY(o.length,l.shape.length)),YY("argMin",[o[0]],l.shape.length);var s=p6(n,l,o[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},C6=S7({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),I6={kernelName:oF,backendName:"webgl",kernelFunc:C6},m6=S7({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),v6={kernelName:iF,backendName:"webgl",kernelFunc:m6},b6=S7({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),A6={kernelName:lF,backendName:"webgl",kernelFunc:b6},y6=w7({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),k6={kernelName:sF,backendName:"webgl",kernelFunc:y6},Z6=S7({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),S6={kernelName:uF,backendName:"webgl",kernelFunc:Z6},w6=uu((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(iu(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,l=t.strideHeight,u=t.strideWidth,s=t.dilationHeight,c=t.dilationWidth,g=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var f="avg"===n,C="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),I="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),m="0.0";if(f||(m="-1.0 / 1e-20"),r){var v=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(l,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(g,";\n              wR += ").concat(s,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(v," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?C:I:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var b="max",A="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(A="avgValue / count");var y=4*Math.floor(i/4),k=i%4,Z="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(b,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(l,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(m,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(m,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(g,";\n            wR += ").concat(s,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(y,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(Z,"\n          }\n\n          int xC = xCCorner + ").concat(y,";\n          if (").concat(1===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(Z,"\n          } else if (").concat(2===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(Z,"\n          } else if (").concat(3===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(Z,"\n          }\n        }\n        setOutput(").concat(A,");\n      }\n    ")}})),B6=uu((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(iu(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,l=t.strideDepth,u=t.strideHeight,s=t.strideWidth,c=t.dilationDepth,g=t.dilationHeight,d=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,C=t.padInfo.front,I=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,b="0.0";if(v||(b="-1.0 / 1e-20"),r){var A=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(l,", ").concat(u,", ").concat(s,");\n        const ivec3 pads = ivec3(").concat(C,", ").concat(I,", ").concat(m,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(g,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(A," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var y="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var Z=4*Math.floor(i/4),S=i%4,w="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(y,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(l,", ").concat(u,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(C,", ").concat(I,", ").concat(m,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(g,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(Z,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(w,"\n            }\n\n            int xC = xCCorner + ").concat(Z,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(w,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(w,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(w,"\n            }\n          }\n          setOutput(").concat(k,");\n        }\n      }\n    ")}}));var x6={kernelName:cF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Q9(a,"avgPool");var o=r.filterSize,i=r.strides,l=r.pad,u=r.dimRoundingMode;uV(HH(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var s=BH(a.shape,o,i,1,l,u);if(1===s.filterWidth&&1===s.filterHeight&&pV(s.inShape,s.outShape))return f7({inputs:{x:a},backend:n});var c=new w6(s,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};var G6={kernelName:dF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,l=r.pad,u=r.dimRoundingMode,s=r.dataFormat,c=xH(a.shape,o,i,[1,1,1],l,u,s),g=new B6(c,"avg",!1);return n.runWebGLProgram(g,[a],"float32")}},R6=uu((function e(t){iu(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterHeight,s=t.effectiveFilterWidth,c=u-1-t.padInfo.top,g=s-1-t.padInfo.left,d=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(g,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(s,";\n            wC+= ").concat(l,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),W6=uu((function e(t){iu(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,l=t.strideWidth,u=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,g=t.effectiveFilterDepth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=g-1-t.padInfo.front,f=d-1-t.padInfo.top,C=p-1-t.padInfo.left,I=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(f,", ").concat(C,");\n      const float avgMultiplier = float(").concat(I,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(g,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(s,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(l,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var V6={kernelName:pF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,l=r.strides,u=r.pad,s=r.dimRoundingMode,c=xH(o.shape,i,l,[1,1,1],u,s),g=new W6(c);return n.runWebGLProgram(g,[a],o.dtype)}};var F6={kernelName:gF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;Q9([a,o],"avgPoolGrad");var l=r.filterSize,u=r.strides,s=r.pad,c=BH(i.shape,l,u,1,s),g=new R6(c);return n.runWebGLProgram(g,[a],i.dtype)}};var N6={kernelName:hF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return _7({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},E6=uu((function e(t,n,r,a,o,i){iu(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],tH(t,n),tH(t,r);var l="0.0";null!=a&&(tH(t,a),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");var u="1.0";null!=o&&(tH(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(l,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),D6=uu((function e(t,n,r,a,o,i){iu(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],tH(t,n),tH(t,r);var l="vec4(0.0)";null!=a&&(tH(t,a),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(tH(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(l,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),X6={kernelName:aN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,l=t.offset,u=t.scale;uV(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),uV(null==l||o.shape.length===l.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),uV(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var s=r.varianceEpsilon;null==s&&(s=.001);var c=[a,o,i],g=null;null!=l&&(g=l.shape,c.push(l));var d=null;null!=u&&(d=u.shape,c.push(u));var p=zV().getBool("WEBGL_PACK_NORMALIZATION")?new D6(a.shape,o.shape,i.shape,g,d,s):new E6(a.shape,o.shape,i.shape,g,d,s);return n.runWebGLProgram(p,c,c[0].dtype)}},J6=uu((function e(t){iu(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=Z4(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return H6.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),o=t.map((function(e,t){return"sourceLoc.".concat(H6[t]," = start[").concat(t,"] + coords.").concat(H6[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),H6=["x","y","z","w","u","v"];var Y6=uu((function e(t){iu(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=Z4(this.rank),r=Y8("coords",this.rank),a=Y8("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),l="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),s=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(s,"\n        vec4 result = vec4(0.);\n        ").concat(l,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function T6(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=iH(a,r.begin,r.size),l=(0,i.Z)(o,2),u=l[0],s=l[1];if(nH(a,u,s),0===dV(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var c=n.texData.get(a.dataId),g=S8(c.values,u,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,g)}var d=n.texData.get(a.dataId).isPacked,p=aH(a.shape,u,s);if(d||!p){var h=zV().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Y6(s):new J6(s),f=[u];return n.runWebGLProgram(h,[a],a.dtype,f)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var l=oH(t,WV(e.shape));a.slice&&(l+=a.slice.flatOffset),i.slice={flatOffset:l,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(a,u,s,n)}var M6={kernelName:hE,backendName:"webgl",kernelFunc:T6},K6={kernelName:fF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;uV(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var l=o.reduce((function(e,t){return e*t})),u=dK(a.shape,o,l),s=pK(u.length,o.length),c=hK(a.shape,o,l),g=fK(i,o.length),d=CK(c,i,o.length),p=[],h=E7({inputs:{x:a},backend:n,attrs:{shape:u}}),f=z7({inputs:{x:h},backend:n,attrs:{perm:s}}),C=E7({inputs:{x:f},backend:n,attrs:{shape:c}}),I=T6({inputs:{x:C},backend:n,attrs:{begin:g,size:d}});return p.push(h),p.push(f),p.push(C),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),I}};var P6={kernelName:CF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,l=n.readSync(a.dataId),u=n.readSync(o.dataId),s=q4(l,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}};var z6={kernelName:IF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.readSync(r.dataId),i=n.readSync(a.dataId),l=tH(Array.from(o),Array.from(i));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}},L6=w7({opSnippet:"return float(a != b);",cpuKernelImpl:v8,dtype:"bool"}),_6={kernelName:TN,backendName:"webgl",kernelFunc:L6};function O6(e){var t=e.inputs,n=e.backend,r=t.input;return f7({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var U6={kernelName:$N,backendName:"webgl",kernelFunc:O6};var j6={kernelName:mF,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return f7({inputs:{x:o},backend:r});var l=UY(o.shape),u=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),s=I7({inputs:{real:u,imag:l},backend:r});return l.dispose(),r.disposeIntermediateTensorInfo(u),s}if("complex64"===o.dtype){var c=O6({inputs:{input:o},backend:r}),g=e({inputs:{x:c},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(c),g}if(!kV(o.dtype,i)){var d=f7({inputs:{x:o},backend:r});return{dataId:d.dataId,shape:d.shape,dtype:i}}if("int32"===i)return function(e,t){var n=new _8(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){var p=r.makeTensorInfo([],"bool",AV("bool",1)),h=L6({inputs:{a:o,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),h}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},Q6="return ceil(x);",q6=S7({opSnippet:Q6,packedOpSnippet:Q6,cpuKernelImpl:e8}),$6={kernelName:vF,backendName:"webgl",kernelFunc:q6},eee=uu((function e(t){iu(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),tee=uu((function e(t){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var nee={kernelName:bF,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,l=a.clipValueMax;t=zV().getBool("WEBGL_PACK_CLIP")?new tee(o.shape):new eee(o.shape);var u=[[i],[l]];return r.runWebGLProgram(t,[o],o.dtype,u)}},ree=uu((function e(t){iu(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function aee(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var oee={kernelName:yF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new ree(r.shape),i=[aee(r,a.complexTensorInfos.real),aee(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},iee=uu((function e(t){iu(this,e),this.outputShape=[],this.outputShape=sK(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(i,"));"))}var l=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(l,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),lee=uu((function e(t,n){iu(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=sK(t,n);var r=this.outputShape,a=r.length,o=Z4(a),i=Y8("coords",a),l=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var s=1;s<u.length;s++)u[s]=u[s-1]+t[s][n];for(var c=l[n],g=l.slice(-2),d=l.join(),p="if (".concat(c," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(d,"), vec2(").concat(g.join(),"));\n        }"),h=1;h<u.length;h++){var f=u[h-1];p+="\n        if (".concat(c," < ").concat(u[h],"  && ").concat(c," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(uee(l,c,f),"),\n            vec2(").concat(uee(g,c,f),"));\n        }")}var C=u.length,I=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(C,"(").concat(uee(l,c,I),"),\n          vec2(").concat(uee(g,c,I),"));"),this.userCode="\n      float getValue(".concat(l.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}));function uee(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function see(e){var t=e.inputs,n=e.backend,r=t.input;return f7({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var cee={kernelName:gN,backendName:"webgl",kernelFunc:see};function gee(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return O6({inputs:{input:e},backend:n})})),o=e.map((function(e){return see({inputs:{input:e},backend:n})})),i=gee(a,t,n),l=gee(o,t,n),u=I7({inputs:{real:i,imag:l},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}var s=n.shouldExecuteOnCPU(e);if("string"===r&&(s=!0),s){var c=e.map((function(e){var r=dV(e.shape.slice(t));return E7({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),g=c.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),d=sK(c.map((function(e){return e.shape})),1),p=1===c[0].shape[0],h=t8(g,d,r,p),f=sK(e.map((function(e){return e.shape})),t),C=n.makeTensorInfo(f,r,h);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),C}if(e.length>zV().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var I=Math.floor(e.length/2),m=gee(e.slice(0,I),t,n),v=gee(e.slice(I),t,n),b=gee([m,v],t,n);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),b}if(zV().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var A=new lee(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(A,e,r)}var y=function(e,t,n){var r=sK(e.map((function(e){return e.shape})),t),a=e.map((function(e){return E7({inputs:{x:e},attrs:{shape:[-1,dV(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),k=y.tensors2D,Z=y.outShape,S=new iee(k.map((function(e){return e.shape}))),w=n.runWebGLProgram(S,k,r);k.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var B=E7({inputs:{x:w},attrs:{shape:Z},backend:n});return n.disposeIntermediateTensorInfo(w),B}function dee(e){var t=e.inputs,n=e.backend,r=vV(e.attrs.axis,t[0].shape)[0],a=sK(t.map((function(e){return e.shape})),r);if(0===dV(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return dV(e.shape)>0}));return 1===o.length?f7({inputs:{x:o[0]},backend:n}):(uK(o.map((function(e){return e.shape})),r),gee(o,r,n))}var pee={kernelName:kF,backendName:"webgl",kernelFunc:dee},hee=uu((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];iu(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,l=t.padInfo.left,u=t.strideHeight,s=t.strideWidth,c=t.dilationHeight,g=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),f=t.inChannels%4,C="channelsLast"===t.dataFormat,I=C?1:2,m=C?2:3,v=C?3:1,b="",A="";r&&(b=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),A="result = activation(result);");var y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(l,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(I,"], coords[").concat(m,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(g,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(C,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(C,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(C,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(C,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(y,"\n        ").concat(A,"\n        setOutput(result);\n      }\n    ")})),fee=uu((function e(t){iu(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,l=t.strideWidth,u=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,g=t.filterDepth,d=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(g,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(s,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Cee=uu((function e(t,n){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=F4(this.outputShape.length);for(var r=n.dataFormat,a=$9(),o="channelsLast"===r,i=o?0:1,l=o?1:2,u=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),s="",c=0;c<=1;c++)for(var g=0;g<=1;g++)s+="\n          blockIndex = rc.y + ".concat(g,";\n          pos = rc.x + ").concat(c,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(l,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+g,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+g,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(s,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function Iee(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,l=void 0===i?null:i,u=e.preluActivationWeights,s=void 0===u?null:u,c=e.leakyreluAlpha,g=void 0===c?0:c,d=e.activation,p=void 0===d?null:d,h=n.shape,f=o.texData.get(n.dataId),C=a.inChannels,I=h[0]*h[1]*h[2],m=a.outChannels,v="channelsLast"===a.dataFormat,b=[];if(!((1===I||1===m)&&C>1e3)&&f.isPacked&&v&&null!=f.texture&&h[2]%2!==0&&pV(f.shape.slice(-3),h.slice(-3))){var A=h[0]*h[1]*(h[2]+1),y={dataId:n.dataId,shape:[1,A,a.inChannels],dtype:n.dtype},k=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,uV(L9(f.shape,y.shape),(function(){return"packed reshape ".concat(f.shape," to ").concat(y.shape," isn't free")}));var Z=E7({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});b.push(Z);var S=_7({a:y,b:Z,backend:o,transposeA:false,transposeB:false,bias:l,activation:p,preluActivationWeights:s,leakyreluAlpha:g}),w=o.texData.get(S.dataId);uV(w.isPacked,(function(){return"batchMatMul result is expected to be packed"})),f.shape=k,w.shape=a.outShape,(t=f7({inputs:{x:S},backend:o})).shape=a.outShape,b.push(S)}else{var B=E7({inputs:{x:n},backend:o,attrs:{shape:[1,v?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),x=E7({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),G=_7({a:B,b:x,transposeA:false,transposeB:false,backend:o,bias:l,activation:p,preluActivationWeights:s,leakyreluAlpha:g});t=E7({inputs:{x:G},backend:o,attrs:{shape:a.outShape}}),b.push(B),b.push(x),b.push(G)}for(var R=0,W=b;R<W.length;R++){var V=W[R];o.disposeIntermediateTensorInfo(V)}return t}function mee(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,l=e.preluActivationWeights,u=void 0===l?null:l,s=e.leakyreluAlpha,c=void 0===s?0:s,g=e.activation,d=void 0===g?null:g,p=r.filterWidth,h=r.filterHeight,f=r.inChannels,C=r.outWidth,I=r.outHeight,m="channelsLast"===r.dataFormat,v=p*h*f,b=I*C,A=[v,b],y=[],k=E7({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),Z=E7({inputs:{x:n},backend:a,attrs:{shape:[1,v,dV(n.shape)/v]}});y.push(k),y.push(Z);var S=new Cee(A,r),w=[k.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],B=a.runWebGLProgram(S,[k],"float32",w),x=E7({inputs:{x:B},backend:a,attrs:{shape:[1,A[0],A[1]]}});y.push(B),y.push(x);var G=null!=i,R=null!=u,W="leakyrelu"===d,V=d?B7(d,!0):null,F=new x7(x.shape,Z.shape,[1,b,r.outChannels],!0,!1,G,V,R,W),N=[x,Z];if(i&&N.push(i),R&&N.push(u),W){var E=a.makeTensorInfo([],"float32",ZD(c,"float32"));N.push(E),y.push(E)}var D=a.runWebGLProgram(F,N,"float32"),X=E7({inputs:{x:D},backend:a,attrs:{shape:m?[1,I,C,r.outChannels]:[1,r.outChannels,I,C]}});y.push(D);for(var J=0,H=y;J<H.length;J++){var Y=H[J];a.disposeIntermediateTensorInfo(Y)}return X}var vee={kernelName:ZF,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,l=a.strides,u=a.pad,s=a.dataFormat,c=a.dilations,g=a.dimRoundingMode,d=YH(s),p=GH(o.shape,i.shape,l,c,u,g,!1,d);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(zV().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=mee({x:o,filter:i,convInfo:p,backend:r});else{var h=new hee(p);t=r.runWebGLProgram(h,[o,i],"float32")}else t=Iee({x:o,filter:i,convInfo:p,backend:r});var f=E7({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),f}},bee=uu((function e(t){iu(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Aee=uu((function e(t){iu(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,l=n-1-t.padInfo.top,u=r-1-t.padInfo.left,s=i?1:2,c=i?2:3,g=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(g,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(s,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),yee=uu((function e(t){iu(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,l=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(l,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),kee=uu((function e(t){iu(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,l=t.strideWidth,u=n-1-t.padInfo.front,s=r-1-t.padInfo.top,c=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(s,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(l,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Zee={kernelName:SF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,l=r.pad,u=r.dataFormat,s=r.dimRoundingMode,c=r.filterShape,g=YH(u),d=GH(a.shape,c,i,1,l,s,!1,g),p=new bee(d);return n.runWebGLProgram(p,[a,o],"float32")}};var See={kernelName:wF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,l=r.strides,u=r.pad,s=r.dataFormat,c=r.dimRoundingMode,g=YH(s),d=GH(i,o.shape,l,1,u,c,!1,g),p=new Aee(d);return n.runWebGLProgram(p,[a,o],"float32")}};var wee={kernelName:BF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,l=r.pad,u=r.dilations,s=RH(a.shape,o.shape,i,u,l),c=new fee(s);return n.runWebGLProgram(c,[a,o],"float32")}};var Bee={kernelName:xF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,l=r.pad,u=r.filterShape,s=RH(a.shape,u,i,1,l),c=new yee(s);return n.runWebGLProgram(c,[a,o],"float32")}};var xee={kernelName:GF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,l=r.strides,u=RH(r.inputShape,o.shape,l,1,i),s=new kee(u);return n.runWebGLProgram(s,[a,o],"float32")}},Gee=S7({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),Ree={kernelName:RF,backendName:"webgl",kernelFunc:Gee},Wee=S7({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Vee={kernelName:WF,backendName:"webgl",kernelFunc:Wee},Fee=uu((function e(t,n,r,a,o){iu(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var l=(0,i.Z)(t,4),u=l[0],s=l[1],c=l[2],g=l[3],d=(0,i.Z)(n,1)[0],p=(0,i.Z)(r,2),h=p[0],f=p[1];this.outputShape=[d,h,f,g];var C="bilinear"===a?1:0,I="".concat(s-1,".0"),m="".concat(c-1,".0"),v=h>1?["".concat((s-1)/(h-1)),"(y2-y1) * height_ratio","y1*".concat(I," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(I)],b=(0,i.Z)(v,3),A=b[0],y=b[1],k=b[2],Z=f>1?["".concat((c-1)/(f-1)),"(x2-x1) * width_ratio","x1*".concat(m," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(m)],S=(0,i.Z)(Z,3),w=S[0],B=S[1],x=S[2];this.userCode="\n      const float height_ratio = float(".concat(A,");\n      const float width_ratio = float(").concat(w,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(u,") {\n          return;\n        }\n\n        float height_scale = ").concat(y,";\n        float width_scale = ").concat(B,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(I," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(m," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(C," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),Nee={kernelName:NF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,l=r.cropSize,u=r.method,s=r.extrapolationValue,c=new Fee(a.shape,o.shape,l,u,s);return n.runWebGLProgram(c,[a,o,i],"float32")}},Eee=uu((function e(t,n,r){iu(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,o=n?"1.0":"getX(".concat(Dee(a,"coords"),")"),i=t[t.length-1],l="",u="";n?(l=r?"end != ".concat(i-1):"end != 0",u=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(i):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Z4(a)," coords = getOutputCoords();\n        int end = ").concat(Xee(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(u,";\n          ").concat(Xee(a,"coords")," = idx;\n          val *= getX(").concat(Dee(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function Dee(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative product for rank ".concat(e," is not yet supported"))}function Xee(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative product for rank ".concat(e," is not yet supported"))}var Jee={kernelName:VF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,l=r.reverse,u=a.shape.length,s=TY([o],u),c=a;null!=s&&(c=z7({inputs:{x:a},backend:n,attrs:{perm:s}}));var g=KY(1,u)[0];if(g!==u-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(o));for(var d=c.shape[g],p=f7({inputs:{x:c},backend:n}),h=0;h<=Math.ceil(Math.log2(d))-1;h++){var f=new Eee(c.shape,!1,l),C=[[h]],I=p;p=n.runWebGLProgram(f,[p],p.dtype,C),n.disposeIntermediateTensorInfo(I)}if(i){var m=new Eee(c.shape,i,l),v=p;p=n.runWebGLProgram(m,[p],p.dtype),n.disposeIntermediateTensorInfo(v)}if(null!=s){var b=z7({inputs:{x:p},backend:n,attrs:{perm:MY(s)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(c),b}return p}},Hee=uu((function e(t,n,r){iu(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,o=n?"0.0":"getX(".concat(Yee(a,"coords"),")"),i=t[t.length-1],l="",u="";n?(l=r?"end != ".concat(i-1):"end != 0",u=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(i):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Z4(a)," coords = getOutputCoords();\n        int end = ").concat(Tee(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(u,";\n          ").concat(Tee(a,"coords")," = idx;\n          val += getX(").concat(Yee(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function Yee(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function Tee(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var Mee={kernelName:FF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,l=r.reverse,u=a.shape.length,s=TY([o],u),c=a;null!=s&&(c=z7({inputs:{x:a},backend:n,attrs:{perm:s}}));var g=KY(1,u)[0];if(g!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(o));for(var d=c.shape[g],p=f7({inputs:{x:c},backend:n}),h=0;h<=Math.ceil(Math.log2(d))-1;h++){var f=new Hee(c.shape,!1,l),C=[[h]],I=p;p=n.runWebGLProgram(f,[p],p.dtype,C),n.disposeIntermediateTensorInfo(I)}if(i){var m=new Hee(c.shape,i,l),v=p;p=n.runWebGLProgram(m,[p],p.dtype),n.disposeIntermediateTensorInfo(v)}if(null!=s){var b=z7({inputs:{x:p},backend:n,attrs:{perm:MY(s)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(c),b}return p}};var Kee={kernelName:EF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,l=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),s=n.readSync(o.dataId),c=q4(u,s,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}if(2===a.shape.length){var g=n.bufferSync(a),d=n.bufferSync(o),p=$4(g,d,i,l);return n.makeTensorInfo(p.shape,o.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},Pee=function(){function e(t,n,r){iu(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return uu(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var zee={kernelName:DF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat,l=a.shape[0],u=("NHWC"===i?a.shape[1]:a.shape[2])*o,s=("NHWC"===i?a.shape[2]:a.shape[3])*o,c=("NHWC"===i?a.shape[3]:a.shape[1])/(o*o),g=new Pee("NHWC"===i?[l,u,s,c]:[l,c,u,s],o,i);return n.runWebGLProgram(g,[a],a.dtype)}},Lee=uu((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];iu(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=F4(this.outputShape.length);var i=t.filterHeight,l=t.filterWidth,u=t.outChannels/t.inChannels,s="",c="";r&&(s=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),c="result = activation(result);");var g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(s,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(l,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(g,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")})),_ee=uu((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];iu(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=F4(this.outputShape.length);for(var i=t.outChannels/t.inChannels,l=t.padInfo.left,u=t.strideWidth,s=t.dilationWidth,c=t.filterHeight,g=t.filterWidth,d=g,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",h=0;h<g;h++)p+="\n          vec4 xTexelC".concat(2*h,";\n          int xTexelC").concat(2*h,"Ready;\n          vec4 xTexelC").concat(2*h+1,";\n          int xTexelC").concat(2*h+1,"Ready;\n          vec4 xC").concat(h,";");p+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(var f=0;f<g;f++)p+="\n          xTexelC".concat(2*f," = vec4(0.0);\n          xTexelC").concat(2*f,"Ready = 0;\n          xTexelC").concat(2*f+1," = vec4(0.0);\n          xTexelC").concat(2*f+1,"Ready = 0;\n          xC").concat(f," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var C=0;C<(d+1)/2;C++){var I=2*C;if(p+="\n          xC = xCCorner + ".concat(I*s,";\n          "),1===u){if(I<g&&(l%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n              "),p+=1===s&&I>0?"\n                xC".concat(I," = vec4(xTexelC").concat(I-2,".zw, xTexelC").concat(I,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(I," = vec4(previous.zw, xTexelC").concat(I,".xy);\n                  } else {\n                    xC").concat(I," = vec4(0.0, 0.0, xTexelC").concat(I,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                xC").concat(I," = xTexelC").concat(I,";\n                "),I+1<g)){var m=l%2===0?oV(s):s;s%2===0&&l%2===1||s%2!==0&&l%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(m,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(I+1,"Ready == 0) {\n                    xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(I+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(I+1,"Ready = 1;\n                  }\n                  "),s>1&&(p+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(I,"Ready == 0) {\n                      xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(I,"Ready = 1;\n                    }\n                    ")),p+="\n                  xC".concat(I+1," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".xy);\n                  ")):p+=1===m?"\n                    xC".concat(I+1," = xTexelC").concat(I,";\n                    "):"\n                    xCOffset = xC + ".concat(m,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(I+1,"Ready == 0) {\n                      xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(I+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(I+1,"Ready = 1;\n                    }\n\n                    xC").concat(I+1," = xTexelC").concat(I+1,";\n                    ")}}else I<g&&(l%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(I+1,"Ready == 0) {\n                  xTexelC").concat(I+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(I+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I+1,"Ready = 1;\n                }\n\n                xC").concat(I," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".zw);\n              "),I+1<g&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(I+1," = vec4(xTexelC").concat(I+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(I+1,"Ready == 0) {\n                  xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(I+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(I+1,"Ready = 1;\n                }\n\n                xC").concat(I," = vec4(\n                  xTexelC").concat(I,".xy, xTexelC").concat(I+1,".xy);\n              "),I+1<g&&(p+="\n                  xC".concat(I+1," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".zw);\n                "))));I<g&&(p+="\n            wTexel = getW(r, ".concat(I,", d1, q);\n            dotProd += xC").concat(I," * vec4(wTexel.xz, wTexel.xz);\n          "),I+1<g&&(p+="\n              wTexel = getW(r, ".concat(I+1,", d1, q);\n              dotProd += xC").concat(I+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var v="",b="";r&&(v=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),b="result = activation(result);");var A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(A,"\n        ").concat(b,"\n        setOutput(result);\n      }\n    ")}));var Oee={kernelName:XF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,l=r.pad,u=r.dilations,s=r.dimRoundingMode,c=u;null==c&&(c=[1,1]),uV(HH(i,c),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(c,"'")}));var g,d=GH(a.shape,o.shape,i,c,l,s,!0);g=zV().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new _ee(d):new Lee(d);var p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(g,[a,o],"float32",p)}},Uee=uu((function e(t){iu(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),jee=uu((function e(t){iu(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,l=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(l,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Qee={kernelName:JF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,l=r.dilations,u=r.pad,s=r.dimRoundingMode,c=r.filterShape,g=GH(a.shape,c,i,l,u,s,!0),d=new Uee(g);return n.runWebGLProgram(d,[a,o],"float32")}};var qee={kernelName:HF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,l=r.dilations,u=r.pad,s=r.dimRoundingMode,c=GH(r.inputShape,o.shape,i,l,u,s,!0),g=new jee(c);return n.runWebGLProgram(g,[a,o],"float32")}},$ee=uu((function e(t){iu(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var ete={kernelName:YF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,Ae.Z)(r.shape),(0,Ae.Z)(r.shape)),o=dV(r.shape),i=E7({inputs:{x:r},backend:n,attrs:{shape:[o]}}),l=new $ee(o),u=n.runWebGLProgram(l,[i],i.dtype),s=E7({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),s}},tte=uu((function e(t){iu(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,l=t.filterHeight,u=t.filterWidth,s=t.dilationHeight,c=t.dilationWidth,g=a.top,d=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(g,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(l,"; h++) {\n          int hIn = hBeg + h * ").concat(s,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var nte={kernelName:TF,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,l=a.strides,u=a.pad,s=a.dilations,c=wH(o.shape,i.shape,l,u,"NHWC",s),g=new tte(c),d=E7({inputs:{x:t=r.runWebGLProgram(g,[o,i],"float32")},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),d}};var rte={kernelName:zF,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=FK(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,l=a.idDims;EK(o.length,l,r);for(var u=DK(i,l),s=u.path,c=u.steps,g=c.length,d=null,p=o.length,h=[],f=0;f<g;++f){var C,I=ta(c[f]);try{for(I.s();!(C=I.n()).done;){var m=C.value,v=NK(p,l[m]),b=v.permutationIndices,A=v.expandDims,y=void 0;XK(b)?y=r[m]:(y=z7({inputs:{x:r[m]},backend:n,attrs:{perm:b}}),h.push(y));for(var k=y.shape.slice(),Z=0;Z<A.length;++Z)k.splice(A[Z],0,1);pV(y.shape,k)||(y=E7({inputs:{x:y},backend:n,attrs:{shape:k}}),h.push(y)),null===d?d=y:(d=F7({inputs:{a:y,b:d},backend:n}),h.push(d))}}catch(Kle){I.e(Kle)}finally{I.f()}f<g-1&&(s[f]>=0&&(d=K7({inputs:{x:d},backend:n,attrs:{axis:s[f]-(o.length-p),keepDims:!1}}),h.push(d)),p--)}for(var S=0,w=h;S<w.length;S++){var B=w[S];B!==d&&n.disposeIntermediateTensorInfo(B)}return d}},ate=S7({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),ote={kernelName:LF,backendName:"webgl",kernelFunc:ate},ite={kernelName:_F,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=zV().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new h7("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new p7("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},lte=w7({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:n8}),ute={kernelName:UF,backendName:"webgl",kernelFunc:lte},ste=S7({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(AK,";\n  float a1 = ").concat(yK,";\n  float a2 = ").concat(kK,";\n  float a3 = ").concat(ZK,";\n  float a4 = ").concat(SK,";\n  float a5 = ").concat(wK,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),cte={kernelName:OF,backendName:"webgl",kernelFunc:ste},gte=S7({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:r8,dtype:"float32"}),dte={kernelName:jF,backendName:"webgl",kernelFunc:gte};function pte(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,l=o.shape.slice(),u=a;return a<0&&(uV(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),l.splice(u,0,1),E7({inputs:{x:o},backend:r,attrs:{shape:l}})}var hte={kernelName:QF,backendName:"webgl",kernelFunc:pte},fte="return exp(x) - 1.0;",Cte=S7({opSnippet:fte,packedOpSnippet:fte,cpuKernelImpl:a8}),Ite={kernelName:qF,backendName:"webgl",kernelFunc:Cte},mte=uu((function e(t,n,r){iu(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),l=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(l,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function vte(e,t,n){var r=n.texData.get(e.dataId),a=dV(e.shape),o=e.shape[e.shape.length-1],i=E7({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),l=i.shape,u=new mte("real",l,t),s=new mte("imag",l,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],g=n.runWebGLProgram(u,c,"float32"),d=n.runWebGLProgram(s,c,"float32"),p=I7({inputs:{real:g,imag:d},backend:n});n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d);var h=E7({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),h}var bte={kernelName:$F,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return vte(t.input,!1,n)}},Ate=uu((function e(t,n){iu(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function yte(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||xV(a))){var i=yV(o,dV(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var l=new Ate(r,a),u=[[a]];return t.runWebGLProgram(l,[],o,u)}var kte,Zte={kernelName:eN,backendName:"webgl",kernelFunc:yte},Ste=uu((function e(t){iu(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),wte={kernelName:tN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new Ste(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},Bte="return floor(x);",xte=S7({opSnippet:Bte,packedOpSnippet:Bte,cpuKernelImpl:o8}),Gte={kernelName:nN,backendName:"webgl",kernelFunc:xte},Rte=w7({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Wte={kernelName:rN,backendName:"webgl",kernelFunc:Rte},Vte=uu((function e(t){iu(this,e),this.variableNames=["A"];var n=$9(),r=(0,i.Z)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),Fte=uu((function e(t){iu(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=$9(),r=(0,i.Z)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),Nte={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,l="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,u="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,s=l?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=(0,i.Z)(s,2),g=c[0],d=c[1],p=[d,g],h=[d,g,o];(u||l)&&(null==kte&&(kte=document.createElement("canvas").getContext("2d")),kte.canvas.width=g,kte.canvas.height=d,kte.drawImage(a,0,0,g,d),a=kte.canvas);var f=n.makeTensorInfo(p,"int32");n.texData.get(f.dataId).usage=C9.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),a);var C=zV().getBool("WEBGL_PACK")?new Fte(h):new Vte(h),I=n.runWebGLProgram(C,[f],"int32");return n.disposeData(f.dataId),I}};var Ete={kernelName:jE,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,l=n.bias,u=n.preluActivationWeights,s=a.strides,c=a.pad,g=a.dataFormat,d=a.dilations,p=a.dimRoundingMode,h=a.activation,f=a.leakyreluAlpha,C=YH(g),I=GH(o.shape,i.shape,s,d,c,p,!1,C),m=[];if(1!==I.filterHeight||1!==I.filterWidth||1!==I.dilationHeight||1!==I.dilationWidth||1!==I.strideHeight||1!==I.strideWidth||"SAME"!==I.padInfo.type&&"VALID"!==I.padInfo.type)if(zV().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=mee({x:o,filter:i,convInfo:I,backend:r,bias:l,activation:h,preluActivationWeights:u,leakyreluAlpha:f});else{var v=null!=l,b=null!=u,A="leakyrelu"===h,y=h?B7(h,!1):null,k=new hee(I,v,y,b,A),Z=[o,i];if(l&&Z.push(l),u&&Z.push(u),A){var S=r.makeTensorInfo([],"float32",ZD(f,"float32"));Z.push(S),m.push(S)}t=r.runWebGLProgram(k,Z,"float32")}else t=Iee({x:o,filter:i,convInfo:I,backend:r,bias:l,activation:h,preluActivationWeights:u,leakyreluAlpha:f});var w=E7({inputs:{x:t},backend:r,attrs:{shape:I.outShape}});return m.push(t),m.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),w}};var Dte={kernelName:QE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,l=t.preluActivationWeights,u=r.strides,s=r.pad,c=r.dilations,g=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,h=[],f=c;null==f&&(f=[1,1]),uV(HH(u,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(f,"'")}));var C,I=GH(a.shape,o.shape,u,f,s,g,!0),m=zV().getBool("WEBGL_PACK_DEPTHWISECONV")&&I.strideWidth<=2&&I.outChannels/I.inChannels===1,v=d?B7(d,m):null,b=[a,o],A=null!=i,y=null!=l,k="leakyrelu"===d;if(A&&b.push(i),y&&b.push(l),k){var Z=n.makeTensorInfo([],"float32",ZD(p,"float32"));b.push(Z),h.push(Z)}C=m?new _ee(I,A,v,y,k):new Lee(I,A,v,y,k);var S=[[I.padInfo.top,I.padInfo.left],[I.strideHeight,I.strideWidth],[I.dilationHeight,I.dilationWidth],[I.inHeight,I.inWidth]],w=n.runWebGLProgram(C,b,"float32",S);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),w}},Xte=uu((function e(t,n,r){iu(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=Z4(n.length),o=Z4(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(i,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var Jte={kernelName:iN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=a.shape,l=o[o.length-1],u=dV(r.shape),s=IK(r,a),c=(0,i.Z)(s,4),g=c[0],d=c[1],p=c[2],h=c[3],f=E7({inputs:{x:a},backend:n,attrs:{shape:[d,l]}}),C=E7({inputs:{x:r},backend:n,attrs:{shape:[dV(r.shape)/p,p]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var I=n.readSync(a.dataId),m=n.bufferSync(r),v=i8(I,m,r.dtype,d,l,p,h,r.shape,u);return n.makeTensorInfo(g,r.dtype,v.values)}var b=new Xte(l,h,[d,p]),A=n.runWebGLProgram(b,[C,f],C.dtype),y=E7({inputs:{x:A},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(A),y}},Hte=uu((function e(t,n){iu(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=Z4(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function Yte(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,l=r.batchDims,u=vV(i,a.shape)[0];zV().get("DEBUG")&&function(){for(var e=n.readSync(o.dataId),t=a.shape[u],r=function(n){var r=e[n];uV(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},i=0;i<e.length;++i)r(i)}();var s=zK(a,o,u,l),c=dV(o.shape),g=[],d=E7({inputs:{x:a},backend:n,attrs:{shape:[s.batchSize,s.outerSize,s.dimSize,s.sliceSize]}}),p=E7({inputs:{x:o},backend:n,attrs:{shape:[s.batchSize,c/s.batchSize]}});g.push(d),g.push(p);var h=[s.batchSize,s.outerSize,c/s.batchSize,s.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var f=n.bufferSync(p),C=n.bufferSync(d),I=l8(C,f,h);return g.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(s.outputShape,I.dtype,I.values)}var m=new Hte(d.shape,h),v=n.runWebGLProgram(m,[d,p],d.dtype);g.push(v);var b=E7({inputs:{x:v},backend:n,attrs:{shape:s.outputShape}});return g.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}var Tte={kernelName:oN,backendName:"webgl",kernelFunc:Yte},Mte=w7({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:u8,dtype:"bool"}),Kte={kernelName:lN,backendName:"webgl",kernelFunc:Mte},Pte=w7({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:s8}),zte={kernelName:uN,backendName:"webgl",kernelFunc:Pte};var Lte={kernelName:cN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return vte(t.input,!0,n)}},_te=S7({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Ote={kernelName:dN,backendName:"webgl",kernelFunc:_te},Ute=S7({opSnippet:"return float(isinf(x));",dtype:"bool"}),jte={kernelName:pN,backendName:"webgl",kernelFunc:Ute},Qte=S7({opSnippet:"return float(isnan(x));",dtype:"bool"}),qte={kernelName:hN,backendName:"webgl",kernelFunc:Qte},$te=w7({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:c8,dtype:"bool"}),ene={kernelName:CN,backendName:"webgl",kernelFunc:$te},tne=w7({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:g8,dtype:"bool"}),nne={kernelName:IN,backendName:"webgl",kernelFunc:tne};var rne={kernelName:mN,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=d8(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},ane=S7({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:p8}),one={kernelName:vN,backendName:"webgl",kernelFunc:ane},ine=S7({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),lne={kernelName:bN,backendName:"webgl",kernelFunc:ine},une=w7({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),sne={kernelName:AN,backendName:"webgl",kernelFunc:une},cne=S7({opSnippet:"return float(!(x >= 1.0));"}),gne={kernelName:yN,backendName:"webgl",kernelFunc:cne},dne=w7({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),pne={kernelName:kN,backendName:"webgl",kernelFunc:dne},hne=uu((function e(t,n,r,a,o){iu(this,e),this.variableNames=["x"],this.outputShape=[];var i,l=n,u=t[3]-1;this.outputShape=t;var s="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(s,")"):1===o?"1.0/(".concat(s,")"):"exp(log(".concat(s,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(l,"; j <= ").concat(l,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")})),fne=uu((function e(t,n,r,a,o){iu(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,l=n,u=t[3]-1;this.outputShape=t;var s="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(s,")"):1===o?"1.0/(".concat(s,")"):"exp(log(".concat(s,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(l,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(l,"; j <= ").concat(l,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")})),Cne={kernelName:ZN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,l=r.alpha,u=r.beta,s=zV().getBool("WEBGL_PACK_NORMALIZATION")?new fne(a.shape,o,i,l,u):new hne(a.shape,o,i,l,u);return n.runWebGLProgram(s,[a],a.dtype)}},Ine=uu((function e(t,n,r,a,o){iu(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),mne={kernelName:SN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,l=r.depthRadius,u=r.bias,s=r.alpha,c=r.beta,g=new Ine(a.shape,l,u,s,c);return n.runWebGLProgram(g,[a,o,i],a.dtype)}};function vne(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,l=r.keepDims,u=a.shape.length,s=vV(o,a.shape),c=s,g=TY(c,u),d=null!=g,p=n.shouldExecuteOnCPU([a]),h=a;if(d){if(p){for(var f=n.texData.get(h.dataId).values,C=new Array(u),I=0;I<C.length;I++)C[I]=a.shape[g[I]];var m=X8(f,a.shape,a.dtype,g,C);h=n.makeTensorInfo(C,a.dtype),n.texData.get(h.dataId).values=m}else h=M7(a,g,n);c=KY(c.length,u)}YY("max",c,u);var v,b=JY(h.shape,c),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=y;if(l&&(Z=HY(y,s)),p){var S=n.texData.get(h.dataId).values,w=h8(S,dV(k),Z,a.dtype);v=n.makeTensorInfo(Z,a.dtype),n.texData.get(v.dataId).values=w}else v=function(e,t,n,r){var a=dV(t),o=E7({inputs:{x:e},attrs:{shape:[dV(e.shape)/a,a]},backend:r}),i=H7(o,e.dtype,"max",r),l=E7({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),l}(h,k,Z,n);return d&&n.disposeIntermediateTensorInfo(h),v}var bne={kernelName:wN,backendName:"webgl",kernelFunc:vne},Ane=w7({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:f8}),yne={kernelName:BN,backendName:"webgl",kernelFunc:Ane};var kne={kernelName:xN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Q9(a,"maxPool");var o=r.filterSize,i=r.strides,l=r.pad,u=r.dimRoundingMode;uV(HH(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var s=BH(a.shape,o,i,1,l,u);if(1===s.filterWidth&&1===s.filterHeight&&pV(s.inShape,s.outShape))return f7({inputs:{x:a},backend:n});var c=new w6(s,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};var Zne={kernelName:RN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,l=r.pad,u=r.dataFormat,s=r.dimRoundingMode,c=xH(a.shape,o,i,[1,1,1],l,s,u),g=new B6(c,"max",!1);return n.runWebGLProgram(g,[a],a.dtype)}},Sne=uu((function e(t){iu(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,l=o-1-t.padInfo.top,u=i-1-t.padInfo.left,s=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(s," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),wne=uu((function e(t){iu(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,s=t.effectiveFilterHeight,c=t.effectiveFilterWidth,g=u-1-t.padInfo.front,d=s-1-t.padInfo.top,p=c-1-t.padInfo.left,h=u*s*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(g,", ").concat(d,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(s,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(s," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Bne={kernelName:WN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,l=r.strides,u=r.pad,s=r.dimRoundingMode,c=xH(o.shape,i,l,[1,1,1],u,s),g=new B6(c,"max",!0),d=n.runWebGLProgram(g,[o],o.dtype),p=new wne(c),h=n.runWebGLProgram(p,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),h}};var xne={kernelName:GN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;Q9([o,t.output],"maxPoolGrad");var l=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,g=BH(i.shape,l,u,1,s,c),d=new w6(g,"max",!0),p=n.runWebGLProgram(d,[i],i.dtype),h=new Sne(g),f=n.runWebGLProgram(h,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),f}};var Gne={kernelName:VN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,l=n.strides,u=n.pad,s=n.includeBatchInIndex,c=r;uV(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var g=[1,1];uV(HH(l,g),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(l," and dilations '").concat(g,"'")}));var d=BH(a.shape,o,l,g,u),p=function(e,t,n,r){var a=new w6(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new w6(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,s,d,c),h=(0,i.Z)(p,2);return[h[0],h[1]]}};var Rne={kernelName:FN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.keepDims,l=n.axis,u=r,s=a.shape.length,c=vV(l,a.shape),g=c,d=TY(g,s),p=null!=d,h=u.shouldExecuteOnCPU([a]),f=[],C=a;if(p){if(h){for(var I=u.texData.get(C.dataId).values,m=new Array(s),v=0;v<m.length;v++)m[v]=a.shape[d[v]];var b=X8(I,a.shape,a.dtype,d,m);C=u.makeTensorInfo(m,a.dtype),u.texData.get(C.dataId).values=b}else C=M7(a,d,u);f.push(C),g=KY(g.length,s)}YY("sum",g,s);var A=JY(C.shape,g),y=(0,i.Z)(A,2),k=y[0],Z=y[1],S=k;o&&(S=HY(k,c));for(var w=function(e,t,n,r){var a=dV(t),o=E7({inputs:{x:e},attrs:{shape:[dV(e.shape)/a,a]},backend:r}),i=H7(o,"float32","mean",r),l=E7({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),l}(C,Z,S,u),B=0,x=f;B<x.length;B++){var G=x[B];u.disposeIntermediateTensorInfo(G)}return w}};var Wne={kernelName:NN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,l=r.keepDims,u=a.shape.length,s=vV(o,a.shape),c=s,g=TY(c,u),d=a;null!=g&&(d=z7({inputs:{x:a},backend:n,attrs:{perm:g}}),c=KY(c.length,a.shape.length)),YY("min",c,u);var p,h=JY(d.shape,c),f=(0,i.Z)(h,2),C=f[0],I=E7({inputs:{x:d},backend:n,attrs:{shape:[-1,dV(f[1])]}}),m=H7(I,I.dtype,"min",n);return p=E7(l?{inputs:{x:m},backend:n,attrs:{shape:HY(C,s)}}:{inputs:{x:m},backend:n,attrs:{shape:C}}),n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(m),null!=g&&n.disposeIntermediateTensorInfo(d),p}},Vne=w7({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:C8}),Fne={kernelName:EN,backendName:"webgl",kernelFunc:Vne},Nne=uu((function e(t,n,r){iu(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=Z4(a),i=n.map((function(e){return e[0]})).join(","),l=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),s="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(l,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(s,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(s,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(l,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(s,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(s,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),Ene=uu((function e(t,n,r){iu(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=Z4(a),i=n.map((function(e){return e[0]})).join(","),l=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Y8("rc",a),s=Y8("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),g=1===a?"source":"vec2(".concat(s.slice(-2).join(),")"),d="reflect"===r?0:1,p="";if(1===a){var h="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(s.join(),"), ").concat(g,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(s.join(),"), ").concat(g,");\n        }\n      ")}else{var f="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(f,"\n        result[0] = getChannel(getX(").concat(s.join(),"), ").concat(g,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(f,"\n          result[1] = getChannel(getX(").concat(s.join(),"), ").concat(g,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(f,"\n          result[2] = getChannel(getX(").concat(s.join(),"), ").concat(g,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(c,") {\n            ").concat(f,"\n            result[3] = getChannel(getX(").concat(s.join(),"), ").concat(g,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(l,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),Dne={kernelName:DN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,l=zV().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ene(a.shape,o,i):new Nne(a.shape,o,i);return n.runWebGLProgram(l,[a],a.dtype)}},Xne=w7({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Jne={kernelName:XN,backendName:"webgl",kernelFunc:Xne},Hne=uu((function e(t,n,r){iu(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),Yne=w7({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Tne={kernelName:PF,backendName:"webgl",kernelFunc:Yne},Mne="return a - b;",Kne=w7({opSnippet:Mne,packedOpSnippet:Mne,supportsComplex:!0,cpuKernelImpl:N8}),Pne={kernelName:DE,backendName:"webgl",kernelFunc:Kne};function zne(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=vV([r.dim],a.shape),i=vne({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=HY(i.shape,o),u=E7({inputs:{x:i},backend:n,attrs:{shape:l}}),s=Kne({inputs:{a:a,b:u},backend:n}),c=gte({inputs:{x:s},backend:n}),g=K7({inputs:{x:c},backend:n,attrs:{axis:o,keepDims:!1}}),d=E7({inputs:{x:g},backend:n,attrs:{shape:l}}),p=Yne({inputs:{a:c,b:d},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),p}var Lne={kernelName:ZE,backendName:"webgl",kernelFunc:zne};var _ne={kernelName:JN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,l=r.normalized,u=l?a:zne({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),s=u.shape[0],c=u.shape[1],g=new Hne(s,c,o),d=[[i]],p=n.runWebGLProgram(g,[u],"int32",d);return l||n.disposeIntermediateTensorInfo(u),p}};var One={kernelName:YN,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var o=r.texData.get(a.dataId),l=m8(o.values,a.shape,a.dtype),u=(0,i.Z)(l,2),s=u[0],c=u[1];return r.makeTensorInfo(c,a.dtype,s)}return t=zV().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new l7(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new _8(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},Une=lM;var jne={kernelName:MN,backendName:"webgl",kernelFunc:function(e){qE("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,l=r.iouThreshold,u=r.scoreThreshold,s=n.readSync(a.dataId),c=n.readSync(o.dataId),g=Une(s,c,i,l,u).selectedIndices;return n.makeTensorInfo([g.length],"int32",new Int32Array(g))}},Qne=uM;var qne={kernelName:KN,backendName:"webgl",kernelFunc:function(e){qE("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,l=r.iouThreshold,u=r.scoreThreshold,s=r.padToMaxOutputSize,c=n.readSync(a.dataId),g=n.readSync(o.dataId),d=Qne(c,g,i,l,u,s),p=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},$ne=sM;var ere={kernelName:PN,backendName:"webgl",kernelFunc:function(e){qE("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,l=r.iouThreshold,u=r.scoreThreshold,s=r.softNmsSigma,c=n.readSync(a.dataId),g=n.readSync(o.dataId),d=$ne(c,g,i,l,u,s),p=d.selectedIndices,h=d.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},tre=uu((function e(t,n,r,a){iu(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),nre={kernelName:LN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,l=r.offValue,u=dV(a.shape),s=new tre(u,o,i,l),c=E7({inputs:{x:a},backend:n,attrs:{shape:[u]}}),g=n.runWebGLProgram(s,[c],a.dtype);n.disposeIntermediateTensorInfo(c);var d=E7({inputs:{x:g},backend:n,attrs:{shape:[].concat((0,Ae.Z)(a.shape),[o])}});return n.disposeIntermediateTensorInfo(g),d}};function rre(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=O6({inputs:{input:r},backend:n}),o=rre({inputs:{x:a},backend:n}),i=see({inputs:{input:r},backend:n}),l=rre({inputs:{x:i},backend:n}),u=I7({inputs:{real:o,imag:l},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}return yte({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var are={kernelName:LE,backendName:"webgl",kernelFunc:rre};var ore={kernelName:zN,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=O6({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),l=see({inputs:{input:a},backend:r}),u=rre({inputs:{x:l},backend:r}),s=I7({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(u),s}return yte({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var ire={kernelName:_N,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return pte({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){sV(a,e.shape,"All tensors passed to stack must have matching shapes"),uV(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],l=dee({inputs:t.map((function(e){var t=pte({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},lre=uu((function e(t,n,r){iu(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=Z4(a),i=n.map((function(e){return e[0]})).join(","),l=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(l,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(l,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),ure=uu((function e(t,n,r){iu(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=Z4(a),i=n.map((function(e){return e[0]})).join(","),l=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Y8("rc",a),s=Y8("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),g=1===a?"source":"vec2(".concat(s.slice(-2).join(),")"),d=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(c,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(c,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",f=0,C=1===a?2:4;f<C;f++)h+="\n        ".concat(d[f],"\n        if (").concat(p,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(s.join(),"), ").concat(g,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(l,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),sre=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;if(0===dV(a.shape)){var l=o.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return yte({backend:n,attrs:{shape:l,value:i,dtype:a.dtype}})}var u=zV().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ure(a.shape,o,i):new lre(a.shape,o,i),s=[[i]];return n.runWebGLProgram(u,[a],a.dtype,s)},cre={kernelName:ON,backendName:"webgl",kernelFunc:sre},gre=w7({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),dre={kernelName:UN,backendName:"webgl",kernelFunc:gre};var pre={kernelName:QN,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,l=a.axis,u=a.keepDims,s=o.shape.length,c=[],g=vV(l,o.shape),d=g,p=TY(d,s),h=o;if(null!=p&&(h=z7({inputs:{x:o},backend:r,attrs:{perm:p}}),d=KY(d.length,s),c.push(h)),YY("prod",d,s),r.shouldExecuteOnCPU([h])){var f=r.texData.get(h.dataId).values,C=b8(h.shape,h.dtype,f,d),I=C.outVals,m=C.outShape,v=C.outDtype;t=r.makeTensorInfo(m,v,I)}else{var b=JY(h.shape,d),A=(0,i.Z)(b,2),y=A[0],k=dV(A[1]),Z=E7({inputs:{x:h},backend:r,attrs:{shape:[-1,k]}}),S=H7(Z,QD(o.dtype),"prod",r);t=E7({inputs:{x:S},backend:r,attrs:{shape:y}}),c.push(Z),c.push(S)}if(u){c.push(t);var w=HY(t.shape,g);t=E7({inputs:{x:t},backend:r,attrs:{shape:w}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},hre=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,l=A8(r,a,o,i);return t.makeTensorInfo([l.length],i,l)},fre={kernelName:qN,backendName:"webgl",kernelFunc:hre},Cre=S7({opSnippet:"return 1.0 / x;"}),Ire={kernelName:eE,backendName:"webgl",kernelFunc:Cre},mre=S7({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),vre={kernelName:tE,backendName:"webgl",kernelFunc:mre},bre=S7({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Are={kernelName:lE,backendName:"webgl",kernelFunc:bre},yre=uu((function e(t,n,r,a,o){iu(this,e),this.variableNames=["A"],this.outputShape=[];var l=(0,i.Z)(t,4),u=l[0],s=l[1],c=l[2],g=l[3];this.outputShape=[u,n,r,g];var d,p=[a&&n>1?s-1:s,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),kre=uu((function e(t,n,r,a,o){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var l=(0,i.Z)(t,4),u=l[0],s=l[1],c=l[2],g=l[3];this.outputShape=[u,n,r,g];var d,p=[a&&n>1?s-1:s,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],",\n          ").concat(p[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(g-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var Zre={kernelName:oE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,l=r.halfPixelCenters,u=r.size,s=(0,i.Z)(u,2),c=s[0],g=s[1],d=zV().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new kre(a.shape,c,g,o,l):new yre(a.shape,c,g,o,l);return n.runWebGLProgram(d,[a],"float32")}},Sre=uu((function e(t,n,r){iu(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,i.Z)(n,3),o=a[1],l=a[2],u=(0,i.Z)(t,3),s=u[1],c=u[2],g=[r&&s>1?o-1:o,r&&c>1?l-1:l],d=[r&&s>1?s-1:s,r&&c>1?c-1:c],p=g[0]/d[0],h=g[1]/d[1],f=1/p,C=1/h,I=2*Math.ceil(f)+2,m=2*Math.ceil(C)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(f,");\n        const float invWidthScale = float(").concat(C,");\n\n        const int winHeight = int(").concat(I,");\n        const int winWidth = int(").concat(m,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(s,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(l-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var wre={kernelName:iE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,l=new Sre(o.shape,a.shape,i);return n.runWebGLProgram(l,[o],o.dtype)}},Bre=uu((function e(t,n,r,a,o){iu(this,e),this.variableNames=["A"],this.outputShape=[];var l=(0,i.Z)(t,4),u=l[0],s=l[1],c=l[2],g=l[3];this.outputShape=[u,n,r,g];var d,p=[a&&n>1?s-1:s,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],f=a?"0.5":"0.0";d=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(f,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),xre=uu((function e(t,n,r,a,o){iu(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var l=(0,i.Z)(t,4),u=l[0],s=l[1],c=l[2],g=l[3];this.outputShape=[u,n,r,g];var d,p=[a&&n>1?s-1:s,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],f=a?"0.5":"0.0";d=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],",\n          ").concat(p[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(f,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(g-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var Gre={kernelName:rE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,l=r.halfPixelCenters,u=r.size,s=(0,i.Z)(u,2),c=s[0],g=s[1],d=zV().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xre(a.shape,c,g,o,l):new Bre(a.shape,c,g,o,l);return n.runWebGLProgram(d,[a],a.dtype)}},Rre=uu((function e(t,n,r){iu(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,i.Z)(n,3),o=a[1],l=a[2],u=(0,i.Z)(t,3),s=u[1],c=u[2],g=[r&&s>1?o-1:o,r&&c>1?l-1:l],d=[r&&s>1?s-1:s,r&&c>1?c-1:c],p=g[0]/d[0],h=g[1]/d[1],f=1/p,C=1/h,I=2*Math.ceil(f)+2,m=2*Math.ceil(C)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(f,");\n        const float invWidthScale = float(").concat(C,");\n\n        const int winHeight = int(").concat(I,");\n        const int winWidth = int(").concat(m,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(s,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(g[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(g[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(l,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var Wre={kernelName:aE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,l=new Rre(o.shape,a.shape,i);return n.runWebGLProgram(l,[o],o.dtype)}},Vre=uu((function e(t,n){iu(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=Z4(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),Fre=uu((function e(t,n){iu(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=Y8("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),l=Z4(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(o,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(l," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var Nre={kernelName:uE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,l=vV(o,a.shape);if(0===i)return f7({inputs:{x:a},backend:n});var u=zV().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Fre(a.shape,l):new Vre(a.shape,l);return n.runWebGLProgram(u,[a],a.dtype)}},Ere=uu((function e(t,n){iu(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var o="";o="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),Dre={kernelName:OE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,l=n.fillValue,u=n.center,s=r,c=new Ere(a.shape,l),g=gK(u,a.shape[1],a.shape[2]),d=(0,i.Z)(g,2),p=[[d[0],d[1],Math.sin(o),Math.cos(o)]];return s.runWebGLProgram(c,[a],a.dtype,p)}},Xre=S7({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Jre={kernelName:sE,backendName:"webgl",kernelFunc:Xre},Hre=S7({opSnippet:"return inversesqrt(x);",cpuKernelImpl:y8}),Yre={kernelName:cE,backendName:"webgl",kernelFunc:Hre},Tre=uu((function e(t,n,r,a,o,i){iu(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var l=Z4(o.length),u=Z4(i.length),s="";1===r?s="i":2===r&&(s="i, j");var c="getIndices(".concat(s,")"),g="";1===a?g="i":2===a&&(g="i, coords[1]");var d="getUpdates(".concat(g,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(l," strides = ").concat(l,"(").concat(o,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var Mre={kernelName:gE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,l=mK(0,a,i),u=l.sliceRank,s=l.numUpdates,c=l.sliceSize,g=l.strides,d=l.outputSize,p=[d/c,c];if(0===d)return n.makeTensorInfo(i,a.dtype);var h=E7({inputs:{x:a},backend:n,attrs:{shape:[s,u]}}),f=E7({inputs:{x:o},backend:n,attrs:{shape:[s,c]}}),C=n.makeTensorInfo([],"float32",new Float32Array([0])),I=new Tre(s,u,h.shape.length,f.shape.length,g,p),m=n.runWebGLProgram(I,[f,h,C],f.dtype),v=E7({inputs:{x:m},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(C),v}},Kre=uu((function e(t,n,r){var a,o;if(iu(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[],s=0;s<n.length;s++)u.push("".concat(i[s])),s<t&&l.push("".concat(i[s]));a=l.join(),o=u.join()}var c=Z4(r);this.userCode="\n      void main() {\n        ".concat(c," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}));var Pre={kernelName:dE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new Kre(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],jD(a.dtype,o.dtype))}},zre=S7({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(vK,";\n  float scale = ").concat(bK,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),Lre={kernelName:pE,backendName:"webgl",kernelFunc:zre},_re=S7({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:k8}),Ore={kernelName:mE,backendName:"webgl",kernelFunc:_re},Ure=S7({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),jre={kernelName:IE,backendName:"webgl",kernelFunc:Ure},Qre=S7({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),qre={kernelName:fE,backendName:"webgl",kernelFunc:Qre},$re=S7({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),eae={kernelName:CE,backendName:"webgl",kernelFunc:$re},tae=S7({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),nae={kernelName:vE,backendName:"webgl",kernelFunc:tae},rae={kernelName:yE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;uV(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var l=o.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,Ae.Z)(i));for(var s=1+o.length;s<a.shape.length;++s)u.push([0,0]);var c=[],g=sre({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=dK(g.shape,o,l,!1),p=pK(d.length,o.length,!1),h=hK(g.shape,o,l,!1),f=E7({inputs:{x:g},backend:n,attrs:{shape:d}}),C=z7({inputs:{x:f},backend:n,attrs:{perm:p}}),I=E7({inputs:{x:C},backend:n,attrs:{shape:h}});return c.push(g),c.push(f),c.push(C),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),I}};var aae={kernelName:SE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,l=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==l.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(l.shape));var u=n.readSync(r.dataId),s=n.readSync(a.dataId),c=n.readSync(o.dataId),g=n.readSync(l.dataId)[0],d=w8(u,r.shape,r.dtype,s,a.dtype,c,g),p=(0,i.Z)(d,5),h=p[0],f=p[1],C=p[2],I=p[3],m=p[4];return[n.makeTensorInfo(f,r.dtype,h),n.makeTensorInfo([f[0]],a.dtype,C),n.makeTensorInfo([I.length],"bool",new Uint8Array(I.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var oae={kernelName:wE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var l=Array.from(n.readSync(a.dataId)),u=n.readSync(r.dataId),s=Array.from(n.readSync(o.dataId)),c=B8(u,r.shape,r.dtype,l,s),g=(0,i.Z)(c,3),d=g[0],p=g[1],h=g[2];return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};var iae={kernelName:BE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));var l=n.readSync(r.dataId),u=n.readSync(a.dataId),s=n.readSync(o.dataId),c=x8(l,r.shape,r.dtype,u,s,!0),g=(0,i.Z)(c,2),d=g[0],p=g[1];return n.makeTensorInfo(p,r.dtype,d)}};var lae={kernelName:xE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));var l=n.readSync(r.dataId),u=n.readSync(a.dataId),s=n.readSync(o.dataId),c=x8(l,r.shape,r.dtype,u,s),g=(0,i.Z)(c,2),d=g[0],p=g[1];return n.makeTensorInfo(p,r.dtype,d)}};var uae={kernelName:GE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,l=r.outputShape,u=mK(0,a,l),s=u.sliceRank,c=u.numUpdates,g=u.strides,d=u.outputSize,p=new Tre(c,s,a.shape.length,o.shape.length,g,[d,1],!1),h=n.runWebGLProgram(p,[o,a,i],o.dtype),f=E7({inputs:{x:h},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),f}};var sae={kernelName:kE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=vV(r.axis,a.shape)[0],l=HK(a,o,i),u=a.shape.length,s=new Array(u).fill(0),c=a.shape.slice();return l.map((function(e){var t=(0,Ae.Z)(c);t[i]=e;var r=T6({inputs:{x:a},backend:n,attrs:{begin:s,size:t}});return s[i]+=e,r}))}},cae="return sqrt(x);",gae=S7({opSnippet:cae,packedOpSnippet:cae,cpuKernelImpl:G8}),dae={kernelName:bE,backendName:"webgl",kernelFunc:gae},pae={kernelName:WE,backendName:"webgl",kernelFunc:S7({opSnippet:"return x * x;"})},hae="return (a - b) * (a - b);",fae=w7({opSnippet:hae,packedOpSnippet:hae}),Cae={kernelName:RE,backendName:"webgl",kernelFunc:fae};var Iae={kernelName:_E,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=O8+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new _8(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},mae=uu((function e(t,n,r){iu(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=Z4(r.length),i=Z4(r.length),l="";if(1===a)l="coords * strides + begin";else{var u=0;l=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(l,"));\n      }\n    ")}));var vae={kernelName:VE,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,l=a.end,u=a.strides,s=a.beginMask,c=a.endMask,g=a.ellipsisMask,d=a.newAxisMask,p=a.shrinkAxisMask,h=lH(o.shape,i,l,u,s,c,g,d,p),f=h.finalShapeSparse,C=h.finalShape,I=h.isIdentity,m=h.sliceDim0,v=h.isSimpleSlice,b=h.begin,A=h.end,y=h.strides;if(I)t=E7({inputs:{x:o},backend:r,attrs:{shape:C}});else if(m||v){uV(o.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(o.shape.length)}));var k=rH(b,A,y),Z=T6({inputs:{x:o},backend:r,attrs:{begin:b,size:k}});t=E7({inputs:{x:Z},backend:r,attrs:{shape:C}}),r.disposeIntermediateTensorInfo(Z)}else{if(r.shouldExecuteOnCPU([o])){var S=r.readSync(o.dataId),w=GJ(o.shape,o.dtype,S),B=R8(f,w,y,b);t=r.makeTensorInfo(C,o.dtype,B.values)}else{var x=new mae(b,y,f);t=r.runWebGLProgram(x,[o],o.dtype)}}var G=E7({inputs:{x:t},backend:r,attrs:{shape:C}});return r.disposeIntermediateTensorInfo(t),G}};var bae={kernelName:FE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,l=r.leftPad,u=r.rightPad,s=r.padWidth,c=r.preserveShortSequences,g=t.data,d=t.dataSplits,p=n.readSync(g.dataId),h=n.readSync(d.dataId),f=W8(p,h,a,o,l,u,s,c),C=(0,i.Z)(f,2),I=C[0],m=C[1];return[n.makeTensorInfo([I.length],"string",I),n.makeTensorInfo(d.shape,"int32",m)]}};var Aae={kernelName:NE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var l=n.readSync(a.dataId),u=n.readSync(o.dataId)[0],s=V8(l,u,r),c=(0,i.Z)(s,3),g=c[0],d=c[1],p=c[2],h=d.length;return[n.makeTensorInfo([h,2],"int32",g),n.makeTensorInfo([h],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};var yae={kernelName:EE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(a.dataId),i=F8(o,r);return n.makeTensorInfo(a.shape,"int32",i)}},kae=S7({opSnippet:"return tan(x);"}),Zae={kernelName:XE,backendName:"webgl",kernelFunc:kae},Sae=S7({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),wae={kernelName:JE,backendName:"webgl",kernelFunc:Sae},Bae=uu((function e(t,n){iu(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=Z4(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")}));function xae(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype||a.shape.length>5){var i=n.readSync(a.dataId),l="string"===a.dtype?i.map((function(e){return xD(e)})):i,u=GJ(a.shape,a.dtype,l),s=E8(u,o);return n.makeTensorInfo(s.shape,s.dtype,s.values)}var c=new Bae(a.shape,o);return n.runWebGLProgram(c,[a],a.dtype)}var Gae={kernelName:HE,backendName:"webgl",kernelFunc:xae},Rae=uu((function e(t){iu(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),Wae=uu((function e(t){iu(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function Vae(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Fae(e){for(var t=1;t<e;)t*=2;return t}var Nae={kernelName:YE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,l=r.sorted,u=zV().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),s=zV().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,g=c[c.length-1];if(n.shouldExecuteOnCPU([a])||g<u||o>s){var d=n.readSync(a.dataId),p=D8(d,c,a.dtype,o,l),h=(0,i.Z)(p,2),f=h[0],C=h[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(C.shape,C.dtype,C.values)]}if(0===o)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===g)return[a,yte({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var I=n.texData.get(a.dataId),m=null!==I&&I.isPacked,v=m?n.unpackTensor(a):a,b=dV(c)/g,A=E7({inputs:{x:v},attrs:{shape:[b,g]},backend:n});m&&Vae(n,v);for(var y=Fae(o),k=Fae(g),Z=null,S=function(){return null===Z?[A,A]:[A,Z]},w=function(e,t,r){var a=S(),o=new Rae(r),i=[[g],[null===Z?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],l=Z;Z=n.runWebGLProgram(o,a,"int32",i),Vae(n,l)},B=1;B<y;B*=2)for(var x=2*B,G=B;G>=1;G/=2)w(x,G,[b,k]);for(var R=k;R>y;R/=2){var W=S(),V=new Wae([b,R/2]),F=[[g],[null===Z?1:0],[y]],N=Z;Z=n.runWebGLProgram(V,W,"int32",F),Vae(n,N);for(var E=y/2,D=2*E,X=E;X>=1;X/=2)w(D,X,Z.shape)}var J=Z;Z=T6({inputs:{x:Z},backend:n,attrs:{begin:0,size:[b,o]}}),Vae(n,J);var H=Yte({inputs:{x:A,indices:Z},backend:n,attrs:{axis:1,batchDims:1}});Vae(n,A);var Y=c.slice(0,-1);Y.push(o),J=Z,Z=E7({inputs:{x:Z},attrs:{shape:Y},backend:n}),Vae(n,J);var T=H;return H=E7({inputs:{x:H},attrs:{shape:Y},backend:n}),Vae(n,T),[H,Z]}},Eae=uu((function e(t,n,r,a,o,i){iu(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var l,u="nearest"===r?1:2;switch(a){case"constant":default:l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(l," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(l," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(l," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var Dae={kernelName:TE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,l=r.interpolation,u=r.fillMode,s=r.fillValue,c=r.outputShape,g=(0,i.Z)(a.shape,4),d=g[0],p=g[1],h=g[2],f=g[3],C=null!=c?c:[p,h],I=(0,i.Z)(C,2),m=I[0],v=I[1],b=new Eae(p,h,l,u,s,[d,m,v,f]);return n.runWebGLProgram(b,[a,o],"float32")}};var Xae={kernelName:KE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;Q9(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),l=J8(i,a,o.shape,o.dtype),u=l.outputValues,s=l.outputShape,c=l.indices;return[r.makeTensorInfo(s,o.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};var Jae={kernelName:PE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,l=i.shape.length,u=a.shape[o],s=new Array(l-1),c=0,g=0;g<l;g++)g!==o&&(s[c++]=i.shape[g]);var d=[],p=new Array(l).fill(0),h=i.shape.slice();h[o]=1;for(var f=new Array(u),C=0;C<f.length;C++){p[o]=C;var I=T6({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),m=E7({inputs:{x:I},backend:n,attrs:{shape:s}});f[C]=m,d.push(I)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}},Hae=uu((function e(t,n){iu(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,l=i*Math.ceil(o/r);this.outputShape=[a,l];var u=4*Math.floor(r/4),s=r%4,c="\n        sumValue += dot(values, segFilter);\n    ",g="";o%r>0&&(g="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(g,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var Yae={kernelName:zE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,l=a.shape.length,u=[],s=0,c=TY([s],l),g=a;null!=c&&(g=z7({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(g),s=KY(1,l)[0]);var d=function(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}(g.shape,s,i),p=dV([g.shape[s]]),h=E7({inputs:{x:g},backend:n,attrs:{shape:[-1,p]}});u.push(h);var f=function e(t,r,a,o,i){var l=t.shape[0],s=t.shape[1],c=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=RV(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=RV(e,n+1);return n}(s,i),g=new Hae({windowSize:c,inSize:s,batchSize:l,numSegments:i},r),d=n.compileAndRun(g,[t,a],o);if(u.push(d),d.shape[1]===i)return d;var p=hre({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=xae({inputs:{x:p},backend:n,attrs:{reps:[s/c]}});return u.push(p),u.push(h),e(d,r,h,o,i)}(h,"unsortedSegmentSum",o,QD(a.dtype),i),C=E7({inputs:{x:f},backend:n,attrs:{shape:d}}),I=C;if(null!=c){u.push(C);var m=MY(c);I=z7({inputs:{x:I},backend:n,attrs:{perm:m}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),I}},Tae=0,Mae=[O7,j7,q7,e6,r6,i6,l6,u6,h6,f6,I6,v6,A6,k6,S6,x6,G6,V6,F6,N6,X6,K6,P6,z6,j6,$6,nee,m7,oee,pee,vee,Zee,See,wee,Bee,xee,Ree,Vee,Nee,Jee,Mee,Kee,zee,Oee,Qee,qee,ete,nte,rte,ote,ite,ute,cte,dte,hte,Ite,bte,Zte,wte,Gte,Wte,Nte,Ete,Dte,Jte,Tte,Kte,zte,C7,Lte,cee,Ote,jte,qte,A7,ene,nne,rne,one,lne,sne,gne,pne,Cne,mne,bne,yne,kne,Zne,Bne,xne,Gne,Rne,Wne,Fne,Dne,Jne,_ne,N7,One,jne,qne,ere,_6,nre,ore,ire,cre,dre,Z7,pre,fre,U6,Tne,Ire,vre,Are,D7,Zre,wre,Gre,Wre,Nre,Dre,Jre,Yre,Mre,Pre,Lre,Ore,jre,qre,eae,M6,Lne,nae,rae,aae,oae,iae,lae,uae,sae,dae,pae,Cae,Iae,vae,bae,Aae,yae,Pne,P7,Zae,wae,Gae,Nae,Dae,L7,Xae,Jae,Yae,are];Tae<Mae.length;Tae++){aD(Mae[Tae])}var Kae=function(e){var t=e.admin,r=e.user,o=w(),l=(0,n.useState)(10),u=(0,i.Z)(l,2),s=u[0],c=u[1],g=(0,n.useState)(["#","Period ID","record Type","Sensor Type","Value","Date"]),d=(0,i.Z)(g,2),p=d[0],h=(d[1],(0,n.useState)(["period.periodId","record.record","sensortype.sensortype","value","updatedAt"])),f=(0,i.Z)(h,2),C=f[0],I=(f[1],(0,n.useState)([])),m=(0,i.Z)(I,2),v=m[0],b=m[1],A=(0,n.useState)([]),y=(0,i.Z)(A,2),k=y[0],Z=y[1],S=(0,n.useState)([]),x=(0,i.Z)(S,2),G=x[0],R=x[1],W=(0,n.useState)(["".concat(o.pathname,"/edit"),"_id"]),V=(0,i.Z)(W,2),F=V[0],N=(V[1],(0,n.useState)(!0)),E=(0,i.Z)(N,2),D=(E[0],E[1]),X=B(),J=te(),H=(0,n.useState)(!0),Y=(0,i.Z)(H,2),T=Y[0],M=Y[1];ae();(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/admin/query"),{headers:{token:J}});case 3:return n=e.sent,e.next=6,n.json();case 6:(t=e.sent).ok&&(t.data=t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})),b(t.data),Z(t.data),D(!1)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t=[];case 14:M(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),(0,n.useEffect)((function(){c(Math.ceil(k.length/10)),R(k.slice(0,10))}),[k]);return(0,a.jsx)("div",{className:"",children:t||r?T?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(FW(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:s,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(k.length),console.log(e.selected),R(k.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,a.jsxs)("div",{className:"searchbar-container",children:[(0,a.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){X("".concat(o.pathname,"/add"))},children:"Add"}),(0,a.jsx)("button",{className:"btn btn-extract addbtn",onClick:function(){j(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))()},children:(0,a.jsx)($W.Z,{})}),"  ",(0,a.jsx)(HC,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=v.filter((function(e){return"".concat(e.period.periodId," ").concat(e.record.record," ").concat(e.sensortype.sensortype," ").concat(e.value," ").concat(e.updatedAt).toLowerCase().includes(t)}));Z(n)},InputProps:{startAdornment:(0,a.jsx)(YW,{position:"start",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})}})]}),(0,a.jsx)(DZ,{accessor:C,header:p,data:G,link:F})]}):(0,a.jsx)(RW,{})})},Pae=function(e){var t=e.admin,r=e.user,o=(0,n.useState)(!0),l=(0,i.Z)(o,2),u=(l[0],l[1],(0,n.useState)("")),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)(""),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=(0,n.useState)(""),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,n.useState)("manual"),A=(0,i.Z)(b,2),y=A[0],k=(A[1],(0,n.useState)("")),Z=(0,i.Z)(k,2),S=Z[0],w=Z[1],B=te(),x=(0,n.useState)(!0),G=(0,i.Z)(x,2),R=G[0],W=G[1];(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period/query")).then((function(e){return e.json()}));case 3:return(t=e.sent).ok&&E(t.data),e.next=7,fetch("".concat("http://8.218.88.75:5000/","api/sensortype/query"),{headers:{token:B}}).then((function(e){return e.json()}));case 7:(n=e.sent).ok&&H(n.data),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:W(!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[]);var V=(0,n.useState)([]),F=(0,i.Z)(V,2),N=F[0],E=F[1],D=(0,n.useState)([]),X=(0,i.Z)(D,2),J=X[0],H=X[1],Y={options:N,getOptionLabel:function(e){return e.periodId}},T={options:J,getOptionLabel:function(e){return e.sensortype}};return(0,a.jsx)("div",{className:"addpage",children:t||r?R?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=h&&""!=m?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord"),{method:"POST",headers:{token:"".concat(B),"Content-type":"application/json"},body:JSON.stringify({sensortype:c,value:h,periodid:m,record:y})}).then((function(e){return e.json()}));case 3:t=e.sent,w(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("h2",{children:"Add Records"}),S,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(Jp,se(se({},Y),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:m,onInputChange:function(e,t){v(t)},renderInput:function(e){return(0,a.jsx)(HC,se(se({},e),{},{label:"Period ID",variant:"outlined"}))}}))}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(Jp,se(se({},T),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:c,onInputChange:function(e,t){g(t)},renderInput:function(e){return(0,a.jsx)(HC,se(se({},e),{},{label:"Sensor Type",variant:"outlined"}))}}))}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"value",value:h,label:"Value",variant:"outlined",onChange:function(e){return f(e.target.value)}})}),(0,a.jsx)("input",{className:"add",type:"submit"})]})}):(0,a.jsx)(RW,{})})},zae=function(e){var t=e.admin,r=e.user,o=(0,n.useState)(""),l=(0,i.Z)(o,2),u=(l[0],l[1],(0,n.useState)("")),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)({}),p=(0,i.Z)(d,2),h=(p[0],p[1]),f=w().search,C=pl.parse(f).id,I=te(),m=(0,n.useState)(""),v=(0,i.Z)(m,2),b=v[0],A=v[1],y=(0,n.useState)(""),k=(0,i.Z)(y,2),Z=k[0],S=k[1],B=(0,n.useState)(""),x=(0,i.Z)(B,2),G=x[0],R=x[1],W=(0,n.useState)(""),V=(0,i.Z)(W,2),F=V[0],N=V[1],E=(0,n.useState)(""),D=(0,i.Z)(E,2),X=D[0],J=D[1],H=(0,n.useState)(!1),Y=(0,i.Z)(H,2),T=(Y[0],Y[1],(0,n.useState)(!0)),M=(0,i.Z)(T,2),K=M[0],P=M[1];(0,n.useEffect)((function(){null!=C&&j(q().mark((function e(){var t,n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/admin/query?_id=").concat(C),{headers:{token:I}}).then((function(e){return e.json()}));case 3:return(t=e.sent).ok&&(A(t.data[0]._id),S(t.data[0].period.periodId),R(t.data[0].sensortype.sensortype),N(t.data[0].value),J(t.data[0].record.record),h(t.data[0])),e.next=7,fetch("".concat("http://8.218.88.75:5000/","api/sensortype/query"),{headers:{token:I}}).then((function(e){return e.json()}));case 7:return(n=e.sent).ok&&ne(n.data),e.next=11,fetch("".concat("http://8.218.88.75:5000/","api/record/query"),{headers:{token:I}}).then((function(e){return e.json()}));case 11:(r=e.sent).ok&&O(r.data),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:P(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))()}),[]);var z=(0,n.useState)([]),L=(0,i.Z)(z,2),_=L[0],O=L[1],U={options:_,getOptionLabel:function(e){return e.record}},Q=(0,n.useState)([]),$=(0,i.Z)(Q,2),ee=$[0],ne=$[1],re={options:ee,getOptionLabel:function(e){return e.sensortype}};return(0,a.jsx)("div",{className:"addpage",children:t||r?K?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=Z&&""!=F&&""!=G?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/").concat(b),{method:"PUT",headers:{token:"".concat(I),"Content-type":"application/json"},body:JSON.stringify({record:X,periodid:Z,sensortype:G,value:F})}).then((function(e){return e.json()}));case 3:t=e.sent,g(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:t.msg})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("div",{}),(0,a.jsx)("h2",{children:"Edit Record"}),c,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"objectid",value:b,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"periodid",value:Z,label:"Period ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(Jp,se(se({},re),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:G,onInputChange:function(e,t){R(t)},renderInput:function(e){return(0,a.jsx)(HC,se(se({},e),{},{label:"Sensor Type",variant:"outlined"}))}}))}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"value",value:F,label:"Value",variant:"outlined",onChange:function(e){return N(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(Jp,se(se({},U),{},{id:"auto-complete",autoComplete:!0,freeSolo:!0,inputValue:X,onInputChange:function(e,t){J(t)},renderInput:function(e){return(0,a.jsx)(HC,se(se({},e),{},{label:"Record Type",variant:"outlined"}))}}))}),(0,a.jsxs)("div",{className:"addbtn-container",children:[(0,a.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,a.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period/").concat(b),{method:"DELETE",headers:{token:"".concat(I),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,g(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})}):(0,a.jsx)(RW,{})})};var Lae=function(e,t){return function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}(e.length).map((function(n){return{Header:e[n],accessor:t[n]}}))};function _ae(e){return(0,$e.Z)("MuiCard",e)}(0,Ee.Z)("MuiCard",["root"]);var Oae=["className","raised"],Uae=(0,Ce.ZP)(Qd,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),jae=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiCard"}),r=n.className,o=n.raised,i=void 0!==o&&o,u=(0,ge.Z)(n,Oae),s=(0,l.Z)({},n,{raised:i}),c=function(e){var t=e.classes;return(0,he.Z)({root:["root"]},_ae,t)}(s);return(0,a.jsx)(Uae,(0,l.Z)({className:(0,de.Z)(c.root,r),elevation:i?8:void 0,ref:t,ownerState:s},u))}));function Qae(e){return(0,$e.Z)("MuiCardActions",e)}(0,Ee.Z)("MuiCardActions",["root","spacing"]);var qae=["disableSpacing","className"],$ae=(0,Ce.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableSpacing&&t.spacing]}})((function(e){var t=e.ownerState;return(0,l.Z)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),eoe=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiCardActions"}),r=n.disableSpacing,o=void 0!==r&&r,i=n.className,u=(0,ge.Z)(n,qae),s=(0,l.Z)({},n,{disableSpacing:o}),c=function(e){var t=e.classes,n={root:["root",!e.disableSpacing&&"spacing"]};return(0,he.Z)(n,Qae,t)}(s);return(0,a.jsx)($ae,(0,l.Z)({className:(0,de.Z)(c.root,i),ownerState:s,ref:t},u))}));function toe(e){return(0,$e.Z)("MuiCardContent",e)}(0,Ee.Z)("MuiCardContent",["root"]);var noe=["className","component"],roe=(0,Ce.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),aoe=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiCardContent"}),r=n.className,o=n.component,i=void 0===o?"div":o,u=(0,ge.Z)(n,noe),s=(0,l.Z)({},n,{component:i}),c=function(e){var t=e.classes;return(0,he.Z)({root:["root"]},toe,t)}(s);return(0,a.jsx)(roe,(0,l.Z)({as:i,className:(0,de.Z)(c.root,r),ownerState:s,ref:t},u))}));function ooe(e){return(0,$e.Z)("MuiCardActionArea",e)}var ioe=(0,Ee.Z)("MuiCardActionArea",["root","focusVisible","focusHighlight"]),loe=["children","className","focusVisibleClassName"],uoe=(0,Ce.ZP)(it,{name:"MuiCardActionArea",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t,n=e.theme;return t={display:"block",textAlign:"inherit",width:"100%"},(0,le.Z)(t,"&:hover .".concat(ioe.focusHighlight),{opacity:n.palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}}),(0,le.Z)(t,"&.".concat(ioe.focusVisible," .").concat(ioe.focusHighlight),{opacity:n.palette.action.focusOpacity}),t})),soe=(0,Ce.ZP)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:function(e,t){return t.focusHighlight}})((function(e){var t=e.theme;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}})),coe=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiCardActionArea"}),r=n.children,o=n.className,i=n.focusVisibleClassName,u=(0,ge.Z)(n,loe),s=n,c=function(e){var t=e.classes;return(0,he.Z)({root:["root"],focusHighlight:["focusHighlight"]},ooe,t)}(s);return(0,a.jsxs)(uoe,(0,l.Z)({className:(0,de.Z)(c.root,o),focusVisibleClassName:(0,de.Z)(i,c.focusVisible),ref:t,ownerState:s},u,{children:[r,(0,a.jsx)(soe,{className:c.focusHighlight,ownerState:s})]}))}));function goe(e){return(0,$e.Z)("MuiContainer",e)}(0,Ee.Z)("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]);var doe=["className","component","disableGutters","fixed","maxWidth"],poe=(0,Ce.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat((0,lt.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&(0,le.Z)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}))}),(function(e){var t=e.theme;return e.ownerState.fixed&&Object.keys(t.breakpoints.values).reduce((function(e,n){var r=t.breakpoints.values[n];return 0!==r&&(e[t.breakpoints.up(n)]={maxWidth:"".concat(r).concat(t.breakpoints.unit)}),e}),{})}),(function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({},"xs"===n.maxWidth&&(0,le.Z)({},t.breakpoints.up("xs"),{maxWidth:Math.max(t.breakpoints.values.xs,444)}),n.maxWidth&&"xs"!==n.maxWidth&&(0,le.Z)({},t.breakpoints.up(n.maxWidth),{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}))})),hoe=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiContainer"}),r=n.className,o=n.component,i=void 0===o?"div":o,u=n.disableGutters,s=void 0!==u&&u,c=n.fixed,g=void 0!==c&&c,d=n.maxWidth,p=void 0===d?"lg":d,h=(0,ge.Z)(n,doe),f=(0,l.Z)({},n,{component:i,disableGutters:s,fixed:g,maxWidth:p}),C=function(e){var t=e.classes,n=e.fixed,r=e.disableGutters,a=e.maxWidth,o={root:["root",a&&"maxWidth".concat((0,lt.Z)(String(a))),n&&"fixed",r&&"disableGutters"]};return(0,he.Z)(o,goe,t)}(f);return(0,a.jsx)(poe,(0,l.Z)({as:i,ownerState:f,className:(0,de.Z)(C.root,r),ref:t},h))}));var foe=function(){var e=(0,n.useState)([]),t=(0,i.Z)(e,2),r=t[0],o=t[1],l=(0,n.useState)([]),u=(0,i.Z)(l,2),s=u[0],c=u[1],g=(0,n.useState)([]),d=(0,i.Z)(g,2),p=d[0],h=d[1],f=(0,n.useState)(["periodId","updatedAt","fishtype.fishtype"]),C=(0,i.Z)(f,2),I=C[0],m=(C[1],(0,n.useState)(["#","Period ID","Last Update","Fish Type"])),v=(0,i.Z)(m,2),b=v[0],A=(v[1],(0,n.useState)(Lae(b,I))),y=(0,i.Z)(A,2),k=(y[0],y[1],(0,n.useState)(["/dashboard","periodId"])),Z=(0,i.Z)(k,2),S=(Z[0],Z[1],B());(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period/query"));case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t=[];case 13:c(t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0]})}))),h(t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0]})})));case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);var w=(0,n.useState)(10),x=(0,i.Z)(w,2),G=x[0],R=x[1];return(0,n.useEffect)((function(){R(Math.ceil(p.length/10)),o(p.slice(0,10))}),[p]),(0,n.useEffect)((function(){console.log(r)}),[r]),(0,a.jsxs)("div",{style:{marginTop:"10px"},children:[(0,a.jsx)(FW(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:G,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){h(s.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,a.jsx)(HC,{fullWidth:!0,label:"Search...",variant:"outlined",onInput:function(e){var t=e.target.value.toLowerCase(),n=s.filter((function(e){return"".concat(e.periodId," ").concat(e.updatedAt," ").concat(e.fishtype.fishtype).toLowerCase().includes(t)}));h(n)},InputProps:{startAdornment:(0,a.jsx)(YW,{position:"start",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})}}),(0,a.jsx)(hoe,{sx:{display:"flex","flex-wrap":"wrap"},children:r.map((function(e,t){return(0,a.jsxs)(jae,{sx:{minWidth:250,maxWidth:250,margin:"1em",boxShadow:3},variant:"outlined",children:[(0,a.jsx)(coe,{onClick:function(){return S("/dashboard?id=".concat(e.periodId))},children:(0,a.jsxs)(aoe,{children:[(0,a.jsx)(Uy,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:"Periods"}),(0,a.jsx)(Uy,{variant:"h5",component:"div",children:e.periodId}),(0,a.jsx)(Uy,{sx:{mb:1.5},color:"text.secondary",children:e.isEnd?"Ended":"Working"}),(0,a.jsxs)(Uy,{variant:"body2",children:[e.fishtype.fishtype,(0,a.jsx)("br",{})]})]})}),(0,a.jsx)(eoe,{onClick:function(){return S("/dashboard?id=".concat(e.periodId))},children:(0,a.jsx)(It,{size:"small",children:"Learn More"})})]},t)}))}),(0,a.jsx)("br",{})]})},Coe=__webpack_require__(3292),Ioe=__webpack_require__.n(Coe),moe=function(){var e=B(),t=(0,n.useState)(""),r=(0,i.Z)(t,2),o=r[0],l=r[1],u=(0,n.useState)(""),s=(0,i.Z)(u,2),c=(s[0],s[1],(0,n.useRef)(null)),g=(0,n.useState)({position:"absolute",width:"20%",height:"20%",top:"20%",left:"0",display:"none"}),d=(0,i.Z)(g,2),p=d[0];d[1];return(0,a.jsx)("div",{className:"qrcodeContainer",children:(0,a.jsxs)("div",{className:"qrcodeButtonContainer",children:[(0,a.jsx)("button",{className:"qrcodeButton openFile",onClick:function(){c.current.openImageDialog()},children:(0,a.jsx)("i",{className:"fas fa-qrcode fa-2x"})}),(0,a.jsxs)("div",{style:p,children:[o,(0,a.jsx)(Ioe(),{ref:c,delay:300,style:{width:"100%"},onError:function(e){console.log(e)},onScan:function(t){t&&(l(t),e("/dashboard?id=".concat(t)))},legacyMode:!0})]})]})})},voe=(__webpack_require__(6883),__webpack_require__(9613)),boe=__webpack_require__.n(voe);var Aoe=function(e){function t(e,r,u,s,d){for(var p,h,f,C,b,y=0,k=0,Z=0,S=0,w=0,V=0,N=f=p=0,D=0,X=0,J=0,H=0,Y=u.length,T=Y-1,M="",K="",P="",z="";D<Y;){if(h=u.charCodeAt(D),D===T&&0!==k+S+Z+y&&(0!==k&&(h=47===k?10:47),S=Z=y=0,Y++,T++),0===k+S+Z+y){if(D===T&&(0<X&&(M=M.replace(g,"")),0<M.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:M+=u.charAt(D)}h=59}switch(h){case 123:for(p=(M=M.trim()).charCodeAt(0),f=1,H=++D;D<Y;){switch(h=u.charCodeAt(D)){case 123:f++;break;case 125:f--;break;case 47:switch(h=u.charCodeAt(D+1)){case 42:case 47:e:{for(N=D+1;N<T;++N)switch(u.charCodeAt(N)){case 47:if(42===h&&42===u.charCodeAt(N-1)&&D+2!==N){D=N+1;break e}break;case 10:if(47===h){D=N+1;break e}}D=N}}break;case 91:h++;case 40:h++;case 34:case 39:for(;D++<T&&u.charCodeAt(D)!==h;);}if(0===f)break;D++}if(f=u.substring(H,D),0===p&&(p=(M=M.replace(c,"").trim()).charCodeAt(0)),64===p){switch(0<X&&(M=M.replace(g,"")),h=M.charCodeAt(1)){case 100:case 109:case 115:case 45:X=r;break;default:X=W}if(H=(f=t(r,X,f,h,d+1)).length,0<F&&(b=l(3,f,X=n(W,M,J),r,x,B,H,h,d,s),M=X.join(""),void 0!==b&&0===(H=(f=b.trim()).length)&&(h=0,f="")),0<H)switch(h){case 115:M=M.replace(A,i);case 100:case 109:case 45:f=M+"{"+f+"}";break;case 107:f=(M=M.replace(I,"$1 $2"))+"{"+f+"}",f=1===R||2===R&&o("@"+f,3)?"@-webkit-"+f+"@"+f:"@"+f;break;default:f=M+f,112===s&&(K+=f,f="")}else f=""}else f=t(r,n(r,M,J),f,s,d+1);P+=f,f=J=X=N=p=0,M="",h=u.charCodeAt(++D);break;case 125:case 59:if(1<(H=(M=(0<X?M.replace(g,""):M).trim()).length))switch(0===N&&(p=M.charCodeAt(0),45===p||96<p&&123>p)&&(H=(M=M.replace(" ",":")).length),0<F&&void 0!==(b=l(1,M,r,e,x,B,K.length,s,d,s))&&0===(H=(M=b.trim()).length)&&(M="\0\0"),p=M.charCodeAt(0),h=M.charCodeAt(1),p){case 0:break;case 64:if(105===h||99===h){z+=M+u.charAt(D);break}default:58!==M.charCodeAt(H-1)&&(K+=a(M,p,h,M.charCodeAt(2)))}J=X=N=p=0,M="",h=u.charCodeAt(++D)}}switch(h){case 13:case 10:47===k?k=0:0===1+p&&107!==s&&0<M.length&&(X=1,M+="\0"),0<F*E&&l(0,M,r,e,x,B,K.length,s,d,s),B=1,x++;break;case 59:case 125:if(0===k+S+Z+y){B++;break}default:switch(B++,C=u.charAt(D),h){case 9:case 32:if(0===S+y+k)switch(w){case 44:case 58:case 9:case 32:C="";break;default:32!==h&&(C=" ")}break;case 0:C="\\0";break;case 12:C="\\f";break;case 11:C="\\v";break;case 38:0===S+k+y&&(X=J=1,C="\f"+C);break;case 108:if(0===S+k+y+G&&0<N)switch(D-N){case 2:112===w&&58===u.charCodeAt(D-3)&&(G=w);case 8:111===V&&(G=V)}break;case 58:0===S+k+y&&(N=D);break;case 44:0===k+Z+S+y&&(X=1,C+="\r");break;case 34:case 39:0===k&&(S=S===h?0:0===S?h:S);break;case 91:0===S+k+Z&&y++;break;case 93:0===S+k+Z&&y--;break;case 41:0===S+k+y&&Z--;break;case 40:if(0===S+k+y){if(0===p)if(2*w+3*V===533);else p=1;Z++}break;case 64:0===k+Z+S+y+N+f&&(f=1);break;case 42:case 47:if(!(0<S+y+Z))switch(k){case 0:switch(2*h+3*u.charCodeAt(D+1)){case 235:k=47;break;case 220:H=D,k=42}break;case 42:47===h&&42===w&&H+2!==D&&(33===u.charCodeAt(H+2)&&(K+=u.substring(H,D+1)),C="",k=0)}}0===k&&(M+=C)}V=w,w=h,D++}if(0<(H=K.length)){if(X=r,0<F&&(void 0!==(b=l(2,K,X,e,x,B,H,s,d,s))&&0===(K=b).length))return z+K+P;if(K=X.join(",")+"{"+K+"}",0!==R*G){switch(2!==R||o(K,2)||(G=0),G){case 111:K=K.replace(v,":-moz-$1")+K;break;case 112:K=K.replace(m,"::-webkit-input-$1")+K.replace(m,"::-moz-$1")+K.replace(m,":-ms-input-$1")+K}G=0}}return z+K+P}function n(e,t,n){var a=t.trim().split(f);t=a;var o=a.length,i=e.length;switch(i){case 0:case 1:var l=0;for(e=0===i?"":e[0]+" ";l<o;++l)t[l]=r(e,t[l],n).trim();break;default:var u=l=0;for(t=[];l<o;++l)for(var s=0;s<i;++s)t[u++]=r(e[s]+" ",a[l],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(C,"$1"+e.trim());case 58:return e.trim()+t.replace(C,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(C,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var i=e+";",l=2*t+3*n+4*r;if(944===l){e=i.indexOf(":",9)+1;var u=i.substring(e,i.length-1).trim();return u=i.substring(0,e).trim()+u+";",1===R||2===R&&o(u,1)?"-webkit-"+u+u:u}if(0===R||2===R&&!o(i,1))return i;switch(l){case 1015:return 97===i.charCodeAt(10)?"-webkit-"+i+i:i;case 951:return 116===i.charCodeAt(3)?"-webkit-"+i+i:i;case 963:return 110===i.charCodeAt(5)?"-webkit-"+i+i:i;case 1009:if(100!==i.charCodeAt(4))break;case 969:case 942:return"-webkit-"+i+i;case 978:return"-webkit-"+i+"-moz-"+i+i;case 1019:case 983:return"-webkit-"+i+"-moz-"+i+"-ms-"+i+i;case 883:if(45===i.charCodeAt(8))return"-webkit-"+i+i;if(0<i.indexOf("image-set(",11))return i.replace(w,"$1-webkit-$2")+i;break;case 932:if(45===i.charCodeAt(4))switch(i.charCodeAt(5)){case 103:return"-webkit-box-"+i.replace("-grow","")+"-webkit-"+i+"-ms-"+i.replace("grow","positive")+i;case 115:return"-webkit-"+i+"-ms-"+i.replace("shrink","negative")+i;case 98:return"-webkit-"+i+"-ms-"+i.replace("basis","preferred-size")+i}return"-webkit-"+i+"-ms-"+i+i;case 964:return"-webkit-"+i+"-ms-flex-"+i+i;case 1023:if(99!==i.charCodeAt(8))break;return"-webkit-box-pack"+(u=i.substring(i.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+i+"-ms-flex-pack"+u+i;case 1005:return p.test(i)?i.replace(d,":-webkit-")+i.replace(d,":-moz-")+i:i;case 1e3:switch(t=(u=i.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=i.replace(b,"tb");break;case 232:u=i.replace(b,"tb-rl");break;case 220:u=i.replace(b,"lr");break;default:return i}return"-webkit-"+i+"-ms-"+u+i;case 1017:if(-1===i.indexOf("sticky",9))break;case 975:switch(t=(i=e).length-10,l=(u=(33===i.charCodeAt(t)?i.substring(0,t):i).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:i=i.replace(u,"-webkit-"+u)+";"+i;break;case 207:case 102:i=i.replace(u,"-webkit-"+(102<l?"inline-":"")+"box")+";"+i.replace(u,"-webkit-"+u)+";"+i.replace(u,"-ms-"+u+"box")+";"+i}return i+";";case 938:if(45===i.charCodeAt(5))switch(i.charCodeAt(6)){case 105:return u=i.replace("-items",""),"-webkit-"+i+"-webkit-box-"+u+"-ms-flex-"+u+i;case 115:return"-webkit-"+i+"-ms-flex-item-"+i.replace(k,"")+i;default:return"-webkit-"+i+"-ms-flex-line-pack"+i.replace("align-content","").replace(k,"")+i}break;case 973:case 989:if(45!==i.charCodeAt(3)||122===i.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):i.replace(u,"-webkit-"+u)+i.replace(u,"-moz-"+u.replace("fill-",""))+i;break;case 962:if(i="-webkit-"+i+(102===i.charCodeAt(5)?"-ms-"+i:"")+i,211===n+r&&105===i.charCodeAt(13)&&0<i.indexOf("transform",10))return i.substring(0,i.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+i}return i}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),N(2!==t?r:r.replace(Z,"$1"),n,t)}function i(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(y," or ($1)").substring(4):"("+t+")"}function l(e,t,n,r,a,o,i,l,u,c){for(var g,d=0,p=t;d<F;++d)switch(g=V[d].call(s,e,p,n,r,a,o,i,l,u,c)){case void 0:case!1:case!0:case null:break;default:p=g}if(p!==t)return p}function u(e){return void 0!==(e=e.prefix)&&(N=null,e?"function"!==typeof e?R=1:(R=2,N=e):R=0),u}function s(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<F){var a=l(-1,n,r,r,x,B,0,0,0,0);void 0!==a&&"string"===typeof a&&(n=a)}var o=t(W,r,n,0,0);return 0<F&&(void 0!==(a=l(-2,o,r,r,x,B,o.length,0,0,0))&&(o=a)),"",G=0,B=x=1,o}var c=/^\0+/g,g=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,f=/,\r+?/g,C=/([\t\r\n ])*\f?&/g,I=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,v=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,A=/\(\s*(.*)\s*\)/g,y=/([\s\S]*?);/g,k=/-self|flex-/g,Z=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,w=/([^-])(image-set\()/,B=1,x=1,G=0,R=1,W=[],V=[],F=0,N=null,E=0;return s.use=function e(t){switch(t){case void 0:case null:F=V.length=0;break;default:if("function"===typeof t)V[F++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else E=0|!!t}return e},s.set=u,void 0!==e&&u(e),s},yoe=__webpack_require__(3840),koe=__webpack_require__(620),Zoe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Soe=(0,koe.Z)((function(e){return Zoe.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function woe(){return(woe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Boe=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},xoe=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,LG.typeOf)(e)},Goe=Object.freeze([]),Roe=Object.freeze({});function Woe(e){return"function"==typeof e}function Voe(e){return e.displayName||e.name||"Component"}function Foe(e){return e&&"string"==typeof e.styledComponentId}var Noe="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.SC_ATTR)||"data-styled",Eoe="undefined"!=typeof window&&"HTMLElement"in window,Doe=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SECRET_APIPATH:"http://8.218.88.75:5000/"}.SC_DISABLE_SPEEDY));function Xoe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var Joe=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&Xoe(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var o=r;o<a;o++)this.groupSizes[o]=0}for(var i=this.indexOfGroup(e+1),l=0,u=t.length;l<u;l++)this.tag.insertRule(i,t[l])&&(this.groupSizes[e]++,i++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,o=r;o<a;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),Hoe=new Map,Yoe=new Map,Toe=1,Moe=function(e){if(Hoe.has(e))return Hoe.get(e);for(;Yoe.has(Toe);)Toe++;var t=Toe++;return Hoe.set(e,t),Yoe.set(t,e),t},Koe=function(e){return Yoe.get(e)},Poe=function(e,t){t>=Toe&&(Toe=t+1),Hoe.set(e,t),Yoe.set(t,e)},zoe="style["+Noe+'][data-styled-version="5.3.3"]',Loe=new RegExp("^"+Noe+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),_oe=function(e,t,n){for(var r,a=n.split(","),o=0,i=a.length;o<i;o++)(r=a[o])&&e.registerName(t,r)},Ooe=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],a=0,o=n.length;a<o;a++){var i=n[a].trim();if(i){var l=i.match(Loe);if(l){var u=0|parseInt(l[1],10),s=l[2];0!==u&&(Poe(s,u),_oe(e,s,l[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(i)}}},Uoe=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},joe=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(Noe))return r}}(n),o=void 0!==a?a.nextSibling:null;r.setAttribute(Noe,"active"),r.setAttribute("data-styled-version","5.3.3");var i=Uoe();return i&&r.setAttribute("nonce",i),n.insertBefore(r,o),r},Qoe=function(){function e(e){var t=this.element=joe(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}Xoe(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),qoe=function(){function e(e){var t=this.element=joe(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),$oe=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),eie=Eoe,tie={isServer:!Eoe,useCSSOMInjection:!Doe},nie=function(){function e(e,t,n){void 0===e&&(e=Roe),void 0===t&&(t={}),this.options=woe({},tie,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Eoe&&eie&&(eie=!1,function(e){for(var t=document.querySelectorAll(zoe),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(Noe)&&(Ooe(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return Moe(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(woe({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new $oe(a):r?new Qoe(a):new qoe(a),new Joe(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Moe(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Moe(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Moe(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var o=Koe(a);if(void 0!==o){var i=e.names.get(o),l=t.getGroup(a);if(i&&l&&i.size){var u=Noe+".g"+a+'[id="'+o+'"]',s="";void 0!==i&&i.forEach((function(e){e.length>0&&(s+=e+",")})),r+=""+l+u+'{content:"'+s+'"}/*!sc*/\n'}}}return r}(this)},e}(),rie=/(a)(d)/gi,aie=function(e){return String.fromCharCode(e+(e>25?39:97))};function oie(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=aie(t%52)+n;return(aie(t%52)+n).replace(rie,"$1-$2")}var iie=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},lie=function(e){return iie(5381,e)};function uie(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Woe(n)&&!Foe(n))return!1}return!0}var sie=lie("5.3.3"),cie=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&uie(e),this.componentId=t,this.baseHash=iie(sie,t),this.baseStyle=n,nie.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var o=xie(this.rules,e,t,n).join(""),i=oie(iie(this.baseHash,o)>>>0);if(!t.hasNameForId(r,i)){var l=n(o,"."+i,void 0,r);t.insertRules(r,i,l)}a.push(i),this.staticRulesId=i}else{for(var u=this.rules.length,s=iie(this.baseHash,n.hash),c="",g=0;g<u;g++){var d=this.rules[g];if("string"==typeof d)c+=d;else if(d){var p=xie(d,e,t,n),h=Array.isArray(p)?p.join(""):p;s=iie(s,h+g),c+=h}}if(c){var f=oie(s>>>0);if(!t.hasNameForId(r,f)){var C=n(c,"."+f,void 0,r);t.insertRules(r,f,C)}a.push(f)}}return a.join(" ")},e}(),gie=/^\s*\/\/.*$/gm,die=[":","[",".","#"];function pie(e){var t,n,r,a,o=void 0===e?Roe:e,i=o.options,l=void 0===i?Roe:i,u=o.plugins,s=void 0===u?Goe:u,c=new Aoe(l),g=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,o,i,l,u,s,c,g){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===s)return r+"/*|*/";break;case 3:switch(s){case 102:case 112:return e(a[0]+r),"";default:return r+(0===g?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){g.push(e)})),p=function(e,r,o){return 0===r&&-1!==die.indexOf(o[n.length])||o.match(a)?e:"."+t};function h(e,o,i,l){void 0===l&&(l="&");var u=e.replace(gie,""),s=o&&i?i+" "+o+" { "+u+" }":u;return t=l,n=o,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),c(i||!o?"":o,s)}return c.use([].concat(s,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,p))},d,function(e){if(-2===e){var t=g;return g=[],t}}])),h.hash=s.length?s.reduce((function(e,t){return t.name||Xoe(15),iie(e,t.name)}),5381).toString():"",h}var hie=n.createContext(),fie=(hie.Consumer,n.createContext()),Cie=(fie.Consumer,new nie),Iie=pie();function mie(){return(0,n.useContext)(hie)||Cie}function vie(){return(0,n.useContext)(fie)||Iie}function bie(e){var t=(0,n.useState)(e.stylisPlugins),r=t[0],a=t[1],o=mie(),i=(0,n.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,n.useMemo)((function(){return pie({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,n.useEffect)((function(){boe()(r,e.stylisPlugins)||a(e.stylisPlugins)}),[e.stylisPlugins]),n.createElement(hie.Provider,{value:i},n.createElement(fie.Provider,{value:l},e.children))}var Aie=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Iie);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return Xoe(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=Iie),this.name+e.hash},e}(),yie=/([A-Z])/,kie=/([A-Z])/g,Zie=/^ms-/,Sie=function(e){return"-"+e.toLowerCase()};function wie(e){return yie.test(e)?e.replace(kie,Sie).replace(Zie,"-ms-"):e}var Bie=function(e){return null==e||!1===e||""===e};function xie(e,t,n,r){if(Array.isArray(e)){for(var a,o=[],i=0,l=e.length;i<l;i+=1)""!==(a=xie(e[i],t,n,r))&&(Array.isArray(a)?o.push.apply(o,a):o.push(a));return o}return Bie(e)?"":Foe(e)?"."+e.styledComponentId:Woe(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:xie(e(t),t,n,r):e instanceof Aie?n?(e.inject(n,r),e.getName(r)):e:xoe(e)?function e(t,n){var r,a,o=[];for(var i in t)t.hasOwnProperty(i)&&!Bie(t[i])&&(Array.isArray(t[i])&&t[i].isCss||Woe(t[i])?o.push(wie(i)+":",t[i],";"):xoe(t[i])?o.push.apply(o,e(t[i],i)):o.push(wie(i)+": "+(r=i,(null==(a=t[i])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in yoe.Z?String(a).trim():a+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var u}var Gie=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Rie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Woe(e)||xoe(e)?Gie(xie(Boe(Goe,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:Gie(xie(Boe(e,n)))}new Set;var Wie=function(e,t,n){return void 0===n&&(n=Roe),e.theme!==n.theme&&e.theme||t||n.theme},Vie=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Fie=/(^-|-$)/g;function Nie(e){return e.replace(Vie,"-").replace(Fie,"")}var Eie=function(e){return oie(lie(e)>>>0)};function Die(e){return"string"==typeof e&&!0}var Xie=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Jie=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Hie(e,t,n){var r=e[n];Xie(t)&&Xie(r)?Yie(r,t):e[n]=t}function Yie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var i=o[a];if(Xie(i))for(var l in i)Jie(l)&&Hie(e,i[l],l)}return e}var Tie=n.createContext();Tie.Consumer;var Mie={};function Kie(e,t,r){var a=Foe(e),o=!Die(e),i=t.attrs,l=void 0===i?Goe:i,u=t.componentId,s=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Nie(e);Mie[n]=(Mie[n]||0)+1;var r=n+"-"+Eie("5.3.3"+n+Mie[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):u,c=t.displayName,g=void 0===c?function(e){return Die(e)?"styled."+e:"Styled("+Voe(e)+")"}(e):c,d=t.displayName&&t.componentId?Nie(t.displayName)+"-"+t.componentId:t.componentId||s,p=a&&e.attrs?Array.prototype.concat(e.attrs,l).filter(Boolean):l,h=t.shouldForwardProp;a&&e.shouldForwardProp&&(h=t.shouldForwardProp?function(n,r,a){return e.shouldForwardProp(n,r,a)&&t.shouldForwardProp(n,r,a)}:e.shouldForwardProp);var f,C=new cie(r,d,a?e.componentStyle:void 0),I=C.isStatic&&0===l.length,m=function(e,t){return function(e,t,r,a){var o=e.attrs,i=e.componentStyle,l=e.defaultProps,u=e.foldedComponentIds,s=e.shouldForwardProp,c=e.styledComponentId,g=e.target,d=function(e,t,n){void 0===e&&(e=Roe);var r=woe({},t,{theme:e}),a={};return n.forEach((function(e){var t,n,o,i=e;for(t in Woe(i)&&(i=i(r)),i)r[t]=a[t]="className"===t?(n=a[t],o=i[t],n&&o?n+" "+o:n||o):i[t]})),[r,a]}(Wie(t,(0,n.useContext)(Tie),l)||Roe,t,o),p=d[0],h=d[1],f=function(e,t,n,r){var a=mie(),o=vie();return t?e.generateAndInjectStyles(Roe,a,o):e.generateAndInjectStyles(n,a,o)}(i,a,p),C=r,I=h.$as||t.$as||h.as||t.as||g,m=Die(I),v=h!==t?woe({},t,{},h):t,b={};for(var A in v)"$"!==A[0]&&"as"!==A&&("forwardedAs"===A?b.as=v[A]:(s?s(A,Soe,I):!m||Soe(A))&&(b[A]=v[A]));return t.style&&h.style!==t.style&&(b.style=woe({},t.style,{},h.style)),b.className=Array.prototype.concat(u,c,f!==c?f:null,t.className,h.className).filter(Boolean).join(" "),b.ref=C,(0,n.createElement)(I,b)}(f,e,t,I)};return m.displayName=g,(f=n.forwardRef(m)).attrs=p,f.componentStyle=C,f.displayName=g,f.shouldForwardProp=h,f.foldedComponentIds=a?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Goe,f.styledComponentId=d,f.target=a?e.target:e,f.withComponent=function(e){var n=t.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["componentId"]),o=n&&n+"-"+(Die(e)?e:Nie(Voe(e)));return Kie(e,woe({},a,{attrs:p,componentId:o}),r)},Object.defineProperty(f,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=a?Yie({},e.defaultProps,t):t}}),f.toString=function(){return"."+f.styledComponentId},o&&YZ()(f,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),f}var Pie=function(e){return function e(t,n,r){if(void 0===r&&(r=Roe),!(0,LG.isValidElementType)(n))return Xoe(1,String(n));var a=function(){return t(n,r,Rie.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,woe({},r,{},a))},a.attrs=function(a){return e(t,n,woe({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(Kie,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Pie[e]=Pie(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=uie(e),nie.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var a=r(xie(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&nie.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Uoe();return"<style "+[n&&'nonce="'+n+'"',Noe+'="true"','data-styled-version="5.3.3"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?Xoe(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return Xoe(2);var r=((t={})[Noe]="",t["data-styled-version"]="5.3.3",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),a=Uoe();return a&&(r.nonce=a),[n.createElement("style",woe({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new nie({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?Xoe(2):n.createElement(bie,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return Xoe(3)}}();var zie,Lie,_ie=Pie,Oie=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=Rie.apply(void 0,[e].concat(n)).join(""),o=Eie(a);return new Aie(o,a)}(zie||(zie=ye(["\n    0%{opacity:0; transform : translateY(-100px) skewY(10deg) skewX(10deg) rotateZ(30deg);filter:blur(10px);}\n    100%{opacity:1;transform : translateY(0px) skewY(0deg) skewX(0deg) rotateZ(0deg);filter:blur(0px);}\n    "]))),Uie=_ie.div(Lie||(Lie=ye(["\n    display:block;\n    text-align:center;\n    font-size:5vw;\n    span{\n        display:inline-block;\n        opacity:0;\n        animation-name:",";\n        animation-duration:2s;\n        animation-fill-mode:forwards;\n        \n        animation-timing-function: cubic-bezier (0.075,0.82,0.165,1);\n    }\n    span:nth-child(1){\n        animation-delay:0.1s;\n    }\n    span:nth-child(2){\n        animation-delay:0.2s;\n    }\n    span:nth-child(3){\n        animation-delay:0.3s;\n    }\n    span:nth-child(4){\n        animation-delay:0.4s;\n    }\n    span:nth-child(5){\n        animation-delay:0.5s;\n    }\n    span:nth-child(6){\n        animation-delay:0.6s;\n    }\n    span:nth-child(7){\n        animation-delay:0.7s;\n    }\n    span:nth-child(8){\n        animation-delay:0.8s;\n    }\n    span:nth-child(9){\n        animation-delay:0.9s;\n    }\n    span:nth-child(10){\n        animation-delay:1s;\n    }\n    \n"])),Oie),jie=function(e){var t=e.text.split("");return(0,a.jsx)(Uie,{children:t.map((function(e,t){return(0,a.jsx)("span",{children:e},t)}))})},Qie=function(e){var t=e.placeholder,r=(e.data,(0,n.useState)("")),o=(0,i.Z)(r,2),l=o[0],u=o[1],s=B();return(0,a.jsx)("div",{className:"search",children:(0,a.jsx)("div",{className:"searchInputs",children:(0,a.jsx)(HC,{fullWidth:!0,label:t,value:l,variant:"outlined",onChange:function(e){return u(e.target.value)},InputProps:{endAdornment:(0,a.jsx)(YW,{position:"end",children:(0,a.jsx)(rp,{onClick:function(){s("/dashboard?id=".concat(l))},sx:{p:"10px"},"aria-label":"search",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})})}})})})},qie=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(SW,{}),(0,a.jsx)(jie,{text:"Monitoring"}),(0,a.jsx)(jie,{text:"System"}),(0,a.jsx)(Qie,{placeholder:"Enter a fishponds ID..."}),(0,a.jsx)(moe,{})]})};function $ie(e){return(0,$e.Z)("MuiCardMedia",e)}(0,Ee.Z)("MuiCardMedia",["root","media","img"]);var ele=["children","className","component","image","src","style"],tle=(0,Ce.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.isMediaComponent,a=n.isImageComponent;return[t.root,r&&t.media,a&&t.img]}})((function(e){var t=e.ownerState;return(0,l.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})})),nle=["video","audio","picture","iframe","img"],rle=["picture","img"],ale=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiCardMedia"}),r=n.children,o=n.className,i=n.component,u=void 0===i?"div":i,s=n.image,c=n.src,g=n.style,d=(0,ge.Z)(n,ele),p=-1!==nle.indexOf(u),h=!p&&s?(0,l.Z)({backgroundImage:'url("'.concat(s,'")')},g):g,f=(0,l.Z)({},n,{component:u,isMediaComponent:p,isImageComponent:-1!==rle.indexOf(u)}),C=function(e){var t=e.classes,n={root:["root",e.isMediaComponent&&"media",e.isImageComponent&&"img"]};return(0,he.Z)(n,$ie,t)}(f);return(0,a.jsx)(tle,(0,l.Z)({className:(0,de.Z)(C.root,o),as:u,role:!p&&s?"img":void 0,ref:t,style:h,ownerState:f,src:p?s||c:void 0},d,{children:r}))})),ole=ale,ile=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],lle=(0,Ce.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:t.palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:(0,fe.Fq)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat(t.palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})}),(function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat(t.palette.divider),transform:"translateX(0%)"}})}),(function(e){var t=e.ownerState;return(0,l.Z)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),ule=(0,Ce.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:function(e,t){var n=e.ownerState;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((function(e){var t=e.theme,n=e.ownerState;return(0,l.Z)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),sle=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiDivider"}),r=n.absolute,o=void 0!==r&&r,i=n.children,u=n.className,s=n.component,c=void 0===s?i?"div":"hr":s,g=n.flexItem,d=void 0!==g&&g,p=n.light,h=void 0!==p&&p,f=n.orientation,C=void 0===f?"horizontal":f,I=n.role,m=void 0===I?"hr"!==c?"separator":void 0:I,v=n.textAlign,b=void 0===v?"center":v,A=n.variant,y=void 0===A?"fullWidth":A,k=(0,ge.Z)(n,ile),Z=(0,l.Z)({},n,{absolute:o,component:c,flexItem:d,light:h,orientation:C,role:m,textAlign:b,variant:y}),S=function(e){var t=e.absolute,n=e.children,r=e.classes,a=e.flexItem,o=e.light,i=e.orientation,l=e.textAlign,u={root:["root",t&&"absolute",e.variant,o&&"light","vertical"===i&&"vertical",a&&"flexItem",n&&"withChildren",n&&"vertical"===i&&"withChildrenVertical","right"===l&&"vertical"!==i&&"textAlignRight","left"===l&&"vertical"!==i&&"textAlignLeft"],wrapper:["wrapper","vertical"===i&&"wrapperVertical"]};return(0,he.Z)(u,Wc,r)}(Z);return(0,a.jsx)(lle,(0,l.Z)({as:c,className:(0,de.Z)(S.root,u),role:m,ref:t,ownerState:Z},k,{children:i?(0,a.jsx)(ule,{className:S.wrapper,ownerState:Z,children:i}):null}))})),cle=sle;function gle(e){return(0,$e.Z)("MuiCardHeader",e)}var dle=(0,Ee.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ple=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],hle=(0,Ce.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:function(e,t){var n;return(0,l.Z)((n={},(0,le.Z)(n,"& .".concat(dle.title),t.title),(0,le.Z)(n,"& .".concat(dle.subheader),t.subheader),n),t.root)}})({display:"flex",alignItems:"center",padding:16}),fle=(0,Ce.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:function(e,t){return t.avatar}})({display:"flex",flex:"0 0 auto",marginRight:16}),Cle=(0,Ce.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:function(e,t){return t.action}})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Ile=(0,Ce.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:function(e,t){return t.content}})({flex:"1 1 auto"}),mle=n.forwardRef((function(e,t){var n=(0,Ie.Z)({props:e,name:"MuiCardHeader"}),r=n.action,o=n.avatar,i=n.className,u=n.component,s=void 0===u?"div":u,c=n.disableTypography,g=void 0!==c&&c,d=n.subheader,p=n.subheaderTypographyProps,h=n.title,f=n.titleTypographyProps,C=(0,ge.Z)(n,ple),I=(0,l.Z)({},n,{component:s,disableTypography:g}),m=function(e){var t=e.classes;return(0,he.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},gle,t)}(I),v=h;null==v||v.type===Uy||g||(v=(0,a.jsx)(Uy,(0,l.Z)({variant:o?"body2":"h5",className:m.title,component:"span",display:"block"},f,{children:v})));var b=d;return null==b||b.type===Uy||g||(b=(0,a.jsx)(Uy,(0,l.Z)({variant:o?"body2":"body1",className:m.subheader,color:"text.secondary",component:"span",display:"block"},p,{children:b}))),(0,a.jsxs)(hle,(0,l.Z)({className:(0,de.Z)(m.root,i),as:s,ref:t,ownerState:I},C,{children:[o&&(0,a.jsx)(fle,{className:m.avatar,ownerState:I,children:o}),(0,a.jsxs)(Ile,{className:m.content,ownerState:I,children:[v,b]}),r&&(0,a.jsx)(Cle,{className:m.action,ownerState:I,children:r})]}))})),vle=__webpack_require__(568),ble=__webpack_require__(104),Ale=["className","component"];var yle=__webpack_require__(7829),kle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,r=e.defaultClassName,o=void 0===r?"MuiBox-root":r,i=e.generateClassName,u=e.styleFunctionSx,s=void 0===u?ble.Z:u,c=(0,vle.ZP)("div")(s),g=n.forwardRef((function(e,n){var r=(0,ef.Z)(t),u=My(e),s=u.className,g=u.component,d=void 0===g?"div":g,p=(0,ge.Z)(u,Ale);return(0,a.jsx)(c,(0,l.Z)({as:d,ref:n,className:(0,de.Z)(s,i?i(o):o),theme:r},p))}));return g}({defaultTheme:(0,__webpack_require__(7107).Z)(),defaultClassName:"MuiBox-root",generateClassName:yle.Z.generate}),Zle=kle,Sle=function(e){var t=e.fishtankId,r=(0,n.useState)([]),o=(0,i.Z)(r,2),l=(o[0],o[1],(0,n.useState)(!0)),u=(0,i.Z)(l,2),s=u[0],c=u[1],g=(0,n.useState)([]),d=(0,i.Z)(g,2),p=d[0],h=d[1],f=(0,n.useState)([]),C=(0,i.Z)(f,2),I=C[0],m=C[1],v=(0,n.useState)([]),b=(0,i.Z)(v,2),A=(b[0],b[1]),y=(0,n.useState)([]),k=(0,i.Z)(y,2),Z=k[0],S=k[1],w=(0,n.useState)([]),x=(0,i.Z)(w,2),G=x[0],R=x[1],W=(0,n.useState)([]),V=(0,i.Z)(W,2),F=V[0],N=V[1],E=(0,n.useState)([]),D=(0,i.Z)(E,2),X=D[0],J=D[1],H=(0,n.useState)([]),Y=(0,i.Z)(H,2),T=Y[0],M=Y[1],K=B();(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(t,"&sensortype=Water%20temperature")).then((function(e){return e.json()}));case 3:(n=e.sent).ok&&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok&&1==n.data.length?n.data=[n.data[0]]:n.ok=0,m(n.ok?n.data:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e();var n=setInterval((function(){e()}),6e4);return function(){return clearInterval(n)}}),[]),(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(t,"&sensortype=Oxidation-reduction%20potential(ORP)")).then((function(e){return e.json()}));case 3:(n=e.sent).ok&&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok&&1==n.data.length?n.data=[n.data[0]]:n.ok=0,A(n.ok?n.data:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),A([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e();var n=setInterval((function(){e()}),6e4);return function(){return clearInterval(n)}}),[]),(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(t,"&sensortype=Dissolved%20Oxygen")).then((function(e){return e.json()}));case 3:(n=e.sent).ok&&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok&&1==n.data.length?n.data=[n.data[0]]:n.ok=0,S(n.ok?n.data:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e();var n=setInterval((function(){e()}),6e4);return function(){return clearInterval(n)}}),[]),(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(t,"&sensortype=Total%20Dissolved%20Solids")).then((function(e){return e.json()}));case 3:(n=e.sent).ok&&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok&&1==n.data.length?n.data=[n.data[0]]:n.ok=0,R(n.ok?n.data:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),R([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e();var n=setInterval((function(){e()}),6e4);return function(){return clearInterval(n)}}),[]),(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(t,"&sensortype=Ammonium%20concentration")).then((function(e){return e.json()}));case 3:(n=e.sent).ok&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok&1==n.data.length?n.data=[n.data[0]]:n.ok=0,N(n.ok?n.data:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),N([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e();var n=setInterval((function(){e()}),6e4);return function(){return clearInterval(n)}}),[]),(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(t,"&sensortype=Nitrates%20concentration")).then((function(e){return e.json()}));case 3:(n=e.sent).ok&&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok&&1==n.data.length?n.data=[n.data[0]]:n.ok=0,J(n.ok?n.data:[]),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),J([]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e();var n=setInterval((function(){e()}),6e4);return function(){return clearInterval(n)}}),[]),(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(t,"&sensortype=Chlorophyll")).then((function(e){return e.json()}));case 3:(n=e.sent).ok&&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok&&1==n.data.length?n.data=[n.data[0]]:n.ok=0,M(n.ok?n.data:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),M([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e();var n=setInterval((function(){e()}),6e4);return function(){return clearInterval(n)}}),[]),(0,n.useEffect)((function(){var e=function(){var e=j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/sensorrecord/query?periodid=").concat(t,"&sensortype=pH%20value")).then((function(e){return e.json()}));case 3:(n=e.sent).ok&&n.data.length>1?(n.data.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})),n.data=[n.data[0],n.data[1]]):n.ok&&1==n.data.length?n.data=[n.data[0]]:n.ok=0,h(n.ok?n.data:[]),c(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e();var n=setInterval((function(){e()}),6e4);return function(){return clearInterval(n)}}),[]);var P=new Date;return(0,a.jsxs)("div",{className:"DashboardBox",children:[(0,a.jsx)("h1",{children:"Sensor"}),s?(0,a.jsx)(EZ,{}):(0,a.jsxs)("div",{className:"cards-container",children:[(0,a.jsx)(jae,{sx:{minWidth:350,maxWidth:350,margin:"1em",boxShadow:3,display:"flex"},variant:"outlined",children:(0,a.jsxs)(coe,{onClick:function(){return 0==p.length?null:K("/sensorDetails?sensortype=pH%20value&periodid=".concat(t))},children:[(0,a.jsx)(mle,{title:"PH value"}),(0,a.jsx)(cle,{}),(0,a.jsxs)(Zle,{sx:{display:"flex"},children:[(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",width:"60%"},children:[(0,a.jsxs)(aoe,{sx:{flex:"1 0 auto"},children:[(0,a.jsx)(Uy,{component:"div",variant:"h5",children:0===p.length?"No Records":"Value : "+p[0].value}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:p.length<2?"No Changes":(0,a.jsxs)(a.Fragment,{children:["Changes :  ",Math.abs(Math.round(100*(p[0].value-p[1].value))/100),p[0].value-p[1].value>0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null,p[0].value-p[1].value<0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null]})})]}),(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",pl:1,pb:1},children:[(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:"last check :"}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:P.toLocaleDateString()+" - "+P.toLocaleTimeString()})]})]}),(0,a.jsx)(ole,{component:"img",sx:{width:"40%"},image:"/sensor.jpg",alt:"Live from space album cover"})]})]})}),(0,a.jsx)(jae,{sx:{minWidth:350,maxWidth:350,margin:"1em",boxShadow:3,display:"flex"},variant:"outlined",children:(0,a.jsxs)(coe,{onClick:function(){return 0==I.length?null:K("/sensorDetails?sensortype=Water%20temperature&periodid=".concat(t))},children:[(0,a.jsx)(mle,{title:"Water Temperture"}),(0,a.jsx)(cle,{}),(0,a.jsxs)(Zle,{sx:{display:"flex"},children:[(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",width:"60%"},children:[(0,a.jsxs)(aoe,{sx:{flex:"1 0 auto"},children:[(0,a.jsx)(Uy,{component:"div",variant:"h5",children:0===I.length?"No Records":"Value : "+I[0].value}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:I.length<2?"No Changes":(0,a.jsxs)(a.Fragment,{children:["Changes :  ",Math.abs(Math.round(100*(I[0].value-I[1].value))/100),I[0].value-I[1].value>0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null,I[0].value-I[1].value<0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null]})})]}),(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",pl:1,pb:1},children:[(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:"last check :"}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:P.toLocaleDateString()+" - "+P.toLocaleTimeString()})]})]}),(0,a.jsx)(ole,{component:"img",sx:{width:"40%"},image:"/sensor.jpg",alt:"Live from space album cover"})]})]})}),(0,a.jsx)(jae,{sx:{minWidth:350,maxWidth:350,margin:"1em",boxShadow:3,display:"flex"},variant:"outlined",children:(0,a.jsxs)(coe,{onClick:function(){return 0==Z.length?null:K("/sensorDetails?sensortype=Dissolved%20Oxygen&periodid=".concat(t))},children:[(0,a.jsx)(mle,{title:"Dissolved Oxygen"}),(0,a.jsx)(cle,{}),(0,a.jsxs)(Zle,{sx:{display:"flex"},children:[(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",width:"60%"},children:[(0,a.jsxs)(aoe,{sx:{flex:"1 0 auto"},children:[(0,a.jsx)(Uy,{component:"div",variant:"h5",children:0===Z.length?"No Records":"Value : "+Z[0].value}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:Z.length<2?"No Changes":(0,a.jsxs)(a.Fragment,{children:["Changes : ",Math.abs(Math.round(100*(Z[0].value-Z[1].value))/100),Z[0].value-Z[1].value>0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null,Z[0].value-Z[1].value<0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null]})})]}),(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",pl:1,pb:1},children:[(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:"last check :"}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:P.toLocaleDateString()+" - "+P.toLocaleTimeString()})]})]}),(0,a.jsx)(ole,{component:"img",sx:{width:"40%"},image:"/sensor.jpg",alt:"Live from space album cover"})]})]})}),(0,a.jsx)(jae,{sx:{minWidth:350,maxWidth:350,margin:"1em",boxShadow:3,display:"flex"},variant:"outlined",children:(0,a.jsxs)(coe,{onClick:function(){return 0==G.length?null:K("/sensorDetails?sensortype=Total%20Dissolved%20Solids&periodid=".concat(t))},children:[(0,a.jsx)(mle,{title:"Total Dissolved Solids"}),(0,a.jsx)(cle,{}),(0,a.jsxs)(Zle,{sx:{display:"flex"},children:[(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",width:"60%"},children:[(0,a.jsxs)(aoe,{sx:{flex:"1 0 auto"},children:[(0,a.jsx)(Uy,{component:"div",variant:"h5",children:0===G.length?"No Records":"Value : "+G[0].value}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:G.length<2?"No Changes":(0,a.jsxs)(a.Fragment,{children:["Changes :  ",Math.abs(Math.round(100*(G[0].value-G[1].value))/100),G[0].value-G[1].value>0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null,G[0].value-G[1].value<0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null]})})]}),(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",pl:1,pb:1},children:[(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:"last check :"}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:P.toLocaleDateString()+" - "+P.toLocaleTimeString()})]})]}),(0,a.jsx)(ole,{component:"img",sx:{width:"40%"},image:"/sensor.jpg",alt:"Live from space album cover"})]})]})}),(0,a.jsx)(jae,{sx:{minWidth:350,maxWidth:350,margin:"1em",boxShadow:3,display:"flex"},variant:"outlined",children:(0,a.jsxs)(coe,{onClick:function(){return 0==F.length?null:K("/sensorDetails?sensortype=Ammonium%20concentration&periodid=".concat(t))},children:[(0,a.jsx)(mle,{title:"Ammonium concentration"}),(0,a.jsx)(cle,{}),(0,a.jsxs)(Zle,{sx:{display:"flex"},children:[(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",width:"60%"},children:[(0,a.jsxs)(aoe,{sx:{flex:"1 0 auto"},children:[(0,a.jsx)(Uy,{component:"div",variant:"h5",children:0===F.length?"No Records":"Value : "+F[0].value}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:F.length<2?"No Changes":(0,a.jsxs)(a.Fragment,{children:["Changes : ",Math.abs(Math.round(100*(F[0].value-F[1].value))/100),F[0].value-F[1].value>0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null,F[0].value-F[1].value<0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null]})})]}),(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",pl:1,pb:1},children:[(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:"last check :"}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:P.toLocaleDateString()+" - "+P.toLocaleTimeString()})]})]}),(0,a.jsx)(ole,{component:"img",sx:{width:"40%"},image:"/sensor.jpg",alt:"Live from space album cover"})]})]})}),(0,a.jsx)(jae,{sx:{minWidth:350,maxWidth:350,margin:"1em",boxShadow:3,display:"flex"},variant:"outlined",children:(0,a.jsxs)(coe,{onClick:function(){return 0==X.length?null:K("/sensorDetails?sensortype=Nitrates%20concentration&periodid=".concat(t))},children:[(0,a.jsx)(mle,{title:"Nitrates concentration"}),(0,a.jsx)(cle,{}),(0,a.jsxs)(Zle,{sx:{display:"flex"},children:[(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",width:"60%"},children:[(0,a.jsxs)(aoe,{sx:{flex:"1 0 auto"},children:[(0,a.jsx)(Uy,{component:"div",variant:"h5",children:0===X.length?"No Records":"Value : "+X[0].value}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:X.length<2?"No Changes":(0,a.jsxs)(a.Fragment,{children:["Changes : ",Math.abs(Math.round(100*(X[0].value-X[1].value))/100),X[0].value-X[1].value>0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null,X[0].value-X[1].value<0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null]})})]}),(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",pl:1,pb:1},children:[(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:"last check :"}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:P.toLocaleDateString()+" - "+P.toLocaleTimeString()})]})]}),(0,a.jsx)(ole,{component:"img",sx:{width:"40%"},image:"/sensor.jpg",alt:"Live from space album cover"})]})]})}),(0,a.jsx)(jae,{sx:{minWidth:350,maxWidth:350,margin:"1em",boxShadow:3,display:"flex"},variant:"outlined",children:(0,a.jsxs)(coe,{onClick:function(){return 0==T.length?null:K("/sensorDetails?sensortype=Chlorophyll&periodid=".concat(t))},children:[(0,a.jsx)(mle,{title:"Chlorophyll"}),(0,a.jsx)(cle,{}),(0,a.jsxs)(Zle,{sx:{display:"flex"},children:[(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",width:"60%"},children:[(0,a.jsxs)(aoe,{sx:{flex:"1 0 auto"},children:[(0,a.jsx)(Uy,{component:"div",variant:"h5",children:0===T.length?"No Records":"Value : "+T[0].value}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:T.length<2?"No Changes":(0,a.jsxs)(a.Fragment,{children:["Changes : ",Math.abs(Math.round(100*(T[0].value-T[1].value))/100),T[0].value-T[1].value>0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null,T[0].value-T[1].value<0?(0,a.jsx)("i",{className:"fas fa-arrow-up",style:{color:"green"}}):null]})})]}),(0,a.jsxs)(Zle,{sx:{display:"flex",flexDirection:"column",pl:1,pb:1},children:[(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:"last check :"}),(0,a.jsx)(Uy,{variant:"subtitle1",color:"text.secondary",component:"div",children:P.toLocaleDateString()+" - "+P.toLocaleTimeString()})]})]}),(0,a.jsx)(ole,{component:"img",sx:{width:"40%"},image:"/sensor.jpg",alt:"Live from space album cover"})]})]})})]})]})},wle=function(){var e=w().search,t=pl.parse(e).id,r=(0,n.useState)(),o=(0,i.Z)(r,2),l=o[0],u=o[1],s=(0,n.useState)(),c=(0,i.Z)(s,2),g=(c[0],c[1]),d=(0,n.useState)(t),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=(0,n.useState)({display:"none"}),I=(0,i.Z)(C,2),m=I[0],v=(I[1],(0,n.useState)(!1)),b=(0,i.Z)(v,2),A=b[0],y=b[1],k=(0,n.useState)({"Jade Perch":"jadePerch.jpg","Cirrhinus molitorella":"CirrhinusMolitorella.png"}),Z=(0,i.Z)(k,2),S=Z[0],B=(Z[1],(0,n.useState)(!0)),x=(0,i.Z)(B,2),G=x[0],R=x[1];(0,n.useEffect)((function(){j(q().mark((function e(){var n,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/period/query?periodid=").concat(t));case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),y(!0),n=[];case 13:n.ok?(u(n.data[0].fishtype.fishtype),g(n.data[0].updatedAt.split("T")[0]),y(!1),R(!1)):y(!0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),(0,n.useEffect)((function(){j(q().mark((function e(){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bW.toDataURL(t);case 3:n=e.sent,f(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);return A?(0,a.jsx)(ie,{}):(0,a.jsx)(a.Fragment,{children:G?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"wrapper",children:[G?null:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"4em"},children:(0,a.jsxs)(jae,{sx:{maxWidth:345},children:[(0,a.jsx)(ole,{component:"img",height:"140",image:S[l],alt:"green iguana"}),(0,a.jsxs)(aoe,{children:[(0,a.jsx)(Uy,{gutterBottom:!0,variant:"h5",component:"div",sx:{display:"flex",justifyContent:"center"},children:t}),(0,a.jsx)(Uy,{variant:"body2",color:"text.secondary",sx:{display:"flex",justifyContent:"center"},children:l})]}),(0,a.jsx)(cle,{}),(0,a.jsx)(eoe,{sx:{display:"flex",justifyContent:"center"},children:(0,a.jsxs)(It,{onClick:function(){return document.getElementById("qrcode").click()},size:"small",children:[(0,a.jsx)("i",{className:"fas fa-qrcode"}),"QRCode"]})})]})}),(0,a.jsx)("div",{className:"qrcode-contaniner",style:m,children:h?(0,a.jsx)("a",{href:h,id:"qrcode",download:!0,children:(0,a.jsx)("img",{src:h,alt:"qrcode"})}):null})]}),G?null:(0,a.jsx)("div",{className:"cards-container",children:(0,a.jsx)(Sle,{fishtankId:t})})]})})},Ble=function(e){var t=e.admin,r=(e.user,w()),o=(0,n.useState)(10),l=(0,i.Z)(o,2),u=l[0],s=l[1],c=(0,n.useState)(["#","username","createdAt","isAdmin"]),g=(0,i.Z)(c,2),d=g[0],p=(g[1],(0,n.useState)(["username","createdAt","Admin"])),h=(0,i.Z)(p,2),f=h[0],C=(h[1],(0,n.useState)([])),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,n.useState)([]),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=(0,n.useState)([]),S=(0,i.Z)(Z,2),x=S[0],G=S[1],R=(0,n.useState)(["".concat(r.pathname,"/edit"),"_id"]),W=(0,i.Z)(R,2),V=W[0],F=(W[1],(0,n.useState)(!0)),N=(0,i.Z)(F,2),E=(N[0],N[1]),D=B(),X=te(),J=(0,n.useState)(!0),H=(0,i.Z)(J,2),Y=H[0],T=H[1];(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/user"),{method:"GET",headers:{token:"".concat(X)}}).then((function(e){return e.json()}));case 3:(n=e.sent).ok&&((t=n).data=t.data.map((function(e){return se(se({},e),{},{updatedAt:e.updatedAt.split("T")[0],createdAt:e.updatedAt.split("T")[0]})})),t.data.map((function(e){e.Admin=e.isAdmin?"Yes":"No"})),v(t.data),k(t.data),E(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t=[];case 10:T(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),(0,n.useEffect)((function(){s(Math.ceil(y.length/10)),G(y.slice(0,10))}),[y]);return(0,a.jsx)("div",{className:"container",children:t?Y?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(FW(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:u,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){console.log(y.length),console.log(e.selected),G(y.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,a.jsxs)("div",{className:"searchbar-container",children:[(0,a.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){D("".concat(r.pathname,"/add"))},children:"Add"}),"  ",(0,a.jsx)(HC,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=m.filter((function(e){return"".concat(e.username," ").concat(e.createdAt," ").concat(e.Admin).toLowerCase().includes(t)}));k(n)},InputProps:{startAdornment:(0,a.jsx)(YW,{position:"start",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})}})]}),(0,a.jsx)(DZ,{accessor:f,header:d,data:x,link:V})]}):(0,a.jsx)(RW,{})})},xle=function(e){e.user;var t=e.admin,r=(0,n.useState)(!0),o=(0,i.Z)(r,2),l=(o[0],o[1],(0,n.useState)("")),u=(0,i.Z)(l,2),s=u[0],c=u[1],g=(0,n.useState)(""),d=(0,i.Z)(g,2),p=d[0],h=d[1],f=(0,n.useState)(""),C=(0,i.Z)(f,2),I=C[0],m=C[1],v=(0,n.useState)(!1),b=(0,i.Z)(v,2),A=b[0],y=b[1],k=(0,n.useState)(""),Z=(0,i.Z)(k,2),S=Z[0],w=Z[1],B=te(),x=(0,n.useState)(!0),G=(0,i.Z)(x,2),R=G[0],W=G[1];return(0,n.useEffect)((function(){W(!1)}),[]),(0,a.jsx)("div",{className:"addpage",children:t?R?(0,a.jsx)(EZ,{}):(0,a.jsxs)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),console.log(p),console.log(s,p,I,A),""!=s&&""!=p&&""!=I&&""!=A?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/auth/register"),{method:"POST",headers:{token:"".concat(B),"Content-type":"application/json"},body:JSON.stringify({username:s,password:p,email:I,isAdmin:A})}).then((function(e){return e.json()}));case 3:t=e.sent,w(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:[(0,a.jsx)("div",{}),(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("div",{}),(0,a.jsx)("h2",{children:"Add User"}),S,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"username",value:s,label:"Username",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"password",value:p,type:"password",label:"Password",variant:"outlined",onChange:function(e){return h(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"email",value:I,type:"email",label:"E-mail",variant:"outlined",onChange:function(e){return m(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(tk,{control:(0,a.jsx)(sb,{checked:A,onChange:function(e){return y(!A)}}),label:"Admin"})}),(0,a.jsx)("div",{className:"addbtn-container",children:(0,a.jsx)("input",{className:"add",type:"submit",value:"Add"})})]})]}):(0,a.jsx)(RW,{})})},Gle=__webpack_require__(9704),Rle=__webpack_require__.n(Gle),Wle=function(e){e.user;var t=e.admin,r=(0,n.useState)(!0),o=(0,i.Z)(r,2),l=(o[0],o[1]),u=(0,n.useState)(""),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)(""),p=(0,i.Z)(d,2),h=p[0],f=p[1],C=(0,n.useState)(""),I=(0,i.Z)(C,2),m=I[0],v=I[1],b=(0,n.useState)(!1),A=(0,i.Z)(b,2),y=A[0],k=A[1],Z=(0,n.useState)(""),S=(0,i.Z)(Z,2),B=S[0],x=S[1],G=(0,n.useState)({}),R=(0,i.Z)(G,2),W=(R[0],R[1]),V=w().search,F=pl.parse(V).id,N=te(),E=(0,n.useState)(!0),D=(0,i.Z)(E,2),X=D[0],J=D[1];(0,n.useEffect)((function(){null!=F&&j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/user/query?_id=").concat(F),{headers:{token:"".concat(N)}}).then((function(e){return e.json()}));case 3:(t=e.sent).ok&&(g(t.data[0].username),f(Rle().AES.decrypt(t.data[0].password,"FishFarming").toString(Rle().enc.Utf8)),v(t.data[0].email),k(t.data[0].isAdmin),W(t.data[0]),l(!1)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:J(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);return(0,a.jsx)("div",{className:"addpage",children:t?X?(0,a.jsx)(EZ,{}):(0,a.jsxs)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=c&&""!=h&&""!=m&&""!=y?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/user/").concat(F),{method:"PUT",headers:{token:"".concat(N),"Content-type":"application/json"},body:JSON.stringify({username:c,password:h,email:m,isAdmin:y})}).then((function(e){return e.json()}));case 3:t=e.sent,x(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:[(0,a.jsx)("div",{}),(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("div",{}),(0,a.jsx)("h2",{children:"Edit User"}),B,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"username",value:c,label:"Username",variant:"outlined",onChange:function(e){return g(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"password",value:h,type:"password",label:"Password",variant:"outlined",onChange:function(e){return f(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"email",value:m,type:"email",label:"E-mail",variant:"outlined",onChange:function(e){return v(e.target.value)}})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(tk,{control:(0,a.jsx)(sb,{checked:y,onChange:function(e){return k(!y)}}),label:"Admin"})}),(0,a.jsxs)("div",{className:"addbtn-container",children:[(0,a.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,a.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/user/").concat(F),{method:"DELETE",headers:{token:"".concat(N),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,x(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})]}):(0,a.jsx)(RW,{})})},Vle=["btn--primary","btn--outline","btn--test"],Fle=["btn--medium","btn--large"],Nle=function(e){var t=e.children,n=e.type,r=e.onClick,o=e.buttonStyle,i=e.buttonSize,l=e.path,u=Vle.includes(o)?o:Vle[0],s=Fle.includes(i)?i:Fle[0];return(0,a.jsx)(O,{to:l,className:"btn-mobile",children:(0,a.jsx)("button",{className:"btn ".concat(u," ").concat(s),onClick:r,type:n,children:t})})};var Ele=function(e){var t=e.admin,r=e.user,o=(0,n.useState)(!1),l=(0,i.Z)(o,2),u=l[0],s=l[1],c=(0,n.useState)(!0),g=(0,i.Z)(c,2),d=g[0],p=g[1],h=(B(),function(){return s(!1)}),f=(w(),te(),(0,n.useState)(!1)),C=(0,i.Z)(f,2),I=(C[0],C[1],function(){window.innerWidth<=960?p(!1):p(!0)});return(0,n.useEffect)((function(){I()}),[]),window.addEventListener("resize",I),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("nav",{className:"navbar",children:(0,a.jsxs)("div",{className:"navbar-container",children:[(0,a.jsx)(O,{to:"/",className:"navbar-logo",onClick:h,children:"AquaMon"}),(0,a.jsx)("div",{className:"menu-icon",onClick:function(){return s(!u)},children:(0,a.jsx)("i",{className:u?"fas fa-times":"fas fa-bars"})}),(0,a.jsxs)("ul",{className:u?"nav-menu active":"nav-menu",children:[(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)(O,{to:"/",className:"nav-links",onClick:h,children:"Home"})}),t?(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)(O,{to:"/userlist",className:"nav-links",onClick:h,children:"Accounts"})}):null,t||r?(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)(O,{to:"/fishpondsmanagement",className:"nav-links",onClick:h,children:"Management"})}):null,(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)(O,{to:"/fishponds",className:"nav-links",onClick:h,children:"Fishponds"})}),t||r?(0,a.jsx)("li",{children:(0,a.jsx)(O,{to:"/logout",className:"nav-links-mobile",onClick:h,children:"Logout"})}):(0,a.jsx)("li",{children:(0,a.jsx)(O,{to:"/login",className:"nav-links-mobile",onClick:h,children:"Login"})})]}),d&&(t||r?(0,a.jsx)(Nle,{path:"/logout",buttonStyle:"btn--outline",children:"Logout"}):(0,a.jsx)(Nle,{path:"/login",buttonStyle:"btn--outline",children:"Login"}))]})})})},Dle=function(e){var t=e.admin,r=(e.user,w()),o=(0,n.useState)([]),l=(0,i.Z)(o,2),u=l[0],s=l[1],c=(0,n.useState)([]),g=(0,i.Z)(c,2),d=g[0],p=g[1],h=(0,n.useState)([]),f=(0,i.Z)(h,2),C=f[0],I=f[1],m=(0,n.useState)(!0),v=(0,i.Z)(m,2),b=v[0],A=v[1],y=(0,n.useState)(10),k=(0,i.Z)(y,2),Z=k[0],S=k[1],x=(0,n.useState)(["#","Records","Create Date"]),G=(0,i.Z)(x,2),R=G[0],W=(G[1],(0,n.useState)(["record","createdAt"])),V=(0,i.Z)(W,2),F=V[0],N=(V[1],(0,n.useState)(["".concat(r.pathname,"/edit"),"_id"])),E=(0,i.Z)(N,2),D=E[0],X=(E[1],(0,n.useState)(!0)),J=(0,i.Z)(X,2),H=(J[0],J[1],B()),Y=te();(0,n.useEffect)((function(){j(q().mark((function e(){var t,n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/record/admin/query"),{headers:{token:Y}});case 3:return n=e.sent,e.next=6,n.json();case 6:(t=e.sent).ok&&(t.data=t.data.map((function(e){return se(se({},e),{},{createdAt:e.createdAt.split("T")[0],updatedAt:e.updatedAt.split("T")[0]})})),p(t.data),I(t.data)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t=[];case 14:A(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]);return(0,n.useEffect)((function(){S(Math.ceil(C.length/10)),s(C.slice(0,10))}),[C]),(0,n.useEffect)((function(){console.log(u)}),[u]),(0,a.jsx)(a.Fragment,{children:t?b?(0,a.jsx)(EZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(FW(),{previousLabel:"<",nextLabel:">",breakLabel:"...",pageCount:Z,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:function(e){s(C.slice(10*e.selected,10*e.selected+10))},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}),(0,a.jsxs)("div",{className:"searchbar-container",children:[(0,a.jsx)("button",{className:"btn btn-success addbtn",onClick:function(){H("".concat(r.pathname,"/add"))},children:"Add"}),"  ",(0,a.jsx)(HC,{fullWidth:!0,label:"Search...",variant:"outlined",onChange:function(e){var t=e.target.value.toLowerCase(),n=d.filter((function(e){return"".concat(e.sensortype," ").concat(e.unit).toLowerCase().includes(t)}));I(n)},InputProps:{startAdornment:(0,a.jsx)(YW,{position:"start",children:(0,a.jsx)(NW.Z,{fontSize:"large",color:"info"})})}})]}),(0,a.jsx)(DZ,{accessor:F,header:R,data:u,link:D})]}):(0,a.jsx)(RW,{})})},Xle=function(e){var t=e.admin,r=(e.user,(0,n.useState)(!0)),o=(0,i.Z)(r,2),l=o[0],u=o[1],s=(0,n.useState)(""),c=(0,i.Z)(s,2),g=c[0],d=c[1],p=(0,n.useState)(""),h=(0,i.Z)(p,2),f=h[0],C=h[1],I=te();return(0,n.useEffect)((function(){u(!1)}),[]),(0,a.jsx)("div",{className:"addpage",children:t?l?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=g?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/record"),{method:"POST",headers:{token:"".concat(I),"Content-type":"application/json"},body:JSON.stringify({record:g})}).then((function(e){return e.json()}));case 3:t=e.sent,C(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("h2",{children:"Add Sensors"}),f,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"recordtype",value:g,label:"Record Type",variant:"outlined",onChange:function(e){return d(e.target.value)}})}),(0,a.jsx)("input",{className:"add",type:"submit"})]})}):(0,a.jsx)(RW,{})})},Jle=function(e){var t=e.admin,r=(e.user,(0,n.useState)(!0)),o=(0,i.Z)(r,2),l=(o[0],o[1]),u=(0,n.useState)(""),s=(0,i.Z)(u,2),c=s[0],g=s[1],d=(0,n.useState)({}),p=(0,i.Z)(d,2),h=(p[0],p[1]),f=w().search,C=pl.parse(f).id,I=te(),m=(0,n.useState)(""),v=(0,i.Z)(m,2),b=v[0],A=v[1],y=(0,n.useState)(""),k=(0,i.Z)(y,2),Z=k[0],S=k[1],B=(0,n.useState)(!0),x=(0,i.Z)(B,2),G=x[0],R=x[1];(0,n.useEffect)((function(){null!=C&&j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/record/admin/query?_id=").concat(C),{headers:{token:I}}).then((function(e){return e.json()}));case 3:t=e.sent,console.log(t),t.ok&&(A(t.data[0]._id),S(t.data[0].record),h(t.data[0]),l(!1)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:R(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]);return(0,a.jsx)("div",{className:"addpage",children:t?G?(0,a.jsx)(EZ,{}):(0,a.jsx)("form",{className:"addform",onSubmit:function(e){e.preventDefault(),""!=Z?j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(" ".concat("http://8.218.88.75:5000/","api/record/").concat(b),{method:"PUT",headers:{token:"".concat(I),"Content-type":"application/json"},body:JSON.stringify({record:Z})}).then((function(e){return e.json()}));case 3:t=e.sent,g(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():alert("Please provide required infomation")},children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("div",{}),(0,a.jsx)("h2",{children:"Edit Sensors"}),c,(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"objectid",value:b,label:"Object ID (Read Only)",variant:"outlined",readOnly:!0})}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)(HC,{fullWidth:!0,id:"recordtype",value:Z,label:"Record Type",variant:"outlined",onChange:function(e){return S(e.target.value)}})}),(0,a.jsxs)("div",{className:"addbtn-container",children:[(0,a.jsx)("input",{className:"add",type:"submit",value:"Update"}),(0,a.jsx)("input",{className:"add delete",type:"button",value:"Delete",onClick:function(){j(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://8.218.88.75:5000/","api/record/").concat(b),{method:"DELETE",headers:{token:"".concat(I),"Content-type":"application/json"}}).then((function(e){return e.json()}));case 3:t=e.sent,g(t.ok?(0,a.jsx)("h3",{children:t.msg}):(0,a.jsx)("h4",{children:"Error Occur"})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}})]})]})}):(0,a.jsx)(RW,{})})},Hle=function(){return(0,a.jsx)("div",{style:{height:300,width:"100%"},children:(0,a.jsx)(gZ,{rows:[{id:1,col1:"Hello",col2:"World"},{id:2,col1:"DataGridPro",col2:"is Awesome"},{id:3,col1:"MUI",col2:"is Amazing"}],columns:[{field:"col1",headerName:"Column 1",width:150},{field:"col2",headerName:"Column 2",width:150}]})})},Yle=function(){var e=w(),t=(0,n.useState)(!1),r=(0,i.Z)(t,2),o=r[0],l=r[1],u=(0,n.useState)(!1),s=(0,i.Z)(u,2),c=s[0],g=s[1];return(0,n.useEffect)((function(){j(q().mark((function e(){var t,n,r,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:t=e.sent,n=(0,i.Z)(t,2),r=n[0],a=n[1],g(a),l(r),(r||a)&&ne();case 9:case"end":return e.stop()}}),e)})))()}),[e.pathname]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ele,{admin:c,user:o}),(0,a.jsxs)(k,{children:[(0,a.jsx)(A,{path:"/testing",element:(0,a.jsx)(Hle,{})}),(0,a.jsx)(A,{path:"/loading",element:(0,a.jsx)(EZ,{})}),(0,a.jsx)(A,{path:"/testingCSV",element:(0,a.jsx)(vt,{})}),(0,a.jsx)(A,{path:"/logout",element:(0,a.jsx)(oe,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/records/edit",element:(0,a.jsx)(Jle,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/records/add",element:(0,a.jsx)(Xle,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/sensorrecords/edit",element:(0,a.jsx)(zae,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/sensorrecords/add",element:(0,a.jsx)(Pae,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/sensors/edit",element:(0,a.jsx)(QW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/sensors/add",element:(0,a.jsx)(qW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/periods/edit",element:(0,a.jsx)(jW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/periods/add",element:(0,a.jsx)(UW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/fishs/edit",element:(0,a.jsx)(OW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/fishs/add",element:(0,a.jsx)(_W,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/fishponds/edit",element:(0,a.jsx)(LW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/fishponds/add",element:(0,a.jsx)(zW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/records",element:(0,a.jsx)(Dle,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/sensorrecords",element:(0,a.jsx)(Kae,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/periods",element:(0,a.jsx)(KW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/sensors",element:(0,a.jsx)(PW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/fishs",element:(0,a.jsx)(MW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/fishpondsmanagement/fishponds",element:(0,a.jsx)(TW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/login",element:(0,a.jsx)(xW,{})}),(0,a.jsx)(A,{path:"/fishpondsmanagement",element:(0,a.jsx)(WW,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/testingAPI",element:(0,a.jsx)(wW,{})}),(0,a.jsx)(A,{path:"/",element:(0,a.jsx)(qie,{})}),(0,a.jsx)(A,{path:"/fish",element:(0,a.jsx)(SW,{})}),(0,a.jsx)(A,{path:"/fishponds",element:(0,a.jsx)(foe,{})}),(0,a.jsx)(A,{path:"/sensordetails",element:(0,a.jsx)(XZ,{})}),(0,a.jsx)(A,{path:"/dashboard",element:(0,a.jsx)(wle,{})}),(0,a.jsx)(A,{path:"/userlist",element:(0,a.jsx)(Ble,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/userlist/add",element:(0,a.jsx)(xle,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/userlist/edit",element:(0,a.jsx)(Wle,{admin:c,user:o})}),(0,a.jsx)(A,{path:"/qrcode",element:(0,a.jsx)(ZW,{})}),(0,a.jsx)(A,{path:"*",element:(0,a.jsx)(ie,{})})]})]})},Tle=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"content",children:(0,a.jsx)(_,{children:(0,a.jsx)(Yle,{})})}),(0,a.jsx)(o,{})]})},Mle=function(e){e&&e instanceof Function&&__webpack_require__.e(787).then(__webpack_require__.bind(__webpack_require__,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};r.render((0,a.jsx)(n.StrictMode,{children:(0,a.jsx)(Tle,{})}),document.getElementById("root")),Mle()}()})();
//# sourceMappingURL=main.de6220c4.js.map